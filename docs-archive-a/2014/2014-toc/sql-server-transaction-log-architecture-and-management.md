---
title: Arquitetura e gerenciamento do log de transações do SQL Server 2014 | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: 4d1a4f97-3fe4-44af-9d4f-f884a6eaa457
author: rothja
ms.author: jroth
ms.openlocfilehash: 8d32950d94bff22d6549c468e8fe8db3f30fd09a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87570358"
---
# <a name="sql-server-2014-transaction-log-architecture-and-management"></a><span data-ttu-id="d4e3f-102">Arquitetura e gerenciamento do log de transações do SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="d4e3f-102">SQL Server 2014 Transaction Log Architecture and Management</span></span>

<span data-ttu-id="d4e3f-103">**Aplica-se a:** SQL Server (a partir de 2008)</span><span class="sxs-lookup"><span data-stu-id="d4e3f-103">**Applies to:** SQL Server (starting with 2008)</span></span>

  <span data-ttu-id="d4e3f-104">Todo banco de dados do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] tem um log de transações que registra todas as transações e modificações feitas no banco de dados a cada transação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-104">Every [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database has a transaction log that records all transactions and the database modifications that are made by each transaction.</span></span> <span data-ttu-id="d4e3f-105">O log de transações é um componente crítico do banco de dados e, se houver uma falha do sistema, será necessário que o log de transações retorne seu banco de dados a um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-105">The transaction log is a critical component of the database and, if there is a system failure, the transaction log might be required to bring your database back to a consistent state.</span></span> <span data-ttu-id="d4e3f-106">Este guia fornece informações sobre a arquitetura física e lógica do log de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-106">This guide provides information about the physical and logical architecture of the transaction log.</span></span> <span data-ttu-id="d4e3f-107">A compreensão da arquitetura pode melhorar sua efetividade na administração de logs de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-107">Understanding the architecture can improve your effectiveness in managing transaction logs.</span></span>  

  
##  <a name="transaction-log-logical-architecture"></a><a name="Logical_Arch"></a><span data-ttu-id="d4e3f-108">Arquitetura lógica do log de transações</span><span class="sxs-lookup"><span data-stu-id="d4e3f-108">Transaction Log Logical Architecture</span></span>  

 <span data-ttu-id="d4e3f-109">O log de transações do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] opera de forma lógica como se o log de transações fosse uma cadeia de caracteres de registros de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-109">The [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] transaction log operates logically as if the transaction log is a string of log records.</span></span> <span data-ttu-id="d4e3f-110">Cada registro de log é identificado por um LSN (número de sequência de log).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-110">Each log record is identified by a log sequence number (LSN).</span></span> <span data-ttu-id="d4e3f-111">Cada registro de log novo é gravado no final lógico do log com um LSN maior que o do registro antes da gravação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-111">Each new log record is written to the logical end of the log with an LSN that is higher than the LSN of the record before it.</span></span> <span data-ttu-id="d4e3f-112">Os registros de log são armazenados em sequência consecutiva conforme são criados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-112">Log records are stored in a serial sequence as they are created.</span></span> <span data-ttu-id="d4e3f-113">Cada registro de log contém a ID da transação a que pertence.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-113">Each log record contains the ID of the transaction that it belongs to.</span></span> <span data-ttu-id="d4e3f-114">Para cada transação, todos os registros de log associados com a transação são vinculados individualmente em uma cadeia usando ponteiros de retrocesso que aceleram a reversão da transação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-114">For each transaction, all log records associated with the transaction are individually linked in a chain using backward pointers that speed the rollback of the transaction.</span></span>  
  
 <span data-ttu-id="d4e3f-115">Os registros de log para modificações de dados registram a operação lógica executada ou as imagens anteriores e posteriores dos dados modificados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-115">Log records for data modifications record either the logical operation performed or they record the before and after images of the modified data.</span></span> <span data-ttu-id="d4e3f-116">A imagem anterior é uma cópia dos dados antes da execução da operação; a imagem posterior é uma cópia dos dados após a execução da operação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-116">The before image is a copy of the data before the operation is performed; the after image is a copy of the data after the operation has been performed.</span></span>  
  
 <span data-ttu-id="d4e3f-117">As etapas para recuperar uma operação dependem do tipo de registro de log:</span><span class="sxs-lookup"><span data-stu-id="d4e3f-117">The steps to recover an operation depend on the type of log record:</span></span>  
  
-   <span data-ttu-id="d4e3f-118">Log da operação lógica</span><span class="sxs-lookup"><span data-stu-id="d4e3f-118">Logical operation logged</span></span>  
  
    -   <span data-ttu-id="d4e3f-119">Para avançar a operação lógica, é executada a operação novamente.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-119">To roll the logical operation forward, the operation is performed again.</span></span>  
  
    -   <span data-ttu-id="d4e3f-120">Para reverter a operação lógica, é executada a operação lógica inversa.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-120">To roll the logical operation back, the reverse logical operation is performed.</span></span>  
  
-   <span data-ttu-id="d4e3f-121">Log da imagem anterior e posterior</span><span class="sxs-lookup"><span data-stu-id="d4e3f-121">Before and after image logged</span></span>  
  
    -   <span data-ttu-id="d4e3f-122">Para avançar a operação lógica, é aplicada a imagem posterior.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-122">To roll the operation forward, the after image is applied.</span></span>  
  
    -   <span data-ttu-id="d4e3f-123">Para reverter a operação lógica, é aplicada a imagem anterior.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-123">To roll the operation back, the before image is applied.</span></span>  
  
 <span data-ttu-id="d4e3f-124">São registrados muitos tipos de operações no log de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-124">Many types of operations are recorded in the transaction log.</span></span> <span data-ttu-id="d4e3f-125">Essas operações incluem:</span><span class="sxs-lookup"><span data-stu-id="d4e3f-125">These operations include:</span></span>  
  
-   <span data-ttu-id="d4e3f-126">O início e o término de cada transação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-126">The start and end of each transaction.</span></span>  
  
-   <span data-ttu-id="d4e3f-127">Toda modificação de dados (inserção, atualização ou exclusão).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-127">Every data modification (insert, update, or delete).</span></span> <span data-ttu-id="d4e3f-128">Isso inclui mudanças por procedimentos armazenados do sistema ou instruções DDL (linguagem de definição de dados) para qualquer tabela, inclusive tabelas do sistema.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-128">This includes changes by system stored procedures or data definition language (DDL) statements to any table, including system tables.</span></span>  
  
-   <span data-ttu-id="d4e3f-129">Toda extensão e alocação ou desalocação de página.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-129">Every extent and page allocation or deallocation.</span></span>  
  
-   <span data-ttu-id="d4e3f-130">Criando ou descartando uma tabela ou um índice.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-130">Creating or dropping a table or index.</span></span>  
  
 <span data-ttu-id="d4e3f-131">Operações de reversão também são registradas.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-131">Rollback operations are also logged.</span></span> <span data-ttu-id="d4e3f-132">Cada transação reserva espaço no log de transações para verificar se há espaço de log suficiente para oferecer suporte a uma reversão causada por uma instrução de reversão explícita ou se um erro for encontrado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-132">Each transaction reserves space on the transaction log to make sure that enough log space exists to support a rollback that is caused by either an explicit rollback statement or if an error is encountered.</span></span> <span data-ttu-id="d4e3f-133">A quantidade de espaço reservada depende das operações executadas na transação, mas geralmente é igual à quantidade de espaço usada para registrar cada operação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-133">The amount of space reserved depends on the operations performed in the transaction, but generally it is equal to the amount of space used to log each operation.</span></span> <span data-ttu-id="d4e3f-134">Esse espaço reservado é liberado quando a transação é concluída.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-134">This reserved space is freed when the transaction is completed.</span></span>  
  
 <span data-ttu-id="d4e3f-135"> A seção do arquivo de log do primeiro registro de log que deve estar presente para uma reversão bem-sucedida em todo o banco de dados para o registro de log da última gravação é chamada de parte ativa do log ou *log ativo*.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-135">The section of the log file from the first log record that must be present for a successful database-wide rollback to the last-written log record is called the active part of the log, or the *active log*.</span></span> <span data-ttu-id="d4e3f-136">Essa é a seção do log necessária para uma recuperação completa do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-136">This is the section of the log required to a full recovery of the database.</span></span> <span data-ttu-id="d4e3f-137">Nenhuma parte do log ativo pode ter sido truncada.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-137">No part of the active log can ever be truncated.</span></span> <span data-ttu-id="d4e3f-138">O LSN (número de sequência de log) desse primeiro registro de log é conhecido como LSN de recuperação mínima (*MinLSN*).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-138">The log sequence number (LSN) of this first log record is known as the minimum recovery LSN (*MinLSN*).</span></span>  
  
##  <a name="transaction-log-physical-architecture"></a><a name="physical_arch"></a><span data-ttu-id="d4e3f-139">Arquitetura física do log de transações</span><span class="sxs-lookup"><span data-stu-id="d4e3f-139">Transaction Log Physical Architecture</span></span>  

 <span data-ttu-id="d4e3f-140">O log de transações em um banco de dados mapeia um ou mais arquivos físicos.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-140">The transaction log in a database maps over one or more physical files.</span></span> <span data-ttu-id="d4e3f-141">Conceitualmente, o arquivo de log é uma cadeia de caracteres de registros de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-141">Conceptually, the log file is a string of log records.</span></span> <span data-ttu-id="d4e3f-142">Fisicamente, a sequência de registros de log é armazenada com eficiência no conjunto de arquivos físicos que implementam o log de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-142">Physically, the sequence of log records is stored efficiently in the set of physical files that implement the transaction log.</span></span> <span data-ttu-id="d4e3f-143">Deve haver, no mínimo, um arquivo de log para cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-143">There must be at least one log file for each database.</span></span>  
  
 <span data-ttu-id="d4e3f-144">O [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] divide cada arquivo de log físico interiormente em vários arquivos de log virtuais.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-144">The [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] divides each physical log file internally into a number of virtual log files.</span></span> <span data-ttu-id="d4e3f-145">Os arquivos de log virtuais não têm tamanho fixo e não há número fixo de arquivos de log virtuais para um arquivo de log físico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-145">Virtual log files have no fixed size, and there is no fixed number of virtual log files for a physical log file.</span></span> <span data-ttu-id="d4e3f-146">O [!INCLUDE[ssDE](../includes/ssde-md.md)] escolhe o tamanho dos arquivos de log virtuais dinamicamente enquanto está criando ou estendendo os arquivos de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-146">The [!INCLUDE[ssDE](../includes/ssde-md.md)] chooses the size of the virtual log files dynamically while it is creating or extending log files.</span></span> <span data-ttu-id="d4e3f-147">O [!INCLUDE[ssDE](../includes/ssde-md.md)] tenta manter um pequeno número de arquivos virtuais.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-147">The [!INCLUDE[ssDE](../includes/ssde-md.md)] tries to maintain a small number of virtual files.</span></span> <span data-ttu-id="d4e3f-148">O tamanho dos arquivos virtuais depois que um arquivo de log for estendido é a soma do tamanho do log existente com o tamanho do incremento do arquivo novo.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-148">The size of the virtual files after a log file has been extended is the sum of the size of the existing log and the size of the new file increment.</span></span> <span data-ttu-id="d4e3f-149">O tamanho ou o número de arquivos de log virtuais não pode ser configurado nem definido por administradores.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-149">The size or number of virtual log files cannot be configured or set by administrators.</span></span>  
  
 <span data-ttu-id="d4e3f-150">O único momento em que arquivos de log virtuais afetam o desempenho do sistema é quando os arquivos de log físicos são definidos por valores baixos de *size* e *growth_increment* .</span><span class="sxs-lookup"><span data-stu-id="d4e3f-150">The only time virtual log files affect system performance is if the physical log files are defined by small *size* and *growth_increment* values.</span></span> <span data-ttu-id="d4e3f-151">O valor de *size* é o tamanho inicial do arquivo de log e o valor de *growth_increment* é a quantidade de espaço adicionada ao arquivo sempre que um novo espaço é necessário.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-151">The *size* value is the initial size for the log file and the *growth_increment* value is the amount of space added to the file every time new space is required.</span></span> <span data-ttu-id="d4e3f-152">Se os arquivos de log ficarem grandes por causa de diversos incrementos pequenos, eles terão muitos arquivos de log virtuais.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-152">If the log files grow to a large size because of many small increments, they will have many virtual log files.</span></span> <span data-ttu-id="d4e3f-153">Isso pode reduzir a velocidade de inicialização do banco de dados e também das operações de backup e restauração de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-153">This can slow down database startup and also log backup and restore operations.</span></span> <span data-ttu-id="d4e3f-154">Recomendamos que você atribua aos arquivos de log um valor de *size* próximo ao tamanho final necessário e também que tenha um valor de *growth_increment* relativamente grande.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-154">We recommend that you assign log files a *size* value close to the final size required, and also have a relatively large *growth_increment* value.</span></span> <span data-ttu-id="d4e3f-155">Para obter mais informações sobre esses parâmetros, consulte [Opções de arquivo e grupos de arquivos ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-155">For more information about these parameters, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
 <span data-ttu-id="d4e3f-156">O log de transações é um arquivo embrulhado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-156">The transaction log is a wrap-around file.</span></span> <span data-ttu-id="d4e3f-157">Por exemplo, considere um banco de dados com um arquivo de log físico dividido em quatro arquivos de log virtuais.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-157">For example, consider a database with one physical log file divided into four virtual log files.</span></span> <span data-ttu-id="d4e3f-158">Quando o banco de dados é criado, o arquivo de log lógico começa no início do arquivo de log físico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-158">When the database is created, the logical log file begins at the start of the physical log file.</span></span> <span data-ttu-id="d4e3f-159">Novos registros de log são adicionados no final do log lógico e expandem para o final do log físico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-159">New log records are added at the end of the logical log and expand toward the end of the physical log.</span></span> <span data-ttu-id="d4e3f-160">O truncamento de logs libera quaisquer logs virtuais cujos registros apareçam todos na frente do número mínimo de sequência de recuperação do log (MinLSN).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-160">Log truncation frees any virtual logs whose records all appear in front of the minimum recovery log sequence number (MinLSN).</span></span> <span data-ttu-id="d4e3f-161">O *MinLSN* é o número de sequência de log do registro de log mais antigo que deve estar presente para o êxito de uma reversão de todo o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-161">The *MinLSN* is the log sequence number of the oldest log record that is required for a successful database-wide rollback.</span></span> <span data-ttu-id="d4e3f-162">O log de transações no banco de dados de exemplo pareceria semelhante ao apresentado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-162">The transaction log in the example database would look similar to the one in the following illustration.</span></span>  
  
 <span data-ttu-id="d4e3f-163">![Arquivo de log dividido em quatro arquivos de log virtuais](media/tranlog3.gif "Arquivo de log dividido em quatro arquivos de log virtuais")</span><span class="sxs-lookup"><span data-stu-id="d4e3f-163">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="d4e3f-164">Quando o final do log lógico alcança o final do arquivo de log físico, os novos registros de log são adicionados no início do arquivo de log físico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-164">When the end of the logical log reaches the end of the physical log file, the new log records wrap around to the start of the physical log file.</span></span>  
  
 <span data-ttu-id="d4e3f-165">![Registros de log delimitados no início do arquivo de log](media/tranlog4.gif "Registros de log delimitados no início do arquivo de log")</span><span class="sxs-lookup"><span data-stu-id="d4e3f-165">![Log records wrap around to start of log file](media/tranlog4.gif "Log records wrap around to start of log file")</span></span>  
  
 <span data-ttu-id="d4e3f-166">Esse ciclo repete-se indefinidamente, desde que o final do log lógico nunca alcance o início do log lógico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-166">This cycle repeats endlessly, as long as the end of the logical log never reaches the beginning of the logical log.</span></span> <span data-ttu-id="d4e3f-167">Se os registros de log antigos forem truncados com frequência suficiente para sempre deixar espaço suficiente para todos os registros de log novos criados através do próximo ponto de verificação, o log nunca estará completo.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-167">If the old log records are truncated frequently enough to always leave sufficient room for all the new log records created through the next checkpoint, the log never fills.</span></span> <span data-ttu-id="d4e3f-168">Contudo, se o final do log lógico não alcançar o início do log lógico, ocorrerá uma das duas coisas:</span><span class="sxs-lookup"><span data-stu-id="d4e3f-168">However, if the end of the logical log does reach the start of the logical log, one of two things occurs:</span></span>  
  
-   <span data-ttu-id="d4e3f-169">Se a configuração de FILEGROWTH estiver habilitada para o log e houver espaço disponível no disco, o arquivo será estendido na quantidade especificada no parâmetro *growth_increment* e os novos registros de log serão adicionados à extensão.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-169">If the FILEGROWTH setting is enabled for the log and space is available on the disk, the file is extended by the amount specified in the *growth_increment* parameter and the new log records are added to the extension.</span></span> <span data-ttu-id="d4e3f-170">Para obter mais informações sobre a configuração de FILEGROWTH, consulte [Opções de arquivo e grupos de arquivos ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-170">For more information about the FILEGROWTH setting, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
-   <span data-ttu-id="d4e3f-171">Se a configuração de FILEGROWTH não estiver habilitada ou se o disco que estiver mantendo o arquivo de log tiver menos espaço livre do que a quantidade especificada em *growth_increment*, será gerado um erro 9002.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-171">If the FILEGROWTH setting is not enabled, or the disk that is holding the log file has less free space than the amount specified in *growth_increment*, an 9002 error is generated.</span></span>  
  
 <span data-ttu-id="d4e3f-172">Se o log contiver diversos arquivos de log físico, o log lógico percorrerá todos os arquivos de log físico antes de voltar ao início do primeiro arquivo de log físico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-172">If the log contains multiple physical log files, the logical log will move through all the physical log files before it wraps back to the start of the first physical log file.</span></span>  
  
### <a name="log-truncation"></a><span data-ttu-id="d4e3f-173">Truncamento do log</span><span class="sxs-lookup"><span data-stu-id="d4e3f-173">Log Truncation</span></span>  

 <span data-ttu-id="d4e3f-174">O truncamento de log é essencial para impedir o preenchimento do log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-174">Log truncation is essential to keep the log from filling.</span></span> <span data-ttu-id="d4e3f-175">O truncamento de log exclui arquivos de log virtuais inativos do log de transações lógicas de um banco de dados do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , liberando espaço no log lógico para reutilização pelo log de transações físicas.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-175">Log truncation deletes inactive virtual log files from the logical transaction log of a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, freeing space in the logical log for reuse by the physical transaction log.</span></span> <span data-ttu-id="d4e3f-176">Se um log de transações nunca foi truncado, eventualmente, ele preencherá todo o espaço em disco alocado para seus arquivos de log físicos.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-176">If a transaction log were never truncated, it would eventually fill all the disk space that is allocated to its physical log files.</span></span> <span data-ttu-id="d4e3f-177">No entanto, para que o log possa ser truncado, deve ocorrer uma operação ponto de verificação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-177">However, before the log can be truncated, a checkpoint operation must occur.</span></span> <span data-ttu-id="d4e3f-178">Um ponto de verificação grava as páginas modificadas na memória atualmente (conhecidas como páginas sujas) e as informações do log de transações de memória em disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-178">A checkpoint writes the current in-memory modified pages (known as dirty pages) and transaction log information from memory to disk.</span></span> <span data-ttu-id="d4e3f-179">Quando o ponto de verificação é executado, a porção inativa do log de transações é marcada como reutilizável.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-179">When the checkpoint is performed, the inactive portion of the transaction log is marked as reusable.</span></span> <span data-ttu-id="d4e3f-180">Depois disso, a porção inativa pode ser liberada por meio do truncamento de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-180">Thereafter, the inactive portion can be freed by log truncation.</span></span> <span data-ttu-id="d4e3f-181">Para obter mais informações sobre pontos de verificação, consulte [Pontos de verificação de bancos de dados &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-181">For more information about checkpoints, see [Database Checkpoints &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>  
  
 <span data-ttu-id="d4e3f-182">As ilustrações seguintes mostram um log de transações antes e depois do truncamento.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-182">The following illustrations show a transaction log before and after truncation.</span></span> <span data-ttu-id="d4e3f-183">A primeira ilustração mostra um log de transações que nunca foi truncado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-183">The first illustration shows a transaction log that has never been truncated.</span></span> <span data-ttu-id="d4e3f-184">Atualmente, quatro arquivos de log virtuais estão em uso pelo log lógico.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-184">Currently, four virtual log files are in use by the logical log.</span></span> <span data-ttu-id="d4e3f-185">O log virtual inicia à frente do primeiro arquivo de log virtual e termina em log 4 virtual.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-185">The logical log starts at the front of the first virtual log file and ends at virtual log 4.</span></span> <span data-ttu-id="d4e3f-186">O registro de MinLSN está em log 3 virtual.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-186">The MinLSN record is in virtual log 3.</span></span> <span data-ttu-id="d4e3f-187">O log 1 virtual e o log 2 virtual contêm apenas registros de log inativos.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-187">Virtual log 1 and virtual log 2 contain only inactive log records.</span></span> <span data-ttu-id="d4e3f-188">Estes registros podem ser truncados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-188">These records can be truncated.</span></span> <span data-ttu-id="d4e3f-189">O log 5 virtual ainda está sem-uso e não é parte do log lógico atual.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-189">Virtual log 5 is still unused and is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="d4e3f-190">![Log de transação com quatro logs virtuais](media/tranlog2.gif "Log de transação com quatro logs virtuais")</span><span class="sxs-lookup"><span data-stu-id="d4e3f-190">![Transaction log with four virtual logs](media/tranlog2.gif "Transaction log with four virtual logs")</span></span>  
  
 <span data-ttu-id="d4e3f-191">A segunda ilustração mostra como o log aparece depois de ser truncado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-191">The second illustration shows how the log appears after being truncated.</span></span> <span data-ttu-id="d4e3f-192">Log 1 virtual e log 2 virtual foram liberados para reutilização.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-192">Virtual log 1 and virtual log 2 have been freed for reuse.</span></span> <span data-ttu-id="d4e3f-193">O log lógico agora inicia no começo do log 3 virtual.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-193">The logical log now starts at the beginning of virtual log 3.</span></span> <span data-ttu-id="d4e3f-194">O log 5 virtual ainda está sem-uso e não é parte do log lógico atual.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-194">Virtual log 5 is still unused, and it is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="d4e3f-195">![Arquivo de log dividido em quatro arquivos de log virtuais](media/tranlog3.gif "Arquivo de log dividido em quatro arquivos de log virtuais")</span><span class="sxs-lookup"><span data-stu-id="d4e3f-195">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="d4e3f-196">O truncamento de log ocorre automaticamente após os seguintes eventos, exceto quando atrasado por alguma razão:</span><span class="sxs-lookup"><span data-stu-id="d4e3f-196">Log truncation occurs automatically after the following events, except when delayed for some reason:</span></span>  
  
-   <span data-ttu-id="d4e3f-197">No modelo de recuperação simples, depois de um ponto de verificação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-197">Under the simple recovery model, after a checkpoint.</span></span>  
  
-   <span data-ttu-id="d4e3f-198">No modelo de recuperação completa ou bulk-logged, depois de um backup de log, se um ponto de verificação tiver acontecido desde o backup prévio.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-198">Under the full recovery model or bulk-logged recovery model, after a log backup, if a checkpoint has occurred since the previous backup.</span></span>  
  
 <span data-ttu-id="d4e3f-199">O truncamento de log pode ser atrasado por uma variedade de fatores.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-199">Log truncation can be delayed by a variety of factors.</span></span> <span data-ttu-id="d4e3f-200">No caso de uma demora longa em truncamento de log, o log de transações pode ficar cheio.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-200">In the event of a long delay in log truncation, the transaction log can fill up.</span></span> <span data-ttu-id="d4e3f-201">Para obter informações, consulte [Fatores que podem atrasar o truncamento de log](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) e [Solução de problemas de um log de transação completa &#40;Erro do SQL Server 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-201">For information, see [Factors That Can Delay Log Truncation](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) and [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span></span>  
  
##  <a name="write-ahead-transaction-log"></a><a name="WAL"></a><span data-ttu-id="d4e3f-202">Log de transações write-ahead</span><span class="sxs-lookup"><span data-stu-id="d4e3f-202">Write-Ahead Transaction Log</span></span>  

 <span data-ttu-id="d4e3f-203">Esta seção descreve a função do log de transações write-ahead no registro de modificações de dados no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-203">This section describes the role of the write-ahead transaction log in recording data modifications to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="d4e3f-204">usa um WAL (log write-ahead), que garante que nenhuma modificação de dados seja gravada no disco antes de o registro de log associado ser gravado no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-204">uses a write-ahead log (WAL), which guarantees that no data modifications are written to disk before the associated log record is written to disk.</span></span> <span data-ttu-id="d4e3f-205">Isso mantém as propriedades ACID de uma transação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-205">This maintains the ACID properties for a transaction.</span></span>  
  
 <span data-ttu-id="d4e3f-206">Para entender como o log write-ahead funciona, é importante saber como os dados modificados são gravados em disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-206">To understand how the write-ahead log works, it is important for you to know how modified data is written to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="d4e3f-207">mantém um cache de buffer em que ele lê páginas de dados quando dados precisam ser recuperados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-207">maintains a buffer cache into which it reads data pages when data must be retrieved.</span></span> <span data-ttu-id="d4e3f-208">Quando uma página é modificada no cache do buffer, ela não é gravada imediatamente no disco; em vez disso, a página é marcada como *sujo*.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-208">When a page is modified in the buffer cache, it is not immediately written back to disk; instead, the page is marked as *dirty*.</span></span> <span data-ttu-id="d4e3f-209">Uma página de dados pode ter mais de uma gravação lógica feita antes de ser gravada fisicamente no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-209">A data page can have more than one logical write made before it is physically written to disk.</span></span> <span data-ttu-id="d4e3f-210">Para cada gravação lógica, um registro de log de transações é inserido no cache de log que registra a modificação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-210">For each logical write, a transaction log record is inserted in the log cache that records the modification.</span></span> <span data-ttu-id="d4e3f-211">Os registros de log devem ser gravados no disco antes de a página suja associada ser removida do cache do buffer e gravada no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-211">The log records must be written to disk before the associated dirty page is removed from the buffer cache and written to disk.</span></span> <span data-ttu-id="d4e3f-212">O processo de ponto de verificação examina o cache do buffer periodicamente para buffers com páginas de um banco de dados especificado e grava todas as páginas sujas no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-212">The checkpoint process periodically scans the buffer cache for buffers with pages from a specified database and writes all dirty pages to disk.</span></span> <span data-ttu-id="d4e3f-213">Os pontos de verificação economizam tempo durante uma recuperação posterior, pois criam um ponto em que todas as páginas sujas são gravadas no disco.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-213">Checkpoints save time during a later recovery by creating a point at which all dirty pages are guaranteed to have been written to disk.</span></span>  
  
 <span data-ttu-id="d4e3f-214">A gravação de uma página de dados modificada do cache do buffer no disco é chamada de liberação de página.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-214">Writing a modified data page from the buffer cache to disk is called flushing the page.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="d4e3f-215">tem uma lógica que impede que uma página suja seja removida antes do registro de log associado ser gravado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-215">has logic that prevents a dirty page from being flushed before the associated log record is written.</span></span> <span data-ttu-id="d4e3f-216">Os registros de log são gravados no disco quando as transações são confirmadas.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-216">Log records are written to disk when the transactions are committed.</span></span>  
  
##  <a name="transaction-log-backups"></a><a name="Backups"></a><span data-ttu-id="d4e3f-217">Backups de log de transações</span><span class="sxs-lookup"><span data-stu-id="d4e3f-217">Transaction Log Backups</span></span>  

 <span data-ttu-id="d4e3f-218">Esta seção apresenta conceitos sobre como fazer backup e restaurar (aplicar) logs de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-218">This section presents concepts about how to back up and restore (apply) transaction logs.</span></span> <span data-ttu-id="d4e3f-219">Nos modelos de recuperação completa e de recuperação com log de operações em massa é necessário fazer backups de rotina de logs de transações (*backups de log*) para recuperar dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-219">Under the full and bulk-logged recovery models, taking routine backups of transaction logs (*log backups*) is necessary for recovering data.</span></span> <span data-ttu-id="d4e3f-220">É possível fazer backup do log enquanto qualquer backup completo está em execução.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-220">You can back up the log while any full backup is running.</span></span> <span data-ttu-id="d4e3f-221">Para obter mais informações sobre os modelos de recuperação, consulte [Fazer backup e restaurar bancos de dados do SQL Server](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-221">For more information about recovery models, see [Back Up and Restore of SQL Server Databases](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span></span>  
  
 <span data-ttu-id="d4e3f-222">Para poder criar o primeiro backup de log, você deve criar um backup completo, como um backup de banco de dados ou o primeiro de um conjunto de backups de arquivo.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-222">Before you can create the first log backup, you must create a full backup, such as a database backup or the first in a set of file backups.</span></span> <span data-ttu-id="d4e3f-223">A restauração de um banco de dados usando apenas backups de arquivo pode tornar-se complexa.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-223">Restoring a database by using only file backups can become complex.</span></span> <span data-ttu-id="d4e3f-224">Portanto, recomendamos que, assim que possível, você inicie com um backup de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-224">Therefore, we recommend that you start with a full database backup when you can.</span></span> <span data-ttu-id="d4e3f-225">Assim, é necessário fazer backup de log de transações regularmente.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-225">Thereafter, backing up the transaction log regularly is necessary.</span></span> <span data-ttu-id="d4e3f-226">Isto não só minimiza a exposição à perda de trabalho, como também habilita o truncamento do log de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-226">This not only minimizes work-loss exposure but also enables truncation of the transaction log.</span></span> <span data-ttu-id="d4e3f-227">Normalmente, o log de transações é truncado após todos os backups de log convencionais.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-227">Typically, the transaction log is truncated after every conventional log backup.</span></span>  
  
 <span data-ttu-id="d4e3f-228">É recomendável fazer backups de log com frequência suficiente para fornecer suporte aos seus requisitos empresariais, especificamente a tolerância à perda de trabalho que pode ser causada por um drive de log danificado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-228">We recommend taking frequent enough log backups to support your business requirements, specifically your tolerance for work loss such as might be caused by a damaged log drive.</span></span> <span data-ttu-id="d4e3f-229">A frequência apropriada para fazer backups de log depende de tolerância à exposição à perda de trabalho, equilibrada por quantos backups de log é possível armazenar, administrar e, potencialmente, restaurar.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-229">The appropriate frequency for taking log backups depends on your tolerance for work-loss exposure balanced by how many log backups you can store, manage, and, potentially, restore.</span></span> <span data-ttu-id="d4e3f-230">Fazer um backup de log a cada 15 a 30 minutos deve ser o bastante.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-230">Taking a log backup every 15 to 30 minutes might be enough.</span></span> <span data-ttu-id="d4e3f-231">Se o seu negócio requer que você reduza ao mínimo a exposição à perda de trabalho, considere fazer backups de log com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-231">If your business requires that you minimize work-loss exposure, consider taking log backups more frequently.</span></span> <span data-ttu-id="d4e3f-232">Backups de log mais frequentes têm a vantagem adicional de aumentar a frequência de truncamentos de log, resultando em arquivos de log menores.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-232">More frequent log backups have the added advantage of increasing the frequency of log truncation, resulting in smaller log files.</span></span>  
  
 <span data-ttu-id="d4e3f-233">Para limitar o número de backups de log que você precisa restaurar, é essencial fazer backup dos dados com frequência.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-233">To limit the number of log backups that you need to restore, it is essential to routinely back up your data.</span></span> <span data-ttu-id="d4e3f-234">Por exemplo, convém programar um backup de banco de dados completo por semana e backups de diferenciais de banco de dados diariamente.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-234">For example, you might schedule a weekly full database backup and daily differential database backups.</span></span>  
  
### <a name="the-log-chain"></a><span data-ttu-id="d4e3f-235">A cadeia de logs</span><span class="sxs-lookup"><span data-stu-id="d4e3f-235">The Log Chain</span></span>  

 <span data-ttu-id="d4e3f-236">Uma sequência contínua de backups de log é chamada de *cadeia de logs*.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-236">A continuous sequence of log backups is called a *log chain*.</span></span> <span data-ttu-id="d4e3f-237">Uma cadeia de logs começa com um backup completo do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-237">A log chain starts with a full backup of the database.</span></span> <span data-ttu-id="d4e3f-238">Normalmente, uma cadeia de logs nova será iniciada apenas quando for feito backup do banco de dados pela primeira vez ou, depois que o modelo de recuperação for trocado de recuperação simples para recuperação completa ou recuperação com log de operações bulk-logged.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-238">Usually, a new log chain is only started when the database is backed up for the first time or after the recovery model is switched from simple recovery to full or bulk-logged recovery.</span></span> <span data-ttu-id="d4e3f-239">A menos que você decida substituir os conjuntos de backup existentes quando criar um backup de banco de dados completo, a cadeia de logs existente permanecerá intacta.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-239">Unless you choose to overwrite existing backup sets when creating a full database backup, the existing log chain remains intact.</span></span> <span data-ttu-id="d4e3f-240">Com a cadeia de logs intacta, é possível restaurar o banco de dados a partir de qualquer backup de banco de dados completo do conjunto de mídias, seguido por todos os backups de logs subsequentes até o ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-240">With the log chain intact, you can restore your database from any full database backup in the media set, followed by all subsequent log backups up through your recovery point.</span></span> <span data-ttu-id="d4e3f-241">O ponto de recuperação pode estar no fim do último backup de log ou em um ponto de recuperação específico em qualquer dos backups de log.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-241">The recovery point could be the end of the last log backup or a specific recovery point in any of the log backups.</span></span> <span data-ttu-id="d4e3f-242">Para obter mais informações, veja [Backups de log do transações &#40;SQL Server&#41;](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-242">For more information, see [Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="d4e3f-243">Para restaurar um banco de dados até o ponto de falha, a cadeia de logs deve estar intacta.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-243">To restore a database up to the point of failure, the log chain must be intact.</span></span> <span data-ttu-id="d4e3f-244">Isto é, uma sequência ininterrupta de backups de log de transações deve se estender até o ponto de falha.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-244">That is, an unbroken sequence of transaction log backups must extend up to the point of failure.</span></span> <span data-ttu-id="d4e3f-245">Onde essa sequência de log deve começar depende do tipo de backup de dados que você está restaurando: banco de dados, parcial ou de arquivo.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-245">Where this sequence of log must start depends on the type of data backups you are restoring: database, partial, or file.</span></span> <span data-ttu-id="d4e3f-246">Para um backup de banco de dados ou backup parcial, a sequência de backups de log deve se estender do final de um banco de dados ou backup parcial.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-246">For a database or partial backup, the sequence of log backups must extend from the end of a database or partial backup.</span></span> <span data-ttu-id="d4e3f-247">Para um conjunto de backups de arquivos, a sequência de backups de log deve se estender desde o início de um conjunto completo de backups de arquivos.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-247">For a set of file backups, the sequence of log backups must extend from the start of a full set of file backups.</span></span> <span data-ttu-id="d4e3f-248">Para obter mais informações, veja [Aplicar backups de log de transações &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-248">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
### <a name="restore-log-backups"></a><span data-ttu-id="d4e3f-249">Restaurar backups de log</span><span class="sxs-lookup"><span data-stu-id="d4e3f-249">Restore Log Backups</span></span>  

 <span data-ttu-id="d4e3f-250">A restauração de um backup de log rola para frente as alterações que foram registradas no log de transações para recriar o estado exato do banco de dados no momento em que a operação do backup de log começou.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-250">Restoring a log backup rolls forward the changes that were recorded in the transaction log to re-create the exact state of the database at the time the log backup operation started.</span></span> <span data-ttu-id="d4e3f-251">Ao restaurar um banco de dados, é necessário, também, restaurar os backups de log que foram criados após o backup completo do banco de dados restaurado ou, desde o início do primeiro backup de arquivos que você restaura.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-251">When you restore a database, you will have to restore the log backups that were created after the full database backup that you restore, or from the start of the first file backup that you restore.</span></span> <span data-ttu-id="d4e3f-252">Normalmente, depois de restaurar o backup de dados ou diferencial mais recente, será necessário restaurar uma série de backups de log até alcançar o seu ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-252">Typically, after you restore the most recent data or differential backup, you must restore a series of log backups until you reach your recovery point.</span></span> <span data-ttu-id="d4e3f-253">Em seguida, o banco de dados é recuperado.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-253">Then, you recover the database.</span></span> <span data-ttu-id="d4e3f-254">Isso rola para trás todas as transações que estavam incompletas quando a recuperação começou e coloca o banco de dados online.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-254">This rolls back all transactions that were incomplete when the recovery started and brings the database online.</span></span> <span data-ttu-id="d4e3f-255">Depois que o banco de dados for recuperado, não será possível restaurar mais nenhum backup.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-255">After the database has been recovered, you cannot restore any more backups.</span></span> <span data-ttu-id="d4e3f-256">Para obter mais informações, veja [Aplicar backups de log de transações &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d4e3f-256">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
## <a name="additional-reading"></a><span data-ttu-id="d4e3f-257">Leituras Adicionais</span><span class="sxs-lookup"><span data-stu-id="d4e3f-257">Additional Reading</span></span>  

 <span data-ttu-id="d4e3f-258">Recomendamos a leitura dos artigos e livros a seguir, que fornecem mais informações sobre o log de transações.</span><span class="sxs-lookup"><span data-stu-id="d4e3f-258">We recommend the following articles and books for additional information about the transaction log.</span></span>  
  
 [<span data-ttu-id="d4e3f-259">Noções básicas sobre registro em log e recuperação no SQL Server, por Paul Randall</span><span class="sxs-lookup"><span data-stu-id="d4e3f-259">Understanding Logging and Recovery in SQL Server by Paul Randall</span></span>](https://technet.microsoft.com/magazine/2009.02.logging.aspx)  
  
 [<span data-ttu-id="d4e3f-260">Gerenciamento de log de transações do SQL Server, por Tony Davis e Gail Shaw</span><span class="sxs-lookup"><span data-stu-id="d4e3f-260">SQL Server Transaction Log Management by Tony Davis and Gail Shaw</span></span>](http://www.simple-talk.com/books/sql-books/sql-server-transaction-log-management-by-tony-davis-and-gail-shaw/)  
  
  
