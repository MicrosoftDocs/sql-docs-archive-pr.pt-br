---
title: Noções básicas sobre políticas de segurança | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services], security policies
- Execution permission set
- custom assemblies [Reporting Services], security
- permission sets [Reporting Services]
- expressions [Reporting Services], security
- evidence [Reporting Services]
- FullTrust permission set
- security policies [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: a9bf043a-139a-4929-9a58-244815323df0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e03f2ca7aae75f692ba2c888d1fb6bd3f60fb4a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87583384"
---
# <a name="understanding-security-policies"></a><span data-ttu-id="3cddc-102">Compreendendo políticas de segurança</span><span class="sxs-lookup"><span data-stu-id="3cddc-102">Understanding Security Policies</span></span>
  <span data-ttu-id="3cddc-103">Qualquer código executado por um servidor de relatório deve fazer parte de uma política de segurança de acesso a códigos específica.</span><span class="sxs-lookup"><span data-stu-id="3cddc-103">Any code that is executed by a report server must be part of a specific code access security policy.</span></span> <span data-ttu-id="3cddc-104">Essas políticas de segurança consistem em grupos de códigos que mapeiam evidência para um conjunto de conjuntos de permissões nomeados.</span><span class="sxs-lookup"><span data-stu-id="3cddc-104">These security policies consist of code groups that map evidence to a set of named permission sets.</span></span> <span data-ttu-id="3cddc-105">Frequentemente, os grupos de códigos estão associados a um conjunto de permissões nomeado que especifica permissões permitidas para código nesse grupo.</span><span class="sxs-lookup"><span data-stu-id="3cddc-105">Often, code groups are associated with a named permission set that specifies the allowable permissions for code in that group.</span></span> <span data-ttu-id="3cddc-106">O runtime usa a evidência fornecida por um host confiável ou pelo carregador para determinar a quais grupos de códigos o código pertence e, portanto, quais permissões conceder ao código.</span><span class="sxs-lookup"><span data-stu-id="3cddc-106">The runtime uses evidence provided by a trusted host or by the loader to determine which code groups the code belongs to and, therefore, which permissions to grant the code.</span></span> <span data-ttu-id="3cddc-107">O [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] segue esta arquitetura de política de segurança, conforme definido pelo CLR (Common Language Runtime) do [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cddc-107">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] adheres to this security policy architecture as defined by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] common language runtime (CLR).</span></span> <span data-ttu-id="3cddc-108">As seções a seguir descrevem os vários tipos de código em [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] e a as regras de política associadas a eles.</span><span class="sxs-lookup"><span data-stu-id="3cddc-108">The following sections describe the various types of code in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] and the policy rules associated with them.</span></span>  
  
## <a name="report-server-assemblies"></a><span data-ttu-id="3cddc-109">Assemblies do Servidor de Relatório</span><span class="sxs-lookup"><span data-stu-id="3cddc-109">Report Server Assemblies</span></span>  
 <span data-ttu-id="3cddc-110">Os assemblies do servidor de relatório são os que contêm código que faz parte do produto [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cddc-110">Report server assemblies are those that contain code that is part of the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] product.</span></span> <span data-ttu-id="3cddc-111">O [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] é escrito com o uso de assemblies de código gerenciado. Todos esses assemblies têm nome forte (isto é, são assinados digitalmente).</span><span class="sxs-lookup"><span data-stu-id="3cddc-111">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] is written using managed code assemblies; all of these assemblies are strong-named (that is, digitally signed).</span></span> <span data-ttu-id="3cddc-112">Os grupos de códigos desses assemblies são definidos com a **StrongNameMembershipCondition**, que fornece evidência com base nas informações de chave pública do nome forte do assembly.</span><span class="sxs-lookup"><span data-stu-id="3cddc-112">The code groups for these assemblies are defined using the **StrongNameMembershipCondition**, which provides evidence based on public key information for the assembly's strong name.</span></span> <span data-ttu-id="3cddc-113">O grupo de códigos recebe o conjunto de permissões **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="3cddc-113">The code group is granted the **FullTrust** permission set.</span></span>  
  
## <a name="report-server-extensions-rendering-data-delivery-and-security"></a><span data-ttu-id="3cddc-114">Extensões do servidor de relatório (renderização, dados, entrega e segurança)</span><span class="sxs-lookup"><span data-stu-id="3cddc-114">Report Server Extensions (Rendering, Data, Delivery, and Security)</span></span>  
 <span data-ttu-id="3cddc-115">As extensões do servidor de relatório são extensões de dados personalizados, entrega, renderização e segurança, criadas por você ou terceiros para ampliar a funcionalidade do [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cddc-115">Report server extensions are custom data, delivery, rendering, and security extensions that you or other third-parties create in order to extend the functionality of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="3cddc-116">Você deve conceder **FullTrust** a essas extensões ou ao código de assembly nos arquivos de configuração de política associados ao componente do [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] estendido.</span><span class="sxs-lookup"><span data-stu-id="3cddc-116">You must grant **FullTrust** to these extensions or assembly code in the policy configuration files associated with the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] component you are extending.</span></span> <span data-ttu-id="3cddc-117">As extensões fornecidas como parte do [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] são assinadas com a chave pública do servidor de relatório e recebem o conjunto de permissões **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="3cddc-117">Extensions shipped as a part of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are signed with the report server public key and receive the **FullTrust** permission set.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3cddc-118">Você deve modificar os arquivos de configuração de política do [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] para permitir **FullTrust** a qualquer extensão de terceiros.</span><span class="sxs-lookup"><span data-stu-id="3cddc-118">You must modify the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] policy configuration files to allow **FullTrust** for any third-party extensions.</span></span> <span data-ttu-id="3cddc-119">Se você não adicionar um grupo de códigos com **FullTrust** às extensões personalizadas, elas não poderão ser usadas pelo servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="3cddc-119">If you do not add a code group with **FullTrust** for your custom extensions, they cannot be used by the report server.</span></span>  
  
 <span data-ttu-id="3cddc-120">Para obter mais informações sobre os arquivos de configuração de política no [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], consulte [Usando os arquivos de política de segurança do Reporting Services](using-reporting-services-security-policy-files.md).</span><span class="sxs-lookup"><span data-stu-id="3cddc-120">For more information about the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], see [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md).</span></span>  
  
## <a name="expressions-used-in-reports"></a><span data-ttu-id="3cddc-121">Expressões usadas em relatórios</span><span class="sxs-lookup"><span data-stu-id="3cddc-121">Expressions Used in Reports</span></span>  
 <span data-ttu-id="3cddc-122">As expressões de relatório são expressões de código embutidas ou métodos definidos pelo usuário dentro do elemento **Code** de um arquivo de linguagem de definição de relatório.</span><span class="sxs-lookup"><span data-stu-id="3cddc-122">Report expressions are inline code expressions or user-defined methods contained within the **Code** element of a report definition language file.</span></span> <span data-ttu-id="3cddc-123">Há um grupo de códigos já configurado nos arquivos de política que concede a essas expressões a permissão **Execução** definida por padrão.</span><span class="sxs-lookup"><span data-stu-id="3cddc-123">There is a code group that is already configured in the policy files that grants these expressions the **Execution** permission set by default.</span></span> <span data-ttu-id="3cddc-124">O grupo de códigos se parece com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3cddc-124">The code group looks like the following:</span></span>  
  
```  
<CodeGroup  
   class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="Execution"  
   Name="Report_Expressions_Default_Permissions"  
   Description="This code group grants default permissions for code in report expressions and Code element. ">  
    <IMembershipCondition  
       class="StrongNameMembershipCondition"  
       version="1"  
       PublicKeyBlob="002400..."  
    />  
</CodeGroup>  
```  
  
 <span data-ttu-id="3cddc-125">A permissão **Execução** permite que o código seja executado, mas não use recursos protegidos.</span><span class="sxs-lookup"><span data-stu-id="3cddc-125">**Execution** permission allows code to run (execute), but not to use protected resources.</span></span> <span data-ttu-id="3cddc-126">Todas as expressões localizadas em um relatório são compiladas em um assembly (chamado de assembly de “hosts de expressão”) armazenado como parte de um relatório compilado.</span><span class="sxs-lookup"><span data-stu-id="3cddc-126">All expressions found within a report are compiled into an assembly (called an "expression host" assembly) that is stored as a part of the compiled report.</span></span> <span data-ttu-id="3cddc-127">Quando o relatório é executado, o servidor de relatório carrega o assembly de hosts de expressão e faz chamadas nesse assembly para executar expressões.</span><span class="sxs-lookup"><span data-stu-id="3cddc-127">When the report is executed, the report server loads the expression host assembly and makes calls into that assembly to execute expressions.</span></span> <span data-ttu-id="3cddc-128">Os assemblies de hosts de expressão são assinados com uma chave específica usada para definir o grupo de códigos para todos os hosts de expressão.</span><span class="sxs-lookup"><span data-stu-id="3cddc-128">Expression host assemblies are signed with a specific key that is used to define the code group for all expression hosts.</span></span>  
  
 <span data-ttu-id="3cddc-129">As expressões de relatório fazem referência a coleções de modelo de objeto de relatório (campos, parâmetros etc.) e executam tarefas simples como operações aritméticas e de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3cddc-129">Report expressions reference report object model collections (fields, parameters, etc.) and perform simple tasks like arithmetic and string operations.</span></span> <span data-ttu-id="3cddc-130">O código que executa essas operações simples só exige a permissão **Execução**.</span><span class="sxs-lookup"><span data-stu-id="3cddc-130">Code that performs these simple operations only requires **Execution** permission.</span></span> <span data-ttu-id="3cddc-131">Por padrão, os métodos definidos pelo usuário no elemento **Code** e qualquer assembly personalizado recebem a permissão **Execução** no [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cddc-131">By default, user-defined methods in the **Code** element and any custom assemblies are granted **Execution** permission in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="3cddc-132">Assim, para a maioria das expressões, a configuração atual não requer a modificação de nenhum arquivo de política de segurança.</span><span class="sxs-lookup"><span data-stu-id="3cddc-132">Thus, for most expressions, the current configuration does not require that you modify any security policy files.</span></span> <span data-ttu-id="3cddc-133">Para conceder permissões adicionais a assemblies de hosts de expressão, um administrador precisa modificar os arquivos de configuração de política do servidor de relatório e Designer de Relatórios, além de alterar o grupo de códigos de expressões do relatório.</span><span class="sxs-lookup"><span data-stu-id="3cddc-133">To grant additional permissions to expression host assemblies, an administrator needs to modify the policy configuration files of the report server and Report Designer, and change the report expressions code group.</span></span> <span data-ttu-id="3cddc-134">Como essa é uma configuração global, alterar permissões padrão para os hosts de expressão afeta todos os relatórios.</span><span class="sxs-lookup"><span data-stu-id="3cddc-134">Because it is a global setting, changing default permissions for the expression hosts affects all reports.</span></span> <span data-ttu-id="3cddc-135">Por esse motivo, é altamente recomendado que você coloque todo código que solicite segurança adicional em um assembly personalizado.</span><span class="sxs-lookup"><span data-stu-id="3cddc-135">For this reason, it is highly recommended that you place all code that requires additional security into a custom assembly.</span></span> <span data-ttu-id="3cddc-136">Apenas a esse assembly serão concedidas as permissões necessárias.</span><span class="sxs-lookup"><span data-stu-id="3cddc-136">Only this assembly will be granted the permissions you need.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3cddc-137">O código que chama os assemblies externos ou recursos protegidos deve ser incorporado a um assembly personalizado para uso em relatórios.</span><span class="sxs-lookup"><span data-stu-id="3cddc-137">Code that calls external assemblies or protected resources should be incorporated into a custom assembly for use in reports.</span></span> <span data-ttu-id="3cddc-138">Ao fazer isso, você ganhará mais controle sobre as permissões solicitadas e declaradas por seu código.</span><span class="sxs-lookup"><span data-stu-id="3cddc-138">Doing so gives you more control over the permissions requested and asserted by your code.</span></span> <span data-ttu-id="3cddc-139">Você não deve fazer chamadas a métodos seguros no elemento **Code**.</span><span class="sxs-lookup"><span data-stu-id="3cddc-139">You should not make calls to secure methods within the **Code** element.</span></span> <span data-ttu-id="3cddc-140">Fazer isso exige a concessão de **FullTrust** aos hosts de expressão de relatório e a concessão do acesso completo a todo o código personalizado ao CLR.</span><span class="sxs-lookup"><span data-stu-id="3cddc-140">Doing so requires you to grant **FullTrust** to the report expression host and grants all custom code full access to the CLR.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="3cddc-141">Não conceda **FullTrust** ao grupo de códigos para um host de expressão de relatório.</span><span class="sxs-lookup"><span data-stu-id="3cddc-141">Do not grant **FullTrust** to the code group for a report expression host.</span></span> <span data-ttu-id="3cddc-142">Se fizer isso, você permitirá que todas as expressões de relatório façam chamadas do sistema protegidas.</span><span class="sxs-lookup"><span data-stu-id="3cddc-142">If you do, you enable all report expressions to make protected system calls.</span></span>  
  
## <a name="custom-assemblies-referenced-in-reports"></a><span data-ttu-id="3cddc-143">Assemblies personalizados referenciados em relatórios</span><span class="sxs-lookup"><span data-stu-id="3cddc-143">Custom Assemblies Referenced in Reports</span></span>  
 <span data-ttu-id="3cddc-144">Algumas expressões de relatório podem chamar assemblies de código de terceiros, também conhecidos no [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] como assemblies personalizados.</span><span class="sxs-lookup"><span data-stu-id="3cddc-144">Some report expressions can call third-party code assemblies, also known in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] as custom assemblies.</span></span> <span data-ttu-id="3cddc-145">O servidor de relatório espera que esses assemblies tenham, pelo menos, a permissão **Execução** nos arquivos de configuração de política.</span><span class="sxs-lookup"><span data-stu-id="3cddc-145">The report server expects these assemblies to have at least **Execution** permission in the policy configuration files.</span></span> <span data-ttu-id="3cddc-146">Por padrão, os arquivos de política fornecidos com o [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] concedem a permissão **Execução** a todos os assemblies iniciados na zona “Meu Computador”.</span><span class="sxs-lookup"><span data-stu-id="3cddc-146">By default, policy files that ship with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] grant **Execution** permission to all assemblies starting from the 'My Computer' zone.</span></span> <span data-ttu-id="3cddc-147">Você pode conceder permissões adicionais a assemblies personalizados conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="3cddc-147">You can grant additional permissions to custom assemblies as needed.</span></span>  
  
 <span data-ttu-id="3cddc-148">Em alguns casos, pode ser necessário executar uma operação que exija permissões de código específicas em uma expressão de relatório.</span><span class="sxs-lookup"><span data-stu-id="3cddc-148">In some cases, you may need to perform an operation that requires specific code permissions in a report expression.</span></span> <span data-ttu-id="3cddc-149">Geralmente isso significa que uma expressão de relatório precisa fazer uma chamada a um método de biblioteca CLR protegido (como um que acessa arquivos ou o Registro do sistema).</span><span class="sxs-lookup"><span data-stu-id="3cddc-149">Typically, this means that a report expression needs to make a call to a secured CLR library method (such as one that accesses files or the system registry).</span></span> <span data-ttu-id="3cddc-150">A documentação do [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] descreve as permissões de código necessárias para tornar essa chamada segura; para executar a chamada, o código de chamada deve receber essas permissões seguras específicas.</span><span class="sxs-lookup"><span data-stu-id="3cddc-150">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] documentation describes the code permissions that are required to make this secure call; to execute the call, the calling code must be granted these specific, secure permissions.</span></span> <span data-ttu-id="3cddc-151">Se você fizer a chamada em uma expressão de relatório ou no elemento **Code**, o assembly de host de expressão deverá receber as permissões apropriadas.</span><span class="sxs-lookup"><span data-stu-id="3cddc-151">If you make the call from a report expression or the **Code** element, the expression host assembly must be granted the appropriate permissions.</span></span> <span data-ttu-id="3cddc-152">Entretanto, após conceder as permissões aos hosts de expressão, todos os códigos executados em qualquer expressão em qualquer relatório receberão essa permissão específica.</span><span class="sxs-lookup"><span data-stu-id="3cddc-152">However, once you grant the expression host the permissions, all code that runs in any expression in any report is now granted that specific permission.</span></span> <span data-ttu-id="3cddc-153">É muito mais seguro fazer a chamada de um assembly personalizado e conceder a ele as permissões específicas.</span><span class="sxs-lookup"><span data-stu-id="3cddc-153">It is much more secure to make the call from a custom assembly and grant that custom assembly the specific permissions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3cddc-154">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="3cddc-154">See Also</span></span>  
 <span data-ttu-id="3cddc-155">[Segurança de acesso do código no Reporting Services](code-access-security-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="3cddc-155">[Code Access Security in Reporting Services](code-access-security-in-reporting-services.md) </span></span>  
 [<span data-ttu-id="3cddc-156">Desenvolvimento seguro &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="3cddc-156">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
