---
title: Configurar a Autenticação do Windows no servidor de relatório | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- Windows authentication [Reporting Services]
- Reporting Services, configuration
ms.assetid: 4de9c3dd-0ee7-49b3-88bb-209465ca9d86
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 879c036977f9a34528dbf38e42fa080e72617a14
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87680321"
---
# <a name="configure-windows-authentication-on-the-report-server"></a><span data-ttu-id="5a880-102">Configurar a Autenticação do Windows no servidor de relatório</span><span class="sxs-lookup"><span data-stu-id="5a880-102">Configure Windows Authentication on the Report Server</span></span>
  <span data-ttu-id="5a880-103">Por padrão, o [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] aceita solicitações que especificam a autenticação Negotiate ou NTLM.</span><span class="sxs-lookup"><span data-stu-id="5a880-103">By default, [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] accepts requests that specify Negotiate or NTLM authentication.</span></span> <span data-ttu-id="5a880-104">Se sua implantação incluir aplicativos cliente e navegadores que usam esses provedores de segurança, use os valores padrão sem nenhuma configuração adicional.</span><span class="sxs-lookup"><span data-stu-id="5a880-104">If your deployment includes client applications and browsers that use these security providers, you can use the default values without additional configuration.</span></span> <span data-ttu-id="5a880-105">Se desejar usar um provedor de segurança diferente para a segurança integrada do Windows (por exemplo, se desejar usar Kerberos diretamente) ou se tiver modificado os valores padrão e desejar restaurar as configurações originais, use as informações deste tópico para especificar configurações de autenticação no servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="5a880-105">If you want to use a different security provider for Windows integrated security (for example, if you want to use Kerberos directly), or if you modified the default values and want to restore the original settings, you can use the information in this topic to specify authentication settings on the report server.</span></span>  
  
 <span data-ttu-id="5a880-106">Para usar a segurança integrada do Windows, cada usuário que precisa de acesso ao servidor de relatório deve ter uma conta de usuário de domínio ou local válida do Windows ou ser membro de uma conta de grupo de domínio ou local do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-106">To use Windows integrated security, each user who requires access to a report server must have a valid Windows local or domain user account or be a member of a Windows local or domain group account.</span></span> <span data-ttu-id="5a880-107">Você pode incluir contas de outros domínios contanto que esses domínios sejam confiáveis.</span><span class="sxs-lookup"><span data-stu-id="5a880-107">You can include accounts from other domains as long as those domains are trusted.</span></span> <span data-ttu-id="5a880-108">As contas devem ter acesso ao computador do servidor de relatório e devem ser atribuídas subsequencialmente às funções para obter acesso a operações específicas do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="5a880-108">The accounts must have access to the report server computer, and must be subsequently assigned to roles in order to gain access to specific report server operations.</span></span>  
  
 <span data-ttu-id="5a880-109">Os requisitos adicionais a seguir também devem ser satisfeitos:</span><span class="sxs-lookup"><span data-stu-id="5a880-109">The following additional requirements must also be met:</span></span>  
  
-   <span data-ttu-id="5a880-110">Os arquivos RSeportServer.config devem ter `AuthenticationType` definido como `RSWindowsNegotiate`, `RSWindowsKerberos` ou `RSWindowsNTLM`.</span><span class="sxs-lookup"><span data-stu-id="5a880-110">The RSeportServer.config files must have `AuthenticationType` set to `RSWindowsNegotiate`, `RSWindowsKerberos`, or `RSWindowsNTLM`.</span></span> <span data-ttu-id="5a880-111">Por padrão, o arquivo RSReportServer.config incluirá a definição `RSWindowsNegotiate` se a conta de serviço do Servidor de Relatórios for NetworkService ou LocalSystem; caso contrário, a definição `RSWindowsNTLM` será utilizada.</span><span class="sxs-lookup"><span data-stu-id="5a880-111">By default, the RSReportServer.config file includes the `RSWindowsNegotiate` setting if the Report Server service account is either NetworkService or LocalSystem; otherwise, the `RSWindowsNTLM` setting is used.</span></span> <span data-ttu-id="5a880-112">Você pode adicionar `RSWindowsKerberos` se tiver aplicativos que usam somente a autenticação Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-112">You can add `RSWindowsKerberos` if you have applications that only use Kerberos authentication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="5a880-113">O uso de `RSWindowsNegotiate` resultará em um erro de autenticação se o serviço Servidor de Relatório for configurado para ser executado em uma conta de usuário de domínio e um nome da entidade de serviço (SPN) não tiver sido registrado para a conta.</span><span class="sxs-lookup"><span data-stu-id="5a880-113">Using `RSWindowsNegotiate` will result in a Kerberos authentication error if you configured the Report Server service to run under a domain user account and you did not register a Service Principal Name (SPN) for the account.</span></span> <span data-ttu-id="5a880-114">Para obter mais informações, consulte [Como resolver erros da autenticação Kerberos ao se conectar a um servidor de relatório](#proxyfirewallRSWindowsNegotiate) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="5a880-114">For more information, see [Resolving Kerberos Authentication Errors When Connecting to a report server](#proxyfirewallRSWindowsNegotiate) in this topic.</span></span>  
  
-   [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)] <span data-ttu-id="5a880-115">deve ser configurado para a Autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-115">must be configured for Windows Authentication.</span></span> <span data-ttu-id="5a880-116">Por padrão, os arquivos Web.config para o serviço Web servidor de relatórios e Report Manager incluem a \<authentication mode="Windows"> configuração.</span><span class="sxs-lookup"><span data-stu-id="5a880-116">By default, the Web.config files for the Report Server Web service and Report Manager include the \<authentication mode="Windows"> setting.</span></span> <span data-ttu-id="5a880-117">Se você alterá-lo para \<authentication mode="Forms"> , a autenticação do Windows para o [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] falhará.</span><span class="sxs-lookup"><span data-stu-id="5a880-117">If you change it to \<authentication mode="Forms">, the Windows Authentication for [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] will fail.</span></span>  
  
-   <span data-ttu-id="5a880-118">Os arquivos Web.config para o serviço Web servidor de relatórios e Report Manager devem ter \<identity impersonate= "true" /> .</span><span class="sxs-lookup"><span data-stu-id="5a880-118">The Web.config files for the Report Server Web service and Report Manager must have \<identity impersonate= "true" />.</span></span>  
  
-   <span data-ttu-id="5a880-119">O aplicativo cliente ou navegador deve dar suporte à segurança integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-119">The client application or browser must support Windows integrated security.</span></span>  
  
 <span data-ttu-id="5a880-120">Para alterar as configurações de autenticação do servidor de relatório, edite os elementos XML e os valores no arquivo RSReportServer.config.</span><span class="sxs-lookup"><span data-stu-id="5a880-120">To change the report server authentication settings, edit the XML elements and values in the RSReportServer.config file.</span></span> <span data-ttu-id="5a880-121">Você pode copiar e colar os exemplos deste tópico para implementar combinações específicas.</span><span class="sxs-lookup"><span data-stu-id="5a880-121">You can copy and paste the examples in this topic to implement specific combinations.</span></span>  
  
 <span data-ttu-id="5a880-122">As configurações padrão funcionam melhor se todos os computadores cliente e de servidor estiverem no mesmo domínio ou em um domínio confiável e se o servidor de relatório for implantado para acessar a intranet por trás de um firewall corporativo.</span><span class="sxs-lookup"><span data-stu-id="5a880-122">The default settings work best if all client and server computers are in the same domain or in a trusted domain and the report server is deployed for intranet access behind a corporate firewall.</span></span> <span data-ttu-id="5a880-123">Os domínios únicos e confiáveis são um requisito para passar as credenciais do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-123">Trusted and single domains are a requirement for passing Windows credentials.</span></span> <span data-ttu-id="5a880-124">As credenciais poderão ser passadas mais de uma vez se você habilitar o protocolo Kerberos versão 5 para seus servidores.</span><span class="sxs-lookup"><span data-stu-id="5a880-124">Credentials can be passed more than one time if you enable the Kerberos version 5 protocol for your servers.</span></span> <span data-ttu-id="5a880-125">Caso contrário, elas podem ser passadas apenas uma vez antes de expirarem.</span><span class="sxs-lookup"><span data-stu-id="5a880-125">Otherwise, credentials can be passed only one time before they expire.</span></span> <span data-ttu-id="5a880-126">Para obter mais informações sobre como configurar as credenciais para várias conexões de computador, consulte [Especificar informações de credenciais e de conexão para fontes de dados de relatório](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span><span class="sxs-lookup"><span data-stu-id="5a880-126">For more information about configuring credentials for multiple computer connections, see [Specify Credential and Connection Information for Report Data Sources](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span></span>  
  
 <span data-ttu-id="5a880-127">As instruções a seguir são válidas para um servidor de relatório no modo nativo.</span><span class="sxs-lookup"><span data-stu-id="5a880-127">The following instructions are intended for a native mode report server.</span></span> <span data-ttu-id="5a880-128">Se o servidor de relatório for implantado no modo integrado do SharePoint, use as configurações de autenticação padrão que especificam a segurança integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-128">If the report server is deployed in SharePoint integrated mode, you must use the default authentication settings that specify Windows integrated security.</span></span> <span data-ttu-id="5a880-129">O servidor de relatório usa recursos internos na extensão padrão da Autenticação do Windows para dar suporte a servidores de relatório no modo integrado do SharePoint.</span><span class="sxs-lookup"><span data-stu-id="5a880-129">The report server uses internal features in the default Windows Authentication extension to support report servers in SharePoint integrated mode.</span></span>  
  
## <a name="extended-protection-for-authentication"></a><span data-ttu-id="5a880-130">Proteção Estendida para Autenticação</span><span class="sxs-lookup"><span data-stu-id="5a880-130">Extended Protection for Authentication</span></span>  
 <span data-ttu-id="5a880-131">A partir do [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], o suporte para Proteção Estendida para Autenticação está disponível.</span><span class="sxs-lookup"><span data-stu-id="5a880-131">Beginning with [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], support for Extended Protection for Authentication is available.</span></span> <span data-ttu-id="5a880-132">O recurso do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] oferece suporte ao uso de associação de canal e associação de serviço para aprimorar a proteção da autenticação.</span><span class="sxs-lookup"><span data-stu-id="5a880-132">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] feature supports the use of channel binding and service binding to enhance protection of authentication.</span></span> <span data-ttu-id="5a880-133">Os recursos do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] precisam ser usados com um sistema operacional que ofereça suporte à Proteção Estendida.</span><span class="sxs-lookup"><span data-stu-id="5a880-133">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] features need to be used with an operating system that supports Extended Protection.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="5a880-134">A configuração para proteção estendida é determinada pelas configurações no arquivo RSReportServer.config.</span><span class="sxs-lookup"><span data-stu-id="5a880-134">configuration for extended protection is determined by settings in the RSReportServer.config file.</span></span> <span data-ttu-id="5a880-135">O arquivo pode ser atualizado editando o arquivo ou usando APIs do WMI.</span><span class="sxs-lookup"><span data-stu-id="5a880-135">The file can be updated by either editing the file or using WMI APIs.</span></span> <span data-ttu-id="5a880-136">Para obter mais informações, consulte [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="5a880-136">For more information, see [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md).</span></span>  
  
### <a name="to-configure-a-report-server-to-use-windows-integrated-security"></a><span data-ttu-id="5a880-137">Para configurar um servidor de relatório para usar a segurança integrada do Windows</span><span class="sxs-lookup"><span data-stu-id="5a880-137">To configure a report server to use Windows integrated security</span></span>  
  
1.  <span data-ttu-id="5a880-138">Abra o RSReportServer.config em um editor de texto.</span><span class="sxs-lookup"><span data-stu-id="5a880-138">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="5a880-139">Localizar <`Authentication`>.</span><span class="sxs-lookup"><span data-stu-id="5a880-139">Find <`Authentication`>.</span></span>  
  
3.  <span data-ttu-id="5a880-140">Copie uma das estruturas XML a seguir que seja mais adequada para as suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="5a880-140">Copy one of the following XML structures that best fits your needs.</span></span> <span data-ttu-id="5a880-141">Você pode especificar `RSWindowsNegotiate`, `RSWindowsNTLM` e `RSWindowsKerberos` em qualquer ordem.</span><span class="sxs-lookup"><span data-stu-id="5a880-141">You can specify `RSWindowsNegotiate`, `RSWindowsNTLM`, and `RSWindowsKerberos` in any order.</span></span> <span data-ttu-id="5a880-142">Você deve habilitar a persistência de autenticação se desejar autenticar a conexão em vez de cada solicitação individual.</span><span class="sxs-lookup"><span data-stu-id="5a880-142">You should enable authentication persistence if you want to authenticate the connection rather than each individual request.</span></span> <span data-ttu-id="5a880-143">Com a persistência de autenticação, todas as solicitações que precisam de autenticação serão permitidas durante a conexão.</span><span class="sxs-lookup"><span data-stu-id="5a880-143">Under authentication persistence, all requests that require authentication will be allowed for the duration of the connection.</span></span>  
  
     <span data-ttu-id="5a880-144">A primeira estrutura XML será a configuração padrão quando a conta de serviço do Servidor de Relatório for NetworkService ou LocalSystem:</span><span class="sxs-lookup"><span data-stu-id="5a880-144">The first XML structure is the default configuration when the Report Server service account is either NetworkService or LocalSystem:</span></span>  
  
    ```  
    <Authentication>  
          <AuthenticationTypes>  
                 <RSWindowsNegotiate />  
          </AuthenticationTypes>  
          <EnableAuthPersistence>true</EnableAuthPersistence>  
    </Authentication>  
    ```  
  
     <span data-ttu-id="5a880-145">A segunda estrutura XML será a configuração padrão quando a conta de serviço do Servidor de Relatório não for nem NetworkService nem LocalSystem:</span><span class="sxs-lookup"><span data-stu-id="5a880-145">The second XML structure is the default configuration when the Report Server service account is not NetworkService or LocalSystem:</span></span>  
  
    ```  
    <Authentication>  
          <AuthenticationTypes>  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
          <EnableAuthPersistence>true</EnableAuthPersistence>  
    ```  
  
     \</Authentication>  
  
     <span data-ttu-id="5a880-146">A terceira estrutura XML especifica todos os pacotes de segurança usados na segurança integrada do Windows:</span><span class="sxs-lookup"><span data-stu-id="5a880-146">The third XML structure specifies all of the security packages that are used in Windows integrated security:</span></span>  
  
    ```  
          <AuthenticationTypes>  
                 <RSWindowsNegotiate />  
                 <RSWindowsKerberos />  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
    ```  
  
     <span data-ttu-id="5a880-147">A quarta estrutura XML especifica NTLM somente para implantações que não dão suporte a Kerberos ou como solução alternativa para erros de autenticação do Kerberos:</span><span class="sxs-lookup"><span data-stu-id="5a880-147">The fourth XML structure specifies NTLM only for deployments that do not support Kerberos or to work around Kerberos authentication errors:</span></span>  
  
    ```  
          <AuthenticationTypes>  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
    ```  
  
4.  <span data-ttu-id="5a880-148">Cole-o nas entradas existentes para <`Authentication`>.</span><span class="sxs-lookup"><span data-stu-id="5a880-148">Paste it over the existing entries for <`Authentication`>.</span></span>  
  
     <span data-ttu-id="5a880-149">Observe que você não pode usar `Custom` com os tipos `RSWindows`.</span><span class="sxs-lookup"><span data-stu-id="5a880-149">Note that you cannot use `Custom` with the `RSWindows` types.</span></span>  
  
5.  <span data-ttu-id="5a880-150">Modifique as configurações para proteção estendida conforme o necessário.</span><span class="sxs-lookup"><span data-stu-id="5a880-150">Modify as appropriate the settings for extended protection.</span></span> <span data-ttu-id="5a880-151">A proteção estendida é desabilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="5a880-151">Extended protection is disabled by default.</span></span>  <span data-ttu-id="5a880-152">Se estas entradas não estiverem presentes, o computador atual poderá não estar executando uma versão do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] que dá suporte à proteção estendida.</span><span class="sxs-lookup"><span data-stu-id="5a880-152">If these entries are not present, the current computer may not be running a version of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] which supports extended protection.</span></span> <span data-ttu-id="5a880-153">Para obter mais informações, consulte [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="5a880-153">For more information, see [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span></span>  
  
    ```  
          <RSWindowsExtendedProtectionLevel>Allow</RSWindowsExtendedProtectionLevel>  
          <RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>  
    ```  
  
6.  <span data-ttu-id="5a880-154">Salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="5a880-154">Save the file.</span></span>  
  
7.  <span data-ttu-id="5a880-155">Se você configurou uma implantação em expansão, repita essas etapas para outros servidores de relatório na implantação.</span><span class="sxs-lookup"><span data-stu-id="5a880-155">If you configured a scale-out deployment, repeat these steps for other report servers in the deployment.</span></span>  
  
8.  <span data-ttu-id="5a880-156">Reinicie o servidor de relatório para terminar as sessões que estão atualmente abertas.</span><span class="sxs-lookup"><span data-stu-id="5a880-156">Restart the report server to clear any sessions that are currently open.</span></span>  
  
##  <a name="resolving-kerberos-authentication-errors-when-connecting-to-a-report-server"></a><a name="proxyfirewallRSWindowsNegotiate"></a><span data-ttu-id="5a880-157">Resolvendo erros de autenticação Kerberos ao se conectar a um servidor de relatório</span><span class="sxs-lookup"><span data-stu-id="5a880-157">Resolving Kerberos Authentication Errors When Connecting to a Report Server</span></span>  
 <span data-ttu-id="5a880-158">Em um servidor de relatório configurado para a autenticação Negotiate ou Kerberos, uma conexão cliente com o servidor de relatório falhará se houver um erro da autenticação Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-158">On a report server that is configured for Negotiate or Kerberos authentication, a client connection to the report server will fail if there is a Kerberos authentication error.</span></span> <span data-ttu-id="5a880-159">Os erros da autenticação Kerberos normalmente ocorrem quando:</span><span class="sxs-lookup"><span data-stu-id="5a880-159">Kerberos authentication errors are known to occur when:</span></span>  
  
-   <span data-ttu-id="5a880-160">O serviço Servidor de Relatório é executado como uma conta de usuário de domínio do Windows e um nome da entidade de serviço (SPN) não tiver sido registrado para a conta.</span><span class="sxs-lookup"><span data-stu-id="5a880-160">The Report Server service runs as a Windows domain user account and you did not register a Service Principal Name (SPN) for the account.</span></span>  
  
-   <span data-ttu-id="5a880-161">O servidor de relatório está configurado com a definição `RSWindowsNegotiate`.</span><span class="sxs-lookup"><span data-stu-id="5a880-161">The report server is configured with the `RSWindowsNegotiate` setting.</span></span>  
  
-   <span data-ttu-id="5a880-162">O navegador escolhe Kerberos em vez de NTLM no cabeçalho de autenticação na solicitação que envia ao servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="5a880-162">The browser chooses Kerberos over NTLM in the authentication header in the request it sends to the report server.</span></span>  
  
 <span data-ttu-id="5a880-163">Você pode detectar o erro se tiver habilitado o log de Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-163">You can detect the error if you enabled Kerberos logging.</span></span> <span data-ttu-id="5a880-164">Outro sintoma do erro é a solicitação das credenciais várias vezes e a exibição de uma janela vazia do navegador.</span><span class="sxs-lookup"><span data-stu-id="5a880-164">Another symptom of the error is that you are prompted for credentials multiple times and then see an empty browser window.</span></span>  
  
 <span data-ttu-id="5a880-165">Você pode confirmar que está encontrando um erro de autenticação Kerberos removendo < `RSWindowsNegotiate` /> do arquivo de configuração e tentando novamente a conexão.</span><span class="sxs-lookup"><span data-stu-id="5a880-165">You can confirm that you are encountering a Kerberos authentication error by removing < `RSWindowsNegotiate` /> from your configuration file and reattempting the connection.</span></span>  
  
 <span data-ttu-id="5a880-166">Depois que você confirmar o problema, poderá solucioná-lo dos seguintes modos:</span><span class="sxs-lookup"><span data-stu-id="5a880-166">After you confirm the problem, you can address it in the following ways:</span></span>  
  
-   <span data-ttu-id="5a880-167">Registre um SPN para o serviço Servidor de Relatório na conta do usuário de domínio.</span><span class="sxs-lookup"><span data-stu-id="5a880-167">Register an SPN for the Report Server service under the domain user account.</span></span> <span data-ttu-id="5a880-168">Para obter mais informações, consulte [Registrar um SPN &#40;Nome da Entidade de Serviço&#41; para um servidor de relatório](../report-server/register-a-service-principal-name-spn-for-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="5a880-168">For more information, see [Register a Service Principal Name &#40;SPN&#41; for a Report Server](../report-server/register-a-service-principal-name-spn-for-a-report-server.md).</span></span>  
  
-   <span data-ttu-id="5a880-169">Altere a conta de serviço para ser executada em uma conta interna, como Serviço de Rede.</span><span class="sxs-lookup"><span data-stu-id="5a880-169">Change the service account to run under a built-in account such as Network Service.</span></span> <span data-ttu-id="5a880-170">As contas internas mapeiam o SPN HTTP ao SPN do host, o qual é definido quando um computador se une à sua rede.</span><span class="sxs-lookup"><span data-stu-id="5a880-170">Built-in accounts map HTTP SPN to the Host SPN, which is defined when you join a computer to your network.</span></span> <span data-ttu-id="5a880-171">Para obter mais informações, consulte [Configurar uma conta de serviço &#40; 	Gerenciador de Configurações do SSRS&#41;](../../sql-server/install/configure-a-service-account-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5a880-171">For more information, see [Configure a Service Account &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-service-account-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="5a880-172">Use NTLM.</span><span class="sxs-lookup"><span data-stu-id="5a880-172">Use NTLM.</span></span> <span data-ttu-id="5a880-173">O NTLM geralmente funciona quando a autenticação Kerberos falha.</span><span class="sxs-lookup"><span data-stu-id="5a880-173">NTLM will generally work in cases where Kerberos authentication fails.</span></span> <span data-ttu-id="5a880-174">Para usar NTLM, remova `RSWindowsNegotiate` do arquivo RSReportServer.config e verifique se somente `RSWindowsNTLM` está especificado.</span><span class="sxs-lookup"><span data-stu-id="5a880-174">To use NTLM, remove `RSWindowsNegotiate` from the RSReportServer.config file and verify that only `RSWindowsNTLM` is specified.</span></span> <span data-ttu-id="5a880-175">Se você optar por essa abordagem, poderá continuar usando uma conta de usuário de domínio para o serviço Servidor de Relatório, mesmo que não haja um SPN definido.</span><span class="sxs-lookup"><span data-stu-id="5a880-175">If you choose this approach, you can continue to use a domain user account for the Report Server service even if you do not define an SPN for it.</span></span>  
  
#### <a name="logging-information"></a><span data-ttu-id="5a880-176">Informações de log</span><span class="sxs-lookup"><span data-stu-id="5a880-176">Logging information</span></span>  
 <span data-ttu-id="5a880-177">Há várias fontes de registros de informações que podem ajudar a resolver problemas relacionados ao Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-177">There are several sources of logging information that can help resolve Kerberos related issues.</span></span>  
  
##### <a name="user-account-control-attribute"></a><span data-ttu-id="5a880-178">Atributo de controle da conta de usuário</span><span class="sxs-lookup"><span data-stu-id="5a880-178">User-Account-Control Attribute</span></span>  
 <span data-ttu-id="5a880-179">Determine se a conta de serviço do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] tem o atributo suficiente definido no Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5a880-179">Determine if the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service account has the sufficient attribute set in Active Directory.</span></span> <span data-ttu-id="5a880-180">Revise o arquivo de log de rastreamento do serviço de relatório para localizar o valor registrado em log para o atributo UserAccountControl.</span><span class="sxs-lookup"><span data-stu-id="5a880-180">Review the reporting services service trace log file to find the value logged for the UserAccountControl attribute.</span></span> <span data-ttu-id="5a880-181">O valor registrado em log está em decimais.</span><span class="sxs-lookup"><span data-stu-id="5a880-181">The value logged is in decimal form.</span></span> <span data-ttu-id="5a880-182">Você precisa converter o valor decimal para a forma hexadecimal e, em seguida, localizar o valor no tópico do MSDN que descreve o atributo de controle da conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="5a880-182">You need to convert the decimal value to hexadecimal form and then find that value in the MSDN topic describing User-Account-Control Attribute.</span></span>  
  
-   <span data-ttu-id="5a880-183">A entrada do log de rastreamento do serviço de relatório será semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="5a880-183">The reporting services service trace log entry will look similar to the following:</span></span>  
  
    ```  
    appdomainmanager!DefaultDomain!8f8!01/14/2010-14:42:28:: i INFO: The UserAccountControl value for the service account is 590336  
    ```  
  
-   <span data-ttu-id="5a880-184">Uma opção para converter o valor decimal para a forma hexadecimal é, para nós, a Calculadora do [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="5a880-184">One option for converting the value Decimal value to hexadecimal form is to us the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Calculator.</span></span> <span data-ttu-id="5a880-185">A Calculadora do Windows oferece suporte a vários modos que mostram as opções 'Dec' e 'Hex'.</span><span class="sxs-lookup"><span data-stu-id="5a880-185">Windows Calculator supports several modes that show the 'Dec' option and 'Hex' options.</span></span> <span data-ttu-id="5a880-186">Selecione a opção 'Dec', cole ou digite no valor decimal encontrado no arquivo de log e, em seguida, selecione a opção 'Hex'.</span><span class="sxs-lookup"><span data-stu-id="5a880-186">Select the 'Dec' option, paste or type in the decimal value you found in the log file and then select the 'Hex' option.</span></span>  
  
-   <span data-ttu-id="5a880-187">Em seguida, consulte o tópico [Atributo de controle da conta de usuário](https://go.microsoft.com/fwlink/?LinkId=183366) para derivar o atributo para a conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="5a880-187">Then refer to the topic [User-Account-Control Attribute](https://go.microsoft.com/fwlink/?LinkId=183366) to derive the attribute for the service account.</span></span>  
  
##### <a name="spns-configured-in-active-directory-for-the-reporting-services-service-account"></a><span data-ttu-id="5a880-188">Os SPNs configurados no Active Directory para a conta de serviço do Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="5a880-188">SPNs Configured in Active Directory for the Reporting Services service account.</span></span>  
 <span data-ttu-id="5a880-189">Para registrar os SPNs no arquivo de log de rastreamento de serviço do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , você pode habilitar o recurso de Proteção Estendida do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] temporariamente.</span><span class="sxs-lookup"><span data-stu-id="5a880-189">To log the SPNs in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service trace log file, you can enable the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Extended Protection feature temporarily.</span></span>  
  
-   <span data-ttu-id="5a880-190">Modifique o arquivo de configuração `rsreportserver.config` definindo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="5a880-190">Modify the configuration file `rsreportserver.config` by setting the following:</span></span>  
  
    ```  
    <RSWindowsExtendedProtectionLevel>Allow</RSWindowsExtendedProtectionLevel>   
    <RSWindowsExtendedProtectionScenario>Any</RSWindowsExtendedProtectionScenario>  
    ```  
  
-   <span data-ttu-id="5a880-191">Reinicie o serviço [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5a880-191">Restart the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service.</span></span>

 <span data-ttu-id="5a880-192">Se você não desejar continuar usando a Proteção Estendida, defina os valores de configuração para os padrões e reinicie a conta de serviço do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5a880-192">If you do not want continue using Extended Protection, then set the configuration values back to defaults and restart the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Service account.</span></span>  
  
```  
<RSWindowsExtendedProtectionLevel>Off</RSWindowsExtendedProtectionLevel>  
<RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>  
```  
  
 <span data-ttu-id="5a880-193">Para obter mais informações, consulte [proteção estendida para autenticação com Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span><span class="sxs-lookup"><span data-stu-id="5a880-193">For more information see, [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span></span>  
  
#### <a name="how-the-browser-chooses-negotiated-kerberos-or-negotiated-ntlm"></a><span data-ttu-id="5a880-194">Como o navegador escolhe Kerberos negociado ou NTLM negociado</span><span class="sxs-lookup"><span data-stu-id="5a880-194">How the Browser Chooses Negotiated Kerberos or Negotiated NTLM</span></span>  
 <span data-ttu-id="5a880-195">Quando você usa o Internet Explorer para se conectar ao servidor de relatório, Kerberos negociado ou NTLM negociado é especificado no cabeçalho de autenticação.</span><span class="sxs-lookup"><span data-stu-id="5a880-195">When you use Internet Explorer to connect to the report server, it specifies either Negotiated Kerberos or NTLM on the authentication header.</span></span> <span data-ttu-id="5a880-196">NTLM é usado em vez de Kerberos quando:</span><span class="sxs-lookup"><span data-stu-id="5a880-196">NTLM is used instead of Kerberos when:</span></span>  
  
-   <span data-ttu-id="5a880-197">A solicitação é enviada a um servidor de relatório local.</span><span class="sxs-lookup"><span data-stu-id="5a880-197">The request is sent to a local report server.</span></span>  
  
-   <span data-ttu-id="5a880-198">A solicitação é enviada a um endereço IP do computador do servidor de relatório em vez de um cabeçalho host ou nome de servidor.</span><span class="sxs-lookup"><span data-stu-id="5a880-198">The request is sent to an IP address of the report server computer rather than a host header or server name.</span></span>  
  
-   <span data-ttu-id="5a880-199">O software do firewall bloqueia as portas usadas para autenticação Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-199">Firewall software blocks ports used for Kerberos authentication.</span></span>  
  
-   <span data-ttu-id="5a880-200">O sistema operacional de um servidor específico não tem Kerberos habilitado.</span><span class="sxs-lookup"><span data-stu-id="5a880-200">The operating system of a particular server does not have Kerberos enabled.</span></span>  
  
-   <span data-ttu-id="5a880-201">O domínio inclui versões mais antigas dos sistemas operacionais de cliente e servidor do Windows que não dão suporte ao recurso da autenticação Kerberos incorporado nas versões mais recentes do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="5a880-201">The domain includes older versions of Windows client and server operating systems that do not support the Kerberos authentication feature built into newer versions of the operating system.</span></span>  
  
 <span data-ttu-id="5a880-202">Além disso, o Internet Explorer pode optar entre Kerberos ou NTLM negociado dependendo da configuração de URL, LAN e proxy.</span><span class="sxs-lookup"><span data-stu-id="5a880-202">In addition, Internet Explorer might choose either Negotiated Kerberos or NTLM depending on how you configured URL, LAN, and proxy settings.</span></span>  
  
###### <a name="report-server-url"></a><span data-ttu-id="5a880-203">URL do servidor de relatório</span><span class="sxs-lookup"><span data-stu-id="5a880-203">Report Server URL</span></span>  
 <span data-ttu-id="5a880-204">Se o URL incluir um nome de domínio completamente qualificado, o Internet Explorer selecionará NTLM.</span><span class="sxs-lookup"><span data-stu-id="5a880-204">If the URL includes a fully qualified domain name, Internet Explorer selects NTLM.</span></span> <span data-ttu-id="5a880-205">Se o URL especificar localhost, o Internet Explorer selecionará NTLM.</span><span class="sxs-lookup"><span data-stu-id="5a880-205">If the URL specifies localhost, Internet Explorer selects NTLM.</span></span> <span data-ttu-id="5a880-206">Se o URL especificar o nome de rede do computador, o Internet Explorer selecionará Negotiate, que será bem-sucedido ou falhará dependendo da existência de um SPN para a conta de serviço do Servidor de Relatório.</span><span class="sxs-lookup"><span data-stu-id="5a880-206">If the URL specifies the network name of the computer, Internet Explorer selects Negotiate, which will succeed or fail depending on whether an SPN exists for the Report Server service account.</span></span>  
  
###### <a name="lan-and-proxy-settings-on-the-client"></a><span data-ttu-id="5a880-207">Configurações de LAN e proxy no cliente</span><span class="sxs-lookup"><span data-stu-id="5a880-207">LAN and Proxy Settings on the Client</span></span>  
 <span data-ttu-id="5a880-208">As configurações de LAN e proxy que você definiu no Internet Explorer podem determinar a escolha de NTLM em vez de Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-208">LAN and proxy settings that you set in Internet Explorer can determine whether NTLM is chosen over Kerberos.</span></span> <span data-ttu-id="5a880-209">No entanto, como as configurações de LAN e proxy varia entre as organizações, não é possível determinar as configurações exatas que contribuem para os erros da autenticação Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5a880-209">However, because LAN and proxy settings vary across organizations, it is not possible to precisely determine the exact settings that contribute to Kerberos authentication errors.</span></span> <span data-ttu-id="5a880-210">Por exemplo, sua organização pode impor configurações de proxy que convertem URLs de intranet em URLs de nome completo de domínio resolvidas nas conexões da Internet.</span><span class="sxs-lookup"><span data-stu-id="5a880-210">For example, your organization might enforce proxy settings that transform URLs from intranet URLs to fully-qualified domain name URLs that resolve over Internet connections.</span></span> <span data-ttu-id="5a880-211">Se diferentes provedores de autenticação forem usados para diferentes tipos de URL, algumas conexões podem ser bem-sucedidas e outras podem falhar.</span><span class="sxs-lookup"><span data-stu-id="5a880-211">If different authentication providers are used for different types of URLs, you might find that some connections succeed when you would have expected them to fail.</span></span>  
  
 <span data-ttu-id="5a880-212">Se houver erros de conexão que, na sua opinião, ocorreram devido a falhas de autenticação, tente usar combinações diferentes de configurações de LAN e proxy para isolar o problema.</span><span class="sxs-lookup"><span data-stu-id="5a880-212">If you encounter connection errors that you think are due to authentication failures, you can try different combinations of LAN and proxy settings to isolate the problem.</span></span> <span data-ttu-id="5a880-213">No Internet Explorer, as configurações de LAN e proxy estão disponíveis na caixa de diálogo **Configurações de Rede Local (LAN)** , que é exibida ao clicar em **Configurações de LAN** na guia **Conexão** de **Opções da Internet**.</span><span class="sxs-lookup"><span data-stu-id="5a880-213">In Internet Explorer, LAN and proxy settings are on the **Local Area Network (LAN) Settings** dialog box, which you open by clicking **LAN settings** on the **Connection** tab of **Internet Options**.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="5a880-214">Recursos externos</span><span class="sxs-lookup"><span data-stu-id="5a880-214">External resources</span></span>  
  
-   <span data-ttu-id="5a880-215">Para obter informações adicionais referentes ao Kerberos e a servidores de relatórios, consulte [Deploying a Business Intelligence Solution Using SharePoint, Reporting Services, and PerformancePoint Monitoring Server with Kerberos](https://go.microsoft.com/fwlink/?LinkID=177751)(em inglês).</span><span class="sxs-lookup"><span data-stu-id="5a880-215">For additional information regarding Kerberos and report servers, see [Deploying a Business Intelligence Solution Using SharePoint, Reporting Services, and PerformancePoint Monitoring Server with Kerberos.](https://go.microsoft.com/fwlink/?LinkID=177751)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a880-216">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="5a880-216">See Also</span></span>  
 <span data-ttu-id="5a880-217">[Autenticação com o servidor de relatório](authentication-with-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="5a880-217">[Authentication with the Report Server](authentication-with-the-report-server.md) </span></span>  
 <span data-ttu-id="5a880-218">[Concedendo permissões em um servidor de relatório no modo nativo](granting-permissions-on-a-native-mode-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="5a880-218">[Granting Permissions on a Native Mode Report Server](granting-permissions-on-a-native-mode-report-server.md) </span></span>  
 <span data-ttu-id="5a880-219">[Arquivo de configuração RSReportServer](../report-server/rsreportserver-config-configuration-file.md) </span><span class="sxs-lookup"><span data-stu-id="5a880-219">[RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md) </span></span>  
 <span data-ttu-id="5a880-220">[Configurar a autenticação básica no servidor de relatório](configure-basic-authentication-on-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="5a880-220">[Configure Basic Authentication on the Report Server](configure-basic-authentication-on-the-report-server.md) </span></span>  
 <span data-ttu-id="5a880-221">[Configurar a autenticação personalizada ou de formulários no servidor de relatório](configure-custom-or-forms-authentication-on-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="5a880-221">[Configure Custom or Forms Authentication on the Report Server](configure-custom-or-forms-authentication-on-the-report-server.md) </span></span>  
 [<span data-ttu-id="5a880-222">Proteção Estendida para Autenticação com o Reporting Services</span><span class="sxs-lookup"><span data-stu-id="5a880-222">Extended Protection for Authentication with Reporting Services</span></span>](extended-protection-for-authentication-with-reporting-services.md)  
  
  
