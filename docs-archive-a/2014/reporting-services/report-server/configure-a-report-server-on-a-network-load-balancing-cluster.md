---
title: Configurar um servidor de relatório em um cluster com balanceamento de carga de rede | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], network load balancing
ms.assetid: 6bfa5698-de65-43c3-b940-044f41c162d3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 5de36ab620db63294d2a5ec98fad6c45af201d26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87575608"
---
# <a name="configure-a-report-server-on-a-network-load-balancing-cluster"></a><span data-ttu-id="e583a-102">Configurar um servidor de relatório em um cluster com balanceamento de carga de rede</span><span class="sxs-lookup"><span data-stu-id="e583a-102">Configure a Report Server on a Network Load Balancing Cluster</span></span>
  <span data-ttu-id="e583a-103">Se você estiver configurando uma expansão do servidor de relatório a ser executada em um cluster NLB (Balanceamento de Carga de Rede), deverá fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e583a-103">If you are configuring a report server scale-out to run on a Network Load Balancing (NLB) cluster, you must do the following:</span></span>  
  
-   <span data-ttu-id="e583a-104">Verifique se o cluster NLB pode ser acessado através de um nome de servidor virtual que mapeia para o endereço IP do servidor virtual.</span><span class="sxs-lookup"><span data-stu-id="e583a-104">Ensure that the NLB cluster is accessible through a virtual server name that maps to the virtual server IP address.</span></span> <span data-ttu-id="e583a-105">Um nome de servidor virtual é necessário para que você possa configurar um único ponto de entrada para o cluster NLB.</span><span class="sxs-lookup"><span data-stu-id="e583a-105">A virtual server name is necessary so that you can configure a single point of entry to the NLB cluster.</span></span> <span data-ttu-id="e583a-106">Quando você configurar uma URL para cada instância do servidor de relatório, especificará o nome do servidor virtual como host.</span><span class="sxs-lookup"><span data-stu-id="e583a-106">When you configure a URL for each report server instance, you will specify the virtual server name as the host.</span></span>  
  
-   <span data-ttu-id="e583a-107">Configure a validação do estado de exibição para permitir a exibição de relatórios interativos.</span><span class="sxs-lookup"><span data-stu-id="e583a-107">Configure view state validation to support interactive report viewing.</span></span> <span data-ttu-id="e583a-108">Esses relatórios costumam ser renderizados inúmeras vezes durante uma única sessão de usuário para exibir dados novos ou diferentes em resposta a ações do usuário.</span><span class="sxs-lookup"><span data-stu-id="e583a-108">Interactive reports are typically rendered numerous times during a single user session to visualize new or different data in response to user actions.</span></span> <span data-ttu-id="e583a-109">Quando você configura a validação do estado de exibição, a continuidade é preservada na sessão de usuário, independentemente dos serviços do servidor de relatório solicitados.</span><span class="sxs-lookup"><span data-stu-id="e583a-109">By configuring view state validation, continuity is preserved within the user session regardless of which report server services the actual request.</span></span>  
  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="e583a-110">não fornece a funcionalidade para balancear a carga de uma implantação em expansão ou para definir um único ponto de acesso através de uma URL compartilhada.</span><span class="sxs-lookup"><span data-stu-id="e583a-110">does not provide functionality for load balancing a scale-out deployment or for defining a single point of access through a shared URL.</span></span> <span data-ttu-id="e583a-111">Você deve implementar uma solução separada de software ou hardware de cluster NLB para dar suporte a uma implantação em expansão do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e583a-111">You must implement a separate software or hardware NLB cluster solution to support a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] scale-out deployment.</span></span>  
  
 <span data-ttu-id="e583a-112">Você pode instalar o [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] em nós que já fazem parte de um cluster NLB ou pode configurar primeiro uma implementação em expansão e, depois, instalar o software de cluster.</span><span class="sxs-lookup"><span data-stu-id="e583a-112">You can install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] on nodes that are already part of an NLB cluster, or you can configure a scale-out deployment first and then install cluster software.</span></span>  
  
## <a name="steps-for-report-server-deployment-on-an-nlb-cluster"></a><span data-ttu-id="e583a-113">Etapas da implantação do servidor de relatório em um cluster NLB</span><span class="sxs-lookup"><span data-stu-id="e583a-113">Steps for Report Server Deployment on an NLB Cluster</span></span>  
 <span data-ttu-id="e583a-114">Use as seguintes diretrizes para instalar e configurar sua implantação:</span><span class="sxs-lookup"><span data-stu-id="e583a-114">Use the following guidelines to install and configure your deployment:</span></span>  
  
|<span data-ttu-id="e583a-115">Etapa</span><span class="sxs-lookup"><span data-stu-id="e583a-115">Step</span></span>|<span data-ttu-id="e583a-116">DESCRIÇÃO</span><span class="sxs-lookup"><span data-stu-id="e583a-116">Description</span></span>|<span data-ttu-id="e583a-117">Mais informações</span><span class="sxs-lookup"><span data-stu-id="e583a-117">More information</span></span>|  
|----------|-----------------|----------------------|  
|<span data-ttu-id="e583a-118">1</span><span class="sxs-lookup"><span data-stu-id="e583a-118">1</span></span>|<span data-ttu-id="e583a-119">Antes de instalar o Reporting Services em nós de servidor em um cluster NLB, verifique os requisitos de implantação em expansão.</span><span class="sxs-lookup"><span data-stu-id="e583a-119">Before you install Reporting Services on server nodes in an NLB cluster, check the requirements for scale-out deployment.</span></span>|<span data-ttu-id="e583a-120">[Configurar uma implantação em expansão do servidor de relatório no modo nativo &#40;Configuration Manager SSRS&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Manuais Online</span><span class="sxs-lookup"><span data-stu-id="e583a-120">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online</span></span>|  
|<span data-ttu-id="e583a-121">2</span><span class="sxs-lookup"><span data-stu-id="e583a-121">2</span></span>|<span data-ttu-id="e583a-122">Configure o cluster NLB e verifique se ele está funcionando corretamente.</span><span class="sxs-lookup"><span data-stu-id="e583a-122">Configure the NLB cluster and verify it is working correctly.</span></span><br /><br /> <span data-ttu-id="e583a-123">Mapeie um nome de cabeçalho de host para o IP de servidor virtual do cluster NLB.</span><span class="sxs-lookup"><span data-stu-id="e583a-123">Be sure to map a host header name to the virtual server IP of the NLB cluster.</span></span> <span data-ttu-id="e583a-124">O nome de cabeçalho de host é usado na URL do servidor de relatório e é mais fácil de lembrar e digitar do que um endereço IP.</span><span class="sxs-lookup"><span data-stu-id="e583a-124">The host header name is used in the report server URL, and is easier to remember and type than an IP address.</span></span>|<span data-ttu-id="e583a-125">Para obter mais informações, consulte a documentação do produto do Windows Server para a versão do sistema operacional Windows que você executa.</span><span class="sxs-lookup"><span data-stu-id="e583a-125">For more information, see the Windows Server product documentation for the version of the Windows operating system that you run.</span></span>|  
|<span data-ttu-id="e583a-126">3</span><span class="sxs-lookup"><span data-stu-id="e583a-126">3</span></span>|<span data-ttu-id="e583a-127">Adicionar o NetBIOS e um Nome de Domínio Totalmente Qualificado (FQDN) para o cabeçalho do host para a lista de **BackConnectionHostNames** armazenada no Registro do Windows.</span><span class="sxs-lookup"><span data-stu-id="e583a-127">Add the NetBIOS and Fully Qualified Domain Name (FQDN) for the host header to the list of **BackConnectionHostNames** stored in the Windows Registry.</span></span> <span data-ttu-id="e583a-128">Use as etapas em **Método 2: Especifique nomes de hosts** em [KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), com o ajuste a seguir.</span><span class="sxs-lookup"><span data-stu-id="e583a-128">Use the steps in **Method 2: Specify host names** in [KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), with the following adjustment.</span></span> <span data-ttu-id="e583a-129">A**Etapa 7** do artigo da base de dados de conhecimento diz "Encerre o Editor do Registro e reinicie o serviço do IISAdmin".</span><span class="sxs-lookup"><span data-stu-id="e583a-129">**Step 7** of the KB article says "Quit Registry Editor, and then restart the IISAdmin service."</span></span> <span data-ttu-id="e583a-130">Em vez disso, reinicialize o computador para garantir que as alterações entrem em vigor.</span><span class="sxs-lookup"><span data-stu-id="e583a-130">Instead, reboot the computer to ensure the changes take effect.</span></span><br /><br /> <span data-ttu-id="e583a-131">Por exemplo, se o nome do cabeçalho do host \<MyServer> for um nome virtual para o nome do computador Windows "contoso", você provavelmente poderá fazer referência ao formato FQDN como "contoso.domain.com".</span><span class="sxs-lookup"><span data-stu-id="e583a-131">For example, if the host header name \<MyServer> is a virtual name for the Windows computer name of "contoso", you can probably reference the FQDN form as "contoso.domain.com".</span></span> <span data-ttu-id="e583a-132">Você precisará adicionar o nome do cabeçalho de host (MyServer) e nome FQDN (contoso.domain.com) à lista em **BackConnectionHostNames**.</span><span class="sxs-lookup"><span data-stu-id="e583a-132">You will need to add both the hostheader name (MyServer ) and FQDN name (contoso.domain.com) to the list in **BackConnectionHostNames**.</span></span>|<span data-ttu-id="e583a-133">Esta etapa é necessária se seu ambiente de servidor envolver autenticação de NTLM no computador local, criando uma conexão de loopback.</span><span class="sxs-lookup"><span data-stu-id="e583a-133">This step is required if your server environment involves NTLM authentication on the local computer, creating a loop back connection.</span></span><br /><br /> <span data-ttu-id="e583a-134">Se este for o caso, você verá que as solicitações entre o Gerenciador de Relatórios e Servidor de relatório falharão com 401 (Sem autorização).</span><span class="sxs-lookup"><span data-stu-id="e583a-134">If this is the case, you will experience the requests between Report Manager and Report Server to fail with 401 (Unauthorized).</span></span>|  
|<span data-ttu-id="e583a-135">4</span><span class="sxs-lookup"><span data-stu-id="e583a-135">4</span></span>|<span data-ttu-id="e583a-136">Instale o [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] no modo somente arquivos nos nós que já fazem parte de um cluster NLB e configure as instâncias do servidor de relatório para a implantação da expansão.</span><span class="sxs-lookup"><span data-stu-id="e583a-136">Install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] in files-only mode on nodes that are already part of a NLB cluster, and configure the report server instances for scale-out deployment.</span></span><br /><br /> <span data-ttu-id="e583a-137">A expansão configurada poderá não responder às solicitações dirigidas ao IP do servidor virtual.</span><span class="sxs-lookup"><span data-stu-id="e583a-137">The scale-out that you configure might not respond to requests that are directed to the virtual server IP.</span></span> <span data-ttu-id="e583a-138">A configuração da expansão para usar o IP do servidor virtual ocorre em uma etapa posterior, depois que você configura a validação do estado de exibição.</span><span class="sxs-lookup"><span data-stu-id="e583a-138">Configuring the scale-out to use the virtual server IP occurs at a later step, after you configure view state validation.</span></span>|[<span data-ttu-id="e583a-139">Configurar uma implantação de expansão do servidor de relatório no modo nativo &#40;Gerenciador de configurações do SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="e583a-139">Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md)|  
|<span data-ttu-id="e583a-140">5</span><span class="sxs-lookup"><span data-stu-id="e583a-140">5</span></span>|<span data-ttu-id="e583a-141">Configure a validação do estado de exibição.</span><span class="sxs-lookup"><span data-stu-id="e583a-141">Configure view state validation.</span></span><br /><br /> <span data-ttu-id="e583a-142">Para obter os melhores resultados, execute esta etapa depois de configurar a implantação em expansão e antes de configurar as instâncias do servidor de relatório que usarão o IP do servidor virtual.</span><span class="sxs-lookup"><span data-stu-id="e583a-142">For best results, perform this step after you configure the scale-out deployment, and before you configure the report server instances to use the virtual server IP.</span></span> <span data-ttu-id="e583a-143">Ao configurar primeiro a validação do estado de exibição, você evitará exceções sobre falha na validação do estado quando usuários tentarem acessar relatórios interativos.</span><span class="sxs-lookup"><span data-stu-id="e583a-143">By configuring view state validation first, you can avoid exceptions about failed state validation when users attempt to access interactive reports.</span></span>|<span data-ttu-id="e583a-144">[Como configurar a validação do estado de exibição](#ViewState) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="e583a-144">[How to Configure View State Validation](#ViewState) in this topic.</span></span>|  
|<span data-ttu-id="e583a-145">6</span><span class="sxs-lookup"><span data-stu-id="e583a-145">6</span></span>|<span data-ttu-id="e583a-146">Configure o `Hostname` e o `UrlRoot` para usar o IP do servidor virtual do cluster NLB.</span><span class="sxs-lookup"><span data-stu-id="e583a-146">Configure `Hostname` and `UrlRoot` to use the virtual server IP of the NLB cluster.</span></span>|<span data-ttu-id="e583a-147">[Como configurar Hostname e UrlRoot](#SpecifyingVirtualServerName) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="e583a-147">[How to Configure Hostname and UrlRoot](#SpecifyingVirtualServerName) in this topic.</span></span>|  
|<span data-ttu-id="e583a-148">7</span><span class="sxs-lookup"><span data-stu-id="e583a-148">7</span></span>|<span data-ttu-id="e583a-149">Verifique se é possível acessar os servidores através do nome do host especificado.</span><span class="sxs-lookup"><span data-stu-id="e583a-149">Verify the servers are accessible through the host name you specified.</span></span>|<span data-ttu-id="e583a-150">[Verificar o acesso ao servidor de relatório](#Verify) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="e583a-150">[Verify Report Server Access](#Verify) in this topic.</span></span>|  
  
##  <a name="how-to-configure-view-state-validation"></a><a name="ViewState"></a><span data-ttu-id="e583a-151">Como configurar a validação do estado de exibição</span><span class="sxs-lookup"><span data-stu-id="e583a-151">How to Configure View State Validation</span></span>  
 <span data-ttu-id="e583a-152">Para executar uma implantação em expansão em um cluster NLB, você deve configurar a validação do estado de exibição para que os usuários possam exibir relatórios HTML interativos.</span><span class="sxs-lookup"><span data-stu-id="e583a-152">To run a scale-out deployment on an NLB cluster, you must configure view state validation so that users can view interactive HTML reports.</span></span> <span data-ttu-id="e583a-153">Você deve fazer isso para o servidor de relatório e Gerenciador de Relatórios.</span><span class="sxs-lookup"><span data-stu-id="e583a-153">You must do this for the report server and for Report Manager.</span></span>  
  
 <span data-ttu-id="e583a-154">A validação do estado de exibição é controlada pelo ASP .NET.</span><span class="sxs-lookup"><span data-stu-id="e583a-154">View state validation is controlled by the ASP.NET.</span></span> <span data-ttu-id="e583a-155">Por padrão, ela fica habilitada e usa a identidade do serviço Web para efetuar a validação.</span><span class="sxs-lookup"><span data-stu-id="e583a-155">By default, view state validation is enabled and uses the identity of the Web service to perform the validation.</span></span> <span data-ttu-id="e583a-156">Porém, em um cenário de cluster NLB, existem várias instâncias de serviço e identidades de serviço Web que são executadas em computadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="e583a-156">However, in an NLB cluster scenario, there are multiple service instances and web service identities that run on different computers.</span></span> <span data-ttu-id="e583a-157">Como a identidade do serviço varia para cada nó, não é possível usar uma única identidade de processo para efetuar a validação.</span><span class="sxs-lookup"><span data-stu-id="e583a-157">Because the service identity varies for each node, you cannot rely on a single process identity to perform the validation.</span></span>  
  
 <span data-ttu-id="e583a-158">Para contornar esse problema, você pode gerar uma chave de validação arbitrária para dar suporte à validação do estado de exibição e, depois, configurar manualmente cada nó do servidor de relatório para usar a mesma chave.</span><span class="sxs-lookup"><span data-stu-id="e583a-158">To work around this issue, you can generate an arbitrary validation key to support view state validation, and then manually configure each report server node to use the same key.</span></span> <span data-ttu-id="e583a-159">É possível usar qualquer sequência hexadecimal gerada aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="e583a-159">You can use any randomly generated hexadecimal sequence.</span></span> <span data-ttu-id="e583a-160">O algoritmo de validação (como SHA1) determina o comprimento da sequência hexadecimal.</span><span class="sxs-lookup"><span data-stu-id="e583a-160">The validation algorithm (such as SHA1) determines how long the hexadecimal sequence must be.</span></span>  
  
1.  <span data-ttu-id="e583a-161">Gere uma chave de validação e uma chave de descriptografia usando a funcionalidade de geração automática fornecida pelo [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e583a-161">Generate a validation key and decryption key by using the autogenerate functionality provided by the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="e583a-162">No final, você deve ter uma única entrada de <`machineKey`> que você pode colar no arquivo de Web.config para cada instância de Report Manager na implantação em expansão.</span><span class="sxs-lookup"><span data-stu-id="e583a-162">In the end, you must have a single <`machineKey`> entry that you can paste into the Web.config file for each Report Manager instance in the scale-out deployment.</span></span>  
  
     <span data-ttu-id="e583a-163">O exemplo a seguir mostra uma ilustração do valor a ser obtido.</span><span class="sxs-lookup"><span data-stu-id="e583a-163">The following example provides an illustration of the value you must obtain.</span></span> <span data-ttu-id="e583a-164">Não copie o exemplo nos seus arquivos de configuração; os valores de chave não são válidos.</span><span class="sxs-lookup"><span data-stu-id="e583a-164">Do not copy the example into your configuration files; the key values are not valid.</span></span>  
  
    ```  
    <machineKey validationKey="123455555" decryptionKey="678999999" validation="SHA1" decryption="AES"/>  
    ```  
  
2.  <span data-ttu-id="e583a-165">Abra o arquivo Web.config para Report Manager e, na seção <`system.web`>, Cole o elemento <> `machineKey` que você gerou.</span><span class="sxs-lookup"><span data-stu-id="e583a-165">Open the Web.config file for Report Manager, and in the <`system.web`> section paste the <`machineKey`> element that you generated.</span></span> <span data-ttu-id="e583a-166">Por padrão, o arquivo Web.config do Gerenciador de Relatórios está localizado em \Arquivos de Programas\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span><span class="sxs-lookup"><span data-stu-id="e583a-166">By default, the Report Manager Web.config file is located in \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span></span>  
  
3.  <span data-ttu-id="e583a-167">Salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="e583a-167">Save the file.</span></span>  
  
4.  <span data-ttu-id="e583a-168">Repita a etapa anterior para cada servidor de relatório na implantação em expansão.</span><span class="sxs-lookup"><span data-stu-id="e583a-168">Repeat the previous step for each report server in the scale-out deployment.</span></span>  
  
5.  <span data-ttu-id="e583a-169">Verifique se todos os arquivos de Web.Config nas pastas do \Reporting Services\Report Manager contêm `machineKey` elementos de> de <idênticos na `system.web` seção <>.</span><span class="sxs-lookup"><span data-stu-id="e583a-169">Verify that all Web.Config files in the \Reporting Services\Report Manager folders contain identical <`machineKey`> elements in the <`system.web`> section.</span></span>  
  
##  <a name="how-to-configure-hostname-and-urlroot"></a><a name="SpecifyingVirtualServerName"></a><span data-ttu-id="e583a-170">Como configurar o nome do host e o UrlRoot</span><span class="sxs-lookup"><span data-stu-id="e583a-170">How to Configure Hostname and UrlRoot</span></span>  
 <span data-ttu-id="e583a-171">Para configurar uma implantação em expansão do servidor de relatório em um cluster NLB, é necessário definir um único nome de servidor virtual que forneça um único ponto de acesso ao cluster de servidores.</span><span class="sxs-lookup"><span data-stu-id="e583a-171">To configure a report server scale-out deployment on an NLB cluster, you must define a single virtual server name that provides a single point of access to the server cluster.</span></span> <span data-ttu-id="e583a-172">Então registre esse nome de servidor virtual com o DNS (Domain Name Server, servidor de nomes de domínio) em seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="e583a-172">Then register this virtual server name with the Domain Name Server (DNS) in your environment.</span></span>  
  
 <span data-ttu-id="e583a-173">Depois de definir o nome do servidor virtual, você poderá configurar as propriedades  `Hostname` e as   `UrlRoot` no arquivo RSReportServer.config para incluir o nome do servidor virtual na URL do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="e583a-173">After you define the virtual server name, you can configure the `Hostname` and `UrlRoot` properties in the RSReportServer.config file to include the virtual server name in the report server URL.</span></span>  
  
 <span data-ttu-id="e583a-174">Configure a propriedade `Hostname` quando você estiver usando reservas curinga de URL em seu ambiente de relatório.</span><span class="sxs-lookup"><span data-stu-id="e583a-174">Configure the `Hostname` property when you are using wildcard URL reservations in your reporting environment.</span></span> <span data-ttu-id="e583a-175">Quando você especifica a propriedade `Hostname` para ser o nome do servidor virtual do servidor NLB, o tráfego de rede para o ambiente de relatório é direcionado ao servidor NLB.</span><span class="sxs-lookup"><span data-stu-id="e583a-175">When you specify the `Hostname` property to be the virtual server name of the NLB server, network traffic for the reporting environment is directed to the NLB server.</span></span> <span data-ttu-id="e583a-176">O NLB, em seguida, distribui solicitações entre os nós de servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="e583a-176">The NLB then distributes requests among the report server nodes.</span></span>  
  
 <span data-ttu-id="e583a-177">Além disso, configure a propriedade `UrlRoot` de forma que os links de relatório funcionem nos relatórios que foram exportados para relatórios estáticos, como no formato Excel ou PDF, ou em relatórios que são gerados por assinaturas, como as assinaturas de e-mail.</span><span class="sxs-lookup"><span data-stu-id="e583a-177">Additionally, configure the `UrlRoot` property so that report links work in reports that have been exported to static reports, such as in an Excel or PDF format, or in reports that are generated by subscriptions, such as e-mail subscriptions.</span></span>  
  
 <span data-ttu-id="e583a-178">Se você integrar [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] o com 3,0 ou [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007 ou hospedar seus relatórios em um aplicativo Web personalizado, talvez seja necessário configurar apenas a `UrlRoot` propriedade.</span><span class="sxs-lookup"><span data-stu-id="e583a-178">If you integrate [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] with [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3.0 or [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007, or you host your reports in a custom Web application, you might need to configure only the `UrlRoot` property.</span></span> <span data-ttu-id="e583a-179">Nesse caso, configure a propriedade `UrlRoot` para ser a URL do site do SharePoint ou do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="e583a-179">In this case, configure the `UrlRoot` property to be the URL of the SharePoint site or Web application.</span></span> <span data-ttu-id="e583a-180">Isso direcionará o tráfego de rede para o ambiente de relatório para o aplicativo que trata dos relatórios e não para o servidor de relatório ou cluster NLB.</span><span class="sxs-lookup"><span data-stu-id="e583a-180">This will direct network traffic for the reporting environment to the application that handles the reports rather than to the report server or NLB cluster.</span></span>  
  
 <span data-ttu-id="e583a-181">Não modifique `ReportServerUrl`.</span><span class="sxs-lookup"><span data-stu-id="e583a-181">Do not modify `ReportServerUrl`.</span></span> <span data-ttu-id="e583a-182">Se você modificar essa URL, introduzirá uma viagem de ida e volta a mais no servidor virtual sempre que uma solicitação interna for tratada.</span><span class="sxs-lookup"><span data-stu-id="e583a-182">If you modify this URL, you will introduce an extra roundtrip through the virtual server each time an internal request is handled.</span></span> <span data-ttu-id="e583a-183">Para obter mais informações, consulte [URLs em arquivos de configuração &#40;Gerenciador de Configurações do SSRS&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="e583a-183">For more information, see [URLs in Configuration Files  &#40;SSRS Configuration Manager&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span></span> <span data-ttu-id="e583a-184">Para obter mais informações sobre como editar o arquivo de configuração, consulte [Modificar um arquivo de configuração do Reporting Services &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) nos Manuais Online do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e583a-184">For more information about editing the configuration file, see [Modify a Reporting Services Configuration File &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
1.  <span data-ttu-id="e583a-185">Abra o RSReportServer.config em um editor de texto.</span><span class="sxs-lookup"><span data-stu-id="e583a-185">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="e583a-186">Localize a **\<Service>** seção e adicione as seguintes informações ao arquivo de configuração, substituindo o `Hostname` valor pelo nome do servidor virtual para o servidor NLB:</span><span class="sxs-lookup"><span data-stu-id="e583a-186">Find the **\<Service>** section, and add the following information to the configuration file, replacing the `Hostname` value with the virtual server name for your NLB server:</span></span>  
  
    ```  
    <Hostname>virtual_server</Hostname>  
    ```  
  
3.  <span data-ttu-id="e583a-187">Localize `UrlRoot`.</span><span class="sxs-lookup"><span data-stu-id="e583a-187">Find `UrlRoot`.</span></span> <span data-ttu-id="e583a-188">O elemento não é especificado no arquivo de configuração, mas o valor padrão usado é uma URL neste formato: http://ou https:// \<*computername*> / \<*reportserver*> , em que \<*reportserver*> é o nome do diretório virtual do serviço Web servidor de relatórios.</span><span class="sxs-lookup"><span data-stu-id="e583a-188">The element is unspecified in the configuration file, but the default value used is a URL in this format: http:// or https://\<*computername*>/\<*reportserver*>, where \<*reportserver*> is the virtual directory name of the Report Server Web service.</span></span>  
  
4.  <span data-ttu-id="e583a-189">Digite um valor para `UrlRoot` que inclua o nome virtual do cluster neste formato: http://ou https:// \<*virtual_server*> / \<*reportserver*> .</span><span class="sxs-lookup"><span data-stu-id="e583a-189">Type a value for `UrlRoot` that includes the virtual name of the cluster in this format: http:// or https://\<*virtual_server*>/\<*reportserver*>.</span></span>  
  
5.  <span data-ttu-id="e583a-190">Salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="e583a-190">Save the file.</span></span>  
  
6.  <span data-ttu-id="e583a-191">Repita estas etapas em cada arquivo RSReportServer.config de cada servidor de relatório na implantação em expansão.</span><span class="sxs-lookup"><span data-stu-id="e583a-191">Repeat these steps in each RSReportServer.config file for each report server in the scale-out deployment.</span></span>  
  
##  <a name="verify-report-server-access"></a><a name="Verify"></a><span data-ttu-id="e583a-192">Verificar o acesso ao servidor de relatório</span><span class="sxs-lookup"><span data-stu-id="e583a-192">Verify Report Server Access</span></span>  
 <span data-ttu-id="e583a-193">Verifique se você pode acessar a implantação em expansão por meio do nome do servidor virtual (por exemplo, https://MyVirtualServerName/reportserver e https://MyVirtualServerName/reports) .</span><span class="sxs-lookup"><span data-stu-id="e583a-193">Verify that you can access the scale-out deployment through the virtual server name (for example, https://MyVirtualServerName/reportserver and https://MyVirtualServerName/reports).</span></span>  
  
 <span data-ttu-id="e583a-194">Você pode verificar que nó efetivamente processa relatórios examinando os arquivos de log do servidor de relatório ou verificando o log de execução do RS (a tabela do log de execução contém uma coluna denominada **InstanceName** que mostra qual instância processou uma determinada solicitação).</span><span class="sxs-lookup"><span data-stu-id="e583a-194">You can check which node actually processes reports by looking at the report server log files or by checking the RS execution log (the execution log table contains a column called **InstanceName** that shows which instance processed a particular request).</span></span> <span data-ttu-id="e583a-195">Para obter mais informações, consulte [Fontes e arquivos de log do Reporting Services](../report-server/reporting-services-log-files-and-sources.md) em Manuais Online do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e583a-195">For more information, see [Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="e583a-196">Se não for possível se conectar ao servidor de relatório, verifique o NLB para assegurar que as solicitações sejam enviadas para o servidor de relatório e visualize o log do HTTP do servidor de relatório para assegurar que o servidor esteja recebendo as solicitações.</span><span class="sxs-lookup"><span data-stu-id="e583a-196">If you cannot connect to the report server, check the NLB to ensure that requests are sent to the report server and view the report server HTTP log to ensure that the server is receiving the requests.</span></span>  
  
#### <a name="troubleshooting-failed-requests"></a><span data-ttu-id="e583a-197">Solucionando problemas de solicitações falhas</span><span class="sxs-lookup"><span data-stu-id="e583a-197">Troubleshooting Failed Requests</span></span>  
 <span data-ttu-id="e583a-198">Se as solicitações não chegarem até as instâncias do servidor de relatório, verifique no arquivo RSReportServer.config se o nome do servidor virtual está especificado como o nome do host para as URLs do servidor de relatório:</span><span class="sxs-lookup"><span data-stu-id="e583a-198">If requests do not reach the report server instances, check the RSReportServer.config file to verify that the virtual server name is specified as the host name for the report server URLs:</span></span>  
  
1.  <span data-ttu-id="e583a-199">Abra o arquivo RSReportServer.config em um editor de texto.</span><span class="sxs-lookup"><span data-stu-id="e583a-199">Open the RSReportServer.config file in a text editor.</span></span>  
  
2.  <span data-ttu-id="e583a-200">Localize <`Hostname`>, <`ReportServerUrl`> e <> `UrlRoot` e verifique o nome do host para cada configuração.</span><span class="sxs-lookup"><span data-stu-id="e583a-200">Find <`Hostname`>, <`ReportServerUrl`>, and <`UrlRoot`>, and check the host name for each settings.</span></span> <span data-ttu-id="e583a-201">Se o valor não for o nome de host esperado, substitua-o pelo nome de host correto.</span><span class="sxs-lookup"><span data-stu-id="e583a-201">If the value is not the host name you expect, replace it with the correct host name.</span></span>  
  
 <span data-ttu-id="e583a-202">Se você iniciar a ferramenta de configuração de Reporting Services depois de fazer essas alterações, a ferramenta poderá alterar as configurações de> de <`ReportServerUrl` para o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="e583a-202">If you start the Reporting Services Configuration tool after making these changes, the tool might change the <`ReportServerUrl`> settings to the default value.</span></span> <span data-ttu-id="e583a-203">Sempre tenha uma cópia de backup dos arquivos de configuração caso seja necessário substituí-los pela versão que contém as configurações desejadas.</span><span class="sxs-lookup"><span data-stu-id="e583a-203">Always keep a backup copy of the configuration files in case you need to replace them with the version that contains the settings you want to use.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e583a-204">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="e583a-204">See Also</span></span>  
 <span data-ttu-id="e583a-205">[Reporting Services Configuration Manager &#40;Modo Nativo&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="e583a-205">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="e583a-206">[Configurar uma URL &#40;Configuration Manager SSRS&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="e583a-206">[Configure a URL  &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="e583a-207">[Configurar uma implantação em expansão do servidor de relatório no modo nativo &#40;Configuration Manager SSRS&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="e583a-207">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span></span>  
 [<span data-ttu-id="e583a-208">Gerenciar um servidor de relatórios de Modo Nativo do Reporting Services</span><span class="sxs-lookup"><span data-stu-id="e583a-208">Manage a Reporting Services Native Mode Report Server</span></span>](manage-a-reporting-services-native-mode-report-server.md)  
  
  
