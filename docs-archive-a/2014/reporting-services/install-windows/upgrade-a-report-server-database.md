---
title: Atualizar um banco de dados do servidor de relatório | Microsoft Docs
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- upgrading databases
- report server database
- upgrading Reporting Services
ms.assetid: 4091cf87-9d97-4048-a393-67f1f9207401
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 28e382de505781f4155204fcc652d1308dacce76
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87583381"
---
# <a name="upgrade-a-report-server-database"></a><span data-ttu-id="214df-102">Atualizar um banco de dados do servidor de relatório</span><span class="sxs-lookup"><span data-stu-id="214df-102">Upgrade a Report Server Database</span></span>
  <span data-ttu-id="214df-103">O banco de dados do servidor de relatório fornece armazenamento para uma ou mais instâncias do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-103">The report server database provides storage for one or more report server instances.</span></span> <span data-ttu-id="214df-104">Como o esquema do banco de dados do servidor de relatório pode ser alterado a cada versão nova do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], é necessário que a versão do banco de dados corresponda à versão da instância do servidor de relatório que você está usando.</span><span class="sxs-lookup"><span data-stu-id="214df-104">Because the report server database schema can change with each new release of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], it is required that the database version match the version of the report server instance you are using.</span></span> <span data-ttu-id="214df-105">Na maioria dos casos, um banco de dados do servidor de relatório pode ser atualizado automaticamente sem ação específica de sua parte.</span><span class="sxs-lookup"><span data-stu-id="214df-105">In most cases, a report server database can be upgraded automatically with no specific action on your part.</span></span>  
  
 <span data-ttu-id="214df-106">**Modo nativo:** No [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] modo nativo, o banco de dados do servidor de relatório é realmente composto de dois bancos de dados que têm nomes padrão "ReportServer e ReportServerTempDB".</span><span class="sxs-lookup"><span data-stu-id="214df-106">**Native Mode:** In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode, the report server database is actually comprised of two database that have default names of "ReportServer and ReportServerTempDB".</span></span>  
  
 <span data-ttu-id="214df-107">**Modo do SharePoint:** No [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] modo do SharePoint, o banco de dados do servidor de relatório é, na verdade, uma coleção de bancos que é criada para cada instância do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] aplicativo de serviço.</span><span class="sxs-lookup"><span data-stu-id="214df-107">**SharePoint mode:** In [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)][!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] SharePoint mode the report server database is actually a collection of databases that is created for each instance of the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service application.</span></span>  
  
## <a name="ways-to-upgrade-a-native-mode-report-server-database"></a><span data-ttu-id="214df-108">Maneiras de atualizar um banco de dados do servidor de relatório de modo nativo</span><span class="sxs-lookup"><span data-stu-id="214df-108">Ways to Upgrade a Native Mode Report Server Database</span></span>  
 <span data-ttu-id="214df-109">A seguinte lista identifica as condições nas quais um banco de dados do servidor de relatório é atualizado:</span><span class="sxs-lookup"><span data-stu-id="214df-109">The following list identifies the conditions under which a report server database is upgraded:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="214df-110">atualiza uma única instância de um servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-110">Setup upgrades a single instance of a report server.</span></span> <span data-ttu-id="214df-111">O esquema de banco de dados do servidor de relatório é atualizado automaticamente após a inicialização do serviço, e o servidor de relatório determina que a versão do esquema de banco de dados não corresponde à do servidor.</span><span class="sxs-lookup"><span data-stu-id="214df-111">The report server database schema is automatically upgraded after service startup and the report server determines that the database schema version does not match the server version.</span></span>  
  
     <span data-ttu-id="214df-112">Durante a inicialização do serviço, o servidor de relatório verifica se a versão do esquema de banco de dados corresponde à versão do servidor.</span><span class="sxs-lookup"><span data-stu-id="214df-112">At service startup, the report server checks the database schema version to verify that it matches the server version.</span></span> <span data-ttu-id="214df-113">Se a versão do esquema de banco de dados for mais antiga, ela será atualizada automaticamente para a versão de esquema exigida pelo servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-113">If the database schema version is an older version, it is automatically upgraded to the schema version that is required by the report server.</span></span> <span data-ttu-id="214df-114">A atualização automática é especialmente útil se você restaurou ou anexou um banco de dados de servidor de relatório mais antigo.</span><span class="sxs-lookup"><span data-stu-id="214df-114">Automatic upgrade is especially useful if you restored or attached an older report server database.</span></span> <span data-ttu-id="214df-115">Uma mensagem é inserida no arquivo de log de rastreamento do servidor de relatório, indicando que a versão do esquema de banco de dados foi atualizada.</span><span class="sxs-lookup"><span data-stu-id="214df-115">A message is entered in the report server trace log file indicating that the database schema version was upgraded.</span></span>  
  
-   <span data-ttu-id="214df-116">O Gerenciador de Configurações do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] atualiza um banco de dados do servidor de relatório local ou remoto quando você seleciona uma versão mais antiga a ser usada com uma instância mais recente do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-116">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager upgrades a local or remote report server database when you select an older version to use with a newer report server instance.</span></span> <span data-ttu-id="214df-117">Nesse caso, você deve confirmar a ação de atualização antes que ela aconteça.</span><span class="sxs-lookup"><span data-stu-id="214df-117">In this case, you must confirm the upgrade action before it happens.</span></span>  
  
     <span data-ttu-id="214df-118">O Gerenciador de Configurações do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] não fornece mais um botão Atualizar separado ou um script de atualização.</span><span class="sxs-lookup"><span data-stu-id="214df-118">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager no longer provides a separate Upgrade button or upgrade script.</span></span> <span data-ttu-id="214df-119">Esses recursos ficaram obsoletos a partir do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] devido ao recurso de atualização automática do serviço Servidor de Relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-119">Those features are obsolete starting with [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] due to the automatic upgrade feature of the Report Server service.</span></span>  
  
 <span data-ttu-id="214df-120">Depois que o esquema for atualizado, você não poderá reverter a atualização para uma versão anterior.</span><span class="sxs-lookup"><span data-stu-id="214df-120">After the schema is updated, you cannot rollback the upgrade to an earlier version.</span></span> <span data-ttu-id="214df-121">Sempre faça backup do banco de dados do servidor de relatório, caso precise recriar uma instalação anterior.</span><span class="sxs-lookup"><span data-stu-id="214df-121">Always backup the report server database in case you need to recreate a previous installation.</span></span>  
  
## <a name="how-the-schema-metadata-and-report-server-content-is-updated"></a><span data-ttu-id="214df-122">Como o esquema, os metadados e o conteúdo do servidor de relatório são atualizados</span><span class="sxs-lookup"><span data-stu-id="214df-122">How the Schema, Metadata, and Report Server Content is Updated</span></span>  
 <span data-ttu-id="214df-123">O banco de dados do servidor de relatório é atualizado em três estágios:</span><span class="sxs-lookup"><span data-stu-id="214df-123">The report server database is upgraded in three stages:</span></span>  
  
1.  <span data-ttu-id="214df-124">O esquema é atualizado automaticamente após a instalação e a inicialização do serviço ou quando você seleciona um banco de dados do servidor de relatório do modo nativo do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no Gerenciador de Configurações do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] que é uma versão antiga.</span><span class="sxs-lookup"><span data-stu-id="214df-124">The schema is upgraded automatically after setup and service startup, or when you select a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native mode report server database in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager that is an older version.</span></span> <span data-ttu-id="214df-125">Além disso, o serviço do Servidor de Relatório verifica a versão do banco de dados durante a inicialização.</span><span class="sxs-lookup"><span data-stu-id="214df-125">In addition, the Report Server service checks the database version at startup.</span></span> <span data-ttu-id="214df-126">Se o servidor de relatório estiver conectado a um banco de dados que seja de uma versão anterior, o servidor de relatório atualizará o banco de dados durante a inicialização.</span><span class="sxs-lookup"><span data-stu-id="214df-126">If the report server is connected to a database that is an earlier version, the report server will update the database during startup.</span></span>  
  
2.  <span data-ttu-id="214df-127">Os descritores de segurança são atualizados durante o primeiro uso do banco de dados do servidor de relatório após a atualização do esquema.</span><span class="sxs-lookup"><span data-stu-id="214df-127">Security descriptors are upgraded on first use of the report server database after the schema is updated.</span></span>  
  
3.  <span data-ttu-id="214df-128">Os relatórios publicados e os instantâneos de relatório compilados são atualizados durante o primeiro uso.</span><span class="sxs-lookup"><span data-stu-id="214df-128">Published reports and compiled report snapshots are updated on first use.</span></span> <span data-ttu-id="214df-129">Para obter mais informações, consulte [Upgrade Reports](upgrade-reports.md).</span><span class="sxs-lookup"><span data-stu-id="214df-129">For more information, see [Upgrade Reports](upgrade-reports.md).</span></span>  
  
 <span data-ttu-id="214df-130">Além do banco de dados do servidor de relatório, um servidor de relatório também usa um banco de dados temporário.</span><span class="sxs-lookup"><span data-stu-id="214df-130">In addition to the report server database, a report server also uses a temporary database.</span></span> <span data-ttu-id="214df-131">O banco de dados temporário é atualizado automaticamente quando você atualiza o banco de dados do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="214df-131">The temporary database is upgraded automatically when you upgrade the report server database.</span></span>  
  
## <a name="permissions-required-to-upgrade-a-report-server-database"></a><span data-ttu-id="214df-132">Permissões necessárias para atualizar um banco de dados do Servidor de Relatório</span><span class="sxs-lookup"><span data-stu-id="214df-132">Permissions required to upgrade a Report Server Database</span></span>  
 <span data-ttu-id="214df-133">Se você estiver atualizando uma instalação do [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] que contenha um banco de dados do servidor de relatório, poderá ver uma mensagem de erro se a atualização de banco de dados for executada com permissões insuficientes.</span><span class="sxs-lookup"><span data-stu-id="214df-133">If you are upgrading a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation that includes a report server database, you may see an error message if the database upgrade is performed with insufficient permissions.</span></span> <span data-ttu-id="214df-134">Por padrão, a Instalação usa o token de segurança do usuário que está executando o programa Instalação para se conectar à instância remota do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e atualizar o esquema.</span><span class="sxs-lookup"><span data-stu-id="214df-134">By default, Setup uses the security token of the user who is running the Setup program to connect to the remote [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and update the schema.</span></span> <span data-ttu-id="214df-135">Se você tiver permissões [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **sysadmin** no servidor de banco de dados que hospeda os bancos de dados do servidor de relatório, a atualização do banco de dados será bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="214df-135">If you have [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **sysadmin** permissions on the database server that hosts the report server databases, the database upgrade will succeed.</span></span> <span data-ttu-id="214df-136">Da mesma maneira, se você executar a Instalação no prompt de comando e especificar os argumentos RSUPGRADEDATABASEACCOUNT e RSUPGRADEPASSWORD para uma conta que tem a permissão de **sysadmin** para modificar o esquema no computador remoto, a atualização do banco de dados será bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="214df-136">Similarly, if you run Setup from the command prompt and specify the RSUPGRADEDATABASEACCOUNT and RSUPGRADEPASSWORD arguments for an account that has **sysadmin** permission to modify the schema on the remote computer, the database upgrade will succeed.</span></span>  
  
 <span data-ttu-id="214df-137">Todavia, se você não tiver permissão de **sysadmin** no banco de dados do computador remoto, a conexão será recusada com o seguinte erro:</span><span class="sxs-lookup"><span data-stu-id="214df-137">However, if you do not have **sysadmin** permission to the database on the remote computer, the connection will be refused with the following error:</span></span>  
  
 `"Setup was not able to upgrade the report server database schema. You must update the database schema manually after setup is finished. To update the schema, run the Reporting Services Configuration Manager, open the Database Setup page, re-select the database, and click Apply. The database will be upgraded automatically."`  
  
 <span data-ttu-id="214df-138">Nesse ponto, os arquivos de programas do servidor de relatório serão atualizados, mas o banco de dados do servidor de relatório estará no formato da versão anterior.</span><span class="sxs-lookup"><span data-stu-id="214df-138">At this point, the report server program files will be upgraded, but the report server database will be in the format of the previous version.</span></span> <span data-ttu-id="214df-139">O servidor de relatório ficará indisponível até que você conclua o processo de atualização por meio da atualização manual do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="214df-139">The report server will be unavailable until you finish the upgrade process by upgrading the database manually.</span></span>  
  
#### <a name="to-upgrade-a-native-mode-database-with-scripts"></a><span data-ttu-id="214df-140">Para atualizar um banco de dados de modo nativo com scripts</span><span class="sxs-lookup"><span data-stu-id="214df-140">To upgrade a Native Mode database With Scripts</span></span>  
 <span data-ttu-id="214df-141">Você pode usar scripts do WMI para atualizar um banco de dados do servidor de relatórios.</span><span class="sxs-lookup"><span data-stu-id="214df-141">You can use WMI scripts to upgrade a report server database.</span></span> <span data-ttu-id="214df-142">Para obter mais informações, consulte [Método GenerateDatabaseUpgradeScript &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-generatedatabaseupgradescript.md)</span><span class="sxs-lookup"><span data-stu-id="214df-142">For more information, see [GenerateDatabaseUpgradeScript Method &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-generatedatabaseupgradescript.md)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="214df-143">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="214df-143">See Also</span></span>  
 <span data-ttu-id="214df-144">[Reporting Services Configuration Manager &#40;Modo Nativo&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="214df-144">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="214df-145">[Criar um banco de dados do servidor de relatório &#40;Configuration Manager SSRS&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="214df-145">[Create a Report Server Database  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="214df-146">[Assistente para alterar banco de dados &#40;modo nativo do SSRS&#41;](../../sql-server/install/change-database-wizard-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="214df-146">[Change Database Wizard &#40;SSRS Native Mode&#41;](../../sql-server/install/change-database-wizard-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="214df-147">[Atualizar e migrar o Reporting Services](upgrade-and-migrate-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="214df-147">[Upgrade and Migrate Reporting Services](upgrade-and-migrate-reporting-services.md) </span></span>  
 [<span data-ttu-id="214df-148">Migrar uma instalação do Reporting Services &#40;modo nativo&#41;</span><span class="sxs-lookup"><span data-stu-id="214df-148">Migrate a Reporting Services Installation &#40;Native Mode&#41;</span></span>](migrate-a-reporting-services-installation-native-mode.md)  
  
  
