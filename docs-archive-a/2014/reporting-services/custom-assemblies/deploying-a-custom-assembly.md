---
title: Implantando um assembly personalizado | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- deploying custom assemblies [Reporting Services]
- custom assemblies [Reporting Services], deploying
- custom assemblies [Reporting Services], updating
- updating custom assemblies
ms.assetid: c6674cd8-0de7-4a5a-9e7c-12ffa49f6fd2
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 3d88e1db844304b5cbb51f4af52b4715ef7e8c1e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685465"
---
# <a name="deploying-a-custom-assembly"></a><span data-ttu-id="8451a-102">Implantando um assembly personalizado</span><span class="sxs-lookup"><span data-stu-id="8451a-102">Deploying a Custom Assembly</span></span>
  <span data-ttu-id="8451a-103">Para implantar um assembly personalizado no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , coloque o assembly nas pastas de aplicativo de Report Designer e o servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="8451a-103">To deploy a custom assembly in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], place the assembly in the application folders of both Report Designer and the report server.</span></span> <span data-ttu-id="8451a-104">Por padrão, os assemblies personalizados recebem a permissão `Execution` no [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8451a-104">By default, custom assemblies are granted `Execution` permission in [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="8451a-105">Para conceder privilégios aos assemblies personalizados além da permissão Executar, você precisará editar o arquivo de configuração rssrvpolicy.config do servidor de relatório e o arquivo de configuração rspreviewpolicy.config da janela de visualização do Designer de Relatórios.</span><span class="sxs-lookup"><span data-stu-id="8451a-105">To grant custom assemblies privileges beyond Execute permission, you will need to edit the rssrvpolicy.config configuration file for the report server and the rspreviewpolicy.config configuration file for the Report Designer preview window.</span></span> <span data-ttu-id="8451a-106">Como alternativa, você poderá instalar o seu assembly no GAC (cache de assembly global).</span><span class="sxs-lookup"><span data-stu-id="8451a-106">Alternatively, you can install your custom assembly in the global assembly cache (GAC).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8451a-107">Existem dois modos de visualização para o Designer de Relatórios: a guia Visualizar e a janela pop-up que é iniciada quando o projeto de relatório é inicializado no modo `DebugLocal`.</span><span class="sxs-lookup"><span data-stu-id="8451a-107">There are two preview modes for Report Designer: the Preview tab and the pop-up preview window that is launched when your report project is started in `DebugLocal` mode.</span></span> <span data-ttu-id="8451a-108">A guia Visualizar executa todas as expressões de relatório usando o conjunto de permissões `FullTrust` e não aplica configurações de política de segurança.</span><span class="sxs-lookup"><span data-stu-id="8451a-108">The Preview tab executes all report expressions using the `FullTrust` permission set and does not apply security policy settings.</span></span> <span data-ttu-id="8451a-109">A janela pop-up de visualização foi desenvolvida para simular a funcionalidade do servidor de relatório e, portanto, tem um arquivo de configuração de política que você ou um administrador devem modificar para usar assemblies e extensões personalizadas no Designer de Relatórios.</span><span class="sxs-lookup"><span data-stu-id="8451a-109">The pop-up preview window is meant to simulate the report server functionality and therefore has a policy configuration file that you or an administrator must modify to use custom assemblies in Report Designer.</span></span> <span data-ttu-id="8451a-110">Essa visualização pop-up também bloqueia o assembly personalizado.</span><span class="sxs-lookup"><span data-stu-id="8451a-110">This pop-up preview also locks the custom assembly.</span></span> <span data-ttu-id="8451a-111">Dessa forma, será preciso fechar a janela de visualização para modificar ou atualizar o seu código de assembly personalizado.</span><span class="sxs-lookup"><span data-stu-id="8451a-111">Therefore, you need to close the preview window in order to modify or update your custom assembly code.</span></span>  
  
###### <a name="to-deploy-a-custom-assembly-in-reporting-services"></a><span data-ttu-id="8451a-112">Para implantar um assembly personalizado no Reporting Services</span><span class="sxs-lookup"><span data-stu-id="8451a-112">To deploy a custom assembly in Reporting Services</span></span>  
  
1.  <span data-ttu-id="8451a-113">Copie o assembly personalizado do local de compilação para a pasta bin do servidor de relatório ou para a pasta do Designer de Relatórios.</span><span class="sxs-lookup"><span data-stu-id="8451a-113">Copy your custom assembly from your build location to the report server bin folder or the Report Designer folder.</span></span> <span data-ttu-id="8451a-114">O local padrão da pasta bin do servidor de relatório é :%Arquivos de Programas%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span><span class="sxs-lookup"><span data-stu-id="8451a-114">The default location of the bin folder for the report server is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span></span> <span data-ttu-id="8451a-115">O local padrão do Designer de Relatórios é %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="8451a-115">The default location of the Report Designer is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
     <span data-ttu-id="8451a-116">Colocar o assembly personalizado na pasta bin do servidor de relatório permite publicar relatórios que referenciam o assembly personalizado; e colocá-lo na pasta do Designer de Relatórios permite executar e depurar relatórios que referenciam o assembly personalizado no Designer de Relatórios.</span><span class="sxs-lookup"><span data-stu-id="8451a-116">Placing your custom assembly in the report server bin folder enables you to publish reports that reference your custom assembly, and placing it in the Report Designer folder enables you to run and debug reports that reference your custom assembly in Report Designer.</span></span>  
  
     <span data-ttu-id="8451a-117">Se você precisar conceder permissões ao seu código de assembly personalizado além das permissões padrão de execução:</span><span class="sxs-lookup"><span data-stu-id="8451a-117">If you need to grant your custom assembly code permissions beyond the default execute permissions:</span></span>  
  
2.  <span data-ttu-id="8451a-118">Abra o arquivo de configuração apropriado.</span><span class="sxs-lookup"><span data-stu-id="8451a-118">Open the appropriate configuration file.</span></span> <span data-ttu-id="8451a-119">O local padrão do arquivo rssrvpolicy.config é %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span><span class="sxs-lookup"><span data-stu-id="8451a-119">The default location of rssrvpolicy.config is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span></span> <span data-ttu-id="8451a-120">O local padrão do arquivo rspreviewpolicy.config é %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="8451a-120">The default location of rspreviewpolicy.config is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
3.  <span data-ttu-id="8451a-121">Adicione um grupo de códigos ao assembly personalizado.</span><span class="sxs-lookup"><span data-stu-id="8451a-121">Add a code group for your custom assembly.</span></span> <span data-ttu-id="8451a-122">Para obter mais informações, consulte [Desenvolvimento seguro &#40;Reporting Services&#41;](../extensions/secure-development/secure-development-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="8451a-122">For more information, see [Secure Development &#40;Reporting Services&#41;](../extensions/secure-development/secure-development-reporting-services.md).</span></span>  
  
## <a name="updating-custom-assemblies"></a><span data-ttu-id="8451a-123">Atualizando assemblies personalizados</span><span class="sxs-lookup"><span data-stu-id="8451a-123">Updating Custom Assemblies</span></span>  
 <span data-ttu-id="8451a-124">Em algum ponto, você pode precisar atualizar uma versão de um assembly personalizado que está sendo referenciado em vários relatórios publicados.</span><span class="sxs-lookup"><span data-stu-id="8451a-124">At some point, you may need to update a version of a custom assembly that is currently being referenced by several published reports.</span></span> <span data-ttu-id="8451a-125">Se esse assembly já existir no diretório bin do servidor de relatório ou do Designer de Relatórios e se o número da versão do assembly for incrementado ou alterado de alguma forma, os relatórios publicados atualmente não funcionarão mais.</span><span class="sxs-lookup"><span data-stu-id="8451a-125">If that assembly already exists in the bin directory of the report server or Report Designer and the version number of the assembly is incremented or changed in some way, the currently published reports will no longer work properly.</span></span> <span data-ttu-id="8451a-126">Você terá de atualizar a versão do assembly referenciado no elemento `CodeModules` da definição do relatório e republicar os relatórios.</span><span class="sxs-lookup"><span data-stu-id="8451a-126">You will need to update the version of the assembly that is referenced in the `CodeModules` element of the report definition and republish the reports.</span></span> <span data-ttu-id="8451a-127">Se você souber que irá atualizar um assembly personalizado com frequência e se os seus relatórios publicados atualmente precisarem de uma referência para o novo assembly, talvez queira considerar o uso do mesmo número de versão em todas as atualizações de uma assembly em particular.</span><span class="sxs-lookup"><span data-stu-id="8451a-127">If you know that you will frequently update a custom assembly and your currently published reports need to reference the new assembly, you may want to consider using the same version number across all updates of a particular assembly.</span></span>  
  
 <span data-ttu-id="8451a-128">Se você não precisar que os seus relatórios publicados atualmente façam referência à nova versão do assembly, poder implantar o seu assembly personalizado no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="8451a-128">If you do not need your currently published reports to reference the new version of the assembly, you can deploy your custom assembly to the global assembly cache.</span></span> <span data-ttu-id="8451a-129">O cache de assembly global pode manter diversas versões do mesmo assembly, para que os seus relatórios atuais possam fazer referência à versão anterior do seu assembly e para que os seus relatórios recém-publicados possam fazer referência ao assembly atualizado.</span><span class="sxs-lookup"><span data-stu-id="8451a-129">The global assembly cache can maintain multiple versions of the same assembly, so that your current reports can reference the previous version of your assembly and your newly published reports can reference the updated assembly.</span></span> <span data-ttu-id="8451a-130">Outra abordagem seria definir o redirecionamento de associação do servidor de relatório para impor um redirecionamento de todas as solicitações para o assembly antigo para o novo.</span><span class="sxs-lookup"><span data-stu-id="8451a-130">Yet another approach would be to set the binding redirect of the report server to force a redirect of all requests for the old assembly to the new assembly.</span></span> <span data-ttu-id="8451a-131">Você precisaria modificar os arquivos Web.config arquivo e ReportService.exe.config do servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="8451a-131">You would need to modify the report server Web.config file and the report server ReportService.exe.config file.</span></span> <span data-ttu-id="8451a-132">A entrada poderia ser assim:</span><span class="sxs-lookup"><span data-stu-id="8451a-132">The entry might look like the following:</span></span>  
  
```  
<configuration>  
   <runtime>  
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
         <dependentAssembly>  
            <assemblyIdentity name="myAssembly"  
                              publicKeyToken="32ab4ba45e0a69a1"  
                              culture="neutral" />  
            <bindingRedirect oldVersion="1.0.0.0"  
                             newVersion="2.0.0.0"/>  
         </dependentAssembly>  
      </assemblyBinding>  
   </runtime>  
</configuration>  
```  
  
## <a name="see-also"></a><span data-ttu-id="8451a-133">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8451a-133">See Also</span></span>  
 <span data-ttu-id="8451a-134">[Usando assemblies personalizados com relatórios](using-custom-assemblies-with-reports.md) </span><span class="sxs-lookup"><span data-stu-id="8451a-134">[Using Custom Assemblies with Reports](using-custom-assemblies-with-reports.md) </span></span>  
 [<span data-ttu-id="8451a-135">Trabalhando com assemblies e o cache de assemblies global</span><span class="sxs-lookup"><span data-stu-id="8451a-135">Working with Assemblies and the Global Assembly Cache</span></span>](https://go.microsoft.com/fwlink/?LinkId=63912)  
  
  
