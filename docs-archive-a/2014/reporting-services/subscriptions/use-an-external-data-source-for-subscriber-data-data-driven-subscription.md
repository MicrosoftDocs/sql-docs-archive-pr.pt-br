---
title: Usar uma fonte de dados externa para obter dados do assinante (assinatura controlada por dados) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- subscriber data sources [Reporting Services]
- subscriptions [Reporting Services], external data sources
- query-based subscriptions [Reporting Services]
- external data sources [Reporting Services]
- data-driven subscriptions
- data sources [Reporting Services], subscriptions
ms.assetid: 1cade8ec-729c-4df8-a428-e75c9ad86369
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e23da709289ffb6ca345bb6211f40388877a1a87
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684448"
---
# <a name="use-an-external-data-source-for-subscriber-data-data-driven-subscription"></a><span data-ttu-id="b3ce0-102">Usar uma fonte de dados externa para obter dados de assinante (assinatura controlada por dados)</span><span class="sxs-lookup"><span data-stu-id="b3ce0-102">Use an External Data Source for Subscriber Data (Data-Driven Subscription)</span></span>
  <span data-ttu-id="b3ce0-103">Em uma assinatura controlada por dados, os dados de assinatura dinâmicos são fornecidos por uma consulta ou um comando que recupera dados de uma fonte de dados externa.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-103">In a data-driven subscription, dynamic subscription data is provided by a query or command that retrieves data from an external data source.</span></span> <span data-ttu-id="b3ce0-104">Os dados de assinatura podem ser recuperados de qualquer fonte de dados com suporte que satisfaça os requisitos para o processamento de assinaturas controladas por dados.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-104">Subscription data can be retrieved from any supported data source that meets the requirements for data-driven subscription processing.</span></span> <span data-ttu-id="b3ce0-105">A sintaxe da consulta ou do comando deve ser válida para uma extensão de processamento de dados instalada com seu servidor de relatório.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-105">The query or command syntax must be valid for a data processing extension installed with your report server.</span></span>  
  
## <a name="data-processing-requirements"></a><span data-ttu-id="b3ce0-106">Requisitos de processamento de dados</span><span class="sxs-lookup"><span data-stu-id="b3ce0-106">Data Processing Requirements</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="b3ce0-107">usa extensões de processamento de dados para recuperar dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-107">uses data processing extensions to retrieve subscription data.</span></span> <span data-ttu-id="b3ce0-108">Os tipos de fonte de dados recomendados incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b3ce0-108">Recommended data source types include the following:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="b3ce0-109">bancos de dados relacionais</span><span class="sxs-lookup"><span data-stu-id="b3ce0-109">relational databases</span></span>  
  
-   <span data-ttu-id="b3ce0-110">Bancos de dados Oracle</span><span class="sxs-lookup"><span data-stu-id="b3ce0-110">Oracle databases</span></span>  
  
-   [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="b3ce0-111">fontes de dados multidimensionais e de mineração de dados</span><span class="sxs-lookup"><span data-stu-id="b3ce0-111">multidimensional and data mining data sources</span></span>  
  
-   <span data-ttu-id="b3ce0-112">Fontes de dados XML</span><span class="sxs-lookup"><span data-stu-id="b3ce0-112">XML data sources</span></span>  
  
     <span data-ttu-id="b3ce0-113">Ao usar a extensão de processamento de dados XML para os dados de assinante, aumente as configurações de tempo limite de consulta na assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-113">When using the XML data processing extension for subscriber data, be sure to increase the query timeout settings in the subscription.</span></span> <span data-ttu-id="b3ce0-114">A extensão de processamento de dados XML usa milissegundos em vez de segundos para os valores de tempo limite de consulta.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-114">The XML data processing extension uses milliseconds rather than seconds for query timeout values.</span></span> <span data-ttu-id="b3ce0-115">Se você não aumentar o valor de tempo limite, a assinatura poderá falhar devido a um tempo de processamento insuficiente.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-115">If you do not increase the timeout value, the subscription might fail due to insufficient processing time.</span></span>  
  
     <span data-ttu-id="b3ce0-116">Evite usar a opção **Não são necessárias credenciais** ao configurar a conexão com a fonte de dados de assinante.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-116">Avoid using the **Credentials are not required** option when configuring the connection to the subscriber data source.</span></span> <span data-ttu-id="b3ce0-117">As credenciais armazenadas são recomendadas ao usar a extensão de processamento de dados XML para recuperar dados de assinatura em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-117">Stored credentials are recommended when using the XML data processing extension to retrieve subscription data at run time.</span></span>  
  
 <span data-ttu-id="b3ce0-118">Outros tipos de fontes de dados com suporte podem ser usados, embora não haja garantia de que funcionem.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-118">You might be able to use other supported data source types, but not all of them are guaranteed to work.</span></span> <span data-ttu-id="b3ce0-119">Por exemplo, os tipos de fonte de dados a seguir não podem ser usados para obter dados de assinante:</span><span class="sxs-lookup"><span data-stu-id="b3ce0-119">For example, the following data source types cannot be used for subscriber data:</span></span>  
  
-   <span data-ttu-id="b3ce0-120">Bancos de dados SAP Netweaver BI</span><span class="sxs-lookup"><span data-stu-id="b3ce0-120">SAP Netweaver BI databases</span></span>  
  
-   <span data-ttu-id="b3ce0-121">modelos de relatório</span><span class="sxs-lookup"><span data-stu-id="b3ce0-121">report models</span></span>  
  
 <span data-ttu-id="b3ce0-122">Se você tiver uma extensão de processamento de dados personalizada que deseja usar nas assinaturas controladas por dados, implemente as interfaces <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> e <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> .</span><span class="sxs-lookup"><span data-stu-id="b3ce0-122">If you have a custom data processing extension that you want to use in data-driven subscriptions, it must implement the <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> and the <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> interfaces.</span></span> <span data-ttu-id="b3ce0-123">A extensão de processamento de dados deve oferecer suporte para execuções de consulta somente de esquema.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-123">The data processing extension must support a schema-only query execution.</span></span> <span data-ttu-id="b3ce0-124">Essa consulta é usada para recuperar metadados de coluna em tempo de design, para que os usuários possam mapear colunas para opções de entrega e parâmetros de relatório na definição de assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-124">This query is used to retrieve column metadata at design-time so that users can map columns to delivery options and report parameters in the subscription definition.</span></span> <span data-ttu-id="b3ce0-125">A execução de consulta somente de esquema ocorre em uma fase inicial, quando o usuário está definindo a assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-125">Schema-only query execution occurs at an early stage when the user is defining the subscription.</span></span>  
  
## <a name="query-requirements"></a><span data-ttu-id="b3ce0-126">Requisitos de consulta</span><span class="sxs-lookup"><span data-stu-id="b3ce0-126">Query Requirements</span></span>  
 <span data-ttu-id="b3ce0-127">Ao criar uma consulta que recupera dados de assinatura, considere o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b3ce0-127">When creating query that retrieves subscription data, keep the following points in mind:</span></span>  
  
-   <span data-ttu-id="b3ce0-128">Você pode criar só uma consulta para a assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-128">You can only create one query for the subscription.</span></span>  
  
-   <span data-ttu-id="b3ce0-129">A consulta deve retornar todos os valores que você deseja usar para opções de entrega e para especificar parâmetros de relatório.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-129">The query must return all of the values that you want to use for delivery options and for specifying report parameters.</span></span>  
  
-   <span data-ttu-id="b3ce0-130">O servidor de relatório criará uma entrega de relatório para cada linha do conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-130">The report server will create a report delivery for every row in the result set.</span></span> <span data-ttu-id="b3ce0-131">Se o conjunto de resultados for composto por trezentas linhas, o servidor de relatório tentará enviar trezentos relatórios.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-131">If the result set consists of three hundred rows, the report server will attempt to deliver three hundred reports.</span></span>  
  
## <a name="setting-delivery-options-using-variable-data-from-a-subscriber-database"></a><span data-ttu-id="b3ce0-132">Definindo opções de entrega com dados variáveis de um banco de dados de assinantes</span><span class="sxs-lookup"><span data-stu-id="b3ce0-132">Setting Delivery Options Using Variable Data from a Subscriber Database</span></span>  
 <span data-ttu-id="b3ce0-133">Você pode usar dados no banco de dados de assinantes para personalizar opções de entrega para cada destinatário.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-133">You can use data in the subscriber database to customize delivery options for each recipient.</span></span> <span data-ttu-id="b3ce0-134">O tipo de extensão de entrega usado determina quais opções estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-134">The kind of delivery extension you are using determines which options are available.</span></span> <span data-ttu-id="b3ce0-135">Se você estiver usando a extensão de entrega de emails do servidor de relatórios, a consulta deve conter um alias de email para cada assinante.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-135">If you are using the report server e-mail delivery extension, the query should contain an e-mail alias for each subscriber.</span></span> <span data-ttu-id="b3ce0-136">Se a entrega de compartilhamento de arquivos estiver sendo usada, os dados do assinante devem incluir valores que podem ser usados para criar arquivos de relatório específicos do assinante ou para fornecer um destino para a entrega.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-136">If you are using file share delivery, the subscriber data should include values that can be used to create subscriber-specific report files or to provide a destination for the delivery.</span></span> <span data-ttu-id="b3ce0-137">Para obter mais informações, consulte [entrega de compartilhamento de arquivos em Reporting Services](file-share-delivery-in-reporting-services.md) e [entrega de email em Reporting Services](e-mail-delivery-in-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="b3ce0-137">For more information, see [File Share Delivery in Reporting Services](file-share-delivery-in-reporting-services.md) and [E-Mail Delivery in Reporting Services](e-mail-delivery-in-reporting-services.md).</span></span>  
  
## <a name="passing-parameter-values-from-the-subscriber-database-to-the-report"></a><span data-ttu-id="b3ce0-138">Transmitindo valores de parâmetro do banco de dados de assinantes para o relatório</span><span class="sxs-lookup"><span data-stu-id="b3ce0-138">Passing Parameter Values from the Subscriber Database to the Report</span></span>  
 <span data-ttu-id="b3ce0-139">Se estiver criando uma assinatura controlada por dados para um relatório parametrizado, use valores de parâmetro variáveis para personalizar a saída de cada relatório.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-139">If you are creating a data-driven subscription for a parameterized report, you can use variable parameter values to customize the output of each report.</span></span> <span data-ttu-id="b3ce0-140">Por exemplo, o banco de dados de assinantes pode conter números de identificação de funcionários, datas de contratação, cargos e informações sobre a localização de escritórios que podem ser usados para filtrar dados de relatório.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-140">For example, the subscriber database might contain employee identification numbers, hire dates, job titles, and office location information that can be used to filter report data.</span></span> <span data-ttu-id="b3ce0-141">Se o relatório aceitar os parâmetros baseados nesses dados ou em outros dados de coluna disponíveis, você pode mapear o parâmetro para a coluna adequada.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-141">If the report accepts parameters that are based on these or other available column data, you can map the parameter to the appropriate column.</span></span>  
  
 <span data-ttu-id="b3ce0-142">Ao mapear campos de assinante para parâmetros de relatório, verifique se os tipos de dados e os comprimentos de coluna são compatíveis.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-142">When mapping subscriber fields to report parameters, make sure that the data types and column lengths are compatible.</span></span> <span data-ttu-id="b3ce0-143">Se houver uma desigualdade de tipo de dados, um erro ocorrerá durante o processamento da assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-143">If there is a data type mismatch, an error will occur during subscription processing.</span></span> <span data-ttu-id="b3ce0-144">Para saber mais sobre como usar dados do assinante em um relatório com parâmetros, consulte [Criar uma assinatura controlada por dados &#40;Tutorial do SSRS&#41;](../create-a-data-driven-subscription-ssrs-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="b3ce0-144">To learn more about using subscriber data in a parameterized report, see [Create a Data-Driven Subscription &#40;SSRS Tutorial&#41;](../create-a-data-driven-subscription-ssrs-tutorial.md).</span></span>  
  
## <a name="modifying-the-subscriber-data-source"></a><span data-ttu-id="b3ce0-145">Modificando a fonte de dados de assinante</span><span class="sxs-lookup"><span data-stu-id="b3ce0-145">Modifying the Subscriber Data Source</span></span>  
 <span data-ttu-id="b3ce0-146">As modificações a seguir feitas na fonte de dados de assinante podem impedir a execução da assinatura:</span><span class="sxs-lookup"><span data-stu-id="b3ce0-146">The following modifications to the subscriber data source can prevent the subscription from running:</span></span>  
  
-   <span data-ttu-id="b3ce0-147">Remoção de colunas mencionadas na assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-147">Removing columns that are referenced in the subscription.</span></span>  
  
-   <span data-ttu-id="b3ce0-148">Modificação da estrutura de tabela da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-148">Modifying the table structure of the data source.</span></span>  
  
-   <span data-ttu-id="b3ce0-149">Alteração do tipo de dados e de outras propriedades de coluna.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-149">Changing data type and other column properties.</span></span>  
  
 <span data-ttu-id="b3ce0-150">Se fizer alguma dessas alterações, você deverá atualizar a assinatura.</span><span class="sxs-lookup"><span data-stu-id="b3ce0-150">If you make any of these changes, you must update the subscription.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b3ce0-151">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="b3ce0-151">See Also</span></span>  
 <span data-ttu-id="b3ce0-152">[Criar, modificar e excluir uma assinatura controlada por dados](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="b3ce0-152">[Create, Modify, and Delete a Data-Driven Subscription](data-driven-subscriptions.md) </span></span>  
 <span data-ttu-id="b3ce0-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="b3ce0-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span></span>  
 [<span data-ttu-id="b3ce0-154">Assinaturas e entrega &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="b3ce0-154">Subscriptions and Delivery &#40;Reporting Services&#41;</span></span>](subscriptions-and-delivery-reporting-services.md)  
  
  
