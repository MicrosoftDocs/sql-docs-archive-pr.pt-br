---
title: Relações de dimensão | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- relationships [Analysis Services]
- member groups [Analysis Services]
- regular dimensions [Analysis Services]
- many-to-many relationships [Analysis Services]
- cubes [Analysis Services], relationships
- reference dimensions
- dimensions [Analysis Services], relationships
- fact dimensions [Analysis Services]
- relationships [Analysis Services], dimensions
ms.assetid: de54c059-cb0f-4f66-bd70-8605af05ec4f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2334c1a97bb4172fff70550dbece5376eb1cb9d7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684411"
---
# <a name="dimension-relationships"></a><span data-ttu-id="751c8-102">Relações de dimensão</span><span class="sxs-lookup"><span data-stu-id="751c8-102">Dimension Relationships</span></span>
  <span data-ttu-id="751c8-103">O uso de dimensões define as relações entre uma dimensão de cubo e os grupos de medidas em um cubo.</span><span class="sxs-lookup"><span data-stu-id="751c8-103">Dimension usage defines the relationships between a cube dimension and the measure groups in a cube.</span></span> <span data-ttu-id="751c8-104">Uma dimensão de cubo é uma instância de uma dimensão de banco de dados usada em um cubo específico.</span><span class="sxs-lookup"><span data-stu-id="751c8-104">A cube dimension is an instance of a database dimension that is used in a specific cube.</span></span> <span data-ttu-id="751c8-105">Um cubo pode ter, e frequentemente tem, dimensões de cubo que não estão diretamente relacionadas ao grupo de medidas, mas que podem estar indiretamente relacionadas ao grupo de medidas por meio de outra dimensão ou grupo de medidas.</span><span class="sxs-lookup"><span data-stu-id="751c8-105">A cube can, and frequently does, have cube dimensions that are not directly related to a measure group, but which might be indirectly related to the measure group through another dimension or measure group.</span></span> <span data-ttu-id="751c8-106">Quando você adiciona uma dimensão de banco de dados ou grupo de medidas a um cubo, o [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] tenta determinar o uso da dimensão examinando as relações entre as tabelas de dimensões e as tabelas de fatos na exibição da fonte de dados do cubo e examinando as relações entre atributos em dimensões.</span><span class="sxs-lookup"><span data-stu-id="751c8-106">When you add a database dimension or measure group to a cube, [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] tries to determine dimension usage by examining relationships between the dimension tables and fact tables in the cube's data source view, and by examining the relationships between attributes in dimensions.</span></span> <span data-ttu-id="751c8-107">O [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] define as configurações de uso de dimensão automaticamente para as relações que pode detectar.</span><span class="sxs-lookup"><span data-stu-id="751c8-107">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] automatically sets the dimension usage settings for the relationships that it can detect.</span></span>  
  
 <span data-ttu-id="751c8-108">Uma relação entre uma dimensão e um grupo de medidas consiste na dimensão e tabelas de fatos participantes da relação e um atributo de granularidade que especifica a granularidade da dimensão em um determinado grupo de medidas.</span><span class="sxs-lookup"><span data-stu-id="751c8-108">A relationship between a dimension and a measure group consists of the dimension and fact tables participating in the relationship and a granularity attribute that specifies the granularity of the dimension in the particular measure group.</span></span>  
  
## <a name="regular-dimension-relationships"></a><span data-ttu-id="751c8-109">Relações regulares de dimensão </span><span class="sxs-lookup"><span data-stu-id="751c8-109">Regular Dimension Relationships</span></span>  
 <span data-ttu-id="751c8-110">Uma relação regular de dimensão entre uma dimensão de cubo e um grupo de medidas existe quando a coluna de chave da dimensão está associada diretamente à tabela de fatos.</span><span class="sxs-lookup"><span data-stu-id="751c8-110">A regular dimension relationship between a cube dimension and a measure group exists when the key column for the dimension is joined directly to the fact table.</span></span> <span data-ttu-id="751c8-111">Essa relação direta se baseia em uma relação chave primária-chave estrangeira no banco de dados relacional subjacente, mas também pode ser baseada em uma relação lógica que é definida na exibição da fonte de dado.</span><span class="sxs-lookup"><span data-stu-id="751c8-111">This direct relationship is based on a primary key-foreign key relationship in the underlying relational database, but might also be based on a logical relationship that is defined in the data source view.</span></span> <span data-ttu-id="751c8-112">Uma relação de dimensão regular representa a relação entre tabelas de dimensão e uma tabela de fatos em um projeto de esquema em estrela tradicional.</span><span class="sxs-lookup"><span data-stu-id="751c8-112">A regular dimension relationship represents the relationship between dimension tables and a fact table in a traditional star schema design.</span></span> <span data-ttu-id="751c8-113">Para obter mais informações sobre relações regulares, consulte [definir uma relação regular e propriedades de relação regular](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="751c8-113">For more information about regular relationships, see [Define a Regular Relationship and Regular Relationship Properties](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).</span></span>  
  
## <a name="reference-dimension-relationships"></a><span data-ttu-id="751c8-114">Relações de dimensão de referência</span><span class="sxs-lookup"><span data-stu-id="751c8-114">Reference Dimension Relationships</span></span>  
 <span data-ttu-id="751c8-115">Uma relação de dimensão de referência entre uma dimensão de cubo e um grupo de medidas existe quando a coluna de chave da dimensão está associada indiretamente à tabela de fatos por meio de uma chave em outras tabelas de dimensões, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="751c8-115">A reference dimension relationship between a cube dimension and a measure group exists when the key column for the dimension is joined indirectly to the fact table through a key in another dimension table, as shown in the following illustration.</span></span>  
  
 <span data-ttu-id="751c8-116">![Relação da dimensão referenciada de diagrama lógico](../../analysis-services/dev-guide/media/as-refdimension1.gif "Relação da dimensão referenciada de diagrama lógico")</span><span class="sxs-lookup"><span data-stu-id="751c8-116">![Logical diagram, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdimension1.gif "Logical diagram, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="751c8-117">Uma relação de dimensão de referência representa a relação entre tabelas de dimensão e uma tabela de fatos em um projeto de esquema de floco de neve.</span><span class="sxs-lookup"><span data-stu-id="751c8-117">A reference dimension relationship represents the relationship between dimension tables and a fact table in a snowflake schema design.</span></span> <span data-ttu-id="751c8-118">Quando tabelas de dimensões estão conectadas em um esquema de floco de neve, você pode definir uma única dimensão usando colunas de várias tabelas ou pode definir dimensões separadas com base em tabelas de dimensões separadas e, então, definir um link entre elas usando a configuração de relação de dimensão de referência.</span><span class="sxs-lookup"><span data-stu-id="751c8-118">When dimension tables are connected in a snowflake schema, you can define a single dimension using columns from multiple tables, or you can define separate dimensions based on the separate dimension tables and then define a link between them using the reference dimension relationship setting.</span></span> <span data-ttu-id="751c8-119">A figura a seguir mostra uma tabela de fatos denominada **InternetSales**e duas tabelas de dimensão chamadas **Customer** e **geography**, em um esquema floco de neve.</span><span class="sxs-lookup"><span data-stu-id="751c8-119">The following figure shows one fact table named **InternetSales**, and two dimension tables called **Customer** and **Geography**, in a snowflake schema.</span></span>  
  
 <span data-ttu-id="751c8-120">![Relação da dimensão referenciada de esquema lógico](../../analysis-services/dev-guide/media/as-refdim-schema1.gif "Relação da dimensão referenciada de esquema lógico")</span><span class="sxs-lookup"><span data-stu-id="751c8-120">![Logical schema, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdim-schema1.gif "Logical schema, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="751c8-121">Você pode criar uma dimensão com a tabela **Customer** como a tabela principal de dimensão e a tabela **geography** incluída como uma tabela relacionada.</span><span class="sxs-lookup"><span data-stu-id="751c8-121">You can create a dimension with the **Customer** table as the dimension main table and the **Geography** table included as a related table.</span></span> <span data-ttu-id="751c8-122">Uma relação regular é, então, definida entre a dimensão e o grupo de medidas VendasInternet.</span><span class="sxs-lookup"><span data-stu-id="751c8-122">A regular relationship is then defined between the dimension and the InternetSales measure group.</span></span>  
  
 <span data-ttu-id="751c8-123">Como alternativa, você pode criar duas dimensões relacionadas ao grupo de medidas InternetSales: uma dimensão baseada na tabela **Customer** e uma dimensão baseada na tabela **geography** .</span><span class="sxs-lookup"><span data-stu-id="751c8-123">Alternatively, you can create two dimensions related to the InternetSales measure group: a dimension based on the **Customer** table, and a dimension based on the **Geography** table.</span></span> <span data-ttu-id="751c8-124">Você pode então relacionar a dimensão Geografia com o grupo de medidas VendasInternet, usando uma relação de dimensão de referência usando a dimensão Cliente.</span><span class="sxs-lookup"><span data-stu-id="751c8-124">You can then relate the Geography dimension to the InternetSales measure group using a reference dimension relationship using the Customer dimension.</span></span> <span data-ttu-id="751c8-125">Nesse caso, quando os fatos no grupo de medidas VendasInternet forem dimensionados pela dimensão Geografia, os fatos serão dimensionados por cliente e por geografia.</span><span class="sxs-lookup"><span data-stu-id="751c8-125">In this case, when the facts in the InternetSales measure group are dimensioned by the Geography dimension, the facts are dimensioned by customer and by geography.</span></span> <span data-ttu-id="751c8-126">Se o cubo contiver um segundo grupo de medidas chamado Vendas do Revendedor, você não poderá dimensionar os fatos no grupo de medidas Vendas do Revendedor por Geografia, pois não há relação entre Vendas do Revendedor e Geografia.</span><span class="sxs-lookup"><span data-stu-id="751c8-126">If the cube contained a second measure group named Reseller Sales, you would be unable to dimension the facts in the Reseller Sales measure group by Geography because no relationship would exist between Reseller Sales and Geography.</span></span>  
  
 <span data-ttu-id="751c8-127">Não há limite para o número de dimensões de referência que podem ser conectadas juntas, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="751c8-127">There is no limit to the number of reference dimensions that can be chained together, as shown in the following illustration.</span></span>  
  
 <span data-ttu-id="751c8-128">![Relação da dimensão referenciada de diagrama lógico](../../analysis-services/dev-guide/media/as-refdimension2.gif "Relação da dimensão referenciada de diagrama lógico")</span><span class="sxs-lookup"><span data-stu-id="751c8-128">![Logical diagram, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdimension2.gif "Logical diagram, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="751c8-129">Para obter mais informações sobre relações referenciadas, consulte [definir uma relação referenciada e propriedades de relação referenciadas](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="751c8-129">For more information about referenced relationships, see [Define a Referenced Relationship and Referenced Relationship Properties](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).</span></span>  
  
## <a name="fact-dimension-relationships"></a><span data-ttu-id="751c8-130">Relações de dimensão de fato</span><span class="sxs-lookup"><span data-stu-id="751c8-130">Fact Dimension Relationships</span></span>  
 <span data-ttu-id="751c8-131">Dimensões de fato, frequentemente referenciadas como dimensões de degeneração, são dimensões padrão criadas a partir de colunas de atributo em tabelas de fatos, em vez serem criadas pelas colunas de atributo em tabelas de dimensões.</span><span class="sxs-lookup"><span data-stu-id="751c8-131">Fact dimensions, frequently referred to as degenerate dimensions, are standard dimensions that are constructed from attribute columns in fact tables instead of from attribute columns in dimension tables.</span></span> <span data-ttu-id="751c8-132">Às vezes são armazenados dados dimensionais úteis em uma tabela de fatos para reduzir duplicação.</span><span class="sxs-lookup"><span data-stu-id="751c8-132">Useful dimensional data is sometimes stored in a fact table to reduce duplication.</span></span> <span data-ttu-id="751c8-133">Por exemplo, o diagrama a seguir exibe a tabela de fatos **FactResellerSales** do [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] banco de dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="751c8-133">For example, the following diagram displays the **FactResellerSales** fact table, from the [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] sample database.</span></span>  
  
 <span data-ttu-id="751c8-134">![As colunas da tabela de fatos fornecem suporte às dimensões](../../analysis-services/dev-guide/media/as-factdim.gif "As colunas da tabela de fatos fornecem suporte às dimensões")</span><span class="sxs-lookup"><span data-stu-id="751c8-134">![Columns in fact table can support dimensions](../../analysis-services/dev-guide/media/as-factdim.gif "Columns in fact table can support dimensions")</span></span>  
  
 <span data-ttu-id="751c8-135">A tabela contém informações de atributo não apenas para cada linha de um pedido emitido por um revendedor, mas o próprio pedido.</span><span class="sxs-lookup"><span data-stu-id="751c8-135">The table contains attribute information not only for each line of an order issued by a reseller, but about the order itself.</span></span> <span data-ttu-id="751c8-136">Os atributos circulados no diagrama anterior identificam as informações na tabela **FactResellerSales** que podem ser usados como atributos em uma dimensão.</span><span class="sxs-lookup"><span data-stu-id="751c8-136">The attributes circled in the previous diagram identify the information in the **FactResellerSales** table that could be used as attributes in a dimension.</span></span> <span data-ttu-id="751c8-137">Nesse caso, duas informações adicionais, o número de rastreamento da transportadora e o número da ordem de compra emitido pelo revendedor, conforme representado pelas colunas de atributo CarrierTrackingNumber e CustomerPONumber.</span><span class="sxs-lookup"><span data-stu-id="751c8-137">In this case, two additional pieces of information, the carrier tracking number and the purchase order number issued by the reseller, are represented by the CarrierTrackingNumber and CustomerPONumber attribute columns.</span></span> <span data-ttu-id="751c8-138">Essas informações são interessantes – por exemplo, os usuários definitivamente se interessariam em ver informações agregadas, como o custo total do produto, para todos os pedidos sendo enviados sob um único número de controle.</span><span class="sxs-lookup"><span data-stu-id="751c8-138">This information is interesting-for example, users would definitely be interested in seeing aggregated information, such as the total product cost, for all the orders being shipped under a single tracking number.</span></span> <span data-ttu-id="751c8-139">Mas, sem dados de dimensão esses dois atributos não podem ser organizados ou ser agregados.</span><span class="sxs-lookup"><span data-stu-id="751c8-139">But, without a dimension data for these two attributes cannot be organized or aggregated.</span></span>  
  
 <span data-ttu-id="751c8-140">Na teoria, você pode criar uma tabela de dimensões que usa as mesmas informações de chave que a tabela FactResellerSales e mover as outras duas colunas de atributo, CarrierTrackingNumber e CustomerPONumber, para essa tabela de dimensões.</span><span class="sxs-lookup"><span data-stu-id="751c8-140">In theory, you could create a dimension table that uses the same key information as the FactResellerSales table and move the other two attribute columns, CarrierTrackingNumber and CustomerPONumber, to that dimension table.</span></span> <span data-ttu-id="751c8-141">Entretanto, você pode estar duplicando uma parte significativa dos dados e adicionando complexidade desnecessária para o data warehouse, para representar apenas dois atributos como uma dimensão separada.</span><span class="sxs-lookup"><span data-stu-id="751c8-141">However, you would be duplicating a significant portion of data and adding unnecessary complexity to the data warehouse to represent just two attributes as a separate dimension.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="751c8-142">As dimensões de fato são, frequentemente, usadas para oferecer suporte a ações de análise.</span><span class="sxs-lookup"><span data-stu-id="751c8-142">Fact dimensions are frequently used to support drillthrough actions.</span></span> <span data-ttu-id="751c8-143">Para obter mais informações sobre ações, consulte [Ações &#40;Analysis Services – Dados Multidimensionais&#41;](../multidimensional-models/actions-analysis-services-multidimensional-data.md).</span><span class="sxs-lookup"><span data-stu-id="751c8-143">For more information about actions, see [Actions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models/actions-analysis-services-multidimensional-data.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="751c8-144">As dimensões de fato devem ser atualizadas incrementalmente após cada atualização do grupo de medidas referenciada pela relação de fato.</span><span class="sxs-lookup"><span data-stu-id="751c8-144">Fact dimensions must be incrementally updated after every update to the measure group that is referenced by the fact relationship.</span></span> <span data-ttu-id="751c8-145">Se a dimensão de fato for uma dimensão ROLAP, o mecanismo de processamento do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] descartará qualquer cache e processará incrementalmente o grupo de medidas.</span><span class="sxs-lookup"><span data-stu-id="751c8-145">If the fact dimension is a ROLAP dimension, the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] processing engine drops any caches and incrementally processes the measure group.</span></span>  
  
 <span data-ttu-id="751c8-146">Para obter mais informações sobre as relações de fatos, consulte [definir uma relação de fatos e as propriedades da relação de fatos](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="751c8-146">For more information about fact relationships, see [Define a Fact Relationship and Fact Relationship Properties](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).</span></span>  
  
## <a name="many-to-many-dimension-relationships"></a><span data-ttu-id="751c8-147">Relações de dimensão muitos para muitos</span><span class="sxs-lookup"><span data-stu-id="751c8-147">Many to Many Dimension Relationships</span></span>  
 <span data-ttu-id="751c8-148">Na maioria das dimensões, cada fato é associado a um e apenas um membro de dimensão e um simples membro de dimensão pode ser associado a vários fatos.</span><span class="sxs-lookup"><span data-stu-id="751c8-148">In most dimensions, each fact joins to one and only one dimension member, and a single dimension member can be associated with multiple facts.</span></span> <span data-ttu-id="751c8-149">Na terminologia de banco de dados relacional, isso é referenciado como uma relação de um para muitos.</span><span class="sxs-lookup"><span data-stu-id="751c8-149">In relational database terminology, this is referred to as a one-to-many relationship.</span></span> <span data-ttu-id="751c8-150">Porém, é frequentemente útil associar um único fato a vários membros de dimensão.</span><span class="sxs-lookup"><span data-stu-id="751c8-150">However, it is frequently useful to join a single fact to multiple dimension members.</span></span> <span data-ttu-id="751c8-151">Por exemplo, um cliente de um banco pode ter várias contas (corrente, poupança, cartão de crédito e investimentos) e uma conta também pode ter titulares conjuntos ou vários titulares.</span><span class="sxs-lookup"><span data-stu-id="751c8-151">For example, a bank customer might have multiple accounts (checking, saving, credit card, and investment accounts), and an account can also have joint or multiple owners.</span></span> <span data-ttu-id="751c8-152">A dimensão Cliente criada a partir dessas relações pode ter então vários membros relacionados a uma única transação de conta.</span><span class="sxs-lookup"><span data-stu-id="751c8-152">The Customer dimension constructed from such relationships would then have multiple members that relate to a single account transaction.</span></span>  
  
 <span data-ttu-id="751c8-153">![Esquema lógico/relacionamento da dimensão muitos para muitos](../../analysis-services/dev-guide/media/as-many-dimension1.gif "Esquema lógico/relacionamento da dimensão muitos para muitos")</span><span class="sxs-lookup"><span data-stu-id="751c8-153">![Logical schema/many-to-many dimension relationship](../../analysis-services/dev-guide/media/as-many-dimension1.gif "Logical schema/many-to-many dimension relationship")</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="751c8-154">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]permite definir uma relação muitos-para-muitos entre uma dimensão e uma tabela de fatos.</span><span class="sxs-lookup"><span data-stu-id="751c8-154">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] lets you define a many-to-many relationship between a dimension and a fact table.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="751c8-155">Para oferecer suporte a uma relação de dimensão muitos para muitos, a exibição da fonte de dados deve ter uma relação de chave estrangeira definida entre todas as tabelas envolvidas, conforme mostrado no diagrama anterior.</span><span class="sxs-lookup"><span data-stu-id="751c8-155">To support a many-to-many dimension relationship, the data source view must have established a foreign key relationship between all the tables involved, as shown in the previous diagram.</span></span> <span data-ttu-id="751c8-156">Caso contrário, não será possível selecionar o grupo de medidas intermediário correto ao estabelecer a relação na guia **uso da dimensão** do designer de dimensão.</span><span class="sxs-lookup"><span data-stu-id="751c8-156">Otherwise, you will be unable to select the correct intermediate measure group when establishing the relationship in the **Dimension Usage** tab of Dimension Designer.</span></span>  
  
 <span data-ttu-id="751c8-157">Para obter mais informações sobre relações muitos para muitos, consulte [definir uma relação muitos-para-muitos e propriedades de relação muitos-para-muitos](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="751c8-157">For more information about many-to-many relationships, see [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="751c8-158">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="751c8-158">See Also</span></span>  
 [<span data-ttu-id="751c8-159">Dimensões &#40;Analysis Services – Dados Multidimensionais&#41;</span><span class="sxs-lookup"><span data-stu-id="751c8-159">Dimensions &#40;Analysis Services - Multidimensional Data&#41;</span></span>](../multidimensional-models-olap-logical-dimension-objects/dimensions-analysis-services-multidimensional-data.md)  
  
  
