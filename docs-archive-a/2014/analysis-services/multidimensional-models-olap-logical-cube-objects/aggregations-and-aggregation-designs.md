---
title: Agregações e designs de agregação | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- aggregations [Analysis Services], about aggregations
- storage [Analysis Services], aggregations
- Storage Design Wizard
- data summary [Analysis Services]
- data storage [Analysis Services]
- storing data [Analysis Services], aggregations
- aggregations [Analysis Services]
ms.assetid: 35bd8589-39fa-4e0b-b28f-5a07d70da0a2
author: minewiskan
ms.author: owend
ms.openlocfilehash: c56e80482ef71e8041f8518ae9901691a1809990
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87680692"
---
# <a name="aggregations-and-aggregation-designs"></a><span data-ttu-id="54d3d-102">Agregações e designs de agregação</span><span class="sxs-lookup"><span data-stu-id="54d3d-102">Aggregations and Aggregation Designs</span></span>
  <span data-ttu-id="54d3d-103">Um objeto <xref:Microsoft.AnalysisServices.AggregationDesign> define um conjunto de definições de agregação que podem ser compartilhadas por várias partições.</span><span class="sxs-lookup"><span data-stu-id="54d3d-103">An <xref:Microsoft.AnalysisServices.AggregationDesign> object defines a set of aggregation definitions that can be shared across multiple partitions.</span></span>  
  
 <span data-ttu-id="54d3d-104">Um objeto <xref:Microsoft.AnalysisServices.Aggregation> representa o resumo de dados de grupo de medidas em determinada granularidade de dimensões.</span><span class="sxs-lookup"><span data-stu-id="54d3d-104">An <xref:Microsoft.AnalysisServices.Aggregation> object represents the summarization of measure group data at certain granularity of the dimensions.</span></span>  
  
 <span data-ttu-id="54d3d-105">Um objeto simples <xref:Microsoft.AnalysisServices.Aggregation> é composto de: informações básicas e dimensões.</span><span class="sxs-lookup"><span data-stu-id="54d3d-105">A simple <xref:Microsoft.AnalysisServices.Aggregation> object is composed of: basic information and dimensions.</span></span> <span data-ttu-id="54d3d-106">As informações básicas incluem o nome da agregação, o ID, as anotações e uma descrição.</span><span class="sxs-lookup"><span data-stu-id="54d3d-106">Basic information includes the name of the aggregation, the ID, annotations, and a description.</span></span> <span data-ttu-id="54d3d-107">As dimensões coleções de objetos <xref:Microsoft.AnalysisServices.AggregationDimension> que contêm a lista de atributos de granularidade para a dimensão.</span><span class="sxs-lookup"><span data-stu-id="54d3d-107">The dimensions are a collection of <xref:Microsoft.AnalysisServices.AggregationDimension> objects that contain the list of granularity attributes for the dimension.</span></span>  
  
 <span data-ttu-id="54d3d-108">As agregações são resumos pré-calculados de dados de células folha.</span><span class="sxs-lookup"><span data-stu-id="54d3d-108">Aggregations are precalculated summaries of data from leaf cells.</span></span> <span data-ttu-id="54d3d-109">As agregações melhoram o tempo de resposta de consulta preparando as respostas antes das perguntas serem feitas.</span><span class="sxs-lookup"><span data-stu-id="54d3d-109">Aggregations improve query response time by preparing the answers before the questions are asked.</span></span> <span data-ttu-id="54d3d-110">Por exemplo, quando uma tabela de fatos de data warehouse contém centenas de milhares de linhas, uma consulta que solicita os totais de vendas semanais de uma determinada linha de produtos, pode demorar um longo tempo para ser respondida se todas as linhas na tabela de fatos tiverem de ser verificadas e somadas na consulta para calcular a resposta.</span><span class="sxs-lookup"><span data-stu-id="54d3d-110">For example, when a data warehouse fact table contains hundreds of thousands of rows, a query requesting the weekly sales totals for a particular product line can take a long time to answer if all the rows in the fact table have to be scanned and summed at query time to compute the answer.</span></span> <span data-ttu-id="54d3d-111">No entanto, a resposta pode ser quase imediata se os dados de resumo para responder essa consulta tiverem sido pré-calculados.</span><span class="sxs-lookup"><span data-stu-id="54d3d-111">However, the response can be almost immediate if the summarization data to answer this query has been precalculated.</span></span> <span data-ttu-id="54d3d-112">Esse pré-cálculo de dados do resumo ocorre durante o processamento e é base dos tempos de resposta rápida da tecnologia OLAP.</span><span class="sxs-lookup"><span data-stu-id="54d3d-112">This precalculation of summary data occurs during processing and is the foundation for the rapid response times of OLAP technology.</span></span>  
  
 <span data-ttu-id="54d3d-113">Os cubos são o modo que a tecnologia OLAP usa para organizar dados resumidos em estruturas multidimensionais.</span><span class="sxs-lookup"><span data-stu-id="54d3d-113">Cubes are the way that OLAP technology organizes summary data into multidimensional structures.</span></span> <span data-ttu-id="54d3d-114">As dimensões e suas hierarquias de atributos refletem as consultas que podem ser feitas ao cubo.</span><span class="sxs-lookup"><span data-stu-id="54d3d-114">Dimensions and their hierarchies of attributes reflect the queries that can be asked of the cube.</span></span> <span data-ttu-id="54d3d-115">As agregações são armazenadas na estrutura multidimensional em células em coordenadas especificadas pelas dimensões.</span><span class="sxs-lookup"><span data-stu-id="54d3d-115">Aggregations are stored in the multidimensional structure in cells at coordinates specified by the dimensions.</span></span> <span data-ttu-id="54d3d-116">Por exemplo, a pergunta "Quais foram as vendas do produto X em 1998 para a região noroeste?"</span><span class="sxs-lookup"><span data-stu-id="54d3d-116">For example, the question "What were the sales of product X in 1998 for the Northwest region?"</span></span> <span data-ttu-id="54d3d-117">envolve três dimensões (produto, tempo e geografia) e uma medida (vendas).</span><span class="sxs-lookup"><span data-stu-id="54d3d-117">involves three dimensions (Product, Time, and Geography) and one measure (Sales).</span></span> <span data-ttu-id="54d3d-118">O valor da célula no cubo em coordenadas especificadas (produto X, 1998, noroeste) é a resposta, um único valor numérico.</span><span class="sxs-lookup"><span data-stu-id="54d3d-118">The value of the cell in the cube at the specified coordinates (product X, 1998, Northwest) is the answer, a single numeric value.</span></span>  
  
 <span data-ttu-id="54d3d-119">Outras perguntas podem retornar vários valores.</span><span class="sxs-lookup"><span data-stu-id="54d3d-119">Other questions may return multiple values.</span></span> <span data-ttu-id="54d3d-120">Por exemplo, "De quanto eram as vendas de produtos de hardware por trimestre, por região, em 1998?"</span><span class="sxs-lookup"><span data-stu-id="54d3d-120">For example, "How much were the sales of hardware products by quarter by region for 1998?"</span></span> <span data-ttu-id="54d3d-121">Tais consultas retornam conjuntos de células das coordenadas que atendem às condições especificadas.</span><span class="sxs-lookup"><span data-stu-id="54d3d-121">Such queries return sets of cells from the coordinates that satisfy the specified conditions.</span></span> <span data-ttu-id="54d3d-122">O número de células retornado pela consulta depende do número de itens no nível Hardware da dimensão Produto, os quatro trimestres em 1998 e o número de regiões na dimensão Geografia.</span><span class="sxs-lookup"><span data-stu-id="54d3d-122">The number of cells returned by the query depends on the number of items in the Hardware level of the Product dimension, the four quarters in 1998, and the number of regions in the Geography dimension.</span></span> <span data-ttu-id="54d3d-123">Se todos os dados de resumo tiverem sido pré-calculados em agregações, o tempo de resposta da consulta dependerá apenas do tempo necessário para extrair as células específicas.</span><span class="sxs-lookup"><span data-stu-id="54d3d-123">If all summary data has been precalculated into aggregations, the response time of the query will depend only on the time that is required to extract the specified cells.</span></span> <span data-ttu-id="54d3d-124">Nenhum cálculo ou leitura de dados da tabela de fatos é necessário.</span><span class="sxs-lookup"><span data-stu-id="54d3d-124">No calculation or reading of data from the fact table is required.</span></span>  
  
 <span data-ttu-id="54d3d-125">Apesar do pré-cálculo de todas as agregações possíveis em um cubo fornecer o tempo de resposta mais rápido possível para todas as consultas, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] pode facilmente calcular alguns valores de agregação de outras agregações pré-calculadas.</span><span class="sxs-lookup"><span data-stu-id="54d3d-125">Although precalculation of all possible aggregations in a cube might provide the fastest possible response time for all queries, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can easily calculate some aggregrated values from other precalculated aggregations.</span></span> <span data-ttu-id="54d3d-126">Além disso, calcular todas as agregações possíveis requer tempo de processamento e armazenamento significativos.</span><span class="sxs-lookup"><span data-stu-id="54d3d-126">Additionally, calculating all possible aggregations requires significant processing time and storage.</span></span> <span data-ttu-id="54d3d-127">Portanto, há um equilíbrio entre requisitos de armazenamento e a porcentagem de possíveis agregações que são pré-calculadas.</span><span class="sxs-lookup"><span data-stu-id="54d3d-127">Therefore, there is a tradeoff between storage requirements and the percentage of possible aggregations that are precalculated.</span></span> <span data-ttu-id="54d3d-128">Se nenhuma agregação for pré-calculada (0%), a quantidade de tempo de processamento e espaço de armazenamento, necessários para um cubo, serão reduzidos mas o tempo de resposta da consulta será maior, pois os dados necessários para responder a cada consulta deverão ser recuperados de células folha e, em seguida, agregados na consulta.</span><span class="sxs-lookup"><span data-stu-id="54d3d-128">If no aggregations are precalculated (0%), the amount of required processing time and storage space for a cube is minimized, but query response time may be slow because the data required to answer each query must be retrieved from the leaf cells and then aggregated at query time to answer each query.</span></span> <span data-ttu-id="54d3d-129">Por exemplo, retornar um único número que responda à questão feita anteriormente ("Quais são as vendas do produto X em 1998 para a região noroeste"), pode exigir a leitura de milhares de linhas de dados, extraindo o valor da coluna usada para fornecer a medida Vendas de cada linha e, então, calcular a soma.</span><span class="sxs-lookup"><span data-stu-id="54d3d-129">For example, returning a single number that answers the question asked earlier ("What were the sales of product X in 1998 for the Northwest region") might require reading thousands of rows of data, extracting the value of the column used to provide the Sales measure from each row, and then calculating the sum.</span></span> <span data-ttu-id="54d3d-130">Além disso, o período de tempo necessário para recuperar esses dados dependerá muito do modo de armazenamento escolhido para os dados-MOLAP, HOLAP ou ROLAP.</span><span class="sxs-lookup"><span data-stu-id="54d3d-130">Moreover, the length of time required to retrieve that data will very depending on the storage mode chosen for the data-MOLAP, HOLAP, or ROLAP.</span></span>  
  
## <a name="designing-aggregations"></a><span data-ttu-id="54d3d-131">Projetando agregações</span><span class="sxs-lookup"><span data-stu-id="54d3d-131">Designing Aggregations</span></span>  
 [!INCLUDE[msCoName](../../includes/msconame-md.md)]<span data-ttu-id="54d3d-132">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] incorpora um algoritmo sofisticado para selecionar agregações para o precálculo para que outras agregações possam ser rapidamente computadas a partir dos valores pré-calculados.</span><span class="sxs-lookup"><span data-stu-id="54d3d-132">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] incorporates a sophisticated algorithm to select aggregations for precalculation so that other aggregations can be quickly computed from the precalculated values.</span></span> <span data-ttu-id="54d3d-133">Por exemplo, se as agregações forem pré-calculadas para o nível Mês da hierarquia Tempo, o cálculo do nível Trimestre exigirá apenas o resumo de três números, os quais podem ser rapidamente computados sob demanda.</span><span class="sxs-lookup"><span data-stu-id="54d3d-133">For example, if the aggregations are precalculated for the Month level of a Time hierarchy, the calculation for a Quarter level requires only the summarization of three numbers, which can be quickly computed on demand.</span></span> <span data-ttu-id="54d3d-134">Essa técnica economiza tempo de processamento e reduz os requisitos de armazenamento, com efeito mínimo sobre o tempo de resposta de consulta.</span><span class="sxs-lookup"><span data-stu-id="54d3d-134">This technique saves processing time and reduces storage requirements, with minimal effect on query response time.</span></span>  
  
 <span data-ttu-id="54d3d-135">O Assistente de Design de Agregação oferece opções para você especificar as restrições de armazenamento e a porcentagem no algoritmo para atingir um equilíbrio satisfatório entre o tempo de resposta da consulta e os requisitos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="54d3d-135">The Aggregation Design Wizard provides options for you to specify storage and percentage constraints on the algorithm to achieve a satisfactory tradeoff between query response time and storage requirements.</span></span> <span data-ttu-id="54d3d-136">Porém, o algoritmo do Assistente de Design de Agregação assume que todas as consultas possíveis são igualmente prováveis.</span><span class="sxs-lookup"><span data-stu-id="54d3d-136">However, the Aggregation Design Wizard's algorithm assumes that all possible queries are equally likely.</span></span> <span data-ttu-id="54d3d-137">O Assistente de Otimização com Base no Uso permite ajustar o projeto da agregação para um grupo de medidas, analisando as consultas enviadas por aplicativos cliente.</span><span class="sxs-lookup"><span data-stu-id="54d3d-137">The Usage-Based Optimization Wizard lets you adjust the aggregation design for a measure group by analyzing the queries that have been submitted by client applications.</span></span> <span data-ttu-id="54d3d-138">Usando o assistente para ajustar a agregação do cubo, você pode aumentar a capacidade de resposta para consultas frequentes e diminuir a capacidade de resposta de consultas não frequentes sem afetar significativamente o armazenamento necessário para o cubo.</span><span class="sxs-lookup"><span data-stu-id="54d3d-138">By using the wizard to tune a cube's aggregation you can increase responsiveness to frequent queries and decrease responsiveness to infrequent queries without significantly affecting the storage needed for the cube.</span></span>  
  
 <span data-ttu-id="54d3d-139">As agregações são projetadas usando os assistentes, mas não são calculadas até que a partição para a qual as agregações são projetadas seja processada.</span><span class="sxs-lookup"><span data-stu-id="54d3d-139">Aggregations are designed by using the wizards but are not actually calculated until the partition for which the aggregations are designed is processed.</span></span> <span data-ttu-id="54d3d-140">Depois que a agregação tiver sido criada, se a estrutura do cubo mudar alguma vez ou se forem adicionados ou alterados dados nas tabelas de origem do cubo, geralmente será necessário examinar as agregações do cubo e processá-lo novamente.</span><span class="sxs-lookup"><span data-stu-id="54d3d-140">After the aggregation has been created, if the structure of a cube ever changes, or if data is added to or changed in a cube's source tables, it is usually necessary to review the cube's aggregations and process the cube again.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="54d3d-141">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="54d3d-141">See Also</span></span>  
 [<span data-ttu-id="54d3d-142">Modos e processamento de armazenamento de partição</span><span class="sxs-lookup"><span data-stu-id="54d3d-142">Partition Storage Modes and Processing</span></span>](partitions-partition-storage-modes-and-processing.md)  
  
  
