---
title: Consultas de previsão (mineração de dados) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e5e6686c-1360-480e-8c0d-8a56204fbed9
author: minewiskan
ms.author: owend
ms.openlocfilehash: 543055aaed5d8991ed2c913a6ae46575c774e216
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87681926"
---
# <a name="prediction-queries-data-mining"></a><span data-ttu-id="2ba61-102">Prediction Queries (Data Mining)</span><span class="sxs-lookup"><span data-stu-id="2ba61-102">Prediction Queries (Data Mining)</span></span>
  <span data-ttu-id="2ba61-103">O objetivo de um projeto de mineração de dados típico é usar o modelo de mineração para fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="2ba61-103">The goal of a typical data mining project is to use the mining model to make predictions.</span></span> <span data-ttu-id="2ba61-104">Por exemplo, você pode querer prever a quantidade de tempo de inatividade esperado para um determinado cluster de servidores ou gerar uma pontuação que indica a probabilidade de os segmentos de clientes responderem a uma campanha publicitária.</span><span class="sxs-lookup"><span data-stu-id="2ba61-104">For example, you might want to predict the amount of expected downtime for a certain cluster of servers, or generate a score that indicates whether segments of customers are likely to respond to an advertising campaign.</span></span> <span data-ttu-id="2ba61-105">Para fazer todas estas coisas, você cria uma consulta de previsão.</span><span class="sxs-lookup"><span data-stu-id="2ba61-105">To do all these things, you would create a prediction query.</span></span>  
  
 <span data-ttu-id="2ba61-106">Funcionalmente, há tipos diferentes de consultas de previsão com suporte no SQL Server, dependendo do tipo de entradas à consulta:</span><span class="sxs-lookup"><span data-stu-id="2ba61-106">Functionally, there are different types of prediction queries supported in SQL Server, depending on the type of inputs to the query:</span></span>  
  
|<span data-ttu-id="2ba61-107">Tipo de consulta</span><span class="sxs-lookup"><span data-stu-id="2ba61-107">Query Type</span></span>|<span data-ttu-id="2ba61-108">Opções de consulta</span><span class="sxs-lookup"><span data-stu-id="2ba61-108">Query Options</span></span>|  
|----------------|-------------------|  
|<span data-ttu-id="2ba61-109">Consultas de previsão singleton</span><span class="sxs-lookup"><span data-stu-id="2ba61-109">Singleton prediction queries</span></span>|<span data-ttu-id="2ba61-110">Use uma consulta singleton quando quiser prever resultados para um único caso novo ou para vários casos novos.</span><span class="sxs-lookup"><span data-stu-id="2ba61-110">Use a singleton query when you want to predict outcomes for a single new case, or multiple new cases.</span></span> <span data-ttu-id="2ba61-111">Você fornece os valores de entrada diretamente na consulta e ela é executada como uma única sessão.</span><span class="sxs-lookup"><span data-stu-id="2ba61-111">You provide the input values directly in the query, and the query is executed as a single session.</span></span>|  
|<span data-ttu-id="2ba61-112">Previsões em lotes</span><span class="sxs-lookup"><span data-stu-id="2ba61-112">Batch predictions</span></span>|<span data-ttu-id="2ba61-113">Use previsões em lote quando você tiver dados externos que você queira alimentar no modelo, para usar como a base para previsões.</span><span class="sxs-lookup"><span data-stu-id="2ba61-113">Use batch predictions when you have external data that you want to feed into the model, to use as the basis for predictions.</span></span> <span data-ttu-id="2ba61-114">Para fazer previsões para um conjunto inteiro de dados, você mapeia os dados na origem externa para as colunas no modelo e, em seguida, especifica o tipo de dados preditivos que deseja produzir.</span><span class="sxs-lookup"><span data-stu-id="2ba61-114">To make predictions for an entire set of data, you map the data in the external source to the columns in the model, and then specify the type of predictive data you want to output.</span></span><br /><br /> <span data-ttu-id="2ba61-115">A consulta para o conjunto de dados inteiro é executada em uma única sessão, tornando esta opção muito mais eficiente que enviar diversas consultas repetidas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-115">The query for the entire dataset is executed in a single session, making this option much more efficient than sending multiple repeated queries.</span></span>|  
|<span data-ttu-id="2ba61-116">Previsões de série temporal</span><span class="sxs-lookup"><span data-stu-id="2ba61-116">Time Series predictions</span></span>|<span data-ttu-id="2ba61-117">Use uma consulta de série temporal quando quiser prever um valor em algumas etapas futuras.</span><span class="sxs-lookup"><span data-stu-id="2ba61-117">Use a time series query when you want to predict a value over some number of future steps.</span></span> <span data-ttu-id="2ba61-118">O SQL Server Data Mining também fornece as seguintes funcionalidades em consultas de série temporal:</span><span class="sxs-lookup"><span data-stu-id="2ba61-118">SQL Server Data Mining also provides the following functionality in time series queries:</span></span><br /><br /> <span data-ttu-id="2ba61-119">Estenda um modelo existente adicionando dados novos como parte da consulta e faça previsões baseadas na série composta.</span><span class="sxs-lookup"><span data-stu-id="2ba61-119">You can extend an existing model by adding new data as part of the query, and make predictions based on the composite series.</span></span><br /><br /> <span data-ttu-id="2ba61-120">Aplique o modelo existente a uma nova série de dados usando a opção REPLACE_MODEL_CASES.</span><span class="sxs-lookup"><span data-stu-id="2ba61-120">You can apply an existing model to a new data series by using the REPLACE_MODEL_CASES option.</span></span><br /><br /> <span data-ttu-id="2ba61-121">Você pode executar previsão cruzada.</span><span class="sxs-lookup"><span data-stu-id="2ba61-121">You can perform cross-prediction.</span></span>|  
  
 <span data-ttu-id="2ba61-122">As seções a seguir descrevem a sintaxe geral de consultas de previsão, os tipos diferentes de consultas de previsão, e como trabalhar com os resultados de consultas de previsão.</span><span class="sxs-lookup"><span data-stu-id="2ba61-122">The following sections describe the general syntax of prediction queries, the different types of prediction queries, and how to work with the results of prediction queries.</span></span>  
  
 [<span data-ttu-id="2ba61-123">Design de consulta de previsão básica</span><span class="sxs-lookup"><span data-stu-id="2ba61-123">Basic Prediction Query Design</span></span>](#bkmk_PredQuery)  
  
-   [<span data-ttu-id="2ba61-124">Adicionando funções de previsão</span><span class="sxs-lookup"><span data-stu-id="2ba61-124">Adding Prediction Functions</span></span>](#bkmk_PredFunc)  
  
-   [<span data-ttu-id="2ba61-125">Consultas singleton</span><span class="sxs-lookup"><span data-stu-id="2ba61-125">Singleton Queries</span></span>](#bkmk_SingletonQuery)  
  
-   [<span data-ttu-id="2ba61-126">Consultas de previsão de lote</span><span class="sxs-lookup"><span data-stu-id="2ba61-126">Batch Prediction Queries</span></span>](#bkmk_BatchQuery)  
  
 [<span data-ttu-id="2ba61-127">Trabalhando com os resultados de consultas</span><span class="sxs-lookup"><span data-stu-id="2ba61-127">Working with the Results of Queries</span></span>](#bkmk_WorkResults)  
  
##  <a name="basic-prediction-query-design"></a><a name="bkmk_PredQuery"></a> <span data-ttu-id="2ba61-128">Design básico de consulta de previsão</span><span class="sxs-lookup"><span data-stu-id="2ba61-128">Basic Prediction Query Design</span></span>  
 <span data-ttu-id="2ba61-129">Ao criar uma previsão, você normalmente fornece alguns dados novos e solicita ao modelo para gerar uma previsão com base nos dados novos.</span><span class="sxs-lookup"><span data-stu-id="2ba61-129">When you create a prediction, you typically provide some piece of new data and ask the model to generate a prediction based on the new data.</span></span>  
  
-   <span data-ttu-id="2ba61-130">Em uma consulta de lote, mapeie o modelo para uma fonte de dados externa usando uma *junção de previsão*.</span><span class="sxs-lookup"><span data-stu-id="2ba61-130">In a batch prediction query, you map the model to an external source of data by using a *prediction join*.</span></span>  
  
-   <span data-ttu-id="2ba61-131">Em uma consulta de previsão singleton, digite um ou mais valores para usar como entradas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-131">In a singleton prediction query, you type one or more values to use as inputs.</span></span> <span data-ttu-id="2ba61-132">Ainda é possível criar várias previsões usando uma consulta de previsão singleton.</span><span class="sxs-lookup"><span data-stu-id="2ba61-132">You can create multiple predictions using a singleton prediction query.</span></span> <span data-ttu-id="2ba61-133">Porém, se você precisar criar muitas previsões, o desempenho será melhor quando você usar uma consulta de lote.</span><span class="sxs-lookup"><span data-stu-id="2ba61-133">However, if you need to create many predictions, performance is better when you use a batch query.</span></span>  
  
 <span data-ttu-id="2ba61-134">As consultas de previsão singleton e de lote usam a sintaxe PREDICTION JOIN para definir os novos dados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-134">Both singleton and batch prediction queries use the PREDICTION JOIN syntax to define the new data.</span></span> <span data-ttu-id="2ba61-135">A diferença está no modo como a entrada da junção da previsão é especificada.</span><span class="sxs-lookup"><span data-stu-id="2ba61-135">The difference is in how the input side of the prediction join is specified.</span></span>  
  
-   <span data-ttu-id="2ba61-136">Em uma consulta de previsão por lotes, os dados vêm de uma fonte de dados externa especificada com o uso da consulta OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="2ba61-136">In a batch prediction query, the data comes from an external data source that is specified by using the OPENQUERY syntax.</span></span>  
  
-   <span data-ttu-id="2ba61-137">Em uma consulta de previsão singleton, os dados são fornecidos embutidos como parte da consulta.</span><span class="sxs-lookup"><span data-stu-id="2ba61-137">In a singleton prediction query, the data is supplied inline as part of the query.</span></span>  
  
 <span data-ttu-id="2ba61-138">Para modelos de série temporal, os dados de entrada não são sempre necessários; é possível fazer previsões usando apenas nos dados existentes no modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-138">For time series models, input data is not always required; it is possible to make predictions using just the data already in the model.</span></span> <span data-ttu-id="2ba61-139">No entanto, se você especificar novos dados de entrada, precisará optar entre usar os novos dados para atualizar e estender o modelo, ou substituir a série original dos dados que foram usados no modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-139">However, if you do specify new input data, you must decide whether you will use the new data to update and extend the model, or to replace the original series of data that was used in the model.</span></span>  <span data-ttu-id="2ba61-140">Para obter mais informações sobre essas opções, consulte [Time Series Model Query Examples](time-series-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="2ba61-140">For more information about these options, see [Time Series Model Query Examples](time-series-model-query-examples.md).</span></span>  
  
###  <a name="adding-prediction-functions"></a><a name="bkmk_PredFunc"></a><span data-ttu-id="2ba61-141">Adicionando funções de previsão</span><span class="sxs-lookup"><span data-stu-id="2ba61-141">Adding Prediction Functions</span></span>  
 <span data-ttu-id="2ba61-142">Além de prever um valor, é possível personalizar uma consulta de previsão para retornar vários tipos de informações relacionadas à previsão.</span><span class="sxs-lookup"><span data-stu-id="2ba61-142">In addition to predicting a value, you can customize a prediction query to return various kinds of information that are related to the prediction.</span></span> <span data-ttu-id="2ba61-143">Por exemplo, se a previsão criar uma lista de produtos para recomendar a um cliente, talvez você também queira retornar a probabilidade para cada previsão, de forma que possa classificá-las e apresentar somente as principais recomendações para o usuário.</span><span class="sxs-lookup"><span data-stu-id="2ba61-143">For example, if the prediction creates a list of products to recommend to a customer, you might also want to return the probability for each prediction, so that you can rank them and present only the top recommendations to the user.</span></span>  
  
 <span data-ttu-id="2ba61-144">Para fazer isso, adicione *funções de previsão* à consulta.</span><span class="sxs-lookup"><span data-stu-id="2ba61-144">To do this, you add *prediction functions* to the query.</span></span> <span data-ttu-id="2ba61-145">Cada modelo ou tipo de consulta dá suporte a funções específicas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-145">Each model or query type supports specific functions.</span></span> <span data-ttu-id="2ba61-146">Por exemplo, os modelos de clustering oferecem suporte a funções de previsão especiais que fornecem detalhes adicionais sobre os clusters criados pelo modelo, ao passo que modelos de série temporal têm funções que calculam diferenças com o passar do tempo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-146">For example, clustering models support special prediction functions that provide extra detail about the clusters created by the model, whereas time series models have functions that calculate differences over time.</span></span> <span data-ttu-id="2ba61-147">Também há funções de previsão gerais que funcionam com quase todos os tipos de modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-147">There are also general prediction functions that work with almost all model types.</span></span> <span data-ttu-id="2ba61-148">Para obter uma lista das funções de previsão com suporte em tipos diferentes de consultas, consulte esse tópico sobre a referência DMX: [Funções de previsão gerais &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="2ba61-148">For a list of the prediction functions supported in different types of queries, see this topic the DMX reference:  [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span>  
  
###  <a name="creating-singleton-prediction-queries"></a><a name="bkmk_SingletonQuery"></a><span data-ttu-id="2ba61-149">Criando consultas de Previsão Singleton</span><span class="sxs-lookup"><span data-stu-id="2ba61-149">Creating Singleton Prediction Queries</span></span>  
 <span data-ttu-id="2ba61-150">Uma consulta de previsão singleton é útil quando você deseja criar previsões rápidas em tempo real.</span><span class="sxs-lookup"><span data-stu-id="2ba61-150">A singleton prediction query is useful when you want to create quick predictions in real time.</span></span> <span data-ttu-id="2ba61-151">Um cenário comum pode ser que você obteve informações de um cliente, talvez usando um formulário em um site e, em seguida, quer enviar esses dados como a entrada para uma consulta de previsão singleton.</span><span class="sxs-lookup"><span data-stu-id="2ba61-151">A common scenario might be that you have obtained information from a customer, perhaps by using a form on a Web site, and you want to submit that data as the input to a singleton prediction query.</span></span> <span data-ttu-id="2ba61-152">Por exemplo, quando um cliente escolher um produto de uma lista, você poderá usar a seleção como a entrada para uma consulta que prevê os melhores produtos para recomendar.</span><span class="sxs-lookup"><span data-stu-id="2ba61-152">For example, when a customer chooses a product from a list, you could use that selection as the input to a query that predicts the best products to recommend.</span></span>  
  
 <span data-ttu-id="2ba61-153">As consultas de previsão singleton não exigem uma tabela separada que contém entrada.</span><span class="sxs-lookup"><span data-stu-id="2ba61-153">Singleton prediction queries do not require a separate table that contains input.</span></span> <span data-ttu-id="2ba61-154">Você fornece uma ou várias linhas de valores como entrada para o modelo e as previsões são retornadas em tempo real.</span><span class="sxs-lookup"><span data-stu-id="2ba61-154">Instead, you provide one or multiple rows of values as input to the model, and the prediction or predictions are returned in real time.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="2ba61-155">Apesar do nome, as consultas de Previsão Singleton não fazem apenas previsões únicas – você pode gerar várias previsões para cada conjunto de entradas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-155">Despite the name, singleton prediction queries do not just make single predictions-you can generate multiple predictions for each set of inputs.</span></span> <span data-ttu-id="2ba61-156">Forneça vários casos de entrada criando uma instrução SELECT para cada caso de entrada e combinando-os com o operador UNION.</span><span class="sxs-lookup"><span data-stu-id="2ba61-156">You provide multiple input cases by creating a SELECT statement for each input case and combining them with the UNION operator.</span></span>  
  
 <span data-ttu-id="2ba61-157">Ao criar uma consulta de previsão singleton, é necessário fornecer os novos dados ao modelo na forma de uma PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="2ba61-157">When you create a singleton prediction query, you must provide the new data to the model in the form of a PREDICTION JOIN.</span></span> <span data-ttu-id="2ba61-158">Isso significa que, mesmo que não esteja mapeando para uma tabela real, você deve verificar se os novos dados correspondem às colunas existentes no modelo de mineração.</span><span class="sxs-lookup"><span data-stu-id="2ba61-158">This means that even though you are not mapping to an actual table, you must make sure that the new data matches the existing columns in the mining model.</span></span> <span data-ttu-id="2ba61-159">Se as colunas dos novos dados e os novos dados corresponderem de modo exato, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] mapeará as colunas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-159">If the new data columns and the new data match exactly, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will map the columns for you.</span></span> <span data-ttu-id="2ba61-160">Isto é chamado de *JUNÇÃO DE PREVISÃO NATURAL*.</span><span class="sxs-lookup"><span data-stu-id="2ba61-160">This is called a *NATURAL PREDICTION JOIN*.</span></span> <span data-ttu-id="2ba61-161">No entanto, se as colunas não coincidirem ou se os novos dados não tiverem o mesmo tipo e quantidade de dados do modelo, especifique quais colunas do modelo devem ser mapeadas para os novos dados ou especifique os valores ausentes.</span><span class="sxs-lookup"><span data-stu-id="2ba61-161">However, if the columns do not match, or if the new data does not contain the same kind and amount of data that is in the model, you must specify which columns in the model map to the new data, or specify the missing values.</span></span>  
  
###  <a name="batch-prediction-queries"></a><a name="bkmk_BatchQuery"></a> <span data-ttu-id="2ba61-162">Consultas de previsão em lotes</span><span class="sxs-lookup"><span data-stu-id="2ba61-162">Batch Prediction Queries</span></span>  
 <span data-ttu-id="2ba61-163">Uma consulta de previsão em lote é útil quando você tem dados externos que deseja usar fazendo previsões.</span><span class="sxs-lookup"><span data-stu-id="2ba61-163">A batch prediction query is useful when you have external data that you want to use in making predictions.</span></span> <span data-ttu-id="2ba61-164">Por exemplo, você pode ter criado um modelo que categoriza clientes por sua atividade online e histórico de compras.</span><span class="sxs-lookup"><span data-stu-id="2ba61-164">For example, you might have built a model that categorizes customers by their online activity and purchasing history.</span></span> <span data-ttu-id="2ba61-165">Você pode aplicar esse modelo a uma lista de clientes potenciais recém-adquiridos para criar projeções para vendas, ou identificar alvos para campanhas propostas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-165">You could apply that model to a list of newly acquired leads, to create projections for sales, or to identify targets for proposed campaigns.</span></span>  
  
 <span data-ttu-id="2ba61-166">Quando você realiza uma junção de previsão, deve mapear as colunas do modelo para as colunas na nova fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-166">When you perform a prediction join, you must map the columns the model to the columns in the new data source.</span></span> <span data-ttu-id="2ba61-167">Portanto, a fonte de dados que você escolher para uma entrada deve conter dados que sejam semelhantes aos dados no modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-167">Therefore, the data source that you choose for an input must data that is somewhat similar to the data in the model.</span></span> <span data-ttu-id="2ba61-168">As novas informações não têm que corresponder exatamente e podem estar incompletas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-168">The new information does not have to match exactly, and can be incomplete.</span></span> <span data-ttu-id="2ba61-169">Por exemplo, suponha que o modelo foi treinado usando informações sobre renda e idade; porém, a lista de clientes usada para previsões tem dados sobre idade mas não sobre renda.</span><span class="sxs-lookup"><span data-stu-id="2ba61-169">For example, suppose the model was trained using information about income and age, but the customer list you are using for predictions has age but nothing about income.</span></span> <span data-ttu-id="2ba61-170">Neste cenário, você ainda pode mapear os novos dados para o modelo e criar uma previsão para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="2ba61-170">In this scenario, you could still map the new data to the model and create a prediction for each customer.</span></span> <span data-ttu-id="2ba61-171">Entretanto, se a renda fosse uma previsor importante para o modelo, a falta de informações completas afetaria a qualidade de previsões.</span><span class="sxs-lookup"><span data-stu-id="2ba61-171">However, if income was an important predictor for the model, the lack of complete information would affect the quality of predictions.</span></span>  
  
 <span data-ttu-id="2ba61-172">Para obter os melhores resultados, você deverá unir o máximo de colunas correspondentes possível entre os novos dados e o modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-172">To get the best results, you should join as many of the matching columns as possible between the new data and the model.</span></span> <span data-ttu-id="2ba61-173">No entanto, a consulta será bem-sucedida mesmo se não houver nenhuma correspondência.</span><span class="sxs-lookup"><span data-stu-id="2ba61-173">However, the query will succeed even if there are no matches.</span></span> <span data-ttu-id="2ba61-174">Se nenhuma coluna for unida, a consulta retornará a previsão marginal, que é equivalente à instrução `SELECT <predictable-column> FROM <model>` sem uma cláusula PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="2ba61-174">If no columns are joined, the query will return the marginal prediction, which is equivalent to the statement `SELECT <predictable-column> FROM <model>` without a PREDICTION JOIN clause.</span></span>  
  
 <span data-ttu-id="2ba61-175">Depois de ter mapeado com sucesso todas as colunas relevantes, execute a consulta e o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] faz previsões para cada linha dos novos dados com base nos padrões do modelo.</span><span class="sxs-lookup"><span data-stu-id="2ba61-175">After you have successfully mapped all relevant columns, you run the query, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] makes predictions for each row in the new data based on patterns in the model.</span></span> <span data-ttu-id="2ba61-176">Você poderá salvar os resultados de volta para a nova tabela na exibição da fonte de dados que contém os dados externos, ou pode copiar e colar os dados se estiver usando o [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] ou [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2ba61-176">You can save the results back to a new table in the data source view that contains the external data, or you can copy and paste the data is you are using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="2ba61-177">Se você usar o designer no [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], a fonte de dados externa deverá ser definida primeiro como uma exibição da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-177">If you use the designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the external data source must first be defined as a data source view.</span></span>  
  
 <span data-ttu-id="2ba61-178">Se a linguagem DMX for usada para criar uma junção de previsão, especifique a fonte de dados externa usando os comandos OPENQUERY, OPENROWSET ou SHAPE.</span><span class="sxs-lookup"><span data-stu-id="2ba61-178">If you use DMX to create a prediction join, you can specify the external data source by using the OPENQUERY, OPENROWSET, or SHAPE commands.</span></span> <span data-ttu-id="2ba61-179">O método de acesso aos dados padrão nos modelos DMX é OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="2ba61-179">The default data access method in the DMX templates is OPENQUERY.</span></span> <span data-ttu-id="2ba61-180">Para obter mais informações sobre esses métodos, consulte [&#60;consulta de dados de origem&#62;](/sql/dmx/source-data-query).</span><span class="sxs-lookup"><span data-stu-id="2ba61-180">For information about these methods, see [&#60;source data query&#62;](/sql/dmx/source-data-query).</span></span>  
  
###  <a name="predictions-in-time-series-mining-models"></a><a name="bkmk_TSQuery"></a> <span data-ttu-id="2ba61-181">Previsões em modelos de mineração de série temporal</span><span class="sxs-lookup"><span data-stu-id="2ba61-181">Predictions in Time Series Mining Models</span></span>  
 <span data-ttu-id="2ba61-182">Modelos de série temporal são diferentes de outros tipos de modelos; você pode usar o modelo como ele é para criar previsões, ou pode fornecer novos dados para o modelo para atualizá-lo e criar previsões com base em tendências recentes.</span><span class="sxs-lookup"><span data-stu-id="2ba61-182">Time series models are different from other models types; you can either use the model as it is to create predictions, or you can provide new data to the model to update the model and create predictions based on recent trends.</span></span> <span data-ttu-id="2ba61-183">Se você adicionar novos dados, poderá especificar o modo como os novos dados devem ser usados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-183">If you add new data, you can specify the way the new data should be used.</span></span>  
  
-   <span data-ttu-id="2ba61-184">*Estender os casos de modelo* significa que você adiciona os novos dados à série existente de dados no modelo de série temporal.</span><span class="sxs-lookup"><span data-stu-id="2ba61-184">*Extending the model cases* means that you add the new data onto the existing series of data in the time series model.</span></span> <span data-ttu-id="2ba61-185">Daqui em diante, as previsões são baseadas na nova série combinada.</span><span class="sxs-lookup"><span data-stu-id="2ba61-185">Henceforth, predictions are based on the new, combined series.</span></span> <span data-ttu-id="2ba61-186">Esta opção é boa quando você quiser simplesmente adicionar alguns pontos de dados a um modelo existente.</span><span class="sxs-lookup"><span data-stu-id="2ba61-186">This option is good when you want to simply add a few data points to an existing model.</span></span>  
  
     <span data-ttu-id="2ba61-187">Por exemplo, imagine que você tenha um modelo de série temporal existente treinado nos dados de vendas do ano anterior.</span><span class="sxs-lookup"><span data-stu-id="2ba61-187">For example, suppose that you have an existing time series model that has been trained on the sales data from the previous year.</span></span> <span data-ttu-id="2ba61-188">Após coletar vários meses de novos dados de vendas, você decide atualizar suas previsões de vendas para o ano atual.</span><span class="sxs-lookup"><span data-stu-id="2ba61-188">After you have collected several months of new sales data, you decide to update your sales forecasts for the current year.</span></span> <span data-ttu-id="2ba61-189">Você pode criar uma junção de previsão que atualize o modelo adicionando novos dados e que estenda o modelo para fazer novas previsões.</span><span class="sxs-lookup"><span data-stu-id="2ba61-189">You can create a prediction join that updates the model by adding new data and extends the model to make new predictions.</span></span>  
  
-   <span data-ttu-id="2ba61-190">*Substituir casos do modelo* significa manter o modelo treinado, mas substituir os casos subjacentes por um novo conjunto de dados de caso.</span><span class="sxs-lookup"><span data-stu-id="2ba61-190">*Replacing the model cases* means that you keep the trained model, but replace the underlying cases with a new set of case data.</span></span> <span data-ttu-id="2ba61-191">Esta opção é útil quando você quiser manter a tendência no modelo, mas aplicá-lo a um conjunto diferente de dados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-191">This option is useful when you want to keep the trend in the model, but apply it to a different set of data.</span></span>  
  
     <span data-ttu-id="2ba61-192">Por exemplo, seu modelo original pode ter sido treinado em um conjunto de dados com volumes de vendas muito altos; quando você substituir os dados subjacentes por uma nova série (talvez de um repositório com volume de vendas inferior), preserva a tendência, mas as previsões começam dos valores na série de substituição.</span><span class="sxs-lookup"><span data-stu-id="2ba61-192">For example, your original model might have been trained on a set of data with very high sales volumes; when you replace the underlying data with a new series (perhaps from a store with lower sales volume), you preserve the trend, but the predictions begin from the values in the replacement series.</span></span>  
  
 <span data-ttu-id="2ba61-193">Independentemente da abordagem usada, o ponto de partida para previsões sempre é o término da série original.</span><span class="sxs-lookup"><span data-stu-id="2ba61-193">Regardless of which approach you use, the starting point for predictions is always the end of the original series.</span></span>  
  
 <span data-ttu-id="2ba61-194">Para obter mais informações sobre como criar junções de previsão em modelos de série temporal, consulte [Exemplos de consulta de um modelo de série temporal](time-series-model-query-examples.md) ou [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span><span class="sxs-lookup"><span data-stu-id="2ba61-194">For more information about how to create prediction joins on time series models, see [Time Series Model Query Examples](time-series-model-query-examples.md) or [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span></span>  
  
##  <a name="working-with-the-results-of-a-prediction-query"></a><a name="bkmk_WorkResults"></a> <span data-ttu-id="2ba61-195">Trabalhando com os resultados de uma consulta de previsão</span><span class="sxs-lookup"><span data-stu-id="2ba61-195">Working with the Results of a Prediction Query</span></span>  
 <span data-ttu-id="2ba61-196">Suas opções para salvar os resultados de uma consulta de previsão de mineração de dados são diferentes dependendo de como você cria a consulta.</span><span class="sxs-lookup"><span data-stu-id="2ba61-196">Your options for saving the results of a data mining prediction query are different depending on how you create the query.</span></span>  
  
-   <span data-ttu-id="2ba61-197">Quando você criar uma consulta usando o Construtor de Consultas de Previsão no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou no [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], poderá salvar os resultados de uma consulta de previsão em uma fonte de dados existente do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2ba61-197">When you build a query using Prediction Query Builder in either [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can save the results of a prediction query to an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source.</span></span> <span data-ttu-id="2ba61-198">Para obter mais informações, consulte [Exibir e salvar os resultados de uma consulta de previsão](view-and-save-the-results-of-a-prediction-query.md).</span><span class="sxs-lookup"><span data-stu-id="2ba61-198">For more information, see [View and Save the Results of a Prediction Query](view-and-save-the-results-of-a-prediction-query.md).</span></span>  
  
-   <span data-ttu-id="2ba61-199">Quando você cria consultas de previsão que usam DMX no painel de Consulta do [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], pode usar as opções de saída de consulta para salvar os resultados em um arquivo, ou no painel Resultados da Consulta como texto ou em uma grade.</span><span class="sxs-lookup"><span data-stu-id="2ba61-199">When you create prediction queries using DMX in the Query pane of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can use the query output options to save the results to a file, or to the Query Results pane as text or in a grid.</span></span> <span data-ttu-id="2ba61-200">Para obter mais informações, veja [Editores de Consultas e de Texto &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="2ba61-200">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="2ba61-201">Quando você executa uma consulta de previsão usando os componentes do Integration Services, as tarefas fornecem a capacidade de gravar os resultados em um banco de dados usando um gerenciador de conexões ADO.NET disponível ou um gerenciador de conexões OLEDB.</span><span class="sxs-lookup"><span data-stu-id="2ba61-201">When you run a prediction query using the Integration Services components, the tasks provides the ability to write the results to a database by using an available ADO.NET connection manager or OLEDB connection manager.</span></span> <span data-ttu-id="2ba61-202">Para obter mais informações, consulte [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span><span class="sxs-lookup"><span data-stu-id="2ba61-202">For more information, see [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span></span>  
  
 <span data-ttu-id="2ba61-203">É importante compreender que os resultados de uma consulta de previsão não são como os resultados de uma consulta em um banco de dados relacional, que sempre retorna uma única linha de valores relacionados.</span><span class="sxs-lookup"><span data-stu-id="2ba61-203">It is important to understand that the results of a prediction query are not like the results of a query on a relational database, which always returns a single row of related values.</span></span> <span data-ttu-id="2ba61-204">Cada função de previsão DMX adicionada a uma consulta retorna seu próprio conjunto de linhas.</span><span class="sxs-lookup"><span data-stu-id="2ba61-204">Each DMX prediction function that you add to a query returns its own rowset.</span></span> <span data-ttu-id="2ba61-205">Portanto, ao fazer previsões em um único caso, o resultado pode ser um valor estimado junto com várias colunas de tabelas aninhadas que contêm detalhes adicionais.</span><span class="sxs-lookup"><span data-stu-id="2ba61-205">Therefore, when you make a prediction on a single case, the result might be a predicted value together with several columns of nested tables containing additional detail.</span></span>  
  
 <span data-ttu-id="2ba61-206">Sempre que você combina várias funções em uma consulta, os resultados retornados são combinados como um conjunto de linhas hierárquico.</span><span class="sxs-lookup"><span data-stu-id="2ba61-206">If you combine multiple functions in one query, the return results are combined as a hierarchical rowset.</span></span> <span data-ttu-id="2ba61-207">Por exemplo, digamos que você use um modelo de série temporal para prever valores futuros para a quantidade de vendas, usando uma consulta como esta instrução DMX:</span><span class="sxs-lookup"><span data-stu-id="2ba61-207">For example, say you use a time series model to predict future values for sales amount and sales quantity, using a query such as this DMX statement:</span></span>  
  
```  
SELECT  
  PredictTimeSeries([Forecasting].[Amount]) as [PredictedAmount]  
, PredictTimeSeries([Forecasting].[Quantity]) as [PredictedQty]  
FROM  
  [Forecasting]  
  
```  
  
 <span data-ttu-id="2ba61-208">Os resultados desta consulta são duas colunas, uma para cada série prevista, onde cada linha contém uma tabela aninhada com os valores previstos:</span><span class="sxs-lookup"><span data-stu-id="2ba61-208">The results of this query are two columns, one for each predicted series, where each row contains a nested table with the predicted values:</span></span>  
  
 <span data-ttu-id="2ba61-209">**PredictedAmount**</span><span class="sxs-lookup"><span data-stu-id="2ba61-209">**PredictedAmount**</span></span>  
  
|<span data-ttu-id="2ba61-210">$TIME</span><span class="sxs-lookup"><span data-stu-id="2ba61-210">$TIME</span></span>|<span data-ttu-id="2ba61-211">Quantidade</span><span class="sxs-lookup"><span data-stu-id="2ba61-211">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="2ba61-212">201101</span><span class="sxs-lookup"><span data-stu-id="2ba61-212">201101</span></span>|<span data-ttu-id="2ba61-213">172067.11</span><span class="sxs-lookup"><span data-stu-id="2ba61-213">172067.11</span></span>|  
  
|<span data-ttu-id="2ba61-214">$TIME</span><span class="sxs-lookup"><span data-stu-id="2ba61-214">$TIME</span></span>|<span data-ttu-id="2ba61-215">Quantidade</span><span class="sxs-lookup"><span data-stu-id="2ba61-215">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="2ba61-216">201102</span><span class="sxs-lookup"><span data-stu-id="2ba61-216">201102</span></span>|<span data-ttu-id="2ba61-217">363390.68</span><span class="sxs-lookup"><span data-stu-id="2ba61-217">363390.68</span></span>|  
  
 <span data-ttu-id="2ba61-218">**PredictedQty**</span><span class="sxs-lookup"><span data-stu-id="2ba61-218">**PredictedQty**</span></span>  
  
|<span data-ttu-id="2ba61-219">$TIME</span><span class="sxs-lookup"><span data-stu-id="2ba61-219">$TIME</span></span>|<span data-ttu-id="2ba61-220">Quantidade</span><span class="sxs-lookup"><span data-stu-id="2ba61-220">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="2ba61-221">201101</span><span class="sxs-lookup"><span data-stu-id="2ba61-221">201101</span></span>|<span data-ttu-id="2ba61-222">77</span><span class="sxs-lookup"><span data-stu-id="2ba61-222">77</span></span>|  
  
|<span data-ttu-id="2ba61-223">$TIME</span><span class="sxs-lookup"><span data-stu-id="2ba61-223">$TIME</span></span>|<span data-ttu-id="2ba61-224">Quantidade</span><span class="sxs-lookup"><span data-stu-id="2ba61-224">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="2ba61-225">201102</span><span class="sxs-lookup"><span data-stu-id="2ba61-225">201102</span></span>|<span data-ttu-id="2ba61-226">260</span><span class="sxs-lookup"><span data-stu-id="2ba61-226">260</span></span>|  
  
 <span data-ttu-id="2ba61-227">Se o provedor não puder manipular conjuntos de linhas hierárquicos, você poderá mesclar os resultados usando a palavra-chave FLATTEN na consulta de previsão.</span><span class="sxs-lookup"><span data-stu-id="2ba61-227">If your provider cannot handle hierarchical rowsets, you can flatten the results by using the FLATTEN keyword in the prediction query.</span></span> <span data-ttu-id="2ba61-228">Para obter mais informações, inclusive exemplos de conjuntos de linhas bidimensionais, consulte [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span><span class="sxs-lookup"><span data-stu-id="2ba61-228">For more information, including examples of flattened rowsets, see [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2ba61-229">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="2ba61-229">See Also</span></span>  
 <span data-ttu-id="2ba61-230">[Consultas de conteúdo &#40;mineração de dados&#41;](content-queries-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="2ba61-230">[Content Queries &#40;Data Mining&#41;](content-queries-data-mining.md) </span></span>  
 [<span data-ttu-id="2ba61-231">Consultas de definição de dados &#40;Data Mining&#41;</span><span class="sxs-lookup"><span data-stu-id="2ba61-231">Data Definition Queries &#40;Data Mining&#41;</span></span>](data-definition-queries-data-mining.md)  
  
  
