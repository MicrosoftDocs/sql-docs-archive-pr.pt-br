---
title: Modo DirectQuery (SSAS tabular) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.bidtoolset.realtime.f1
ms.assetid: 45ad2965-05ec-4fb1-a164-d8060b562ea5
author: minewiskan
ms.author: owend
ms.openlocfilehash: ceb58c211b52c1fbd184aafe316e5ea77d364529
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87679037"
---
# <a name="directquery-mode-ssas-tabular"></a><span data-ttu-id="afff9-102">Modo DirectQuery (SSAS tabular)</span><span class="sxs-lookup"><span data-stu-id="afff9-102">DirectQuery Mode (SSAS Tabular)</span></span>
  <span data-ttu-id="afff9-103">O Analysis Services permite recuperar dados e criar relatórios de um modelo de tabela, recuperando dados e agregações diretamente de um sistema de banco de dados relacional, usando o *modo DirectQuery*.</span><span class="sxs-lookup"><span data-stu-id="afff9-103">Analysis Services lets you retrieve data and create reports from a tabular model by retrieving data and aggregates directly from a relational database system, using *DirectQuery mode*.</span></span> <span data-ttu-id="afff9-104">Este tópico apresenta as diferenças entre modelos de tabela padrão que só residem na memória e modelos de tabela que podem consultar uma fonte de dados relacional, e também explica como você pode criar e implantar um modelo para usar no modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-104">This topic introduces the differences between standard tabular models that reside only in memory and tabular models that can query a relational data source, and explains how you can author and deploy a model for use in DirectQuery mode.</span></span>  
  
 <span data-ttu-id="afff9-105">Seções neste tópico:</span><span class="sxs-lookup"><span data-stu-id="afff9-105">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="afff9-106">Benefícios do modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-106">Benefits of DirectQuery Mode</span></span>](#bkmk_Benefits)  
  
-   [<span data-ttu-id="afff9-107">Criando modelos para uso com o modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-107">Authoring Models for Use with DirectQuery Mode</span></span>](#bkmk_Design)  
  
    -   [<span data-ttu-id="afff9-108">Data Sources for DirectQuery Models</span><span class="sxs-lookup"><span data-stu-id="afff9-108">Data Sources for DirectQuery Models</span></span>](directquery-mode-ssas-tabular.md#bkmk_DataSources)  
  
    -   [<span data-ttu-id="afff9-109">Validação e restrições de design para o modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-109">Validation and Design Restrictions for DirectQuery Mode</span></span>](#bkmk_Validation)  
  
    -   [<span data-ttu-id="afff9-110">Compatibilidade de fórmulas para modelos DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-110">Formula Compatibility for DirectQuery Models</span></span>](#bkmk_FormulaCompat)  
  
    -   [<span data-ttu-id="afff9-111">Segurança no modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-111">Security in DirectQuery Mode</span></span>](#bkmk_Security)  
  
    -   [<span data-ttu-id="afff9-112">Segurança no modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-112">Security in DirectQuery Mode</span></span>](#bkmk_Security)  
  
-   [<span data-ttu-id="afff9-113">Propriedades DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-113">DirectQuery Properties</span></span>](#bkmk_PropertyList)  
  
-   [<span data-ttu-id="afff9-114">Tópicos relacionados e tarefas</span><span class="sxs-lookup"><span data-stu-id="afff9-114">Related Topics and Tasks</span></span>](#bkmk_related_tasks)  
  
##  <a name="benefits-of-directquery-mode"></a><a name="bkmk_Benefits"></a><span data-ttu-id="afff9-115">Benefícios do modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-115">Benefits of DirectQuery Mode</span></span>  
 <span data-ttu-id="afff9-116">Por padrão, modelos de tabela usam um cache na memória para armazenar e consultar dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-116">By default, tabular models use an in-memory cache to store and query data.</span></span> <span data-ttu-id="afff9-117">Como modelos de tabela usam dados que residem na memória, até mesmo consultas complexas podem ser inacreditavelmente rápidas.</span><span class="sxs-lookup"><span data-stu-id="afff9-117">Because tabular models use data that resides in memory, even complex queries can be incredibly fast.</span></span> <span data-ttu-id="afff9-118">Contudo, o uso de dados armazenados em cache apresenta algumas desvantagens:</span><span class="sxs-lookup"><span data-stu-id="afff9-118">However, there are some drawbacks to using cached data:</span></span>  
  
-   <span data-ttu-id="afff9-119">Os dados não são atualizados quando os dados de origem são alterados.</span><span class="sxs-lookup"><span data-stu-id="afff9-119">Data is not refreshed when the source data changes.</span></span> <span data-ttu-id="afff9-120">Processe o modelo para obter atualizações nos dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-120">You must process the model to get updates to the data.</span></span>  
  
-   <span data-ttu-id="afff9-121">Quando você desativar o computador que hospeda o modelo, o cache será salvo em disco e deverá ser reaberto quando você carregar o modelo ou abrir o arquivo do PowerPivot.</span><span class="sxs-lookup"><span data-stu-id="afff9-121">When you turn off the computer that hosts the model, the cache is saved to disk and must be reopened when you load the model or open the PowerPivot file.</span></span> <span data-ttu-id="afff9-122">As operações de salvamento e carregamento podem ser demoradas.</span><span class="sxs-lookup"><span data-stu-id="afff9-122">The save and load operations can be time-consuming.</span></span>  
  
 <span data-ttu-id="afff9-123">Em contraste, o modo DirectQuery usa dados que são armazenados em um banco de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-123">In contrast, DirectQuery mode uses data that is stored in a SQL Server database.</span></span>  <span data-ttu-id="afff9-124">Geralmente, você importa todos os dados ou uma pequena amostra deles para o cache ao criar o modelo e, quando implanta o modelo, especifica que a fonte de dados para consultas no modelo deve ser o SQL Server, e não os dados armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="afff9-124">Generally, you import all or a small sample of the data into the cache while authoring the model, and when you deploy the model, you specify that the data source for queries against the model should be SQL Server, not the cached data.</span></span> <span data-ttu-id="afff9-125">As consultas DAX nos dados são convertidas pelo [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] em instruções SQL equivalentes na fonte de dados relacional especificada.</span><span class="sxs-lookup"><span data-stu-id="afff9-125">Any DAX queries on the data are translated by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] into equivalent SQL statements against the specified relational data source.</span></span>  
  
 <span data-ttu-id="afff9-126">Há muitas vantagens em implantar um modelo usando o modo DirectQuery:</span><span class="sxs-lookup"><span data-stu-id="afff9-126">There are many advantages to deploying a model using DirectQuery mode:</span></span>  
  
-   <span data-ttu-id="afff9-127">É possível ter um modelo sobre conjuntos de dados que são muito grandes para caber na memória no servidor do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="afff9-127">It is possible to have a model over data sets that are too large to fit in memory on the Analysis Services server.</span></span>  
  
-   <span data-ttu-id="afff9-128">Os dados são certamente atualizados e não há sobrecarga de gerenciamento adicional pela manutenção de uma cópia separada dos dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-128">The data is guaranteed to be up-to-date, and there is no extra management overhead of having to maintain a separate copy of the data.</span></span> <span data-ttu-id="afff9-129">As alterações nos dados de origem subjacentes podem ser refletidas imediatamente em consultas no modelo de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-129">Changes to the underlying source data can be immediately reflected in queries against the data model.</span></span>  
  
-   <span data-ttu-id="afff9-130">O DirectQuery pode aproveitar a aceleração de consulta no lado do provedor, como a fornecida por índices columnstore xVelocity de memória otimizada.</span><span class="sxs-lookup"><span data-stu-id="afff9-130">DirectQuery can take advantage of provider-side query acceleration, such as that provided by xVelocity memory optimized column indexes.</span></span>  
  
-   <span data-ttu-id="afff9-131">Qualquer segurança imposta pelo banco de dados back-end é certamente imposta, usando a segurança em nível de linha.</span><span class="sxs-lookup"><span data-stu-id="afff9-131">Any security enforced by the back-end database is guaranteed to be enforced, using row-level security.</span></span> <span data-ttu-id="afff9-132">Em contraste, se você estiver usando dados armazenados em cache, talvez encontre dificuldade em garantir que o cache esteja protegido exatamente da mesma forma que no servidor.</span><span class="sxs-lookup"><span data-stu-id="afff9-132">In contrast, if you are using cached data, it can be difficult to ensure that the cache is secured exactly as on the server.</span></span>  
  
-   <span data-ttu-id="afff9-133">Se o modelo contiver fórmulas complexas que possam exigir várias consultas, o Analysis Services poderá executar a otimização para garantir que o plano de consulta da consulta executado no banco de dados back-end seja o mais eficiente possível.</span><span class="sxs-lookup"><span data-stu-id="afff9-133">If the model contains complex formulas that might require multiple queries, Analysis Services can perform optimization to ensure that the query plan for the query executed against the back-end database will be as efficient as possible.</span></span>  
  
##  <a name="authoring-models-for-use-with-directquery-mode"></a><a name="bkmk_Design"></a><span data-ttu-id="afff9-134">Criando modelos para uso com o modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-134">Authoring Models for Use with DirectQuery Mode</span></span>  
 <span data-ttu-id="afff9-135">Modelos de tabela são criados usando o designer de modelo do [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="afff9-135">Tabular models are authored by using the model designer [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="afff9-136">O designer cria todos os modelos na memória, o que significa que, quando você está criando modelos, se seus dados são muito grandes para ajuste na memória, você deve importar somente um subconjunto de dados para o cache usado pelo banco de dados de workspace.</span><span class="sxs-lookup"><span data-stu-id="afff9-136">The model designer creates all models in memory, which means that when you are modeling, if your data is too large to fit into memory, you should import only a subset of data into the cache used by the workspace database.</span></span>  
  
 <span data-ttu-id="afff9-137">Quando você estiver pronto para alternar para o modo DirectQuery, pode alterar uma propriedade que habilita o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-137">When you are ready to switch to DirectQuery mode, you can change a property that enables DirectQuery mode.</span></span> <span data-ttu-id="afff9-138">Para obter mais informações, consulte [habilitar modo de design do DirectQuery &#40;SSAS de tabela&#41;](enable-directquery-mode-in-ssdt.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-138">For more information, see [Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;](enable-directquery-mode-in-ssdt.md).</span></span>  
  
 <span data-ttu-id="afff9-139">Quando você fizer isso, o designer de modelo configurará automaticamente o banco de dados de workspace para execução em um modo híbrido que permite continuar trabalhando com os dados armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="afff9-139">When you do this, the model designer automatically configures the workspace database to run in a hybrid mode that lets you continue to work with the cached data.</span></span> <span data-ttu-id="afff9-140">O designer de modelo também o notificará sobre qualquer recurso em seu modelo que seja incompatível com o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-140">The model designer will also notify you of any features in your model that are incompatible with DirectQuery mode.</span></span> <span data-ttu-id="afff9-141">A seguinte lista resume os requisitos principais a serem considerados:</span><span class="sxs-lookup"><span data-stu-id="afff9-141">The following list summarizes the main requirements to keep in mind:</span></span>  
  
-   <span data-ttu-id="afff9-142">**Fontes de dados:** Os modelos do DirectQuery só podem usar dados de uma única fonte de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-142">**Data sources:** DirectQuery models can only use data from a single SQL Server data source.</span></span> <span data-ttu-id="afff9-143">Quando o modo DirectQuery for ativado para um modelo, você não poderá usar outros tipos de dados no designer de modelo, inclusive tabelas adicionadas por operações de copiar-colar.</span><span class="sxs-lookup"><span data-stu-id="afff9-143">When DirectQuery mode has been turned on for a model, you can use no other types of data in the model designer, including tables added by copy-paste operations.</span></span> <span data-ttu-id="afff9-144">Todas as outras opções de importação são desabilitadas.</span><span class="sxs-lookup"><span data-stu-id="afff9-144">All other import options are disabled.</span></span> <span data-ttu-id="afff9-145">Qualquer tabela incluída em uma consulta deve fazer parte da fonte de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-145">Any tables included in a query must be part of the SQL Server data source.</span></span> <span data-ttu-id="afff9-146">Consulte [Data Sources for DirectQuery Models](directquery-mode-ssas-tabular.md#bkmk_DataSources)para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="afff9-146">See [Data Sources for DirectQuery Models](directquery-mode-ssas-tabular.md#bkmk_DataSources)for more information.</span></span>  
  
-   <span data-ttu-id="afff9-147">**Suporte para colunas calculadas:** As colunas calculadas não têm suporte para modelos DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-147">**Support for calculated columns:** Calculated columns are not supported for DirectQuery models.</span></span> <span data-ttu-id="afff9-148">Porém, você pode criar medidas e KPIs que operam em conjuntos de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-148">However, you can create measures and KPIs, which operate over sets of data.</span></span> <span data-ttu-id="afff9-149">Consulte a seção sobre [validação](#bkmk_Validation) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="afff9-149">See the section on [validation](#bkmk_Validation) for more information.</span></span>  
  
-   <span data-ttu-id="afff9-150">**Uso limitado de funções DAX:** Algumas funções DAX não podem ser usadas no modo DirectQuery; portanto, você deve substituí-las por outras funções ou criar os valores usando colunas derivadas na fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-150">**Limited use of DAX functions:** Some DAX functions cannot be used in DirectQuery mode, so you must replace them with other functions, or create the values using derived columns in the data source.</span></span> <span data-ttu-id="afff9-151">O designer de modelo oferece validação em tempo de design para qualquer erro que ocorra quando você cria fórmulas que são incompatíveis com o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-151">The model designer provides design-time validation for any errors that arise when you create formulas that are incompatible with DirectQuery mode.</span></span> <span data-ttu-id="afff9-152">Consulte as seções a seguir para obter mais informações: [Validação](#bkmk_Validation).</span><span class="sxs-lookup"><span data-stu-id="afff9-152">See the following sections for more information: [Validation](#bkmk_Validation).</span></span>  
  
-   <span data-ttu-id="afff9-153">**Compatibilidade de fórmulas:** Em certos casos conhecidos, a mesma fórmula pode retornar resultados diferentes em um modelo em cache ou modelo híbrido comparado a um modelo DirectQuery que usa apenas o repositório de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-153">**Formula compatibility:** In certain known cases, the same formula can return different results in a cached or hybrid model compared to a DirectQuery model that uses only the relational data store.</span></span> <span data-ttu-id="afff9-154">Estas diferenças são uma consequência das diferenças semânticas entre o mecanismo analítico na memória xVelocity (VertiPaq) e o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-154">These differences are a consequence of the semantic differences between the xVelocity in-memory analytics (VertiPaq) engine and SQL Server.</span></span> <span data-ttu-id="afff9-155">Para obter mais informações sobre essas diferenças, consulte esta seção: [Compatibilidade de fórmulas](#bkmk_FormulaCompat).</span><span class="sxs-lookup"><span data-stu-id="afff9-155">For more information about these differences, see this section: [Formula Compatibility](#bkmk_FormulaCompat).</span></span>  
  
-   <span data-ttu-id="afff9-156">**Segurança:** Você pode usar métodos diferentes para proteger os modelos, dependendo de como eles são implantados.</span><span class="sxs-lookup"><span data-stu-id="afff9-156">**Security:** You can use different methods to secure models depending on how they are deployed.</span></span> <span data-ttu-id="afff9-157">Dados armazenados em cache para modelos de tabela são protegidos através do modelo de segurança da instância do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="afff9-157">Cached data for tabular models is secured by using the security model of the Analysis Services instance.</span></span> <span data-ttu-id="afff9-158">Modelos DirectQuery podem ser protegidos através de funções, mas você também pode usar segurança definida no repositório de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-158">DirectQuery models can be secured by using roles, but you can also use security defined in the relational data store.</span></span> <span data-ttu-id="afff9-159">O modelo pode ser configurado para que os usuários que abrem um relatório baseado em um modelo apenas DirectQuery podem ver apenas os dados aos quais têm permissão no SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-159">The model can be configured so that users who open a report based on a DirectQuery-only model can see only the data that is allowed to them under their permissions in SQL Server.</span></span> <span data-ttu-id="afff9-160">Consulte esta seção para obter mais informações: [Segurança](#bkmk_Security).</span><span class="sxs-lookup"><span data-stu-id="afff9-160">See this section for more information: [Security](#bkmk_Security).</span></span>  
  
-   <span data-ttu-id="afff9-161">**Restrições de cliente:** Quando um modelo estiver em modo DirectQuery, ele só poderá ser consultado usando DAX.</span><span class="sxs-lookup"><span data-stu-id="afff9-161">**Client restrictions:** When a model is in DirectQuery mode, it can only be queried by using DAX.</span></span> <span data-ttu-id="afff9-162">Você não pode usar MDX para criar consultas.</span><span class="sxs-lookup"><span data-stu-id="afff9-162">You cannot use MDX to create queries.</span></span> <span data-ttu-id="afff9-163">Isso significa que você não pode usar o Cliente Dinâmico do Excel porque o Excel usa MDX.</span><span class="sxs-lookup"><span data-stu-id="afff9-163">This means that you cannot use the Excel Pivot Client, because Excel uses MDX.</span></span>  
  
     <span data-ttu-id="afff9-164">No entanto, você pode criar consultas em um modelo DirectQuery no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] se usar uma consulta de tabela Dax como parte de uma instrução de execução XMLA, para obter mais informações, consulte [referência de sintaxe de consulta Dax] (/DAX/Dax-Syntax-Reference</span><span class="sxs-lookup"><span data-stu-id="afff9-164">However, you can create queries against a DirectQuery model in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] if you use a DAX table query as part of an XMLA Execute statement, For more information, see [DAX Query Syntax Reference](/dax/dax-syntax-reference</span></span>
  
 <span data-ttu-id="afff9-165">Quando você tiver resolvido todos os problemas de design e testado seu modelo, estará pronto para a implantação.</span><span class="sxs-lookup"><span data-stu-id="afff9-165">When you have resolved all the design issues and tested your model, you are ready for deployment.</span></span> <span data-ttu-id="afff9-166">Neste momento, você pode definir o método preferencial para responder consultas em relação ao modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-166">At this point, you can set the preferred method for answering queries against the model.</span></span> <span data-ttu-id="afff9-167">Você deseja que os usuários tenham acesso ao cache ou que sempre usem apenas a fonte de dados relacional?</span><span class="sxs-lookup"><span data-stu-id="afff9-167">Do you want users to have access to the cache, or always use only the relational data source?</span></span>  
  
 <span data-ttu-id="afff9-168">Se você implantar o modelo em um *modo híbrido*, o cache ainda estará disponível e poderá ser usado para consultas.</span><span class="sxs-lookup"><span data-stu-id="afff9-168">If you deploy the model in a *hybrid mode*, the cache is still available and can be used for queries.</span></span> <span data-ttu-id="afff9-169">Um modo híbrido oferece várias opções:</span><span class="sxs-lookup"><span data-stu-id="afff9-169">A hybrid mode provides you with many options:</span></span>  
  
-   <span data-ttu-id="afff9-170">Quando o cache e a fonte de dados relacional estão disponíveis, você pode definir o método de conexão preferencial, mas é o cliente quem controla a fonte a ser usada, usando a propriedade de cadeia de conexão do DirectQueryMode.</span><span class="sxs-lookup"><span data-stu-id="afff9-170">When both the cache and the relational data source are available, you can set the preferred connection method, but ultimately the client controls which source is used, using the DirectQueryMode connection string property.</span></span>  
  
-   <span data-ttu-id="afff9-171">Você também pode configurar partições no cache de tal um modo que a partição primária usada no modo DirectQuery nunca seja processada e sempre referencie a fonte relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-171">You can also configure partitions on the cache in such a way that the primary partition used for DirectQuery mode is never processed and must always reference the relational source.</span></span> <span data-ttu-id="afff9-172">Há muitas formas de usar partições para otimizar o design de modelo e a experiência de relatórios.</span><span class="sxs-lookup"><span data-stu-id="afff9-172">There are many ways to use partitions to optimize the model design and reporting experience.</span></span> <span data-ttu-id="afff9-173">Para obter mais informações, consulte [partições e o modo DirectQuery &#40;SSAS tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-173">For more information, see [Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span></span>  
  
-   <span data-ttu-id="afff9-174">Após a implantação do modelo, você pode alterar o método de conexão preferencial.</span><span class="sxs-lookup"><span data-stu-id="afff9-174">After the model has been deployed, you can change the preferred connection method.</span></span> <span data-ttu-id="afff9-175">Por exemplo, você pode usar um modo híbrido para testes e alternar o modelo para **apenas DirectQuery** somente depois de testar bem relatórios ou consultas que usam o modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-175">For example, you might use a hybrid mode for testing, and switch the model over to **DirectQuery only** mode only after thoroughly testing any reports or queries that use the model.</span></span> <span data-ttu-id="afff9-176">Para obter mais informações, consulte [Definir ou alterar o método de conexão preferencial para DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-176">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>  
  
###  <a name="data-sources-for-directquery-models"></a><a name="bkmk_DataSources"></a><span data-ttu-id="afff9-177">Fontes de dados para modelos DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-177">Data Sources for DirectQuery Models</span></span>  
 <span data-ttu-id="afff9-178">Assim que você alterar o ambiente de design para habilitar o modo DirectQuery, as fontes de dados para o banco de dados de workspace serão validadas para garantir que elas provenham de uma única fonte de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-178">As soon as you change the design environment to enable DirectQuery mode, the data sources for the workspace database are validated to ensure that they come from a single SQL Server data source.</span></span> <span data-ttu-id="afff9-179">Dados de outras fonte, inclusive dados copiados e colados, não são permitidos em modelos DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-179">Data from other sources, including copy-pasted data, is not allowed in DirectQuery models.</span></span>  
  
 <span data-ttu-id="afff9-180">Se você pretende usar o modelo no modo DirectQuery, verifique se todos os dados necessários para relatórios estão armazenados no banco de dados do SQL Server especificado.</span><span class="sxs-lookup"><span data-stu-id="afff9-180">If you intend to use the model in DirectQuery mode, you must ensure that all the data you need for reporting is stored in the specified SQL Server database.</span></span> <span data-ttu-id="afff9-181">Se os dados necessários para modelagem não estiverem disponíveis nesta origem, considere o uso do Integration Services ou de outras ferramentas de armazenagem de dados para importar os dados para um banco de dados do SQL Server que serve como a fonte de dados DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-181">If the data you need for modeling is not available in that source, consider use of Integration Services or other data warehousing tools to import the data into a SQL Server database that serves as the DirectQuery data source.</span></span>  
  
###  <a name="validation-and-design-restrictions-for-directquery-mode"></a><a name="bkmk_Validation"></a><span data-ttu-id="afff9-182">Validação e restrições de design para o modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-182">Validation and Design Restrictions for DirectQuery Mode</span></span>  
 <span data-ttu-id="afff9-183">Quando você criar um modelo para usar no modo DirectQuery, carregue inicialmente uma parte dos dados no cache.</span><span class="sxs-lookup"><span data-stu-id="afff9-183">When you author a model for use in DirectQuery mode, you must initially load some portion of the data into the cache.</span></span> <span data-ttu-id="afff9-184">Se os dados que você usar eventualmente forem muito grandes para caber na memória, você poderá usar a opção de **filtro & de visualização** no assistente de importação de tabela para selecionar um subconjunto de dados ou gravar um script SQL para obter os dados desejados.</span><span class="sxs-lookup"><span data-stu-id="afff9-184">If the data you will eventually use is too large to fit into memory, you can use the **Preview & Filter** option in the Table Import wizard to select a subset of data, or write a SQL script to get the data that you want.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="afff9-185">Como o modo DirectQuery não oferece suporte ao uso de colunas calculadas, se houver colunas nas quais você deseja combinar ou executar outras operações, planeje previamente e crie a definição de coluna como parte de sua consulta de importação de dados ou script.</span><span class="sxs-lookup"><span data-stu-id="afff9-185">Because DirectQuery mode does not support the use of calculated columns, if there are columns that you wish to combine or perform other operations on, you should plan ahead and create the column definition as part of your data import query or script.</span></span>  
  
 <span data-ttu-id="afff9-186">Para exibir e resolver erros de validação, abra a **Lista de Erros** no [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="afff9-186">To view and resolve validation errors, open the **Error List** in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="afff9-187">Erros críticos que impedem o uso do modo DirectQuery são exibidos na guia **erros** . Você deve corrigir esses erros antes de alterar para o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-187">Critical errors that prevent use of DirectQuery mode are displayed on the **Errors** tab. You must fix these errors before changing to DirectQuery mode.</span></span> <span data-ttu-id="afff9-188">Os erros de validação com maior dificuldade de solução costumam estar relacionados a fórmulas sem suporte no modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-188">The validation errors that are more difficult to resolve typically are related to formulas that are not supported in DirectQuery mode.</span></span> <span data-ttu-id="afff9-189">Consulte a seção, [Compatibilidade de Fórmula](#bkmk_FormulaCompat), para obter uma visão geral de erros relacionados a fórmulas e colunas calculadas.</span><span class="sxs-lookup"><span data-stu-id="afff9-189">See the section, [Formula Compatibility](#bkmk_FormulaCompat), for an overview of errors related to formulas and calculated columns.</span></span>  
  
 <span data-ttu-id="afff9-190">A seguinte lista descreve outras considerações ao criar um modelo para acesso do DirectQuery:</span><span class="sxs-lookup"><span data-stu-id="afff9-190">The following list describes other considerations to keep in mind when authoring a model for DirectQuery access:</span></span>  
  
-   <span data-ttu-id="afff9-191">Quando estiver no modo *apenas DirectQuery* , os resultados em um relatório podem variar de acordo com o contexto de segurança do usuário que está exibindo os resultados.</span><span class="sxs-lookup"><span data-stu-id="afff9-191">When in *DirectQuery only* mode, the results in a report can vary depending on the security context of the user who is viewing the results.</span></span> <span data-ttu-id="afff9-192">Você deve testar modelos com credenciais diferentes para garantir que usuários obtenham os resultados esperados.</span><span class="sxs-lookup"><span data-stu-id="afff9-192">You should test models with different credentials to ensure that users get the expected results.</span></span>  
  
-   <span data-ttu-id="afff9-193">Se você configurar um modelo para operar no modo híbrido, o que permite o uso do cache ou de dados do SQL Server, lembre-se de que clientes conectando-se a cada origem podem obter resultados diferentes, dependendo do modo especificado na cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="afff9-193">If you configure a model to operate in hybrid mode, which allows the use of either the cache or data from SQL Server, you should be aware of the possibility that clients connecting to each source might see different results, depending on the mode specified in the connection string.</span></span> <span data-ttu-id="afff9-194">Se você precisar certificar-se de que seus usuários de relatório só vejam dados do SQL Server, deverá limpar o cache ou alterar o modelo para DirectQueryOnly.</span><span class="sxs-lookup"><span data-stu-id="afff9-194">If you need to ensure that your report users see only data from SQL Server, you must clear the cache or change the model to DirectQueryOnly.</span></span>  
  
###  <a name="formula-compatibility-for-directquery-models"></a><a name="bkmk_FormulaCompat"></a><span data-ttu-id="afff9-195">Compatibilidade de fórmulas para modelos DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-195">Formula Compatibility for DirectQuery Models</span></span>  
 <span data-ttu-id="afff9-196">Alguns modelos podem conter fórmulas sem suporte no modo DirectQuery e o modelo deve ser reformulado para impedir erros de validação.</span><span class="sxs-lookup"><span data-stu-id="afff9-196">Some models might contain formulas that are not supported in DirectQuery mode, and the model must be redesigned to prevent validation errors.</span></span> <span data-ttu-id="afff9-197">Restrições em fórmulas sem suporte no modo DirectQuery incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="afff9-197">Restrictions on formulas that are supported in DirectQuery mode include the following:</span></span>  
  
-   <span data-ttu-id="afff9-198">Colunas calculadas não têm suporte em modelos de tabela com o modo DirectQuery habilitado, nem mesmo em modelos híbridos.</span><span class="sxs-lookup"><span data-stu-id="afff9-198">Calculated columns are not supported in any tabular model that has DirectQuery mode enabled, not even hybrid models.</span></span> <span data-ttu-id="afff9-199">Se você precisar de colunas calculadas para um modelo, pense na possibilidade de convertê-las em colunas derivadas usando o Transact-SQL em sua definição de importação.</span><span class="sxs-lookup"><span data-stu-id="afff9-199">If you need calculated columns for a model, consider converting them to derived columns by using Transact-SQL in your import definition.</span></span>  
  
-   <span data-ttu-id="afff9-200">Modelos DirectQuery não oferecem suporte ao uso de fórmulas DAX em medidas, que são convertidas em operações baseadas em conjunto no repositório de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-200">DirectQuery models do support the use of DAX formulas for use in measures, which are converted to set-based operations against the relational data store.</span></span> <span data-ttu-id="afff9-201">Todas as medidas que você cria usando medidas implícitas têm suporte.</span><span class="sxs-lookup"><span data-stu-id="afff9-201">All measures that you create by using implicit measures are supported.</span></span>  
  
-   <span data-ttu-id="afff9-202">Nem todas as funções têm suporte.</span><span class="sxs-lookup"><span data-stu-id="afff9-202">Not all functions are supported.</span></span> <span data-ttu-id="afff9-203">Como o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] converte todas as fórmulas DAX e definições de medida em instruções SQL ao consultar um modelo DirectQuery, qualquer fórmula contendo elementos que não podem ser convertidos no Transact-SQL disparará erros de validação no modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-203">Because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] converts all DAX formulas and measure definitions into SQL statements when querying a DirectQuery model, any formula containing elements that cannot be converted into Transact-SQL will trigger validation errors on the model.</span></span> <span data-ttu-id="afff9-204">Por exemplo, funções de inteligência de dados temporais não têm suporte.</span><span class="sxs-lookup"><span data-stu-id="afff9-204">For example, time intelligence functions are not supported.</span></span> <span data-ttu-id="afff9-205">Até mesmo funções com suporte podem apresentar outro comportamento, como as funções estatísticas.</span><span class="sxs-lookup"><span data-stu-id="afff9-205">Even functions that are supported might behave differently, such as statistical functions.</span></span> <span data-ttu-id="afff9-206">Para obter uma lista completa de problemas de compatibilidade, consulte [compatibilidade de fórmula no modo DirectQuery](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-206">For a complete list of compatibility issues, see [Formula Compatibility in DirectQuery Mode](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span></span>  
  
-   <span data-ttu-id="afff9-207">Algumas fórmulas no modelo podem ser validadas quando você alterna o modelo para o modo DirectQuery, mas retornam resultados diferentes quando executadas no cache versus armazenamento de dados relacionais.</span><span class="sxs-lookup"><span data-stu-id="afff9-207">Some formulas in the model might validate when you switch the model to DirectQuery mode, but return different results when executed against the cache vs. the relational data store.</span></span> <span data-ttu-id="afff9-208">Isso ocorre porque cálculos em relação ao uso de cache usam a semântica do mecanismo analítico na memória xVelocity (VertiPaq), que contém muitos recursos que visam emular o comportamento do Excel, enquanto consultas a dados armazenados no repositório de dados relacional necessariamente usam a semântica do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="afff9-208">This is because calculations against the cache use the semantics of the xVelocity in-memory analytics (VertiPaq) engine, which contains many features meant to emulate the behavior of Excel, whereas queries against data stored in the relational data store necessarily use the semantics of SQL Server.</span></span> <span data-ttu-id="afff9-209">Para obter uma lista de funções DAX que podem retornar resultados diferentes quando o modelo é implantado em tempo real, consulte [compatibilidade de fórmula no modo DirectQuery](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-209">For a list of DAX functions that might return different results when the model is deployed to real-time, see [Formula Compatibility in DirectQuery Mode](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span></span>  
  
###  <a name="connecting-to-directquery-models"></a><a name="bkmk_Connecting"></a><span data-ttu-id="afff9-210">Conectando a modelos DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-210">Connecting to DirectQuery Models</span></span>  
 <span data-ttu-id="afff9-211">Clientes que usam MDX como a linguagem de consulta não podem se conectar a modelos que usam o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-211">Clients that use MDX as the query language cannot connect to models that use DirectQuery mode.</span></span> <span data-ttu-id="afff9-212">Por exemplo, se você tentar criar uma consulta MDX em um modelo DirectQuery, obterá um erro indicando que o cubo não pode ser localizado, ou não foi processado.</span><span class="sxs-lookup"><span data-stu-id="afff9-212">For example, if you attempt to create an MDX query against a DirectQuery model, you will get an error indicating that the cube cannot be found, or has not been processed.</span></span> <span data-ttu-id="afff9-213">Você pode criar consultas em modelos DirectQuery usando o [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)], fórmulas DAX ou consultas XMLA.</span><span class="sxs-lookup"><span data-stu-id="afff9-213">You can create queries against DirectQuery models by using [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)], DAX formulas, or XMLA queries.</span></span> <span data-ttu-id="afff9-214">Para obter mais informações sobre como você pode executar consultas ad hoc em modelos de tabela, consulte [Tabular Model Data Access](tabular-model-data-access.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-214">For more information about how you can perform ad hoc queries against tabular models, see [Tabular Model Data Access](tabular-model-data-access.md).</span></span>  
  
 <span data-ttu-id="afff9-215">Se você estiver usando um modelo híbrido, poderá especificar se os usuários conectam-se ao cache ou usam dados do DirectQuery especificando a propriedade de cadeia de conexão, DirectQueryMode.</span><span class="sxs-lookup"><span data-stu-id="afff9-215">If you are using a hybrid model, you can specify whether users connect to the cache or use DirectQuery data by specifying the connection string property, DirectQueryMode.</span></span>  
  
###  <a name="security-in-directquery-mode"></a><a name="bkmk_Security"></a><span data-ttu-id="afff9-216">Segurança no modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-216">Security in DirectQuery Mode</span></span>  
 <span data-ttu-id="afff9-217">Durante a criação de modelos, você especifica as permissões que são usadas para recuperar os dados de origem.</span><span class="sxs-lookup"><span data-stu-id="afff9-217">During model authoring, you specify the permissions that are used to retrieve the source data.</span></span> <span data-ttu-id="afff9-218">Isso geralmente será suas próprias credenciais ou uma conta usada para desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="afff9-218">This will often be your own credentials, or an account used for development.</span></span> <span data-ttu-id="afff9-219">Porém, quando você alterna o modelo para usar o modo DirectQuery, o contexto de segurança é mais complexo:</span><span class="sxs-lookup"><span data-stu-id="afff9-219">However, when you switch the model to use DirectQuery mode, the security context is more complex:</span></span>  
  
-   <span data-ttu-id="afff9-220">Considere se os usuários têm o nível necessário de acesso aos dados no repositório de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-220">Consider whether users have the necessary level of access to the data in the relational data store.</span></span>  
  
-   <span data-ttu-id="afff9-221">Os usuários que exibem o mesmo modelo ou relatório podem ver dados diferentes, dependendo do contexto de segurança do usuário.</span><span class="sxs-lookup"><span data-stu-id="afff9-221">Users who view the same model or report might see different data, depending on the user's security context.</span></span>  
  
-   <span data-ttu-id="afff9-222">Se o cache de modelo foi preservado, o cache será protegido usando o modelo de segurança (funções) do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="afff9-222">If the model cache has been preserved, the cache is secured using the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] security model (roles).</span></span> <span data-ttu-id="afff9-223">O cache pode conter dados que o designer de modelo tem o privilégio de visualizar, mas não o usuário.</span><span class="sxs-lookup"><span data-stu-id="afff9-223">The cache might contain data that the model designer is privileged to see but the user is not.</span></span> <span data-ttu-id="afff9-224">Designers de modelo ou relatório devem limpar o cache ou proteger esses dados controlando o acesso por meio de funções.</span><span class="sxs-lookup"><span data-stu-id="afff9-224">Model and report designers should either clear the cache, or secure this data by controlling access via roles.</span></span>  
  
-   <span data-ttu-id="afff9-225">Um modelo que responde consultas do cache não pode representar o usuário atual ao conectar-se à fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-225">A model that answers queries from the cache cannot impersonate the current user when connecting to the data source.</span></span> <span data-ttu-id="afff9-226">Se você desejar representar o usuário atual ao conectar-se à fonte de dados, deverá usar o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-226">If you want to impersonate the current user when connecting to the data source, you must use DirectQuery mode.</span></span>  
  
-   <span data-ttu-id="afff9-227">Se seu modelo de relatório exige segurança, você tem duas opções: pode usar funções [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ou definir permissões em nível de linha na fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-227">If your report model requires security, you have two options: you can either use [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] roles, or you can set row-level permissions on the data source.</span></span> <span data-ttu-id="afff9-228">A segurança na fonte de dados relacional é usada para controlar o acesso a tabelas e a segurança em nível de coluna não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="afff9-228">Security in the relational data source is used to control access to tables, and column-level security is not supported.</span></span> <span data-ttu-id="afff9-229">Portanto, se os usuários em uma região não tiverem permissão para exibir valores de vendas de regiões diferentes, um relatório que inclua uma medida baseada na tabela Vendas retornará espaços em branco ou um erro.</span><span class="sxs-lookup"><span data-stu-id="afff9-229">Therefore, if users in one region do not have permission to view sales figures from different regions, a report that includes a measure based on the Sales table would return blanks or an error.</span></span>  
  
 <span data-ttu-id="afff9-230">A propriedade das configurações de representação especifica as credenciais usadas quando você está se conectando a um modelo usando DirectQuery, para um modelo somente DirectQuery ou para um modelo híbrido que responde consultas usando DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-230">The impersonation settings property specifies the credentials used when you are connecting to a model using DirectQuery, either for a DirectQuery only model or for a hybrid model answering queries using DirectQuery.</span></span> <span data-ttu-id="afff9-231">A propriedade tem os valores seguintes:</span><span class="sxs-lookup"><span data-stu-id="afff9-231">The property has the following values:</span></span>  
  
 <span data-ttu-id="afff9-232">**Default**</span><span class="sxs-lookup"><span data-stu-id="afff9-232">**Default**</span></span>  
 <span data-ttu-id="afff9-233">Usa as credenciais especificadas no assistente de importação para conectar-se à fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-233">Uses the credentials specified in the import wizard to connect to the data source.</span></span> <span data-ttu-id="afff9-234">Isso pode ser um usuário específico do Windows ou uma conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="afff9-234">This can be a specific Windows user or the service account.</span></span>  
  
 `ImpersonateCurrentUser`  
 <span data-ttu-id="afff9-235">Usa as credenciais do usuário atual para conectar-se à fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="afff9-235">Uses the credentials of the current user to connect to the data source.</span></span>  
  
 <span data-ttu-id="afff9-236">Para obter informações sobre como definir essas propriedades, consulte [cenários de implantação do DirectQuery &#40;SSAS de tabela&#41;](../directquery-deployment-scenarios-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-236">For information on how to set these properties, see [DirectQuery Deployment Scenarios &#40;SSAS Tabular&#41;](../directquery-deployment-scenarios-ssas-tabular.md).</span></span>  
  
##  <a name="directquery-properties"></a><a name="bkmk_PropertyList"></a><span data-ttu-id="afff9-237">Propriedades do DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-237">DirectQuery Properties</span></span>  
 <span data-ttu-id="afff9-238">A tabela a seguir lista as propriedades que você pode definir no [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]e no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]para habilitar o DirectQuery e controlar a origem de dados usada em consultas no modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-238">The following table lists the properties that you can set in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], and in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], to enable DirectQuery and to control the source of data used for queries against the model.</span></span>  
  
|<span data-ttu-id="afff9-239">Nome da propriedade</span><span class="sxs-lookup"><span data-stu-id="afff9-239">Property name</span></span>|<span data-ttu-id="afff9-240">Descrição</span><span class="sxs-lookup"><span data-stu-id="afff9-240">Description</span></span>|  
|-------------------|-----------------|  
|<span data-ttu-id="afff9-241">**Propriedade DirectQueryMode**</span><span class="sxs-lookup"><span data-stu-id="afff9-241">**DirectQueryMode property**</span></span>|<span data-ttu-id="afff9-242">Esta propriedade habilita o uso do modo DirectQuery no designer de modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-242">This property enables use of DirectQuery mode in the model designer.</span></span> <span data-ttu-id="afff9-243">Você deve definir esta propriedade como `On` para alterar qualquer outra propriedade DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-243">You must set this property to `On` to change any of the other DirectQuery properties.</span></span><br /><br /> <span data-ttu-id="afff9-244">Para obter mais informações, consulte [habilitar modo de design do DirectQuery &#40;SSAS de tabela&#41;](enable-directquery-mode-in-ssdt.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-244">For more information, see [Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;](enable-directquery-mode-in-ssdt.md).</span></span>|  
|<span data-ttu-id="afff9-245">**Propriedade QueryMode**</span><span class="sxs-lookup"><span data-stu-id="afff9-245">**QueryMode property**</span></span>|<span data-ttu-id="afff9-246">Esta propriedade especifica o método de consulta padrão para um modelo DirectQuery. Você define esta propriedade no designer de modelo quando implanta o modelo, mas pode substituí-la posteriormente.</span><span class="sxs-lookup"><span data-stu-id="afff9-246">This property specifies the default query method for a DirectQuery model, You set this property in the model designer when you deploy the model, but you can override it later.</span></span> <span data-ttu-id="afff9-247">A propriedade tem estes valores:</span><span class="sxs-lookup"><span data-stu-id="afff9-247">The property has these values:</span></span><br /><br /> <span data-ttu-id="afff9-248">**DirectQuery** -essa configuração especifica que todas as consultas ao modelo devem usar somente a fonte de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-248">**DirectQuery** - This setting specifies all queries to the model should use the relational data source only.</span></span><br /><br /> <span data-ttu-id="afff9-249">**DirectQuery com na memória** – Essa configuração especifica, por padrão, que as consultas devem ser respondidas usando a origem relacional, a menos que especificado em contrário na cadeia de conexão do cliente.</span><span class="sxs-lookup"><span data-stu-id="afff9-249">**DirectQuery with In-Memory** - This setting specifies, by default, queries should be answered by using the relational source, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="afff9-250">**Na Memória** – Esta configuração especifica que as consultas devem ser respondidas usando somente o cache.</span><span class="sxs-lookup"><span data-stu-id="afff9-250">**In-Memory** - This setting specifies  queries should be answered by using the cache only.</span></span><br /><br /> <span data-ttu-id="afff9-251">**Na Memória com DirectQuery** – Esta configuração especifica, por padrão.</span><span class="sxs-lookup"><span data-stu-id="afff9-251">**In-Memory with DirectQuery** - This setting specifies, by default.</span></span> <span data-ttu-id="afff9-252">que as consultas devem ser respondidas usando o cache, a menos que especificado em contrário na cadeia de conexão do cliente.</span><span class="sxs-lookup"><span data-stu-id="afff9-252">queries should be answered by using the cache, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <br /><br /> <span data-ttu-id="afff9-253">Para obter mais informações, consulte [Definir ou alterar o método de conexão preferencial para DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-253">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>|  
|<span data-ttu-id="afff9-254">**Propriedade DirectQueryMode**</span><span class="sxs-lookup"><span data-stu-id="afff9-254">**DirectQueryMode property**</span></span>|<span data-ttu-id="afff9-255">Depois que o modelo for implantado, você poderá alterar a fonte de dados de consulta preferencial para um modelo DirectQuery, alterando esta propriedade no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]</span><span class="sxs-lookup"><span data-stu-id="afff9-255">After the model has been deployed, you can change the preferred query data source for a DirectQuery model, by changing this property in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]</span></span><br /><br /> <span data-ttu-id="afff9-256">Como a propriedade anterior, esta propriedade especifica a fonte de dados padrão para o modelo e tem estes valores:</span><span class="sxs-lookup"><span data-stu-id="afff9-256">Like the previous property, this property specifies the default data source for the model, and has these values:</span></span><br /><br /> <span data-ttu-id="afff9-257">**InMemory**: As consultas só podem usar o cache.</span><span class="sxs-lookup"><span data-stu-id="afff9-257">**InMemory**: Queries can use the cache only.</span></span><br /><br /> <span data-ttu-id="afff9-258">**DirectQuerywithInMemory**: As consultas usam a fonte de dados relacional por padrão, a menos que especificado em contrário na cadeia de conexão do cliente.</span><span class="sxs-lookup"><span data-stu-id="afff9-258">**DirectQuerywithInMemory**: Queries use the relational data source by default, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="afff9-259">**InMemorywithDirectQuery**: As consultas usam o cache por padrão, a menos que especificado em contrário na cadeia de conexão do cliente.</span><span class="sxs-lookup"><span data-stu-id="afff9-259">**InMemorywithDirectQuery**: Queries use the cache by default, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="afff9-260">(**DirectQuery**: as consultas usam somente a fonte de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="afff9-260">(**DirectQuery**: Queries use the relational data source only.</span></span><br /><br /> <br /><br /> <span data-ttu-id="afff9-261">Para obter mais informações, consulte [Definir ou alterar o método de conexão preferencial para DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-261">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>|  
|<span data-ttu-id="afff9-262">**Propriedade Impersonation Settings**</span><span class="sxs-lookup"><span data-stu-id="afff9-262">**Impersonation Settings property**</span></span>|<span data-ttu-id="afff9-263">Esta propriedade define as credenciais usadas na conexão à fonte de dados do SQL Server no momento de consulta.</span><span class="sxs-lookup"><span data-stu-id="afff9-263">This property defines the credentials used to connect to the SQL Server data source at query time.</span></span> <span data-ttu-id="afff9-264">Você pode definir esta propriedade no designer de modelo e alterar o valor posteriormente, depois da implantação do modelo.</span><span class="sxs-lookup"><span data-stu-id="afff9-264">You can set this property in the model designer, and you can change the value later, after the model has been deployed.</span></span><br /><br /> <span data-ttu-id="afff9-265">Observe que estas credenciais são usadas apenas para responder consultas no repositório de dados relacional; elas não são iguais às credenciais usadas para processar o cache de um modelo híbrido.</span><span class="sxs-lookup"><span data-stu-id="afff9-265">Note that these credentials are used only for answering queries against the relational data store; they are not the same as the credentials used for processing the cache of a hybrid model.</span></span><br /><br /> <span data-ttu-id="afff9-266">A representação não pode ser usada quando o modelo é usado apenas na memória.</span><span class="sxs-lookup"><span data-stu-id="afff9-266">Impersonation cannot be used when the model is used within memory only.</span></span> <span data-ttu-id="afff9-267">A configuração `ImpersonateCurrentUser` é inválida, a menos que o modelo esteja usando o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-267">The setting `ImpersonateCurrentUser`, is invalid unless the model is using DirectQuery mode.</span></span>|  
  
 <span data-ttu-id="afff9-268">Além disso, se seu modelo incluir partições, escolha uma partição para usar como a fonte de consultas no modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-268">Additionally, if your model includes partitions, you must choose one partition to use as the source for queries in DirectQuery mode.</span></span> <span data-ttu-id="afff9-269">Para obter mais informações, consulte [partições e o modo DirectQuery &#40;SSAS tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="afff9-269">For more information, see [Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span></span>  
  
##  <a name="related-topics-and-tasks"></a><a name="bkmk_related_tasks"></a><span data-ttu-id="afff9-270">Tópicos e tarefas relacionados</span><span class="sxs-lookup"><span data-stu-id="afff9-270">Related Topics and Tasks</span></span>  
  
|<span data-ttu-id="afff9-271">Tópico</span><span class="sxs-lookup"><span data-stu-id="afff9-271">Topic</span></span>|<span data-ttu-id="afff9-272">Descrição</span><span class="sxs-lookup"><span data-stu-id="afff9-272">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="afff9-273">Partições e o modo DirectQuery &#40;SSAS de tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="afff9-273">Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;</span></span>](define-partitions-in-directquery-models-ssas-tabular.md)|<span data-ttu-id="afff9-274">Descreve como as partições são usadas em modelos configurados para o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-274">Describes how partitions are used in models configured for DirectQuery mode.</span></span>|  
|[<span data-ttu-id="afff9-275">Compatibilidade de fórmulas DAX no modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-275">DAX Formula Compatibility in DirectQuery Mode</span></span>](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md)|<span data-ttu-id="afff9-276">Descreve restrições e requisitos de compatibilidade nas fórmulas que você pode usar em modelos configuradas para o modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-276">Describes restrictions and compatibility requirements on the formulas that you can use in models configured for DirectQuery mode.</span></span>|  
|[<span data-ttu-id="afff9-277">Habilitar modo de design do DirectQuery &#40;SSAS de tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="afff9-277">Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;</span></span>](enable-directquery-mode-in-ssdt.md)|<span data-ttu-id="afff9-278">Descreve como você pode alterar o ambiente de tempo de design de modo que dê suporte ao uso do modo DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-278">Describes how you can change the design-time environment so that it supports using DirectQuery mode</span></span>|  
|[<span data-ttu-id="afff9-279">Alterar a partição DirectQuery &#40;SSAS de tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="afff9-279">Change the DirectQuery Partition &#40;SSAS Tabular&#41;</span></span>](../change-the-directquery-partition-ssas-tabular.md)|<span data-ttu-id="afff9-280">Descreve como alterar a partição do DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-280">Describes how to change the DirectQuery partition.</span></span>|  
|[<span data-ttu-id="afff9-281">Definir ou alterar o método de conexão preferencial para DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-281">Set or Change the Preferred Connection Method for DirectQuery</span></span>](../set-or-change-the-preferred-connection-method-for-directquery.md)|<span data-ttu-id="afff9-282">Descreve como definir ou alterar o método de conexão para modelos configurados para DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-282">Describes how to set or change the connection method for models configured for DirectQuery.</span></span>|  
|[<span data-ttu-id="afff9-283">Cenários de implantação do DirectQuery &#40;SSAS de tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="afff9-283">DirectQuery Deployment Scenarios &#40;SSAS Tabular&#41;</span></span>](../directquery-deployment-scenarios-ssas-tabular.md)|<span data-ttu-id="afff9-284">Descreve cenários de implantação do DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="afff9-284">Describes DirectQuery deployment scenarios.</span></span>|  
|[<span data-ttu-id="afff9-285">Configure o Acesso Na Memória ou DirectQuery para um banco de dados modelo de tabela</span><span class="sxs-lookup"><span data-stu-id="afff9-285">Configure In-Memory or DirectQuery Access for a Tabular Model Database</span></span>](enable-directquery-mode-in-ssms.md)|<span data-ttu-id="afff9-286">Saiba mais sobre as configurações do DirectQuery</span><span class="sxs-lookup"><span data-stu-id="afff9-286">Understand DirectQuery configurations</span></span>|  
|[<span data-ttu-id="afff9-287">Limpar os caches do Analysis Services</span><span class="sxs-lookup"><span data-stu-id="afff9-287">Clear the Analysis Services Caches</span></span>](../instances/clear-the-analysis-services-caches.md)|<span data-ttu-id="afff9-288">Limpe o cache do modelo de tabela</span><span class="sxs-lookup"><span data-stu-id="afff9-288">Clear the cache of the tabular model</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="afff9-289">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="afff9-289">See Also</span></span>  
 <span data-ttu-id="afff9-290">[Partições &#40;SSAS de tabela&#41;](partitions-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="afff9-290">[Partitions &#40;SSAS Tabular&#41;](partitions-ssas-tabular.md) </span></span>  
 <span data-ttu-id="afff9-291">[Projetos de modelo de tabela &#40;SSAS de tabela&#41;](tabular-model-projects-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="afff9-291">[Tabular Model Projects &#40;SSAS Tabular&#41;](tabular-model-projects-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="afff9-292">Analisar no Excel &#40;SSAS de Tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="afff9-292">Analyze in Excel &#40;SSAS Tabular&#41;</span></span>](analyze-in-excel-ssas-tabular.md)  
