---
title: Colunas calculadas (SSAS tabular) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e1011278-556d-4984-b01d-a37f8a33b304
author: minewiskan
ms.author: owend
ms.openlocfilehash: 5d77b36ee3327d1b9e0d31ac97e5dbe135093a63
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87678292"
---
# <a name="calculated-columns-ssas-tabular"></a><span data-ttu-id="3c063-102">Colunas calculadas (SSAS tabular)</span><span class="sxs-lookup"><span data-stu-id="3c063-102">Calculated Columns (SSAS Tabular)</span></span>
  <span data-ttu-id="3c063-103">Colunas calculadas, em modelos tabulares, permitem que você adicione novos dados a seu modelo.</span><span class="sxs-lookup"><span data-stu-id="3c063-103">Calculated columns, in tabular models, allow you to add new data to your model.</span></span> <span data-ttu-id="3c063-104">Em vez de colar ou importar valores para a coluna, você cria uma fórmula DAX que define os valores de nível de linha da coluna.</span><span class="sxs-lookup"><span data-stu-id="3c063-104">Instead of pasting or importing values into the column, you create a DAX formula that defines the column's row level values.</span></span> <span data-ttu-id="3c063-105">A coluna calculada pode então ser usada em um relatório, Tabela Dinâmica ou Gráfico Dinâmico como você faria com qualquer outra coluna.</span><span class="sxs-lookup"><span data-stu-id="3c063-105">The calculated column can then be used in a report, PivotTable, or PivotChart as would any other column.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3c063-106">As colunas calculadas não têm suporte para modelos tabulares no modo DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="3c063-106">Calculated columns are not supported for tabular models in DirectQuery mode.</span></span> <span data-ttu-id="3c063-107">Para obter mais informações, consulte [Modo DirectQuery &#40;SSAS Tabular&#41;](directquery-mode-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="3c063-107">For more information, see [DirectQuery Mode &#40;SSAS Tabular&#41;](directquery-mode-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="3c063-108">Seções neste tópico:</span><span class="sxs-lookup"><span data-stu-id="3c063-108">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="3c063-109">Benefícios</span><span class="sxs-lookup"><span data-stu-id="3c063-109">Benefits</span></span>](#bkmk_understanding)  
  
-   [<span data-ttu-id="3c063-110">Nomeando uma coluna calculada</span><span class="sxs-lookup"><span data-stu-id="3c063-110">Naming a Calculated Column</span></span>](#bkmk_naming)  
  
-   [<span data-ttu-id="3c063-111">Desempenho de colunas calculadas</span><span class="sxs-lookup"><span data-stu-id="3c063-111">Performance of Calculated Columns</span></span>](#bkmk_perf)  
  
-   [<span data-ttu-id="3c063-112">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="3c063-112">Related Tasks</span></span>](#bkmk_rel_tasks)  
  
##  <a name="benefits"></a><a name="bkmk_understanding"></a> <span data-ttu-id="3c063-113">Benefícios</span><span class="sxs-lookup"><span data-stu-id="3c063-113">Benefits</span></span>  
 <span data-ttu-id="3c063-114">As fórmulas nas colunas calculadas são bem semelhantes às fórmulas do Excel.</span><span class="sxs-lookup"><span data-stu-id="3c063-114">Formulas in calculated columns are much like formulas in Excel.</span></span> <span data-ttu-id="3c063-115">No entanto, diferentemente do Excel, não é possível criar fórmulas diferentes para linhas distintas em uma tabela; em vez disso, a fórmula DAX é aplicada automaticamente a toda a coluna.</span><span class="sxs-lookup"><span data-stu-id="3c063-115">Unlike Excel, however, you cannot create different formulas for different rows in a table; instead, the DAX formula is automatically applied to the entire column.</span></span>  
  
 <span data-ttu-id="3c063-116">Quando uma coluna contém uma fórmula, o valor é computado para cada linha.</span><span class="sxs-lookup"><span data-stu-id="3c063-116">When a column contains a formula, the value is computed for each row.</span></span> <span data-ttu-id="3c063-117">Os resultados são calculados para a coluna quando você insere uma fórmula válida.</span><span class="sxs-lookup"><span data-stu-id="3c063-117">The results are calculated for the column when you enter a valid formula.</span></span> <span data-ttu-id="3c063-118">Em seguida, os valores de coluna são recalculados conforme necessário, como quando os dados subjacentes são atualizados.</span><span class="sxs-lookup"><span data-stu-id="3c063-118">Column values are then recalculated as necessary, such as when the underlying data is refreshed.</span></span>  
  
 <span data-ttu-id="3c063-119">É possível criar medidas ou colunas calculadas baseadas em medidas e em outras colunas calculadas.</span><span class="sxs-lookup"><span data-stu-id="3c063-119">You can create calculated columns that are based on measures and other calculated columns.</span></span> <span data-ttu-id="3c063-120">Por exemplo, talvez você crie uma coluna calculada para extrair um número de uma cadeia de caracteres de texto e, em seguida, usar esse número em outra coluna calculada.</span><span class="sxs-lookup"><span data-stu-id="3c063-120">For example, you might create one calculated column to extract a number from a string of text, and then use that number in another calculated column.</span></span>  
  
 <span data-ttu-id="3c063-121">Uma coluna calculada se baseia nos dados que você já tem em uma tabela existente, ou criou usando uma fórmula DAX.</span><span class="sxs-lookup"><span data-stu-id="3c063-121">A calculated column is based on data that you already have in an existing table, or created by using a DAX formula.</span></span> <span data-ttu-id="3c063-122">Por exemplo, você pode querer concatenar valores, realizar adição, extrair subcadeias de caracteres ou comparar os valores em outros campos.</span><span class="sxs-lookup"><span data-stu-id="3c063-122">For example, you might choose to concatenate values, perform addition, extract substrings, or compare the values in other fields.</span></span> <span data-ttu-id="3c063-123">Para adicionar uma coluna calculada, você deve ter pelo menos uma tabela em seu modelo.</span><span class="sxs-lookup"><span data-stu-id="3c063-123">To add a calculated column, you must have at least one table in your model.</span></span>  
  
 <span data-ttu-id="3c063-124">Este exemplo demonstra uma fórmula simples em uma coluna calculada:</span><span class="sxs-lookup"><span data-stu-id="3c063-124">This example demonstrates a simple formula in a calculated column:</span></span>  
  
```  
=EOMONTH([StartDate],0])  
  
```  
  
 <span data-ttu-id="3c063-125">Esta fórmula extrai o mês da coluna StartDate.</span><span class="sxs-lookup"><span data-stu-id="3c063-125">This formula extracts the month from the StartDate column.</span></span> <span data-ttu-id="3c063-126">Em seguida, ela calcula o final do valor de mês para cada linha da tabela.</span><span class="sxs-lookup"><span data-stu-id="3c063-126">It then calculates the end of the month value for each row in the table.</span></span> <span data-ttu-id="3c063-127">O segundo parâmetro especifica o número de meses antes ou depois do mês em StartDate; neste caso, 0 significa o mesmo mês.</span><span class="sxs-lookup"><span data-stu-id="3c063-127">The second parameter specifies the number of months before or after the month in StartDate; in this case, 0 means the same month.</span></span> <span data-ttu-id="3c063-128">Por exemplo, se o valor na coluna StartDate for 01/06/2001, o valor na coluna calculada será 30/06/2001.</span><span class="sxs-lookup"><span data-stu-id="3c063-128">For example, if the value in the StartDate column is 6/1/2001, the value in the calculated column will be 6/30/2001.</span></span>  
  
##  <a name="naming-a-calculated-column"></a><a name="bkmk_naming"></a><span data-ttu-id="3c063-129">Nomeando uma coluna calculada</span><span class="sxs-lookup"><span data-stu-id="3c063-129">Naming a Calculated Column</span></span>  
 <span data-ttu-id="3c063-130">Por padrão, novas colunas calculadas são adicionadas à direita de outras colunas em uma tabela, e a coluna recebe automaticamente o nome padrão **CalculatedColumn1**, **CalculatedColumn2**e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="3c063-130">By default, new calculated columns are added to the right of other columns in a table, and the column is automatically assigned the default name of **CalculatedColumn1**, **CalculatedColumn2**, and so forth.</span></span> <span data-ttu-id="3c063-131">Você também pode clicar com o botão direito em uma coluna e clicar em Inserir Coluna para criar uma nova coluna entre duas colunas existentes.</span><span class="sxs-lookup"><span data-stu-id="3c063-131">You can also right click a column, and then click Insert Column to create a new column between two existing columns.</span></span> <span data-ttu-id="3c063-132">Você pode reorganizar as colunas dentro da mesma tabela clicando e arrastando, e pode renomear as colunas depois que elas forem criadas; porém, você deve estar atento às seguintes restrições sobre alterações para colunas calculadas:</span><span class="sxs-lookup"><span data-stu-id="3c063-132">You can rearrange columns within the same table by clicking and dragging, and you can rename columns after they are created; however, you should be aware of the following restrictions on changes to calculated columns:</span></span>  
  
-   <span data-ttu-id="3c063-133">Cada nome de coluna deve ser exclusivo dentro de uma tabela.</span><span class="sxs-lookup"><span data-stu-id="3c063-133">Each column name must be unique within a table.</span></span>  
  
-   <span data-ttu-id="3c063-134">Evite nomes que já foram usados para medidas dentro do mesmo modelo.</span><span class="sxs-lookup"><span data-stu-id="3c063-134">Avoid names that have already been used for measures within the same model.</span></span> <span data-ttu-id="3c063-135">Embora seja possível que uma medida e uma coluna calculada tenham o mesmo nome, se os nomes não forem exclusivos você poderá obter erros de cálculo.</span><span class="sxs-lookup"><span data-stu-id="3c063-135">Although it is possible for a measure and a calculated column to have the same name, if names are not unique you can get calculation errors.</span></span> <span data-ttu-id="3c063-136">Para evitar invocar uma medida acidentalmente, ao fazer referência a uma coluna use sempre uma referência de coluna totalmente qualificada.</span><span class="sxs-lookup"><span data-stu-id="3c063-136">To avoid accidentally invoking a measure, when referring to a column always use a fully qualified column reference.</span></span>  
  
-   <span data-ttu-id="3c063-137">Quando você renomeia uma coluna calculada, todas as fórmulas que se baseiam na coluna devem ser atualizadas manualmente.</span><span class="sxs-lookup"><span data-stu-id="3c063-137">When you rename a calculated column, any formulas that rely on the column must be updated manually.</span></span> <span data-ttu-id="3c063-138">A menos que você esteja no modo de atualização manual, a atualização dos resultados das fórmulas acontece automaticamente.</span><span class="sxs-lookup"><span data-stu-id="3c063-138">Unless you are in manual update mode, updating the results of formulas takes place automatically.</span></span> <span data-ttu-id="3c063-139">No entanto, essa operação pode demorar um pouco.</span><span class="sxs-lookup"><span data-stu-id="3c063-139">However, this operation might take some time.</span></span>  
  
-   <span data-ttu-id="3c063-140">Há alguns caracteres que não podem ser usados nos nomes de colunas.</span><span class="sxs-lookup"><span data-stu-id="3c063-140">There are some characters that cannot be used within the names of columns.</span></span> <span data-ttu-id="3c063-141">Para obter mais informações, consulte "Requisitos de nomenclatura" em [DAX Syntax Specification for PowerPivot](/dax/dax-syntax-reference).</span><span class="sxs-lookup"><span data-stu-id="3c063-141">For more information, see "Naming Requirements" in [DAX Syntax Specification for PowerPivot](/dax/dax-syntax-reference).</span></span>  
  
##  <a name="performance-of-calculated-columns"></a><a name="bkmk_perf"></a><span data-ttu-id="3c063-142">Desempenho de colunas calculadas</span><span class="sxs-lookup"><span data-stu-id="3c063-142">Performance of Calculated Columns</span></span>  
 <span data-ttu-id="3c063-143">A fórmula de uma coluna calculada pode consumir mais recursos do que a fórmula usada para uma medida.</span><span class="sxs-lookup"><span data-stu-id="3c063-143">The formula for a calculated column can be more resource-intensive than the formula used for a measure.</span></span> <span data-ttu-id="3c063-144">Um motivo é que o resultado para uma coluna calculada sempre é calculado para cada linha de uma tabela, enquanto uma medida é calculada apenas para as células definidas pelo filtro usado em um relatório, Tabela Dinâmica ou Gráfico Dinâmico.</span><span class="sxs-lookup"><span data-stu-id="3c063-144">One reason is that the result for a calculated column is always calculated for each row in a table, whereas a measure is only calculated for the cells defined by the filter used in a report, PivotTable, or PivotChart.</span></span> <span data-ttu-id="3c063-145">Por exemplo, uma tabela com um milhão de linhas sempre terá uma coluna calculada com um milhão de resultados, e um efeito correspondente em desempenho.</span><span class="sxs-lookup"><span data-stu-id="3c063-145">For example, a table with a million rows will always have a calculated column with a million results, and a corresponding effect on performance.</span></span> <span data-ttu-id="3c063-146">No entanto, uma Tabela Dinâmica normalmente filtra os dados, aplicando títulos de linha e coluna; por isso, uma medida só é calculada para o subconjunto de dados em cada célula da Tabela Dinâmica.</span><span class="sxs-lookup"><span data-stu-id="3c063-146">However, a PivotTable generally filters data by applying row and column headings; therefore, a measure is calculated only for the subset of data in each cell of the PivotTable.</span></span>  
  
 <span data-ttu-id="3c063-147">Uma fórmula tem dependências nos objetos referenciados na fórmula, como outras colunas ou expressões que avaliam valores.</span><span class="sxs-lookup"><span data-stu-id="3c063-147">A formula has dependencies on the objects that are referenced in the formula, such as other columns or expressions that evaluate values.</span></span> <span data-ttu-id="3c063-148">Por exemplo, uma coluna calculada baseada em outra coluna, ou um cálculo que contenha uma expressão com uma referência de coluna, não pode ser avaliada até que a outra coluna seja avaliada.</span><span class="sxs-lookup"><span data-stu-id="3c063-148">For example, a calculated column that is based on another column, or a calculation that contains an expression with a column reference, cannot be evaluated until the other column is evaluated.</span></span> <span data-ttu-id="3c063-149">Por padrão, a atualização automática permanece habilitada em pastas de trabalho; por isso, todas essas dependências podem afetar o desempenho enquanto os valores são atualizados e as fórmulas, atualizadas.</span><span class="sxs-lookup"><span data-stu-id="3c063-149">By default, automatic refresh is enabled in workbooks; therefore, all such dependencies can affect performance while values are updated and formulas refreshed.</span></span>  
  
 <span data-ttu-id="3c063-150">Para evitar problemas de desempenho ao criar colunas calculadas, siga estas diretrizes:</span><span class="sxs-lookup"><span data-stu-id="3c063-150">To avoid performance issues when you create calculated columns, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="3c063-151">Em vez de criar uma única fórmula que contém muitas dependências complexas, crie as fórmulas em etapas, salvando os resultados em colunas, de forma que possa validar os resultados e avaliar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="3c063-151">Rather than create a single formula that contains many complex dependencies, create the formulas in steps, with results saved to columns, so that you can validate the results and assess performance.</span></span>  
  
-   <span data-ttu-id="3c063-152">A modificação de dados muitas vezes exigirá que colunas calculadas sejam recalculadas.</span><span class="sxs-lookup"><span data-stu-id="3c063-152">Modification of data will often require that calculated columns be recalculated.</span></span> <span data-ttu-id="3c063-153">É possível impedir isso, definindo-se o modo de recálculo como manual; no entanto, se algum valor na coluna calculada estiver incorreto, a coluna permanecerá esmaecida até você atualizar e recalcular os dados.</span><span class="sxs-lookup"><span data-stu-id="3c063-153">You can prevent this by setting the recalculation mode to manual; however, if any values in the calculated column are incorrect the column will be grayed out until you refresh and recalculate the data.</span></span>  
  
-   <span data-ttu-id="3c063-154">Se você alterar ou excluir relações entre tabelas, as fórmulas que usam colunas nessas tabelas se tornarão inválidas.</span><span class="sxs-lookup"><span data-stu-id="3c063-154">If you change or delete relationships between tables, formulas that use columns in those tables will become invalid.</span></span>  
  
-   <span data-ttu-id="3c063-155">Se você criar uma fórmula contendo uma dependência circular ou autorreferenciada, ocorrerá um erro.</span><span class="sxs-lookup"><span data-stu-id="3c063-155">If you create a formula that contains a circular or self-referencing dependency, an error will occur.</span></span>  
  
##  <a name="related-tasks"></a><a name="bkmk_rel_tasks"></a> <span data-ttu-id="3c063-156">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="3c063-156">Related Tasks</span></span>  
  
|<span data-ttu-id="3c063-157">Tópico</span><span class="sxs-lookup"><span data-stu-id="3c063-157">Topic</span></span>|<span data-ttu-id="3c063-158">Descrição</span><span class="sxs-lookup"><span data-stu-id="3c063-158">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="3c063-159">Criar uma coluna calculada &#40;SSAS Tabular&#41;</span><span class="sxs-lookup"><span data-stu-id="3c063-159">Create a Calculated Column &#40;SSAS Tabular&#41;</span></span>](ssas-calculated-columns-create-a-calculated-column.md)|<span data-ttu-id="3c063-160">As tarefas neste tópico descrevem como adicionar uma nova coluna calculada a uma tabela.</span><span class="sxs-lookup"><span data-stu-id="3c063-160">Tasks in this topic describe how to add a new calculated column to a table.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="3c063-161">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="3c063-161">See Also</span></span>  
 <span data-ttu-id="3c063-162">[Tabelas e colunas &#40;SSAS de tabela&#41;](tables-and-columns-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="3c063-162">[Tables and Columns &#40;SSAS Tabular&#41;](tables-and-columns-ssas-tabular.md) </span></span>  
 <span data-ttu-id="3c063-163">[Medidas &#40;&#41;de tabela do SSAS](measures-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="3c063-163">[Measures &#40;SSAS Tabular&#41;](measures-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="3c063-164">Cálculos &#40;SSAS de Tabela&#41;</span><span class="sxs-lookup"><span data-stu-id="3c063-164">Calculations &#40;SSAS Tabular&#41;</span></span>](calculations-ssas-tabular.md)  
  
  
