---
title: Operações de log em Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: aa1db060-95dc-4198-8aeb-cffdda44b140
author: minewiskan
ms.author: owend
ms.openlocfilehash: 95d0e41576e449ab10b243ef49cbe283940afe0b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87576045"
---
# <a name="log-operations-in-analysis-services"></a><span data-ttu-id="a06ea-102">Operações de log no Analysis Services</span><span class="sxs-lookup"><span data-stu-id="a06ea-102">Log operations in Analysis Services</span></span>
  <span data-ttu-id="a06ea-103">Uma instância de Analysis Services registrará notificações, erros e avisos do servidor no arquivo msmdsrv. log-um para cada instância instalada.</span><span class="sxs-lookup"><span data-stu-id="a06ea-103">An Analysis Services instance will log server notifications, errors, and warnings to the msmdsrv.log file - one for each instance you install.</span></span> <span data-ttu-id="a06ea-104">Os administradores consultam esse log para compreender eventos de rotina e extraordinários.</span><span class="sxs-lookup"><span data-stu-id="a06ea-104">Administrators refer to this log for insights into routine and extraordinary events alike.</span></span> <span data-ttu-id="a06ea-105">Nas versões mais recentes, o registro em log foi aprimorado para incluir mais informações.</span><span class="sxs-lookup"><span data-stu-id="a06ea-105">In recent releases, logging has been enhanced to include more information.</span></span> <span data-ttu-id="a06ea-106">Registros de log agora incluem informações de versão e edição do produto, bem como processador, memória, conectividade e eventos de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="a06ea-106">Log records now include product version and edition information, as well as processor, memory, connectivity, and blocking events.</span></span> <span data-ttu-id="a06ea-107">Você pode revisar a lista inteira de alterações em [Aprimoramentos de log](https://support.microsoft.com/kb/2965035).</span><span class="sxs-lookup"><span data-stu-id="a06ea-107">You can review the entire change list at [Logging improvements](https://support.microsoft.com/kb/2965035).</span></span>  
  
 <span data-ttu-id="a06ea-108">Além do recurso de registro em log integrado, muitos administradores e desenvolvedores também usam ferramentas fornecidas pela comunidade do Analysis Services para coletar dados sobre as operações do servidor, tal como o **ASTrace**.</span><span class="sxs-lookup"><span data-stu-id="a06ea-108">Besides the built-in logging feature, many administrators and developers also use tools provided by the Analysis Services community to collect data about server operations, such as **ASTrace**.</span></span> <span data-ttu-id="a06ea-109">Consulte [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) (Exemplos da Comunidade do Microsoft SQL Server: Analysis Services) para obter os links de download.</span><span class="sxs-lookup"><span data-stu-id="a06ea-109">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) for the download links.</span></span>  
  
 <span data-ttu-id="a06ea-110">Este tópico contém as seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="a06ea-110">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="a06ea-111">Local e tipos de logs</span><span class="sxs-lookup"><span data-stu-id="a06ea-111">Location and types of logs</span></span>](#bkmk_location)  
  
-   [<span data-ttu-id="a06ea-112">Informações gerais sobre definições de configuração do arquivo de log</span><span class="sxs-lookup"><span data-stu-id="a06ea-112">General information on log file configuration settings</span></span>](#bkmk_general)  
  
-   [<span data-ttu-id="a06ea-113">Arquivo de log do serviço MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="a06ea-113">MSMDSRV service log file</span></span>](#bkmk_msmdsrv)  
  
-   [<span data-ttu-id="a06ea-114">Logs de consulta</span><span class="sxs-lookup"><span data-stu-id="a06ea-114">Query logs</span></span>](#bkmk_querylog)  
  
-   [<span data-ttu-id="a06ea-115">Arquivos de mini Dump (. mdmp)</span><span class="sxs-lookup"><span data-stu-id="a06ea-115">Mini dump (.mdmp) files</span></span>](#bkmk_mdmp)  
  
-   [<span data-ttu-id="a06ea-116">Dicas e melhores práticas</span><span class="sxs-lookup"><span data-stu-id="a06ea-116">Tips and best practices</span></span>](#bkmk_tips)  
  
> [!NOTE]  
>  <span data-ttu-id="a06ea-117">Se você estiver procurando informações sobre o registro em log, talvez também esteja interessado no rastreamento de operações que mostram o processamento e caminhos de execução de consulta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-117">If you're looking for information about logging, you might also be interested in tracing operations that show processing and query execution paths.</span></span> <span data-ttu-id="a06ea-118">Objetos de rastreamento para rastreamento ad hoc e persistente (como a auditoria de acesso de cubo), bem como recomendações sobre como usar melhor o Flight Recorder, SQL Server Profiler e xEvents, podem ser encontrados usando os links nesta página: [Monitorar uma instância do Analysis Services](monitor-an-analysis-services-instance.md).</span><span class="sxs-lookup"><span data-stu-id="a06ea-118">Trace objects for ad hoc and sustained tracing (such as auditing cube access) ─ as well as recommendations on how to best use Flight Recorder, SQL Server Profiler, and xEvents ─ can be found through the links on this page: [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md).</span></span>  
  
##  <a name="location-and-types-of-logs"></a><a name="bkmk_location"></a><span data-ttu-id="a06ea-119">Local e tipos de logs</span><span class="sxs-lookup"><span data-stu-id="a06ea-119">Location and types of logs</span></span>  
 <span data-ttu-id="a06ea-120">O Analysis Services fornece os logs descritos abaixo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-120">Analysis Services provides the logs described below.</span></span>  
  
|<span data-ttu-id="a06ea-121">Nome ou local do arquivo</span><span class="sxs-lookup"><span data-stu-id="a06ea-121">File name or Location</span></span>|<span data-ttu-id="a06ea-122">Type</span><span class="sxs-lookup"><span data-stu-id="a06ea-122">Type</span></span>|<span data-ttu-id="a06ea-123">Usado para</span><span class="sxs-lookup"><span data-stu-id="a06ea-123">Used for</span></span>|<span data-ttu-id="a06ea-124">Ativado por padrão</span><span class="sxs-lookup"><span data-stu-id="a06ea-124">On by default</span></span>|  
|---------------------------|----------|--------------|-------------------|  
|<span data-ttu-id="a06ea-125">Msmdsrv.log</span><span class="sxs-lookup"><span data-stu-id="a06ea-125">Msmdsrv.log</span></span>|<span data-ttu-id="a06ea-126">Log de erros</span><span class="sxs-lookup"><span data-stu-id="a06ea-126">Error log</span></span>|<span data-ttu-id="a06ea-127">Monitoramento de rotina e solução de problemas básicos</span><span class="sxs-lookup"><span data-stu-id="a06ea-127">Routine monitoring and basic troubleshooting</span></span>|<span data-ttu-id="a06ea-128">Sim</span><span class="sxs-lookup"><span data-stu-id="a06ea-128">Yes</span></span>|  
|<span data-ttu-id="a06ea-129">Tabela OlapQueryLog em um banco de dados relacional</span><span class="sxs-lookup"><span data-stu-id="a06ea-129">OlapQueryLog table in a relational database</span></span>|<span data-ttu-id="a06ea-130">Log de consultas</span><span class="sxs-lookup"><span data-stu-id="a06ea-130">Query log</span></span>|<span data-ttu-id="a06ea-131">Coletar entradas para o Assistente de Otimização do Uso</span><span class="sxs-lookup"><span data-stu-id="a06ea-131">Collect inputs for the Usage Optimization Wizard</span></span>|<span data-ttu-id="a06ea-132">Não</span><span class="sxs-lookup"><span data-stu-id="a06ea-132">No</span></span>|  
|<span data-ttu-id="a06ea-133">\<guid>Arquivos SQLDmp. mdmp</span><span class="sxs-lookup"><span data-stu-id="a06ea-133">SQLDmp\<guid>.mdmp files</span></span>|<span data-ttu-id="a06ea-134">Falhas e exceções</span><span class="sxs-lookup"><span data-stu-id="a06ea-134">Crashes and exceptions</span></span>|<span data-ttu-id="a06ea-135">Solução de problemas detalhada</span><span class="sxs-lookup"><span data-stu-id="a06ea-135">Deep troubleshooting</span></span>|<span data-ttu-id="a06ea-136">Não</span><span class="sxs-lookup"><span data-stu-id="a06ea-136">No</span></span>|  
  
 <span data-ttu-id="a06ea-137">O link a seguir é altamente recomendável para a obtenção de recursos de informações adicionais que não são abordados neste tópico: [Dicas para coleta de dados inicial do Suporte da Microsoft](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span><span class="sxs-lookup"><span data-stu-id="a06ea-137">We highly recommend the following link for additional information resources not covered in this topic: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span></span>  
  
##  <a name="general-information-on-log-file-configuration-settings"></a><a name="bkmk_general"></a><span data-ttu-id="a06ea-138">Informações gerais sobre as definições de configuração do arquivo de log</span><span class="sxs-lookup"><span data-stu-id="a06ea-138">General information on log file configuration settings</span></span>  
 <span data-ttu-id="a06ea-139">Você pode encontrar as seções para cada log no arquivo de configuração do servidor msmdsrv.ini, localizado na pasta \Arquivos de Programas\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config.</span><span class="sxs-lookup"><span data-stu-id="a06ea-139">You can find sections for each log in the msmdsrv.ini server configuration file, located in the \Program Files\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config folder.</span></span> <span data-ttu-id="a06ea-140">Consulte [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) para obter instruções sobre como editar o arquivo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-140">See [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) for instructions on editing the file.</span></span>  
  
 <span data-ttu-id="a06ea-141">Sugerimos que, se possível, defina as propriedades de log na página de propriedades de servidor do Management Studio.</span><span class="sxs-lookup"><span data-stu-id="a06ea-141">Where possible, we suggest that you set logging properties in the server properties page of Management Studio.</span></span> <span data-ttu-id="a06ea-142">Exceto alguns casos, você deve editar o arquivo msmdsrv.ini diretamente para definir as configurações que não são visíveis nas ferramentas administrativas.</span><span class="sxs-lookup"><span data-stu-id="a06ea-142">Although in some cases, you must edit the msmdsrv.ini file directly to configure settings that are not visible in the administrative tools.</span></span>  
  
 <span data-ttu-id="a06ea-143">![Seção do arquivo config mostrando as configurações de log](../media/ssas-logfilesettings.png "Seção do arquivo config mostrando as configurações de log")</span><span class="sxs-lookup"><span data-stu-id="a06ea-143">![Section of the config file showing log settings](../media/ssas-logfilesettings.png "Section of the config file showing log settings")</span></span>  
  
##  <a name="msmdsrv-service-log-file"></a><a name="bkmk_msmdsrv"></a><span data-ttu-id="a06ea-144">Arquivo de log do serviço MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="a06ea-144">MSMDSRV service log file</span></span>  
 <span data-ttu-id="a06ea-145">Operações de servidor de logs do Analysis Services para o arquivo msmdsrv.log, um por instância, localizado em \arquivos de programas\Microsoft SQL Server\\<instância\>\Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-145">Analysis Services logs server operations to the msmdsrv.log file, one per instance, located at \program files\Microsoft SQL Server\\<instance\>\Olap\Log.</span></span>  
  
 <span data-ttu-id="a06ea-146">Esse arquivo de log é esvaziado em cada reinicialização do serviço.</span><span class="sxs-lookup"><span data-stu-id="a06ea-146">This log file is emptied at each service restart.</span></span> <span data-ttu-id="a06ea-147">Em versões anteriores, os administradores às vezes reiniciavam o serviço com o único propósito de eliminar o arquivo de log antes que ele crescesse excessivamente a ponto de se tornar inutilizável.</span><span class="sxs-lookup"><span data-stu-id="a06ea-147">In previous releases, administrators would sometimes restart the service for the sole purpose of flushing the log file before it could grow so large as to become unusable.</span></span> <span data-ttu-id="a06ea-148">Isso não é mais necessário.</span><span class="sxs-lookup"><span data-stu-id="a06ea-148">This is no longer necessary.</span></span> <span data-ttu-id="a06ea-149">As definições de configuração, apresentadas no SQL Server 2012 SP2 e versões posteriores, oferecem controle sobre o tamanho do arquivo de log e seu histórico:</span><span class="sxs-lookup"><span data-stu-id="a06ea-149">Configuration settings, introduced in SQL Server 2012 SP2 and later, give you control over the size of the log file and its history:</span></span>  
  
-   <span data-ttu-id="a06ea-150">O `MaxFileSizeMB` especifica o tamanho máximo do arquivo de log em megabytes.</span><span class="sxs-lookup"><span data-stu-id="a06ea-150">`MaxFileSizeMB` specifies a maximum log file size in megabytes.</span></span> <span data-ttu-id="a06ea-151">O padrão é 256.</span><span class="sxs-lookup"><span data-stu-id="a06ea-151">The default is 256.</span></span> <span data-ttu-id="a06ea-152">Um valor de substituição válido deve ser um inteiro positivo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-152">A valid replacement value must be a positive integer.</span></span> <span data-ttu-id="a06ea-153">Quando `MaxFileSizeMB` é atingido, o Analysis Services renomeia o arquivo atual como um arquivo do msmdsrv{carimbo de data e hora atual}.log e inicia um novo arquivo msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-153">When `MaxFileSizeMB` is reached, Analysis Services renames the current file as msmdsrv{current timestamp}.log file, and starts a new msmdsrv.log file.</span></span>  
  
-   <span data-ttu-id="a06ea-154">`MaxNumberFiles`Especifica a retenção de arquivos de log mais antigos.</span><span class="sxs-lookup"><span data-stu-id="a06ea-154">`MaxNumberFiles` specifies retention of older log files.</span></span> <span data-ttu-id="a06ea-155">O padrão é 0 (desabilitado).</span><span class="sxs-lookup"><span data-stu-id="a06ea-155">The default is 0 (disabled).</span></span> <span data-ttu-id="a06ea-156">Você pode alterá-lo como um inteiro positivo para manter as versões do arquivo de log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-156">You can change it to a positive integer to keep versions of the log file.</span></span> <span data-ttu-id="a06ea-157">Quando `MaxNumberFiles` é atingido, o Analysis Services exclui o arquivo com o carimbo de date e hora mais antigo em seu nome.</span><span class="sxs-lookup"><span data-stu-id="a06ea-157">When `MaxNumberFiles` is reached, Analysis Services deletes the file with the oldest timestamp in its name.</span></span>  
  
 <span data-ttu-id="a06ea-158">Para usar essas configurações, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a06ea-158">To use these settings, do the following:</span></span>  
  
1.  <span data-ttu-id="a06ea-159">Abra o msmdsrv.ini no Bloco de Notas.</span><span class="sxs-lookup"><span data-stu-id="a06ea-159">Open msmdsrv.ini in NotePad.</span></span>  
  
2.  <span data-ttu-id="a06ea-160">Copie as duas linhas a seguir:</span><span class="sxs-lookup"><span data-stu-id="a06ea-160">Copy the following two lines:</span></span>  
  
    ```  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    ```  
  
3.  <span data-ttu-id="a06ea-161">Cole as duas linhas na seção de Log do msmdsrv.ini, abaixo do nome de arquivo para msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-161">Paste the two lines into the Log section of msmdsrv.ini, below the filename for msmdsrv.log.</span></span> <span data-ttu-id="a06ea-162">Ambas as configurações devem ser adicionadas manualmente.</span><span class="sxs-lookup"><span data-stu-id="a06ea-162">Both settings must be added manually.</span></span> <span data-ttu-id="a06ea-163">Não há nenhum espaço reservado para eles no arquivo msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="a06ea-163">There are no placeholders for them in the msmdsrv.ini file.</span></span>  
  
     <span data-ttu-id="a06ea-164">O arquivo de configuração alterado deve se parecer com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a06ea-164">The changed configuration file should look like the following:</span></span>  
  
    ```  
    <Log>  
    <File>msmdsrv.log</File>  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    <FileBufferSize>0</FileBufferSize>  
  
    ```  
  
4.  <span data-ttu-id="a06ea-165">Edite os valores se aqueles fornecidos forem diferentes do esperado.</span><span class="sxs-lookup"><span data-stu-id="a06ea-165">Edit the values if those provided differ from what you want.</span></span>  
  
5.  <span data-ttu-id="a06ea-166">Salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-166">Save the file.</span></span>  
  
6.  <span data-ttu-id="a06ea-167">Reinicie o serviço.</span><span class="sxs-lookup"><span data-stu-id="a06ea-167">Restart the service.</span></span>  
  
##  <a name="query-logs"></a><a name="bkmk_querylog"></a> <span data-ttu-id="a06ea-168">Logs de consulta</span><span class="sxs-lookup"><span data-stu-id="a06ea-168">Query logs</span></span>  
 <span data-ttu-id="a06ea-169">O log de consulta é um nome um tanto inapropriado, pois ele não registra a atividade de consulta MDX ou DAX dos usuários.</span><span class="sxs-lookup"><span data-stu-id="a06ea-169">The query log is a bit of a misnomer in that it does not log the MDX or DAX query activity of your users.</span></span> <span data-ttu-id="a06ea-170">Em vez disso, ele coleta dados sobre consultas geradas pelo Analysis Services, que são subsequentemente utilizadas como entrada de dados no Assistente de Otimização com Base no Uso.</span><span class="sxs-lookup"><span data-stu-id="a06ea-170">Instead, it collects data about queries generated by Analysis Services, which is subsequently used as data input in the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="a06ea-171">Os dados coletados no log de consultas não se destina à análise direta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-171">The data collected in the query log is not intended for direct analysis.</span></span> <span data-ttu-id="a06ea-172">Especificamente, os conjuntos de dados são descritos em matrizes de bits, com um zero ou um que indica as partes do conjunto de dados incluídas na consulta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-172">Specifically, the datasets are described in bit arrays, with a zero or a one indicating the parts of dataset is included in the query.</span></span> <span data-ttu-id="a06ea-173">Novamente, esses dados destinam-se ao assistente.</span><span class="sxs-lookup"><span data-stu-id="a06ea-173">Again, this data is meant for the wizard.</span></span>  
  
 <span data-ttu-id="a06ea-174">Para monitorar e solucionar problemas de consulta, muitos desenvolvedores e administradores usam uma ferramenta da comunidade, **ASTrace**, para monitorar consultas.</span><span class="sxs-lookup"><span data-stu-id="a06ea-174">For query monitoring and troubleshooting, many developers and administrators use a community tool, **ASTrace**, to monitor queries.</span></span> <span data-ttu-id="a06ea-175">Você também pode usar o SQL Server Profiler, xEvents ou um rastreamento do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="a06ea-175">You can also use SQL Server Profiler, xEvents, or an Analysis Services trace.</span></span> <span data-ttu-id="a06ea-176">Consulte [Monitorar uma instância do Analysis Services](monitor-an-analysis-services-instance.md) para ver links com mais informações sobre rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a06ea-176">See [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md) for tracing-related links.</span></span>  
  
 <span data-ttu-id="a06ea-177">Quando você deve usar o log de consulta?</span><span class="sxs-lookup"><span data-stu-id="a06ea-177">When should you use the query log?</span></span> <span data-ttu-id="a06ea-178">É recomendável habilitar o log de consulta como parte de um exercício de ajuste de desempenho de consulta que inclui o Assistente de Otimização com Base no Uso.</span><span class="sxs-lookup"><span data-stu-id="a06ea-178">We recommend enabling the query log as part of a query performance tuning exercise that includes the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="a06ea-179">O log de consultas não existe até você habilitar o recurso, criar as estruturas de dados para dar suporte a ele e definir as propriedades usadas pelo Analysis Services para localizar e preencher o log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-179">The query log does not exist until you enable the feature, create the data structures to support it, and set properties used by Analysis Services to locate and populate the log.</span></span>  
  
 <span data-ttu-id="a06ea-180">Para habilitar o log de consulta, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="a06ea-180">To enable the query log, follow these steps:</span></span>  
  
1.  <span data-ttu-id="a06ea-181">Crie um banco de dados relacional do SQL Server para armazenar o log de consulta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-181">Create a SQL Server relational database to store the query log.</span></span>  
  
2.  <span data-ttu-id="a06ea-182">Conceda permissões suficientes à conta de serviço do Analysis Services no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a06ea-182">Grant the Analysis Services service account sufficient permissions on the database.</span></span> <span data-ttu-id="a06ea-183">A conta precisa de permissão para criar uma tabela, gravar na tabela e ler da tabela.</span><span class="sxs-lookup"><span data-stu-id="a06ea-183">The account needs permission to create a table, write to the table, and read from the table.</span></span>  
  
3.  <span data-ttu-id="a06ea-184">Em SQL Server Management Studio, clique com o botão direito do mouse em **Analysis Services**  |  **Propriedades**  |  **geral**, defina **CreateQueryLogTable** como true.</span><span class="sxs-lookup"><span data-stu-id="a06ea-184">In SQL Server Management Studio, right-click **Analysis Services** | **Properties** | **General**, set **CreateQueryLogTable** to true.</span></span>  
  
4.  <span data-ttu-id="a06ea-185">Opcionalmente, altere **QueryLogSampling** ou **QueryLogTableName** se desejar ver exemplos de consultas em uma taxa diferente ou use um nome diferente para a tabela.</span><span class="sxs-lookup"><span data-stu-id="a06ea-185">Optionally, change **QueryLogSampling** or **QueryLogTableName** if you want to sample queries at a different rate, or use a different name for the table.</span></span>  
  
 <span data-ttu-id="a06ea-186">A tabela de log de consulta não será criada até você executar consultas MDX suficientes para cumprir os requisitos de amostragem.</span><span class="sxs-lookup"><span data-stu-id="a06ea-186">The query log table will not be created until you have run enough MDX queries to meet the sampling requirements.</span></span> <span data-ttu-id="a06ea-187">Por exemplo, se você mantiver o valor padrão de 10, deverá executar pelo menos 10 consultas antes que a tabela seja criada.</span><span class="sxs-lookup"><span data-stu-id="a06ea-187">For example, if you keep the default value of 10, you must run at least 10 queries before the table will be created.</span></span>  
  
 <span data-ttu-id="a06ea-188">Configurações de log de consulta são do servidor inteiro.</span><span class="sxs-lookup"><span data-stu-id="a06ea-188">Query log settings are server wide.</span></span> <span data-ttu-id="a06ea-189">As configurações que você especifica serão usadas por todos os bancos de dados em execução neste servidor.</span><span class="sxs-lookup"><span data-stu-id="a06ea-189">The settings you specify will be used by all databases running on this server.</span></span>  
  
 <span data-ttu-id="a06ea-190">![Configurações de log de consulta no Management Studio](../media/ssas-querylogsettings.png "Configurações de log de consulta no Management Studio")</span><span class="sxs-lookup"><span data-stu-id="a06ea-190">![Query log settings in Management Studio](../media/ssas-querylogsettings.png "Query log settings in Management Studio")</span></span>  
  
 <span data-ttu-id="a06ea-191">Após as definições de configurações serem especificadas, execute uma consulta MDX várias vezes.</span><span class="sxs-lookup"><span data-stu-id="a06ea-191">After the configuration settings are specified, run an MDX query multiple times.</span></span> <span data-ttu-id="a06ea-192">Se a amostragem for definida como 10, execute a consulta 11 vezes.Verifique se que a tabela é criada.</span><span class="sxs-lookup"><span data-stu-id="a06ea-192">If sampling is set to 10, run the query 11 times.Verify the table is created.</span></span> <span data-ttu-id="a06ea-193">No Management Studio, conecte-se ao mecanismo de banco de dados relacional, abra a pasta do banco de dados, abra a pasta **Tabelas** e verifique se **OlapQueryLog** existe.</span><span class="sxs-lookup"><span data-stu-id="a06ea-193">In Management Studio, connect to the relational database engine, open the database folder, open the **Tables** folder, and verify that **OlapQueryLog** exists.</span></span> <span data-ttu-id="a06ea-194">Se você não puder encontrar a tabela imediatamente, atualize a pasta para acompanhar as alterações no seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-194">If you do not immediately see the table, refresh the folder to pick up any changes to its contents.</span></span>  
  
 <span data-ttu-id="a06ea-195">Permita que o log de consulta acumule dados suficientes para o Assistente de Otimização com Base no Uso.</span><span class="sxs-lookup"><span data-stu-id="a06ea-195">Allow the query log to accumulate sufficient data for the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="a06ea-196">Se os volumes de consulta forem cíclicos, capture tráfego suficiente para ter um conjunto representativo dos dados.</span><span class="sxs-lookup"><span data-stu-id="a06ea-196">If query volumes are cyclical, capture enough traffic to have a representative set of data.</span></span> <span data-ttu-id="a06ea-197">Consulte [Assistente de Otimização com Base no Uso](https://msdn.microsoft.com/library/ms189706.aspx) para obter instruções sobre como executar o assistente.</span><span class="sxs-lookup"><span data-stu-id="a06ea-197">See [Usage Based Optimization Wizard](https://msdn.microsoft.com/library/ms189706.aspx) for instructions on how to run the wizard.</span></span>  
  
 <span data-ttu-id="a06ea-198">Consulte [Configurando o log de consulta do Analysis Services](https://technet.microsoft.com/library/Cc917676) para saber mais sobre a configuração de logs de consulta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-198">See [Configuring the Analysis Services Query Log](https://technet.microsoft.com/library/Cc917676) to learn more about query log configuration.</span></span> <span data-ttu-id="a06ea-199">Embora o documento seja bastante antigo, a configuração de logs de consulta não foi alterada nas versões recentes e as informações que ele contém ainda se aplicam.</span><span class="sxs-lookup"><span data-stu-id="a06ea-199">Although the paper is quite old, query log configuration has not changed in recent releases and the information it contains still applies.</span></span>  
  
##  <a name="mini-dump-mdmp-files"></a><a name="bkmk_mdmp"></a> <span data-ttu-id="a06ea-200">Arquivos de minidespejo (.mdmp)</span><span class="sxs-lookup"><span data-stu-id="a06ea-200">Mini dump (.mdmp) files</span></span>  
 <span data-ttu-id="a06ea-201">Arquivos de despejo capturam dados usados para analisar eventos extraordinários.</span><span class="sxs-lookup"><span data-stu-id="a06ea-201">Dump files capture data used for analyzing extraordinary events.</span></span> <span data-ttu-id="a06ea-202">O Analysis Services gera minidespejos (.mdmp) automaticamente em resposta a uma falha do servidor, exceções e alguns erros de configuração.</span><span class="sxs-lookup"><span data-stu-id="a06ea-202">Analysis Services automatically generates mini dumps (.mdmp) in response to a server crash, exception, and some configuration errors.</span></span> <span data-ttu-id="a06ea-203">O recurso está habilitado, mas não envia automaticamente relatórios de falha.</span><span class="sxs-lookup"><span data-stu-id="a06ea-203">The feature is enabled, but does not send crash reports automatically.</span></span>  
  
 <span data-ttu-id="a06ea-204">Relatórios de falha são configurados por meio da seção Exceção no arquivo Msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="a06ea-204">Crash reports are configured through the Exception section in the Msmdsrv.ini file.</span></span> <span data-ttu-id="a06ea-205">Essas configurações controlam a criação do arquivo de despejo de memória.</span><span class="sxs-lookup"><span data-stu-id="a06ea-205">These settings control memory dump file generation.</span></span> <span data-ttu-id="a06ea-206">O snippet a seguir mostra os valores padrão:</span><span class="sxs-lookup"><span data-stu-id="a06ea-206">The following snippet shows the default values:</span></span>  
  
```  
<Exception>  
<CreateAndSendCrashReports>1</CreateAndSendCrashReports>  
<CrashReportsFolder/>  
<SQLDumperFlagsOn>0x0</SQLDumperFlagsOn>  
<SQLDumperFlagsOff>0x0</SQLDumperFlagsOff>  
<MiniDumpFlagsOn>0x0</MiniDumpFlagsOn>  
<MiniDumpFlagsOff>0x0</MiniDumpFlagsOff>  
<MinidumpErrorList>0xC1000000, 0xC1000001, 0xC102003F, 0xC1360054, 0xC1360055</MinidumpErrorList>  
<ExceptionHandlingMode>0</ExceptionHandlingMode>  
<CriticalErrorHandling>1</CriticalErrorHandling>  
<MaxExceptions>500</MaxExceptions>  
<MaxDuplicateDumps>1</MaxDuplicateDumps>  
</Exception>  
```  
  
 <span data-ttu-id="a06ea-207">**Configurar relatórios de falha**</span><span class="sxs-lookup"><span data-stu-id="a06ea-207">**Configure Crash Reports**</span></span>  
  
 <span data-ttu-id="a06ea-208">Salvo orientação em contrário pelo Suporte da Microsoft, a maioria dos administradores usam as configurações padrão.</span><span class="sxs-lookup"><span data-stu-id="a06ea-208">Unless otherwise directed by Microsoft Support, most administrators use the default settings.</span></span> <span data-ttu-id="a06ea-209">Este artigo mais antigo da Base de Dados de Conhecimento ainda é usado para fornecer instruções sobre como configurar arquivos de despejo: [Como configurar o Analysis Services para gerar arquivos de despejo de memória](https://support.microsoft.com/kb/919711).</span><span class="sxs-lookup"><span data-stu-id="a06ea-209">This older KB article is still used to provide instruction on how to configure dump files: [How to configure Analysis Services to generate memory dump files](https://support.microsoft.com/kb/919711).</span></span>  
  
 <span data-ttu-id="a06ea-210">A definição de configuração tem mais probabilidade de ser modificada é a `CreateAndSendCrashReports` usada para determinar se um arquivo de despejo de memória será gerado.</span><span class="sxs-lookup"><span data-stu-id="a06ea-210">The configuration setting most likely to be modified is the `CreateAndSendCrashReports` setting used to determine whether a memory dump file will be generated.</span></span>  
  
|<span data-ttu-id="a06ea-211">Valor</span><span class="sxs-lookup"><span data-stu-id="a06ea-211">Value</span></span>|<span data-ttu-id="a06ea-212">Descrição</span><span class="sxs-lookup"><span data-stu-id="a06ea-212">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="a06ea-213">0</span><span class="sxs-lookup"><span data-stu-id="a06ea-213">0</span></span>|<span data-ttu-id="a06ea-214">Desativa o arquivo de despejo de memória.</span><span class="sxs-lookup"><span data-stu-id="a06ea-214">Turns off the memory dump file.</span></span> <span data-ttu-id="a06ea-215">Todas as outras configurações na seção Exceção são ignoradas.</span><span class="sxs-lookup"><span data-stu-id="a06ea-215">All other settings under the Exception section are ignored.</span></span>|  
|<span data-ttu-id="a06ea-216">1</span><span class="sxs-lookup"><span data-stu-id="a06ea-216">1</span></span>|<span data-ttu-id="a06ea-217">(Padrão) Habilita, mas não envia o arquivo de despejo de memória.</span><span class="sxs-lookup"><span data-stu-id="a06ea-217">(Default) Enables, but does not send, the memory dump file.</span></span>|  
|<span data-ttu-id="a06ea-218">2</span><span class="sxs-lookup"><span data-stu-id="a06ea-218">2</span></span>|<span data-ttu-id="a06ea-219">Habilita e envia automaticamente um relatório de erros à Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a06ea-219">Enables and automatically sends an error report to Microsoft.</span></span>|  
  
 <span data-ttu-id="a06ea-220">`CrashReportsFolder` é o local dos arquivos de despejo de memória.</span><span class="sxs-lookup"><span data-stu-id="a06ea-220">`CrashReportsFolder` is the location of the dump files.</span></span> <span data-ttu-id="a06ea-221">Por padrão, um arquivo .mdmp e os registros de log associados podem ser encontrados na pasta \Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="a06ea-221">By default, an .mdmp file and associated log records can be found in the \Olap\Log folder.</span></span>  
  
 <span data-ttu-id="a06ea-222">`SQLDumperFlagsOn` é usado para gerar um despejo completo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-222">`SQLDumperFlagsOn` is used to generate a full dump.</span></span> <span data-ttu-id="a06ea-223">Por padrão, os despejos completos não estão habilitados.</span><span class="sxs-lookup"><span data-stu-id="a06ea-223">By default, full dumps are not enabled.</span></span> <span data-ttu-id="a06ea-224">Você pode definir essa propriedade para `0x34`.</span><span class="sxs-lookup"><span data-stu-id="a06ea-224">You can set this property to `0x34`.</span></span>  
  
 <span data-ttu-id="a06ea-225">Os links a seguir fornecem mais informações:</span><span class="sxs-lookup"><span data-stu-id="a06ea-225">The following links provide more background:</span></span>  
  
-   [<span data-ttu-id="a06ea-226">Procurando mais profundo no SQL Server usando minidespejos</span><span class="sxs-lookup"><span data-stu-id="a06ea-226">Looking Deeper into SQL Server using Minidumps</span></span>](https://blogs.msdn.com/b/sqlcat/archive/2009/09/11/looking-deeper-into-sql-server-using-minidumps.aspx)  
  
-   [<span data-ttu-id="a06ea-227">Como criar um arquivo de despejo do modo de usuário</span><span class="sxs-lookup"><span data-stu-id="a06ea-227">How to create a user mode dump file</span></span>](https://support.microsoft.com/kb/931673)  
  
-   [<span data-ttu-id="a06ea-228">Como usar o utilitário Sqldumper.exe para gerar um arquivo de despejo no SQL Server</span><span class="sxs-lookup"><span data-stu-id="a06ea-228">How to use the Sqldumper.exe utility to generate a dump file in SQL Server</span></span>](https://support.microsoft.com/kb/917825)  
  
##  <a name="tips-and-best-practices"></a><a name="bkmk_tips"></a><span data-ttu-id="a06ea-229">Dicas e práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="a06ea-229">Tips and best practices</span></span>  
 <span data-ttu-id="a06ea-230">Esta seção é uma recapitulação das dicas mencionadas neste artigo.</span><span class="sxs-lookup"><span data-stu-id="a06ea-230">This section is a recap of the tips mentioned throughout this article.</span></span>  
  
-   <span data-ttu-id="a06ea-231">Configure o arquivo msmdsrv.log para controlar o tamanho e o número de arquivos de log msmdsrv.</span><span class="sxs-lookup"><span data-stu-id="a06ea-231">Configure the msmdsrv.log file to control the size and number of msmdsrv log file.</span></span> <span data-ttu-id="a06ea-232">As configurações não estão habilitadas por padrão, portanto certifique-se de adicioná-las como uma etapa pós-instalação.</span><span class="sxs-lookup"><span data-stu-id="a06ea-232">The settings are not enabled by default, so be sure to add them as post-installation step.</span></span> <span data-ttu-id="a06ea-233">Consulte [Arquivo de log do serviço MSMDSRV](#bkmk_msmdsrv) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a06ea-233">See [MSMDSRV service log file](#bkmk_msmdsrv) in this topic.</span></span>  
  
-   <span data-ttu-id="a06ea-234">Examine esta postagem de blog do Atendimento ao Cliente da Microsoft para saber quais recursos eles usam para obter informações sobre as operações do servidor: [Coleta inicial de dados](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)</span><span class="sxs-lookup"><span data-stu-id="a06ea-234">Review this blog post from Microsoft Customer Support to learn what resources they use to get information about server operations: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)</span></span>  
  
-   <span data-ttu-id="a06ea-235">Use ASTrace2012 em vez de um log de consulta para descobrir o que está consultando cubos.</span><span class="sxs-lookup"><span data-stu-id="a06ea-235">Use ASTrace2012, rather than a query log, to find out who is querying cubes.</span></span> <span data-ttu-id="a06ea-236">O log de consultas normalmente é usado para fornecer sugestões para o Assistente de Otimização com Base no Uso e os dados capturados não são fácil de ler ou interpretar.</span><span class="sxs-lookup"><span data-stu-id="a06ea-236">The query log is typically used to provide input into the Usage Based Optimization Wizard, and the data it captures is not easy to read or interpret.</span></span> <span data-ttu-id="a06ea-237">O ASTrace2012 é uma ferramenta de comunidade, amplamente utilizada, que captura as operações de consulta.</span><span class="sxs-lookup"><span data-stu-id="a06ea-237">ASTrace2012 is a community tool, widely used, that captures query operations.</span></span> <span data-ttu-id="a06ea-238">Consulte [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/)(Exemplos da comunidade do Microsoft SQL Server: Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="a06ea-238">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a06ea-239">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="a06ea-239">See Also</span></span>  
 <span data-ttu-id="a06ea-240">[Gerenciamento de instância do Analysis Services](analysis-services-instance-management.md) </span><span class="sxs-lookup"><span data-stu-id="a06ea-240">[Analysis Services Instance Management](analysis-services-instance-management.md) </span></span>  
 <span data-ttu-id="a06ea-241">[Introdução ao monitoramento de Analysis Services com SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="a06ea-241">[Introduction to Monitoring Analysis Services with SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="a06ea-242">Configurar propriedades de servidor no Analysis Services</span><span class="sxs-lookup"><span data-stu-id="a06ea-242">Configure Server Properties in Analysis Services</span></span>](../server-properties/server-properties-in-analysis-services.md)  
  
  
