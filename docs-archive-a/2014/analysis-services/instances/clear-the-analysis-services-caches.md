---
title: Limpar os caches de Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 6bf66fdd-6a03-4cea-b7e2-eb676ff276ff
author: minewiskan
ms.author: owend
ms.openlocfilehash: e4890dd322406dcf48bc6b8eca89f292cfe132a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87679597"
---
# <a name="clear-the-analysis-services-caches"></a><span data-ttu-id="9d295-102">Limpar os caches do Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9d295-102">Clear the Analysis Services Caches</span></span>
  <span data-ttu-id="9d295-103">O Analysis Services armazena dados em cache dados para melhorar o desempenho da consulta.</span><span class="sxs-lookup"><span data-stu-id="9d295-103">Analysis Services caches data to boost query performance.</span></span> <span data-ttu-id="9d295-104">Este tópico fornece recomendações para usar o comando XMLA ClearCache para limpar caches que foram criados em resposta a uma consulta MDX.</span><span class="sxs-lookup"><span data-stu-id="9d295-104">This topic provides recommendations for using the XMLA ClearCache command to clear caches that were created in response to an MDX query.</span></span> <span data-ttu-id="9d295-105">Os efeitos da execução de ClearCache variam dependendo se você está usando um modelo tabular ou multidimensional.</span><span class="sxs-lookup"><span data-stu-id="9d295-105">The effects of running ClearCache vary depending on whether you are using a tabular or multidimensional model.</span></span>  
  
 <span data-ttu-id="9d295-106">**Quando limpar o cache de modelos multidimensionais**</span><span class="sxs-lookup"><span data-stu-id="9d295-106">**When to clear the cache for multidimensional models**</span></span>  
  
 <span data-ttu-id="9d295-107">Em bancos de dados multidimensionais, o Analysis Services compila caches no mecanismo de fórmula ao avaliar um cálculo e no mecanismo de armazenamento para os resultados de consultas de dimensões e de grupos de medidas.</span><span class="sxs-lookup"><span data-stu-id="9d295-107">For multidimensional databases, Analysis Services builds caches in the formula engine when evaluating a calculation, and in the storage engine for the results of dimension queries and measure group queries.</span></span> <span data-ttu-id="9d295-108">Consultas de grupos de medidas ocorrem quando o mecanismo de fórmula precisa de dados de medida para uma coordenada de célula ou subcubo.</span><span class="sxs-lookup"><span data-stu-id="9d295-108">Measure group queries occur when the formula engine needs measure data for a cell coordinate or subcube.</span></span> <span data-ttu-id="9d295-109">Consultas de dimensão ocorrem ao consultar hierarquias não naturais e ao aplicar autoexists.</span><span class="sxs-lookup"><span data-stu-id="9d295-109">Dimension queries occur when querying unnatural hierarchies and when applying autoexists.</span></span>  
  
 <span data-ttu-id="9d295-110">É recomendável limpar o cache para executar testes de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9d295-110">Clearing the cache is recommended when conducting performance testing.</span></span> <span data-ttu-id="9d295-111">Limpando o cache entre execuções de teste, você assegura que o cache não irá distorcer os resultados dos testes que avaliam o impacto de uma alteração de design de consulta.</span><span class="sxs-lookup"><span data-stu-id="9d295-111">By clearing the cache between test runs, you ensure that caching does not skew any test results that measure the impact of a query design change.</span></span>  
  
 <span data-ttu-id="9d295-112">**Quando limpar o cache de modelos tabulares**</span><span class="sxs-lookup"><span data-stu-id="9d295-112">**When to clear the cache for tabular models**</span></span>  
  
 <span data-ttu-id="9d295-113">Geralmente, os modelos tabulares são armazenados na memória, quando agregações e outros cálculos são realizados no momento em que uma consulta é executada.</span><span class="sxs-lookup"><span data-stu-id="9d295-113">Tabular models are generally stored in memory, where aggregations and other calculations are performed at the time a query is executed.</span></span> <span data-ttu-id="9d295-114">Como tal, o comando ClearCache tem um efeito limitado sobre os modelos tabulares.</span><span class="sxs-lookup"><span data-stu-id="9d295-114">As such, the ClearCache command has a limited effect on tabular models.</span></span> <span data-ttu-id="9d295-115">Em um modelo tabular, os dados podem ser adicionados aos caches do Analysis Services se as consultas MDX forem executadas com base nesses dados.</span><span class="sxs-lookup"><span data-stu-id="9d295-115">For a tabular model, data may be added to the Analysis Services caches if MDX queries are run against it.</span></span> <span data-ttu-id="9d295-116">Em particular, as medidas DAX referidas pelas operações MDX e autoexist podem armazenar os resultados no cache de fórmulas e no cache de dimensão respectivamente.</span><span class="sxs-lookup"><span data-stu-id="9d295-116">In particular, DAX measures referenced by MDX and autoexists operations can cache results in the formula cache and dimension cache respectively.</span></span> <span data-ttu-id="9d295-117">No entanto, observe que hierarquias não naturais e consultas de grupos de medidas não armazenam resultados em cache no mecanismo de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9d295-117">Note however, that unnatural hierarchies and measure group queries do not cache results in the storage engine.</span></span> <span data-ttu-id="9d295-118">Além disso, é importante reconhecer que as consultas DAX não armazenam os resultados em cache no mecanismo de fórmula e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9d295-118">Additionally, it is important to recognize that DAX queries do not cache results in the formula and storage engine.</span></span> <span data-ttu-id="9d295-119">Enquanto o cache existir em resultado de consultas MDX, a execução do comando ClearCache em um modelo tabular invalidará os dados armazenados em cache do sistema.</span><span class="sxs-lookup"><span data-stu-id="9d295-119">To the extent that caches exist as a result of MDX queries, running ClearCache against a tabular model will invalidate any cached data from the system.</span></span>  
  
 <span data-ttu-id="9d295-120">Executar o comando ClearCache também limpa os caches no mecanismo analítico na memória xVelocity (VertiPaq).</span><span class="sxs-lookup"><span data-stu-id="9d295-120">Running ClearCache will also clear in-memory caches in the xVelocity in-memory analytics engine (VertiPaq).</span></span> <span data-ttu-id="9d295-121">O mecanismo xVelocity mantém um pequeno conjunto de resultados em cache.</span><span class="sxs-lookup"><span data-stu-id="9d295-121">The xVelocity engine maintains a small set of cached results.</span></span> <span data-ttu-id="9d295-122">Executar o comando ClearCache invalida esses caches no mecanismo xVelocity.</span><span class="sxs-lookup"><span data-stu-id="9d295-122">Running ClearCache will invalidate these caches in the xVelocity engine.</span></span>  
  
 <span data-ttu-id="9d295-123">Por fim, executar o comando ClearCache também remove dados residuais deixados na memória quando um modelo tabular é reconfigurado para o modo `DirectQuery`.</span><span class="sxs-lookup"><span data-stu-id="9d295-123">Finally, running ClearCache will also remove residual data that is left in memory when a tabular model is reconfigured for `DirectQuery` mode.</span></span> <span data-ttu-id="9d295-124">Isso é particularmente importante quando o modelo contém dados confidenciais sujeitos a controles rígidos.</span><span class="sxs-lookup"><span data-stu-id="9d295-124">This is particularly important if the model contains sensitive data that is subject to tight controls.</span></span> <span data-ttu-id="9d295-125">Nesse caso, executar o comando ClearCache é uma ação de precaução que você pode executar para garantir que os dados confidenciais constem somente onde desejado.</span><span class="sxs-lookup"><span data-stu-id="9d295-125">In this case, running ClearCache is a precautionary action that you can take to ensure that sensitive data exists only where you expect it to be.</span></span> <span data-ttu-id="9d295-126">É necessário limpar o cache manualmente quando o [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] é usado para implantar o modelo e alterar o modo de consulta.</span><span class="sxs-lookup"><span data-stu-id="9d295-126">Clearing the cache manually is necessary if you are using [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] to deploy the model and change the query mode.</span></span> <span data-ttu-id="9d295-127">Em contrapartida, usar o [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] para especificar `DirectQuery` no modelo e em partições limpa automaticamente o cache ao alternar o modelo a ser usado nesse modo de consulta.</span><span class="sxs-lookup"><span data-stu-id="9d295-127">In contrast, using [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] to specify `DirectQuery` on the model and partitions will automatically clear the cache when you switch the model to use that query mode.</span></span>  
  
 <span data-ttu-id="9d295-128">Em comparação com recomendações para limpar os caches de modelos multidimensionais durante os testes de desempenho, não há uma recomendação ampla para limpar os caches de modelos tabulares.</span><span class="sxs-lookup"><span data-stu-id="9d295-128">Compared with recommendations for clearing multidimensional model caches during performance testing, there is no broad recommendation for clearing tabular model caches.</span></span> <span data-ttu-id="9d295-129">Se você não for gerenciar a implantação de um modelo tabular que contém dados confidenciais, não haverá uma tarefa administrativa específica que exija a limpeza do cache.</span><span class="sxs-lookup"><span data-stu-id="9d295-129">If you are not managing the deployment of a tabular model that contains sensitive data, there is no specific administrative task that calls for clearing the cache.</span></span>  
  
## <a name="clear-the-cache-for-analysis-services-models"></a><span data-ttu-id="9d295-130">Limpar o cache de modelos do Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9d295-130">Clear the cache for Analysis Services models</span></span>  
 <span data-ttu-id="9d295-131">Para limpar o cache, use o XMLA e o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9d295-131">To clear the cache, use XMLA and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="9d295-132">Você pode limpar o cache no nível de banco de dados, cubo, dimensão, tabela ou grupo de medidas.</span><span class="sxs-lookup"><span data-stu-id="9d295-132">You can clear the cache at the database, cube, dimension or table, or measure group level.</span></span> <span data-ttu-id="9d295-133">As etapas a seguir para limpar o cache no nível de banco de dados aplicam-se aos modelos multidimensionais e tabulares.</span><span class="sxs-lookup"><span data-stu-id="9d295-133">The following steps for clearing the cache at the database level apply to both multidimensional models and tabular models.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9d295-134">Testes de desempenho rigorosos podem exigir uma abordagem mais abrangente para limpar o cache.</span><span class="sxs-lookup"><span data-stu-id="9d295-134">Rigorous performance testing might require a more comprehensive approach to clearing the cache.</span></span> <span data-ttu-id="9d295-135">Para obter instruções sobre como liberar o Analysis Services e os caches do sistema de arquivos, consulte a seção sobre limpeza de caches no [Guia de Operações do SQL Server 2008 R2 Analysis Services](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span><span class="sxs-lookup"><span data-stu-id="9d295-135">For instructions on how to flush Analysis Services and file system caches, see the section on clearing caches in the [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span></span>  
  
 <span data-ttu-id="9d295-136">Nos modelos multidimensionais e tabulares, limpar alguns desses caches pode envolver duas etapas que consistem em invalidar o cache na execução do comando ClearCache e esvaziar o cache quando a próxima consulta é recebida.</span><span class="sxs-lookup"><span data-stu-id="9d295-136">For both multidimensional and tabular models, clearing some of these caches can be a two-step process that consists of invalidating the cache when ClearCache executes, followed by emptying the cache when the next query is received.</span></span> <span data-ttu-id="9d295-137">A redução no consumo de memória ficará evidente somente depois que o cache for esvaziado de fato.</span><span class="sxs-lookup"><span data-stu-id="9d295-137">A reduction in memory consumption will be evident only after the cache is actually emptied.</span></span>  
  
 <span data-ttu-id="9d295-138">É necessário fornecer um identificador de objeto à instrução `ClearCache` na consulta XMLA para limpar o cache.</span><span class="sxs-lookup"><span data-stu-id="9d295-138">Clearing the cache requires that you provide an object identifier to the `ClearCache` statement in an XMLA query.</span></span> <span data-ttu-id="9d295-139">A primeira etapa deste tópico explica como obter um identificador de objeto.</span><span class="sxs-lookup"><span data-stu-id="9d295-139">The first step in this topic explains how to get an object identifier.</span></span>  
  
#### <a name="step-1-get-the-object-identifier"></a><span data-ttu-id="9d295-140">Etapa 1: obter o identificador de objeto</span><span class="sxs-lookup"><span data-stu-id="9d295-140">Step 1: Get the object identifier</span></span>  
  
1.  <span data-ttu-id="9d295-141">No [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], clique com o botão direito do mouse em um objeto, selecione **Propriedades**e copie o valor da propriedade da ID no painel **Propriedades** .</span><span class="sxs-lookup"><span data-stu-id="9d295-141">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click an object, select **Properties**, and copy the value from the ID property in the **Properties** pane.</span></span> <span data-ttu-id="9d295-142">Essa abordagem funciona para banco de dados, cubo, dimensão ou tabela.</span><span class="sxs-lookup"><span data-stu-id="9d295-142">This approach works for the database, cube, dimension, or table.</span></span>  
  
2.  <span data-ttu-id="9d295-143">Para obter a ID do grupo de medidas, clique com o botão direito do mouse no grupo de medidas e selecione **Script de Grupo de Medidas como**.</span><span class="sxs-lookup"><span data-stu-id="9d295-143">To get the measure group ID, right-click the measure group and select **Script Measure Group As**.</span></span> <span data-ttu-id="9d295-144">Escolha **Criar** ou **Alterar**e envie a consulta para uma janela.</span><span class="sxs-lookup"><span data-stu-id="9d295-144">Choose either **Create** or **Alter**, and send the query to a window.</span></span> <span data-ttu-id="9d295-145">A ID do grupo de medidas ficará visível na definição do objeto.</span><span class="sxs-lookup"><span data-stu-id="9d295-145">The ID of the measure group will be visible in the object definition.</span></span> <span data-ttu-id="9d295-146">Copie a ID da definição do objeto.</span><span class="sxs-lookup"><span data-stu-id="9d295-146">Copy the ID of the object definition.</span></span>  
  
#### <a name="step-2-run-the-query"></a><span data-ttu-id="9d295-147">Etapa 2: executar a consulta</span><span class="sxs-lookup"><span data-stu-id="9d295-147">Step 2: Run the query</span></span>  
  
1.  <span data-ttu-id="9d295-148">No [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], clique com o botão direito do mouse em um banco de dados, aponte para **Nova Consulta**e selecione **XMLA**.</span><span class="sxs-lookup"><span data-stu-id="9d295-148">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click a database, point to **New Query**, and select **XMLA**.</span></span>  
  
2.  <span data-ttu-id="9d295-149">Copie o exemplo de código a seguir na janela de consulta XMLA.</span><span class="sxs-lookup"><span data-stu-id="9d295-149">Copy the following code example into the XMLA query window.</span></span> <span data-ttu-id="9d295-150">Altere `DatabaseID` para a ID do banco de dados na conexão atual.</span><span class="sxs-lookup"><span data-stu-id="9d295-150">Change `DatabaseID` to the ID of the database on the current connection.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID> Adventure Works DW Multidimensional</DatabaseID>  
      </Object>  
    </ClearCache>  
  
    ```  
  
     <span data-ttu-id="9d295-151">Opcionalmente, você pode especificar o caminho de um objeto filho, como um grupo de medidas, para limpar o cache apenas desse objeto.</span><span class="sxs-lookup"><span data-stu-id="9d295-151">Alternatively, you can specify a path of a child object, such as a measure group, to clear the cache for just that object.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID>Adventure Works DW Multidimensional</DatabaseID>  
            <CubeID>Adventure Works</CubeID>  
            <MeasureGroupID>Fact Currency Rate</MeasureGroupID>  
      </Object>  
    </ClearCache>  
    ```  
  
3.  <span data-ttu-id="9d295-152">Pressione F5 para executar a consulta.</span><span class="sxs-lookup"><span data-stu-id="9d295-152">Press F5 to execute the query.</span></span> <span data-ttu-id="9d295-153">Você deverá ver o resultado a seguir:</span><span class="sxs-lookup"><span data-stu-id="9d295-153">You should see the following result:</span></span>  
  
    ```  
    <return xmlns="urn:schemas-microsoft-com:xml-analysis">  
      <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty" />  
    </return>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="9d295-154">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="9d295-154">See Also</span></span>  
 <span data-ttu-id="9d295-155">[Criar script de tarefas administrativas no Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="9d295-155">[Script Administrative Tasks in Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span></span>  
 [<span data-ttu-id="9d295-156">Monitorar uma instância do Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9d295-156">Monitor an Analysis Services Instance</span></span>](monitor-an-analysis-services-instance.md)  
  
  
