---
title: Definindo uma relação muitos-para-muitos | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 7bebb174-148c-4cbb-a285-2f6d536a16d5
author: minewiskan
ms.author: owend
ms.openlocfilehash: fb4e18831ae23b8cf1f0702b357672f7520478a8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87680151"
---
# <a name="defining-a-many-to-many-relationship"></a><span data-ttu-id="72048-102">Definindo uma relação muitos para muitos</span><span class="sxs-lookup"><span data-stu-id="72048-102">Defining a Many-to-Many Relationship</span></span>
  <span data-ttu-id="72048-103">Ao definir uma dimensão, cada fato normalmente se une a somente um membro de dimensão, apesar de um único membro de dimensão poder ser associado a vários fatos diferentes.</span><span class="sxs-lookup"><span data-stu-id="72048-103">When you define a dimension, typically each fact joins to one and only one dimension member, whereas a single dimension member can be associated with many different facts.</span></span> <span data-ttu-id="72048-104">Por exemplo, cada cliente pode ter muitos pedidos, mas cada pedido pertence a somente um cliente.</span><span class="sxs-lookup"><span data-stu-id="72048-104">For example, each customer can have many orders but each order belongs to a single customer.</span></span> <span data-ttu-id="72048-105">Na terminologia do banco de dados relacional, isso é chamado de *relação um-para-muitos*.</span><span class="sxs-lookup"><span data-stu-id="72048-105">In relational database terminology, this is referred to as a *one-to-many relationship*.</span></span> <span data-ttu-id="72048-106">Porém, algumas vezes, um único fato pode se unir a vários membros de dimensão.</span><span class="sxs-lookup"><span data-stu-id="72048-106">However, sometimes a single fact can join to multiple dimension members.</span></span> <span data-ttu-id="72048-107">Na terminologia de banco de dados relacional, isso é chamado de *relação muitos-para-muitos*.</span><span class="sxs-lookup"><span data-stu-id="72048-107">In relational database terminology, this is referred to as a *many-to-many relationship*.</span></span> <span data-ttu-id="72048-108">Por exemplo, um cliente tem vários motivos para efetuar uma compra, e um motivo de compra pode ser associado a várias compras.</span><span class="sxs-lookup"><span data-stu-id="72048-108">For example, a customer may have multiple reasons for making a purchase, and a purchase reason can be associated with multiple purchases.</span></span> <span data-ttu-id="72048-109">Uma tabela de junção é usada para definir os motivos de vendas relacionados a cada compra.</span><span class="sxs-lookup"><span data-stu-id="72048-109">A join table is used to define the sales reasons that relate to each purchase.</span></span> <span data-ttu-id="72048-110">Uma dimensão Motivo de Vendas formada por tais relações pode ter, então, vários membros relacionados a uma única transação de vendas.</span><span class="sxs-lookup"><span data-stu-id="72048-110">A Sales Reason dimension constructed from such relationships would then have multiple members that relate to a single sales transaction.</span></span> <span data-ttu-id="72048-111">As dimensões muitos para muitos expandem o modelo dimensional além do esquema em estrela clássico e oferecem suporte a análises complexas quando as dimensões não estão relacionadas diretamente a uma tabela de fatos.</span><span class="sxs-lookup"><span data-stu-id="72048-111">Many-to-many dimensions expand the dimensional model beyond the classic star schema and support complex analytics when dimensions are not directly related to a fact table.</span></span>

 <span data-ttu-id="72048-112">No [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], você define uma relação muitos para muitos entre uma dimensão e um grupo de medidas especificando uma tabela de fatos intermediária que se une à tabela de dimensão.</span><span class="sxs-lookup"><span data-stu-id="72048-112">In [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], you define a many-to-many relationship between a dimension and a measure group by specifying an intermediate fact table that is joined to the dimension table.</span></span> <span data-ttu-id="72048-113">Uma tabela de fatos intermediária é unida, por sua vez, à tabela de dimensão intermediária à qual a tabela de fatos é unida.</span><span class="sxs-lookup"><span data-stu-id="72048-113">An intermediate fact table is joined, in turn, to an intermediate dimension table to which the fact table is joined.</span></span> <span data-ttu-id="72048-114">As relações muitos para muitos entre uma tabela de fatos intermediária e ambas as tabelas de dimensão na relação e a dimensão intermediária criam relações muitos para muitos entre membros da dimensão primária e medidas do grupo de medidas especificado pela relação.</span><span class="sxs-lookup"><span data-stu-id="72048-114">The many-to-many relationships between the intermediate fact table and both the dimension tables in the relationship and the intermediate dimension creates the many-to-many relationships between members of the primary dimension and measures in the measure group that is specified by the relationship.</span></span> <span data-ttu-id="72048-115">Para definir uma relação muitos para muitos entre uma dimensão e um grupo de medidas usando um grupo de medidas intermediário, esse grupo de medidas intermediário deve compartilhar uma ou mais dimensões com o grupo de medidas original.</span><span class="sxs-lookup"><span data-stu-id="72048-115">In order to define a many-to-many relationship between a dimension and a measure group through an intermediate measure group, the intermediate measure group must share one or more dimensions with the original measure group.</span></span>

 <span data-ttu-id="72048-116">Com uma dimensão muitos para muitos, os valores são somados distintamente, o que significa que eles não se agregam mais de uma vez ao membro Todos.</span><span class="sxs-lookup"><span data-stu-id="72048-116">With a many-to-many dimension, values are distinct summed, which means that they do not aggregate more than once to the All member.</span></span>

> [!NOTE]
>  <span data-ttu-id="72048-117">Para dar suporte a uma relação de dimensão muitos para muitos, uma relação chave primária-chave estrangeira deve ser definida na exibição da fonte de dados entre todas as tabelas envolvidas.</span><span class="sxs-lookup"><span data-stu-id="72048-117">In order to support a many-to-many dimension relationship, a primary key-foreign key relationship must be defined in the data source view between all the tables that are involved.</span></span> <span data-ttu-id="72048-118">Caso contrário, não será possível selecionar o grupo de medidas intermediário correto ao estabelecer a relação na guia **Uso da Dimensão** do Designer de Cubo.</span><span class="sxs-lookup"><span data-stu-id="72048-118">Otherwise, you will not be able to select the correct intermediate measure group when you establish the relationship in the **Dimension Usage** tab of Cube Designer.</span></span>

 <span data-ttu-id="72048-119">Para obter mais informações, consulte [Relações de dimensão](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md)e [Definir uma relação muitos-para-muitos e as propriedades da relação muitos-para-muitos](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="72048-119">For more information, see [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md), and [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>

 <span data-ttu-id="72048-120">Nas tarefas deste tópico, você definirá a dimensão Motivos de Vendas e o grupo de medidas Motivos de Vendas, além de uma relação muitos para muitos entre a dimensão Motivos de Vendas e o grupo de medidas Vendas pela Internet usando o grupo de medidas Motivos de Vendas.</span><span class="sxs-lookup"><span data-stu-id="72048-120">In the tasks in this topic, you define the Sales Reasons dimension and the Sales Reasons measure group, and you define a many-to-many relationship between the Sales Reasons dimension and the Internet Sales measure group through the Sales Reasons measure group.</span></span>

## <a name="adding-required-tables-to-the-data-source-view"></a><span data-ttu-id="72048-121">Adicionando tabelas necessárias à exibição da fonte de dados</span><span class="sxs-lookup"><span data-stu-id="72048-121">Adding Required Tables to the Data Source View</span></span>

1.  <span data-ttu-id="72048-122">Abra o Designer de Exibição da Fonte de Dados para a exibição da fonte de dados do **Adventure Works DW 2012**</span><span class="sxs-lookup"><span data-stu-id="72048-122">Open Data Source View Designer for the **Adventure Works DW 2012** data source view.</span></span>

2.  <span data-ttu-id="72048-123">Clique com o botão direito do mouse em qualquer lugar no painel **organizador de diagramas** , clique em **novo diagrama**e especifique `Internet Sales Order Reasons` como o nome para esse novo diagrama.</span><span class="sxs-lookup"><span data-stu-id="72048-123">Right-click anywhere in the **Diagram Organizer** pane, click **New Diagram**, and specify `Internet Sales Order Reasons` as the name for this new diagram.</span></span>

3.  <span data-ttu-id="72048-124">Arraste a tabela **InternetSales** do painel **Tabelas** para o painel **Diagrama** .</span><span class="sxs-lookup"><span data-stu-id="72048-124">Drag the **InternetSales** table to the **Diagram** pane from the **Tables** pane.</span></span>

4.  <span data-ttu-id="72048-125">Clique com o botão direito do mouse em qualquer lugar no painel **Diagrama** e clique em **Adicionar/Remover Tabelas**.</span><span class="sxs-lookup"><span data-stu-id="72048-125">Right-click anywhere in the **Diagram** pane, and then click **Add/Remove Tables**.</span></span>

5.  <span data-ttu-id="72048-126">Na caixa de diálogo **Adicionar/Remover Tabelas** , adicione as tabelas **DimSalesReason** e **FactInternetSalesReason** à lista **Objetos incluídos** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="72048-126">In the **Add/Remove Tables** dialog box, add the **DimSalesReason** table and the **FactInternetSalesReason** table to the **Included objects** list, and then click **OK**.</span></span>

     <span data-ttu-id="72048-127">Observe que as relações de chave primária-chave estrangeira entre as tabelas envolvidas são estabelecidas automaticamente porque essas relações são definidas no banco de dados relacional subjacente.</span><span class="sxs-lookup"><span data-stu-id="72048-127">Notice that the primary key-foreign key relationships between the tables that are involved are established automatically because those relationships are defined in the underlying relational database.</span></span> <span data-ttu-id="72048-128">Se essas relações não foram definidas em um banco de dados relacional subjacente, talvez seja necessário defini-las na exibição da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="72048-128">If these relationships were not defined in the underlying relational database, you would have to define them in the data source view.</span></span>

6.  <span data-ttu-id="72048-129">No menu **Formatar** , aponte para **Layout Automático**e, em seguida, clique em **Diagrama**.</span><span class="sxs-lookup"><span data-stu-id="72048-129">On the **Format** menu, point to **Auto Layout**, and then click **Diagram**.</span></span>

7.  <span data-ttu-id="72048-130">No janela Propriedades, altere a propriedade **FriendlyName** da tabela **DimSalesReason** para `SalesReason` e altere a propriedade **FriendlyName** da tabela **FactInternetSalesReason** para `InternetSalesReason` .</span><span class="sxs-lookup"><span data-stu-id="72048-130">In the Properties window, change the **FriendlyName** property of the **DimSalesReason** table to `SalesReason`, and then change the **FriendlyName** property of the **FactInternetSalesReason** table to `InternetSalesReason`.</span></span>

8.  <span data-ttu-id="72048-131">No painel **Tabelas** , expanda **InternetSalesReason (dbo.FactInternetSalesReason)**, clique em **SalesOrderNumber**e examine a propriedade **DataType** desta coluna de dados na janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="72048-131">In the **Tables** pane, expand **InternetSalesReason (dbo.FactInternetSalesReason)**, click **SalesOrderNumber**, and then review the **DataType** property for this data column in the Properties window.</span></span>

     <span data-ttu-id="72048-132">Observe que o tipo de dados da coluna **SalesOrderNumber** é cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="72048-132">Notice that the data type for the **SalesOrderNumber** column is a string data type.</span></span>

9. <span data-ttu-id="72048-133">Examine os tipos de dados para as outras colunas na `InternetSalesReason` tabela.</span><span class="sxs-lookup"><span data-stu-id="72048-133">Review the data types for the other columns in the `InternetSalesReason` table.</span></span>

     <span data-ttu-id="72048-134">Observe que os tipos de dados das outras duas colunas nessa tabela são numéricos.</span><span class="sxs-lookup"><span data-stu-id="72048-134">Notice that the data types for the other two columns in this table are numeric data types.</span></span>

10. <span data-ttu-id="72048-135">No painel **Tabelas** , clique com o botão direito do mouse em **InternetSalesReason (dbo.FactInternetSalesReason)** e clique em **Explorar Dados**.</span><span class="sxs-lookup"><span data-stu-id="72048-135">In the **Tables** pane, right-click **InternetSalesReason (dbo.FactInternetSalesReason)**, and then click **Explore Data**.</span></span>

     <span data-ttu-id="72048-136">Observe que, para cada número de linha dentro de cada pedido, um valor de chave identifica o motivo das vendas para a compra daquele item de linha, como mostra a imagem a seguir:</span><span class="sxs-lookup"><span data-stu-id="72048-136">Notice that, for each line number within each order, a key value identifies the sales reason for the purchase of that line item, as shown in the following image.</span></span>

     <span data-ttu-id="72048-137">![Valor principal para identificar o motivo das compras](../../2014/tutorials/media/l5-many-to-many-1.gif "Valor principal para identificar o motivo das compras")</span><span class="sxs-lookup"><span data-stu-id="72048-137">![Key value to identify sales reason for purchases](../../2014/tutorials/media/l5-many-to-many-1.gif "Key value to identify sales reason for purchases")</span></span>

## <a name="defining-the-intermediate-measure-group"></a><span data-ttu-id="72048-138">Definindo o grupo de medidas intermediário</span><span class="sxs-lookup"><span data-stu-id="72048-138">Defining the Intermediate Measure Group</span></span>

1.  <span data-ttu-id="72048-139">Alterne para o Designer de Cubo para o cubo do Tutorial do [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] e depois clique na guia **Estrutura do Cubo** .</span><span class="sxs-lookup"><span data-stu-id="72048-139">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Cube Structure** tab.</span></span>

2.  <span data-ttu-id="72048-140">Clique com o botão direito do mouse em qualquer lugar do painel **Medidas** e clique em **Novo Grupo de Medidas**.</span><span class="sxs-lookup"><span data-stu-id="72048-140">Right-click anywhere in the **Measures** pane, and then click **New Measure Group**.</span></span> <span data-ttu-id="72048-141">Para obter mais informações, consulte [Criar medidas e grupos de medidas em modelos multidimensionais](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span><span class="sxs-lookup"><span data-stu-id="72048-141">For more information, see [Create Measures and Measure Groups in Multidimensional Models](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span></span>

3.  <span data-ttu-id="72048-142">Na caixa de diálogo **novo grupo de medidas** , selecione `InternetSalesReason` na lista **selecionar uma tabela na exibição da fonte de dados** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="72048-142">In the **New Measure Group** dialog box, select `InternetSalesReason` in the **Select a table from the data source view** list, and then click **OK**.</span></span>

     <span data-ttu-id="72048-143">Observe que o grupo de medidas **Motivo de Vendas pela Internet** agora é exibido no painel **Medidas** .</span><span class="sxs-lookup"><span data-stu-id="72048-143">Notice that the **Internet Sales Reason** measure group now appears in the **Measures** pane.</span></span>

4.  <span data-ttu-id="72048-144">Expanda o grupo de medidas **Motivo de Vendas pela Internet** .</span><span class="sxs-lookup"><span data-stu-id="72048-144">Expand the **Internet Sales Reason** measure group.</span></span>

     <span data-ttu-id="72048-145">Observe que somente uma única medida está definida para esse novo grupo de medidas, a medida **Contagem de Motivo de Vendas pela Internet** .</span><span class="sxs-lookup"><span data-stu-id="72048-145">Notice that only a single measure is defined for this new measure group, the **Internet Sales Reason Count** measure.</span></span>

5.  <span data-ttu-id="72048-146">Selecione **Contagem de Motivo de Vendas pela Internet** e revise as propriedades dessa medida na janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="72048-146">Select **Internet Sales Reason Count** and review the properties of this measure in the Properties window.</span></span>

     <span data-ttu-id="72048-147">Observe que a propriedade **AggregateFunction** dessa medida é definida como **Contagem** em vez de **Soma**.</span><span class="sxs-lookup"><span data-stu-id="72048-147">Notice that the **AggregateFunction** property for this measure is defined as **Count** instead of **Sum**.</span></span> [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]<span data-ttu-id="72048-148">**contagem** escolhida porque o tipo de dados subjacente é um tipo de dados de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="72048-148">chose **Count** because the underlying data type is a string data type.</span></span> <span data-ttu-id="72048-149">As outras duas colunas da tabela de fatos subjacente não foram selecionadas como medidas porque o [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] identificou-as como chaves numéricas em vez de medidas reais.</span><span class="sxs-lookup"><span data-stu-id="72048-149">The other two columns in the underlying fact table were not selected as measures because [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] detected them as numeric keys instead of as actual measures.</span></span> <span data-ttu-id="72048-150">Para obter mais informações, consulte [Definir um comportamento semiaditivo](multidimensional-models/define-semiadditive-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="72048-150">For more information, see [Define Semiadditive Behavior](multidimensional-models/define-semiadditive-behavior.md).</span></span>

6.  <span data-ttu-id="72048-151">Na janela Propriedades, altere a propriedade **Visible** da medida **Contagem do Motivo de Vendas pela Internet** para **False**.</span><span class="sxs-lookup"><span data-stu-id="72048-151">In the Properties window, change the **Visible** property of the **Internet Sales Reason Count** measure to **False**.</span></span>

     <span data-ttu-id="72048-152">Essa medida só será usada para unir a dimensão Motivo de Vendas que você definirá próxima ao grupo de medidas Vendas pela Internet.</span><span class="sxs-lookup"><span data-stu-id="72048-152">This measure will only be used to join the Sales Reason dimension that you will define next to the Internet Sales measure group.</span></span> <span data-ttu-id="72048-153">Os usuários não navegarão nessa medida diretamente.</span><span class="sxs-lookup"><span data-stu-id="72048-153">Users will not browse this measure directly.</span></span>

     <span data-ttu-id="72048-154">A imagem a seguir mostra as propriedades da medida **Contagem do Motivo de Vendas pela Internet** .</span><span class="sxs-lookup"><span data-stu-id="72048-154">The following image shows the properties for the **Internet Sales Reason Count** measure.</span></span>

     <span data-ttu-id="72048-155">![Propriedades da medida Conta do Motivo de Vendas pela Internet](../../2014/tutorials/media/l5-many-to-many-2.gif "Propriedades da medida Conta do Motivo de Vendas pela Internet")</span><span class="sxs-lookup"><span data-stu-id="72048-155">![Properties for Internet Sales Reason Count measure](../../2014/tutorials/media/l5-many-to-many-2.gif "Properties for Internet Sales Reason Count measure")</span></span>

## <a name="defining-the-many-to-many-dimension"></a><span data-ttu-id="72048-156">Definindo a dimensão muitos para muitos</span><span class="sxs-lookup"><span data-stu-id="72048-156">Defining the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="72048-157">Em Gerenciador de Soluções, clique com o botão direito do mouse em **dimensões**e clique em **nova dimensão**.</span><span class="sxs-lookup"><span data-stu-id="72048-157">In Solution Explorer, right-click **Dimensions**, and then click **New Dimension**.</span></span>

2.  <span data-ttu-id="72048-158">Na página **Bem-vindo ao Assistente para Dimensões** , clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="72048-158">On the **Welcome to the Dimension Wizard** page, click **Next**.</span></span>

3.  <span data-ttu-id="72048-159">Na página **Selecionar Método de Criação** , verifique se a opção **Usar uma tabela existente** está selecionada e clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="72048-159">On the **Select Creation Method** page, verify that the **Use an existing table** option is selected, and then click **Next**.</span></span>

4.  <span data-ttu-id="72048-160">Na página **Especificar Informações sobre a Origem** , verifique se a exibição da fonte de dados do [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 está selecionada.</span><span class="sxs-lookup"><span data-stu-id="72048-160">On the **Specify Source Information** page, verify that the [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 data source view is selected.</span></span>

5.  <span data-ttu-id="72048-161">Na lista **tabela principal** , selecione `SalesReason` .</span><span class="sxs-lookup"><span data-stu-id="72048-161">In the **Main table** list, select `SalesReason`.</span></span>

6.  <span data-ttu-id="72048-162">Na lista **Colunas de chave** , verifique se **SalesReasonKey** está listado.</span><span class="sxs-lookup"><span data-stu-id="72048-162">In the **Key columns** list, verify that **SalesReasonKey** is listed.</span></span>

7.  <span data-ttu-id="72048-163">Na lista **Coluna de nome** , selecione **SalesReasonName**.</span><span class="sxs-lookup"><span data-stu-id="72048-163">In the **Name column** list, select **SalesReasonName**.</span></span>

8.  <span data-ttu-id="72048-164">Clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="72048-164">Click **Next**.</span></span>

9. <span data-ttu-id="72048-165">Na página **Selecionar Atributos de Dimensão** , o atributo **Chave do Motivo de Vendas** é selecionado automaticamente, pois se trata de um atributo de chave.</span><span class="sxs-lookup"><span data-stu-id="72048-165">On the **Select Dimension Attributes** page, the **Sales Reason Key** attribute is automatically selected because it is the key attribute.</span></span> <span data-ttu-id="72048-166">Marque a caixa de seleção ao lado do atributo **tipo de motivo de motivo de vendas** , altere seu nome para `Sales Reason Type` e clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="72048-166">Select the check box beside the **Sales Reason Reason Type** attribute, change its name to `Sales Reason Type`, and then click **Next**.</span></span>

10. <span data-ttu-id="72048-167">Na página **Concluindo o Assistente** , clique em **Concluir** para criar a dimensão Motivo de Vendas.</span><span class="sxs-lookup"><span data-stu-id="72048-167">On the **Completing the Wizard** page, click **Finish** to create the Sales Reason dimension.</span></span>

11. <span data-ttu-id="72048-168">No menu **Arquivo**, clique em **Salvar Tudo**.</span><span class="sxs-lookup"><span data-stu-id="72048-168">On the **File** menu, click **Save All**.</span></span>

12. <span data-ttu-id="72048-169">No painel **atributos** do designer de dimensão da dimensão **motivo de vendas** , selecione chave de **motivo de vendas**e altere a propriedade **nome** no janela Propriedades para`Sales Reason.`</span><span class="sxs-lookup"><span data-stu-id="72048-169">In the **Attributes** pane of the Dimension Designer for the **Sales Reason** dimension, select **Sales Reason Key**, and then change the **Name** property in the Properties window to `Sales Reason.`</span></span>

13. <span data-ttu-id="72048-170">No painel **hierarquias** do designer de dimensão, crie uma hierarquia de usuário **motivos de vendas** que contém o nível `Sales Reason Type` e o nível de **motivo de vendas** , nessa ordem.</span><span class="sxs-lookup"><span data-stu-id="72048-170">In the **Hierarchies** pane of the Dimension Designer, create a **Sales Reasons** user hierarchy that contains the `Sales Reason Type` level and the **Sales Reason** level, in that order.</span></span>

14. <span data-ttu-id="72048-171">No janela Propriedades, defina `All Sales Reasons` como o valor para a propriedade de todos os **Membros** da hierarquia motivos de vendas.</span><span class="sxs-lookup"><span data-stu-id="72048-171">In the Properties window, define `All Sales Reasons` as the value for the **AllMemberName** property of the Sales Reasons hierarchy.</span></span>

15. <span data-ttu-id="72048-172">Defina `All Sales Reasons` como o valor para a propriedade **AttributeAllMemberName** da dimensão motivo de vendas.</span><span class="sxs-lookup"><span data-stu-id="72048-172">Define `All Sales Reasons` as the value for **AttributeAllMemberName** property of the Sales Reason dimension.</span></span>

16. <span data-ttu-id="72048-173">Para adicionar uma dimensão criada recentemente ao cubo do Tutorial do [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] como uma dimensão do cubo, alterne para o **Designer de Cubo**.</span><span class="sxs-lookup"><span data-stu-id="72048-173">To add the newly created dimension to the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube as a cube dimension, switch to **Cube Designer**.</span></span> <span data-ttu-id="72048-174">Na guia **Estrutura do Cubo** , clique com o botão direito do mouse no painel **Dimensões** e selecione **Adicionar Dimensão do Cubo**.</span><span class="sxs-lookup"><span data-stu-id="72048-174">On the **Cube Structure** tab, right-click in the **Dimensions** pane and select **Add Cube Dimension**.</span></span>

17. <span data-ttu-id="72048-175">Na caixa de diálogo **Adicionar Dimensão do Cubo** , selecione **Motivo de Vendas** e então clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="72048-175">In the **Add Cube Dimension** dialog box, select **Sales Reason** and then click **OK**.</span></span>

18. <span data-ttu-id="72048-176">No menu **Arquivo**, clique em **Salvar Tudo**.</span><span class="sxs-lookup"><span data-stu-id="72048-176">On the **File** menu, click **Save All**.</span></span>

## <a name="defining-the-many-to-many-relationship"></a><span data-ttu-id="72048-177">Definindo a relação muitos para muitos</span><span class="sxs-lookup"><span data-stu-id="72048-177">Defining the Many to Many Relationship</span></span>

1.  <span data-ttu-id="72048-178">Alterne para o Designer de Cubo para o cubo do Tutorial do [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] e então clique na guia **Uso da Dimensão** .</span><span class="sxs-lookup"><span data-stu-id="72048-178">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Dimension Usage** tab.</span></span>

     <span data-ttu-id="72048-179">Observe que a dimensão **Motivo de Vendas** tem uma relação regular definida com o grupo de medidas **Motivo de Vendas pela Internet** , mas não tem relação definida com o grupo de medidas **Vendas pela Internet** ou **Vendas do Revendedor** .</span><span class="sxs-lookup"><span data-stu-id="72048-179">Notice that the **Sales Reason** dimension has a regular relationship defined with the **Internet Sales Reason** measure group, but has no relationship defined with the **Internet Sales** or **Reseller Sales** measure groups.</span></span> <span data-ttu-id="72048-180">Observe também que a dimensão **Detalhes do Pedido de Vendas pela Internet** tem uma relação regular definida com a dimensão **Motivo de Vendas pela Internet** que, por sua vez, tem uma **Relação de Fato** com o grupo de medidas **Vendas pela Internet** .</span><span class="sxs-lookup"><span data-stu-id="72048-180">Notice also that the **Internet Sales Order Details** dimension has a regular relationship defined with the **Internet Sales Reason** dimension, which in turn has a **Fact Relationship** with the **Internet Sales** measure group.</span></span> <span data-ttu-id="72048-181">Se essa dimensão não existir (ou outra dimensão com uma relação com os grupos de medidas **Motivo de Vendas pela Internet** e **Vendas pela Internet** não existir), você não conseguirá definir a relação muitos-para-muitos.</span><span class="sxs-lookup"><span data-stu-id="72048-181">If this dimension was not present (or another dimension with a relationship with both the **Internet Sales Reason** and the **Internet Sales** measure group were not present), you would not be able to define the many-to-many relationship.</span></span>

2.  <span data-ttu-id="72048-182">Clique na célula na interseção do grupo de medidas **Vendas pela Internet** e da dimensão **Motivo de Vendas** e clique no botão Procurar (**...**).</span><span class="sxs-lookup"><span data-stu-id="72048-182">Click the cell at the intersection of the **Internet Sales** measure group and the **Sales Reason** dimension and then click the browse button (**...**).</span></span>

3.  <span data-ttu-id="72048-183">Na caixa de diálogo **Definir Relação** , selecione **Muitos-para-Muitos** na lista **Selecionar tipo de relação** .</span><span class="sxs-lookup"><span data-stu-id="72048-183">In the **Define Relationship** dialog box, select **Many-to-Many** in the **Select relationship type** list.</span></span>

     <span data-ttu-id="72048-184">Você tem que definir o grupo de medidas intermediário que conecta a dimensão Motivo de Vendas ao grupo de medidas Vendas pela Internet.</span><span class="sxs-lookup"><span data-stu-id="72048-184">You have to define the intermediate measure group that connects the Sales Reason dimension to the Internet Sales measure group.</span></span>

4.  <span data-ttu-id="72048-185">Na lista **Grupo de medidas intermediário** , selecione **Motivo de Vendas pela Internet**.</span><span class="sxs-lookup"><span data-stu-id="72048-185">In the **Intermediate measure group** list, select **Internet Sales Reason**.</span></span>

     <span data-ttu-id="72048-186">A imagem a seguir mostra as alterações na caixa de diálogo **Definir Relação** :</span><span class="sxs-lookup"><span data-stu-id="72048-186">The following image shows the changes in the **Define Relationship** dialog box.</span></span>

     <span data-ttu-id="72048-187">![Caixa de diálogo Definir Relação](../../2014/tutorials/media/l5-many-to-many-3.gif "Caixa de diálogo Definir Relação")</span><span class="sxs-lookup"><span data-stu-id="72048-187">![Define Relationship dialog box](../../2014/tutorials/media/l5-many-to-many-3.gif "Define Relationship dialog box")</span></span>

5.  <span data-ttu-id="72048-188">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="72048-188">Click **OK**.</span></span>

     <span data-ttu-id="72048-189">Observe o ícone muitos para muitos que representa a relação entre a dimensão Motivo de Vendas e o grupo de medidas Vendas pela Internet.</span><span class="sxs-lookup"><span data-stu-id="72048-189">Notice the many-to-many icon that represents the relationship between the Sales Reason dimension and the Internet Sales measure group.</span></span>

## <a name="browsing-the-cube-and-the-many-to-many-dimension"></a><span data-ttu-id="72048-190">Navegando no cubo e na dimensão muitos para muitos</span><span class="sxs-lookup"><span data-stu-id="72048-190">Browsing the Cube and the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="72048-191">No menu **Compilar** , clique em **Implantar Tutorial do Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="72048-191">On the **Build** menu, click **Deploy Analysis Services Tutorial**.</span></span>

2.  <span data-ttu-id="72048-192">Quando a implantação finalizar com êxito, alterne para a guia **Navegador** do Designer de Cubo para o cubo do Tutorial do [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] e depois clique no botão **Reconectar**.</span><span class="sxs-lookup"><span data-stu-id="72048-192">When deployment has successfully completed, switch to the **Browser** tab in Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click **Reconnect**.</span></span>

3.  <span data-ttu-id="72048-193">Adicione a medida **Vendas pela Internet/Valor das Vendas** à área de dados do painel de dados.</span><span class="sxs-lookup"><span data-stu-id="72048-193">Add the **Internet Sales-Sales Amount** measure to the data area of the data pane.</span></span>

4.  <span data-ttu-id="72048-194">Adicione a hierarquia definida pelo usuário **Motivos de Vendas** da dimensão **Motivo de Vendas** à área de linha do painel de dados.</span><span class="sxs-lookup"><span data-stu-id="72048-194">Add the **Sales Reasons** user-defined hierarchy from the **Sales Reason** dimension to the row area of the data pane.</span></span>

5.  <span data-ttu-id="72048-195">No painel de metadados, expanda **Cliente**, **Local**, **Geografia do Cliente**, **Membros**, **Todos os Clientes**, **Austrália**, clique com o botão direito do mouse em **Queensland**e, por fim, clique em **Adicionar ao Filtro**.</span><span class="sxs-lookup"><span data-stu-id="72048-195">In the metadata pane, expand **Customer**, expand **Location**, expand **Customer Geography**, expand **Members**, expand **All Customers**, expand **Australia**, right-click **Queensland**, and then click **Add to Filter**.</span></span>

6.  <span data-ttu-id="72048-196">Expanda cada membro do `Sales Reason Type` nível para revisar os valores de dólar associados a cada motivo pelo qual um cliente do Queensland deu sua compra de um [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] produto pela Internet.</span><span class="sxs-lookup"><span data-stu-id="72048-196">Expand each member of the `Sales Reason Type` level to review the dollar values that are associated with each reason a customer in Queensland gave for their purchase of an [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] product over the Internet.</span></span>

     <span data-ttu-id="72048-197">Observe que os totais associados a cada motivo de vendas são maiores do que as vendas totais.</span><span class="sxs-lookup"><span data-stu-id="72048-197">Notice that the totals that are associated with each sales reason add up to more than the total sales.</span></span> <span data-ttu-id="72048-198">Isso acontece porque alguns clientes citaram vários motivos para suas compras.</span><span class="sxs-lookup"><span data-stu-id="72048-198">This is because some customers cited multiple reasons for their purchase.</span></span>

     <span data-ttu-id="72048-199">A imagem a seguir mostra os painéis **Filtro** e **Dados** do Designer de Cubo:</span><span class="sxs-lookup"><span data-stu-id="72048-199">The following image shows the **Filter** pane and **Data** pane of Cube Designer.</span></span>

     <span data-ttu-id="72048-200">![Painéis Filtro e Dados do Designer de Cubo](../../2014/tutorials/media/l5-many-to-many-5.gif "Painéis Filtro e Dados do Designer de Cubo")</span><span class="sxs-lookup"><span data-stu-id="72048-200">![Filter and Data panes of Cube Designer](../../2014/tutorials/media/l5-many-to-many-5.gif "Filter and Data panes of Cube Designer")</span></span>

## <a name="next-task-in-lesson"></a><span data-ttu-id="72048-201">Próxima tarefa da lição</span><span class="sxs-lookup"><span data-stu-id="72048-201">Next Task in Lesson</span></span>
 [<span data-ttu-id="72048-202">Definindo a granularidade da dimensão dentro de um grupo de medidas</span><span class="sxs-lookup"><span data-stu-id="72048-202">Defining Dimension Granularity within a Measure Group</span></span>](lesson-5-4-defining-dimension-granularity-within-a-measure-group.md)

## <a name="see-also"></a><span data-ttu-id="72048-203">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="72048-203">See Also</span></span>
 <span data-ttu-id="72048-204">[Trabalhar com diagramas no designer de exibição da fonte de dados &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [relações de dimensão](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [definem uma relação muitos-para-muitos e propriedades de relação muitos-para-muitos](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span><span class="sxs-lookup"><span data-stu-id="72048-204">[Work with Diagrams in Data Source View Designer &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span></span>


