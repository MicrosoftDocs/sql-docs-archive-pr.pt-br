---
title: Hierarquias desbalanceadas | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- ragged hierarchies [Analysis Services]
ms.assetid: e40a5788-7ede-4b0f-93ab-46ca33d0cace
author: minewiskan
ms.author: owend
ms.openlocfilehash: 02cbb24b7ae80facf0ddbb1495fccc8f848df377
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684930"
---
# <a name="ragged-hierarchies"></a><span data-ttu-id="d00a6-102">Hierarquias desbalanceadas</span><span class="sxs-lookup"><span data-stu-id="d00a6-102">Ragged Hierarchies</span></span>
  <span data-ttu-id="d00a6-103">Uma hierarquia desbalanceada é uma hierarquia definida pelo usuário que tem um número irregular de níveis.</span><span class="sxs-lookup"><span data-stu-id="d00a6-103">A ragged hierarchy is a user-defined hierarchy that has an uneven number of levels.</span></span> <span data-ttu-id="d00a6-104">Exemplos comuns incluem o organograma, onde um gerente de alto nível tem os gerentes departamentais e funcionários não gerentes como subordinados diretos, ou hierarquias geográficas constituídas de País-Região-Cidades, onde algumas cidades não têm um estado ou província pai, como Washington D.C., a Cidade do Vaticano ou Nova Délhi.</span><span class="sxs-lookup"><span data-stu-id="d00a6-104">Common examples include an organizational chart where a high-level manager has both departmental managers and non-managers as direct reports, or geographic hierarchies composed of Country-Region-City, where some cities lack a parent State or Province, such as Washington D.C., Vatican City, or New Delhi.</span></span>  
  
 <span data-ttu-id="d00a6-105">Na maioria das hierarquias em uma dimensão, cada nível tem o mesmo número de membros acima dele, como qualquer outro membro no mesmo nível.</span><span class="sxs-lookup"><span data-stu-id="d00a6-105">For most hierarchies in a dimension, each level has the same number of members above it as any other member at the same level.</span></span> <span data-ttu-id="d00a6-106">Uma hierarquia desbalanceada é diferente porque o pai lógico de pelo menos um membro não está no nível imediatamente acima do membro.</span><span class="sxs-lookup"><span data-stu-id="d00a6-106">A ragged hierarchy is different in that the logical parent of at least one member is not in the level immediately above the member.</span></span> <span data-ttu-id="d00a6-107">Quando isso acontece, a hierarquia desce a níveis diferentes para caminhos de busca detalhada diferentes.</span><span class="sxs-lookup"><span data-stu-id="d00a6-107">When this occurs, the hierarchy descends to different levels for different drilldown paths.</span></span> <span data-ttu-id="d00a6-108">Em um aplicativo cliente, isso pode tornar os caminhos de busca detalhada desnecessariamente complicados.</span><span class="sxs-lookup"><span data-stu-id="d00a6-108">In a client application, this can make drilldown paths unnecessarily complicated.</span></span>  
  
 <span data-ttu-id="d00a6-109">Os aplicativos cliente variam de acordo com a forma de tratamento de uma hierarquia desbalanceada.</span><span class="sxs-lookup"><span data-stu-id="d00a6-109">Client applications vary in how well they handle a ragged hierarchy.</span></span> <span data-ttu-id="d00a6-110">Se existirem hierarquias desbalanceadas em seu modelo, prepare-se para se empenhar ainda mais para obter o comportamento de renderização esperado.</span><span class="sxs-lookup"><span data-stu-id="d00a6-110">If ragged hierarchies exist in your model, be prepared to do a little extra work to get the rendering behavior you expect.</span></span>  
  
 <span data-ttu-id="d00a6-111">A primeira etapa é verificar como o aplicativo cliente trata o caminho de busca detalhada.</span><span class="sxs-lookup"><span data-stu-id="d00a6-111">As a first step, check the client application to see how it handles the drilldown path.</span></span> <span data-ttu-id="d00a6-112">Por exemplo, o Excel repete os nomes pai como espaços reservados para valores ausentes.</span><span class="sxs-lookup"><span data-stu-id="d00a6-112">For example, Excel repeats the parent names as placeholders for missing values.</span></span> <span data-ttu-id="d00a6-113">Para ver esse comportamento, crie uma Tabela Dinâmica usando a dimensão Sales Territory no modelo multidimensional do Adventure Works.</span><span class="sxs-lookup"><span data-stu-id="d00a6-113">To see this behavior yourself, build a PivotTable using the Sales Territory dimension in the Adventure Works multidimensional model.</span></span> <span data-ttu-id="d00a6-114">Em uma Tabela Dinâmica que tem os atributos Group, Country e Region de Sales Territory, você verá que os países sem um valor de região obterão um espaço reservado; nesse caso, uma repetição do pai acima dele (nome do país).</span><span class="sxs-lookup"><span data-stu-id="d00a6-114">In a PivotTable having the Sales Territory attributes Group, Country, and Region, you will see that countries missing a region value will get a placeholder, in this case a repeat of the parent above it (Country name).</span></span> <span data-ttu-id="d00a6-115">Esse comportamento deriva da propriedade da cadeia de conexão MDX Compatibility=1, que é fixa no Excel.</span><span class="sxs-lookup"><span data-stu-id="d00a6-115">This behavior derives from the MDX Compatibility=1 connection string property that is fixed within Excel.</span></span> <span data-ttu-id="d00a6-116">Se o cliente não fornece naturalmente os comportamentos de busca detalhada buscados, você pode definir propriedades no modelo para alterar pelo menos alguns desses comportamentos.</span><span class="sxs-lookup"><span data-stu-id="d00a6-116">If the client does not naturally provide the drill-down behaviors you are looking for, you can set properties in the model to change at least some of those behaviors.</span></span>  
  
 <span data-ttu-id="d00a6-117">Este tópico contém as seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="d00a6-117">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="d00a6-118">Abordagens para modificar a navegação de busca detalhada em uma hierarquia desbalanceada</span><span class="sxs-lookup"><span data-stu-id="d00a6-118">Approaches for modifying drilldown navigation in a ragged hierarchy</span></span>](#bkmk_approach)  
  
-   [<span data-ttu-id="d00a6-119">Definir HideMemberIf para ocultar membros em uma hierarquia regular</span><span class="sxs-lookup"><span data-stu-id="d00a6-119">Set HideMemberIf to hide members in a regular hierarchy</span></span>](#bkmk_Hide)  
  
-   [<span data-ttu-id="d00a6-120">Definir a compatibilidade MDX para determinar como espaços reservados são representados em aplicativos cliente</span><span class="sxs-lookup"><span data-stu-id="d00a6-120">Set MDX Compatibility to determine how placeholders are represented in client applications</span></span>](#bkmk_Mdx)  
  
##  <a name="approaches-for-modifying-drilldown-navigation-in-a-ragged-hierarchy"></a><a name="bkmk_approach"></a> <span data-ttu-id="d00a6-121">Abordagens para modificar a navegação da busca detalhada em uma hierarquia desbalanceada</span><span class="sxs-lookup"><span data-stu-id="d00a6-121">Approaches for modifying drilldown navigation in a ragged hierarchy</span></span>  
 <span data-ttu-id="d00a6-122">A presença de uma hierarquia desbalanceada se torna um problema quando a navegação de busca detalhada não retorna valores esperados ou é percebida como inadequado para uso.</span><span class="sxs-lookup"><span data-stu-id="d00a6-122">The presence of a ragged hierarchy becomes a problem when drilldown navigation does not return expected values or is perceived as awkward to use.</span></span> <span data-ttu-id="d00a6-123">Para corrigir problemas de navegação que resultam de hierarquias desbalanceadas, considere estas opções:</span><span class="sxs-lookup"><span data-stu-id="d00a6-123">To fix navigation problems that result from ragged hierarchies, consider these options:</span></span>  
  
-   <span data-ttu-id="d00a6-124">Use uma hierarquia regular, mas defina a propriedade `HideMemberIf` em cada nível para especificar se um nível ausente é visualizado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="d00a6-124">Use a regular hierarchy but set the `HideMemberIf` property on each level to specify whether a missing level is visualized to the user.</span></span> <span data-ttu-id="d00a6-125">Ao definir `HideMemberIf`, você também deve definir `MDXCompatibility` na cadeia de conexão para substituir comportamentos da navegação padrão.</span><span class="sxs-lookup"><span data-stu-id="d00a6-125">When setting `HideMemberIf`, you should also set `MDXCompatibility` on the connection string to override default navigation behaviors.</span></span> <span data-ttu-id="d00a6-126">As instruções para definir essas propriedades são fornecidas neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d00a6-126">Instructions for setting these properties are in this topic.</span></span>  
  
-   <span data-ttu-id="d00a6-127">Crie uma hierarquia pai-filho que gerencie explicitamente os membros de nível.</span><span class="sxs-lookup"><span data-stu-id="d00a6-127">Create a parent-child hierarchy that explicitly manages the level members.</span></span> <span data-ttu-id="d00a6-128">Para obter uma ilustração da técnica, consulte [Hierarquia desbalanceada em SSAS (postagem de blog)](http://dwbi1.wordpress.com/2011/03/30/ragged-hierarchy-in-ssas/).</span><span class="sxs-lookup"><span data-stu-id="d00a6-128">For an illustration of the technique, see [Ragged Hierarchy in SSAS (blog post)](http://dwbi1.wordpress.com/2011/03/30/ragged-hierarchy-in-ssas/).</span></span> <span data-ttu-id="d00a6-129">Para obter mais informações nos manuais online, consulte [hierarquia pai-filho](parent-child-dimension.md).</span><span class="sxs-lookup"><span data-stu-id="d00a6-129">For more information in Books Online, see [Parent-Child Hierarchy](parent-child-dimension.md).</span></span> <span data-ttu-id="d00a6-130">As desvantagens de criar uma hierarquia pai-filho são que você só pode ter uma por dimensão e, em geral, incorre em uma penalidade de desempenho ao calcular agregações para membros intermediários.</span><span class="sxs-lookup"><span data-stu-id="d00a6-130">Downsides to creating a parent-child hierarchy are that you can only have one per dimension, and you typically incur a performance penalty when calculating aggregations for intermediate members.</span></span>  
  
 <span data-ttu-id="d00a6-131">Se a dimensão contém mais de uma hierarquia desbalanceada, você deve usar a primeira abordagem, definindo `HideMemberIf`.</span><span class="sxs-lookup"><span data-stu-id="d00a6-131">If your dimension contains more than one ragged hierarchy, you should use the first approach, setting `HideMemberIf`.</span></span> <span data-ttu-id="d00a6-132">Os desenvolvedores de BI com experiência prática no trabalho com hierarquias desbalanceadas defendem ainda mais as alterações adicionais nas tabelas de dados físicos, criando tabelas separadas para cada nível.</span><span class="sxs-lookup"><span data-stu-id="d00a6-132">BI Developers with practical experience in working with ragged hierarchies go further in advocating for additional changes in the physical data tables, creating separate tables for each level.</span></span> <span data-ttu-id="d00a6-133">Veja [o cubo financeiro do SSAS da Martin Mason – parte 1a – Hierarquias desbalanceadas (blog)](http://martinmason.wordpress.com/2012/03/03/the-ssas-financial-cubepart-1aragged-hierarchies-cont/) para obter detalhes sobre essa técnica.</span><span class="sxs-lookup"><span data-stu-id="d00a6-133">See [Martin Mason's the SSAS Financial Cube-Part 1a-Ragged Hierarchies (blog)](http://martinmason.wordpress.com/2012/03/03/the-ssas-financial-cubepart-1aragged-hierarchies-cont/) for details about this technique.</span></span>  
  
##  <a name="set-hidememberif-to-hide-members-in-a-regular-hierarchy"></a><a name="bkmk_Hide"></a> <span data-ttu-id="d00a6-134">Definir HideMemberIf para ocultar membros em uma hierarquia regular</span><span class="sxs-lookup"><span data-stu-id="d00a6-134">Set HideMemberIf to hide members in a regular hierarchy</span></span>  
 <span data-ttu-id="d00a6-135">Na tabela de uma dimensão imperfeita, os membros logicamente ausentes podem ser representados de formas diferentes.</span><span class="sxs-lookup"><span data-stu-id="d00a6-135">In a ragged dimension's table, the logically missing members can be represented in different ways.</span></span> <span data-ttu-id="d00a6-136">As células da tabela podem conter cadeias de caracteres nulas ou vazias ou podem conter o mesmo valor que o pai, servindo como espaço reservado.</span><span class="sxs-lookup"><span data-stu-id="d00a6-136">The table cells can contain nulls or empty strings, or they can contain the same value as their parent to serve as a placeholder.</span></span> <span data-ttu-id="d00a6-137">A representação de espaços reservados é determinada pelo status de espaço reservado dos membros filho, conforme determinado pela propriedade `HideMemberIf` e pela propriedade de cadeia de conexão `MDX Compatibility` do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="d00a6-137">The representation of placeholders is determined by the placeholder status of child members, as determined by the `HideMemberIf` property, and the `MDX Compatibility` connection string property for the client application.</span></span>  
  
 <span data-ttu-id="d00a6-138">Para aplicativos cliente que oferecem suporte à exibição de hierarquias desbalanceadas, é possível usar essas propriedades para ocultar membros logicamente ausentes.</span><span class="sxs-lookup"><span data-stu-id="d00a6-138">For client applications that support the display of ragged hierarchies, you can use these properties to hide logically missing members.</span></span>  
  
1.  <span data-ttu-id="d00a6-139">No SSDT, clique duas vezes em uma dimensão para abri-la no Designer de Dimensão.</span><span class="sxs-lookup"><span data-stu-id="d00a6-139">In SSDT, double-click a dimension to open it in Dimension Designer.</span></span> <span data-ttu-id="d00a6-140">A primeira guia, Estrutura da Dimensão, mostra hierarquias de atributos no painel Hierarquias.</span><span class="sxs-lookup"><span data-stu-id="d00a6-140">The first tab, Dimension Structure, shows attribute hierarchies in the Hierarchies pane.</span></span>  
  
2.  <span data-ttu-id="d00a6-141">Clique com o botão direito do mouse em um membro na hierarquia e selecione **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="d00a6-141">Right-click a member within the hierarchy and select **Properties**.</span></span> <span data-ttu-id="d00a6-142">Defina `HideMemberIf` com um dos valores descritos a seguir.</span><span class="sxs-lookup"><span data-stu-id="d00a6-142">Set `HideMemberIf` to one of the values described below.</span></span>  
  
    |<span data-ttu-id="d00a6-143">Configuração de HideMemberIf</span><span class="sxs-lookup"><span data-stu-id="d00a6-143">HideMemberIf Setting</span></span>|<span data-ttu-id="d00a6-144">Descrição</span><span class="sxs-lookup"><span data-stu-id="d00a6-144">Description</span></span>|  
    |--------------------------|-----------------|  
    |`Never`|<span data-ttu-id="d00a6-145">Os membros do nível nunca são ocultos.</span><span class="sxs-lookup"><span data-stu-id="d00a6-145">Level members are never hidden.</span></span> <span data-ttu-id="d00a6-146">Este é o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="d00a6-146">This is the default value.</span></span>|  
    |<span data-ttu-id="d00a6-147">**OnlyChildWithNoName**</span><span class="sxs-lookup"><span data-stu-id="d00a6-147">**OnlyChildWithNoName**</span></span>|<span data-ttu-id="d00a6-148">Um membro do nível ficará oculto quando for o único filho de seu pai e seu nome for uma cadeia de caracteres nula ou vazia.</span><span class="sxs-lookup"><span data-stu-id="d00a6-148">A level member is hidden when it is the only child of its parent and its name is null or an empty string.</span></span>|  
    |<span data-ttu-id="d00a6-149">**OnlyChildWithParentName**</span><span class="sxs-lookup"><span data-stu-id="d00a6-149">**OnlyChildWithParentName**</span></span>|<span data-ttu-id="d00a6-150">Um membro do nível ficará oculto quando for o único filho de seu pai e seu for nome idêntico ao nome do pai.</span><span class="sxs-lookup"><span data-stu-id="d00a6-150">A level member is hidden when it is the only child of its parent and its name is the same as the name of its parent.</span></span>|  
    |<span data-ttu-id="d00a6-151">**NoName**</span><span class="sxs-lookup"><span data-stu-id="d00a6-151">**NoName**</span></span>|<span data-ttu-id="d00a6-152">Um membro do nível ficará oculto quando seu nome estiver vazio.</span><span class="sxs-lookup"><span data-stu-id="d00a6-152">A level member is hidden when its name is empty.</span></span>|  
    |<span data-ttu-id="d00a6-153">**ParentName**</span><span class="sxs-lookup"><span data-stu-id="d00a6-153">**ParentName**</span></span>|<span data-ttu-id="d00a6-154">Um membro do nível ficará oculto quando seu nome for idêntico ao de seu pai.</span><span class="sxs-lookup"><span data-stu-id="d00a6-154">A level member is hidden when its name is identical to that of its parent.</span></span>|  
  
##  <a name="set-mdx-compatibility-to-determine-how-placeholders-are-represented-in-client-applications"></a><a name="bkmk_Mdx"></a><span data-ttu-id="d00a6-155">Definir a compatibilidade MDX para determinar como os espaços reservados são representados em aplicativos cliente</span><span class="sxs-lookup"><span data-stu-id="d00a6-155">Set MDX Compatibility to determine how placeholders are represented in client applications</span></span>  
 <span data-ttu-id="d00a6-156">Após definir `HideMemberIf` em um nível de hierarquia, defina também a propriedade `MDX Compatibility` na cadeia de conexão enviada do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="d00a6-156">After setting `HideMemberIf` on a hierarchy level, you should also set the `MDX Compatibility` property in the connection string sent from the client application.</span></span> <span data-ttu-id="d00a6-157">A definição `MDX Compatibility` determina se o `HideMemberIf` é usado.</span><span class="sxs-lookup"><span data-stu-id="d00a6-157">The `MDX Compatibility` setting determines whether the `HideMemberIf` is used.</span></span>  
  
|<span data-ttu-id="d00a6-158">Definição de MDX Compatibility</span><span class="sxs-lookup"><span data-stu-id="d00a6-158">MDX Compatibility Setting</span></span>|<span data-ttu-id="d00a6-159">Descrição</span><span class="sxs-lookup"><span data-stu-id="d00a6-159">Description</span></span>|<span data-ttu-id="d00a6-160">Uso</span><span class="sxs-lookup"><span data-stu-id="d00a6-160">Usage</span></span>|  
|-------------------------------|-----------------|-----------|  
|<span data-ttu-id="d00a6-161">**1**</span><span class="sxs-lookup"><span data-stu-id="d00a6-161">**1**</span></span>|<span data-ttu-id="d00a6-162">Mostrar um valor de espaço reservado.</span><span class="sxs-lookup"><span data-stu-id="d00a6-162">Show a placeholder value.</span></span>|<span data-ttu-id="d00a6-163">Esse é o padrão usado pelo Excel, pelo SSDT e pelo SSMS.</span><span class="sxs-lookup"><span data-stu-id="d00a6-163">This is the default used by Excel, SSDT, and SSMS.</span></span> <span data-ttu-id="d00a6-164">Ele orienta o servidor a retornar valores de espaço reservado ao detalhar níveis vazios em uma hierarquia desbalanceada.</span><span class="sxs-lookup"><span data-stu-id="d00a6-164">It instructs the server to return placeholder values when drilling down empty levels in a ragged hierarchy.</span></span> <span data-ttu-id="d00a6-165">Se você clicar no valor de espaço reservado, poderá continuar até obter os nós filho (folha)</span><span class="sxs-lookup"><span data-stu-id="d00a6-165">If you click the placeholder value, you can continue down to get to the child (leaf) nodes.</span></span><br /><br /> <span data-ttu-id="d00a6-166">O Excel tem a cadeia de conexão usada para conectar-se ao Analysis Services, e ele sempre define `MDX Compatibility` como 1 em cada nova conexão.</span><span class="sxs-lookup"><span data-stu-id="d00a6-166">Excel owns the connection string used to connect to Analysis Services, and it always sets `MDX Compatibility` to 1 on each new connection.</span></span> <span data-ttu-id="d00a6-167">Esse comportamento preserva a compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="d00a6-167">This behavior preserves backward compatibility.</span></span>|  
|<span data-ttu-id="d00a6-168">**2**</span><span class="sxs-lookup"><span data-stu-id="d00a6-168">**2**</span></span>|<span data-ttu-id="d00a6-169">Oculte um valor de espaço reservado (um valor nulo ou uma duplicata do nível pai), mas mostre outros níveis e nós com valores relevantes.</span><span class="sxs-lookup"><span data-stu-id="d00a6-169">Hide a placeholder value (either a null value or a duplicate of the parent level), but show other levels and nodes having relevant values.</span></span>|<span data-ttu-id="d00a6-170">`MDX Compatibility`=2 costuma ser visto como a configuração preferencial em termos de hierarquias desbalanceadas.</span><span class="sxs-lookup"><span data-stu-id="d00a6-170">`MDX Compatibility`=2 is typically viewed as the preferred setting in terms of ragged hierarchies.</span></span> <span data-ttu-id="d00a6-171">Um relatório [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] e alguns aplicativos cliente de terceiros talvez persistam nessa configuração.</span><span class="sxs-lookup"><span data-stu-id="d00a6-171">A [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] report and some third-party client applications can persist this setting.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="d00a6-172">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d00a6-172">See Also</span></span>  
 <span data-ttu-id="d00a6-173">[Criar hierarquias definidas pelo usuário](user-defined-hierarchies-create.md) </span><span class="sxs-lookup"><span data-stu-id="d00a6-173">[Create User-Defined Hierarchies](user-defined-hierarchies-create.md) </span></span>  
 <span data-ttu-id="d00a6-174">[Hierarquias de usuário](../multidimensional-models-olap-logical-dimension-objects/user-hierarchies.md) </span><span class="sxs-lookup"><span data-stu-id="d00a6-174">[User Hierarchies](../multidimensional-models-olap-logical-dimension-objects/user-hierarchies.md) </span></span>  
 <span data-ttu-id="d00a6-175">[Hierarquia pai-filho](parent-child-dimension.md) </span><span class="sxs-lookup"><span data-stu-id="d00a6-175">[Parent-Child Hierarchy](parent-child-dimension.md) </span></span>  
 [<span data-ttu-id="d00a6-176">Propriedades de cadeia de conexão &#40;Analysis Services&#41;</span><span class="sxs-lookup"><span data-stu-id="d00a6-176">Connection String Properties &#40;Analysis Services&#41;</span></span>](https://docs.microsoft.com/analysis-services/instances/connection-string-properties-analysis-services)  
  
  
