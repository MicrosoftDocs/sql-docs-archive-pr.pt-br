---
title: Conceder acesso personalizado a dados de dimensão (Analysis Services) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.roledesignerdialog.dimensiondata.f1
helpviewer_keywords:
- dimensions [Analysis Services], security
- AllowedSet property
- IsAllowed property
- DeniedSet property
- user access rights [Analysis Services], dimensions
- custom dimension data access [Analysis Services]
- permissions [Analysis Services], dimensions
- DefaultMember property
- VisualTotals property
- ApplyDenied property
ms.assetid: b028720d-3785-4381-9572-157d13ec4291
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4d3f91fef6410e05bfd9014f3f2db67530e83e5e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87678320"
---
# <a name="grant-custom-access-to-dimension-data-analysis-services"></a><span data-ttu-id="aaac7-102">Conceder acesso personalizado a dados da dimensão (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="aaac7-102">Grant custom access to dimension data (Analysis Services)</span></span>
  <span data-ttu-id="aaac7-103">Após habilitar o acesso de leitura a um cubo, você pode definir permissões adicionais que permitem ou negam explicitamente o acesso a membros de dimensão (incluindo as medidas contidas na dimensão de medidas que contém todas as medidas usadas em um cubo).</span><span class="sxs-lookup"><span data-stu-id="aaac7-103">After enabling read access to a cube, you can set additional permissions that explicitly allow or deny access to dimension members (including measures contained in the Measures Dimension containing all of the measures used in a cube).</span></span> <span data-ttu-id="aaac7-104">Por exemplo, considerando várias categorias de revendedores, você pode querer definir as permissões para excluir dados de um tipo de negócio específico.</span><span class="sxs-lookup"><span data-stu-id="aaac7-104">For example, given multiple categories of resellers, you might want to set permissions to exclude data for a specific business type.</span></span> <span data-ttu-id="aaac7-105">A ilustração a seguir mostra o antes e o depois da negação de acesso ao tipo de negócio Depósito na dimensão do Revendedor.</span><span class="sxs-lookup"><span data-stu-id="aaac7-105">The following illustration is a before-and-after effect of denying access to the Warehouse business type in the Reseller dimension.</span></span>  
  
 <span data-ttu-id="aaac7-106">![Tabelas dinâmicas com e sem um membro de dimensão](../media/ssas-permsdimdenied.png "Tabelas dinâmicas com e sem um membro de dimensão")</span><span class="sxs-lookup"><span data-stu-id="aaac7-106">![PivotTables with and without a dimension member](../media/ssas-permsdimdenied.png "PivotTables with and without a dimension member")</span></span>  
  
 <span data-ttu-id="aaac7-107">Por padrão, se você pode ler dados de um cubo do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , você automaticamente tem permissões de leitura sobre todos os membros da dimensão e medidas associados a esse cubo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-107">By default, if you can read data from an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] cube, you automatically have read permissions on all measures and dimension members associated with that cube.</span></span> <span data-ttu-id="aaac7-108">Embora esse comportamento possa ser suficiente para muitos cenários, às vezes, os requisitos de segurança exigem uma estratégia de autorização mais segmentada, com níveis variáveis de acesso para usuários diferentes, na mesma dimensão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-108">While this behavior might be sufficient for many scenarios, sometimes security requirements call for a more segmented authorization strategy, with varying levels of access for different users, on the same dimension.</span></span>  
  
 <span data-ttu-id="aaac7-109">Você pode restringir o acesso ao escolher a quais membros permitirá (AllowedSet) ou negará (DeniedSet) acesso.</span><span class="sxs-lookup"><span data-stu-id="aaac7-109">You can restrict access by choosing which members to allow (AllowedSet) or deny (DeniedSet) access.</span></span> <span data-ttu-id="aaac7-110">Você pode fazer isso marcando ou desmarcando os membros de dimensão a serem incluídos ou excluídos da função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-110">You do this by either selecting or deselecting dimension members to include or exclude from the role.</span></span>  
  
 <span data-ttu-id="aaac7-111">A segurança básica de dimensão é a mais fácil, uma vez que basta selecionar quais atributos de dimensão e hierarquias de atributo devem ser incluídas ou excluídas da função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-111">Basic dimension security is the easiest; you simply select which dimension attributes and attribute hierarchies to include or exclude in the role.</span></span> <span data-ttu-id="aaac7-112">A segurança avançada é mais complexa e exige conhecimentos em scripts MDX.</span><span class="sxs-lookup"><span data-stu-id="aaac7-112">Advanced security is more complex and requires expertise in MDX scripting.</span></span> <span data-ttu-id="aaac7-113">Veja abaixo a descrição das duas abordagens.</span><span class="sxs-lookup"><span data-stu-id="aaac7-113">Both approaches are described below.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="aaac7-114">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="aaac7-114">Prerequisites</span></span>  
 <span data-ttu-id="aaac7-115">Nem todos os membros de medidas ou dimensão podem ser usados ​​em cenários de acesso personalizados.</span><span class="sxs-lookup"><span data-stu-id="aaac7-115">Not all measures or dimension members can be used in custom access scenarios.</span></span> <span data-ttu-id="aaac7-116">A conexão irá falhar se uma função restringir o acesso a uma medida ou membro padrão ou restringir o acesso a medidas que fazem parte de expressões de medida.</span><span class="sxs-lookup"><span data-stu-id="aaac7-116">A connection will fail if a role restricts access to a default measure or member, or restricts access to measures that are part of measure expressions.</span></span>  
  
 <span data-ttu-id="aaac7-117">**Verifique se há obstruções à segurança da dimensão: medidas padrão, membros padrão e medidas usados em expressões de medidas**</span><span class="sxs-lookup"><span data-stu-id="aaac7-117">**Check for obstructions to dimension security: default measures, default members, and measures used in measure expressions**</span></span>  
  
1.  <span data-ttu-id="aaac7-118">Em SQL Server Management Studio, clique com o botão direito do mouse em um cubo e selecione **cubo de script como**  |  **alterar para**  |  **nova janela do editor de consultas**.</span><span class="sxs-lookup"><span data-stu-id="aaac7-118">In SQL Server Management Studio, right-click a cube and select **Script Cube as** | **ALTER To** | **New Query Editor Window**.</span></span>  
  
2.  <span data-ttu-id="aaac7-119">Pesquise por `DefaultMeasure`.</span><span class="sxs-lookup"><span data-stu-id="aaac7-119">Search for `DefaultMeasure`.</span></span> <span data-ttu-id="aaac7-120">Encontre um para o cubo e um para cada perspectiva.</span><span class="sxs-lookup"><span data-stu-id="aaac7-120">You should find one for the cube, and one for each perspective.</span></span> <span data-ttu-id="aaac7-121">Ao definir a segurança de dimensão, evite restringir o acesso a medidas padrão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-121">When defining dimension security, avoid restricting access to default measures.</span></span>  
  
3.  <span data-ttu-id="aaac7-122">Em seguida, procure a `MeasureExpression`.</span><span class="sxs-lookup"><span data-stu-id="aaac7-122">Next, search for `MeasureExpression`.</span></span> <span data-ttu-id="aaac7-123">A expressão de medida é baseada em um cálculo que inclui frequentemente outras medidas.</span><span class="sxs-lookup"><span data-stu-id="aaac7-123">A measure expression is a measure, based on a calculation, where the calculation often includes other measures.</span></span> <span data-ttu-id="aaac7-124">Verifique se a medida que deseja restringir não foi usada em uma expressão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-124">Verify that the measure you want to restrict is not used in an expression.</span></span> <span data-ttu-id="aaac7-125">Como alternativa, restrinja o acesso, apenas certifique-se de também excluir qualquer referência a essa medida no cubo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-125">Alternatively, go ahead and restrict access, just make sure to also exclude all references to that measure throughout the cube.</span></span>  
  
4.  <span data-ttu-id="aaac7-126">Por fim, procure o `DefaultMember`.</span><span class="sxs-lookup"><span data-stu-id="aaac7-126">Finally, search for `DefaultMember`.</span></span> <span data-ttu-id="aaac7-127">Anote todos os atributos que servem como membro padrão de um atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-127">Make a note of any attributes that serve as a default member of an attribute.</span></span> <span data-ttu-id="aaac7-128">Evite colocar restrições sobre esses atributos ao configurar a segurança de dimensão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-128">Avoid putting restrictions on those attributes when setting up dimension security.</span></span>  
  
## <a name="basic-dimension-security"></a><span data-ttu-id="aaac7-129">Segurança básica de dimensão</span><span class="sxs-lookup"><span data-stu-id="aaac7-129">Basic dimension security</span></span>  
  
1.  <span data-ttu-id="aaac7-130">No [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] , conecte-se à instância do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , expanda **funções** para o banco de dados apropriado no Pesquisador de objetos e clique em uma função de banco de dados (ou crie uma nova função de banco de dados).</span><span class="sxs-lookup"><span data-stu-id="aaac7-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], expand **Roles** for the appropriate database in Object Explorer, and then click a database role (or create a new database role).</span></span>  
  
     <span data-ttu-id="aaac7-131">A função já deve ter acesso de leitura para o cubo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-131">The role should already have read access to the cube.</span></span> <span data-ttu-id="aaac7-132">Consulte [Conceder permissões de cubo ou modelo &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) se precisar de ajuda com esta etapa.</span><span class="sxs-lookup"><span data-stu-id="aaac7-132">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) if you need help with this step.</span></span>  
  
2.  <span data-ttu-id="aaac7-133">Em **dimensão de dados**  |  **básico**, selecione a dimensão para a qual você está definindo permissões.</span><span class="sxs-lookup"><span data-stu-id="aaac7-133">On **Dimension Data** | **Basic**, select the dimension for which you are setting permissions.</span></span>  
  
3.  <span data-ttu-id="aaac7-134">Escolha a hierarquia de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-134">Choose the attribute hierarchy.</span></span> <span data-ttu-id="aaac7-135">Nem todos os atributos estarão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="aaac7-135">Not all attributes will be available.</span></span> <span data-ttu-id="aaac7-136">Apenas os atributos que têm **AttributeHierarchyEnabled** aparecem na lista **Hierarquia de Atributo** .</span><span class="sxs-lookup"><span data-stu-id="aaac7-136">Only those attributes having **AttributeHierarchyEnabled** appear in the **Attribute Hierarchy** list.</span></span>  
  
4.  <span data-ttu-id="aaac7-137">Escolha à quais membros permitirá ou negará acesso.</span><span class="sxs-lookup"><span data-stu-id="aaac7-137">Choose which members to allow or deny access.</span></span> <span data-ttu-id="aaac7-138">Permitir o acesso pela opção **Selecionar todos os membros** é o padrão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-138">Allowing access, through the **Select all members** option, is the default.</span></span> <span data-ttu-id="aaac7-139">Sugerimos que você mantenha esse padrão e exclua individualmente os membros que não devem ser visíveis para as contas de usuário e de grupo do Windows no painel **Associações** por meio dessa função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-139">We suggest you keep this default and then clear individual members that should not be visible to the Windows user and group accounts in the **Memberships** pane via this role.</span></span> <span data-ttu-id="aaac7-140">A vantagem é que os novos membros adicionados nas operações de processamento futuras estarão automaticamente disponíveis para as pessoas que se conectarem por meio dessa função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-140">The advantage is that new members added in future processing operations are automatically available to people connecting through this role.</span></span>  
  
     <span data-ttu-id="aaac7-141">Como alternativa, você pode **Cancelar seleção de todos os membros** para revogar o acesso geral e, em seguida, escolher os membros que receberão a permissão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-141">Alternatively, you can **Deselect all members** to revoke access overall, and then pick which members to allow.</span></span> <span data-ttu-id="aaac7-142">Nas futuras operações de processamento, os novos membros não serão visíveis até que você edite manualmente a segurança dos dados de dimensão para permitir o acesso a eles.</span><span class="sxs-lookup"><span data-stu-id="aaac7-142">In future processing operations, new members are not visible until you manually edit dimension data security to allow access to them.</span></span>  
  
5.  <span data-ttu-id="aaac7-143">Opcionalmente, clique em **avançado** para habilitar `Visual Totals` essa hierarquia de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-143">Optionally, click **Advanced** to enable `Visual Totals` for this attribute hierarchy.</span></span> <span data-ttu-id="aaac7-144">Essa opção recalcula as agregações com base nos membros disponíveis por meio da função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-144">This option recalculates aggregations based on the members available through the role.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="aaac7-145">Ao aplicar permissões que cortam membros de dimensão, os totais agregados não são recalculados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="aaac7-145">When applying permissions that trim dimension members, aggregated totals are not recalculated automatically.</span></span> <span data-ttu-id="aaac7-146">Suponha que o `All` membro de uma hierarquia de atributo retorne uma contagem de 200 antes que as permissões sejam aplicadas.</span><span class="sxs-lookup"><span data-stu-id="aaac7-146">Suppose the `All` member of an attribute hierarchy returns a count of 200 before permissions are applied.</span></span> <span data-ttu-id="aaac7-147">Depois de aplicar permissões que negam acesso a alguns membros, o `All` ainda retorna 200, embora os valores de membro visíveis para o usuário sejam muito menos.</span><span class="sxs-lookup"><span data-stu-id="aaac7-147">After applying permissions that deny access to some members, `All` still returns 200, even though the member values visible to the user are much less.</span></span> <span data-ttu-id="aaac7-148">Para evitar a confusão dos consumidores do seu cubo, você pode configurar o `All` membro como o agregado apenas dos membros aos quais os membros da função, em vez da agregação de todos os membros da hierarquia de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-148">To avoid confusing the consumers of your cube, you can configure the `All` member be the aggregate of just those members to which role members, rather than the aggregate of all of the members of the attribute hierarchy.</span></span> <span data-ttu-id="aaac7-149">Para invocar esse comportamento, você pode habilitar `Visual Totals` na guia **avançado** ao configurar a segurança da dimensão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-149">To invoke this behavior, you can enable `Visual Totals` on the **Advanced** tab when configuring dimension security.</span></span> <span data-ttu-id="aaac7-150">Uma vez habilitada, a agregação é calculada na hora da consulta, em vez de recuperada de agregações pré-calculadas.</span><span class="sxs-lookup"><span data-stu-id="aaac7-150">Once enabled, the aggregate is calculated at query time rather than retrieved from pre-calculated aggregations.</span></span> <span data-ttu-id="aaac7-151">Isso pode ter um efeito significativo no desempenho da consulta, portanto, use-a somente quando necessário.</span><span class="sxs-lookup"><span data-stu-id="aaac7-151">This can have a noticeable effect on query performance, so use it only when necessary.</span></span>  
  
## <a name="hiding-measures"></a><span data-ttu-id="aaac7-152">Ocultar medidas</span><span class="sxs-lookup"><span data-stu-id="aaac7-152">Hiding measures</span></span>  
 <span data-ttu-id="aaac7-153">No [Conceder acesso personalizado a dados de célula &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md), foi explicado que ocultar completamente todos os aspectos visuais de uma medida, e não apenas os seus dados de célula, requer permissões dos membros de dimensão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-153">In [Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md), it was explained that fully hiding all visual aspects of a measure, and not just its cell data, requires permissions on dimension members.</span></span> <span data-ttu-id="aaac7-154">Esta seção explica como negar o acesso aos metadados do objeto de uma medida.</span><span class="sxs-lookup"><span data-stu-id="aaac7-154">This section explains how to deny access to the object metadata of a measure.</span></span>  
  
1.  <span data-ttu-id="aaac7-155">Na **dimensão dados**  |  **básicos**, role para baixo na lista dimensão até alcançar as dimensões do cubo e selecione **medir dimensão**.</span><span class="sxs-lookup"><span data-stu-id="aaac7-155">On **Dimension Data** | **Basic**, scroll down the Dimension list until you reach cube dimensions, and then select **Measures Dimension**.</span></span>  
  
2.  <span data-ttu-id="aaac7-156">Na lista de medidas, desmarque a caixa de seleção das medidas que não devem aparecer para usuários que se conectam por meio dessa função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-156">From the list of measures, clear the check box for measures that should not appear to users connecting via this role.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="aaac7-157">Verifique os pré-requisitos para saber identificar as medidas que podem interromper a segurança da função.</span><span class="sxs-lookup"><span data-stu-id="aaac7-157">Check the Prerequisites to learn how to identify measures that can break role security.</span></span>  
  
## <a name="advanced-dimension-security"></a><span data-ttu-id="aaac7-158">Segurança de dimensão avançada</span><span class="sxs-lookup"><span data-stu-id="aaac7-158">Advanced dimension security</span></span>  
 <span data-ttu-id="aaac7-159">Se você tiver conhecimentos em MDX, outra abordagem possível é escrever expressões MDX que definem os critérios para quais membros será permitido ou negado o acesso.</span><span class="sxs-lookup"><span data-stu-id="aaac7-159">If you have MDX expertise, another approach is to write MDX expressions that set the criteria for which members are allowed or denied access.</span></span> <span data-ttu-id="aaac7-160">Clique em **criar**  |  **dimensão de função dados**  |  **avançados** para fornecer o script.</span><span class="sxs-lookup"><span data-stu-id="aaac7-160">Click **Create Role** | **Dimension Data** | **Advanced** to provide the script.</span></span>  
  
 <span data-ttu-id="aaac7-161">Você pode usar o Construtor MDX para escrever a instrução MDX.</span><span class="sxs-lookup"><span data-stu-id="aaac7-161">You can the MDX Builder to write the MDX statement.</span></span> <span data-ttu-id="aaac7-162">Consulte [Construtor MDX&#40;Analysis Services – Dados Multidimensionais&#41;](../mdx-builder-analysis-services-multidimensional-data.md) para ver os detalhes.</span><span class="sxs-lookup"><span data-stu-id="aaac7-162">See [MDX Builder &#40;Analysis Services - Multidimensional Data&#41;](../mdx-builder-analysis-services-multidimensional-data.md) for details.</span></span> <span data-ttu-id="aaac7-163">A guia **Avançado** contém as seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="aaac7-163">The **Advanced** tab has the following options:</span></span>  
  
 <span data-ttu-id="aaac7-164">**Atributo**</span><span class="sxs-lookup"><span data-stu-id="aaac7-164">**Attribute**</span></span>  
 <span data-ttu-id="aaac7-165">Selecione o atributo do qual você deseja gerenciar segurança de membro.</span><span class="sxs-lookup"><span data-stu-id="aaac7-165">Select the attribute for which you want to manage member security.</span></span>  
  
 <span data-ttu-id="aaac7-166">**Conjunto de membros permitido**</span><span class="sxs-lookup"><span data-stu-id="aaac7-166">**Allowed member set**</span></span>  
 <span data-ttu-id="aaac7-167">O AllowedSet pode determinar nenhum membro (padrão), todos ou alguns membros.</span><span class="sxs-lookup"><span data-stu-id="aaac7-167">The AllowedSet can resolve to no members (default), all members, or some members.</span></span> <span data-ttu-id="aaac7-168">Se você permitir acesso a um atributo e não definir nenhum membro do conjunto permitido, será concedido acesso a todos os membros.</span><span class="sxs-lookup"><span data-stu-id="aaac7-168">If you allow access to an attribute and do not define any members of the allowed set, access to all members is granted.</span></span> <span data-ttu-id="aaac7-169">Se você permitir acesso a um atributo e definir um conjunto específico de membros de atributo, apenas os membros explicitamente permitidos ficarão visíveis.</span><span class="sxs-lookup"><span data-stu-id="aaac7-169">If you allow access to an attribute and define a specific set of attribute members, only the explicitly allowed members are visible.</span></span>  
  
 <span data-ttu-id="aaac7-170">Criar um AllowedSet gera um efeito dominó quando o atributo participa de uma hierarquia de vários níveis.</span><span class="sxs-lookup"><span data-stu-id="aaac7-170">Creating an AllowedSet has a ripple effect when the attribute participates in a multi-level hierarchy.</span></span> <span data-ttu-id="aaac7-171">Por exemplo, suponha que uma função permita o acesso ao estado de Washington (imagine um cenário em que a função está concedendo permissões para a divisão de vendas do estado de Washington de uma empresa).</span><span class="sxs-lookup"><span data-stu-id="aaac7-171">For example, suppose a role allows access to Washington state (assume a scenario where the role is granting permissions to a company's Washington state sales division).</span></span> <span data-ttu-id="aaac7-172">Para as pessoas que se conectam por meio dessa função, as consultas que incluem ancestrais (Estados Unidos) ou descendentes (Seattle e Redmond) só verão os membros em uma cadeia incluindo o estado de Washington.</span><span class="sxs-lookup"><span data-stu-id="aaac7-172">For people connecting through this role, queries that include ancestors (United States) or descendants (Seattle and Redmond) will only see members in a chain including Washington state.</span></span> <span data-ttu-id="aaac7-173">Como os outros estados não são explicitamente permitidos, o efeito será o mesmo que se eles fossem negados.</span><span class="sxs-lookup"><span data-stu-id="aaac7-173">Because other states are not explicitly allowed, the effect will be the same as if they were denied.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="aaac7-174">Se você definir um conjunto vazio ( {} ) de membros de atributo, nenhum membro do atributo será visível para a função de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="aaac7-174">If you define an empty set ({}) of attribute members, no members of the attribute will be visible to the database role.</span></span> <span data-ttu-id="aaac7-175">A ausência de um conjunto permitido não é interpretada como um conjunto vazio.</span><span class="sxs-lookup"><span data-stu-id="aaac7-175">The absence of an allowed set is not interpreted as an empty set.</span></span>  
  
 <span data-ttu-id="aaac7-176">**Conjunto de membros negado**</span><span class="sxs-lookup"><span data-stu-id="aaac7-176">**Denied member set**</span></span>  
 <span data-ttu-id="aaac7-177">A propriedade DeniedSet pode determinar nenhum membro, todos os membros (padrão) ou alguns membros de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-177">The DeniedSet property can resolve to no members, all members (default), or some attribute members.</span></span> <span data-ttu-id="aaac7-178">Quando o conjunto negado contiver apenas um conjunto específico de membros de atributo, a função de banco de dados tem o acesso negado apenas a esses membros específicos, bem como a descendentes se o atributo estiver em uma hierarquia de vários níveis.</span><span class="sxs-lookup"><span data-stu-id="aaac7-178">When the denied set contains only a specific set of attribute members, the database role is denied access only to those specific members, as well as descendants if the attribute is in a multi-level hierarchy.</span></span> <span data-ttu-id="aaac7-179">Considere o exemplo da divisão de vendas do estado de Washington.</span><span class="sxs-lookup"><span data-stu-id="aaac7-179">Consider the Washington state sales division example.</span></span> <span data-ttu-id="aaac7-180">Se Washington for colocado em DeniedSet, as pessoas que se conectam por meio desse papel verão todos os outros estados, exceto Washington e seus atributos descendentes.</span><span class="sxs-lookup"><span data-stu-id="aaac7-180">If Washington is placed in the DeniedSet, people connecting through this role will see all other states except Washington and its descendent attributes.</span></span>  
  
 <span data-ttu-id="aaac7-181">Lembre-se da seção anterior que o conjunto negado é uma coleção fixa.</span><span class="sxs-lookup"><span data-stu-id="aaac7-181">Recall from the previous section that the denied set is a fixed collection.</span></span> <span data-ttu-id="aaac7-182">Se o processamento introduzir posteriormente novos membros, aos quais também deve ser negado o acesso, será preciso editar essa função para adicionar esses membros à lista.</span><span class="sxs-lookup"><span data-stu-id="aaac7-182">If processing subsequently introduces new members that should also be denied access, you will need to edit this role to add those members to the list.</span></span>  
  
 <span data-ttu-id="aaac7-183">**Membro padrão**</span><span class="sxs-lookup"><span data-stu-id="aaac7-183">**Default member**</span></span>  
 <span data-ttu-id="aaac7-184">A propriedade DefaultMember determina o conjunto de dados retornado a um cliente quando um atributo não for incluído explicitamente em uma consulta.</span><span class="sxs-lookup"><span data-stu-id="aaac7-184">The DefaultMember property determines the data set returned to a client when an attribute is not explicitly included in a query.</span></span> <span data-ttu-id="aaac7-185">Quando o atributo não é incluído explicitamente, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] usa um dos seguintes membros padrão para o atributo:</span><span class="sxs-lookup"><span data-stu-id="aaac7-185">When the attribute is not explicitly included, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses one of the following default members for the attribute:</span></span>  
  
-   <span data-ttu-id="aaac7-186">Se a função de banco de dados definir um membro padrão para o atributo, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] usará esse membro padrão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-186">If the database role defines a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses this default member.</span></span>  
  
-   <span data-ttu-id="aaac7-187">Se a função de banco de dados não definir um membro padrão para o atributo, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] usará o membro padrão que está definido para o próprio atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-187">If the database role does not define a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the default member that is defined for the attribute itself.</span></span> <span data-ttu-id="aaac7-188">O membro padrão para um atributo, a menos que você especifique algo diferente, é o membro `All` (a menos que o atributo esteja definido como não agregável).</span><span class="sxs-lookup"><span data-stu-id="aaac7-188">The default member for an attribute, unless you specify otherwise, is the `All` member (unless the attribute is defined as non-aggregatable).</span></span>  
  
 <span data-ttu-id="aaac7-189">Por exemplo, suponha que uma função de banco de dados especifica `Male` como o membro padrão para o atributo `Gender`.</span><span class="sxs-lookup"><span data-stu-id="aaac7-189">For example, suppose a database role specifies `Male` as the default member for the `Gender` attribute.</span></span> <span data-ttu-id="aaac7-190">A menos que uma consulta inclua explicitamente o atributo `Gender` e especifique um membro diferente para esse atributo, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] retornará um conjunto de dados que incluirá apenas clientes masculinos.</span><span class="sxs-lookup"><span data-stu-id="aaac7-190">Unless a query both explicitly includes the `Gender` attribute and specifies a different member for this attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would return a data set that included only male customers.</span></span> <span data-ttu-id="aaac7-191">Para obter mais informações sobre como definir o membro padrão, consulte [Definir um membro padrão](attribute-properties-define-a-default-member.md).</span><span class="sxs-lookup"><span data-stu-id="aaac7-191">For more information about setting the default member, see [Define a Default Member](attribute-properties-define-a-default-member.md).</span></span>  
  
 <span data-ttu-id="aaac7-192">**Habilitar Totais Visuais**</span><span class="sxs-lookup"><span data-stu-id="aaac7-192">**Enable Visual Total**</span></span>  
 <span data-ttu-id="aaac7-193">A propriedade VisualTotals indica se os valores da célula agregada exibidos são calculados de acordo com todos os valores de célula ou só de acordo com os valores da células visíveis à função de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="aaac7-193">The VisualTotals property indicates whether the aggregated cell values that are displayed are calculated according to all cell values or only according to the cell values that are visible to the database role.</span></span>  
  
 <span data-ttu-id="aaac7-194">Por padrão, a propriedade VisualTotals é desabilitada (definida como `False` ).</span><span class="sxs-lookup"><span data-stu-id="aaac7-194">By default, the VisualTotals property is disabled (set to `False`).</span></span> <span data-ttu-id="aaac7-195">Essa configuração padrão maximiza o desempenho porque o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] pode calcular rapidamente o total de todos os valores da célula, em vez de ter que passar tempo selecionando quais valores de células deverão ser calculados.</span><span class="sxs-lookup"><span data-stu-id="aaac7-195">This default setting maximizes performance because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can quickly calculate the total of all cell values, instead of having to spend time selecting which cells values to calculate.</span></span>  
  
 <span data-ttu-id="aaac7-196">Porém, ter a propriedade VisualTotals desabilitada poderá criar um problema de segurança se um usuário puder usar os valores de célula agregada para deduzir valores para membros de atributo para os quais a função de banco de dados do usuário não tem acesso.</span><span class="sxs-lookup"><span data-stu-id="aaac7-196">However, having the VisualTotals property disabled could create a security issue if a user can use the aggregated cell values to deduce values for attribute members to which the user's database role does not have access.</span></span> <span data-ttu-id="aaac7-197">Por exemplo, o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] usa os valores para três membros de atributo calcularem um valor de célula agregada.</span><span class="sxs-lookup"><span data-stu-id="aaac7-197">For example, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the values for three attribute members to calculate an aggregated cell value.</span></span> <span data-ttu-id="aaac7-198">A função de banco de dados tem acesso para exibir dois desses três membros de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-198">The database role has access to view two of these three attribute members.</span></span> <span data-ttu-id="aaac7-199">Usando o valor de célula agregada, um membro dessa função de banco de dados poderia deduzir o valor para o terceiro membro de atributo.</span><span class="sxs-lookup"><span data-stu-id="aaac7-199">Using the aggregated cell value, a member of this database role would be able to deduce the value for the third attribute member.</span></span>  
  
 <span data-ttu-id="aaac7-200">A definição da propriedade VisualTotals como `True` pode eliminar esse risco.</span><span class="sxs-lookup"><span data-stu-id="aaac7-200">Setting VisualTotals property to `True` can eliminate this risk.</span></span> <span data-ttu-id="aaac7-201">Ao habilitar a propriedade VisualTotals, uma função de banco de dados pode exibir apenas totais agregados de membros de dimensão para os quais a função tem permissão.</span><span class="sxs-lookup"><span data-stu-id="aaac7-201">When you enable the VisualTotals property, a database role can only view aggregated totals for dimension members to which the role has permission.</span></span>  
  
 <span data-ttu-id="aaac7-202">**Verificação**</span><span class="sxs-lookup"><span data-stu-id="aaac7-202">**Check**</span></span>  
 <span data-ttu-id="aaac7-203">Clique para testar a sintaxe MDX definida nesta página.</span><span class="sxs-lookup"><span data-stu-id="aaac7-203">Click to test the MDX syntax defined on this page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aaac7-204">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="aaac7-204">See Also</span></span>  
 <span data-ttu-id="aaac7-205">[Conceder permissões de cubo ou modelo &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="aaac7-205">[Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span></span>  
 <span data-ttu-id="aaac7-206">[Conceder acesso personalizado a dados de célula &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="aaac7-206">[Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span></span>  
 <span data-ttu-id="aaac7-207">[Conceder permissões em estruturas e modelos de Data Mining &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="aaac7-207">[Grant permissions on data mining structures and models &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span></span>  
 [<span data-ttu-id="aaac7-208">Conceder permissões em um objeto de fonte de dados &#40;Analysis Services&#41;</span><span class="sxs-lookup"><span data-stu-id="aaac7-208">Grant permissions on a data source object &#40;Analysis Services&#41;</span></span>](grant-permissions-on-a-data-source-object-analysis-services.md)  
  
  
