---
title: Criando agregações (XMLA) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- statistical information [XML for Analysis]
- batches [XML for Analysis]
- aggregations [Analysis Services], XML for Analysis
- XMLA, aggregations
- queries [XMLA]
- XML for Analysis, aggregations
- iterative aggregation process [XMLA]
ms.assetid: 4dd27afa-10c7-408d-bc24-ca74217ddbcb
author: minewiskan
ms.author: owend
ms.openlocfilehash: 632cc071605cff6e42adec4acd32c9bd9949fc77
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87582179"
---
# <a name="designing-aggregations-xmla"></a><span data-ttu-id="21f33-102">Criando agregações (XMLA)</span><span class="sxs-lookup"><span data-stu-id="21f33-102">Designing Aggregations (XMLA)</span></span>
  <span data-ttu-id="21f33-103">Designs de agregação estão associados a partições de um determinado grupo de medidas para garantir que as partições usem a mesma estrutura ao armazenarem agregações.</span><span class="sxs-lookup"><span data-stu-id="21f33-103">Aggregation designs are associated with the partitions of a particular measure group to make sure that the partitions use the same structure when storing aggregations.</span></span> <span data-ttu-id="21f33-104">Usar a mesma estrutura de armazenamento para partições permite que você defina facilmente as partições que podem ser mescladas posteriormente usando o comando [MergePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="21f33-104">Using the same storage structure for partitions lets you to easily define partitions that can be later merged using the [MergePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla) command.</span></span> <span data-ttu-id="21f33-105">Para obter mais informações sobre designs de agregação, consulte [agregações e designs de agregação](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md).</span><span class="sxs-lookup"><span data-stu-id="21f33-105">For more information about aggregation designs, see [Aggregations and Aggregation Designs](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md).</span></span>  
  
 <span data-ttu-id="21f33-106">Para definir agregações para um design de agregação, você pode usar o comando [DesignAggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla) no XML for Analysis (XMLA).</span><span class="sxs-lookup"><span data-stu-id="21f33-106">To define aggregations for an aggregation design, you can use the [DesignAggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla) command in XML for Analysis (XMLA).</span></span> <span data-ttu-id="21f33-107">O comando `DesignAggregations` tem propriedades que identificam o design de agregação a ser usado como referência e mostram como controlar o processo de design com base nessa referência.</span><span class="sxs-lookup"><span data-stu-id="21f33-107">The `DesignAggregations` command has properties that identify which aggregation design to use as a reference and how to control the design process based upon that reference.</span></span> <span data-ttu-id="21f33-108">Usando o comando `DesignAggregations` e suas propriedades, você pode criar agregações iterativamente ou em lote e depois exibir as estatísticas do design resultante para avaliar o processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-108">Using the `DesignAggregations` command and its properties, you can design aggregations iteratively or in batch, and then view the resulting design statistics to evaluate the design process.</span></span>  
  
## <a name="specifying-an-aggregation-design"></a><span data-ttu-id="21f33-109">Especificando um design de agregação</span><span class="sxs-lookup"><span data-stu-id="21f33-109">Specifying an Aggregation Design</span></span>  
 <span data-ttu-id="21f33-110">A propriedade [Object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) do `DesignAggregations` comando deve conter uma referência de objeto para um design de agregação existente.</span><span class="sxs-lookup"><span data-stu-id="21f33-110">The [Object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) property of the `DesignAggregations` command must contain an object reference to an existing aggregation design.</span></span> <span data-ttu-id="21f33-111">A referência de objeto contém um identificador de banco de dados, um identificador de cubo, um identificador de grupo de medidas e um identificador de design de agregação.</span><span class="sxs-lookup"><span data-stu-id="21f33-111">The object reference contains a database identifier, cube identifier, measure group identifier, and aggregation design identifier.</span></span> <span data-ttu-id="21f33-112">Se o design de agregação ainda não existir, ocorrerá um erro.</span><span class="sxs-lookup"><span data-stu-id="21f33-112">If the aggregation design does not already exist, an error occurs.</span></span>  
  
## <a name="controlling-the-design-process"></a><span data-ttu-id="21f33-113">Controlando o processo de design</span><span class="sxs-lookup"><span data-stu-id="21f33-113">Controlling the Design Process</span></span>  
 <span data-ttu-id="21f33-114">Você pode usar as seguintes propriedades do comando `DesignAggregations` para controlar o algoritmo usado na definição de agregações para o design de agregação:</span><span class="sxs-lookup"><span data-stu-id="21f33-114">You can use the following properties of the `DesignAggregations` command to control the algorithm used to define aggregations for the aggregation design:</span></span>  
  
-   <span data-ttu-id="21f33-115">A propriedade [Steps](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla) determina quantas iterações o `DesignAggregations` comando deve executar antes de retornar o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-115">The [Steps](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla) property determines how many iterations the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="21f33-116">A propriedade [time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla) determina quantos milissegundos o `DesignAggregations` comando deve levar antes de retornar o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-116">The [Time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla) property determines how many milliseconds the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="21f33-117">A propriedade [Optimization](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla) determina a porcentagem estimada de melhoria de desempenho que o `DesignAggregations` comando deve tentar alcançar.</span><span class="sxs-lookup"><span data-stu-id="21f33-117">The [Optimization](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla) property determines the estimated percentage of performance improvement the `DesignAggregations` command should try to achieve.</span></span> <span data-ttu-id="21f33-118">Se você estiver criando agregações iterativamente, só terá de enviar essa propriedade no primeiro comando.</span><span class="sxs-lookup"><span data-stu-id="21f33-118">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="21f33-119">A propriedade de [armazenamento](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla) determina a quantidade estimada de armazenamento em disco, em bytes, usada pelo `DesignAggregations` comando.</span><span class="sxs-lookup"><span data-stu-id="21f33-119">The [Storage](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla) property determines the estimated amount of disk storage, in bytes, used by the `DesignAggregations` command.</span></span> <span data-ttu-id="21f33-120">Se você estiver criando agregações iterativamente, só terá de enviar essa propriedade no primeiro comando.</span><span class="sxs-lookup"><span data-stu-id="21f33-120">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="21f33-121">A propriedade [materializar](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla) determina se o `DesignAggregations` comando deve criar as agregações definidas durante o processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-121">The [Materialize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla) property determines whether the `DesignAggregations` command should create the aggregations defined during the design process.</span></span> <span data-ttu-id="21f33-122">Se estiver criando agregações iterativamente, essa propriedade deve ser definida como falsa até que você esteja pronto para salvar as agregações criadas.</span><span class="sxs-lookup"><span data-stu-id="21f33-122">If you are iteratively designing aggregations, this property should be set to false until you are ready to save the designed aggregations.</span></span> <span data-ttu-id="21f33-123">Quando definida como verdadeira, o processo de design atual terminará e as agregações definidas serão adicionadas ao design de agregação especificado.</span><span class="sxs-lookup"><span data-stu-id="21f33-123">When set to true, the current design process ends and the defined aggregations are added to the specified aggregation design.</span></span>  
  
## <a name="specifying-queries"></a><span data-ttu-id="21f33-124">Especificando consultas</span><span class="sxs-lookup"><span data-stu-id="21f33-124">Specifying Queries</span></span>  
 <span data-ttu-id="21f33-125">O comando DesignAggregations dá suporte ao comando de otimização com base no uso, incluindo um ou mais `Query` elementos na propriedade [queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="21f33-125">The DesignAggregations command supports usage-based optimization command by including one or more `Query` elements in the [Queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla) property.</span></span> <span data-ttu-id="21f33-126">A `Queries` propriedade pode conter um ou mais elementos de [consulta](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="21f33-126">The `Queries` property can contain one or more [Query](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla) elements.</span></span> <span data-ttu-id="21f33-127">Se a propriedade `Queries` não contiver elementos de `Query`, o design de agregação especificado no elemento de `Object` usará uma estrutura padrão com um conjunto geral de agregações.</span><span class="sxs-lookup"><span data-stu-id="21f33-127">If the `Queries` property does not contain any `Query` elements, the aggregation design specified in the `Object` element uses a default structure that contains a general set of aggregations.</span></span> <span data-ttu-id="21f33-128">Esse conjunto geral de agregações é criado para atender aos critérios especificados nas propriedades `Optimization` e `Storage` do comando `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="21f33-128">This general set of aggregations is designed to meet the criteria specified in the `Optimization` and `Storage` properties of the `DesignAggregations` command.</span></span>  
  
 <span data-ttu-id="21f33-129">Cada elemento `Query` representa uma meta de consulta usada pelo processo de design para definir agregações que se destinam às consultas usadas com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="21f33-129">Each `Query` element represents a goal query that the design process uses to define aggregations that target the most frequently used queries.</span></span> <span data-ttu-id="21f33-130">Você pode especificar suas próprias consultas de meta ou pode usar as informações armazenadas por uma instância do [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] no log de consultas para recuperar informações sobre as consultas usadas com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="21f33-130">You can either specify your own goal queries, or you can use the information stored by an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] in the query log to retrieve information about the most frequently used queries.</span></span> <span data-ttu-id="21f33-131">O Assistente de Otimização com Base no Uso usa o log de consultas para recuperar consultas de meta com base no tempo, no uso ou em um usuário especificado quando envia um comando `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="21f33-131">The Usage-Based Optimization Wizard uses the query log to retrieve goal queries based on time, usage, or a specified user when it sends a `DesignAggregations` command.</span></span> <span data-ttu-id="21f33-132">Para obter mais informações, consulte [Ajuda F1 do assistente de otimização com base no uso](../usage-based-optimization-wizard-f1-help.md).</span><span class="sxs-lookup"><span data-stu-id="21f33-132">For more information, see [Usage-Based Optimization Wizard F1 Help](../usage-based-optimization-wizard-f1-help.md).</span></span>  
  
 <span data-ttu-id="21f33-133">Se estiver projetando agregações de modo iterativo, você deve transmitir metas de consulta somente no primeiro comando `DesignAggregations` porque a instância do [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] armazena essas metas e utiliza essas consultas durante comandos `DesignAggregations` subsequentes.</span><span class="sxs-lookup"><span data-stu-id="21f33-133">If you are iteratively designing aggregations, you only have to pass goal queries in the first `DesignAggregations` command because the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance stores these goal queries and uses these queries during subsequent `DesignAggregations` commands.</span></span> <span data-ttu-id="21f33-134">Após transmitir as metas de consulta no primeiro comando `DesignAggregations` de um processo iterativo, qualquer comando `DesignAggregations` subsequente que contém metas de consulta na propriedade `Queries` gerará um erro.</span><span class="sxs-lookup"><span data-stu-id="21f33-134">After you pass goal queries in the first `DesignAggregations` command of an iterative process, any subsequent `DesignAggregations` command that contains goal queries in the `Queries` property generates an error.</span></span>  
  
 <span data-ttu-id="21f33-135">O elemento `Query` contém um valor delimitado por vírgula com os seguintes argumentos:</span><span class="sxs-lookup"><span data-stu-id="21f33-135">The `Query` element contains a comma-delimited value that contains the following arguments:</span></span>  
  
 <span data-ttu-id="21f33-136">*Frequency*,*Dataset*[,*Dataset*...]</span><span class="sxs-lookup"><span data-stu-id="21f33-136">*Frequency*,*Dataset*[,*Dataset*...]</span></span>  
  
 <span data-ttu-id="21f33-137">*Frequência*</span><span class="sxs-lookup"><span data-stu-id="21f33-137">*Frequency*</span></span>  
 <span data-ttu-id="21f33-138">Um fator de ponderação que corresponde ao número de vezes que a consulta foi executada previamente.</span><span class="sxs-lookup"><span data-stu-id="21f33-138">A weighting factor that corresponds to the number of times that the query has previously been executed.</span></span> <span data-ttu-id="21f33-139">Se o `Query` elemento representa uma nova consulta, o valor de *Frequency* representa o fator de ponderação usado pelo processo de design para avaliar a consulta.</span><span class="sxs-lookup"><span data-stu-id="21f33-139">If the `Query` element represents a new query, the *Frequency* value represents the weighting factor used by the design process to evaluate the query.</span></span> <span data-ttu-id="21f33-140">À medida que o valor de frequência fica maior, o peso colocado na consulta durante processo de design aumenta.</span><span class="sxs-lookup"><span data-stu-id="21f33-140">As the frequency value becomes larger, the weight that is put on the query during the design process increases.</span></span>  
  
 <span data-ttu-id="21f33-141">*Conjunto de dados*</span><span class="sxs-lookup"><span data-stu-id="21f33-141">*Dataset*</span></span>  
 <span data-ttu-id="21f33-142">Uma sequência numérica que especifica quais atributos de uma dimensão devem ser incluídos na consulta.</span><span class="sxs-lookup"><span data-stu-id="21f33-142">A numeric string that specifies which attributes from a dimension are to be included in the query.</span></span> <span data-ttu-id="21f33-143">Essa sequência deve ter o mesmo número de caracteres do número de atributos na dimensão.</span><span class="sxs-lookup"><span data-stu-id="21f33-143">This string must have the same number of characters as the number of attributes in the dimension.</span></span> <span data-ttu-id="21f33-144">Zero (0) indica que o atributo na posição ordinal especificada não está incluído na consulta para a dimensão especificada e um (1) indica que o atributo na posição ordinal especificada está incluído na consulta para a dimensão especificada.</span><span class="sxs-lookup"><span data-stu-id="21f33-144">Zero (0) indicates that the attribute in the specified ordinal position is not included in the query for the specified dimension, while one (1) indicates that the attribute in the specified ordinal position is included in the query for the specified dimension.</span></span>  
  
 <span data-ttu-id="21f33-145">Por exemplo, a sequência “011” faz referência a uma consulta que envolve uma dimensão com três atributos, dos quais o segundo e o terceiro estão incluídos na consulta.</span><span class="sxs-lookup"><span data-stu-id="21f33-145">For example, the string "011" would refer to a query involving a dimension with three attributes, from which the second and third attributes are included in the query.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="21f33-146">Alguns atributos não são considerados no conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="21f33-146">Some attributes are excluded from consideration in the dataset.</span></span> <span data-ttu-id="21f33-147">Para obter mais informações sobre atributos excluídos, consulte [elemento Query &#40;&#41;XMLA ](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla).</span><span class="sxs-lookup"><span data-stu-id="21f33-147">For more information about excluded attributes, see [Query Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla).</span></span>  
  
 <span data-ttu-id="21f33-148">Cada dimensão no grupo de medidas que contém o design de agregação é representada por um valor de *conjunto* de valores no `Query` elemento.</span><span class="sxs-lookup"><span data-stu-id="21f33-148">Each dimension in the measure group that contains the aggregation design is represented by a *Dataset* value in the `Query` element.</span></span> <span data-ttu-id="21f33-149">A ordem de valores *Dataset* deve coincidir com a ordem de dimensões incluída no grupo de medidas.</span><span class="sxs-lookup"><span data-stu-id="21f33-149">The order of *Dataset* values must match the order of dimensions included in the measure group.</span></span>  
  
## <a name="designing-aggregations-using-iterative-or-batch-processes"></a><span data-ttu-id="21f33-150">Criando agregações usando processos iterativos ou em lote</span><span class="sxs-lookup"><span data-stu-id="21f33-150">Designing Aggregations Using Iterative or Batch Processes</span></span>  
 <span data-ttu-id="21f33-151">Você pode usar o comando `DesignAggregations` como parte de um processo iterativo ou de um processo em lote, dependendo da interatividade exigida pelo processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-151">You can use the `DesignAggregations` command as part of an iterative process or a batch process, depending on the interactivity required by the design process.</span></span>  
  
### <a name="designing-aggregations-using-an-iterative-process"></a><span data-ttu-id="21f33-152">Criando agregações usando um processo iterativo</span><span class="sxs-lookup"><span data-stu-id="21f33-152">Designing Aggregations Using an Iterative Process</span></span>  
 <span data-ttu-id="21f33-153">Para criar agregações de design de forma iterativa, envie diversos comandos `DesignAggregations` para oferecer um controle refinado sobre o processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-153">To iteratively design aggregations, you send multiple `DesignAggregations` commands to provide fine control over the design process.</span></span> <span data-ttu-id="21f33-154">O Assistente de Design de Agregação usa essa mesma abordagem para fornecer controle refinado sobre o processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-154">The Aggregation Design Wizard uses this same approach to provide fine control over the design process.</span></span> <span data-ttu-id="21f33-155">Para obter mais informações, consulte [Ajuda F1 do assistente de design de agregação](../aggregation-design-wizard-f1-help.md).</span><span class="sxs-lookup"><span data-stu-id="21f33-155">For more information, see [Aggregation Design Wizard F1 Help](../aggregation-design-wizard-f1-help.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="21f33-156">Uma sessão explícita é necessária para a criação iterativa de agregações.</span><span class="sxs-lookup"><span data-stu-id="21f33-156">An explicit session is required to iteratively design aggregations.</span></span> <span data-ttu-id="21f33-157">Para obter mais informações sobre sessões explícitas, consulte [Managing Connections and sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span><span class="sxs-lookup"><span data-stu-id="21f33-157">For more information about explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
 <span data-ttu-id="21f33-158">Para iniciar o processo iterativo, primeiro envie um comando `DesignAggregations` com as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="21f33-158">To start the iterative process, you first send a `DesignAggregations` command that contains the following information:</span></span>  
  
-   <span data-ttu-id="21f33-159">Os valores das propriedades `Storage` e `Optimization` para os quais todo o processo de design é destinado.</span><span class="sxs-lookup"><span data-stu-id="21f33-159">The `Storage` and `Optimization` property values on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="21f33-160">Os valores das propriedades `Steps` e `Time` aos quais a primeira etapa do processo de design se limita.</span><span class="sxs-lookup"><span data-stu-id="21f33-160">The `Steps` and `Time` property values on which the first step of the design process is limited.</span></span>  
  
-   <span data-ttu-id="21f33-161">Se você quiser otimização baseada em uso, a propriedade `Queries` que contém as consultas de meta para as quais todo o processo de design é destinado.</span><span class="sxs-lookup"><span data-stu-id="21f33-161">If you want usage-based optimization, the `Queries` property that contains the goal queries on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="21f33-162">A propriedade `Materialize` definida como falsa.</span><span class="sxs-lookup"><span data-stu-id="21f33-162">The `Materialize` property set to false.</span></span> <span data-ttu-id="21f33-163">A definição dessa propriedade como falsa indica que o processo de design não salvará as agregações definidas no design de agregação quando o comando for concluído.</span><span class="sxs-lookup"><span data-stu-id="21f33-163">Setting this property to false indicates that the design process does not save the defined aggregations to the aggregation design when the command is completed.</span></span>  
  
 <span data-ttu-id="21f33-164">Quando o primeiro comando `DesignAggregations` termina, retorna um conjunto de linhas com as estatísticas de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-164">When the first `DesignAggregations` command finishes, the command returns a rowset that contains design statistics.</span></span> <span data-ttu-id="21f33-165">Você pode avaliar essas estatísticas de design para determinar se o processo de design deve continuar ou se ele foi concluído.</span><span class="sxs-lookup"><span data-stu-id="21f33-165">You can evaluate these design statistics to determine whether the design process should continue or whether the design process is finished.</span></span> <span data-ttu-id="21f33-166">Se o processo tiver de continuar, envie outro comando `DesignAggregations` com os valores `Steps` e `Time` aos quais esta etapa do processo de design se limita.</span><span class="sxs-lookup"><span data-stu-id="21f33-166">If the process should continue, you then send another `DesignAggregations` command that contains the `Steps` and `Time` values with which this step of the design process is limited.</span></span> <span data-ttu-id="21f33-167">Avalie as estatísticas resultantes e determine se o processo de design deve continuar.</span><span class="sxs-lookup"><span data-stu-id="21f33-167">You evaluate the resulting statistics and then determine whether the design process should continue.</span></span> <span data-ttu-id="21f33-168">Esse processo iterativo de enviar comandos `DesignAggregations` e de avaliar os resultados continuará até que você atinja suas metas e tenha um conjunto apropriado de agregações definido.</span><span class="sxs-lookup"><span data-stu-id="21f33-168">This iterative process of sending `DesignAggregations` commands and evaluating the results continues until you reach your goals and have a appropriate set of aggregations defined.</span></span>  
  
 <span data-ttu-id="21f33-169">Depois de obter o conjunto de agregações desejado, envie um comando `DesignAggregations` final.</span><span class="sxs-lookup"><span data-stu-id="21f33-169">After you have reached the set of aggregations that you want, you send one final `DesignAggregations` command.</span></span> <span data-ttu-id="21f33-170">Esse comando `DesignAggregations` final deve ter sua propriedade `Steps` definida como 1 e sua propriedade `Materialize` definida como verdadeira.</span><span class="sxs-lookup"><span data-stu-id="21f33-170">This final `DesignAggregations` command should have its `Steps` property set to 1 and its `Materialize` property set to true.</span></span> <span data-ttu-id="21f33-171">Usando essas configurações, esse comando `DesignAggregations` final completa o processo de design e salva a agregação definida para o design de agregação.</span><span class="sxs-lookup"><span data-stu-id="21f33-171">By using these settings, this final `DesignAggregations` command completes the design process and saves the defined aggregation to the aggregation design.</span></span>  
  
### <a name="designing-aggregations-using-a-batch-process"></a><span data-ttu-id="21f33-172">Criando agregações usando um processo em lote</span><span class="sxs-lookup"><span data-stu-id="21f33-172">Designing Aggregations Using a Batch Process</span></span>  
 <span data-ttu-id="21f33-173">Você também pode criar agregações em um processo em lote ao enviar um único comando `DesignAggregations` com os valores das propriedades `Steps`, `Time`, `Storage` e `Optimization` aos quais todo o processo de design se destina e está limitado.</span><span class="sxs-lookup"><span data-stu-id="21f33-173">You can also design aggregations in a batch process by sending a single `DesignAggregations` command that contains the `Steps`, `Time`, `Storage`, and `Optimization` property values on which the whole design process is targeted and limited.</span></span> <span data-ttu-id="21f33-174">Se você quiser otimização fundada em uso, as consultas de meta as quais o processo de design se destina também deverão ser incluídas na propriedade `Queries`.</span><span class="sxs-lookup"><span data-stu-id="21f33-174">If you want usage-based optimization, the goal queries on which the design process is targeted should also be included in the `Queries` property.</span></span> <span data-ttu-id="21f33-175">Além disso, verifique se a propriedade `Materialize` foi definida como verdadeira, para que o processo de design salve as agregações definidas para o design de agregação quando o comando terminar.</span><span class="sxs-lookup"><span data-stu-id="21f33-175">Also make sure that the `Materialize` property is set to true, so that the design process saves the defined aggregations to the aggregation design when the command finishes.</span></span>  
  
 <span data-ttu-id="21f33-176">Você pode criar agregações usando um processo em lote em uma sessão implícita ou em uma sessão explícita.</span><span class="sxs-lookup"><span data-stu-id="21f33-176">You can design aggregations using a batch process in either an implicit or explicit session.</span></span> <span data-ttu-id="21f33-177">Para obter mais informações sobre sessões implícitas e explícitas, consulte [Managing Connections and sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span><span class="sxs-lookup"><span data-stu-id="21f33-177">For more information about implicit and explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
## <a name="returning-design-statistics"></a><span data-ttu-id="21f33-178">Retornando estatísticas de design</span><span class="sxs-lookup"><span data-stu-id="21f33-178">Returning Design Statistics</span></span>  
 <span data-ttu-id="21f33-179">Quando o comando `DesignAggregations` devolve o controle ao aplicativo cliente, retorna um conjunto de linhas com uma única linha, que representa as suas estatísticas de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-179">When the `DesignAggregations` command returns control to the client application, the command returns a rowset that contains a single row representing the design statistics for the command.</span></span> <span data-ttu-id="21f33-180">O conjunto de linhas contém as colunas listadas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="21f33-180">The rowset contains the columns listed in the following table.</span></span>  
  
|<span data-ttu-id="21f33-181">Coluna</span><span class="sxs-lookup"><span data-stu-id="21f33-181">Column</span></span>|<span data-ttu-id="21f33-182">Tipo de dados</span><span class="sxs-lookup"><span data-stu-id="21f33-182">Data type</span></span>|<span data-ttu-id="21f33-183">Descrição</span><span class="sxs-lookup"><span data-stu-id="21f33-183">Description</span></span>|  
|------------|---------------|-----------------|  
|<span data-ttu-id="21f33-184">Etapas</span><span class="sxs-lookup"><span data-stu-id="21f33-184">Steps</span></span>|<span data-ttu-id="21f33-185">Integer</span><span class="sxs-lookup"><span data-stu-id="21f33-185">Integer</span></span>|<span data-ttu-id="21f33-186">O número de etapas executadas pelo comando antes que ele devolva o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-186">The number of steps taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="21f33-187">Hora</span><span class="sxs-lookup"><span data-stu-id="21f33-187">Time</span></span>|<span data-ttu-id="21f33-188">Long integer</span><span class="sxs-lookup"><span data-stu-id="21f33-188">Long integer</span></span>|<span data-ttu-id="21f33-189">O número de milissegundos que o comando leva antes de devolver o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-189">The number of milliseconds taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="21f33-190">Otimização</span><span class="sxs-lookup"><span data-stu-id="21f33-190">Optimization</span></span>|<span data-ttu-id="21f33-191">Double</span><span class="sxs-lookup"><span data-stu-id="21f33-191">Double</span></span>|<span data-ttu-id="21f33-192">A porcentagem estimada de aperfeiçoamento de desempenho atingida pelo comando antes de devolver o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-192">The estimated percentage of performance improvement achieved by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="21f33-193">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="21f33-193">Storage</span></span>|<span data-ttu-id="21f33-194">Long integer</span><span class="sxs-lookup"><span data-stu-id="21f33-194">Long integer</span></span>|<span data-ttu-id="21f33-195">O número estimado de bytes que o comando leva antes de devolver o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-195">The estimated number of bytes taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="21f33-196">Agregações</span><span class="sxs-lookup"><span data-stu-id="21f33-196">Aggregations</span></span>|<span data-ttu-id="21f33-197">Long integer</span><span class="sxs-lookup"><span data-stu-id="21f33-197">Long integer</span></span>|<span data-ttu-id="21f33-198">O número de agregações definido pelo comando antes de devolver o controle ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="21f33-198">The number of aggregations defined by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="21f33-199">LastStep</span><span class="sxs-lookup"><span data-stu-id="21f33-199">LastStep</span></span>|<span data-ttu-id="21f33-200">Boolean</span><span class="sxs-lookup"><span data-stu-id="21f33-200">Boolean</span></span>|<span data-ttu-id="21f33-201">Indica se os dados do conjunto de linhas representam a última etapa no processo de design.</span><span class="sxs-lookup"><span data-stu-id="21f33-201">Indicates whether the data in the rowset represents the last step in the design process.</span></span> <span data-ttu-id="21f33-202">Se a propriedade `Materialize` do comando foi definida como verdadeira, o valor dessa coluna será definido como true.</span><span class="sxs-lookup"><span data-stu-id="21f33-202">If the `Materialize` property of the command was set to true,  the value of this column is set to true.</span></span>|  
  
 <span data-ttu-id="21f33-203">Você pode usar as estatísticas de design contidas no conjunto de linhas retornadas depois de cada comando `DesignAggregations` no design iterativo e no design em lote.</span><span class="sxs-lookup"><span data-stu-id="21f33-203">You can use the design statistics that are contained in the rowset returned after each `DesignAggregations` command in both iterative and batch design.</span></span> <span data-ttu-id="21f33-204">No design iterativo, você pode usar as estatísticas de design para determinar e exibir o andamento.</span><span class="sxs-lookup"><span data-stu-id="21f33-204">In iterative design, you can use the design statistics to determine and display progress.</span></span> <span data-ttu-id="21f33-205">Quando estiver criando agregações em lote, poderá usar as estatísticas de design para determinar o número de agregações criadas pelo comando.</span><span class="sxs-lookup"><span data-stu-id="21f33-205">When you are designing aggregations in batch, you can use the design statistics to determine the number of aggregations created by the command.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="21f33-206">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="21f33-206">See Also</span></span>  
 [<span data-ttu-id="21f33-207">Desenvolvendo com XMLA no Analysis Services</span><span class="sxs-lookup"><span data-stu-id="21f33-207">Developing with XMLA in Analysis Services</span></span>](developing-with-xmla-in-analysis-services.md)  
  
  
