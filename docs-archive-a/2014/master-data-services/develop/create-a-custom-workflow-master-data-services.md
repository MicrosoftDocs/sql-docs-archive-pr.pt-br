---
title: Criar um fluxo de trabalho personalizado (Master Data Services) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: reference
ms.assetid: 8e4403e9-595c-4b6b-9d0c-f6ae1b2bc99d
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: cac53946d83eda178328b153875a86440517a560
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87584174"
---
# <a name="create-a-custom-workflow-master-data-services"></a><span data-ttu-id="67c74-102">Criar um fluxo de trabalho personalizado (Master Data Services)</span><span class="sxs-lookup"><span data-stu-id="67c74-102">Create a Custom Workflow (Master Data Services)</span></span>
  <span data-ttu-id="67c74-103">O [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] usa regras de negócio para criar soluções de fluxo de trabalho básicas, como atualizar automaticamente e validar dados e obter o envio de notificações por email, com base nas condições especificadas.</span><span class="sxs-lookup"><span data-stu-id="67c74-103">[!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] uses business rules to create basic workflow solutions, such as to automatically update and validate data and have e-mail notifications sent, based on conditions you specify.</span></span> <span data-ttu-id="67c74-104">Quando você requer processamento mais complexo do que o oferecido pelas ações de fluxo de trabalho internas, use um fluxo de trabalho personalizado.</span><span class="sxs-lookup"><span data-stu-id="67c74-104">When you require processing that is more complex than what the built-in workflow actions provide, use a custom workflow.</span></span> <span data-ttu-id="67c74-105">Um fluxo de trabalho personalizado é um assembly .NET que você cria.</span><span class="sxs-lookup"><span data-stu-id="67c74-105">A custom workflow is a .NET assembly that you create.</span></span> <span data-ttu-id="67c74-106">Quando seu assembly de fluxo de trabalho é chamado, seu código pode executar qualquer ação que sua situação exija.</span><span class="sxs-lookup"><span data-stu-id="67c74-106">When your workflow assembly is called, your code can take whatever action your situation requires.</span></span> <span data-ttu-id="67c74-107">Por exemplo, se seu fluxo de trabalho exigir o processamento de eventos complexos, como aprovações em várias camadas ou árvores de decisão complicadas, você poderá configurar o [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para iniciar um fluxo de trabalho personalizado que analisa os dados e determina para onde enviá-lo para aprovação.</span><span class="sxs-lookup"><span data-stu-id="67c74-107">For example, if your workflow requires complex event processing, such as multi-tiered approvals or complicated decision trees, you can configure [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to start a custom workflow that analyzes the data and determines where to send it for approval.</span></span>  
  
## <a name="how-custom-workflows-are-processed"></a><span data-ttu-id="67c74-108">Como os fluxos de trabalho personalizados são processados</span><span class="sxs-lookup"><span data-stu-id="67c74-108">How Custom Workflows Are Processed</span></span>  
 <span data-ttu-id="67c74-109">Há três componentes principais envolvidos no processamento de fluxos de trabalho personalizados: o aplicativo Web [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server e o assembly de manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-109">There are three main components involved to process custom workflows: the [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] web application, SQL Server MDS Workflow Integration Service, and the workflow handler assembly.</span></span> <span data-ttu-id="67c74-110">Esses componentes processam um fluxo de trabalho personalizado da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="67c74-110">These components process a custom workflow as follows:</span></span>  
  
1.  <span data-ttu-id="67c74-111">Você usa o [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] para validar uma entidade que inicia um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-111">You use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to validate an entity that starts a workflow.</span></span>  
  
2.  <span data-ttu-id="67c74-112">O [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] envia membros que conhecem as condições de regra de negócio a uma fila do Service Broker no banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="67c74-112">[!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] sends members that meet the business rule conditions to a Service Broker queue in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
3.  <span data-ttu-id="67c74-113">Em intervalos regulares, o Serviço de Integração de Fluxo de trabalho MDS do SQL Server chama um procedimento armazenado no banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="67c74-113">At regular intervals, SQL Server MDS Workflow Integration Service calls a stored procedure in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
4.  <span data-ttu-id="67c74-114">Quando esse procedimento armazenado localiza registros na fila do Service Broker, retorna-os ao Serviço de Integração de Fluxo de Trabalho MDS do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="67c74-114">When this stored procedure finds records in the Service Broker queue, it returns them to SQL Server MDS Workflow Integration Service.</span></span>  
  
5.  <span data-ttu-id="67c74-115">O Serviço de Integração de Fluxo de Trabalho MDS do SQL Server encaminha os dados para seu assembly de manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-115">SQL Server MDS Workflow Integration Services routes the data to your workflow handler assembly.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="67c74-116">Observação: o Serviço de Integração de Fluxo de Trabalho do MDS do SQL Server deve disparar processos simples.</span><span class="sxs-lookup"><span data-stu-id="67c74-116">Note: SQL Server MDS Workflow Integration Service is meant to trigger simple processes.</span></span> <span data-ttu-id="67c74-117">Se seu código personalizado exigir processamento complexo, conclua seu processamento em um thread separado ou fora do processo de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-117">If your custom code requires complex processing, complete your processing either in a separate thread or outside of the workflow process.</span></span>  
  
## <a name="configure-master-data-services-for-custom-workflows"></a><span data-ttu-id="67c74-118">Configurar Master Data Services para fluxos de trabalho personalizados</span><span class="sxs-lookup"><span data-stu-id="67c74-118">Configure Master Data Services for Custom Workflows</span></span>  
 <span data-ttu-id="67c74-119">A criação de um fluxo de trabalho personalizado requer gravação de um código personalizado e configuração do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para transmitir dados de fluxo de trabalho a seu manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-119">Creating a custom workflow requires writing some custom code and configuring [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to pass workflow data to your workflow handler.</span></span> <span data-ttu-id="67c74-120">Siga estas etapas para habilitar o processamento de fluxo de trabalho personalizado:</span><span class="sxs-lookup"><span data-stu-id="67c74-120">Follow these steps to enable custom workflow processing:</span></span>  
  
1.  <span data-ttu-id="67c74-121">Crie um assembly .NET que implemente [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span><span class="sxs-lookup"><span data-stu-id="67c74-121">Create a .NET assembly that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span></span>  
  
2.  <span data-ttu-id="67c74-122">Configure o Serviço de Integração de Fluxo de trabalho MDS do SQL Server para conectar a seu banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] e associar uma marca a um manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-122">Configure SQL Server MDS Workflow Integration Service to connect to your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler.</span></span>  
  
3.  <span data-ttu-id="67c74-123">Iniciar o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server</span><span class="sxs-lookup"><span data-stu-id="67c74-123">Start SQL Server MDS Workflow Integration Service.</span></span>  
  
4.  <span data-ttu-id="67c74-124">Crie uma regra de negócios no [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] que inicie um fluxo de trabalho marcado com o nome do seu manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-124">Create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] that starts a workflow that is tagged with the name of your workflow handler.</span></span>  
  
5.  <span data-ttu-id="67c74-125">Aplique a regra de negócio a um membro que dispara seu fluxo de trabalho personalizado.</span><span class="sxs-lookup"><span data-stu-id="67c74-125">Apply the business rule to a member that triggers your custom workflow.</span></span>  
  
### <a name="create-the-workflow-handler-assembly"></a><span data-ttu-id="67c74-126">Crie o assembly de manipulador de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="67c74-126">Create the Workflow Handler Assembly</span></span>  
 <span data-ttu-id="67c74-127">Um fluxo de trabalho personalizado é um assembly da biblioteca de classes do .NET que implementa a interface [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="67c74-127">A custom workflow is a .NET class library assembly that implements the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="67c74-128">SQL Server serviço de integração do fluxo de trabalho do MDS chama o método [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) para executar seu código.</span><span class="sxs-lookup"><span data-stu-id="67c74-128">SQL Server MDS Workflow Integration Service calls the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method to run your code.</span></span> <span data-ttu-id="67c74-129">Por exemplo, o código que implementa [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), consulte o [exemplo de fluxo de trabalho personalizado &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span><span class="sxs-lookup"><span data-stu-id="67c74-129">For example code that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), see [Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span></span>  
  
 <span data-ttu-id="67c74-130">Siga estas etapas para usar o Visual Studio 2010 para criar um assembly que o Serviço de Integração de Fluxo de trabalho MDS do SQL Server possa chamar para tratar um fluxo de trabalho personalizado:</span><span class="sxs-lookup"><span data-stu-id="67c74-130">Follow these steps to use Visual Studio 2010 to create an assembly that SQL Server MDS Workflow Integration Service can call to handle a custom workflow:</span></span>  
  
1.  <span data-ttu-id="67c74-131">No Visual Studio 2010, crie um novo projeto **Biblioteca de Classes** que usa a linguagem de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="67c74-131">In Visual Studio 2010, create a new **Class Library** project that uses the language of your choice.</span></span> <span data-ttu-id="67c74-132">Para criar uma Biblioteca de Classes C#, selecione os tipos de projetos **Visual C#\Windows** e selecione o modelo **Biblioteca de Classes**.</span><span class="sxs-lookup"><span data-stu-id="67c74-132">To create a C# Class Library, select the **Visual C#\Windows** project types and select the **Class Library** template.</span></span> <span data-ttu-id="67c74-133">Insira um nome para seu projeto, como **MDSWorkflowTest**, e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="67c74-133">Enter a name for your project, such as **MDSWorkflowTest**, and click **OK**.</span></span>  
  
2.  <span data-ttu-id="67c74-134">Adicione uma referência a Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span><span class="sxs-lookup"><span data-stu-id="67c74-134">Add a reference to Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span></span> <span data-ttu-id="67c74-135">Esse assembly pode ser encontrado em \<Your installation folder> \Master data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="67c74-135">This assembly can be found in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
3.  <span data-ttu-id="67c74-136">Adicione 'using Microsoft.MasterDataServices.Core.Workflow;' ao seu arquivo de código C#.</span><span class="sxs-lookup"><span data-stu-id="67c74-136">Add 'using Microsoft.MasterDataServices.Core.Workflow;' to your C# code file.</span></span>  
  
4.  <span data-ttu-id="67c74-137">Herdar de [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) em sua declaração de classe.</span><span class="sxs-lookup"><span data-stu-id="67c74-137">Inherit from [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) in your class declaration.</span></span> <span data-ttu-id="67c74-138">A declaração de classe deve ser semelhante a: 'public class WorkflowTester : IWorkflowTypeExtender'.</span><span class="sxs-lookup"><span data-stu-id="67c74-138">The class declaration should be similar to: 'public class WorkflowTester : IWorkflowTypeExtender'.</span></span>  
  
5.  <span data-ttu-id="67c74-139">Implemente a interface [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="67c74-139">Implement the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="67c74-140">O método [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) é chamado por SQL Server serviço de integração de fluxo de trabalho do MDS para iniciar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-140">The [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method is called by SQL Server MDS Workflow Integration Service to start your workflow.</span></span>  
  
6.  <span data-ttu-id="67c74-141">Copie o assembly para o local do SQL Server executável do serviço de integração do fluxo de trabalho do MDS, chamado Microsoft.MasterDataServices.Workflow.exe, em \<Your installation folder> \Master data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="67c74-141">Copy your assembly to the location of the SQL Server MDS Workflow Integration Service executable, named Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
### <a name="configure-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="67c74-142">Configurar o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server</span><span class="sxs-lookup"><span data-stu-id="67c74-142">Configure SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="67c74-143">Edite o arquivo de configuração do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para incluir informações de conexão do seu banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] e associe uma marca a seu assembly de manipulador de fluxo de trabalho seguindo estas etapas:</span><span class="sxs-lookup"><span data-stu-id="67c74-143">Edit the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] configuration file to include connection information for your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler assembly by following these steps:</span></span>  
  
1.  <span data-ttu-id="67c74-144">Localizar Microsoft.MasterDataServices.Workflow.exe.config no \<Your installation folder> \Master data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="67c74-144">Find Microsoft.MasterDataServices.Workflow.exe.config in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
2.  <span data-ttu-id="67c74-145">Adicione as informações de conexão de banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] à configuração "ConnectionString".</span><span class="sxs-lookup"><span data-stu-id="67c74-145">Add the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database connection information to the "ConnectionString" setting.</span></span> <span data-ttu-id="67c74-146">Se a sua instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usar ordenação com diferenciação de maiúsculas e minúsculas, o nome do banco de dados deverá ser inserido exatamente da mesma forma que no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="67c74-146">If your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation uses case-sensitive collation, the name of the database must be entered in the same case as in the database.</span></span> <span data-ttu-id="67c74-147">Por exemplo, a marca de configuração completa poderia se parecer com:</span><span class="sxs-lookup"><span data-stu-id="67c74-147">For example, the complete setting tag might look like this:</span></span>  
  
    ```xml  
    <setting name="ConnectionString" serializeAs="String">  
        <value>Server=myServer;Database=myDatabase;Integrated Security=True</value>  
    </setting>  
    ```  
  
3.  <span data-ttu-id="67c74-148">Sob a configuração "ConnectionString" adicione uma configuração "WorkflowTypeExtenders" para associar um nome de tag a seu assembly de manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-148">Below the "ConnectionString" setting add a "WorkflowTypeExtenders" setting to associate a tag name with your workflow handler assembly.</span></span> <span data-ttu-id="67c74-149">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="67c74-149">For example:</span></span>  
  
    ```xml  
    <setting name="WorkflowTypeExtenders" serializeAs="String">  
        <value>TEST=MDSWorkflowTestLib.WorkflowTester, MDSWorkflowTestLib</value>  
    </setting>  
    ```  
  
     <span data-ttu-id="67c74-150">O texto interno da \<value> marca está na forma de \<Workflow tag> = \<assembly-qualified workflow type name> .</span><span class="sxs-lookup"><span data-stu-id="67c74-150">The inner text of the \<value> tag is in the form of \<Workflow tag>=\<assembly-qualified workflow type name>.</span></span> <span data-ttu-id="67c74-151">\<Workflow tag>é um nome que você usa para identificar o assembly do manipulador de fluxo de trabalho ao criar uma regra de negócio no [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="67c74-151">\<Workflow tag> is a name you use to identify the workflow handler assembly when you create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)].</span></span> <span data-ttu-id="67c74-152">\<assembly-qualified workflow type name>é o nome qualificado do namespace da sua classe de fluxo de trabalho, seguido por uma vírgula, seguido pelo nome de exibição do assembly.</span><span class="sxs-lookup"><span data-stu-id="67c74-152">\<assembly-qualified workflow type name> is the namespace-qualified name of your workflow class, followed by a comma, followed by the display name of the assembly.</span></span> <span data-ttu-id="67c74-153">Se seu assembly usar um nome forte, você também terá que incluir informações de versão e seu PublicKeyToken.</span><span class="sxs-lookup"><span data-stu-id="67c74-153">If your assembly is strongly named, you also have to include version information and its PublicKeyToken.</span></span> <span data-ttu-id="67c74-154">Você pode incluir várias \<setting> marcas se tiver criado vários manipuladores de fluxo de trabalho para diferentes tipos de fluxos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-154">You can include multiple \<setting> tags if you have created multiple workflow handlers for different kinds of workflows.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="67c74-155">Dependendo da configuração do seu servidor, você poderá visualizar um erro do tipo "Acesso negado" ao tentar salvar o arquivo Microsoft.MasterDataServices.Workflow.exe.config.</span><span class="sxs-lookup"><span data-stu-id="67c74-155">Depending on the configuration of your server, you may see an "Access is denied" error when you try to save the Microsoft.MasterDataServices.Workflow.exe.config file.</span></span> <span data-ttu-id="67c74-156">Se isso ocorrer, desabilite temporariamente o UAC (Controle de Conta de Usuário) no servidor.</span><span class="sxs-lookup"><span data-stu-id="67c74-156">If this occurs, temporarily disable User Account Control (UAC) on the server.</span></span> <span data-ttu-id="67c74-157">Para fazer isso, abra o Painel de controle e clique em **Sistema e Segurança**.</span><span class="sxs-lookup"><span data-stu-id="67c74-157">To do this, open Control Panel, click **System and Security**.</span></span> <span data-ttu-id="67c74-158">Em **Central de Ações**, clique em **Alterar Configurações de Controle de Conta de Usuário**.</span><span class="sxs-lookup"><span data-stu-id="67c74-158">Under **Action Center**, click **Change User Account Control Settings**.</span></span> <span data-ttu-id="67c74-159">Na caixa de diálogo **Configurações de Controle de Conta de Usuário**, deslize a barra para a parte inferior para que você nunca seja notificado.</span><span class="sxs-lookup"><span data-stu-id="67c74-159">In the **User Account Control Settings** dialog, slide the bar to the bottom so that you are never notified.</span></span> <span data-ttu-id="67c74-160">Reinicie seu computador e repita as etapas anteriores para editar seu arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="67c74-160">Restart your computer and repeat the preceding steps to edit your configuration file.</span></span> <span data-ttu-id="67c74-161">Depois de salvar o arquivo, reinicie suas configurações de UAC no nível padrão.</span><span class="sxs-lookup"><span data-stu-id="67c74-161">After saving the file, reset your UAC settings to the default level.</span></span>  
  
### <a name="start-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="67c74-162">Iniciar o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server</span><span class="sxs-lookup"><span data-stu-id="67c74-162">Start SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="67c74-163">Por padrão, o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server não é instalado.</span><span class="sxs-lookup"><span data-stu-id="67c74-163">By default, SQL Server MDS Workflow Integration Service is not installed.</span></span> <span data-ttu-id="67c74-164">Você deve instalar o serviço antes de usá-lo.</span><span class="sxs-lookup"><span data-stu-id="67c74-164">You must install the service before it can be used.</span></span> <span data-ttu-id="67c74-165">Para obter a segurança máxima, crie um usuário local para o serviço e conceda a ele apenas as permissões necessárias para executar operações de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-165">For the greatest security, create a local user for the service and grant this user only the permissions needed to perform workflow operations.</span></span> <span data-ttu-id="67c74-166">Para criar um usuário, instale e inicie o serviço e siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="67c74-166">To create a user, install the service, and start the service, follow these steps:</span></span>  
  
1.  <span data-ttu-id="67c74-167">Use o gerenciador Usuários e Grupos Locais para criar um usuário local denominado, por exemplo, mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="67c74-167">Use the Local Users and Groups manager to create a local user named, for example, mds_workflow_service.</span></span>  
  
2.  <span data-ttu-id="67c74-168">Use o SQL Server Management Studio para conceder a permissão de usuário a mds_workflow_service para executar o procedimento armazenado [mdm]. [udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="67c74-168">Use SQL Server Management Studio to grant the mds_workflow_service user permission to execute the [mdm].[udpExternalActionsGet] stored procedure.</span></span> <span data-ttu-id="67c74-169">Para fazer isso, crie um novo logon para a conta mds_workflow_service, crie um novo usuário no banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)], mapeie esse usuário para o logon de mds_workflow_service e conceda ao usuário a permissão de EXECUTE para o procedimento armazenado [mdm]. [udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="67c74-169">To do this, create a new login for the mds_workflow_service account, create a new user in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database, map this user to the mds_workflow_service login, and grant the user EXECUTE permission to the [mdm].[udpExternalActionsGet] stored procedure.</span></span>  
  
3.  <span data-ttu-id="67c74-170">Conceda a permissão de usuário a mds_workflow_service para executar o assembly de manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-170">Grant the mds_workflow_service user permission to execute the workflow handler assembly.</span></span> <span data-ttu-id="67c74-171">Para fazer isso, adicione o usuário mds_workflow_service à guia **Segurança** das **Propriedades** do assembly de manipulador de fluxo de trabalho e conceda ao usuário mds_workflow_service as permissões READ e EXECUTE.</span><span class="sxs-lookup"><span data-stu-id="67c74-171">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of the workflow handler assembly and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
4.  <span data-ttu-id="67c74-172">Conceda a permissão de usuário a mds_workflow_service para executar o executável do Serviço de Integração de Fluxo de Trabalho MDS do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="67c74-172">Grant the mds_workflow_service user permission to execute the SQL Server MDS Workflow Integration Service executable.</span></span> <span data-ttu-id="67c74-173">Para fazer isso, adicione o mds_workflow_service usuário à guia **segurança** das **Propriedades** de Microsoft.MasterDataServices.Workflow.exe, em \<Your installation folder> \Master data Services\WebApplication\bin e conceda a permissão de leitura e execução do usuário mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="67c74-173">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
5.  <span data-ttu-id="67c74-174">Instale o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server usando o utilitário de instalação .NET, denominado InstallUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="67c74-174">Install SQL Server MDS Workflow Integration Service by using the .NET installation utility, named InstallUtil.exe.</span></span> <span data-ttu-id="67c74-175">InstallUtil.exe pode ser encontrado na pasta de instalação .NET, como C:\Windows\Microsoft.NET\Framework\v4.0.30319\\.</span><span class="sxs-lookup"><span data-stu-id="67c74-175">InstallUtil.exe can be found in the .NET installation folder, such as C:\Windows\Microsoft.NET\Framework\v4.0.30319\\.</span></span> <span data-ttu-id="67c74-176">Instale o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server inserindo o seguinte em um prompt de comando elevado:</span><span class="sxs-lookup"><span data-stu-id="67c74-176">Install SQL Server MDS Workflow Integration Service by entering the following in an elevated command prompt:</span></span>  
  
    ```  
    C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil Microsoft.MasterDataServices.Workflow.exe  
    ```  
  
     <span data-ttu-id="67c74-177">Especifique o usuário mds_workflow_service quando solicitado durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="67c74-177">Specify the mds_workflow_service user when prompted during installation.</span></span>  
  
6.  <span data-ttu-id="67c74-178">Inicie o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server usando o snap-in Serviços.</span><span class="sxs-lookup"><span data-stu-id="67c74-178">Start SQL Server MDS Workflow Integration Service by using the Services snap-in.</span></span> <span data-ttu-id="67c74-179">Para fazer isso, localize o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server no snap-in Serviços, selecione-o e clique no link **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="67c74-179">To do this, find SQL Server MDS Workflow Integration Service in the Services snap-in, select it, and click the  **Start** link.</span></span>  
  
### <a name="create-a-workflow-business-rule"></a><span data-ttu-id="67c74-180">Criar uma regra de negócio de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="67c74-180">Create a Workflow Business Rule</span></span>  
 <span data-ttu-id="67c74-181">Use o [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] para criar e publicar uma regra de negócio que iniciará o fluxo de trabalho quando aplicada.</span><span class="sxs-lookup"><span data-stu-id="67c74-181">Use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to create and publish a business rule that will start the workflow when applied.</span></span> <span data-ttu-id="67c74-182">Você deve assegurar que sua regra de negócio contenha ações que alteram valores de atributo, de forma que a regra seja avaliada como falsa depois de ser aplicada uma vez.</span><span class="sxs-lookup"><span data-stu-id="67c74-182">You should ensure that your business rule contains actions that change attribute values, so that the rule evaluates to false after it has been applied once.</span></span> <span data-ttu-id="67c74-183">Por exemplo, sua regra de negócio pode ser avaliada como verdadeira quando um valor do atributo Price for maior que 500 e o valor do atributo Approved estiver em branco.</span><span class="sxs-lookup"><span data-stu-id="67c74-183">For example, your business rule might evaluate to true when a Price attribute value is greater than 500 and the Approved attribute value is blank.</span></span> <span data-ttu-id="67c74-184">A regra pode incluir duas ações: uma para definir o valor do atributo Approved como Pending e uma para iniciar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-184">The rule can then include two actions: one to set the Approved attribute value to Pending and one to start the workflow.</span></span> <span data-ttu-id="67c74-185">Alternativamente, talvez você queira criar uma regra que use a condição "has changed" e adicionar seus atributos a grupos de controle de alterações.</span><span class="sxs-lookup"><span data-stu-id="67c74-185">Alternatively, you may want to create a rule that uses the "has changed" condition and add your attributes to change tracking groups.</span></span> <span data-ttu-id="67c74-186">Para saber mais sobre regras de negócio, veja [Regras de negócio &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="67c74-186">For more information about business rules, see [Business Rules &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span></span>  
  
 <span data-ttu-id="67c74-187">Crie uma regra de negócio que inicie um fluxo de trabalho personalizado no [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] seguindo estas etapas:</span><span class="sxs-lookup"><span data-stu-id="67c74-187">Create a business rule that starts a custom workflow in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] by following these steps:</span></span>  
  
1.  <span data-ttu-id="67c74-188">No editor de regras de negócio do [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] , depois de especificar as condições de sua regra de negócio, arraste a ação **Iniciar fluxo de trabalho** da lista **ações externas** para o rótulo de **ação** do painel **then** .</span><span class="sxs-lookup"><span data-stu-id="67c74-188">In the business rule editor of [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], after you have specified the conditions of your business rule, drag the **Start Workflow** action from the **External actions** list to the **THEN** pane's **Action** label.</span></span>  
  
2.  <span data-ttu-id="67c74-189">No painel **Editar Ação**, na caixa **Tipo de fluxo de trabalho**, digite a marca que identifica seu assembly de manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-189">In the **Edit Action** pane, in the **Workflow type** box, type the tag that identifies your workflow handler assembly.</span></span> <span data-ttu-id="67c74-190">Essa é a marca que você especificou no arquivo de configuração do assembly, por exemplo TEST.</span><span class="sxs-lookup"><span data-stu-id="67c74-190">This is the tag you specified in the configuration file for your assembly, for example, TEST.</span></span>  
  
3.  <span data-ttu-id="67c74-191">Opcionalmente, marque a caixa de seleção **Incluir dados de membro**.</span><span class="sxs-lookup"><span data-stu-id="67c74-191">Optionally, select the **Include member data** check box.</span></span> <span data-ttu-id="67c74-192">Escolha essa opção para incluir nomes de atributo e valores no XML transmitido ao manipulador de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-192">Choose this to include attribute names and values in the XML that is passed to the workflow handler.</span></span>  
  
4.  <span data-ttu-id="67c74-193">Na caixa **Local do fluxo de trabalho**, digite o nome de um site.</span><span class="sxs-lookup"><span data-stu-id="67c74-193">In the **Workflow site** box, type the name of a website.</span></span> <span data-ttu-id="67c74-194">Talvez isso não se aplique ao seu fluxo de trabalho personalizado, mas pode ser usado para contexto adicionado.</span><span class="sxs-lookup"><span data-stu-id="67c74-194">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
5.  <span data-ttu-id="67c74-195">Na caixa **Nome do fluxo de trabalho**, digite o nome do seu fluxo de trabalho do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="67c74-195">In the **Workflow name** box, type the name of your workflow from Visual Studio.</span></span> <span data-ttu-id="67c74-196">Talvez isso não se aplique ao seu fluxo de trabalho personalizado, mas pode ser usado para contexto adicionado.</span><span class="sxs-lookup"><span data-stu-id="67c74-196">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
6.  <span data-ttu-id="67c74-197">Salve e publique a regra de negócio.</span><span class="sxs-lookup"><span data-stu-id="67c74-197">Save and publish the business rule.</span></span>  
  
### <a name="apply-business-rules-to-start-a-workflow"></a><span data-ttu-id="67c74-198">Aplicar regras de negócios para iniciar um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="67c74-198">Apply Business Rules to Start a Workflow</span></span>  
 <span data-ttu-id="67c74-199">Aplique a regra de negócio a seus dados para iniciar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="67c74-199">Apply the business rule to your data to start the workflow.</span></span> <span data-ttu-id="67c74-200">Para fazer isso, use o [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] para editar a entidade que contém os membros que você deseja validar.</span><span class="sxs-lookup"><span data-stu-id="67c74-200">To do this, use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to edit the entity that contains the members you want to validate.</span></span> <span data-ttu-id="67c74-201">Clique em **Aplicar regras de negócio**.</span><span class="sxs-lookup"><span data-stu-id="67c74-201">Click **Apply business rules**.</span></span> <span data-ttu-id="67c74-202">Em resposta à regra de negócio, o [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] popula a fila do Service Broker do banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="67c74-202">In response to the business rule, [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] populates the Service Broker queue of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="67c74-203">Quando Serviço de Integração de Fluxo de Trabalho MDS do SQL Server verificar a fila, enviará os dados ao assembly de manipulador de fluxo de trabalho especificado e limpará a fila.</span><span class="sxs-lookup"><span data-stu-id="67c74-203">When SQL Server MDS Workflow Integration Service checks the queue, it sends the data to the specified workflow handler assembly and clears the queue.</span></span> <span data-ttu-id="67c74-204">O assembly de manipulador de fluxo de trabalho executa qualquer ação que você tenha codificado para ele.</span><span class="sxs-lookup"><span data-stu-id="67c74-204">The workflow handler assembly performs whatever actions you have coded into it.</span></span>  
  
## <a name="troubleshoot-custom-workflows"></a><span data-ttu-id="67c74-205">Solucionar problemas fluxos de trabalho personalizados</span><span class="sxs-lookup"><span data-stu-id="67c74-205">Troubleshoot Custom Workflows</span></span>  
 <span data-ttu-id="67c74-206">Se o assembly de manipulador de fluxo de trabalho não receber dados, você poderá tentar depurar o Serviço de Integração de Fluxo de Trabalho do MDS do SQL Server ou exibir a fila do Service Broker.</span><span class="sxs-lookup"><span data-stu-id="67c74-206">If your workflow handler assembly doesn't receive data, you can try debugging SQL Server MDS Workflow Integration Service or viewing the Service Broker queue.</span></span>  
  
### <a name="debug-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="67c74-207">Depurar o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server</span><span class="sxs-lookup"><span data-stu-id="67c74-207">Debug SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="67c74-208">Para depurar o Serviço de Integração de Fluxo de Trabalho MDS do SQL Server, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="67c74-208">To debug SQL Server Workflow Integration Service, take the following steps:</span></span>  
  
1.  <span data-ttu-id="67c74-209">Use o snap-in Serviços para parar o serviço.</span><span class="sxs-lookup"><span data-stu-id="67c74-209">Use the Services snap-in to stop the service.</span></span>  
  
2.  <span data-ttu-id="67c74-210">Abra um prompt de comando, navegue para local do serviço e execute o serviço no modo de console inserindo: Microsoft.MasterDataServices.Workflow.exe - console.</span><span class="sxs-lookup"><span data-stu-id="67c74-210">Open a command prompt, navigate to the location of the service, and run the service in console mode by entering: Microsoft.MasterDataServices.Workflow.exe -console.</span></span>  
  
3.  <span data-ttu-id="67c74-211">No [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], atualize seu membro e aplique regras de negócios novamente.</span><span class="sxs-lookup"><span data-stu-id="67c74-211">In [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], update your member and apply business rules again.</span></span> <span data-ttu-id="67c74-212">Logs detalhados são exibidos na janela do console.</span><span class="sxs-lookup"><span data-stu-id="67c74-212">Detailed logs are displayed in the console window.</span></span>  
  
### <a name="view-the-service-broker-queue"></a><span data-ttu-id="67c74-213">Exibir a fila do Service Broker</span><span class="sxs-lookup"><span data-stu-id="67c74-213">View the Service Broker Queue</span></span>  
 <span data-ttu-id="67c74-214">A fila do Service Broker que contém os dados mestre transmitidos como parte do fluxo de trabalho é: mdm.microsoft/mdm/queue/externalaction.</span><span class="sxs-lookup"><span data-stu-id="67c74-214">The Service Broker queue that contains the master data passed as part of the workflow is: mdm.microsoft/mdm/queue/externalaction.</span></span> <span data-ttu-id="67c74-215">As filas podem ser localizadas no **Pesquisador de Objetos** do SQL Management Studio sob o nó do Service Broker do banco de dados do [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="67c74-215">Queues can be found in the **Object Explorer** of SQL Management Studio under the Service Broker node of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="67c74-216">Esteja ciente de que, se o serviço limpou a fila corretamente, ela fila estará vazia.</span><span class="sxs-lookup"><span data-stu-id="67c74-216">Be aware that, if the service cleared the queue properly, this queue will be empty.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="67c74-217">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="67c74-217">See Also</span></span>  
 <span data-ttu-id="67c74-218">[Exemplo de fluxo de trabalho personalizado &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span><span class="sxs-lookup"><span data-stu-id="67c74-218">[Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span></span>  
 [<span data-ttu-id="67c74-219">Descrição XML do fluxo de trabalho personalizado &#40;Master Data Services&#41;</span><span class="sxs-lookup"><span data-stu-id="67c74-219">Custom Workflow XML Description &#40;Master Data Services&#41;</span></span>](create-a-custom-workflow-xml-description.md)  
  
  
