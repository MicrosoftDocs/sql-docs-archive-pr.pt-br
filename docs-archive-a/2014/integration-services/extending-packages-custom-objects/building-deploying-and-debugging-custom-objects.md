---
title: Compilar, implantar e depurar objetos personalizados | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: reference
helpviewer_keywords:
- custom objects [Integration Services]
ms.assetid: b03685bc-5398-4c3f-901a-1219c1098fbe
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 13157fce4e5c7dd8987f4950a6b4250ea0e36094
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87683619"
---
# <a name="building-deploying-and-debugging-custom-objects"></a><span data-ttu-id="e36a3-102">Compilando, implantando e depurando objetos personalizados</span><span class="sxs-lookup"><span data-stu-id="e36a3-102">Building, Deploying, and Debugging Custom Objects</span></span>
  <span data-ttu-id="e36a3-103">Depois de escrever o código de um objeto personalizado do [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], você deve compilar o assembly, implantá-lo e integrá-lo ao [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer para disponibilizar seu uso em pacotes, além de testá-lo e depurá-lo.</span><span class="sxs-lookup"><span data-stu-id="e36a3-103">After you have written the code for a custom object for [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], you must build the assembly, deploy it, integrate it into [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer to make it available for use in packages, and test and debug it.</span></span>

##  <a name="steps-in-building-deploying-and-debugging-a-custom-object-for-integration-services"></a><a name="top"></a> <span data-ttu-id="e36a3-104">Etapas para compilar, implantar e depurar um objeto personalizado para Integration Services</span><span class="sxs-lookup"><span data-stu-id="e36a3-104">Steps in Building, Deploying, and Debugging a Custom Object for Integration Services</span></span>
 <span data-ttu-id="e36a3-105">Você já gravou a funcionalidade personalizada para seu objeto.</span><span class="sxs-lookup"><span data-stu-id="e36a3-105">You have already written the custom functionality for your object.</span></span> <span data-ttu-id="e36a3-106">Agora você tem que testá-la e disponibilizá-la aos usuários.</span><span class="sxs-lookup"><span data-stu-id="e36a3-106">Now you have to test it and to make it available to users.</span></span> <span data-ttu-id="e36a3-107">As etapas são bem similares para todos os tipos de objetos personalizados que você pode criar para o [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-107">The steps are very similar for all the types of custom objects that you can create for [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span>

 <span data-ttu-id="e36a3-108">Eis as etapas que você segue ao compilar, implantar e depurar objetos personalizados:</span><span class="sxs-lookup"><span data-stu-id="e36a3-108">Here are the steps that you follow in building, deploying, and debugging it:</span></span>

1.  <span data-ttu-id="e36a3-109">[Assine](#signing) o assembly para que ele seja gerado com um nome forte.</span><span class="sxs-lookup"><span data-stu-id="e36a3-109">[Sign](#signing) the assembly to be generated with a strong name.</span></span>

2.  <span data-ttu-id="e36a3-110">[Compile](#building) o assembly.</span><span class="sxs-lookup"><span data-stu-id="e36a3-110">[Build](#building) the assembly.</span></span>

3.  <span data-ttu-id="e36a3-111">[Implante](#deploying) o assembly movendo-o ou copiando-o até a pasta do [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] apropriada.</span><span class="sxs-lookup"><span data-stu-id="e36a3-111">[Deploy](#deploying) the assembly by moving or copying it to the appropriate [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] folder.</span></span>

4.  <span data-ttu-id="e36a3-112">[Instale](#installing) o assembly no GAC (cache de assembly global).</span><span class="sxs-lookup"><span data-stu-id="e36a3-112">[Install](#installing) the assembly in the global assembly cache (GAC).</span></span>

     <span data-ttu-id="e36a3-113">O objeto é automaticamente adicionado à Caixa de Ferramentas.</span><span class="sxs-lookup"><span data-stu-id="e36a3-113">The object is automatically added to the Toolbox.</span></span>

5.  <span data-ttu-id="e36a3-114">[Solucione problemas](#troubleshooting) de implantação, se necessário.</span><span class="sxs-lookup"><span data-stu-id="e36a3-114">[Troubleshoot](#troubleshooting) the deployment, if necessary.</span></span>

6.  <span data-ttu-id="e36a3-115">[Teste](#testing) e depure seu código.</span><span class="sxs-lookup"><span data-stu-id="e36a3-115">[Test](#testing) and debug your code.</span></span>

##  <a name="signing-the-assembly"></a><a name="signing"></a> <span data-ttu-id="e36a3-116">Assinando o assembly</span><span class="sxs-lookup"><span data-stu-id="e36a3-116">Signing the Assembly</span></span>
 <span data-ttu-id="e36a3-117">Quando um assembly for compartilhado, ele deverá ser instalado no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="e36a3-117">When an assembly is meant to be shared, it must be installed in the global assembly cache.</span></span> <span data-ttu-id="e36a3-118">Depois de acrescentado ao cache de assembly global, ele poderá ser usado por aplicativos como [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-118">After the assembly has been added to the global assembly cache, the assembly can be used by applications such as [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="e36a3-119">Um requisito do cache de assembly global é que o assembly seja assinado com um nome forte, que garante que ele seja globalmente único.</span><span class="sxs-lookup"><span data-stu-id="e36a3-119">A requirement of the global assembly cache is that the assembly must be signed with a strong name, which guarantees that an assembly is globally unique.</span></span> <span data-ttu-id="e36a3-120">Um assembly com nome forte tem um nome totalmente qualificado que inclui nome, cultura, chave pública e número da versão do assembly.</span><span class="sxs-lookup"><span data-stu-id="e36a3-120">A strong-named assembly has a fully qualified name that includes the name, culture, public key, and version number of the assembly.</span></span> <span data-ttu-id="e36a3-121">O runtime usa essas informações para localizar o assembly e diferenciá-lo de outros assemblies com o mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="e36a3-121">The runtime uses this information to locate the assembly and to differentiate it from other assemblies with the same name.</span></span>

 <span data-ttu-id="e36a3-122">Para assinar um assembly com um nome forte, você deve primeiro ter ou criar um par de chaves pública/privada.</span><span class="sxs-lookup"><span data-stu-id="e36a3-122">To sign an assembly with a strong name, you must first have or create a public/private key pair.</span></span> <span data-ttu-id="e36a3-123">Esse par de chaves criptográficas pública e privada é usado na hora da compilação para criar um assembly com nome forte.</span><span class="sxs-lookup"><span data-stu-id="e36a3-123">This public and private cryptographic key pair is used at build time to create a strong-named assembly.</span></span>

 <span data-ttu-id="e36a3-124">Para obter mais informações sobre nomes fortes e sobre as etapas que você deve seguir para assinar um assembly, consulte os tópicos a seguir na documentação do SDK [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="e36a3-124">For more information about strong names and on the steps that you must followto sign an assembly, see the following topics in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] SDK documentation:</span></span>

-   <span data-ttu-id="e36a3-125">Assembly de nome forte</span><span class="sxs-lookup"><span data-stu-id="e36a3-125">Strong-Named Assemblies</span></span>

-   <span data-ttu-id="e36a3-126">Criando um par de chaves</span><span class="sxs-lookup"><span data-stu-id="e36a3-126">Creating a Key Pair</span></span>

-   <span data-ttu-id="e36a3-127">Assinando um assembly com um nome forte</span><span class="sxs-lookup"><span data-stu-id="e36a3-127">Signing an Assembly with a Strong Name</span></span>

 <span data-ttu-id="e36a3-128">Você pode assinar seu assembly facilmente com um nome forte em [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] no momento da compilação.</span><span class="sxs-lookup"><span data-stu-id="e36a3-128">You can easily sign your assembly with a strong name in [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] at build time.</span></span> <span data-ttu-id="e36a3-129">Na caixa de diálogo **Propriedades do projeto** , selecione a guia **assinatura** . Selecione a opção para **assinar o assembly** e forneça o caminho do arquivo de chave (. SNK).</span><span class="sxs-lookup"><span data-stu-id="e36a3-129">In the **Project Properties** dialog box, select the **Signing** tab. Select the option to **Sign the assembly** and then provide the path of the key (.snk) file.</span></span>

##  <a name="building-the-assembly"></a><a name="building"></a> <span data-ttu-id="e36a3-130">Compilando o assembly</span><span class="sxs-lookup"><span data-stu-id="e36a3-130">Building the Assembly</span></span>
 <span data-ttu-id="e36a3-131">Depois de assinar o projeto, você deve compilar ou recompilar o projeto ou a solução usando os comandos disponíveis no menu **Compilar** do [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-131">After signing the project, you must build or rebuild the project or the solution by using the commands available on the **Build** menu of [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="e36a3-132">Sua solução pode conter um projeto separado para uma interface do usuário personalizada, que também deve ser assinada com um nome forte e pode ser compilada ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="e36a3-132">Your solution may contain a separate project for a custom user interface, which must also be signed with a strong name, and can be built at the same time.</span></span>

 <span data-ttu-id="e36a3-133">O método mais conveniente para realizar as próximas duas etapas – implantação e instalação do assembly no cache de assembly global – é gerar o script dessas etapas como um evento pós-build em [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-133">The most convenient method for performing the next two steps-deploying the assembly and installing it in the global assembly cache-is to script these steps as a post-build event in [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span></span> <span data-ttu-id="e36a3-134">Os eventos de build estão disponíveis na página **Compilar** de Propriedades do Projeto para um projeto do [!INCLUDE[vbprvb](../../includes/vbprvb-md.md)] e na página **Eventos de Build** para um projeto em C#.</span><span class="sxs-lookup"><span data-stu-id="e36a3-134">Build events are available from the **Compile** page of Project Properties for a [!INCLUDE[vbprvb](../../includes/vbprvb-md.md)] project, and from the **Build Events** page for a C# project.</span></span> <span data-ttu-id="e36a3-135">O caminho completo é obrigatório para utilitários de prompt de comando, como **gacutil.exe**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-135">The full path is required for command prompt utilities such as **gacutil.exe**.</span></span> <span data-ttu-id="e36a3-136">São necessárias aspas nos caminhos que contêm espaços e nas macros, como $ (TargetPath) que se expande para caminhos que contêm espaços.</span><span class="sxs-lookup"><span data-stu-id="e36a3-136">Quotation marks are required both around paths that contain spaces and around macros such as $(TargetPath) that expand to paths that contain spaces.</span></span>

 <span data-ttu-id="e36a3-137">Eis um exemplo de uma linha de comando de evento pós-compilação para um provedor de log personalizado:</span><span class="sxs-lookup"><span data-stu-id="e36a3-137">Here is an example of a post-build event command line for a custom log provider:</span></span>

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -u $(TargetName)
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -i $(TargetFileName)
copy $(TargetFileName) "C:\Program Files\Microsoft SQL Server\120\DTS\LogProviders "
```

##  <a name="deploying-the-assembly"></a><a name="deploying"></a> <span data-ttu-id="e36a3-138">Implantando o assembly</span><span class="sxs-lookup"><span data-stu-id="e36a3-138">Deploying the Assembly</span></span>
 <span data-ttu-id="e36a3-139">O [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer localiza os objetos personalizados disponíveis para uso em pacotes, enumerando os arquivos encontrados em uma série de pastas que são criadas quando o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] é instalado.</span><span class="sxs-lookup"><span data-stu-id="e36a3-139">The [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer locates the custom objects available for use in packages by enumerating the files found in a series of folders that are created when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] is installed.</span></span> <span data-ttu-id="e36a3-140">Quando as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] configurações de instalação padrão são usadas, esse conjunto de pastas está localizado em **C:\Arquivos de Programas\microsoft SQL Server\120\DTS**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-140">When the default [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation settings are used, this set of folders is located under **C:\Program Files\Microsoft SQL Server\120\DTS**.</span></span> <span data-ttu-id="e36a3-141">No entanto, se você criar um programa de instalação para seu objeto personalizado, verifique o valor da chave do registro **HKEY_LOCAL_MACHINE \SOFTWARE\MICROSOFT\MICROSOFT SQL Server\120\SSIS\Setup\DtsPath** para verificar o local dessa pasta.</span><span class="sxs-lookup"><span data-stu-id="e36a3-141">However if you create a setup program for your custom object, you should check the value of the **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\120\SSIS\Setup\DtsPath** registry key to verify the location of this folder.</span></span>

 <span data-ttu-id="e36a3-142">Você pode colocar o assembly na pasta de dois modos:</span><span class="sxs-lookup"><span data-stu-id="e36a3-142">You can put the assembly in the folder in two ways:</span></span>

-   <span data-ttu-id="e36a3-143">Mova ou copie o assembly para a pasta apropriada após compilá-lo.</span><span class="sxs-lookup"><span data-stu-id="e36a3-143">Move or copy the compiled assembly to the appropriate folder after building it.</span></span> <span data-ttu-id="e36a3-144">(Para sua conveniência, você pode incluir o comando de cópia em um Evento de Pós-Compilação).</span><span class="sxs-lookup"><span data-stu-id="e36a3-144">(For convenience, you can include the copy command in a Post-build Event.)</span></span>

-   <span data-ttu-id="e36a3-145">Compile o assembly diretamente na pasta apropriada.</span><span class="sxs-lookup"><span data-stu-id="e36a3-145">Build the assembly directly in the appropriate folder.</span></span>

 <span data-ttu-id="e36a3-146">As seguintes pastas de implantação em **C:\Program Files\Microsoft SQL Server\120\DTS** são usadas para os vários tipos de objetos personalizados:</span><span class="sxs-lookup"><span data-stu-id="e36a3-146">The following deployment folders under **C:\Program Files\Microsoft SQL Server\120\DTS** are used for the various types of custom objects:</span></span>

|<span data-ttu-id="e36a3-147">Objeto personalizado</span><span class="sxs-lookup"><span data-stu-id="e36a3-147">Custom object</span></span>|<span data-ttu-id="e36a3-148">Pasta de implantação</span><span class="sxs-lookup"><span data-stu-id="e36a3-148">Deployment folder</span></span>|
|-------------------|-----------------------|
|<span data-ttu-id="e36a3-149">Tarefa</span><span class="sxs-lookup"><span data-stu-id="e36a3-149">Task</span></span>|<span data-ttu-id="e36a3-150">Tarefas</span><span class="sxs-lookup"><span data-stu-id="e36a3-150">Tasks</span></span>|
|<span data-ttu-id="e36a3-151">Gerenciador de conexões</span><span class="sxs-lookup"><span data-stu-id="e36a3-151">Connection manager</span></span>|<span data-ttu-id="e36a3-152">conexões</span><span class="sxs-lookup"><span data-stu-id="e36a3-152">Connections</span></span>|
|<span data-ttu-id="e36a3-153">Provedor de log</span><span class="sxs-lookup"><span data-stu-id="e36a3-153">Log provider</span></span>|<span data-ttu-id="e36a3-154">LogProviders</span><span class="sxs-lookup"><span data-stu-id="e36a3-154">LogProviders</span></span>|
|<span data-ttu-id="e36a3-155">Componente de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e36a3-155">Data flow component</span></span>|<span data-ttu-id="e36a3-156">PipelineComponents</span><span class="sxs-lookup"><span data-stu-id="e36a3-156">PipelineComponents</span></span>|

> [!NOTE]
>  <span data-ttu-id="e36a3-157">Os assemblies são copiados para essas pastas para dar suporte à enumeração de tarefas disponíveis, gerenciadores de conexões, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="e36a3-157">Assemblies are copied to these folders to support the enumeration of available tasks, connection managers, and so on.</span></span> <span data-ttu-id="e36a3-158">Portanto, não é necessário implantar assemblies que contenham somente a interface do usuário personalizada para objetos personalizados nessas pastas.</span><span class="sxs-lookup"><span data-stu-id="e36a3-158">Therefore you do not have to deploy assemblies that contain only the custom user interface for custom objects to these folders.</span></span>

##  <a name="installing-the-assembly-in-the-global-assembly-cache"></a><a name="installing"></a> <span data-ttu-id="e36a3-159">Instalando o assembly no cache de assembly global</span><span class="sxs-lookup"><span data-stu-id="e36a3-159">Installing the Assembly in the Global Assembly Cache</span></span>
 <span data-ttu-id="e36a3-160">Para instalar o assembly da tarefa no GAC (cache de assembly global), use a ferramenta de linha de comando **gacutil.exe** ou arraste os assemblies até o diretório `%system%\assembly`.</span><span class="sxs-lookup"><span data-stu-id="e36a3-160">To install the task assembly into the global assembly cache (GAC), use the command line tool **gacutil.exe**, or drag the assemblies to the `%system%\assembly` directory.</span></span> <span data-ttu-id="e36a3-161">Para sua conveniência, também é possível incluir a chamada para **gacutil.exe** em um evento posterior ao build.</span><span class="sxs-lookup"><span data-stu-id="e36a3-161">For convenience, you can also include the call to **gacutil.exe** in a Post-build Event.</span></span>

 <span data-ttu-id="e36a3-162">O comando a seguir instala um componente denominado *MyTask.dll* no GAC usando **gacutil.exe**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-162">The following command installs a component named *MyTask.dll* into the GAC by using **gacutil.exe**.</span></span>

 `gacutil /iF MyTask.dll`

 <span data-ttu-id="e36a3-163">É necessário fechar e reabrir o [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer depois que você instalar uma versão nova de seu objeto personalizado.</span><span class="sxs-lookup"><span data-stu-id="e36a3-163">You must close and reopen [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer after you install a new version of your custom object.</span></span> <span data-ttu-id="e36a3-164">Se você instalou versões anteriores do seu objeto personalizado no GAC, deve removê-las antes de instalar a versão nova.</span><span class="sxs-lookup"><span data-stu-id="e36a3-164">If you have installed earlier versions of your custom object in the global assembly cache, you must remove them before installing the new version.</span></span> <span data-ttu-id="e36a3-165">Para desinstalar um assembly, execute **gacutil.exe** e especifique o nome do assembly com a opção `/u`.</span><span class="sxs-lookup"><span data-stu-id="e36a3-165">To uninstall an assembly, run **gacutil.exe** and specify the assembly name with the `/u` option.</span></span>

 <span data-ttu-id="e36a3-166">Para obter mais informações sobre o GAC, consulte a Ferramenta Cache de Assembly Global (Gactutil.exe) nas Ferramentas [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-166">For more information about the global assembly cache, see Global Assembly Cache Tool (Gactutil.exe) in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] Tools.</span></span>

##  <a name="troubleshooting-the-deployment"></a><a name="troubleshooting"></a> <span data-ttu-id="e36a3-167">Solução de problemas de implantação</span><span class="sxs-lookup"><span data-stu-id="e36a3-167">Troubleshooting the Deployment</span></span>
 <span data-ttu-id="e36a3-168">Se seu objeto personalizado aparecer na **Caixa de Ferramentas** ou na lista de objetos disponíveis mas você não conseguir adicioná-lo a um pacote, tente fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e36a3-168">If your custom object appears in the **Toolbox** or the list of available objects, but you are not able to add it to a package, try the following:</span></span>

1.  <span data-ttu-id="e36a3-169">Procure múltiplas versões do seu componente no GAC.</span><span class="sxs-lookup"><span data-stu-id="e36a3-169">Look in the global assembly cache for multiple versions of your component.</span></span> <span data-ttu-id="e36a3-170">Se houver múltiplas versões do componente no GAC, o designer talvez não consiga carregar seu componente.</span><span class="sxs-lookup"><span data-stu-id="e36a3-170">If there are multiple versions of the component in the global assembly cache, the designer may not be able to load your component.</span></span> <span data-ttu-id="e36a3-171">Exclua todas as instâncias do assembly do GAC e adicione o assembly novamente.</span><span class="sxs-lookup"><span data-stu-id="e36a3-171">Delete all instances of the assembly from the global assembly cache, and re-add the assembly.</span></span>

2.  <span data-ttu-id="e36a3-172">Verifique se há somente uma única instância do assembly na pasta de implantação.</span><span class="sxs-lookup"><span data-stu-id="e36a3-172">Make sure that only a single instance of the assembly exists in the deployment folder.</span></span>

3.  <span data-ttu-id="e36a3-173">Atualize a caixa de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="e36a3-173">Refresh the Toolbox.</span></span>

4.  <span data-ttu-id="e36a3-174">Anexe [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] a **devenv.exe** e defina um ponto de interrupção para percorrer seu código de inicialização e assegurar que nenhuma exceção ocorra.</span><span class="sxs-lookup"><span data-stu-id="e36a3-174">Attach [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] to **devenv.exe** and set a breakpoint to step through your initialization code to ensure that no exceptions occur.</span></span>

##  <a name="testing-and-debugging-your-code"></a><a name="testing"></a> <span data-ttu-id="e36a3-175">Testar e depurar o código</span><span class="sxs-lookup"><span data-stu-id="e36a3-175">Testing and Debugging Your Code</span></span>
 <span data-ttu-id="e36a3-176">A abordagem mais simples para depurar os métodos de tempo de execução de um objeto personalizado é iniciar **dtexec.exe** de [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] depois de compilar seu objeto personalizado e executar um pacote que use o componente.</span><span class="sxs-lookup"><span data-stu-id="e36a3-176">The simplest approach to debugging the run-time methods of a custom object is to start **dtexec.exe** from [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] after building your custom object and run a package that uses the component.</span></span>

 <span data-ttu-id="e36a3-177">Se você quiser depurar os métodos de tempo de design do componente, como o `Validate` método, abra um pacote que usa o componente em uma segunda instância do [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] e anexe-o ao processo de **devenv.exe** .</span><span class="sxs-lookup"><span data-stu-id="e36a3-177">If you want to debug the component's design-time methods, such as the `Validate` method, open a package that uses the component in a second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], and attach to its **devenv.exe** process.</span></span>

 <span data-ttu-id="e36a3-178">Se você também desejar depurar os métodos de tempo de execução do componente quando um pacote estiver aberto e em execução no designer [!INCLUDE[ssIS](../../includes/ssis-md.md)], deverá forçar uma pausa na execução do pacote para que também seja possível anexar ao processo **DtsDebugHost.exe**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-178">If you also want to debug the component's run-time methods when a package is open and running in [!INCLUDE[ssIS](../../includes/ssis-md.md)] designer, you must force a pause in the execution of the package so that you can also attach to the **DtsDebugHost.exe** process.</span></span>

#### <a name="to-debug-an-objects-run-time-methods-by-attaching-to-dtexecexe"></a><span data-ttu-id="e36a3-179">Para depurar os métodos de tempo de execução de um objeto anexando a dtexec.exe</span><span class="sxs-lookup"><span data-stu-id="e36a3-179">To debug an object's run-time methods by attaching to dtexec.exe</span></span>

1.  <span data-ttu-id="e36a3-180">Assine e compile seu projeto na configuração de Depuração, implante-o e instale-o no cache de assembly global como descrito neste tópico.</span><span class="sxs-lookup"><span data-stu-id="e36a3-180">Sign and build your project in the Debug configuration, deploy it, and install it in the global assembly cache as described in this topic.</span></span>

2.  <span data-ttu-id="e36a3-181">Na guia **depurar** das **Propriedades do projeto**, selecione **Iniciar programa externo** como a **ação iniciar**e localize **dtexec.exe**, que é instalado por padrão em c:\Arquivos de Programas\Microsoft SQL Server\120\DTS\Binn.</span><span class="sxs-lookup"><span data-stu-id="e36a3-181">On the **Debug** tab of **Project Properties**, select **Start external program** as the **Start Action**, and locate **dtexec.exe**, which is installed by default in C:\Program Files\Microsoft SQL Server\120\DTS\Binn.</span></span>

3.  <span data-ttu-id="e36a3-182">Na caixa de texto **Opções da linha de comando**, em **Iniciar Opções**, insira os argumentos de linha de comando necessários para executar um pacote que use o componente.</span><span class="sxs-lookup"><span data-stu-id="e36a3-182">In the **Command line options** text box, under **Start Options**, enter the command line arguments required to run a package that uses your component.</span></span> <span data-ttu-id="e36a3-183">Frequentemente, o argumento de linha de comando consistirá no comutador /F [ILE] seguido pelo caminho e pelo nome do arquivo .dtsx.</span><span class="sxs-lookup"><span data-stu-id="e36a3-183">Often the command-line argument will consist of the /F[ILE] switch followed by the path and file name of the .dtsx file.</span></span> <span data-ttu-id="e36a3-184">Para saber mais, veja [dtexec Utility](../packages/dtexec-utility.md).</span><span class="sxs-lookup"><span data-stu-id="e36a3-184">For more information, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>

4.  <span data-ttu-id="e36a3-185">Defina pontos de interrupção no código fonte, quando apropriado, nos métodos de tempo de execução de seu componente.</span><span class="sxs-lookup"><span data-stu-id="e36a3-185">Set breakpoints in the source code where appropriate in the run-time methods of your component.</span></span>

5.  <span data-ttu-id="e36a3-186">Execute seu projeto.</span><span class="sxs-lookup"><span data-stu-id="e36a3-186">Run your project.</span></span>

#### <a name="to-debug-a-custom-objects-design-time-methods-by-attaching-to-sql-server-data-tools"></a><span data-ttu-id="e36a3-187">Para depurar os métodos de tempo de design de um objeto personalizado anexando às Ferramentas de Dados do SQL Server</span><span class="sxs-lookup"><span data-stu-id="e36a3-187">To debug a custom object's design-time methods by attaching to SQL Server Data Tools</span></span>

1.  <span data-ttu-id="e36a3-188">Assine e compile seu projeto na configuração de Depuração, implante-o e instale-o no cache de assembly global como descrito neste tópico.</span><span class="sxs-lookup"><span data-stu-id="e36a3-188">Sign and build your project in the Debug configuration, deploy it, and install it in the global assembly cache as described in this topic.</span></span>

2.  <span data-ttu-id="e36a3-189">Defina pontos de interrupção no código fonte, quando apropriado, nos métodos de tempo de design de seu objeto personalizado.</span><span class="sxs-lookup"><span data-stu-id="e36a3-189">Set breakpoints in the source code where appropriate in the design-time methods of your custom object.</span></span>

3.  <span data-ttu-id="e36a3-190">Abra uma segunda instância de [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] e carregue um projeto do [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] que contenha um pacote que use o objeto personalizado.</span><span class="sxs-lookup"><span data-stu-id="e36a3-190">Open a second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] and load an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] project that contains a package that uses the custom object.</span></span>

4.  <span data-ttu-id="e36a3-191">Da primeira instância do [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], anexe à segunda instância de **devenv.exe** na qual o pacote foi carregado selecionando **Anexar ao Processo** do menu **Depurar** da primeira instância.</span><span class="sxs-lookup"><span data-stu-id="e36a3-191">From the first instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], attach to the second instance of **devenv.exe** in which the package is loaded by selecting **Attach to Process** from the **Debug** menu of the first instance.</span></span>

5.  <span data-ttu-id="e36a3-192">Execute o pacote da segunda instância de [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e36a3-192">Run the package from the second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span></span>

#### <a name="to-debug-a-custom-objects-run-time-methods-by-attaching-to-sql-server-data-tools"></a><span data-ttu-id="e36a3-193">Para depurar os métodos de tempo de execução de um objeto personalizado anexando às Ferramentas de Dados do SQL Server</span><span class="sxs-lookup"><span data-stu-id="e36a3-193">To debug a custom object's run-time methods by attaching to SQL Server Data Tools</span></span>

1.  <span data-ttu-id="e36a3-194">Depois de concluir as etapas listadas no procedimento anterior, force uma pausa na execução do seu pacote para que você possa anexar ao **DtsDebugHost.exe**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-194">After you have completed the steps listed in the previous procedure, force a pause in the execution of your package so that you can attach to **DtsDebugHost.exe**.</span></span> <span data-ttu-id="e36a3-195">Você pode forçar essa pausa adicionando um ponto de interrupção ao evento `OnPreExecute`, ou adicionando uma tarefa Script ao seu projeto e inserindo um script que exiba uma caixa de mensagem modal.</span><span class="sxs-lookup"><span data-stu-id="e36a3-195">You can force this pause by adding a breakpoint to the `OnPreExecute` event, or by adding a Script task to your project and entering script that displays a modal message box.</span></span>

2.  <span data-ttu-id="e36a3-196">Execute o pacote.</span><span class="sxs-lookup"><span data-stu-id="e36a3-196">Run the package.</span></span> <span data-ttu-id="e36a3-197">Quando a pausa ocorrer, mude para a instância de [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] em que seu projeto de código está aberto e selecione **Anexar ao Processo** do menu **Depurar**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-197">When the pause occurs, switch to the instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] in which your code project is open, and select **Attach to Process** from the **Debug** menu.</span></span> <span data-ttu-id="e36a3-198">Certifique-se de anexar à instância de **DtsDebugHost.exe** listada como **Gerenciada, x86** na coluna **Tipo**, mas não à instância listada apenas como **x86**.</span><span class="sxs-lookup"><span data-stu-id="e36a3-198">Make sure to attach to the instance of **DtsDebugHost.exe** listed as **Managed, x86** in the **Type** column, not to the instance listed as **x86** only.</span></span>

3.  <span data-ttu-id="e36a3-199">Retorne ao pacote em pausa e continue até o ponto de interrupção ou clique em **OK** para ignorar a caixa de mensagem gerada pela tarefa Script e continue a execução e a depuração do pacote.</span><span class="sxs-lookup"><span data-stu-id="e36a3-199">Return to the paused package and continue past the breakpoint, or click **OK** to dismiss the message box raised by the Script task, and continue package execution and debugging.</span></span>

<span data-ttu-id="e36a3-200">![Ícone de Integration Services (pequeno)](../media/dts-16.gif "Ícone do Integration Services (pequeno)")  **Mantenha-se atualizado com Integration Services**</span><span class="sxs-lookup"><span data-stu-id="e36a3-200">![Integration Services icon (small)](../media/dts-16.gif "Integration Services icon (small)")  **Stay Up to Date with Integration Services**</span></span><br /> <span data-ttu-id="e36a3-201">Para obter os downloads, artigos, exemplos e vídeos mais recentes da Microsoft, assim como soluções selecionadas pela comunidade, visite a página do [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] no MSDN:</span><span class="sxs-lookup"><span data-stu-id="e36a3-201">For the latest downloads, articles, samples, and videos from Microsoft, as well as selected solutions from the community, visit the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] page on MSDN:</span></span><br /><br /> [<span data-ttu-id="e36a3-202">Visite a página do Integration Services no MSDN</span><span class="sxs-lookup"><span data-stu-id="e36a3-202">Visit the Integration Services page on MSDN</span></span>](https://go.microsoft.com/fwlink/?LinkId=136655)<br /><br /> <span data-ttu-id="e36a3-203">Para receber uma notificação automática dessas atualizações, assine os RSS feeds disponíveis na página.</span><span class="sxs-lookup"><span data-stu-id="e36a3-203">For automatic notification of these updates, subscribe to the RSS feeds available on the page.</span></span>

## <a name="see-also"></a><span data-ttu-id="e36a3-204">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="e36a3-204">See Also</span></span>
 <span data-ttu-id="e36a3-205">[Desenvolvendo objetos personalizados para Integration Services](developing-custom-objects-for-integration-services.md) [persistência](persisting-custom-objects.md) de [ferramentas de solução de problemas de objetos personalizados para desenvolvimento de pacotes](../troubleshooting/troubleshooting-tools-for-package-development.md)</span><span class="sxs-lookup"><span data-stu-id="e36a3-205">[Developing Custom Objects for Integration Services](developing-custom-objects-for-integration-services.md) [Persisting Custom Objects](persisting-custom-objects.md) [Troubleshooting Tools for Package Development](../troubleshooting/troubleshooting-tools-for-package-development.md)</span></span>


