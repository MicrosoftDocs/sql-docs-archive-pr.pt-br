---
title: Tarefa Transferir Banco de Dados | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.dts.designer.transferdatabasetask.f1
helpviewer_keywords:
- Transfer Database task [Integration Services]
ms.assetid: b9a2e460-cdbc-458f-8df8-06b8b2de3d67
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 85123eaff3e274bb4a96908ea99aef02c328ba23
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87568724"
---
# <a name="transfer-database-task"></a><span data-ttu-id="f227a-102">Tarefa Transferir Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="f227a-102">Transfer Database Task</span></span>
  <span data-ttu-id="f227a-103">A tarefa Transferir Banco de Dados transfere um banco de dados do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] entre duas instâncias do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f227a-103">The Transfer Database task transfers a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database between two instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f227a-104">Ao contrário das outras tarefas que transferem apenas objetos do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] por meio de cópia, a tarefa Transferir Banco de Dados pode copiar ou mover um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-104">In contrast to the other tasks that only transfer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] objects by copying them, the Transfer Database task can either copy or move a database.</span></span> <span data-ttu-id="f227a-105">Essa tarefa também pode ser usada para copiar um banco de dados dentro do mesmo servidor.</span><span class="sxs-lookup"><span data-stu-id="f227a-105">This task can also be used to copy a database within the same server.</span></span>  
  
## <a name="offline-and-online-modes"></a><span data-ttu-id="f227a-106">Modos offline e online</span><span class="sxs-lookup"><span data-stu-id="f227a-106">Offline and Online Modes</span></span>  
 <span data-ttu-id="f227a-107">O banco de dados pode ser transferido usando o modo online ou offline.</span><span class="sxs-lookup"><span data-stu-id="f227a-107">The database can be transferred by using online or offline mode.</span></span> <span data-ttu-id="f227a-108">Quando você usa o modo online, o banco de dados permanece anexado e é transferido por meio do SQL Management Object (SMO) para copiar os objetos do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-108">When you use online mode, the database remains attached and it is transferred by using SQL Management Object (SMO) to copy the database objects.</span></span> <span data-ttu-id="f227a-109">Quando você usa o modo offline, o banco de dados é desanexado, os arquivos do banco de dados são copiados ou movidos e o banco de dados é anexado ao destino após a conclusão bem-sucedida da transferência.</span><span class="sxs-lookup"><span data-stu-id="f227a-109">When you use offline mode, the database is detached, the database files are copied or moved, and the database is attached at the destination after the transfer finishes successfully.</span></span> <span data-ttu-id="f227a-110">Se o banco de dados for copiado, ele será novamente anexado de forma automática à fonte, se a cópia for bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="f227a-110">If the database is copied, it is automatically reattached at the source if the copy is successful.</span></span> <span data-ttu-id="f227a-111">No modo offline, o banco de dados é copiado mais rapidamente, mas o banco de dados fica indisponível aos usuários durante a transferência.</span><span class="sxs-lookup"><span data-stu-id="f227a-111">In offline mode, the database is copied more quickly, but the database is unavailable to users during the transfer.</span></span>  
  
 <span data-ttu-id="f227a-112">O modo offline requer que você especifique os compartilhamentos de arquivos de rede nos servidores de origem e de destino que contêm os arquivos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-112">Offline mode requires that you specify the network file shares on the source and destination servers that contain the database files.</span></span> <span data-ttu-id="f227a-113">Se a pasta for compartilhada e acessada pelo usuário, você poderá fazer referência ao compartilhamento de rede usando a sintaxe \\\nome_do_computador\Arquivos de Programas\minha_pasta\\.</span><span class="sxs-lookup"><span data-stu-id="f227a-113">If the folder is shared and can be accessed by the user, you can reference the network share using the syntax \\\computername\Program Files\myfolder\\.</span></span> <span data-ttu-id="f227a-114">Caso contrário, você deverá usar a sintaxe \\\nome_do_computador\c$\Arquivos de Programas\minha_pasta\\.</span><span class="sxs-lookup"><span data-stu-id="f227a-114">Otherwise, you must use the syntax \\\computername\c$\Program Files\myfolder\\.</span></span> <span data-ttu-id="f227a-115">Para usar a última sintaxe, o usuário deve ter acesso à gravação para os compartilhamentos de rede de origem e destino.</span><span class="sxs-lookup"><span data-stu-id="f227a-115">To use the latter syntax, the user must have write access to the source and destination network shares.</span></span>  
  
## <a name="transfer-of-databases-between-versions-of-sql-server"></a><span data-ttu-id="f227a-116">Transferência de banco de dados entre versões do SQL Server</span><span class="sxs-lookup"><span data-stu-id="f227a-116">Transfer of Databases Between Versions of SQL Server</span></span>  
 <span data-ttu-id="f227a-117">A tarefa Transferir Banco de Dados pode transferir um banco de dados entre instâncias de versões diferentes do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f227a-117">The Transfer Database task can transfer a database between instances of different [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] versions.</span></span>  
  
## <a name="events"></a><span data-ttu-id="f227a-118">Eventos</span><span class="sxs-lookup"><span data-stu-id="f227a-118">Events</span></span>  
 <span data-ttu-id="f227a-119">A tarefa Transferir Banco de Dados não informa o progresso incremental da transferência de mensagem de erro; informa somente conclusão 0% e 100 %.</span><span class="sxs-lookup"><span data-stu-id="f227a-119">The Transfer Database task does not report incremental progress of the error message transfer; it reports only 0% and 100 % completion.</span></span>  
  
## <a name="execution-value"></a><span data-ttu-id="f227a-120">Valor de execução</span><span class="sxs-lookup"><span data-stu-id="f227a-120">Execution Value</span></span>  
 <span data-ttu-id="f227a-121">O valor da execução, definido na propriedade `ExecutionValue` da tarefa, retorna o valor 1, porque em contraste com outras tarefas de transferência, a tarefa Transferir Banco de Dados pode transferir somente um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-121">The execution value, defined in the `ExecutionValue` property of the task, returns the value 1, because in contrast to other transfer tasks, the Transfer Database task can transfer only one database.</span></span>  
  
 <span data-ttu-id="f227a-122">Ao atribuir uma variável definida pelo usuário à propriedade `ExecValueVariable` da tarefa Transferir Banco de Dados, as informações sobre a transferência de mensagem de erro podem se tornar disponíveis a outros objetos no pacote.</span><span class="sxs-lookup"><span data-stu-id="f227a-122">By assigning a user-defined variable to the `ExecValueVariable` property of the Transfer Database task, information about the error message transfer can be made available to other objects in the package.</span></span> <span data-ttu-id="f227a-123">Para obter mais informações, consulte [Variáveis do Integration Services &#40;SSIS&#41;](../integration-services-ssis-variables.md) e [Usar variáveis em pacotes](../use-variables-in-packages.md).</span><span class="sxs-lookup"><span data-stu-id="f227a-123">For more information, see [Integration Services &#40;SSIS&#41; Variables](../integration-services-ssis-variables.md) and [Use Variables in Packages](../use-variables-in-packages.md).</span></span>  
  
## <a name="log-entries"></a><span data-ttu-id="f227a-124">Entradas de log</span><span class="sxs-lookup"><span data-stu-id="f227a-124">Log Entries</span></span>  
 <span data-ttu-id="f227a-125">A tarefa Transferir Banco de Dados inclui as seguintes entradas de log personalizadas:</span><span class="sxs-lookup"><span data-stu-id="f227a-125">The Transfer Database task includes the following custom log entries:</span></span>  
  
-   <span data-ttu-id="f227a-126">SourceSQLServer    Esta entrada de log lista o nome do servidor de origem.</span><span class="sxs-lookup"><span data-stu-id="f227a-126">SourceSQLServer    This log entry lists the name of the source server.</span></span>  
  
-   <span data-ttu-id="f227a-127">DestSQLServer    Esta entrada de log lista o nome do servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="f227a-127">DestSQLServer    This log entry lists the name of the destination server.</span></span>  
  
-   <span data-ttu-id="f227a-128">SourceDB    Esta entrada de log lista o nome do banco de dados que é transferido.</span><span class="sxs-lookup"><span data-stu-id="f227a-128">SourceDB    This log entry lists the name of the database that is transferred.</span></span>  
  
 <span data-ttu-id="f227a-129">Além disso, uma entrada de log para o evento `OnInformation` é gravada quando o banco de dados de destino é substituído.</span><span class="sxs-lookup"><span data-stu-id="f227a-129">In addition, a log entry for the `OnInformation` event is written when the destination database is overwritten.</span></span>  
  
## <a name="security-and-permissions"></a><span data-ttu-id="f227a-130">Segurança e permissões</span><span class="sxs-lookup"><span data-stu-id="f227a-130">Security and Permissions</span></span>  
 <span data-ttu-id="f227a-131">Para transferir um banco de dados usando o  modo offline, o usuário que executa o pacote deve ser um membro da função servidor sysadmin.</span><span class="sxs-lookup"><span data-stu-id="f227a-131">To transfer a database using offline mode, the user who runs the package must be a member of the sysadmin server role.</span></span>  
  
 <span data-ttu-id="f227a-132">Para transferir um banco de dados usando o modo online, o usuário que executa o pacote deve ser um membro da função servidor sysadmin ou proprietário do banco de dados (dbo) do banco de dados selecionado.</span><span class="sxs-lookup"><span data-stu-id="f227a-132">To transfer a database using online mode, the user who runs the package must be a member of the sysadmin server role or the database owner (dbo) of the selected database.</span></span>  
  
## <a name="configuration-of-the-transfer-database-task"></a><span data-ttu-id="f227a-133">Configuração da tarefa Transferir Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="f227a-133">Configuration of the Transfer Database Task</span></span>  
 <span data-ttu-id="f227a-134">Você pode especificar se a tarefa tentará se anexar novamente ao banco de dados de origem, se a transferência do banco de dados falhar.</span><span class="sxs-lookup"><span data-stu-id="f227a-134">You can specify whether the task tries to reattach the source database if the database transfer fails.</span></span>  
  
 <span data-ttu-id="f227a-135">A tarefa Transferir Banco de Dados também pode ser configurada para permitir a sobregravação de um banco de dados de destino que tenha o mesmo nome, substituindo o banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="f227a-135">The Transfer Database task can also be configured to permit overwriting a destination database that has the same name, replacing the destination database.</span></span>  
  
 <span data-ttu-id="f227a-136">O banco de dados de origem também pode ser renomeado como parte do processo de transferência.</span><span class="sxs-lookup"><span data-stu-id="f227a-136">The source database can also be renamed as part of the transfer process.</span></span> <span data-ttu-id="f227a-137">Se desejar transferir um banco de dados para uma instância de destino do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que já contenha um banco de dados com o mesmo nome, a renomeação do banco de dados de origem permitirá a transferência do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-137">If you want to transfer a database to a destination instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that already contains a database that has the same name, renaming the source database allows the database to be transferred.</span></span> <span data-ttu-id="f227a-138">Entretanto, os nomes dos arquivos do banco de dados também devem ser diferentes; se já existirem arquivos com os mesmos nomes no destino, a tarefa falhará.</span><span class="sxs-lookup"><span data-stu-id="f227a-138">However, the database file names must also be different; if database files that have the same names already exist at the destination, the task fails.</span></span>  
  
 <span data-ttu-id="f227a-139">Quando copiar um banco de dados, ele não poderá ser menor que o banco de dados **modelo** do servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="f227a-139">When you copy a database, the database cannot be smaller than the size of the **model** database on the destination server.</span></span> <span data-ttu-id="f227a-140">Você pode aumentar o tamanho do banco de dados para fazer a cópia ou reduzir o tamanho do **modelo**.</span><span class="sxs-lookup"><span data-stu-id="f227a-140">You can either increase the size of the database to copy, or reduce the size of **model**.</span></span>  
  
 <span data-ttu-id="f227a-141">No tempo de execução, a tarefa Transferir Banco de Dados conecta-se aos servidores de origem e de destino usando um ou dois gerenciadores de conexões SMO.</span><span class="sxs-lookup"><span data-stu-id="f227a-141">At run time, the Transfer Database task connects to the source and destination servers by using one or two SMO connection managers.</span></span> <span data-ttu-id="f227a-142">Quando você cria uma cópia de um banco de dados no mesmo servidor, somente um gerenciador de conexões SMO é exigido.</span><span class="sxs-lookup"><span data-stu-id="f227a-142">When you create a copy of a database on the same server, only one SMO connection manager is required.</span></span> <span data-ttu-id="f227a-143">Os gerenciadores de conexões SMO são configurados separadamente da tarefa Transferir Banco de Dados e, em seguida,  referenciadas na tarefa Transferir Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="f227a-143">The SMO connection managers are configured separately from the Transfer Database task, and then are referenced in the Transfer Database task.</span></span> <span data-ttu-id="f227a-144">Os gerenciadores de conexões SMO especificam o servidor e o modo de autenticação a serem usados quando a tarefa acessar o servidor.</span><span class="sxs-lookup"><span data-stu-id="f227a-144">The SMO connection managers specify the server and the authentication mode to use when the task accesses the server.</span></span> <span data-ttu-id="f227a-145">Para obter mais informações, consulte [SMO Connection Manager](../connection-manager/smo-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="f227a-145">For more information, see [SMO Connection Manager](../connection-manager/smo-connection-manager.md).</span></span>  
  
 <span data-ttu-id="f227a-146">Você pode definir propriedades pelo Designer do [!INCLUDE[ssIS](../../includes/ssis-md.md)] ou programaticamente.</span><span class="sxs-lookup"><span data-stu-id="f227a-146">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="f227a-147">Para obter mais informações sobre as propriedades que podem ser definidas no [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, clique em um dos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="f227a-147">For more information about the properties that you can set in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, click one of the following topics:</span></span>  
  
-   [<span data-ttu-id="f227a-148">Editor da Tarefa Transferir Banco de Dados &#40;Página Geral&#41;</span><span class="sxs-lookup"><span data-stu-id="f227a-148">Transfer Database Task Editor &#40;General Page&#41;</span></span>](../general-page-of-integration-services-designers-options.md)  
  
-   [<span data-ttu-id="f227a-149">Editor da Tarefa Transferir Banco de Dados &#40;Página Bancos de Dados&#41;</span><span class="sxs-lookup"><span data-stu-id="f227a-149">Transfer Database Task Editor &#40;Databases Page&#41;</span></span>](../transfer-database-task-editor-databases-page.md)  
  
-   [<span data-ttu-id="f227a-150">Página Expressões</span><span class="sxs-lookup"><span data-stu-id="f227a-150">Expressions Page</span></span>](../expressions/expressions-page.md)  
  
 <span data-ttu-id="f227a-151">Para obter mais informações sobre como definir essas propriedades no [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, clique no tópico a seguir:</span><span class="sxs-lookup"><span data-stu-id="f227a-151">For more information about how to set these properties in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, click the following topic:</span></span>  
  
-   [<span data-ttu-id="f227a-152">Definir as propriedades de uma tarefa ou contêiner</span><span class="sxs-lookup"><span data-stu-id="f227a-152">Set the Properties of a Task or Container</span></span>](../set-the-properties-of-a-task-or-container.md)  
  
## <a name="programmatic-configuration-of-the-transfer-database-task"></a><span data-ttu-id="f227a-153">Configuração programática da tarefa Transferir Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="f227a-153">Programmatic Configuration of the Transfer Database Task</span></span>  
 <span data-ttu-id="f227a-154">Para obter mais informações sobre como definir essas propriedades programaticamente, clique no tópico a seguir:</span><span class="sxs-lookup"><span data-stu-id="f227a-154">For more information about programmatically setting these properties, click the following topic:</span></span>  
  
-   <xref:Microsoft.SqlServer.Dts.Tasks.TransferDatabaseTask.TransferDatabaseTask>  
  
  
