---
title: Editor da tarefa controle de CDC | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.ssis.designer.cdccontroltask.config.f1
ms.assetid: 4f09d040-9ec8-4aaa-b684-f632d571f0a8
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 6b60f2a9126dbbda934124b39f36ccd90b4e6cc6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87582578"
---
# <a name="cdc-control-task-editor"></a><span data-ttu-id="fb372-102">CDC Control Task Editor</span><span class="sxs-lookup"><span data-stu-id="fb372-102">CDC Control Task Editor</span></span>
  <span data-ttu-id="fb372-103">Use a caixa de diálogo **Editor da tarefa Controle CDC** para configurar a tarefa Controle CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-103">Use the **CDC Control Task Editor** dialog box to configure the CDC Control task.</span></span> <span data-ttu-id="fb372-104">A configuração da tarefa Controle CDC inclui definir uma conexão para o banco de dados CDC, a operação de tarefa CDC e as informações de gerenciamento de estado.</span><span class="sxs-lookup"><span data-stu-id="fb372-104">The CDC Control task configuration includes defining a connection to the CDC database, the CDC task operation and the state management information.</span></span>  
  
 <span data-ttu-id="fb372-105">Para obter mais informações sobre a tarefa Controle CDC, consulte [CDC Control Task](control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="fb372-105">To learn more about the CDC Control task, see [CDC Control Task](control-flow/cdc-control-task.md).</span></span>  
  
 <span data-ttu-id="fb372-106">**Para abrir o Editor da tarefa Controle CDC**</span><span class="sxs-lookup"><span data-stu-id="fb372-106">**To open the CDC Control Task Editor**</span></span>  
  
1.  <span data-ttu-id="fb372-107">No [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], abra o pacote do [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] que contém a tarefa Controle CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-107">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], open the [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] package that has the CDC Control task.</span></span>  
  
2.  <span data-ttu-id="fb372-108">Na guia **Fluxo de Controle** , clique duas vezes na tarefa Controle CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-108">On the **Control Flow** tab, double-click the CDC Control task.</span></span>  
  
## <a name="options"></a><span data-ttu-id="fb372-109">Opções</span><span class="sxs-lookup"><span data-stu-id="fb372-109">Options</span></span>  
 <span data-ttu-id="fb372-110">**Gerenciador de conexões ADO.NET do banco de dados SQL Server CDC**</span><span class="sxs-lookup"><span data-stu-id="fb372-110">**SQL Server CDC database ADO.NET connection manager**</span></span>  
 <span data-ttu-id="fb372-111">Selecione na lista um gerenciador de conexões existente ou clique em **Novo** para criar uma nova conexão.</span><span class="sxs-lookup"><span data-stu-id="fb372-111">Select an existing connection manager from the list, or click **New** to create a new connection.</span></span> <span data-ttu-id="fb372-112">A conexão deve ser a um banco de dados do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] que está habilitado para CDC e onde a tabela de alteração selecionada está localizada.</span><span class="sxs-lookup"><span data-stu-id="fb372-112">The connection must be to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that is enabled for CDC and where the selected change table is located.</span></span>  
  
 <span data-ttu-id="fb372-113">**Operação de Controle CDC**</span><span class="sxs-lookup"><span data-stu-id="fb372-113">**CDC Control Operation**</span></span>  
 <span data-ttu-id="fb372-114">Selecione a operação a ser executada para esta tarefa.</span><span class="sxs-lookup"><span data-stu-id="fb372-114">Select the operation to run for this task.</span></span> <span data-ttu-id="fb372-115">Todas as operações usam a variável de estado que está armazenada em uma variável de pacote SSIS que armazena o estado e passa isto entre os diferentes componentes no pacote.</span><span class="sxs-lookup"><span data-stu-id="fb372-115">All operations use the state variable that is stored in an SSIS package variable that stores the state and passes it between the different components in the package.</span></span>  
  
-   <span data-ttu-id="fb372-116">**Marcar início da carga inicial**: esta operação é usada ao executar uma carga inicial de um banco de dados ativo sem um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="fb372-116">**Mark initial load start**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="fb372-117">Ela é invocada no começo de um pacote da carga inicial para registrar o LSN atual no banco de dados de origem antes de o pacote da carga inicial começar a ler as tabelas de origem.</span><span class="sxs-lookup"><span data-stu-id="fb372-117">It is invoked at the beginning of an initial-load package to record the current LSN in the source database before the initial-load package starts reading the source tables.</span></span> <span data-ttu-id="fb372-118">Isto exige uma conexão com o banco de dados de origem.</span><span class="sxs-lookup"><span data-stu-id="fb372-118">This requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="fb372-119">Se você selecionar **Marcar início da carga inicial** ao trabalhar no [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (ou seja, não Oracle), o usuário especificado no gerenciador de conexões deverá ser  **db_owner** ou **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="fb372-119">If you select **Mark Initial Load Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="fb372-120">**Marcar fim da carga inicial**: esta operação é usada ao executar uma carga inicial de um banco de dados ativo sem um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="fb372-120">**Mark initial load end**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="fb372-121">Ela é invocada no início de um pacote da carga inicial para registrar o LSN atual no banco de dados de origem depois de o pacote da carga inicial terminar de ler as tabelas de origem.</span><span class="sxs-lookup"><span data-stu-id="fb372-121">It is invoked at the end of an initial-load package to record the current LSN in the source database after the initial-load package finished reading the source tables.</span></span> <span data-ttu-id="fb372-122">Este LSN é determinado pela gravação da hora atual quando esta operação ocorreu e, em seguida, consultando a tabela de mapeamento `cdc.lsn_time_`no banco de dados CDC, procurando uma alteração que ocorreu depois daquele momento</span><span class="sxs-lookup"><span data-stu-id="fb372-122">This LSN is determined by recording nthe current time when this operation occurred and then querying the `cdc.lsn_time_`mapping table in the CDC database looking for a change that occurred after that time</span></span>  
  
     <span data-ttu-id="fb372-123">Se você selecionar **Marcar fim da carga inicial** ao trabalhar no [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (ou seja, não Oracle), o usuário especificado no gerenciador de conexões deverá ser  **db_owner** ou **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="fb372-123">If you select **Mark Initial Load End** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="fb372-124">**Marcar início do CDC**: esta operação é usada quando a carga inicial é feita de um banco de dados de instantâneo ou de um banco de dados fechado para novas sessões.</span><span class="sxs-lookup"><span data-stu-id="fb372-124">**Mark CDC start**: This operation is used when then the initial load is made from a snapshot database or from a quiescence database.</span></span> <span data-ttu-id="fb372-125">Ele é invocado em qualquer ponto dentro do pacote de carga inicial.</span><span class="sxs-lookup"><span data-stu-id="fb372-125">It is invoked at any point within the initial load package.</span></span> <span data-ttu-id="fb372-126">A operação aceita um parâmetro que pode ser um LSN instantâneo, um nome de um banco de dados de instantâneo (do qual o LSN instantâneo será derivado automaticamente) ou pode ser deixado vazio e, nesse caso, o LSN do banco de dados atual será usado como o LSN inicial para o pacote de processamento de alteração.</span><span class="sxs-lookup"><span data-stu-id="fb372-126">The operation accepts a parameter that can be a snapshot LSN, a name of a snapshot database (from which the snapshot LSN will be derived automatically) or it can be left empty, in which case the current database LSN is used as the start LSN for the change processing package.</span></span>  
  
     <span data-ttu-id="fb372-127">Esta operação é usada em vez das operações Marcar início/fim da carga inicial.</span><span class="sxs-lookup"><span data-stu-id="fb372-127">This operation is used instead of the Mark Initial Load Start/End operations.</span></span>  
  
     <span data-ttu-id="fb372-128">Se você selecionar **Marcar início de CDC** ao trabalhar no [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (ou seja, não Oracle), o usuário especificado no gerenciador de conexões deverá ser  **db_owner** ou **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="fb372-128">If you select **Mark CDC Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="fb372-129">**Obter intervalo de processamento**: esta operação é usada em um pacote de processamento de alteração antes de invocar o fluxo de dados que usa o fluxo de dados de Origem de CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-129">**Get processing range**: This operation is used in a change processing package before invoking the data flow that uses the CDC Source data flow.</span></span> <span data-ttu-id="fb372-130">Ele estabelece um intervalo de LSNs que o fluxo de dados de origem de CDC lê quando é invocado.</span><span class="sxs-lookup"><span data-stu-id="fb372-130">It establishes a range of LSNs that the CDC Source data flow reads when invoked.</span></span> <span data-ttu-id="fb372-131">O intervalo é armazenado em uma variável de pacote SSIS que é usada pela Origem de CDC durante o processamento de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="fb372-131">The range is stored in an SSIS package variable that is used by the CDC Source during data-flow processing.</span></span>  
  
     <span data-ttu-id="fb372-132">Para obter mais informações sobre os possíveis estados de CDC que estão armazenados, consulte [Definir uma variável de estado](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="fb372-132">For more information about the possible CDC states that are stored, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
-   <span data-ttu-id="fb372-133">**Marcar o intervalo processado**: esta operação é usada em um pacote de processamento de alteração no fim de uma execução de CDC (depois que o fluxo de dados de CDC é concluído com êxito) para registrar o último LSN que foi processado completamente na execução de CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-133">**Mark processed range**: This operation is used in a change processing package at the end of a  CDC run (after the CDC data flow is completed successfully) to record the last LSN that was fully processed in the CDC run.</span></span> <span data-ttu-id="fb372-134">Da próxima vez que o `GetProcessingRange` é executado, esta posição determina o início do próximo intervalo de processamento.</span><span class="sxs-lookup"><span data-stu-id="fb372-134">The next time `GetProcessingRange` is executed, this position determines the start of the next processing range.</span></span>  
  
-   <span data-ttu-id="fb372-135">**Reiniciar estado de CDC**: esta operação é usada para reiniciar o estado de CDC persistente associado ao contexto de CDC atual.</span><span class="sxs-lookup"><span data-stu-id="fb372-135">**Reset CDC state**: This operation is used to reset the persistent CDC state associated with the current CDC context.</span></span> <span data-ttu-id="fb372-136">Depois que esta operação é executada, o LSN máximo atual da tabela `sys.fn_cdc_get_max_lsn` do carimbo de data/hora de LSN torna-se o início do intervalo para o próximo intervalo de processamento.</span><span class="sxs-lookup"><span data-stu-id="fb372-136">After this operation is run, the current maximum LSN from the LSN-timestamp `sys.fn_cdc_get_max_lsn` table becomes the start of the range for the next processing range.</span></span> <span data-ttu-id="fb372-137">Esta operação exige uma conexão com o banco de dados de origem.</span><span class="sxs-lookup"><span data-stu-id="fb372-137">This operation requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="fb372-138">Um exemplo de quando esta operação é usada é quando você deseja processar somente os registros de alteração recém-criados e ignorar todos os registros de alteração antigos.</span><span class="sxs-lookup"><span data-stu-id="fb372-138">An example of when this operation is used is when you want to process only the newly created change records and ignore all old change records.</span></span>  
  
 <span data-ttu-id="fb372-139">**Variável contendo o estado de CDC**</span><span class="sxs-lookup"><span data-stu-id="fb372-139">**Variable containing the CDC state**</span></span>  
 <span data-ttu-id="fb372-140">Selecione a variável de pacote SSIS que armazena as informações do estado para a operação de tarefa.</span><span class="sxs-lookup"><span data-stu-id="fb372-140">Select the SSIS package variable that stores the state information for the task operation.</span></span> <span data-ttu-id="fb372-141">Você deve definir uma variável antes de começar.</span><span class="sxs-lookup"><span data-stu-id="fb372-141">You should define a variable before you begin.</span></span> <span data-ttu-id="fb372-142">Se você selecionar **Persistência de estado automática**, a variável de estado será carregada e salva automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fb372-142">If you select **Automatic state persistence**, the state variable is loaded and saved automatically.</span></span>  
  
 <span data-ttu-id="fb372-143">Para obter mais informações sobre como definir a variável de estado, consulte [Definir uma variável de estado](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="fb372-143">For more information about defining the state variable, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
 <span data-ttu-id="fb372-144">**LSN do SQL Server para começar o nome do CDC/instantâneo:**</span><span class="sxs-lookup"><span data-stu-id="fb372-144">**SQL Server LSN to start the CDC/Snapshot name:**</span></span>  
 <span data-ttu-id="fb372-145">Digite o LSN de banco de dados de origem atual ou o nome do banco de dados de instantâneo do qual a carga inicial é realizada para determinar onde o CDC inicia.</span><span class="sxs-lookup"><span data-stu-id="fb372-145">Type the current source database LSN or the name of the snapshot database from which the initial load is performed to determine where the CDC starts.</span></span> <span data-ttu-id="fb372-146">Isto só está disponível se o **Operação de Controle CDC** é definido como **Marcar início do CDC**.</span><span class="sxs-lookup"><span data-stu-id="fb372-146">This is available only if the **CDC Control Operation** is set to **Mark CDC Start**.</span></span>  
  
 <span data-ttu-id="fb372-147">Para obter mais informações sobre essas operações, consulte [CDC Control Task](control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="fb372-147">For more information about these operations, see [CDC Control Task](control-flow/cdc-control-task.md)</span></span>  
  
 <span data-ttu-id="fb372-148">**Armazene o estado automaticamente em uma tabela de banco de dados**</span><span class="sxs-lookup"><span data-stu-id="fb372-148">**Automatically store state in a database table**</span></span>  
 <span data-ttu-id="fb372-149">Marque esta caixa de seleção para a tarefa de Controle CDC para tratar o carregamento automaticamente e armazenar o estado de CDC em uma tabela de estado contida no banco de dados especificado.</span><span class="sxs-lookup"><span data-stu-id="fb372-149">Select this check box for the CDC Control task to automatically handle loading and storing the CDC state in a state table contained in the specified database.</span></span> <span data-ttu-id="fb372-150">Quando não estiver selecionado, o desenvolvedor deverá carregar o Estado de CDC quando o pacote iniciar e salvá-lo sempre que o Estado de CDC for alterado.</span><span class="sxs-lookup"><span data-stu-id="fb372-150">When not selected, the developer must load the CDC State when the package starts and save it whenever the CDC State changes.</span></span>  
  
 <span data-ttu-id="fb372-151">**Gerenciador de conexões para o banco de dados onde o estado está armazenado**</span><span class="sxs-lookup"><span data-stu-id="fb372-151">**Connection manager for the database where the state is stored**</span></span>  
 <span data-ttu-id="fb372-152">Selecione na lista um gerenciador de conexões ADO.NET existente ou clique em Novo para criar uma nova conexão.</span><span class="sxs-lookup"><span data-stu-id="fb372-152">Select an existing ADO.NET connection manager from the list, or click New to create a new connection.</span></span> <span data-ttu-id="fb372-153">Esta conexão é para um banco de dados do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] que contém a tabela de estado.</span><span class="sxs-lookup"><span data-stu-id="fb372-153">This connection is to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that contains the State table.</span></span> <span data-ttu-id="fb372-154">A tabela de Estado contém as informações do estado.</span><span class="sxs-lookup"><span data-stu-id="fb372-154">The State table contains the State information.</span></span>  
  
 <span data-ttu-id="fb372-155">Isto só estará disponível se **Persistência de estado automática** estiver selecionada e for um parâmetro necessário.</span><span class="sxs-lookup"><span data-stu-id="fb372-155">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="fb372-156">**Tabela para usar para armazenar estado**</span><span class="sxs-lookup"><span data-stu-id="fb372-156">**Table to use for storing state**</span></span>  
 <span data-ttu-id="fb372-157">Digite o nome da tabela de estado a ser usada para armazenar o estado CDC.</span><span class="sxs-lookup"><span data-stu-id="fb372-157">Type the name of the state table to be used for storing the CDC state.</span></span> <span data-ttu-id="fb372-158">A tabela especificada deve ter duas colunas chamadas **nome** e **estado** e ambas as colunas devem ser do tipo de dados **varchar (256)**.</span><span class="sxs-lookup"><span data-stu-id="fb372-158">The table specified must have two columns called **name** and **state** and both columns must be of the data type **varchar (256)**.</span></span>  
  
 <span data-ttu-id="fb372-159">Você pode opcionalmente selecionar **Novo** para obter um script SQL que cria uma nova tabela de estado com as colunas necessárias.</span><span class="sxs-lookup"><span data-stu-id="fb372-159">You can optionally select **New** to get an SQL script that builds a new State table with the required columns.</span></span> <span data-ttu-id="fb372-160">Quando **Persistência de estado automática** estiver selecionada, o desenvolvedor deverá criar uma tabela de estado de acordo com os requisitos listados acima.</span><span class="sxs-lookup"><span data-stu-id="fb372-160">When **Automatic state persistence** is selected, the developer must create a state table according to the requirements listed above.</span></span>  
  
 <span data-ttu-id="fb372-161">Isto só estará disponível se **Persistência de estado automática** estiver selecionada e for um parâmetro necessário.</span><span class="sxs-lookup"><span data-stu-id="fb372-161">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="fb372-162">**Nome do estado**</span><span class="sxs-lookup"><span data-stu-id="fb372-162">**State name**</span></span>  
 <span data-ttu-id="fb372-163">Digite um nome para associar com o estado de CDC persistente.</span><span class="sxs-lookup"><span data-stu-id="fb372-163">Type a name to associate with the persistent CDC state.</span></span> <span data-ttu-id="fb372-164">A carga cheia e os pacotes CDC que funcionam com o mesmo contexto de CDC especificará um nome de estado comum.</span><span class="sxs-lookup"><span data-stu-id="fb372-164">The full load and CDC packages that work with the same CDC context will specify a common state name.</span></span> <span data-ttu-id="fb372-165">Esse nome é usado para verificar a linha de estado na tabela de estado</span><span class="sxs-lookup"><span data-stu-id="fb372-165">This name is used for looking up the state row in the state table</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fb372-166">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="fb372-166">See Also</span></span>  
 [<span data-ttu-id="fb372-167">Propriedades personalizadas da tarefa Controle de CDC</span><span class="sxs-lookup"><span data-stu-id="fb372-167">CDC Control Task Custom Properties</span></span>](control-flow/cdc-control-task-custom-properties.md)  
  
  
