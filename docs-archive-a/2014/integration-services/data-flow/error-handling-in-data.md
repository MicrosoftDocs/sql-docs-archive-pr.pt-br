---
title: Tratamento de erro em dados | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- truncating data
- data conversion errors [Integration Services]
- errors [Integration Services], data flow components
- lookups [Integration Services]
- errors [Integration Services]
- errors [Integration Services], data flow outputs
- error outputs [Integration Services]
- data flow [Integration Services], errors
- expressions [Integration Services], errors
ms.assetid: c61667b4-25cb-4d45-a52f-a733e32863f4
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 442ecc68fc352d50955af9302fbcedf77ba36338
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685874"
---
# <a name="error-handling-in-data"></a><span data-ttu-id="812ba-102">Tratamento de erros em dados</span><span class="sxs-lookup"><span data-stu-id="812ba-102">Error Handling in Data</span></span>
  <span data-ttu-id="812ba-103">Quando um componente de fluxo de dados aplica uma transformação aos dados da coluna, extrai dados de fontes ou carrega dados nos destinos, podem ocorrer erros.</span><span class="sxs-lookup"><span data-stu-id="812ba-103">When a data flow component applies a transformation to column data, extracts data from sources, or loads data into destinations, errors can occur.</span></span> <span data-ttu-id="812ba-104">Frequentemente, os erros ocorrem por causa de valores de dados inesperados.</span><span class="sxs-lookup"><span data-stu-id="812ba-104">Errors frequently occur because of unexpected data values.</span></span> <span data-ttu-id="812ba-105">Por exemplo, uma conversão de dados falha porque uma coluna contém uma cadeia de caracteres em vez de um número, uma inserção em uma coluna de banco de dados falha porque os dados são uma data e a coluna tem um tipo de dados numéricos, ou uma expressão não é avaliada porque o valor de uma coluna é zero, resultando em uma operação matemática que não é válida.</span><span class="sxs-lookup"><span data-stu-id="812ba-105">For example, a data conversion fails because a column contains a string instead of a number, an insertion into a database column fails because the data is a date and the column has a numeric data type, or an expression fails to evaluate because a column value is zero, resulting in a mathematical operation that is not valid.</span></span>  
  
 <span data-ttu-id="812ba-106">Em geral, os erros se enquadram nas categorias a seguir:</span><span class="sxs-lookup"><span data-stu-id="812ba-106">Errors typically fall into one the following categories:</span></span>  
  
-   <span data-ttu-id="812ba-107">Erros de conversão de dados, que ocorrem se uma conversão resulta em perda de dígitos significativos, perda de dígitos insignificantes e truncamento de cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="812ba-107">Data conversion errors, which occur if a conversion results in loss of significant digits, the loss of insignificant digits, and the truncation of strings.</span></span> <span data-ttu-id="812ba-108">Os erros de conversão de dados também ocorrem se não houver suporte para a conversão solicitada.</span><span class="sxs-lookup"><span data-stu-id="812ba-108">Data conversion errors also occur if the requested conversion is not supported.</span></span>  
  
-   <span data-ttu-id="812ba-109">Erros de avaliação de expressão, que ocorrem se expressões avaliadas em tempo de execução realizarem operações inválidas ou se tornarem sintaticamente incorretas devido a valores de dados ausentes ou incorretos.</span><span class="sxs-lookup"><span data-stu-id="812ba-109">Expression evaluation errors, which occur if expressions that are evaluated at run time perform invalid operations or become syntactically incorrect because of missing or incorrect data values.</span></span>  
  
-   <span data-ttu-id="812ba-110">Erros de pesquisa, que ocorrem se uma operação de pesquisa não conseguir localizar uma tabela de pesquisa correspondente.</span><span class="sxs-lookup"><span data-stu-id="812ba-110">Lookup errors, which occur if a lookup operation fails to locate a match in the lookup table.</span></span>  
  
 <span data-ttu-id="812ba-111">Muitos componentes de fluxo de dados dão suporte a saídas de erro, que permitem controlar como o componente manipula erros no nível da linha, em dados de entrada e de saída.</span><span class="sxs-lookup"><span data-stu-id="812ba-111">Many data flow components support error outputs, which let you control how the component handles row-level errors in both incoming and outgoing data.</span></span> <span data-ttu-id="812ba-112">Para especificar como o componente se comporta quando ocorre um truncamento ou erro, defina as opções de colunas individuais na entrada ou saída.</span><span class="sxs-lookup"><span data-stu-id="812ba-112">You specify how the component behaves when truncation or an error occurs by setting options on individual columns in the input or output.</span></span> <span data-ttu-id="812ba-113">Por exemplo, você pode especificar que o componente deve falhar se os dados com o nome do cliente estão truncados, mas ignorar erros em outra coluna que contenha dados menos importantes.</span><span class="sxs-lookup"><span data-stu-id="812ba-113">For example, you can specify that the component should fail if customer name data is truncated, but ignore errors on another column that contains less important data.</span></span>  
  
 <span data-ttu-id="812ba-114">A saída de erro pode ser conectada à entrada de outra transformação ou carregada em um destino diferente do que a saída de não erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-114">The error output can be connected to the input of another transformation or loaded into a different destination than the non-error output.</span></span> <span data-ttu-id="812ba-115">Por exemplo, a saída de erro pode estar conectada a uma transformação Coluna Derivada que fornece uma cadeia de caracteres para uma coluna que esteja em branco.</span><span class="sxs-lookup"><span data-stu-id="812ba-115">For example, the error output can be a connected to a Derived Column transformation that provides a string for a column that is blank.</span></span>  
  
 <span data-ttu-id="812ba-116">O diagrama a seguir mostra um fluxo de dados simples incluindo uma saída de erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-116">The following diagram shows a simple data flow including an error output.</span></span>  
  
 <span data-ttu-id="812ba-117">![Fluxo de dados com saída de erro](../media/mw-dts-11.gif "Fluxo de dados com saída de erro")</span><span class="sxs-lookup"><span data-stu-id="812ba-117">![Data flow with error output](../media/mw-dts-11.gif "Data flow with error output")</span></span>  
  
 <span data-ttu-id="812ba-118">Além das colunas de dados, a saída de erro inclui as colunas **ErrorCode** e **ErrorColumn** .</span><span class="sxs-lookup"><span data-stu-id="812ba-118">In addition to the data columns, the error output includes the **ErrorCode** and **ErrorColumn** columns.</span></span> <span data-ttu-id="812ba-119">A coluna **ErrorCode** identifica o erro e a coluna **ErrorColumn** contém o identificador de linhagem da coluna de erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-119">The **ErrorCode** column identifies the error and the **ErrorColumn** contains the lineage identifier of the error column.</span></span> <span data-ttu-id="812ba-120">Para exibir os metadados dessas colunas, clique no caminho que conecta a saída de erro ao próximo componente no fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="812ba-120">To view the metadata of these columns, click the path that connects the error output to the next component in the data flow.</span></span> <span data-ttu-id="812ba-121">Em algumas circunstâncias, o valor da coluna **ErrorColumn** é definido como zero.</span><span class="sxs-lookup"><span data-stu-id="812ba-121">Under some circumstances, the value of the **ErrorColumn** column is set to zero.</span></span> <span data-ttu-id="812ba-122">Isto acontece quando a condição de erro afeta a linha inteira em vez de uma única coluna.</span><span class="sxs-lookup"><span data-stu-id="812ba-122">This occurs when the error condition affects the entire row instead of a single column.</span></span> <span data-ttu-id="812ba-123">Um exemplo é quando uma pesquisa falha na transformação Pesquisa.</span><span class="sxs-lookup"><span data-stu-id="812ba-123">An example is when a lookup fails in the Lookup transformation.</span></span>  
  
 <span data-ttu-id="812ba-124">Para obter mais informações, consulte [Fluxo de Dados](data-flow.md) e [Caminhos do Integration Services](integration-services-paths.md).</span><span class="sxs-lookup"><span data-stu-id="812ba-124">For more information, see [Data Flow](data-flow.md) and [Integration Services Paths](integration-services-paths.md).</span></span>  
  
 <span data-ttu-id="812ba-125">Para obter uma lista de erros, avisos e outras mensagens do Integration Services, consulte [Referência de mensagens e erros do Integration Services](../integration-services-error-and-message-reference.md).</span><span class="sxs-lookup"><span data-stu-id="812ba-125">For a list of Integration Services errors, warnings, and other messages, see [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md).</span></span>  
  
## <a name="error-and-truncation-options"></a><span data-ttu-id="812ba-126">Opções de erro e truncamento</span><span class="sxs-lookup"><span data-stu-id="812ba-126">Error and Truncation Options</span></span>  
 <span data-ttu-id="812ba-127">Os erros fazem parte de uma de duas categorias: erros ou truncamentos.</span><span class="sxs-lookup"><span data-stu-id="812ba-127">Errors fall into one of two categories: errors or truncations.</span></span> <span data-ttu-id="812ba-128">Um erro indica uma falha inequívoca e gera um resultado NULL.</span><span class="sxs-lookup"><span data-stu-id="812ba-128">An error indicates an unequivocal failure, and generates a NULL result.</span></span> <span data-ttu-id="812ba-129">Esses erros podem incluir erros de conversão de dados ou erros de avaliação de expressão.</span><span class="sxs-lookup"><span data-stu-id="812ba-129">Such errors can include data conversion errors or expression evaluation errors.</span></span> <span data-ttu-id="812ba-130">Por exemplo, uma tentativa de converter uma cadeia de caracteres que contém caracteres alfabéticos em um número causa um erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-130">For example, an attempt to convert a string that contains alphabetical characters to a number causes an error.</span></span> <span data-ttu-id="812ba-131">Conversões de dados, avaliações de expressão e atribuições de resultados de expressão para variáveis, propriedades e colunas de dados podem falhar por causa de lançamentos ilegais e tipos incompatíveis de dados.</span><span class="sxs-lookup"><span data-stu-id="812ba-131">Data conversions, expression evaluations, and assignments of expression results to variables, properties, and data columns may fail because of illegal casts and incompatible data types.</span></span> <span data-ttu-id="812ba-132">Para obter mais informações, consulte [Conversão &#40;Expressão SSIS&#41;](../expressions/cast-ssis-expression.md), [Tipos de dados do Integration Services em expressões](../expressions/integration-services-data-types-in-expressions.md) e [Tipos de dados do Integration Services](integration-services-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="812ba-132">For more information see, [Cast &#40;SSIS Expression&#41;](../expressions/cast-ssis-expression.md), [Integration Services Data Types in Expressions](../expressions/integration-services-data-types-in-expressions.md), and [Integration Services Data Types](integration-services-data-types.md).</span></span>  
  
 <span data-ttu-id="812ba-133">Um truncamento é menos grave que um erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-133">A truncation is less serious than an error.</span></span> <span data-ttu-id="812ba-134">Um truncamento gera resultados que podem ser utilizáveis ou até mesmo desejáveis.</span><span class="sxs-lookup"><span data-stu-id="812ba-134">A truncation generates results that might be usable or even desirable.</span></span> <span data-ttu-id="812ba-135">Você pode optar por tratar truncamentos como erros ou como condições aceitáveis.</span><span class="sxs-lookup"><span data-stu-id="812ba-135">You can elect to treat truncations as errors or as acceptable conditions.</span></span> <span data-ttu-id="812ba-136">Por exemplo, se você estiver inserindo uma cadeia de caracteres com 15 caracteres em uma coluna que só tem 1 caractere de comprimento, poderá optar por truncar a cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="812ba-136">For example, if you are inserting a 15-character string into a column that is only one character wide, you can elect to truncate the string.</span></span>  
  
 <span data-ttu-id="812ba-137">Você pode configurar como fontes, transformações e destinos manipulam erros e truncamentos.</span><span class="sxs-lookup"><span data-stu-id="812ba-137">You can configure how sources, transformations, and destinations handle errors and truncations.</span></span> <span data-ttu-id="812ba-138">A tabela a seguir descreve as opções.</span><span class="sxs-lookup"><span data-stu-id="812ba-138">The following table describes the options.</span></span>  
  
|<span data-ttu-id="812ba-139">Opção</span><span class="sxs-lookup"><span data-stu-id="812ba-139">Option</span></span>|<span data-ttu-id="812ba-140">Descrição</span><span class="sxs-lookup"><span data-stu-id="812ba-140">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="812ba-141">Falha no Componente</span><span class="sxs-lookup"><span data-stu-id="812ba-141">Fail Component</span></span>|<span data-ttu-id="812ba-142">A tarefa Fluxo de Dados falha quando ocorre um erro ou um truncamento.</span><span class="sxs-lookup"><span data-stu-id="812ba-142">The Data Flow task fails when an error or a truncation occurs.</span></span> <span data-ttu-id="812ba-143">Falha é a opção padrão para um erro e um truncamento.</span><span class="sxs-lookup"><span data-stu-id="812ba-143">Failure is the default option for an error and a truncation.</span></span>|  
|<span data-ttu-id="812ba-144">Ignorar Falha</span><span class="sxs-lookup"><span data-stu-id="812ba-144">Ignore Failure</span></span>|<span data-ttu-id="812ba-145">O erro ou truncamento é ignorado e a linha de dados é direcionada para a saída da transformação ou fonte.</span><span class="sxs-lookup"><span data-stu-id="812ba-145">The error or the truncation is ignored and the data row is directed to the output of the transformation or source.</span></span>|  
|<span data-ttu-id="812ba-146">Redirecionar Linha</span><span class="sxs-lookup"><span data-stu-id="812ba-146">Redirect Row</span></span>|<span data-ttu-id="812ba-147">O erro ou truncamento da linha de dados é direcionado para a saída de erro da fonte, transformação ou destino.</span><span class="sxs-lookup"><span data-stu-id="812ba-147">The error or the truncation data row is directed to the error output of the source, transformation, or destination.</span></span>|  
  
## <a name="adding-the-error-description"></a><span data-ttu-id="812ba-148">Adicionando a descrição do erro</span><span class="sxs-lookup"><span data-stu-id="812ba-148">Adding the Error Description</span></span>  
 <span data-ttu-id="812ba-149">Por padrão, uma saída de erro fornece o código de erro numérico e costuma conter o identificador da coluna na qual o erro ocorreu.</span><span class="sxs-lookup"><span data-stu-id="812ba-149">By default an error output provides the numeric error code and usually contains the identifier of the column in which the error occurred.</span></span> <span data-ttu-id="812ba-150">Você pode usar o componente Script para incluir a descrição do erro em uma coluna adicional, usando uma única linha de script para chamar o método <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.GetErrorDescription%2A> da interface <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100>.</span><span class="sxs-lookup"><span data-stu-id="812ba-150">You can use the Script component to include the error description in an additional column by using a single line of script to call the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.GetErrorDescription%2A> method of the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100> interface.</span></span>  
  
 <span data-ttu-id="812ba-151">O componente Script pode ser adicionado ao segmento de erro do fluxo de dados em qualquer downstream dos componentes de fluxo de dados cujos erros você quer capturar, mas geralmente é posicionado imediatamente antes de as linhas de erro serem gravadas em um destino.</span><span class="sxs-lookup"><span data-stu-id="812ba-151">The Script component can be added to the error segment of the data flow anywhere downstream from the data flow components whose errors that you want to capture, but is typically placed immediately before the error rows are written to a destination.</span></span> <span data-ttu-id="812ba-152">Deste modo, o script pesquisa só descrições para linhas de erro que estão gravadas.</span><span class="sxs-lookup"><span data-stu-id="812ba-152">This way, the script looks up only descriptions for error rows that are written.</span></span> <span data-ttu-id="812ba-153">Por exemplo, o segmento de erro do fluxo de dados pode corrigir alguns erros e não gravar essas linhas em um destino de erro.</span><span class="sxs-lookup"><span data-stu-id="812ba-153">For example, the error segment of the data flow may correct some errors and not write those rows to an error destination.</span></span> <span data-ttu-id="812ba-154">Para obter mais informações, consulte [aprimorando uma saída de erro com o componente Script](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span><span class="sxs-lookup"><span data-stu-id="812ba-154">For more information, see [Enhancing an Error Output with the Script Component](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span></span>  
  
### <a name="to-configure-an-error-output"></a><span data-ttu-id="812ba-155">Para configurar uma saída de erro</span><span class="sxs-lookup"><span data-stu-id="812ba-155">To configure an error output</span></span>  
  
-   [<span data-ttu-id="812ba-156">Configurar uma saída de erro em um componente de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="812ba-156">Configure an Error Output in a Data Flow Component</span></span>](../configure-an-error-output-in-a-data-flow-component.md)  
  
## <a name="see-also"></a><span data-ttu-id="812ba-157">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="812ba-157">See Also</span></span>  
 <span data-ttu-id="812ba-158">[Fluxo de Dados](data-flow.md) </span><span class="sxs-lookup"><span data-stu-id="812ba-158">[Data Flow](data-flow.md) </span></span>  
 <span data-ttu-id="812ba-159">[Transformar Dados com Transformações](transformations/transform-data-with-transformations.md) </span><span class="sxs-lookup"><span data-stu-id="812ba-159">[Transform Data with Transformations](transformations/transform-data-with-transformations.md) </span></span>  
 <span data-ttu-id="812ba-160">[Conectar componentes com caminhos](../connect-components-with-paths.md) </span><span class="sxs-lookup"><span data-stu-id="812ba-160">[Connect Components with Paths](../connect-components-with-paths.md) </span></span>  
 <span data-ttu-id="812ba-161">[Tarefa de Fluxo de Dados](../control-flow/data-flow-task.md) </span><span class="sxs-lookup"><span data-stu-id="812ba-161">[Data Flow Task](../control-flow/data-flow-task.md) </span></span>  
 [<span data-ttu-id="812ba-162">Fluxo de Dados</span><span class="sxs-lookup"><span data-stu-id="812ba-162">Data Flow</span></span>](data-flow.md)  
  
  
