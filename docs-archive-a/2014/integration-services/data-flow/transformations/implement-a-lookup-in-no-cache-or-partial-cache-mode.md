---
title: Implementar uma pesquisa no modo Sem cache ou Cache parcial | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Lookup transformation
- match exactly [Integration Services]
- lookups [Integration Services]
- exact matches [Integration Services]
ms.assetid: 01b7fbca-5181-4d47-9f75-7f25af6b40d2
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 5c3958450d6371299972a69f5312a3c631c853aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87582050"
---
# <a name="implement-a-lookup-in-no-cache-or-partial-cache-mode"></a><span data-ttu-id="baca1-102">Implementar uma pesquisa no modo Sem Cache ou Cache Parcial</span><span class="sxs-lookup"><span data-stu-id="baca1-102">Implement a Lookup in No Cache or Partial Cache Mode</span></span>
  <span data-ttu-id="baca1-103">Você pode configurar a transformação Pesquisa para usar o modo cache parcial ou sem-cache:</span><span class="sxs-lookup"><span data-stu-id="baca1-103">You can configure the Lookup transformation to use the partial cache or no cache mode:</span></span>  
  
-   <span data-ttu-id="baca1-104">Cache parcial</span><span class="sxs-lookup"><span data-stu-id="baca1-104">Partial cache</span></span>  
  
     <span data-ttu-id="baca1-105">As linhas com entradas correspondentes no conjunto de dados de referência e, opcionalmente, as linhas sem entradas correspondentes no conjunto de dados são armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="baca1-105">The rows with matching entries in the reference dataset and, optionally, the rows without matching entries in the dataset are stored in cache.</span></span> <span data-ttu-id="baca1-106">Quando o tamanho da memória do cache é excedido, a transformação Pesquisa remove automaticamente as linhas usadas com menos frequência do cache.</span><span class="sxs-lookup"><span data-stu-id="baca1-106">When the memory size of the cache is exceeded, the Lookup transformation automatically removes the least frequently used rows from the cache.</span></span>  
  
-   <span data-ttu-id="baca1-107">Não cache</span><span class="sxs-lookup"><span data-stu-id="baca1-107">No cache</span></span>  
  
     <span data-ttu-id="baca1-108">Nenhum dado é carregado no cache.</span><span class="sxs-lookup"><span data-stu-id="baca1-108">No data is loaded into cache.</span></span>  
  
 <span data-ttu-id="baca1-109">Se selecionar cache parcial ou não cache, você usará um gerenciador de conexões OLE DB para conectar-se ao conjunto de dados de referência.</span><span class="sxs-lookup"><span data-stu-id="baca1-109">Whether you select partial cache or no cache, you use an OLE DB connection manager to connect to the reference dataset.</span></span> <span data-ttu-id="baca1-110">O conjunto de dados de referência é gerado usando uma tabela, exibição ou consulta SQL durante a execução da transformação Pesquisa.</span><span class="sxs-lookup"><span data-stu-id="baca1-110">The reference dataset is generated by using a table, view, or SQL query during the execution of the Lookup transformation</span></span>  
  
### <a name="to-implement-a-lookup-transformation-in-no-cache-or-partial-cache-mode"></a><span data-ttu-id="baca1-111">Como implementar uma transformação Pesquisa no modo Sem-Cache ou Cache Parcial</span><span class="sxs-lookup"><span data-stu-id="baca1-111">To implement a Lookup transformation in no cache or partial cache mode</span></span>  
  
1.  <span data-ttu-id="baca1-112">No [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)], abra o projeto do [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] que contém o pacote que você deseja, e, então, abra o pacote.</span><span class="sxs-lookup"><span data-stu-id="baca1-112">In [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)], open the [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] project that contains the package you want, and then open the package.</span></span>  
  
2.  <span data-ttu-id="baca1-113">Na guia **Fluxo de Dados** , adicione uma transformação Pesquisa.</span><span class="sxs-lookup"><span data-stu-id="baca1-113">On the **Data Flow** tab, add a Lookup transformation.</span></span>  
  
3.  <span data-ttu-id="baca1-114">Conecte a transformação Pesquisa ao fluxo de dados arrastando um conector de uma fonte ou transformação anterior para a transformação Pesquisa.</span><span class="sxs-lookup"><span data-stu-id="baca1-114">Connect the Lookup transformation to the data flow by dragging a connector from a source or a previous transformation to the Lookup transformation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="baca1-115">Uma transformação Pesquisa que está configurada para usar o modo Sem-Cache talvez não fosse validada caso se conectasse a um arquivo simples que contém um campo de data vazio.</span><span class="sxs-lookup"><span data-stu-id="baca1-115">A Lookup transformation that is configured to use the no cache mode might not validate if that transformation connects to a flat file that contains an empty date field.</span></span> <span data-ttu-id="baca1-116">A transformação será validada se o gerenciador de conexões para o arquivo simples tiver sido configurado para reter valores nulos.</span><span class="sxs-lookup"><span data-stu-id="baca1-116">Whether the transformation validates depends on whether the connection manager for the flat file has been configured to retain null values.</span></span> <span data-ttu-id="baca1-117">Para garantir a validação da transformação Pesquisa, no **Editor de Fonte de Arquivo Simples**, na página **Gerenciador de Conexões**, selecione a opção **Reter valores nulos da origem como valores nulos no fluxo de dados** .</span><span class="sxs-lookup"><span data-stu-id="baca1-117">To ensure that the Lookup transformation validates, in the **Flat File Source Editor**, on the **Connection Manager Page**, select the **Retain null values from the source as null values in the data flow** option.</span></span>  
  
4.  <span data-ttu-id="baca1-118">Clique duas vezes na fonte ou transformação anterior para configurar o componente.</span><span class="sxs-lookup"><span data-stu-id="baca1-118">Double-click the source or previous transformation to configure the component.</span></span>  
  
5.  <span data-ttu-id="baca1-119">Clique duas vezes na transformação Pesquisa e em **Editor de Transformação Pesquisa**e, na página **Geral** , selecione **Cache parcial** ou **Sem cache**.</span><span class="sxs-lookup"><span data-stu-id="baca1-119">Double-click the Lookup transformation, and then in the **Lookup Transformation Editor**, on the **General** page, select **Partialcache** or **No cache**.</span></span>  
  
6.  <span data-ttu-id="baca1-120">Para a lista **Especificar como lidar com linhas sem entradas correspondentes** , selecione uma opção de tratamento de erros da lista.</span><span class="sxs-lookup"><span data-stu-id="baca1-120">For **Specify how to handle rows with no matching entries** list, select an error handling option from the list.</span></span>  
  
7.  <span data-ttu-id="baca1-121">Na página **Conexão** , selecione um gerenciador de conexões da lista **Gerenciador de conexões OLE DB** ou clique em **Novo** para criar um novo gerenciador de conexões.</span><span class="sxs-lookup"><span data-stu-id="baca1-121">On the **Connection** page, select a connection manager from the **OLE DB connection manager** list or click **New** to create a new connection manager.</span></span> <span data-ttu-id="baca1-122">Para obter mais informações, consulte [OLE DB Connection Manager](../../connection-manager/ole-db-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="baca1-122">For more information, see [OLE DB Connection Manager](../../connection-manager/ole-db-connection-manager.md).</span></span>  
  
8.  <span data-ttu-id="baca1-123">Siga uma das etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="baca1-123">Do one of the following steps:</span></span>  
  
    -   <span data-ttu-id="baca1-124">Clique em **Usar uma tabela ou uma exibição**e selecione uma tabela ou exibição ou clique em **Nova** para criar uma tabela ou exibição.</span><span class="sxs-lookup"><span data-stu-id="baca1-124">Click **Use a table or a view**, and then either select a table or view, or click **New** to create a table or view.</span></span>  
  
    -   <span data-ttu-id="baca1-125">Clique em **Use os resultados de uma consulta SQL**e crie uma consulta na janela **Comando SQL** .</span><span class="sxs-lookup"><span data-stu-id="baca1-125">Click **Use results of an SQL query**, and then build a query in the **SQL Command** window.</span></span>  
  
         <span data-ttu-id="baca1-126">-ou-</span><span class="sxs-lookup"><span data-stu-id="baca1-126">-or-</span></span>  
  
         <span data-ttu-id="baca1-127">Clique em **Criar Consulta** para criar uma consulta usando as ferramentas gráficas que o **Construtor de Consultas** fornece.</span><span class="sxs-lookup"><span data-stu-id="baca1-127">Click **Build Query** to build a query by using the graphical tools that the **Query Builder** provides.</span></span>  
  
         <span data-ttu-id="baca1-128">-ou-</span><span class="sxs-lookup"><span data-stu-id="baca1-128">-or-</span></span>  
  
         <span data-ttu-id="baca1-129">Clique em **Procurar** para importar uma instrução SQL de um arquivo.</span><span class="sxs-lookup"><span data-stu-id="baca1-129">Click **Browse** to import an SQL statement from a file.</span></span>  
  
     <span data-ttu-id="baca1-130">Para validar a consulta SQL, clique em **Analisar Consulta**.</span><span class="sxs-lookup"><span data-stu-id="baca1-130">To validate the SQL query, click **Parse Query**.</span></span>  
  
     <span data-ttu-id="baca1-131">Para exibir um exemplo dos dados, clique em **Visualização**.</span><span class="sxs-lookup"><span data-stu-id="baca1-131">To view a sample of the data, click **Preview**.</span></span>  
  
9. <span data-ttu-id="baca1-132">Clique na página **Colunas** e, então, arraste pelo menos uma coluna da lista **Colunas de Entrada Disponíveis** para uma coluna na lista **Coluna de Pesquisa Disponível** .</span><span class="sxs-lookup"><span data-stu-id="baca1-132">Click the **Columns** page, and then drag at least one column from the **Available Input Columns** list to a column in the **Available Lookup Column** list.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="baca1-133">A transformação Pesquisa mapeia automaticamente colunas que têm o mesmo nome e o mesmo tipo de dados.</span><span class="sxs-lookup"><span data-stu-id="baca1-133">The Lookup transformation automatically maps columns that have the same name and the same data type.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="baca1-134">Estas colunas devem ter tipos de dados correspondentes a serem mapeados.</span><span class="sxs-lookup"><span data-stu-id="baca1-134">Columns must have matching data types to be mapped.</span></span> <span data-ttu-id="baca1-135">Para obter mais informações, consulte [Integration Services Data Types](../integration-services-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="baca1-135">For more information, see [Integration Services Data Types](../integration-services-data-types.md).</span></span>  
  
10. <span data-ttu-id="baca1-136">Inclua colunas de pesquisa na saída realizando as etapas seguintes:</span><span class="sxs-lookup"><span data-stu-id="baca1-136">Include lookup columns in the output by doing the following steps:</span></span>  
  
    1.  <span data-ttu-id="baca1-137">Na lista **Colunas de Pesquisa Disponíveis** , selecione colunas.</span><span class="sxs-lookup"><span data-stu-id="baca1-137">From the **Available Lookup Columns** list, select columns.</span></span>  
  
    2.  <span data-ttu-id="baca1-138">Na lista **Operação de Pesquisa** , especifique se os valores das colunas de pesquisa devem substituir os valores na coluna de entrada ou ser gravados em uma nova coluna.</span><span class="sxs-lookup"><span data-stu-id="baca1-138">In **Lookup Operation** list, specify whether the values from the lookup columns replace values in the input column or are written to a new column.</span></span>  
  
11. <span data-ttu-id="baca1-139">Se você selecionou **Cache parcial** na etapa 5, na página **Avançado** , defina as opções de cache seguintes:</span><span class="sxs-lookup"><span data-stu-id="baca1-139">If you selected **Partial cache** in step 5, on the **Advanced** page, set the following cache options:</span></span>  
  
    -   <span data-ttu-id="baca1-140">Na lista **Tamanho de cache (32 bits)** , selecione o tamanho de cache para ambientes de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="baca1-140">From the **Cache size (32-bit)** list, select the cache size for 32-bit environments.</span></span>  
  
    -   <span data-ttu-id="baca1-141">Na lista **Tamanho de cache (64 bits)** , selecione o tamanho de cache para ambientes de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="baca1-141">From the **Cache size (64-bit)** list, select the cache size for 64-bit environments.</span></span>  
  
    -   <span data-ttu-id="baca1-142">Para armazenar as linhas em cache sem entradas correspondentes na referência, selecione **Habilitar cache para linhas sem entradas correspondentes**.</span><span class="sxs-lookup"><span data-stu-id="baca1-142">To cache the rows without matching entries in the reference, select **Enable cache for rows with no matching entries**.</span></span>  
  
    -   <span data-ttu-id="baca1-143">Na lista **Alocação do cache** , selecione a porcentagem do cache a ser usado para armazenar as linhas sem entradas correspondentes.</span><span class="sxs-lookup"><span data-stu-id="baca1-143">From the **Allocation from cache** list, select the percentage of the cache to use to store the rows without matching entries.</span></span>  
  
12. <span data-ttu-id="baca1-144">Para modificar a instrução SQL que gera os conjuntos de dados de referência, selecione **Modificar a instrução SQL**e altere a instrução SQL exibida na caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="baca1-144">To modify the SQL statement that generates the reference dataset, select **Modify the SQL statement**, and change the SQL statement displayed in the text box.</span></span>  
  
     <span data-ttu-id="baca1-145">Se a instrução incluir parâmetros, clique em **Parâmetros** para mapear os parâmetros para colunas de entrada.</span><span class="sxs-lookup"><span data-stu-id="baca1-145">If the statement includes parameters, click **Parameters** to map the parameters to input columns.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="baca1-146">A instrução SQL opcional especificada nesta página substituirá o nome da tabela especificado na página **Conexão** do **Editor da Transformação Pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="baca1-146">The optional SQL statement that you specify on this page overrides and replaces the table name that you specified on the **Connection** page of the **Lookup Transformation Editor**.</span></span>  
  
13. <span data-ttu-id="baca1-147">Para configurar a saída de erro, clique na página **Saída de Erro** e defina as opções de tratamento de erros.</span><span class="sxs-lookup"><span data-stu-id="baca1-147">To configure the error output, click the **Error Output** page and set the error handling options.</span></span> <span data-ttu-id="baca1-148">Para obter mais informações, consulte [Editor de Transformação Pesquisa &#40;página Saída de Erro&#41;](../../lookup-transformation-editor-error-output-page.md).</span><span class="sxs-lookup"><span data-stu-id="baca1-148">For more information, see [Lookup Transformation Editor &#40;Error Output Page&#41;](../../lookup-transformation-editor-error-output-page.md).</span></span>  
  
14. <span data-ttu-id="baca1-149">Clique em **OK** para salvar suas alterações na transformação Pesquisa e, então, execute o pacote.</span><span class="sxs-lookup"><span data-stu-id="baca1-149">Click **OK** to save your changes to the Lookup transformation, and then run the package.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="baca1-150">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="baca1-150">See Also</span></span>  
 [<span data-ttu-id="baca1-151">Transformações do Integration Services</span><span class="sxs-lookup"><span data-stu-id="baca1-151">Integration Services Transformations</span></span>](integration-services-transformations.md)  
  
  
