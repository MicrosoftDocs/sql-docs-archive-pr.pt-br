---
title: Ajustando uma carga de trabalho | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- workloads [SQL Server], tuning
ms.assetid: 6229bf3f-1182-4bc6-8451-cedc37f4b62e
author: stevestein
ms.author: sstein
ms.openlocfilehash: f95aab55d402ac72228dcc4326ad00ea15e7471f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87682012"
---
# <a name="tuning-a-workload"></a><span data-ttu-id="65f74-102">Ajustando uma carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="65f74-102">Tuning a Workload</span></span>
  <span data-ttu-id="65f74-103">O Orientador de Otimização do Mecanismo de Banco de Dados pode ser usado para achar o melhor design de banco de dados físico para desempenho de consulta nos bancos de dados e tabelas que você seleciona para ajustar.</span><span class="sxs-lookup"><span data-stu-id="65f74-103">The Database Engine Tuning Advisor can be used to find the best physical database design for query performance on the databases and tables that you select for tuning.</span></span>  
  
 <span data-ttu-id="65f74-104">Esta tarefa usa o banco de dados de exemplo [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65f74-104">This task uses the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] sample database.</span></span> <span data-ttu-id="65f74-105">Para reforçar a segurança, os bancos de dados de exemplo não são instalados por padrão.</span><span class="sxs-lookup"><span data-stu-id="65f74-105">To enhance security, the sample databases are not installed by default.</span></span> <span data-ttu-id="65f74-106">Para instalar os bancos de dados de exemplo, consulte [Instalando amostras e bancos de dados de exemplo do SQL Server](http://sqlserversamples.codeplex.com).</span><span class="sxs-lookup"><span data-stu-id="65f74-106">To install the sample databases, see [Installing SQL Server Samples and Sample Databases](http://sqlserversamples.codeplex.com).</span></span>  
  
### <a name="tune-a-workload-transact-sql-script-file"></a><span data-ttu-id="65f74-107">Ajustar uma carga de trabalho de arquivo de script do Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="65f74-107">Tune a workload Transact-SQL script file</span></span>  
  
1.  <span data-ttu-id="65f74-108">Copie uma instrução ou instruções de exemplo SELECT de “ A.</span><span class="sxs-lookup"><span data-stu-id="65f74-108">Copy a sample SELECT statement or statements from "A.</span></span> <span data-ttu-id="65f74-109">Usando SELECT para recuperar linhas e colunas” em [Exemplos de SELECT &#40;Transact-SQL&#41;](/sql/t-sql/queries/select-examples-transact-sql) e cole as instruções no Editor de Consultas do [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65f74-109">Using SELECT to retrieve rows and columns" in [SELECT Examples &#40;Transact-SQL&#41;](/sql/t-sql/queries/select-examples-transact-sql) and paste the statements into the Query Editor of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="65f74-110">Salve o arquivo como **MyScript.sql** em um diretório que você possa localizar facilmente.</span><span class="sxs-lookup"><span data-stu-id="65f74-110">Save the file as **MyScript.sql** in a directory where you can easily find it.</span></span>  
  
2.  <span data-ttu-id="65f74-111">Inicie o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="65f74-111">Start Database Engine Tuning Advisor.</span></span> <span data-ttu-id="65f74-112">Consulte [Iniciando o Orientador de Otimização do Mecanismo de Banco de Dados](../../relational-databases/performance/database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="65f74-112">See [Launching Database Engine Tuning Advisor](../../relational-databases/performance/database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="65f74-113">No painel direito da GUI do Orientador de Otimização do Mecanismo de Banco de Dados, digite **MySession** em **Nome da sessão**.</span><span class="sxs-lookup"><span data-stu-id="65f74-113">In the right pane of the Database Engine Tuning Advisor GUI, type **MySession** in **Session name**.</span></span>  
  
4.  <span data-ttu-id="65f74-114">Selecione **Arquivo** para a **Carga de trabalho**e clique no botão **Procurar um arquivo de carga de trabalho** para localizar o arquivo **MyScript.sql** salvo na Etapa 1.</span><span class="sxs-lookup"><span data-stu-id="65f74-114">Select **File** for your **Workload**, and click the **Browse for a workload file** button to locate the **MyScript.sql** file that you saved in Step 1.</span></span>  
  
5.  <span data-ttu-id="65f74-115">Selecione [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] na lista **Banco de dados para análise de carga de trabalho** , selecione [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] na grade **Selecione bancos de dados e tabelas para ajuste** e deixe a opção **Salvar log de ajuste** selecionado.</span><span class="sxs-lookup"><span data-stu-id="65f74-115">Select [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] in the **Database for workload analysis** list, select [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] in the **Select databases and tables to tune** grid, and leave **Save tuning log** selected.</span></span> <span data-ttu-id="65f74-116">**Banco de dados para análise de carga de trabalho** especifica o primeiro banco de dados ao qual o Orientador de Otimização do Mecanismo de Banco de Dados se conecta ao ajustar uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="65f74-116">**Database for workload analysis** specifies the first database to which Database Engine Tuning Advisor connects when tuning a workload.</span></span> <span data-ttu-id="65f74-117">Depois que a otimização começa, o Orientador de Otimização do Mecanismo de Banco de Dados se conecta aos bancos de dados especificados pelas instruções `USE DATABASE` contidas na carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="65f74-117">After tuning begins, Database Engine Tuning Advisor connects to the databases specified by the `USE DATABASE` statements contained in the workload.</span></span>  
  
6.  <span data-ttu-id="65f74-118">Clique na guia **Opções de ajuste** . Você não definirá nenhuma opção de ajuste para esta prática, mas Reserve um tempo para examinar as opções de ajuste padrão.</span><span class="sxs-lookup"><span data-stu-id="65f74-118">Click the **Tuning Options** tab. You will not set any tuning options for this practice, but take a moment to review the default tuning options.</span></span> <span data-ttu-id="65f74-119">Pressione F1 para exibir a Ajuda da página de guias.</span><span class="sxs-lookup"><span data-stu-id="65f74-119">Press F1 to view the Help for this tabbed page.</span></span> <span data-ttu-id="65f74-120">Clique em **Opções Avançadas** para exibir outras opções de ajuste.</span><span class="sxs-lookup"><span data-stu-id="65f74-120">Click **Advanced Options** to view additional tuning options.</span></span> <span data-ttu-id="65f74-121">Clique em **Ajuda** na caixa de diálogo **Opções de Ajuste Avançadas** para obter informações sobre as opções de ajuste que são exibidas nessa caixa.</span><span class="sxs-lookup"><span data-stu-id="65f74-121">Click **Help** in the **Advanced Tuning Options** dialog box for information about the tuning options that are displayed there.</span></span> <span data-ttu-id="65f74-122">Clique em **Cancelar** para fechar a caixa de diálogo **Opções de Ajuste Avançadas** , deixando as opções padrão selecionadas.</span><span class="sxs-lookup"><span data-stu-id="65f74-122">Click **Cancel** to close the **Advanced Tuning Options** dialog box, leaving the default options selected.</span></span>  
  
7.  <span data-ttu-id="65f74-123">Clique no botão **Iniciar Análise** na barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="65f74-123">Click the **Start Analysis** button on the toolbar.</span></span> <span data-ttu-id="65f74-124">Embora Orientador de Otimização do Mecanismo de Banco de Dados esteja analisando a carga de trabalho, você pode monitorar o status na guia **progresso** . Quando o ajuste for concluído, a guia **recomendações** será exibida.</span><span class="sxs-lookup"><span data-stu-id="65f74-124">While Database Engine Tuning Advisor is analyzing the workload, you can monitor the status on the **Progress** tab. When tuning is complete, the **Recommendations** tab is displayed.</span></span>  
  
     <span data-ttu-id="65f74-125">Se você receber um erro sobre a data e hora de interrupção do ajuste, verifique a hora de **parar** no horário da guia principais **Opções de ajuste** . Verifique se a data e a hora da **parada** são posteriores à data e hora atuais e, se necessário, altere-as.</span><span class="sxs-lookup"><span data-stu-id="65f74-125">If you receive an error about the tuning stop date and time, check the **Stop at** time on the main **Tuning Options** tab. Make sure the **Stop at** date and time are greater than the current date and time, and if necessary, change them.</span></span>  
  
8.  <span data-ttu-id="65f74-126">Depois que a análise for concluída, salve sua recomendação como um script [!INCLUDE[tsql](../../includes/tsql-md.md)] clicando em **Salvar Recomendações** no menu **Ações** .</span><span class="sxs-lookup"><span data-stu-id="65f74-126">After the analysis completes, save your recommendation as a [!INCLUDE[tsql](../../includes/tsql-md.md)] script by clicking **Save Recommendations** on the **Actions** menu.</span></span> <span data-ttu-id="65f74-127">Na caixa de diálogo **Salvar Como** , navegue até o diretório em que você quer salvar o script de recomendações e digite o nome de arquivo **MyRecommendations**.</span><span class="sxs-lookup"><span data-stu-id="65f74-127">In the **Save As** dialog box, navigate to the directory where you want to save the recommendations script, and type the file name **MyRecommendations**.</span></span>  
  
## <a name="summary"></a><span data-ttu-id="65f74-128">Resumo</span><span class="sxs-lookup"><span data-stu-id="65f74-128">Summary</span></span>  
 <span data-ttu-id="65f74-129">Você completou o ajuste de uma carga de trabalho de instrução SELECT simples no banco de dados [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65f74-129">You have completed tuning a simple SELECT statement workload on the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="65f74-130">O Orientador de Otimização do Mecanismo de Banco de Dados também pode usar arquivos de rastreamento e tabelas de rastreamento [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] como ajuste de cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="65f74-130">The Database Engine Tuning Advisor can also take [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] trace files and tables as tuning workloads.</span></span> <span data-ttu-id="65f74-131">A próxima tarefa mostra como exibir e interpretar as recomendações de ajuste que foi recebido como resultado do ajuste de prática.</span><span class="sxs-lookup"><span data-stu-id="65f74-131">The next task shows you how to view and interpret the tuning recommendations that you received as a result of the practice tuning.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="65f74-132">Próxima tarefa da lição</span><span class="sxs-lookup"><span data-stu-id="65f74-132">Next Task in Lesson</span></span>  
 [<span data-ttu-id="65f74-133">Exibindo recomendações de ajuste</span><span class="sxs-lookup"><span data-stu-id="65f74-133">Viewing Tuning Recommendations</span></span>](lesson-1-2-viewing-tuning-recommendations.md)  
  
  
