---
title: SQL Server Distributed Replay | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- Distributed Replay
- SQL Server Distributed Replay
ms.assetid: 58ef7016-b105-42c2-90a0-364f411849a4
author: stevestein
ms.author: sstein
ms.openlocfilehash: b832cb8a8d8a38815b13b82a7af8eefc2fb81427
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87678460"
---
# <a name="sql-server-distributed-replay"></a><span data-ttu-id="1b0e9-102">SQL Server Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-102">SQL Server Distributed Replay</span></span>
  <span data-ttu-id="1b0e9-103">O recurso [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay ajuda a avaliar o impacto de atualizações futuras do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b0e9-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature helps you assess the impact of future [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] upgrades.</span></span> <span data-ttu-id="1b0e9-104">Também é possível usar esse recurso para ajudar a avaliar o impacto das atualizações de hardware e sistemas operacionais e ajuste do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1b0e9-104">You can also use it to help assess the impact of hardware and operating system upgrades, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tuning.</span></span>

## <a name="benefits-of-distributed-replay"></a><span data-ttu-id="1b0e9-105">Benefícios do Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-105">Benefits of Distributed Replay</span></span>
 <span data-ttu-id="1b0e9-106">De modo semelhante ao [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], você pode usar o Distributed Replay para reproduzir um rastreamento capturado em um ambiente de teste atualizado.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-106">Similar to [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], you can use Distributed Replay to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="1b0e9-107">Diferentemente do [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], o Distributed Replay não está limitado à reprodução da carga de trabalho de um único computador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-107">Unlike [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay is not limited to replaying the workload from a single computer.</span></span>

 <span data-ttu-id="1b0e9-108">O Distributed Replay oferece uma solução mais dimensionável do que o [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b0e9-108">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="1b0e9-109">Com o Distributed Replay, é possível reproduzir uma carga de trabalho de vários computadores e simular melhor uma carga de trabalho de missão crítica.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-109">With Distributed Replay, you can replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="1b0e9-110">O recurso [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay pode usar vários computadores para reproduzir dados de rastreamento e simular uma carga de trabalho de missão crítica.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-110">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature can use multiple computers to replay trace data and simulate a mission-critical workload.</span></span> <span data-ttu-id="1b0e9-111">Use o Distributed Replay para teste de compatibilidade de aplicativo, teste de desempenho ou planejamento de capacidade.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-111">Use Distributed Replay for application compatibility testing, performance testing, or capacity planning.</span></span>

## <a name="when-to-use-distributed-replay"></a><span data-ttu-id="1b0e9-112">Quando usar o Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-112">When to Use Distributed Replay</span></span>
 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] <span data-ttu-id="1b0e9-113">e o Distributed Replay fornecem algumas funções sobrepostas.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-113">and Distributed Replay provide some overlap in functionality.</span></span>

 <span data-ttu-id="1b0e9-114">Você pode usar o [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] para repetir um rastreamento capturado em um ambiente de teste atualizado.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-114">You may use [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="1b0e9-115">Também é possível analisar os resultados da repetição para procurar incompatibilidades de função e desempenho.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-115">You can also analyze the replay results to look for potential functional and performance incompatibilities.</span></span> <span data-ttu-id="1b0e9-116">No entanto, o [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] somente pode repetir uma carga de trabalho de um único computador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-116">However, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can only replay a workload from a single computer.</span></span> <span data-ttu-id="1b0e9-117">Ao repetir um aplicativo OLTP intensivo que tenha muitas conexões simultâneas ativas ou alta taxa de transferência, o [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] pode se tornar um gargalo de recurso.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-117">When replaying an intensive OLTP application that has many active concurrent connections or high throughput, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can become a resource bottleneck.</span></span>

 <span data-ttu-id="1b0e9-118">O Distributed Replay oferece uma solução mais dimensionável do que o [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b0e9-118">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="1b0e9-119">Use o Distributed Replay para reproduzir uma carga de trabalho de vários computadores e simular melhor uma carga de trabalho de missão crítica.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-119">Use Distributed Replay to replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="1b0e9-120">A tabela a seguir descreve quando usar cada ferramenta.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-120">The following table describes when to use each tool.</span></span>

|<span data-ttu-id="1b0e9-121">Ferramenta</span><span class="sxs-lookup"><span data-stu-id="1b0e9-121">Tool</span></span>|<span data-ttu-id="1b0e9-122">Use quando...</span><span class="sxs-lookup"><span data-stu-id="1b0e9-122">Use When...</span></span>|
|----------|---------------|
|[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]|<span data-ttu-id="1b0e9-123">Você quiser usar o mecanismo de repetição convencional em um único computador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-123">You want to use the conventional replay mechanism on a single computer.</span></span> <span data-ttu-id="1b0e9-124">Em particular, você precisa de recursos de depuração linha a linha, como os comandos **Etapa**, **Executar até o Cursor**e **Ativar/Desativar Pontos de Interrupção** .</span><span class="sxs-lookup"><span data-stu-id="1b0e9-124">In particular, you need line-by-line debugging capabilities, such as the **Step**, **Run to Cursor**, and **Toggle Breakpoint** commands.</span></span><br /><br /> <span data-ttu-id="1b0e9-125">Você deseja repetir um rastreamento [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1b0e9-125">You want to replay an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] trace.</span></span>|
|<span data-ttu-id="1b0e9-126">Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-126">Distributed Replay</span></span>|<span data-ttu-id="1b0e9-127">Você quiser avaliar a compatibilidade de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-127">You want to evaluate application compatibility.</span></span> <span data-ttu-id="1b0e9-128">Por exemplo, você deseja testar o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e os cenários de atualização de sistema operacional, atualizações de hardware ou ajuste de índice.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-128">For example, you want to test [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and operating system upgrade scenarios, hardware upgrades, or index tuning.</span></span><br /><br /> <span data-ttu-id="1b0e9-129">A simultaneidade no rastreamento capturado é tão alta que um único cliente de repetição não pode simular isso suficientemente.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-129">The concurrency in the captured trace is so high that a single replay client cannot sufficiently simulate it.</span></span>|

## <a name="distributed-replay-concepts"></a><span data-ttu-id="1b0e9-130">Conceitos do Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-130">Distributed Replay Concepts</span></span>
 <span data-ttu-id="1b0e9-131">Os seguintes componentes fazem parte do ambiente do Distributed Replay:</span><span class="sxs-lookup"><span data-stu-id="1b0e9-131">The following components make up the Distributed Replay environment:</span></span>

-   <span data-ttu-id="1b0e9-132">**Ferramenta de administração de Distributed Replay**: um aplicativo de console, `DReplay.exe` , usado para se comunicar com o controlador do Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-132">**Distributed Replay administration tool**: A console application, `DReplay.exe`, used to communicate with the distributed replay controller.</span></span> <span data-ttu-id="1b0e9-133">Use a ferramenta de administração para controlar a reprodução distribuída.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-133">Use the administration tool to control the distributed replay.</span></span>

-   <span data-ttu-id="1b0e9-134">**Controlador do Distributed Replay**: um computador que executa o serviço Windows denominado controlador Distributed Replay do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b0e9-134">**Distributed Replay controller**: A computer running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay controller.</span></span> <span data-ttu-id="1b0e9-135">O controlador Distributed Replay orquestra as ações dos clientes de reprodução distribuída.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-135">The Distributed Replay controller orchestrates the actions of the distributed replay clients.</span></span> <span data-ttu-id="1b0e9-136">Cada ambiente de Distributed Replay pode conter apenas uma instância de controlador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-136">There can only be one controller instance in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="1b0e9-137">**Clientes do Distributed Replay**: um ou mais computadores (físicos ou virtuais) que executam o serviço Windows denominado Cliente do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-137">**Distributed Replay clients**: One or more computers (physical or virtual) running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay client.</span></span> <span data-ttu-id="1b0e9-138">Os clientes do Distributed Replay trabalham juntos para simular cargas de trabalho em uma instância do SQL Server do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b0e9-138">The Distributed Replay clients work together to simulate workloads against an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="1b0e9-139">Pode haver um ou mais clientes em cada ambiente do Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-139">There can be one or more clients in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="1b0e9-140">**Servidor de destino**: uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que clientes do Distributed Replay podem usar para reproduzir dados de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-140">**Target server**: An instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that the Distributed Replay clients can use to replay trace data.</span></span> <span data-ttu-id="1b0e9-141">Nós recomendamos que o servidor de destino seja localizado em um ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-141">We recommend that the target server be located in a test environment.</span></span>

 <span data-ttu-id="1b0e9-142">A ferramenta de administração Distributed Replay, o controlador e o cliente podem ser instalados em diferentes computadores ou no mesmo computador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-142">The Distributed Replay administration tool, controller, and client can be installed on different computers or the same computer.</span></span> <span data-ttu-id="1b0e9-143">Só pode existir uma instância do serviço de cliente ou controlador do Distributed Replay em execução no mesmo computador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-143">There can be only one instance of the Distributed Replay controller or client service that is running on the same computer.</span></span>

 <span data-ttu-id="1b0e9-144">A seguinte figura mostra para a arquitetura física do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay:</span><span class="sxs-lookup"><span data-stu-id="1b0e9-144">The following figure shows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay physical architecture:</span></span>

 <span data-ttu-id="1b0e9-145">![Arquitetura de Distributed Replay](../../database-engine/media/distributedreplayarch.gif "Arquitetura de Distributed Replay")</span><span class="sxs-lookup"><span data-stu-id="1b0e9-145">![Distributed Replay Architecture](../../database-engine/media/distributedreplayarch.gif "Distributed Replay Architecture")</span></span>

## <a name="distributed-replay-tasks"></a><span data-ttu-id="1b0e9-146">Tarefas do Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-146">Distributed Replay Tasks</span></span>

|<span data-ttu-id="1b0e9-147">Descrição da tarefa</span><span class="sxs-lookup"><span data-stu-id="1b0e9-147">Task Description</span></span>|<span data-ttu-id="1b0e9-148">Tópico</span><span class="sxs-lookup"><span data-stu-id="1b0e9-148">Topic</span></span>|
|----------------------|-----------|
|<span data-ttu-id="1b0e9-149">Descreve como configurar o Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-149">Describes how to configure Distributed Replay.</span></span>|[<span data-ttu-id="1b0e9-150">Configurar o Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="1b0e9-150">Configure Distributed Replay</span></span>](configure-distributed-replay.md)|
|<span data-ttu-id="1b0e9-151">Descreve como preparar os dados de rastreamento de entrada.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-151">Describes how to prepare the input trace data.</span></span>|[<span data-ttu-id="1b0e9-152">Preparar os dados de rastreamento de entrada</span><span class="sxs-lookup"><span data-stu-id="1b0e9-152">Prepare the Input Trace Data</span></span>](prepare-the-input-trace-data.md)|
|<span data-ttu-id="1b0e9-153">Descreve como reproduzir dados de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-153">Describes how to replay trace data.</span></span>|[<span data-ttu-id="1b0e9-154">Reproduzir dados de rastreamento</span><span class="sxs-lookup"><span data-stu-id="1b0e9-154">Replay Trace Data</span></span>](replay-trace-data.md)|
|<span data-ttu-id="1b0e9-155">Descreve como revisar os resultados de dados de rastreamento de Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-155">Describes how to review the Distributed Replay trace data results.</span></span>|[<span data-ttu-id="1b0e9-156">Examinar os resultados da reprodução</span><span class="sxs-lookup"><span data-stu-id="1b0e9-156">Review the Replay Results</span></span>](review-the-replay-results.md)|
|<span data-ttu-id="1b0e9-157">Descreve como usar a ferramenta de administração para iniciar, monitorar e cancelar operações no controlador.</span><span class="sxs-lookup"><span data-stu-id="1b0e9-157">Describes how to use the administration tool to initiate, monitor, and cancel operations on the controller.</span></span>|[<span data-ttu-id="1b0e9-158">Opções de linha de comando da ferramenta de administração &#40;Distributed Replay Utility&#41;</span><span class="sxs-lookup"><span data-stu-id="1b0e9-158">Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;</span></span>](administration-tool-command-line-options-distributed-replay-utility.md)|

## <a name="see-also"></a><span data-ttu-id="1b0e9-159">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="1b0e9-159">See Also</span></span>
 <span data-ttu-id="1b0e9-160">[SQL Server Distributed Replay Fórum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [usando Distributed Replay para testar o teste de carga do seu SQL Server-parte 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [usando Distributed Replay para testar o teste de carga de SQL Server-parte 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span><span class="sxs-lookup"><span data-stu-id="1b0e9-160">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [Using Distributed Replay to Load Test Your SQL Server - Part 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span></span>


