---
title: O que&#39;s New no SQLXML 4,0 SP1 | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- registry keys [SQLXML]
- SQLNCLI, SQLXML
- what's new [SQLXML]
- SQLXML, what's new
- migrating SQLXML applications
- redistributing SQLXML
- SQL Server Native Client, SQLXML
- side-by-side installations [SQLXML]
ms.assetid: 48f7720b-1705-402d-93ce-097ff1737877
author: rothja
ms.author: jroth
ms.openlocfilehash: 880937520385fbe6ce64be3fdfcbbf7d11c73741
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87679290"
---
# <a name="what39s-new-in-sqlxml-40-sp1"></a><span data-ttu-id="6380d-102">O que&#39;s New no SQLXML 4,0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-102">What&#39;s New in SQLXML 4.0 SP1</span></span>
  <span data-ttu-id="6380d-103">O [!INCLUDE[msCoName](../../includes/msconame-md.md)] SQLXML 4.0 SP1 inclui várias atualizações e aprimoramentos.</span><span class="sxs-lookup"><span data-stu-id="6380d-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)] SQLXML 4.0 SP1 includes various updates and enhancements.</span></span> <span data-ttu-id="6380d-104">Este tópico resume as atualizações e fornece links a informações mais detalhadas.</span><span class="sxs-lookup"><span data-stu-id="6380d-104">This topic summarizes the updates and provides links to more detailed information, where available.</span></span> <span data-ttu-id="6380d-105">O SQLXML 4.0 SP1 tem aprimoramentos adicionais para dar suporte aos novos tipos de dados apresentados no [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6380d-105">SQLXML 4.0 SP1 provides additional enhancements to support the new data types introduced in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="6380d-106">Este tópico abrange os seguintes assuntos:</span><span class="sxs-lookup"><span data-stu-id="6380d-106">This topic includes the following subjects:</span></span>  
  
-   <span data-ttu-id="6380d-107">Instalação do SQLXML 4.0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-107">Installing SQLXML 4.0 SP1</span></span>  
  
-   <span data-ttu-id="6380d-108">Problemas da instalação lado a lado</span><span class="sxs-lookup"><span data-stu-id="6380d-108">Side-by-Side Installation Issues</span></span>  
  
-   <span data-ttu-id="6380d-109">SQLXML 4.0 e MSXML</span><span class="sxs-lookup"><span data-stu-id="6380d-109">SQLXML 4.0 and MSXML</span></span>  
  
-   <span data-ttu-id="6380d-110">Redistribuição do SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="6380d-110">Redistributing SQLXML 4.0</span></span>  
  
-   <span data-ttu-id="6380d-111">Suporte para [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cliente nativo</span><span class="sxs-lookup"><span data-stu-id="6380d-111">Support for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client</span></span>  
  
-   <span data-ttu-id="6380d-112">Suporte para tipos de dados introduzidos no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]</span><span class="sxs-lookup"><span data-stu-id="6380d-112">Support for Data Types Introduced in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]</span></span>  
  
-   <span data-ttu-id="6380d-113">Alterações no XML Bulk Load para o SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="6380d-113">XML Bulk Load Changes for SQLXML 4.0</span></span>  
  
-   <span data-ttu-id="6380d-114">Alterações de chave de registro para o SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="6380d-114">Registry Key Changes for SQLXML 4.0</span></span>  
  
-   <span data-ttu-id="6380d-115">Problemas de migração</span><span class="sxs-lookup"><span data-stu-id="6380d-115">Migration Issues</span></span>  
  
## <a name="installing-sqlxml-40-sp1"></a><span data-ttu-id="6380d-116">Instalação do SQLXML 4.0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-116">Installing SQLXML 4.0 SP1</span></span>  
 <span data-ttu-id="6380d-117">Antes do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], o SQLXML 4.0 era liberado com o SQL Server e fazia parte da instalação padrão de todas as versões do SQL Server com exceção do SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="6380d-117">Before [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], SQLXML 4.0 was released with SQL Server and was part of the default installation of all SQL Server versions except for SQL Server Express.</span></span> <span data-ttu-id="6380d-118">A partir do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], a última versão do SQLXML (SQLXML 4.0 SP1) não está mais incluída no SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6380d-118">Starting with [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the latest version of SQLXML (SQLXML 4.0 SP1) is no longer included in SQL Server.</span></span> <span data-ttu-id="6380d-119">Para instalar o SQLXML 4,0 SP1, baixe-o no [local de instalação do sqlxml 4,0 SP1](https://www.microsoft.com/download/details.aspx?id=30403).</span><span class="sxs-lookup"><span data-stu-id="6380d-119">To install SQLXML 4.0 SP1, download it from [Install Location for SQLXML 4.0 SP1](https://www.microsoft.com/download/details.aspx?id=30403).</span></span>  
  
 <span data-ttu-id="6380d-120">Os arquivos do SQLXML 4.0 SP1 são instalados no seguinte local:</span><span class="sxs-lookup"><span data-stu-id="6380d-120">The SQLXML 4.0 SP1 files are installed in the following location:</span></span>  
  
 `%PROGRAMFILES%\SQLXML 4.0\`  
  
> [!NOTE]  
>  <span data-ttu-id="6380d-121">Todas as configurações adequadas de registro são feitas para o SQLXML 4.0 como parte do processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="6380d-121">All appropriate registry settings for SQLXML 4.0 are made as part of the installation process.</span></span>  
  
 <span data-ttu-id="6380d-122">Para permitir que os aplicativos SQLXML de 32 bits sejam executados no Windows on Windows (WOW64) em sistemas operacionais Windows de 64 bits, execute o pacote SQLXML 4.0 SP1 de 64 bits, chamado sqlxml4.msi, que está disponível no Centro de download.</span><span class="sxs-lookup"><span data-stu-id="6380d-122">To allow 32-bit SQLXML applications to run under Windows on Windows (WOW64) on 64-bit Windows operating systems, run the 64-bit SQLXML 4.0 SP1 package, named sqlxml4.msi, which can be found on the Download Center.</span></span>  
  
#### <a name="uninstalling-sqlxml-40-sp1"></a><span data-ttu-id="6380d-123">Desinstalação do SQLXML 4.0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-123">Uninstalling SQLXML 4.0 SP1</span></span>  
 <span data-ttu-id="6380d-124">Existem chaves de registro compartilhadas entre o SQLXML 3.0 SP3, o SQLXML 4.0 e o SQLXML 4.0 SP1.</span><span class="sxs-lookup"><span data-stu-id="6380d-124">Shared registry keys exist between SQLXML 3.0 SP3, SQLXML 4.0 and SQLXML 4.0 SP1.</span></span> <span data-ttu-id="6380d-125">Se as versões posteriores do SQLXML forem desinstaladas no mesmo computador que contém o SQLXML 3.0 SP3, talvez seja necessário reinstalar o SQLXML 3.0 SP3.</span><span class="sxs-lookup"><span data-stu-id="6380d-125">If the later versions of SQLXML are uninstalled on the same computer which contains SQLXML 3.0 SP3, you might need to reinstall SQLXML 3.0 SP3.</span></span>  
  
## <a name="side-by-side-installation-issues"></a><span data-ttu-id="6380d-126">Problemas da instalação lado a lado</span><span class="sxs-lookup"><span data-stu-id="6380d-126">Side-by-Side Installation Issues</span></span>  
 <span data-ttu-id="6380d-127">O processo de instalação para SQLXML 4.0 não remove os arquivos que foram instalados pelas versões anteriores do SQLXML.</span><span class="sxs-lookup"><span data-stu-id="6380d-127">The installation process for SQLXML 4.0 does not remove the files that were installed by earlier versions of SQLXML.</span></span> <span data-ttu-id="6380d-128">Portanto, você pode ter DLLs para várias instalações de versões diferentes do SQLXML em seu computador.</span><span class="sxs-lookup"><span data-stu-id="6380d-128">Therefore, you can have DLLs for several different version-distinctive installations of SQLXML on your computer.</span></span> <span data-ttu-id="6380d-129">É possível executar as instalações lado a lado.</span><span class="sxs-lookup"><span data-stu-id="6380d-129">You can run the installations side-by-side.</span></span> <span data-ttu-id="6380d-130">O SQLXML 4.0 inclui tanto ProgIDs dependentes de versão como independentes de versão.</span><span class="sxs-lookup"><span data-stu-id="6380d-130">SQLXML 4.0 includes both version-independent and version-dependent PROGIDs.</span></span> <span data-ttu-id="6380d-131">Todos os aplicativos de produção devem usar PROGIDs dependentes de versão.</span><span class="sxs-lookup"><span data-stu-id="6380d-131">All production applications should use version-dependent PROGIDs.</span></span>  
  
## <a name="sqlxml-40-sp1-and-msxml"></a><span data-ttu-id="6380d-132">SQLXML 4.0 SP1 e MSXML</span><span class="sxs-lookup"><span data-stu-id="6380d-132">SQLXML 4.0 SP1 and MSXML</span></span>  
 <span data-ttu-id="6380d-133">O SQLXML 4.0 não instala o MSXML.</span><span class="sxs-lookup"><span data-stu-id="6380d-133">SQLXML 4.0 does not install MSXML.</span></span> <span data-ttu-id="6380d-134">O SQLXML 4.0 usa o MSXML 6.0, que é instalado como parte da instalação do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] ou posterior.</span><span class="sxs-lookup"><span data-stu-id="6380d-134">SQLXML 4.0 uses MSXML 6.0, which is installed as part of the [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or later installation.</span></span>  
  
## <a name="redistributing-sqlxml-40-sp1"></a><span data-ttu-id="6380d-135">Redistribuição do SQLXML 4.0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-135">Redistributing SQLXML 4.0 SP1</span></span>  
 <span data-ttu-id="6380d-136">É possível distribuir o SQLXML 4.0 SP1 usando o pacote do instalador redistribuível.</span><span class="sxs-lookup"><span data-stu-id="6380d-136">You can distribute SQLXML 4.0 SP1 using the redistributable installer package.</span></span> <span data-ttu-id="6380d-137">Uma maneira de instalar vários pacotes em um processo que, para o usuário, parece ser uma única instalação é usar a tecnologia de encadeador e bootstrapper.</span><span class="sxs-lookup"><span data-stu-id="6380d-137">One way to install multiple packages in what seems to the user to be a single installation is to use chainer and bootstrapper technology.</span></span> <span data-ttu-id="6380d-138">Para obter mais informações, consulte as seções sobre Criação de um pacote de bootstrapper personalizado para o Visual Studio 2005 e Adição de pré-requisitos personalizados.</span><span class="sxs-lookup"><span data-stu-id="6380d-138">For more information, see Authoring a Custom Bootstrapper Package for Visual Studio 2005 and Adding Custom Prerequisites.</span></span>  
  
 <span data-ttu-id="6380d-139">Se o aplicativo foi projetado para uma plataforma diferente daquela em que foi desenvolvido, você poderá baixar as versões do sqlncli.msi para x64, Itanium e x86 do Centro de Download da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6380d-139">If your application targets a platform other than the one it was developed on, you can download versions of sqlncli.msi for x64, Itanium, and x86 from the Microsoft Download Center.</span></span>  
  
 <span data-ttu-id="6380d-140">Também há programas de instalação de redistribuição separados o MSXML 6.0 (msxml6.msi).</span><span class="sxs-lookup"><span data-stu-id="6380d-140">There are also separate redistribution installation programs for MSXML 6.0 (msxml6.msi).</span></span> <span data-ttu-id="6380d-141">Eles podem ser encontrados no CD de instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no seguinte local:</span><span class="sxs-lookup"><span data-stu-id="6380d-141">These can be found on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation CD in the following location:</span></span>  
  
 `%CD%\Setup\`  
  
 <span data-ttu-id="6380d-142">Esses arquivos de instalação podem ser usados para instalar o MSXML 6.0 diretamente do CD.</span><span class="sxs-lookup"><span data-stu-id="6380d-142">These installation files can be used to install MSXML 6.0 directly from the CD.</span></span> <span data-ttu-id="6380d-143">Eles também podem ser usados, de forma independente, para redistribuir o MSXML 6.0 junto com o SQLXML 4.0 SP1 com seus próprios aplicativos personalizados.</span><span class="sxs-lookup"><span data-stu-id="6380d-143">They can also be used to freely redistribute MSXML 6.0 along with SQLXML 4.0 SP1 with your own custom applications.</span></span>  
  
 <span data-ttu-id="6380d-144">Você também precisará redistribuir o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client se estiver usando-o como o provedor de dados com seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6380d-144">You will also need to redistribute [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client if you are using it as the data provider with your application.</span></span> <span data-ttu-id="6380d-145">Para obter mais informações, consulte [Instalando o SQL Server Native Client](../native-client/applications/installing-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="6380d-145">For more information, see [Installing SQL Server Native Client](../native-client/applications/installing-sql-server-native-client.md).</span></span>  
  
## <a name="support-for-sql-server-native-client"></a><span data-ttu-id="6380d-146">Suporte para SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="6380d-146">Support for SQL Server Native Client</span></span>  
 <span data-ttu-id="6380d-147">O SQLXML 4,0 dá suporte aos provedores de cliente SQLOLEDB e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nativo.</span><span class="sxs-lookup"><span data-stu-id="6380d-147">SQLXML 4.0 supports both the SQLOLEDB and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client providers.</span></span> <span data-ttu-id="6380d-148">É recomendável que você use a mesma versão do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provedor de cliente nativo e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] porque [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] o Native Client é desenvolvido para dar suporte a quaisquer novos tipos de dados que são fornecidos no servidor, como os `Date, Time` tipos de dados, `DateTime2` e `dateTimeOffset` [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] com suporte do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] cliente nativo.</span><span class="sxs-lookup"><span data-stu-id="6380d-148">It is recommended that you use the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client provider and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client is developed to support any new data types that ship in the server, such as the `Date, Time`, `DateTime2`, and `dateTimeOffset` data types in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and supported by [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Native Client.</span></span>  
  
 <span data-ttu-id="6380d-149">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client é uma tecnologia de acesso a dados introduzida no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6380d-149">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client is a data access technology that was introduced in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="6380d-150">Ela reúne o provedor SQLOLEDB e o driver SQLODBC em uma única DLL (dynamic link library) nativa fornecendo, ao mesmo tempo, uma nova funcionalidade separada e diferente do MDAC (Microsoft Data Access Components).</span><span class="sxs-lookup"><span data-stu-id="6380d-150">It combines the SQLOLEDB Provider and the SQLODBC Driver into one native dynamic link library (DLL), while also providing new functionality that is separate and distinct from the Microsoft Data Access Components (MDAC).</span></span>  
  
 <span data-ttu-id="6380d-151">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client pode ser usado para criar novos aplicativos ou aprimorar os aplicativos existentes que precisam aproveitar os recursos introduzidos no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que não são suportados pelo SQLOLEDB e SQLODBC no MDAC e [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="6380d-151">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client can be used to create new applications or enhance existing applications that need to take advantage of features introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that are not supported by SQLOLEDB and SQLODBC in MDAC and [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span></span> <span data-ttu-id="6380d-152">Por exemplo, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client é necessário para os recursos SQLXML do lado do cliente, como FOR XML, para usar o tipo de dados `xml`.</span><span class="sxs-lookup"><span data-stu-id="6380d-152">For example, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client is required for client-side SQLXML features, such as FOR XML, to use the `xml` data type.</span></span> <span data-ttu-id="6380d-153">Para obter mais informações, consulte [formatação XML do lado do cliente &#40;SQLXML 4,0&#41;](formatting/client-side-xml-formatting-sqlxml-4-0.md), [usando o ADO para executar consultas do SQLXML 4,0](using-ado-to-execute-sqlxml-4-0-queries.md)e [SQL Server Native Client programação](../native-client/sql-server-native-client-programming.md).</span><span class="sxs-lookup"><span data-stu-id="6380d-153">For more information, see [Client-side XML Formatting &#40;SQLXML 4.0&#41;](formatting/client-side-xml-formatting-sqlxml-4-0.md), [Using ADO to Execute SQLXML 4.0 Queries](using-ado-to-execute-sqlxml-4-0-queries.md), and [SQL Server Native Client Programming](../native-client/sql-server-native-client-programming.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6380d-154">O SQLXML 4.0 não é totalmente compatível com o SQLXML 3.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-154">SQLXML 4.0 is not completely backward compatible with SQLXML 3.0.</span></span> <span data-ttu-id="6380d-155">Pelo fato de haver algumas correções de bug e outras alterações funcionais, particularmente a remoção do suporte a SQLXML ISAPI, você não pode usar diretórios virtuais IIS com o SQLXML 4.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-155">Because of some bug fixes and other functional changes, particularly the removal of SQLXML ISAPI support, you cannot use IIS virtual directories with SQLXML 4.0.</span></span> <span data-ttu-id="6380d-156">Embora a maioria dos aplicativos será executada com pequenas modificações, você deve testá-los antes de os colocar em produção com o SQLXML 4.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-156">Although most applications will run with minor modifications, you must test them before putting them into production with SQLXML 4.0.</span></span>  
  
## <a name="support-for-data-types-introduced-in-sql-server-2005-and-sql-server-2008"></a><span data-ttu-id="6380d-157">Suporte para tipos de dados introduzidos no SQL Server 2005 e no SQL Server 2008</span><span class="sxs-lookup"><span data-stu-id="6380d-157">Support for Data Types Introduced in SQL Server 2005 and SQL Server 2008</span></span>  
 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]<span data-ttu-id="6380d-158">introduziu o `xml` tipo de dados e o SQLXML 4,0 oferece suporte ao `xml` tipo de dados.</span><span class="sxs-lookup"><span data-stu-id="6380d-158">introduced the `xml` data type, and SQLXML 4.0 supports the `xml` data type.</span></span> <span data-ttu-id="6380d-159">Para obter mais informações, consulte [suporte de tipo de dados XML no SQLXML 4,0](xml-data-type-support-in-sqlxml-4-0.md).</span><span class="sxs-lookup"><span data-stu-id="6380d-159">For more information, see [xml Data Type Support in SQLXML 4.0](xml-data-type-support-in-sqlxml-4-0.md).</span></span>  
  
 <span data-ttu-id="6380d-160">Para obter exemplos de como usar o tipo de dados `xml` no SQLXML durante o mapeamento de exibições XML, o carregamento em massa de dados XML ou a execução de diagramas de atualização XML, consulte os exemplos fornecidos nos tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="6380d-160">For examples of how to use the `xml` data type in SQLXML when mapping XML views, bulk loading XML or executing XML updategrams, refer to examples provided in the following topics.</span></span>  
  
-   [<span data-ttu-id="6380d-161">Mapeamento padrão de elementos e atributos XSD para tabelas e colunas</span><span class="sxs-lookup"><span data-stu-id="6380d-161">Default Mapping of XSD Elements and Attributes to Tables and Columns</span></span>](../sqlxml-annotated-xsd-schemas-using/default-mapping-of-xsd-elements-and-attributes-to-tables-and-columns-sqlxml-4-0.md)  
  
-   [<span data-ttu-id="6380d-162">Inserindo dados usando diagramas de atualização XML</span><span class="sxs-lookup"><span data-stu-id="6380d-162">Inserting Data by Using XML Updategrams</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/updategrams/inserting-data-using-xml-updategrams-sqlxml-4-0.md)  
  
-   [<span data-ttu-id="6380d-163">Exemplos de carregamento em massa de documentos XML</span><span class="sxs-lookup"><span data-stu-id="6380d-163">Examples of Bulk Loading XML Documents</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/xml-bulk-load-examples-sqlxml-4-0.md)  
  
 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]<span data-ttu-id="6380d-164">introduziu `Date, Time` os `DateTime2` tipos de dados,, e **DateTimeOffset** .</span><span class="sxs-lookup"><span data-stu-id="6380d-164">introduced the `Date, Time`, `DateTime2`, and **DateTimeOffset** data types.</span></span> <span data-ttu-id="6380d-165">O SQLXML 4.0 SP1 habilitará esses quatro novos tipos de dados como tipos escalares internos quando usados com o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Native Client OLE DB Provider (SQLNCLI11) que é fornecido com o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6380d-165">SQLXML 4.0 SP1 will enable these four new data types as built-in scalar types when used with [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Native Client OLE DB Provider (SQLNCLI11), which ships in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
## <a name="xml-bulk-load-changes-for-sqlxml-40-sp1"></a><span data-ttu-id="6380d-166">Alterações no XML Bulk Load para o SQLXML 4.0 SP1</span><span class="sxs-lookup"><span data-stu-id="6380d-166">XML Bulk Load Changes for SQLXML 4.0 SP1</span></span>  
  
-   <span data-ttu-id="6380d-167">Para o SQLXML 4,0, o campo de estouro de SchemaGen é criado usando o `xml` tipo de dados.</span><span class="sxs-lookup"><span data-stu-id="6380d-167">For SQLXML 4.0, the SchemaGen overflow field is created using the `xml` data type.</span></span> <span data-ttu-id="6380d-168">Para obter mais informações, consulte [SQL Server modelo de objeto de carregamento em massa XML](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/sql-server-xml-bulk-load-object-model-sqlxml-4-0.md).</span><span class="sxs-lookup"><span data-stu-id="6380d-168">For more information, see [SQL Server XML Bulk Load Object Model](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/sql-server-xml-bulk-load-object-model-sqlxml-4-0.md).</span></span>  
  
-   <span data-ttu-id="6380d-169">Se você tiver criado anteriormente aplicativos do [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic e deseja usar o SQLXML 4.0, deverá recompilar o aplicativo com referência à Xblkld4.dll.</span><span class="sxs-lookup"><span data-stu-id="6380d-169">If you have previously created [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic applications and you want to use SQLXML 4.0, you must recompile the application with reference to Xblkld4.dll.</span></span>  
  
-   <span data-ttu-id="6380d-170">No caso dos aplicativos do Visual Basic Scripting Edition, você deve registrar a DLL que deseja usar.</span><span class="sxs-lookup"><span data-stu-id="6380d-170">For Visual Basic Scripting Edition applications, you must register the DLL you want to use.</span></span> <span data-ttu-id="6380d-171">No seguinte exemplo, se você especificar os ProgIDs independentes de versão, o aplicativo dependerá da última DLL registrada:</span><span class="sxs-lookup"><span data-stu-id="6380d-171">In the following example, if you specify version-independent PROGIDs, the application depends on the last registered DLL:</span></span>  
  
    ```  
    set objBulkLoad = CreateObject("SQLXMLBulkLoad.SQLXMLBulkLoad")   
    ```  
  
    > [!NOTE]  
    >  <span data-ttu-id="6380d-172">O PROGID dependente de versão é o SQLXMLBulkLoad.SQLXMLBulkLoad.4.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-172">The version-dependent PROGID is SQLXMLBulkLoad.SQLXMLBulkLoad.4.0.</span></span>  
  
## <a name="registry-key-changes-for-sqlxml-40"></a><span data-ttu-id="6380d-173">Alterações de chave de registro para o SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="6380d-173">Registry Key Changes for SQLXML 4.0</span></span>  
 <span data-ttu-id="6380d-174">No SQLXML 4.0, as chaves de registro foram alteradas em relação às versões anteriores no seguinte:</span><span class="sxs-lookup"><span data-stu-id="6380d-174">In SQLXML 4.0, the registry keys have changed from the earlier releases to the following:</span></span>  
  
 <span data-ttu-id="6380d-175">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Client\SQLXML4\TemplateCacheSize</span><span class="sxs-lookup"><span data-stu-id="6380d-175">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Client\SQLXML4\TemplateCacheSize</span></span>  
  
 <span data-ttu-id="6380d-176">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Client\SQLXML4\SchemaCacheSize</span><span class="sxs-lookup"><span data-stu-id="6380d-176">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Client\SQLXML4\SchemaCacheSize</span></span>  
  
 <span data-ttu-id="6380d-177">Você deve alterar as configurações se quiser que essas chaves entrem em vigor no SQLXML 4.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-177">You must change the settings if you want these keys to be in effect for SQLXML 4.0.</span></span>  
  
 <span data-ttu-id="6380d-178">Além disso, o SQLXML 4.0 introduz as seguintes chaves de registro:</span><span class="sxs-lookup"><span data-stu-id="6380d-178">In addition, SQLXML 4.0 introduces the following registry keys:</span></span>  
  
-   `HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer\Client\SQLXML4\ReportErrorsWithSQLInfo`  
  
     <span data-ttu-id="6380d-179">Por padrão, o SQLXML 4.0 retorna informações de erros nativos fornecidas pelo OLE DB e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] em vez de um erro SQLXML de nível superior (como nas versões anteriores do SQLXML).</span><span class="sxs-lookup"><span data-stu-id="6380d-179">By default, SQLXML 4.0 returns native error information provided by OLE DB and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instead of a high-level SQLXML error (as was the case in earlier versions of SQLXML).</span></span> <span data-ttu-id="6380d-180">Se você não quiser esse comportamento, o valor desta chave de registro de tipo Dword deverá ser definido como 0 (o padrão é 1).</span><span class="sxs-lookup"><span data-stu-id="6380d-180">If you do not want this behavior, the value of this registry key of type DWORD must be set to 0 (default is 1).</span></span>  
  
-   <span data-ttu-id="6380d-181">HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer\Client\SQLXML4\FORXML_GenerateGUIDBraces</span><span class="sxs-lookup"><span data-stu-id="6380d-181">HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer\Client\SQLXML4\FORXML_GenerateGUIDBraces</span></span>  
  
     <span data-ttu-id="6380d-182">Por padrão, o SQLXML retorna valores GUID do SQL Server sem os colchetes.</span><span class="sxs-lookup"><span data-stu-id="6380d-182">By default, SQLXML return SQL Server GUID values without the enclosing braces.</span></span> <span data-ttu-id="6380d-183">Se você quiser que o valor de GUID retornado com as chaves (por exemplo, {*algum GUID*}), o valor dessa chave do registro deverá ser definido como 1 (o padrão é 0).</span><span class="sxs-lookup"><span data-stu-id="6380d-183">If you want the GUID value returned with the braces (for example, {*some GUID*}), value of this registry key must be set to 1 (default is 0).</span></span>  
  
-   <span data-ttu-id="6380d-184">HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer\Client\SQLXML4\SQL2000CompatMode</span><span class="sxs-lookup"><span data-stu-id="6380d-184">HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer\Client\SQLXML4\SQL2000CompatMode</span></span>  
  
     <span data-ttu-id="6380d-185">Por padrão, quando o analisador XML carrega os dados, os espaços em branco são normalizados de acordo com as regras do XML 1.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-185">By default, when the XML parser loads the data, white spaces are normalized according to the XML 1.0 rules.</span></span> <span data-ttu-id="6380d-186">Isso resulta na perda de alguns dos caracteres com espaço em branco em seus dados.</span><span class="sxs-lookup"><span data-stu-id="6380d-186">This results in loss of some of the white space characters in your data.</span></span> <span data-ttu-id="6380d-187">Assim, a representação textual de seus dados pode não ser a mesma depois da análise, embora os dados sejam semanticamente os mesmos.</span><span class="sxs-lookup"><span data-stu-id="6380d-187">Thus, the textual representation of your data may not be the same after parsing, although semantically the data is the same.</span></span>  
  
     <span data-ttu-id="6380d-188">Essa chave é introduzida para que você possa escolher manter os caracteres com espaço em branco nos dados.</span><span class="sxs-lookup"><span data-stu-id="6380d-188">This key is introduced so that you can choose to keep the white space characters in the data.</span></span> <span data-ttu-id="6380d-189">Se você adicionar essa chave de registro e definir seu valor como 0, os caracteres com espaço em branco (LF, CR e tab) no XML serão retornados codificados em caso de valores de atributo.</span><span class="sxs-lookup"><span data-stu-id="6380d-189">If you add this registry key and set its value to 0, white space characters (LF, CR, and tab) in the XML are returned encoded in case of attribute values.</span></span> <span data-ttu-id="6380d-190">No caso de valores de elemento, somente CR é retornado codificado.</span><span class="sxs-lookup"><span data-stu-id="6380d-190">In case of element values, only CR is returned encoded.</span></span>  
  
     <span data-ttu-id="6380d-191">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="6380d-191">For example:</span></span>  
  
    ```  
    CREATE TABLE T( Col1 int, Col2 nvarchar(100));  
    GO  
    -- Insert data with tab, line feed and carriage return).  
    INSERT INTO T VALUES (1, 'This is a tab    . This is a line feed and CR   
     more text');  
    GO  
    -- Test this query (without the registry key).  
    SELECT * FROM T   
    FOR XML AUTO;  
    -- This is the result (no encoding of special characters).  
    <?xml version="1.0" encoding="utf-8" ?>  
    <r>  
      <T Col1="1"   
         Col2="This is a tab    . This is a line feed and CR   
     more text"/>  
    </r>  
    -- Now add registry key with value 0 and execute the query again.  
    -- Note the encoding for carriage return, line-feed and tab in the attribute value.  
    <?xml version="1.0" encoding="utf-8" ?>  
    <r>  
      <T Col1="1"   
         Col2="This is a tab    . This is a line feed and CR   
     more text"/>  
    </r>  
  
    -- Update the query and specify ELEMENTS directive  
    SELECT * FROM T  
    FOR XML AUTO, ELEMENTS  
    -- Only the carriage return is returned encoded.  
    <?xml version="1.0" encoding="utf-8" ?>  
    <r>  
       <T>  
          <Col1>1</Col1>  
          <Col2>This is a tab    . This is a line feed and CR   
     more text</Col2>  
       </T>  
    </r>  
    ```  
  
## <a name="migration-issues"></a><span data-ttu-id="6380d-192">Problemas de migração</span><span class="sxs-lookup"><span data-stu-id="6380d-192">Migration Issues</span></span>  
 <span data-ttu-id="6380d-193">A seguir, são citadas algumas questões que poderiam impactar a migração de seus aplicativos SQLXML herdados para o SQLXML 4.0.</span><span class="sxs-lookup"><span data-stu-id="6380d-193">The following are issues that could impact migration of your legacy SQLXML applications to SQLXML 4.0.</span></span>  
  
### <a name="ado-and-sqlxml-40-queries"></a><span data-ttu-id="6380d-194">Consultas ADO e SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="6380d-194">ADO and SQLXML 4.0 Queries</span></span>  
 <span data-ttu-id="6380d-195">Nas versões anteriores do SQLXML, havia suporte para a execução de consultas baseadas em URL usando diretórios virtuais IIS e o filtro ISAPI SQLXML.</span><span class="sxs-lookup"><span data-stu-id="6380d-195">In earlier versions of SQLXML, support for URL-based query execution using IIS virtual directories and the SQLXML ISAPI filter was provided.</span></span> <span data-ttu-id="6380d-196">Para aplicativos que usam SQLXML 4.0, este suporte não está mais disponível.</span><span class="sxs-lookup"><span data-stu-id="6380d-196">For applications that use SQLXML 4.0, this support is no longer available.</span></span>  
  
 <span data-ttu-id="6380d-197">Em vez disso, as consultas, modelos e diagramas de atualização SQLXML podem ser executados com as extensões SQLXML para ADO (ActiveX Data Objects) introduzidas pela primeira vez no MDAC (Microsoft Data Access Components) 2.6 e versão posterior.</span><span class="sxs-lookup"><span data-stu-id="6380d-197">Instead, SQLXML queries, templates, and updategrams can be executed by using the SQLXML extensions to ActiveX Data Objects (ADO) first introduced in Microsoft Data Access Components (MDAC) 2.6 and later.</span></span>  
  
 <span data-ttu-id="6380d-198">Para obter mais informações, consulte [usando o ADO para executar consultas do SQLXML 4,0](using-ado-to-execute-sqlxml-4-0-queries.md).</span><span class="sxs-lookup"><span data-stu-id="6380d-198">For more information, see [Using ADO to Execute SQLXML 4.0 Queries](using-ado-to-execute-sqlxml-4-0-queries.md).</span></span>  
  
### <a name="supportability-for-sqlxml-30-isapi-and-data-types-introduced-in-sql-server-2005"></a><span data-ttu-id="6380d-199">Suporte para SQLXML 3.0 ISAPI e tipos de dados introduzidos no SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="6380d-199">Supportability for SQLXML 3.0 ISAPI and Data Types Introduced in SQL Server 2005</span></span>  
 <span data-ttu-id="6380d-200">Como o suporte ISAPI foi removido do SQLXML 4,0, se sua solução exigir os recursos de digitação de dados aprimorados introduzidos no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] [tipo de dados XML](/sql/t-sql/xml/xml-transact-sql) ou [UDTs (tipos de dados definidos pelo usuário)](../../relational-databases/clr-integration-database-objects-user-defined-types/clr-user-defined-types.md) e o acesso baseado na Web, você precisará usar outra solução, como [classes gerenciadas SQLXML](../sqlxml-annotated-xsd-schemas-xpath-queries/net-framework-classes/sqlxml-4-0-net-framework-support-managed-classes.md) ou outro tipo de manipulador http, como serviços Web XML nativos para SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="6380d-200">Because ISAPI support has been removed from SQLXML 4.0, if your solution requires the enhanced data typing features introduced in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] such as the [xml data type](/sql/t-sql/xml/xml-transact-sql) or [user-defined data types (UDTs)](../../relational-databases/clr-integration-database-objects-user-defined-types/clr-user-defined-types.md) and Web-based access, you will need to use another solution such as [SQLXML managed classes](../sqlxml-annotated-xsd-schemas-xpath-queries/net-framework-classes/sqlxml-4-0-net-framework-support-managed-classes.md) or another type of HTTP handler, such as Native XML Web Services for SQL Server 2005.</span></span>  
  
 <span data-ttu-id="6380d-201">Como alternativa, se você não precisar dessas extensões de tipo, poderá continuar a usar o SQLXML 3,0 para conectar-se às [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] instalações do e do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6380d-201">Alternately, if you do not require these type extensions, you can continue to use SQLXML 3.0 to connect to [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] installations.</span></span> <span data-ttu-id="6380d-202">O suporte a SQLXML 3.0 ISAPI funcionará nessas versões mais recentes, mas não suporta nem reconhece o tipo de dados `xml` ou o suporte a tipos de dados UDT introduzido no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6380d-202">The SQLXML 3.0 ISAPI support will work against these later versions but does not support or recognize the `xml` data type or UDT type support introduced in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span>  
  
### <a name="xml-bulk-load-security-changes-for-temporary-files"></a><span data-ttu-id="6380d-203">Alterações de segurança do XML Bulk Load para arquivos temporários</span><span class="sxs-lookup"><span data-stu-id="6380d-203">XML Bulk Load Security Changes for Temporary Files</span></span>  
 <span data-ttu-id="6380d-204">Para o SQLXML 4.0 e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], são concedidas permissões de arquivo do XML Bulk Load ao usuário que executa a operação de carregamento em massa.</span><span class="sxs-lookup"><span data-stu-id="6380d-204">For SQLXML 4.0 and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], XML Bulk Load file permissions are granted to the user executing the bulk load operation.</span></span> <span data-ttu-id="6380d-205">As permissões de leitura e gravação são herdadas do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="6380d-205">Read and Write permissions are inherited from the file system.</span></span> <span data-ttu-id="6380d-206">Nas versões anteriores do SQLXML e SQL Server, o XML Bulk Load em SQLXML criava arquivos temporários que não eram seguros e que podiam ser lidos por qualquer pessoa.</span><span class="sxs-lookup"><span data-stu-id="6380d-206">In previous releases of SQLXML and SQL Server, XML Bulk Load under SQLXML would create temporary files that were not secured and could be readable by anyone.</span></span>  
  
### <a name="migration-issues-for-client-side-for-xml"></a><span data-ttu-id="6380d-207">Problemas de migração para FOR XML do lado do cliente</span><span class="sxs-lookup"><span data-stu-id="6380d-207">Migration Issues for Client-Side FOR XML</span></span>  
 <span data-ttu-id="6380d-208">Devido a alterações no mecanismo de execução, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pode retornar valores diferentes nos metadados de uma tabela base do que seria retornado se a consulta for XML fosse executada em [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6380d-208">Due to changes in the execution engine, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] might return different values in the metadata for a base table than would be returned if the FOR XML query was executed under [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)].</span></span> <span data-ttu-id="6380d-209">Nesses casos, a formatação no lado do cliente dos resultados de consulta FOR XML terá uma saída diferente dependendo da versão em que a consulta estiver sendo executada.</span><span class="sxs-lookup"><span data-stu-id="6380d-209">In cases where this occurs, client-side formatting of the FOR XML query results will have differing output depending on which version the query is run against.</span></span>  
  
 <span data-ttu-id="6380d-210">Se uma consulta FOR XML for executada no lado do cliente com SQLXML 3.0 em uma coluna de tipo de dados `xml`, os dados resultantes serão retornados como uma cadeia de caracteres com entidade completa criada.</span><span class="sxs-lookup"><span data-stu-id="6380d-210">If a FOR XML query is executed client-side using SQLXML 3.0 over an `xml` data type column, the data in the results will come back as a fully entitized string.</span></span> <span data-ttu-id="6380d-211">No SQLXML 4.0, se o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client (SQLNCLI11) for especificado como o provedor, os dados serão retornados como XML.</span><span class="sxs-lookup"><span data-stu-id="6380d-211">In SQLXML 4.0, if the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client (SQLNCLI11) is specified as the provider, the data will be returned as XML.</span></span>  
  
  
