---
title: Restrições exclusivas e restrições de verificação | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- constraints [SQL Server], Visual Database Tools
- Visual Database Tools [SQL Server], constraints
ms.assetid: 637098af-2567-48f8-90f4-b41df059833e
author: stevestein
ms.author: sstein
ms.openlocfilehash: 205e4ae3d6f89f10a933bf357d1eeda458852584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87678678"
---
# <a name="unique-constraints-and-check-constraints"></a><span data-ttu-id="eb435-102">Restrições exclusivas e restrições de verificação</span><span class="sxs-lookup"><span data-stu-id="eb435-102">Unique Constraints and Check Constraints</span></span>
  <span data-ttu-id="eb435-103">Restrições UNIQUE e CHECK são dois tipos de restrições que podem ser usadas para impor a integridade de dados em tabelas do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="eb435-103">UNIQUE constraints and CHECK constraints are two types of constraints that can be used to enforce data integrity in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tables.</span></span> <span data-ttu-id="eb435-104">Esses são objetos de banco de dados importantes.</span><span class="sxs-lookup"><span data-stu-id="eb435-104">These are important database objects.</span></span>  
  
 <span data-ttu-id="eb435-105">Este tópico inclui as seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="eb435-105">This topic contains the following sections.</span></span>  
  
 [<span data-ttu-id="eb435-106">Restrições UNIQUE</span><span class="sxs-lookup"><span data-stu-id="eb435-106">UNIQUE Constraints</span></span>](#Unique)  
  
 [<span data-ttu-id="eb435-107">Restrições CHECK</span><span class="sxs-lookup"><span data-stu-id="eb435-107">CHECK Constraints</span></span>](#Check)  
  
 [<span data-ttu-id="eb435-108">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="eb435-108">Related Tasks</span></span>](#Tasks)  
  
##  <a name="unique-constraints"></a><a name="Unique"></a> <span data-ttu-id="eb435-109">Restrições UNIQUE</span><span class="sxs-lookup"><span data-stu-id="eb435-109">UNIQUE Constraints</span></span>  
 <span data-ttu-id="eb435-110">Restrições são regras que o [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] impõe a você.</span><span class="sxs-lookup"><span data-stu-id="eb435-110">Constraints are rules that the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] enforces for you.</span></span> <span data-ttu-id="eb435-111">Por exemplo, você pode usar as restrições UNIQUE para garantir que não há valores duplicados inseridos em colunas específicas que não participam de uma chave primária.</span><span class="sxs-lookup"><span data-stu-id="eb435-111">For example, you can use UNIQUE constraints to make sure that no duplicate values are entered in specific columns that do not participate in a primary key.</span></span> <span data-ttu-id="eb435-112">Embora a restrição UNIQUE e a restrição PRIMARY KEY impõem exclusividade, use a restrição UNIQUE em vez da restrição PRIMARY KEY quando for impor a exclusividade de uma coluna, ou uma combinação de colunas, que não seja uma chave primária.</span><span class="sxs-lookup"><span data-stu-id="eb435-112">Although both a UNIQUE constraint and a PRIMARY KEY constraint enforce uniqueness, use a UNIQUE constraint instead of a PRIMARY KEY constraint when you want to enforce the uniqueness of a column, or combination of columns, that is not the primary key.</span></span>  
  
 <span data-ttu-id="eb435-113">Diferente das restrições PRIMARY KEY, as restrições UNIQUE permitem o valor NULL.</span><span class="sxs-lookup"><span data-stu-id="eb435-113">Unlike PRIMARY KEY constraints, UNIQUE constraints allow for the value NULL.</span></span> <span data-ttu-id="eb435-114">Porém, como com qualquer valor que participa de uma restrição UNIQUE, só um valor nulo é permitido por coluna.</span><span class="sxs-lookup"><span data-stu-id="eb435-114">However, as with any value participating in a UNIQUE constraint, only one null value is allowed per column.</span></span> <span data-ttu-id="eb435-115">Uma restrição UNIQUE pode ser referenciada por uma restrição FOREIGN KEY.</span><span class="sxs-lookup"><span data-stu-id="eb435-115">A UNIQUE constraint can be referenced by a FOREIGN KEY constraint.</span></span>  
  
 <span data-ttu-id="eb435-116">Quando uma nova restrição UNIQUE é adicionada a uma coluna ou colunas existentes em uma tabela, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] , por padrão, examina os dados existentes nas colunas para certificar-se de que todos os valores são únicos.</span><span class="sxs-lookup"><span data-stu-id="eb435-116">When a UNIQUE constraint is added to an existing column or columns in the table, by default, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] examines the existing data in the columns to make sure all values are unique.</span></span> <span data-ttu-id="eb435-117">Se uma restrição UNIQUE for adicionada a uma coluna que tem valores duplicados, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] retornará um erro e não adicionará a restrição.</span><span class="sxs-lookup"><span data-stu-id="eb435-117">If a UNIQUE constraint is added to a column that has duplicated values, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error and does not add the constraint.</span></span>  
  
 <span data-ttu-id="eb435-118">O [!INCLUDE[ssDE](../../includes/ssde-md.md)] cria automaticamente um índice UNIQUE para impor a exclusividade do requisito da restrição UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="eb435-118">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a UNIQUE index to enforce the uniqueness requirement of the UNIQUE constraint.</span></span> <span data-ttu-id="eb435-119">Portanto, se houver uma tentativa de inserir uma linha duplicada, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] retornará uma mensagem de erro indicando que a restrição UNIQUE foi violada e a linha não será adicionada à tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-119">Therefore, if an attempt to insert a duplicate row is made, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error message that states the UNIQUE constraint has been violated and does not add the row to the table.</span></span> <span data-ttu-id="eb435-120">A menos que um índice clusterizado seja explicitamente especificado, um índice não clusterizado e único é criado por padrão para impor a restrição UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="eb435-120">Unless a clustered index is explicitly specified, a unique, nonclustered index is created by default to enforce the UNIQUE constraint.</span></span>  
  
##  <a name="check-constraints"></a><a name="Check"></a> <span data-ttu-id="eb435-121">Restrições CHECK</span><span class="sxs-lookup"><span data-stu-id="eb435-121">CHECK Constraints</span></span>  
 <span data-ttu-id="eb435-122">Restrições CHECK impõe integridade de domínio limitando os valores aceitos por uma ou mais colunas.</span><span class="sxs-lookup"><span data-stu-id="eb435-122">CHECK constraints enforce domain integrity by limiting the values that are accepted by one or more columns.</span></span> <span data-ttu-id="eb435-123">Você pode criar uma restrição CHECK com qualquer expressão lógica (Booleana) que retorne TRUE ou FALSE com base em operadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="eb435-123">You can create a CHECK constraint with any logical (Boolean) expression that returns TRUE or FALSE based on the logical operators.</span></span> <span data-ttu-id="eb435-124">Por exemplo, o intervalo de valores para uma coluna **salário** pode ser limitado pela criação de uma restrição CHECK, que apenas permite que os dados variem entre US$ 15.000 e US$ 100.000.</span><span class="sxs-lookup"><span data-stu-id="eb435-124">For example, the range of values for a **salary** column can be limited by creating a CHECK constraint that allows for only data that ranges from $15,000 through $100,000.</span></span> <span data-ttu-id="eb435-125">Isto evita que salários sejam digitados além do intervalo de salário regular.</span><span class="sxs-lookup"><span data-stu-id="eb435-125">This prevents salaries from being entered beyond the regular salary range.</span></span> <span data-ttu-id="eb435-126">A expressão lógica seria a seguinte: `salary >= 15000 AND salary <= 100000`.</span><span class="sxs-lookup"><span data-stu-id="eb435-126">The logical expression would be the following: `salary >= 15000 AND salary <= 100000`.</span></span>  
  
 <span data-ttu-id="eb435-127">Você pode aplicar várias restrições CHECK a uma única coluna.</span><span class="sxs-lookup"><span data-stu-id="eb435-127">You can apply multiple CHECK constraints to a single column.</span></span> <span data-ttu-id="eb435-128">Você também pode aplicar uma única restrição CHECK a várias colunas criando-as ao nível de tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-128">You can also apply a single CHECK constraint to multiple columns by creating it at the table level.</span></span> <span data-ttu-id="eb435-129">Por exemplo, uma restrição CHECK de várias colunas poderia ser usada para confirmar que qualquer linha com o valor de coluna **country_region** de **USA** também tenha um valor de dois caracteres na coluna **state** .</span><span class="sxs-lookup"><span data-stu-id="eb435-129">For example, a multiple-column CHECK constraint could be used to confirm that any row with a **country_region** column value of **USA** also has a two-character value in the **state** column.</span></span> <span data-ttu-id="eb435-130">Isto permite que várias condições sejam verificadas em um local.</span><span class="sxs-lookup"><span data-stu-id="eb435-130">This allows for multiple conditions to be checked in one location.</span></span>  
  
 <span data-ttu-id="eb435-131">Restrições CHECK são semelhantes a restrições FOREIGN KEY pelo fato de controlarem os valores colocados em uma coluna.</span><span class="sxs-lookup"><span data-stu-id="eb435-131">CHECK constraints are similar to FOREIGN KEY constraints in that they control the values that are put in a column.</span></span> <span data-ttu-id="eb435-132">A diferença está em como elas determinam quais valores são válidos: restrições FOREIGN KEY obtêm uma lista de valores válidos de uma outra tabela, enquanto que restrições CHECK determinam valores válidos de uma expressão lógica.</span><span class="sxs-lookup"><span data-stu-id="eb435-132">The difference is in how they determine which values are valid: FOREIGN KEY constraints obtain the list of valid values from another table, while CHECK constraints determine the valid values from a logical expression.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="eb435-133">Restrições que incluem conversão de tipo de dados implícita ou explícita podem causar falhas em certas operações.</span><span class="sxs-lookup"><span data-stu-id="eb435-133">Constraints that include implicit or explicit data type conversion may cause certain operations to fail.</span></span> <span data-ttu-id="eb435-134">Por exemplo, tais restrições definidas em tabelas que são fontes de opção de partição podem causar falha na operação ALTER TABLE...SWITCH.</span><span class="sxs-lookup"><span data-stu-id="eb435-134">For example, such constraints defined on tables that are sources of partition switching may cause an ALTER TABLE...SWITCH operation to fail.</span></span> <span data-ttu-id="eb435-135">Evite a conversão de tipo de dados em definições de restrição.</span><span class="sxs-lookup"><span data-stu-id="eb435-135">Avoid data type conversion in constraint definitions.</span></span>  
  
### <a name="limitations-of-check-constraints"></a><span data-ttu-id="eb435-136">Limitações de restrições CHECK</span><span class="sxs-lookup"><span data-stu-id="eb435-136">Limitations of CHECK Constraints</span></span>  
 <span data-ttu-id="eb435-137">As restrições CHECK rejeitam valores avaliados como FALSE.</span><span class="sxs-lookup"><span data-stu-id="eb435-137">CHECK constraints reject values that evaluate to FALSE.</span></span> <span data-ttu-id="eb435-138">Porque valores nulos avaliam a UNKNOWN, a sua presença em expressões pode anular uma restrição.</span><span class="sxs-lookup"><span data-stu-id="eb435-138">Because null values evaluate to UNKNOWN, their presence in expressions may override a constraint.</span></span> <span data-ttu-id="eb435-139">Por exemplo, suponha que você coloque uma restrição em uma `int` coluna **MyColumn** especificando que **MyColumn** pode conter apenas o valor 10 (**MyColumn = 10**).</span><span class="sxs-lookup"><span data-stu-id="eb435-139">For example, suppose you place a constraint on an `int` column **MyColumn** specifying that **MyColumn** can contain only the value 10 (**MyColumn=10**).</span></span> <span data-ttu-id="eb435-140">Se você inserir o valor NULL em **MyColumn**, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserirá NULL e não retornará um erro.</span><span class="sxs-lookup"><span data-stu-id="eb435-140">If you insert the value NULL into **MyColumn**, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts NULL and does not return an error.</span></span>  
  
 <span data-ttu-id="eb435-141">Uma restrição CHECK retorna TRUE quando a condição que está verificando não é FALSE para qualquer linha na tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-141">A CHECK constraint returns TRUE when the condition it is checking is not FALSE for any row in the table.</span></span> <span data-ttu-id="eb435-142">Uma restrição CHECK funciona no nível de linha.</span><span class="sxs-lookup"><span data-stu-id="eb435-142">A CHECK constraint works at the row level.</span></span> <span data-ttu-id="eb435-143">Se a tabela acabou de ser criada e não tiver nenhuma linha, qualquer restrição CHECK nesta tabela é considerada válida.</span><span class="sxs-lookup"><span data-stu-id="eb435-143">If a table that has just been created does not have any rows, any CHECK constraint on this table is considered valid.</span></span> <span data-ttu-id="eb435-144">Esta situação pode produzir resultados inesperados, como no exemplo seguinte.</span><span class="sxs-lookup"><span data-stu-id="eb435-144">This situation can produce unexpected results, as in the following example.</span></span>  
  
```  
CREATE TABLE CheckTbl (col1 int, col2 int);  
GO  
CREATE FUNCTION CheckFnctn()  
RETURNS int  
AS   
BEGIN  
   DECLARE @retval int  
   SELECT @retval = COUNT(*) FROM CheckTbl  
   RETURN @retval  
END;  
GO  
ALTER TABLE CheckTbl  
ADD CONSTRAINT chkRowCount CHECK (dbo.CheckFnctn() >= 1 );  
GO  
```  
  
 <span data-ttu-id="eb435-145">A restrição `CHECK` que está sendo adicionada especifica que deve haver pelo menos uma linha na tabela `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="eb435-145">The `CHECK` constraint being added specifies that there must be at least one row in table `CheckTbl`.</span></span> <span data-ttu-id="eb435-146">Entretanto, porque não há nenhuma linha na tabela para a qual verificar a condição desta restrição, a instrução ALTER TABLE têm êxito.</span><span class="sxs-lookup"><span data-stu-id="eb435-146">However, because there are no rows in the table against which to check the condition of this constraint, the ALTER TABLE statement succeeds.</span></span>  
  
 <span data-ttu-id="eb435-147">Restrições CHECK não são validadas durante instruções DELETE.</span><span class="sxs-lookup"><span data-stu-id="eb435-147">CHECK constraints are not validated during DELETE statements.</span></span> <span data-ttu-id="eb435-148">Portanto, executando instruções DELETE em tabelas com certos tipos de restrições de verificação pode produzir resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="eb435-148">Therefore, executing DELETE statements on tables with certain types of check constraints may produce unexpected results.</span></span> <span data-ttu-id="eb435-149">Por exemplo, considere as instruções a seguir executadas na tabela `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="eb435-149">For example, consider the following statements executed on table `CheckTbl`.</span></span>  
  
```  
INSERT INTO CheckTbl VALUES (10, 10);  
GO  
DELETE CheckTbl WHERE col1 = 10;  
```  
  
 <span data-ttu-id="eb435-150">A instrução `DELETE` tem êxito, embora a restrição `CHECK` especifique qual tabela `CheckTbl` deva ter pelo menos `1` linha.</span><span class="sxs-lookup"><span data-stu-id="eb435-150">The `DELETE` statement succeeds, even though the `CHECK` constraint specifies that table `CheckTbl` must have at least `1` row.</span></span>  
  
##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="eb435-151">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="eb435-151">Related Tasks</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="eb435-152">Se a tabela for publicada para replicação, você precisará fazer alterações no esquema usando a instrução Transact-SQL [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) ou o SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="eb435-152">If the table is published for replication, you must make schema changes using the Transact-SQL statement [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) or SQL Server Management Objects (SMO).</span></span> <span data-ttu-id="eb435-153">Ao fazer alterações no esquema com o Criador de Tabelas ou com o Criador do Diagrama de Banco de Dados, ele tenta descartar e recriar a tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-153">When schema changes are made using the Table Designer or the Database Diagram Designer, it attempts to drop and recreate the table.</span></span> <span data-ttu-id="eb435-154">Não é possível descartar objetos publicados, portanto, haverá falha na alteração de esquema.</span><span class="sxs-lookup"><span data-stu-id="eb435-154">You cannot drop published objects, therefore the schema change will fail.</span></span>  
  
|<span data-ttu-id="eb435-155">Tarefa</span><span class="sxs-lookup"><span data-stu-id="eb435-155">Task</span></span>|<span data-ttu-id="eb435-156">Tópico</span><span class="sxs-lookup"><span data-stu-id="eb435-156">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="eb435-157">Descreve como criar uma restrição exclusiva.</span><span class="sxs-lookup"><span data-stu-id="eb435-157">Describes how to create a unique constraint.</span></span>|[<span data-ttu-id="eb435-158">Criar restrições exclusivas</span><span class="sxs-lookup"><span data-stu-id="eb435-158">Create Unique Constraints</span></span>](../tables/create-unique-constraints.md)|  
|<span data-ttu-id="eb435-159">Descreve como modificar uma restrição exclusiva.</span><span class="sxs-lookup"><span data-stu-id="eb435-159">Describes how to modify a unique constraint.</span></span>|[<span data-ttu-id="eb435-160">Modificar restrições exclusivas</span><span class="sxs-lookup"><span data-stu-id="eb435-160">Modify Unique Constraints</span></span>](../tables/modify-unique-constraints.md)|  
|<span data-ttu-id="eb435-161">Descreve como excluir uma restrição exclusiva.</span><span class="sxs-lookup"><span data-stu-id="eb435-161">Describes how to delete a unique constraint.</span></span>|[<span data-ttu-id="eb435-162">Excluir restrições exclusivas</span><span class="sxs-lookup"><span data-stu-id="eb435-162">Delete Unique Constraints</span></span>](../tables/delete-unique-constraints.md)|  
|<span data-ttu-id="eb435-163">Descreve como desabilitar uma restrição de verificação quando um agente de replicação insere ou atualiza dados em sua tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-163">Describes how to disable a check constraint when a replication agent inserts or updates data in your table.</span></span>|[<span data-ttu-id="eb435-164">Desabilitar verificação de restrições para replicação</span><span class="sxs-lookup"><span data-stu-id="eb435-164">Disable Check Constraints for Replication</span></span>](../tables/disable-check-constraints-for-replication.md)|  
|<span data-ttu-id="eb435-165">Descreve como desabilitar uma restrição de verificação quando dados são adicionados, atualizados ou excluídos de uma tabela.</span><span class="sxs-lookup"><span data-stu-id="eb435-165">Describes how to disable a check constraint when data is added to, updated in, or deleted from a table.</span></span>|[<span data-ttu-id="eb435-166">Desabilitar restrições de verificação com instruções INSERT e UPDATE</span><span class="sxs-lookup"><span data-stu-id="eb435-166">Disable Check Constraints with INSERT and UPDATE Statements</span></span>](../tables/disable-check-constraints-with-insert-and-update-statements.md)|  
|<span data-ttu-id="eb435-167">Descreve como alterar a expressão de restrição ou as opções que habilitam ou desabilitam a restrição para condições específicas.</span><span class="sxs-lookup"><span data-stu-id="eb435-167">Describes how to change the constraint expression or the options that enable or disable the constraint for specific conditions.</span></span>|[<span data-ttu-id="eb435-168">Modificar restrições de verificação</span><span class="sxs-lookup"><span data-stu-id="eb435-168">Modify Check Constraints</span></span>](../tables/modify-check-constraints.md)|  
|<span data-ttu-id="eb435-169">Descreve como excluir uma restrição de verificação.</span><span class="sxs-lookup"><span data-stu-id="eb435-169">Describes how to delete a check constraint.</span></span>|[<span data-ttu-id="eb435-170">Excluir restrições de verificação</span><span class="sxs-lookup"><span data-stu-id="eb435-170">Delete Check Constraints</span></span>](../tables/delete-check-constraints.md)|  
|<span data-ttu-id="eb435-171">Descreve como exibir as propriedades de uma restrição de verificação.</span><span class="sxs-lookup"><span data-stu-id="eb435-171">Describes how to view the properties of a check constraint.</span></span>|[<span data-ttu-id="eb435-172">Restrições exclusivas e restrições de verificação</span><span class="sxs-lookup"><span data-stu-id="eb435-172">Unique Constraints and Check Constraints</span></span>](../tables/unique-constraints-and-check-constraints.md)|  
  
  
