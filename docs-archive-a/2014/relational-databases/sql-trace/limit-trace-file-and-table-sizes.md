---
title: Limitar o tamanho de tabelas e arquivos de rastreamento | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- maximum file size for traces
- traces [SQL Server], file size
- size [SQL Server], tables
- file rollover option [SQL Server]
- size [SQL Server], files
ms.assetid: 88c31b02-f44c-4a14-be8b-437f2097de12
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b7795dfdadb8fb3bbaa1b55dcd5c962d24a7ba29
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87575765"
---
# <a name="limit-trace-file-and-table-sizes"></a><span data-ttu-id="a77fd-102">Limitar o tamanho de arquivos e tabelas de rastreamento</span><span class="sxs-lookup"><span data-stu-id="a77fd-102">Limit Trace File and Table Sizes</span></span>
  <span data-ttu-id="a77fd-103">Os resultados do Rastreamento do SQL variam em tamanho, dependendo das classes de evento incluídas e da forma com que o [!INCLUDE[ssDE](../../includes/ssde-md.md)] é usado.</span><span class="sxs-lookup"><span data-stu-id="a77fd-103">SQL Trace results vary in size depending on the event classes that are included in the trace and the way in which the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is used.</span></span> <span data-ttu-id="a77fd-104">Se você rastreia classes de evento que ocorrem com frequência, é possível minimizar a quantidade de dados coletados pelo rastreamento definindo o tamanho máximo de arquivo ou o número máximo de linhas.</span><span class="sxs-lookup"><span data-stu-id="a77fd-104">If you trace event classes that occur frequently, you can minimize the amount of data that the trace collects by setting the maximum file size or the maximum number of rows.</span></span> <span data-ttu-id="a77fd-105">Especificando o tamanho máximo de arquivo ou de linhas, garante-se que o arquivo ou tabela de rastreamento não ultrapassem esse limite.</span><span class="sxs-lookup"><span data-stu-id="a77fd-105">By specifying the maximum file size or rows, you ensure that the trace file or table will not grow beyond the specified limit.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a77fd-106">Se os dados do rastreamento forem salvos em um arquivo que já existe, é possível adicionar dados ao arquivo ou substituir os que ele contém.</span><span class="sxs-lookup"><span data-stu-id="a77fd-106">If you save trace data to a file that already exists, you can append data to the file or overwrite the file.</span></span> <span data-ttu-id="a77fd-107">Se optar por acrescentar os dados ao arquivo e o arquivo de rastreamento atingir ou exceder o tamanho máximo especificado, você será notificado e terá a oportunidade de aumentar o tamanho máximo de arquivo ou especificar um novo arquivo.</span><span class="sxs-lookup"><span data-stu-id="a77fd-107">If you choose to append data to the file, and the trace file already meets or exceeds the specified maximum file size, you are notified and given the opportunity either to increase the maximum file size or specify a new file.</span></span> <span data-ttu-id="a77fd-108">O mesmo vale para tabelas de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a77fd-108">The same is true for trace tables.</span></span>  
  
## <a name="maximum-file-size"></a><span data-ttu-id="a77fd-109">Tamanho máximo do arquivo</span><span class="sxs-lookup"><span data-stu-id="a77fd-109">Maximum File Size</span></span>  
 <span data-ttu-id="a77fd-110">Um rastreamento que possua tamanho máximo de arquivo parará de salvar informações no arquivo assim que esse tamanho for alcançado.</span><span class="sxs-lookup"><span data-stu-id="a77fd-110">A trace that has a maximum file size stops saving trace information to the file after the maximum file size has been reached.</span></span> <span data-ttu-id="a77fd-111">Esta opção permite-lhe agrupar eventos em arquivos menores e mais fáceis de gerenciar.</span><span class="sxs-lookup"><span data-stu-id="a77fd-111">This option allows you to group events into smaller, more manageable files.</span></span> <span data-ttu-id="a77fd-112">Além disso, limitar o tamanho do arquivo torna mais segura a execução de rastreamentos autônomos, pois o rastreamento é interrompido quando o tamanho máximo de arquivo é alcançado.</span><span class="sxs-lookup"><span data-stu-id="a77fd-112">In addition, limiting file size makes it safer to run unattended traces, because the trace stops when the maximum file size is reached.</span></span> <span data-ttu-id="a77fd-113">Você pode definir o tamanho máximo de arquivos para rastreamentos criados por meio de procedimentos armazenados Transact-SQL ou usando o [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a77fd-113">You can set the maximum file size for traces created by means of Transact-SQL stored procedures or by using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
 <span data-ttu-id="a77fd-114">Há um limite de 1 gigabyte (GB) para a opção de tamanho máximo de arquivo.</span><span class="sxs-lookup"><span data-stu-id="a77fd-114">There is an upper limit of 1 gigabyte (GB) for the maximum file size option.</span></span> <span data-ttu-id="a77fd-115">O tamanho máximo de arquivo padrão é de 5 megabytes (MB).</span><span class="sxs-lookup"><span data-stu-id="a77fd-115">The default maximum file size is 5 megabytes (MB).</span></span>  
  
### <a name="enabling-file-rollover"></a><span data-ttu-id="a77fd-116">Habilitando a substituição de arquivo</span><span class="sxs-lookup"><span data-stu-id="a77fd-116">Enabling File Rollover</span></span>  
 <span data-ttu-id="a77fd-117">A opção de substituição de arquivo faz com que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] feche o arquivo atual e crie um novo arquivo quando o tamanho máximo é atingido.</span><span class="sxs-lookup"><span data-stu-id="a77fd-117">The file rollover option causes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to close the current file and create a new file when the maximum file size is reached.</span></span> <span data-ttu-id="a77fd-118">O novo arquivo tem o mesmo nome do anterior mais um número inteiro, que é adicionado ao nome para indicar a sequência.</span><span class="sxs-lookup"><span data-stu-id="a77fd-118">The new file has the same name as the previous file, but an integer is appended to the name to indicate its sequence.</span></span> <span data-ttu-id="a77fd-119">Por exemplo, se o arquivo de rastreamento original for nomeado nomedoarquivo_1.trc, o próximo arquivo de rastreamento será nomedoarquivo_2.trc, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a77fd-119">For example, if the original trace file is named filename_1.trc, the next trace file is filename_2.trc, and so on.</span></span> <span data-ttu-id="a77fd-120">Se o nome atribuído a um novo arquivo de substituição já estiver sendo usado por um arquivo existente, este último será substituído, exceto se for somente leitura.</span><span class="sxs-lookup"><span data-stu-id="a77fd-120">If the name assigned to a new rollover file is already used by an existing file, the existing file is overwritten unless it is read only.</span></span> <span data-ttu-id="a77fd-121">A opção de substituição de arquivo é habilitada por padrão quando você salva dados de rastreamento em um arquivo.</span><span class="sxs-lookup"><span data-stu-id="a77fd-121">The file rollover option is enabled by default when you are saving trace data to a file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a77fd-122">Com a opção de substituição de arquivo ativada, o rastreamento continua até que seja interrompido de alguma outra maneira.</span><span class="sxs-lookup"><span data-stu-id="a77fd-122">With the file rollover option on, the trace continues until it is stopped by some other means.</span></span> <span data-ttu-id="a77fd-123">Para interromper o rastreamento quando o limite de tamanho de arquivo for atingido, desabilite a opção de substituição de arquivo.</span><span class="sxs-lookup"><span data-stu-id="a77fd-123">To stop the trace after you have reached the file size limit, disable the file rollover option.</span></span>  
  
 <span data-ttu-id="a77fd-124">**Para definir um tamanho máximo para um arquivo de rastreamento**</span><span class="sxs-lookup"><span data-stu-id="a77fd-124">**To set a maximum file size for a trace file**</span></span>  
  
 [<span data-ttu-id="a77fd-125">Definir um tamanho máximo para um arquivo de rastreamento &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a77fd-125">Set a Maximum File Size for a Trace File &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/set-a-maximum-file-size-for-a-trace-file-sql-server-profiler.md)  
  
## <a name="maximum-number-of-rows"></a><span data-ttu-id="a77fd-126">Número máximo de linhas</span><span class="sxs-lookup"><span data-stu-id="a77fd-126">Maximum Number of Rows</span></span>  
 <span data-ttu-id="a77fd-127">Um rastreamento que possui um número máximo de linhas para de salvar informações na tabela assim que esse número é atingido.</span><span class="sxs-lookup"><span data-stu-id="a77fd-127">A trace with a maximum number of rows stops saving trace information to a table after the maximum number of rows has been reached.</span></span> <span data-ttu-id="a77fd-128">Cada evento constitui uma linha; logo, este parâmetro define um limite para o número de eventos coletados.</span><span class="sxs-lookup"><span data-stu-id="a77fd-128">Each event constitutes one row, so this parameter sets a limit on the number of events that are gathered.</span></span> <span data-ttu-id="a77fd-129">Definir o número máximo de linhas facilita a execução de rastreamentos autônomos.</span><span class="sxs-lookup"><span data-stu-id="a77fd-129">Setting the maximum number of rows makes it easier to run unattended traces.</span></span> <span data-ttu-id="a77fd-130">Por exemplo, se for preciso iniciar um rastreamento que salva dados em uma tabela, mas você desejar interrompê-lo se a tabela se tornar grande demais, isso pode ser feito automaticamente.</span><span class="sxs-lookup"><span data-stu-id="a77fd-130">For example, if you need to start a trace that saves trace data to a table, but you want to stop the trace if the table becomes too large, you can do so automatically.</span></span>  
  
 <span data-ttu-id="a77fd-131">Quando for especificado um número máximo de linhas e esse número for atingido, o rastreamento continuará a ser executado enquanto o [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] estiver em execução, mas as informações deixarão de ser registradas.</span><span class="sxs-lookup"><span data-stu-id="a77fd-131">When the maximum number of rows is specified and the maximum number of rows has been reached, the trace continues to run while [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] is running, but the trace information is no longer recorded.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="a77fd-132">continuará a exibir os resultados do rastreamento até que este seja interrompido.</span><span class="sxs-lookup"><span data-stu-id="a77fd-132">continues to display the trace results until the trace stops.</span></span>  
  
 <span data-ttu-id="a77fd-133">**Para definir um número máximo de linhas para um rastreamento**</span><span class="sxs-lookup"><span data-stu-id="a77fd-133">**To set a maximum number of rows for a trace**</span></span>  
  
 [<span data-ttu-id="a77fd-134">Definir um tamanho máximo para uma tabela de rastreamento &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a77fd-134">Set a Maximum Table Size for a Trace Table &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/set-a-maximum-table-size-for-a-trace-table-sql-server-profiler.md)  
  
## <a name="see-also"></a><span data-ttu-id="a77fd-135">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="a77fd-135">See Also</span></span>  
 [<span data-ttu-id="a77fd-136">sp_trace_create &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="a77fd-136">sp_trace_create &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql)  
  
  
