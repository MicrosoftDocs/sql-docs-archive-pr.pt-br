---
title: Resolver problemas de memória insuficiente | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: f855e931-7502-44bd-8a8b-b8543645c7f4
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: f5f57725d559b0cd62679550e2bb7c04dbd7e2bd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87572559"
---
# <a name="resolve-out-of-memory-issues"></a><span data-ttu-id="bee33-102">Resolver problemas de memória insuficiente</span><span class="sxs-lookup"><span data-stu-id="bee33-102">Resolve Out Of Memory Issues</span></span>
  [!INCLUDE[hek_1](../../includes/hek-1-md.md)] <span data-ttu-id="bee33-103">usa mais memória e de maneiras diferentes que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bee33-103">uses more memory and in different ways than does [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="bee33-104">É possível que a quantidade de memória que você instalou e atribuiu para o [!INCLUDE[hek_2](../../includes/hek-2-md.md)] torne-se inadequada para suas necessidades de crescimento.</span><span class="sxs-lookup"><span data-stu-id="bee33-104">It is possible that the amount of memory you installed and allocated for [!INCLUDE[hek_2](../../includes/hek-2-md.md)] becomes inadequate for your growing needs.</span></span> <span data-ttu-id="bee33-105">Se for o caso, você pode ficar sem memória.</span><span class="sxs-lookup"><span data-stu-id="bee33-105">If so, you could run out of memory.</span></span> <span data-ttu-id="bee33-106">Este tópico aborda como se recuperar de uma situação de OOM.</span><span class="sxs-lookup"><span data-stu-id="bee33-106">This topic covers how to recover from an OOM situation.</span></span> <span data-ttu-id="bee33-107">Veja [Monitorar e solucionar problemas de uso da memória](monitor-and-troubleshoot-memory-usage.md) para obter diretrizes que podem ajudá-lo a evitar várias situações de OOM.</span><span class="sxs-lookup"><span data-stu-id="bee33-107">See [Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) for guidance that can help you avoid many OOM situations.</span></span>  
  
## <a name="covered-in-this-topic"></a><span data-ttu-id="bee33-108">Tópicos abordados</span><span class="sxs-lookup"><span data-stu-id="bee33-108">Covered in this topic</span></span>  
  
|<span data-ttu-id="bee33-109">Tópico</span><span class="sxs-lookup"><span data-stu-id="bee33-109">Topic</span></span>|<span data-ttu-id="bee33-110">Visão geral</span><span class="sxs-lookup"><span data-stu-id="bee33-110">Overview</span></span>|  
|-----------|--------------|  
| [<span data-ttu-id="bee33-111">Resolver falhas de restauração de banco de dados devido a OOM</span><span class="sxs-lookup"><span data-stu-id="bee33-111">Resolve database restore failures due to OOM</span></span>](#resolve-database-restore-failures-due-to-oom) |<span data-ttu-id="bee33-112">O que fazer se você receber a mensagem de erro, "Falha na operação de restauração para o banco de dados ' *\<databaseName>* ' devido à memória insuficiente no pool de recursos ' *\<resourcePoolName>* '".</span><span class="sxs-lookup"><span data-stu-id="bee33-112">What to do if you get the error message, "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'."</span></span>|  
| [<span data-ttu-id="bee33-113">Resolver o impacto de pouca memória ou condições de OOM na carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="bee33-113">Resolve impact of low memory or OOM conditions on the workload</span></span>](#resolve-impact-of-low-memory-or-oom-conditions-on-the-workload)|<span data-ttu-id="bee33-114">O que fazer se você desconfiar que os problemas de pouca memória estão comprometendo o desempenho.</span><span class="sxs-lookup"><span data-stu-id="bee33-114">What to do if you find low memory issues are negatively impacting performance.</span></span>|  
| [<span data-ttu-id="bee33-115">Resolver falhas de alocação de página devido à memória insuficiente quando há memória suficiente disponível</span><span class="sxs-lookup"><span data-stu-id="bee33-115">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>](#resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available) |<span data-ttu-id="bee33-116">O que fazer se você receber a mensagem de erro, "Cancelando as alocações de página do banco de dados ' *\<databaseName>* ' devido à memória insuficiente no pool de recursos ' *\<resourcePoolName>* '.</span><span class="sxs-lookup"><span data-stu-id="bee33-116">What to do if you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="bee33-117">...” quando a memória disponível é suficiente para a operação.</span><span class="sxs-lookup"><span data-stu-id="bee33-117">..." when available memory is sufficient for the operation.</span></span>|  
  
## <a name="resolve-database-restore-failures-due-to-oom"></a><span data-ttu-id="bee33-118">Resolver falhas de restauração de banco de dados devido a OOM</span><span class="sxs-lookup"><span data-stu-id="bee33-118">Resolve database restore failures due to OOM</span></span>  
 <span data-ttu-id="bee33-119">Ao tentar restaurar um banco de dados, você pode receber a mensagem de erro: "falha na operação de restauração do banco de dados ' *\<databaseName>* ' devido à memória insuficiente no pool de recursos ' *\<resourcePoolName>* '." Antes de restaurar com êxito o banco de dados, você deve resolver o problema de memória insuficiente disponibilizando mais memória.</span><span class="sxs-lookup"><span data-stu-id="bee33-119">When you attempt to restore a database you may get the error message: "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'." Before you can successfully restore the database you must resolve the insufficient memory issue by making more memory available.</span></span>  
  
 <span data-ttu-id="bee33-120">Para resolver a falha de recuperação devido a OOM, aumente a memória disponível usando qualquer ou todos esses meios para aumentar temporariamente a memória disponível para a operação de recuperação.</span><span class="sxs-lookup"><span data-stu-id="bee33-120">To resolve recovery failure due to OOM increase available memory using any or al of these means to temporarily increase memory available for the recovery operation.</span></span>  
  
-   <span data-ttu-id="bee33-121">Feche temporariamente os aplicativos em execução.</span><span class="sxs-lookup"><span data-stu-id="bee33-121">Temporarily close running applications.</span></span>   
    <span data-ttu-id="bee33-122">Ao fechar um ou mais aplicativos em execução, como Visual Studio, Internet Explorer, OneNote e outros, você disponibiliza a memória que eles estavam usando para a operação de restauração.</span><span class="sxs-lookup"><span data-stu-id="bee33-122">By closing one or more running applications, such as Visual Studio, Internet Explorer, OneNote, and others, you make the memory they were using available for the restore operation.</span></span> <span data-ttu-id="bee33-123">Você poderá reiniciá-los após a restauração bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="bee33-123">You can restart them following the successful restore.</span></span>  
  
-   <span data-ttu-id="bee33-124">Aumente o valor de MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="bee33-124">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
    <span data-ttu-id="bee33-125">Este snippet de código altera MAX_MEMORY_PERCENT para o pool de recursos PoolHk para 70% de memória instalada.</span><span class="sxs-lookup"><span data-stu-id="bee33-125">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="bee33-126">Se o servidor estiver sendo executado em uma máquina virtual e não for dedicado, defina o valor de MIN_MEMORY_PERCENT para o mesmo valor de MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="bee33-126">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT to the same value as MAX_MEMORY_PERCENT.</span></span>   
    > <span data-ttu-id="bee33-127">Confira o tópico [Melhores práticas: usar OLTP in-memory em um ambiente de VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="bee33-127">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
    ```sql  
  
    -- disable resource governor  
    ALTER RESOURCE GOVERNOR DISABLE  
  
    -- change the value of MAX_MEMORY_PERCENT  
    ALTER RESOURCE POOL PoolHk  
    WITH  
         ( MAX_MEMORY_PERCENT = 70 )  
    GO  
  
    -- reconfigure the Resource Governor  
    --    RECONFIGURE enables resource governor  
    ALTER RESOURCE GOVERNOR RECONFIGURE  
    GO  
  
    ```  
  
     <span data-ttu-id="bee33-128">Para obter informações sobre os valores máximos para MAX_MEMORY_PERCENT consulte a seção [de tópico porcentagem de memória disponível para índices e tabelas com otimização de memória](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes)</span><span class="sxs-lookup"><span data-stu-id="bee33-128">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes)</span></span>
  
-   <span data-ttu-id="bee33-129">Reconfigure a **memória máxima do servidor**.</span><span class="sxs-lookup"><span data-stu-id="bee33-129">Reconfigure **max server memory**.</span></span>  
    <span data-ttu-id="bee33-130">Para obter informações sobre como configurar **max server memory** , veja o tópico [Otimizando o desempenho do servidor usando opções de configuração de memória](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span><span class="sxs-lookup"><span data-stu-id="bee33-130">For information on configuring **max server memory** see the topic [Optimizing Server Performance Using Memory Configuration Options](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span></span>  
  
## <a name="resolve-impact-of-low-memory-or-oom-conditions-on-the-workload"></a><span data-ttu-id="bee33-131">Resolver o impacto de pouca memória ou condições de OOM na carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="bee33-131">Resolve impact of low memory or OOM conditions on the workload</span></span>  
 <span data-ttu-id="bee33-132">Obviamente, é melhor não ficar com pouca memória ou na situação de OOM (memória insuficiente).</span><span class="sxs-lookup"><span data-stu-id="bee33-132">Obviously, it is best to not get into a low memory or OOM (Out of Memory) situation.</span></span> <span data-ttu-id="bee33-133">Um bom planejamento e monitoramento pode ajudar a evitar situações de OOM.</span><span class="sxs-lookup"><span data-stu-id="bee33-133">Good planning and monitoring can help avoid OOM situations.</span></span> <span data-ttu-id="bee33-134">Ainda assim, o melhor planejamento nem sempre prevê o que realmente acontece e você pode acabar com pouca memória ou OOM.</span><span class="sxs-lookup"><span data-stu-id="bee33-134">Still, the best planning does not always foresee what actually happens and you might end up with low memory or OOM.</span></span> <span data-ttu-id="bee33-135">Há duas etapas para a recuperação de OOM:</span><span class="sxs-lookup"><span data-stu-id="bee33-135">There are two steps to recovering from OOM:</span></span>  
  
1.  [<span data-ttu-id="bee33-136">Abrir uma DAC (Conexão de Administrador Dedicada)</span><span class="sxs-lookup"><span data-stu-id="bee33-136">Open a DAC (Dedicated Administrator Connection)</span></span>](#open-a-dac-dedicated-administrator-connection) 
  
2.  [<span data-ttu-id="bee33-137">Realizar a ação corretiva</span><span class="sxs-lookup"><span data-stu-id="bee33-137">Take corrective action</span></span>](#take-corrective-action) 
  
### <a name="open-a-dac-dedicated-administrator-connection"></a><span data-ttu-id="bee33-138">Abrir uma DAC (Conexão de Administrador Dedicada)</span><span class="sxs-lookup"><span data-stu-id="bee33-138">Open a DAC (Dedicated Administrator Connection)</span></span>  
 <span data-ttu-id="bee33-139">O Microsoft SQL Server fornece uma DAC (conexão de administrador dedicada).</span><span class="sxs-lookup"><span data-stu-id="bee33-139">Microsoft SQL Server provides a dedicated administrator connection (DAC).</span></span> <span data-ttu-id="bee33-140">A DAC permite que um administrador acesse uma instância em execução do Mecanismo de Banco de Dados do SQL Server para solucionar problemas no servidor, mesmo quando o servidor não está respondendo às conexões de outro cliente.</span><span class="sxs-lookup"><span data-stu-id="bee33-140">The DAC allows an administrator to access a running instance of SQL Server Database Engine to troubleshoot problems on the server-even when the server is unresponsive to other client connections.</span></span> <span data-ttu-id="bee33-141">A DAC está disponível com o utilitário do `sqlcmd` e o SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="bee33-141">The DAC is available through the `sqlcmd` utility and SQL Server Management Studio (SSMS).</span></span>  
  
 <span data-ttu-id="bee33-142">Para obter orientação sobre como usar o `sqlcmd` e o DAC, veja [Usando uma conexão de administrador dedicada](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="bee33-142">For guidance on using `sqlcmd` and DAC see [Using a Dedicated Administrator Connection](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span> <span data-ttu-id="bee33-143">Para obter orientação sobre como usar o DAC por meio do SSMS, veja [Como usar a conexão de administrador dedicada com o SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span><span class="sxs-lookup"><span data-stu-id="bee33-143">For guidance on using DAC through SSMS see [How to: Use the Dedicated Administrator Connection with SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span></span>  
  
### <a name="take-corrective-action"></a><span data-ttu-id="bee33-144">Realizar a ação corretiva</span><span class="sxs-lookup"><span data-stu-id="bee33-144">Take corrective action</span></span>  
 <span data-ttu-id="bee33-145">Para resolver a sua condição de OOM, você precisa ou liberar memória existente reduzindo o uso ou disponibilizar mais memória para as tabelas de memória.</span><span class="sxs-lookup"><span data-stu-id="bee33-145">To resolve your OOM condition you need to either free up existing memory by reducing usage, or make more memory available to your in-memory tables.</span></span>  
  
#### <a name="free-up-existing-memory"></a><span data-ttu-id="bee33-146">Liberar memória existente</span><span class="sxs-lookup"><span data-stu-id="bee33-146">Free up existing memory</span></span>  
  
##### <a name="delete-non-essential-memory-optimized-table-rows-and-wait-for-garbage-collection"></a><span data-ttu-id="bee33-147">Excluir linhas não essenciais da tabela com otimização de memória e aguardar a coleta de lixo</span><span class="sxs-lookup"><span data-stu-id="bee33-147">Delete non-essential memory optimized table rows and wait for garbage collection</span></span>  
 <span data-ttu-id="bee33-148">Você pode remover as linhas não essenciais de uma tabela com otimização de memória.</span><span class="sxs-lookup"><span data-stu-id="bee33-148">You can remove non-essential rows from a memory optimized table.</span></span> <span data-ttu-id="bee33-149">O coletor de lixo retorna a memória usada por essas linhas para a memória disponível.</span><span class="sxs-lookup"><span data-stu-id="bee33-149">The garbage collector returns the memory used by these rows to available memory.</span></span> <span data-ttu-id="bee33-150">.</span><span class="sxs-lookup"><span data-stu-id="bee33-150">.</span></span> <span data-ttu-id="bee33-151">O mecanismo de OLTP na memória coleta linhas de lixo de maneira agressiva.</span><span class="sxs-lookup"><span data-stu-id="bee33-151">In-memory OLTP engine collects garbage rows aggressively.</span></span> <span data-ttu-id="bee33-152">No entanto, uma transação demorada poderá evitar a coleta de lixo.</span><span class="sxs-lookup"><span data-stu-id="bee33-152">However, a long running transaction can prevent garbage collection.</span></span> <span data-ttu-id="bee33-153">Por exemplo, se você tiver uma transação que é executada durante 5 minutos, todas as versões de linha criadas por causa das operações de atualização/exclusão enquanto a transação estava ativa não poderão ser limpas.</span><span class="sxs-lookup"><span data-stu-id="bee33-153">For example, if you have a transaction that runs for 5 minutes, any row versions created due to update/delete operations while the transaction was active can't be garbage collected.</span></span>  
  
##### <a name="move-one-or-more-rows-to-a-disk-based-table"></a><span data-ttu-id="bee33-154">Mover uma ou mais linhas a uma tabela baseada em disco</span><span class="sxs-lookup"><span data-stu-id="bee33-154">Move one or more rows to a disk-based table</span></span>  
 <span data-ttu-id="bee33-155">Os seguintes artigos da TechNet fornecem orientação sobre como mover linhas de uma tabela com otimização de memória para uma tabela baseada em disco.</span><span class="sxs-lookup"><span data-stu-id="bee33-155">The following TechNet articles provide guidance on moving rows from a memory-optimized table to a disk-based table.</span></span>  
  
-   <span data-ttu-id="bee33-156">[Particionamento de nível de aplicativo](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="bee33-156">[Application-Level Partitioning](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span></span>  
  
-   <span data-ttu-id="bee33-157">[Padrão de aplicativo para particionamento de tabelas com otimização de memória](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="bee33-157">[Application Pattern for Partitioning Memory-Optimized Tables](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span></span>  
  
#### <a name="increase-available-memory"></a><span data-ttu-id="bee33-158">Aumentar a memória disponível</span><span class="sxs-lookup"><span data-stu-id="bee33-158">Increase available memory</span></span>  
  
##### <a name="increase-value-of-max_memory_percent-on-the-resource-pool"></a><span data-ttu-id="bee33-159">Aumentar o valor de MAX_MEMORY_PERCENT no pool de recursos</span><span class="sxs-lookup"><span data-stu-id="bee33-159">Increase value of MAX_MEMORY_PERCENT on the resource pool</span></span>  
 <span data-ttu-id="bee33-160">Se você não criou um pool de recursos nomeado para as tabelas de memória, deverá fazer isso e associar seus bancos de dados do [!INCLUDE[hek_2](../../includes/hek-2-md.md)] a ele.</span><span class="sxs-lookup"><span data-stu-id="bee33-160">If you have not created a named resource pool for your in-memory tables you should do that and bind your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to it.</span></span> <span data-ttu-id="bee33-161">Confira o tópico [Associar um banco de dados com tabelas com otimização de memória a um pool de recursos](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) para obter diretrizes sobre como criar e associar bancos de dados do [!INCLUDE[hek_2](../../includes/hek-2-md.md)] a um pool de recursos.</span><span class="sxs-lookup"><span data-stu-id="bee33-161">See the topic [Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) for guidance on creating and binding your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to a resource pool.</span></span>  
  
 <span data-ttu-id="bee33-162">Se seu banco de dados do [!INCLUDE[hek_2](../../includes/hek-2-md.md)] estiver associado a um pool de recursos, você poderá aumentar a porcentagem de memória que o pool pode acessar.</span><span class="sxs-lookup"><span data-stu-id="bee33-162">If your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] database is bound to a resource pool you may be able to increase the percent of memory the pool can access.</span></span> <span data-ttu-id="bee33-163">Confira o subtópico [Alterar MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT em um pool existente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) para obter diretrizes sobre como alterar o valor de MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT em um pool de recursos.</span><span class="sxs-lookup"><span data-stu-id="bee33-163">See the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) for guidance on changing the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT for a resource pool.</span></span>  
  
 <span data-ttu-id="bee33-164">Aumente o valor de MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="bee33-164">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
<span data-ttu-id="bee33-165">Este snippet de código altera MAX_MEMORY_PERCENT para o pool de recursos PoolHk para 70% de memória instalada.</span><span class="sxs-lookup"><span data-stu-id="bee33-165">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bee33-166">Se o servidor estiver sendo executado em uma máquina virtual e não for dedicado, defina o valor de MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT como o mesmo.</span><span class="sxs-lookup"><span data-stu-id="bee33-166">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="bee33-167">Confira o tópico [Melhores práticas: usar OLTP in-memory em um ambiente de VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="bee33-167">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
```sql  
  
-- disable resource governor  
ALTER RESOURCE GOVERNOR DISABLE  
  
-- change the value of MAX_MEMORY_PERCENT  
ALTER RESOURCE POOL PoolHk  
WITH  
     ( MAX_MEMORY_PERCENT = 70 )  
GO  
  
-- reconfigure the Resource Governor  
--    RECONFIGURE enables resource governor  
ALTER RESOURCE GOVERNOR RECONFIGURE  
GO  
  
```  
  
 <span data-ttu-id="bee33-168">Para obter informações sobre os valores máximos para MAX_MEMORY_PERCENT, confira a seção do tópico [Percentual de memória disponível para índices e tabelas com otimização de memória](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span><span class="sxs-lookup"><span data-stu-id="bee33-168">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span></span>  
  
##### <a name="install-additional-memory"></a><span data-ttu-id="bee33-169">Instalar a memória adicional</span><span class="sxs-lookup"><span data-stu-id="bee33-169">Install additional memory</span></span>  
 <span data-ttu-id="bee33-170">Por fim, a melhor solução, se possível, é instalar mais memória física.</span><span class="sxs-lookup"><span data-stu-id="bee33-170">Ultimately the best solution, if possible, is to install additional physical memory.</span></span> <span data-ttu-id="bee33-171">Se você fizer isso, lembre-se de que provavelmente também poderá aumentar o valor de MAX_MEMORY_PERCENT (confira o subtópico [Alterar MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT em um pool existente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)), já que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] talvez não precise de mais memória, permitindo assim que você disponibilize a maior parte da memória recém-instalada, se não toda ela, ao pool de recursos.</span><span class="sxs-lookup"><span data-stu-id="bee33-171">If you do this, remember that you will probably be able to also increase the value of MAX_MEMORY_PERCENT (see the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)) since [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] won't likely need more memory, allowing you to make most if not all of the newly installed memory available to the resource pool.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bee33-172">Se o servidor estiver sendo executado em uma máquina virtual e não for dedicado, defina o valor de MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT como o mesmo.</span><span class="sxs-lookup"><span data-stu-id="bee33-172">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="bee33-173">Confira o tópico [Melhores práticas: usar OLTP in-memory em um ambiente de VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="bee33-173">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
## <a name="resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available"></a><span data-ttu-id="bee33-174">Resolver falhas de alocação de página devido à memória insuficiente quando há memória suficiente disponível</span><span class="sxs-lookup"><span data-stu-id="bee33-174">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>  
 <span data-ttu-id="bee33-175">Se você receber a mensagem de erro "desautorizando as alocações de página para o banco de dados ' *\<databaseName>* ' devido à memória insuficiente no pool de recursos ' *\<resourcePoolName>* '.</span><span class="sxs-lookup"><span data-stu-id="bee33-175">If you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="bee33-176">Consulte ' <https://go.microsoft.com/fwlink/?LinkId=330673> ' para obter mais informações. "</span><span class="sxs-lookup"><span data-stu-id="bee33-176">See '<https://go.microsoft.com/fwlink/?LinkId=330673>' for more information."</span></span> <span data-ttu-id="bee33-177">No log de erros quando a memória física disponível for suficiente para alocar a página, talvez isso ocorra devido a um Administrador de Recursos desabilitado.</span><span class="sxs-lookup"><span data-stu-id="bee33-177">in the error log when the available physical memory is sufficient to allocate the page, it may be due to a disabled Resource Governor.</span></span> <span data-ttu-id="bee33-178">Quando o Administrador de Recursos é desabilitado, MEMORYBROKER_FOR_RESERVE induz artificial à pressão de memória artificial.</span><span class="sxs-lookup"><span data-stu-id="bee33-178">When the Resource Governor is disabled MEMORYBROKER_FOR_RESERVE induces artificial memory pressure.</span></span>  
  
 <span data-ttu-id="bee33-179">Para resolver isso, é necessário habilitar o Administrador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="bee33-179">To resolve this you need to enable the Resource Governor.</span></span>  
  
 <span data-ttu-id="bee33-180">Veja [Habilitar Administrador de Recursos](https://technet.microsoft.com/library/bb895149.aspx) para obter informações sobre limites e restrições, bem como diretrizes sobre como habilitar o Administrador de Recursos usando o Pesquisador de Objetos, as propriedades do Administrador de Recursos ou o Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="bee33-180">See [Enable Resource Governor](https://technet.microsoft.com/library/bb895149.aspx) for information on Limits and Restrictions as well as guidance on enabling Resource Governor using Object Explorer, Resource Governor properties, or Transact-SQL.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bee33-181">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="bee33-181">See Also</span></span>  
 <span data-ttu-id="bee33-182">[Gerenciando memória para OLTP na memória](../../database-engine/managing-memory-for-in-memory-oltp.md) </span><span class="sxs-lookup"><span data-stu-id="bee33-182">[Managing Memory for In-Memory OLTP](../../database-engine/managing-memory-for-in-memory-oltp.md) </span></span>  
 <span data-ttu-id="bee33-183">[Monitorar e solucionar problemas de uso da memória](monitor-and-troubleshoot-memory-usage.md) </span><span class="sxs-lookup"><span data-stu-id="bee33-183">[Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) </span></span>  
 <span data-ttu-id="bee33-184">[Associar um banco de dados com tabelas com otimização de memória a um pool de recursos](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span><span class="sxs-lookup"><span data-stu-id="bee33-184">[Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span></span>  
 [<span data-ttu-id="bee33-185">Práticas recomendadas: usando o OLTP na memória em um ambiente de VM</span><span class="sxs-lookup"><span data-stu-id="bee33-185">Best Practices: Using In-Memory OLTP in a VM environment</span></span>](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md)  
  
  
