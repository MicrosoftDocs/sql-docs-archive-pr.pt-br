---
title: Configurando o armazenamento para tabelas com otimização de memória | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 6e005de0-3a77-4b91-b497-14cc0f9f6605
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 4e6e5f5a931669e2fc07cb957e60fd9c77b9b735
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685150"
---
# <a name="configuring-storage-for-memory-optimized-tables"></a><span data-ttu-id="90f92-102">Configuração do armazenamento para tabelas com otimização de memória</span><span class="sxs-lookup"><span data-stu-id="90f92-102">Configuring Storage for Memory-Optimized Tables</span></span>
  <span data-ttu-id="90f92-103">Você precisa configurar a capacidade de armazenamento e operações de entrada/saída por segundo (IOPS).</span><span class="sxs-lookup"><span data-stu-id="90f92-103">You need to configure storage capacity and input/output operations per second (IOPS).</span></span>  
  
## <a name="storage-capacity"></a><span data-ttu-id="90f92-104">Capacidade de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="90f92-104">Storage Capacity</span></span>  
 <span data-ttu-id="90f92-105">Use as informações em [Estimar requisitos de memória para tabelas com otimização de memória](memory-optimized-tables.md) para estimar o tamanho na memória das tabelas com otimização de memória duráveis do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="90f92-105">Use the information in [Estimate Memory Requirements for Memory-Optimized Tables](memory-optimized-tables.md) to estimate the in-memory size of the database's durable memory-optimized tables.</span></span> <span data-ttu-id="90f92-106">Como os índices não são mantidos para tabelas com otimização de memória, não incluem o tamanho dos índices.</span><span class="sxs-lookup"><span data-stu-id="90f92-106">Because indexes are not persisted for memory-optimized tables, do not include the size of indexes.</span></span> <span data-ttu-id="90f92-107">Depois de determinar o tamanho, você precisa fornecer espaço em disco que é quatro vezes o tamanho das tabelas duráveis na memória.</span><span class="sxs-lookup"><span data-stu-id="90f92-107">Once you determine the size, you need to provide disk space that is four times the size of durable, in-memory tables.</span></span>  
  
## <a name="storage-performance"></a><span data-ttu-id="90f92-108">Desempenho do armazenamento</span><span class="sxs-lookup"><span data-stu-id="90f92-108">Storage Performance</span></span>  
 [!INCLUDE[hek_2](../../includes/hek-2-md.md)] <span data-ttu-id="90f92-109">pode aumentar significativamente a taxa de transferência da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="90f92-109">can significantly increase your workload throughput.</span></span> <span data-ttu-id="90f92-110">Portanto, é importante garantir que a E/A não seja um gargalo.</span><span class="sxs-lookup"><span data-stu-id="90f92-110">Therefore, it is important to ensure that IO is not a bottleneck.</span></span>  
  
-   <span data-ttu-id="90f92-111">Ao migrar tabelas baseadas em disco para tabelas com otimização de memória, verifique se o log de transações está em uma mídia de armazenamento compatível com atividade de log de transações aumentada.</span><span class="sxs-lookup"><span data-stu-id="90f92-111">When migrating disk-based tables to memory-optimized tables, make sure that the transaction log is on a storage media that can support increased transaction log activity.</span></span> <span data-ttu-id="90f92-112">Por exemplo, se a mídia de armazenamento oferece suporte a operações de log de transações a 100 MB/s e as tabelas com otimização de memória resultam em um desempenho cinco vezes maior, a mídia de armazenamento do log de transações deve ser capaz de oferecer suporte também à melhoria de desempenho cinco vezes maior, para evitar que a atividade de log de transações se torne um gargalo de desempenho.</span><span class="sxs-lookup"><span data-stu-id="90f92-112">For example, if your storage media supports transaction log operations at 100 MB/sec, and memory-optimized tables result in five times greater performance, the transaction log's storage media must be able to also support five times performance improvement, to prevent the transaction log activity from becoming a performance bottleneck.</span></span>  
  
-   <span data-ttu-id="90f92-113">Tabelas com otimização de memória persistem em arquivos distribuídos em um ou mais contêineres.</span><span class="sxs-lookup"><span data-stu-id="90f92-113">Memory-optimized tables are persisted in files distributed across one or more containers.</span></span> <span data-ttu-id="90f92-114">Cada contêiner deve ser normalmente mapeado para seu próprio eixo e é usado para obter uma maior capacidade de armazenamento e um melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="90f92-114">Each container should typically be mapped to its own spindle and is used both for increased storage capacity and improved performance.</span></span> <span data-ttu-id="90f92-115">Você precisa garantir que o IOPS sequencial da mídia de armazenamento possa dar suporte a um aumento de 3 vezes na taxa de transferência do log de transações.</span><span class="sxs-lookup"><span data-stu-id="90f92-115">You need to ensure that sequential IOPS of the storage media can support a 3 times increase in transaction log throughput.</span></span>  
  
     <span data-ttu-id="90f92-116">Por exemplo, se tabelas com otimização de memória geram 500 MB/s de atividade no log de transações, o armazenamento para tabelas com otimização de memória deve oferecer suporte a 1,5 GB/s. A necessidade de dar suporte a um aumento de 3 vezes na taxa de transferência do log de transações vem da observação de que os pares de arquivos Delta e de dados são gravados primeiro com os dados iniciais e, em seguida, precisam ser lidos/regravados como parte de uma operação de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="90f92-116">For example, if memory-optimized tables generate 500MB/sec of activity in the transaction log, the storage for memory-optimized tables must support 1.5GB/sec. The need to support a 3 times increase in transaction log throughput comes from the observation that the data and delta file pairs are first written with the initial data and then need to be read/re-written as part of a merge operation.</span></span>  
  
     <span data-ttu-id="90f92-117">Outro fator na estimativa de taxa de transferência de armazenamento é o tempo de recuperação para tabelas com otimização de memória.</span><span class="sxs-lookup"><span data-stu-id="90f92-117">Another factor in estimating throughput for storage is the recovery time for memory-optimized tables.</span></span> <span data-ttu-id="90f92-118">Dados de tabelas duráveis devem ser lidos na memória antes de um banco de dados ser disponibilizado para aplicativos.</span><span class="sxs-lookup"><span data-stu-id="90f92-118">Data from durable tables must be read into memory before a database is made available to applications.</span></span> <span data-ttu-id="90f92-119">Normalmente, carregar dados em tabelas com otimização de memória pode ser feito na velocidade do IOPS.</span><span class="sxs-lookup"><span data-stu-id="90f92-119">Commonly, loading data into memory-optimized tables can be done at the speed of IOPS.</span></span> <span data-ttu-id="90f92-120">Portanto, se o armazenamento total para tabelas duráveis com otimização de memória for de 60 GB e você desejar ser capaz de carregar esses dados em 1 minuto, o IOPS do armazenamento deverá ser definido em 1 GB/s.</span><span class="sxs-lookup"><span data-stu-id="90f92-120">So if the total storage for durable, memory-optimized tables is 60 GB and you want to be able to load this data in 1 minute, the IOPS for the storage must be set at 1 GB/sec.</span></span>  
  
-   <span data-ttu-id="90f92-121">Se você tiver um número par de eixos, deverá criar duas vezes o número de contêineres, cada par mapeado para o mesmo eixo.</span><span class="sxs-lookup"><span data-stu-id="90f92-121">If you have even number of spindles, you should create two times the number of containers, each pair mapped to the same spindle.</span></span> <span data-ttu-id="90f92-122">Isso é necessário para distribuir o IOPS e o armazenamento.</span><span class="sxs-lookup"><span data-stu-id="90f92-122">This is needed to spread the IOPS and the storage.</span></span> <span data-ttu-id="90f92-123">Para obter mais informações, consulte [o grupo de arquivos com otimização de memória](the-memory-optimized-filegroup.md).</span><span class="sxs-lookup"><span data-stu-id="90f92-123">For more information, see [The Memory Optimized Filegroup](the-memory-optimized-filegroup.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90f92-124">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="90f92-124">See Also</span></span>  
 [<span data-ttu-id="90f92-125">Criando e gerenciando armazenamento para objetos com otimização de memória</span><span class="sxs-lookup"><span data-stu-id="90f92-125">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
