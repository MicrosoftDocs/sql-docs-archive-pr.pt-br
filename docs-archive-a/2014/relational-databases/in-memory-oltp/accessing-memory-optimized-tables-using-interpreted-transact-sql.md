---
title: Acessando tabelas com otimização de memória usando Transact-SQL interpretado | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 92a44d4d-0e53-4fb0-b890-de264c65c95a
author: rothja
ms.author: jroth
ms.openlocfilehash: af4b3ca7731e7ca13e697f43e76ac3cc3cacb4f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87581810"
---
# <a name="accessing-memory-optimized-tables-using-interpreted-transact-sql"></a><span data-ttu-id="e8dda-102">Acessando tabelas com otimização de memória usando Transact-SQL interpretado</span><span class="sxs-lookup"><span data-stu-id="e8dda-102">Accessing Memory-Optimized Tables Using Interpreted Transact-SQL</span></span>
  <span data-ttu-id="e8dda-103">Com raras exceções, você pode acessar tabelas com otimização de memória usando qualquer consulta de [!INCLUDE[tsql](../../includes/tsql-md.md)] ou operação DML (SELEÇÃO, INSERÇÃO, ATUALIZAÇÃO ou EXCLUSÃO), lotes ad hoc e os módulos SQL, como procedimentos armazenados, funções com valor de tabela, gatilhos e exibições.</span><span class="sxs-lookup"><span data-stu-id="e8dda-103">With only a few exceptions, you can access memory-optimized tables using any [!INCLUDE[tsql](../../includes/tsql-md.md)] query or DML operation (SELECT, INSERT, UPDATE, or DELETE), ad hoc batches, and SQL modules such as stored procedures, table-value functions, triggers, and views.</span></span>  
  
 <span data-ttu-id="e8dda-104">O [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado se refere a lotes ou a procedimentos armazenados do [!INCLUDE[tsql](../../includes/tsql-md.md)] , que não sejam um procedimento armazenado nativamente compilado.</span><span class="sxs-lookup"><span data-stu-id="e8dda-104">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] refers to [!INCLUDE[tsql](../../includes/tsql-md.md)] batches or stored procedures other than a natively compiled stored procedure.</span></span> <span data-ttu-id="e8dda-105">O acesso do [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado às tabelas com otimização de memória é conhecido como acesso de interoperabilidade.</span><span class="sxs-lookup"><span data-stu-id="e8dda-105">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] access to memory-optimized tables is referred to as interop access.</span></span>  
  
 <span data-ttu-id="e8dda-106">As tabelas com otimização de memória também podem ser acessadas usando um procedimento armazenado compilado nativamente.</span><span class="sxs-lookup"><span data-stu-id="e8dda-106">Memory-optimized tables can also be accessed using a natively compiled stored procedure.</span></span> <span data-ttu-id="e8dda-107">Os procedimentos armazenados nativamente compilados são recomendados para operações OLTP de desempenho crítico.</span><span class="sxs-lookup"><span data-stu-id="e8dda-107">Natively compiled stored procedures are recommended for performance-critical OLTP operations.</span></span>  
  
 <span data-ttu-id="e8dda-108">O acesso do [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado é recomendado para estes cenários:</span><span class="sxs-lookup"><span data-stu-id="e8dda-108">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] access is recommended for these scenarios:</span></span>  
  
-   <span data-ttu-id="e8dda-109">Consultas ad hoc e tarefas administrativas.</span><span class="sxs-lookup"><span data-stu-id="e8dda-109">Ad hoc queries and administrative tasks.</span></span>  
  
-   <span data-ttu-id="e8dda-110">As consultas de relatórios, que tipicamente usam construções não disponíveis em procedimentos armazenados nativamente compilados (como funções de janela).</span><span class="sxs-lookup"><span data-stu-id="e8dda-110">Reporting queries, which typically use constructs not available in natively compiled stored procedures (such as window functions).</span></span>  
  
-   <span data-ttu-id="e8dda-111">Para migrar partes críticas de desempenho do aplicativo para as tabelas com otimização de memória, com alterações mínimas (ou não) do código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e8dda-111">To migrate performance-critical parts of your application to memory-optimized tables, with minimal (or no) application code changes.</span></span> <span data-ttu-id="e8dda-112">Potencialmente, você pode ver aprimoramentos de desempenho de tabelas de migração.</span><span class="sxs-lookup"><span data-stu-id="e8dda-112">You can potentially see performance improvements from migrating tables.</span></span> <span data-ttu-id="e8dda-113">Se então você migrar procedimentos armazenados para procedimentos armazenados nativamente compilados, talvez veja mais aprimoramento de desempenho.</span><span class="sxs-lookup"><span data-stu-id="e8dda-113">If you then migrate stored procedures to natively compiled stored procedures, you may see further performance improvement.</span></span>  
  
-   <span data-ttu-id="e8dda-114">Quando uma declaração do [!INCLUDE[tsql](../../includes/tsql-md.md)] não estiver disponível para procedimentos armazenados nativamente compilados.</span><span class="sxs-lookup"><span data-stu-id="e8dda-114">When a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement is not available for natively compiled stored procedures.</span></span>  
  
 <span data-ttu-id="e8dda-115">As seguintes construções do [!INCLUDE[tsql](../../includes/tsql-md.md)] não têm suporte em procedimentos armazenados do [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado que acessam dados em uma tabela com otimização de memória.</span><span class="sxs-lookup"><span data-stu-id="e8dda-115">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] constructs are not supported in interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedures that access data in a memory-optimized table.</span></span>  
  
|<span data-ttu-id="e8dda-116">Área</span><span class="sxs-lookup"><span data-stu-id="e8dda-116">Area</span></span>|<span data-ttu-id="e8dda-117">Sem suporte</span><span class="sxs-lookup"><span data-stu-id="e8dda-117">Unsupported</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="e8dda-118">Acesso a tabelas</span><span class="sxs-lookup"><span data-stu-id="e8dda-118">Access to tables</span></span>|<span data-ttu-id="e8dda-119">TRUNCATE TABLE</span><span class="sxs-lookup"><span data-stu-id="e8dda-119">TRUNCATE TABLE</span></span><br /><br /> <span data-ttu-id="e8dda-120">MERGE (tabela com otimização de memória como destino).</span><span class="sxs-lookup"><span data-stu-id="e8dda-120">MERGE (memory-optimized table as target)</span></span><br /><br /> <span data-ttu-id="e8dda-121">Cursores de conjunto de chaves e dinâmicos (degradados automaticamente para estáticos).</span><span class="sxs-lookup"><span data-stu-id="e8dda-121">Dynamic and keyset cursors (these automatically degrade to static).</span></span><br /><br /> <span data-ttu-id="e8dda-122">Acesso dos módulos CLR, usando a conexão de contexto.</span><span class="sxs-lookup"><span data-stu-id="e8dda-122">Access from CLR modules, using the context connection.</span></span><br /><br /> <span data-ttu-id="e8dda-123">Referenciando uma tabela com otimização de memória de uma exibição indexada.</span><span class="sxs-lookup"><span data-stu-id="e8dda-123">Referencing a memory-optimized table from an indexed view.</span></span>|  
|<span data-ttu-id="e8dda-124">Entre bancos de dados</span><span class="sxs-lookup"><span data-stu-id="e8dda-124">Cross-database</span></span>|<span data-ttu-id="e8dda-125">Consultas de bancos de dados</span><span class="sxs-lookup"><span data-stu-id="e8dda-125">Cross-database queries</span></span><br /><br /> <span data-ttu-id="e8dda-126">Transações entre bancos de dados</span><span class="sxs-lookup"><span data-stu-id="e8dda-126">Cross-database transactions</span></span><br /><br /> <span data-ttu-id="e8dda-127">Servidores vinculados</span><span class="sxs-lookup"><span data-stu-id="e8dda-127">Linked servers</span></span>|  
  
## <a name="table-hints"></a><span data-ttu-id="e8dda-128">Dicas de tabela</span><span class="sxs-lookup"><span data-stu-id="e8dda-128">Table Hints</span></span>  
 <span data-ttu-id="e8dda-129">Para obter mais informações sobre dicas de tabela, consulte.</span><span class="sxs-lookup"><span data-stu-id="e8dda-129">For more information about table hints, see.</span></span> <span data-ttu-id="e8dda-130">[Dicas de tabela &#40;Transact-SQL&#41;](/sql/t-sql/queries/hints-transact-sql-table).</span><span class="sxs-lookup"><span data-stu-id="e8dda-130">[Table Hints &#40;Transact-SQL&#41;](/sql/t-sql/queries/hints-transact-sql-table).</span></span> <span data-ttu-id="e8dda-131">O isolamento de SNAPSHOT foi adicionado para suportar [!INCLUDE[hek_2](../../includes/hek-2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e8dda-131">SNAPSHOT isolation was added to support [!INCLUDE[hek_2](../../includes/hek-2-md.md)].</span></span>  
  
 <span data-ttu-id="e8dda-132">As dicas de tabela a seguir não têm suporte para acessar uma tabela com otimização de memória usando o [!INCLUDE[tsql](../../includes/tsql-md.md)]interpretado.</span><span class="sxs-lookup"><span data-stu-id="e8dda-132">The following table hints are not supported when accessing a memory-optimized table using interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span>  
  
|||||  
|-|-|-|-|  
|<span data-ttu-id="e8dda-133">HOLDLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-133">HOLDLOCK</span></span>|<span data-ttu-id="e8dda-134">IGNORE_CONSTRAINTS</span><span class="sxs-lookup"><span data-stu-id="e8dda-134">IGNORE_CONSTRAINTS</span></span>|<span data-ttu-id="e8dda-135">IGNORE_TRIGGERS</span><span class="sxs-lookup"><span data-stu-id="e8dda-135">IGNORE_TRIGGERS</span></span>|<span data-ttu-id="e8dda-136">NOWAIT</span><span class="sxs-lookup"><span data-stu-id="e8dda-136">NOWAIT</span></span>|  
|<span data-ttu-id="e8dda-137">PAGLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-137">PAGLOCK</span></span>|<span data-ttu-id="e8dda-138">READCOMMITTED</span><span class="sxs-lookup"><span data-stu-id="e8dda-138">READCOMMITTED</span></span>|<span data-ttu-id="e8dda-139">READCOMMITTEDLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-139">READCOMMITTEDLOCK</span></span>|<span data-ttu-id="e8dda-140">READPAST</span><span class="sxs-lookup"><span data-stu-id="e8dda-140">READPAST</span></span>|  
|<span data-ttu-id="e8dda-141">READUNCOMMITTED</span><span class="sxs-lookup"><span data-stu-id="e8dda-141">READUNCOMMITTED</span></span>|<span data-ttu-id="e8dda-142">ROWLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-142">ROWLOCK</span></span>|<span data-ttu-id="e8dda-143">SPATIAL_WINDOW_MAX_CELLS = *integer*</span><span class="sxs-lookup"><span data-stu-id="e8dda-143">SPATIAL_WINDOW_MAX_CELLS = *integer*</span></span>|<span data-ttu-id="e8dda-144">TABLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-144">TABLOCK</span></span>|  
|<span data-ttu-id="e8dda-145">TABLOCKXX</span><span class="sxs-lookup"><span data-stu-id="e8dda-145">TABLOCKXX</span></span>|<span data-ttu-id="e8dda-146">UPDLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-146">UPDLOCK</span></span>|<span data-ttu-id="e8dda-147">XLOCK</span><span class="sxs-lookup"><span data-stu-id="e8dda-147">XLOCK</span></span>||  
  
 <span data-ttu-id="e8dda-148">Ao acessar uma tabela com otimização de memória em uma transação explícita ou implícita, usando o [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado, você deve incluir uma dica de tabela em nível de isolamento como SNAPSHOT, REPEATABLEREAD ou SERIALIZABLE, ou então você pode usar MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT.</span><span class="sxs-lookup"><span data-stu-id="e8dda-148">When accessing a memory-optimized table from an explicit or implicit transaction using interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] you must include either an isolation level table hint such as SNAPSHOT, REPEATABLEREAD, or SERIALIZABLE, or you can use MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT.</span></span> <span data-ttu-id="e8dda-149">Para obter mais informações, consulte [diretrizes para níveis de isolamento de transação com tabelas com otimização de memória](memory-optimized-tables.md) e [Opções ALTER DATABASE SET &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options).</span><span class="sxs-lookup"><span data-stu-id="e8dda-149">For more information, see [Guidelines for Transaction Isolation Levels with Memory-Optimized Tables](memory-optimized-tables.md) and [ALTER DATABASE SET Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e8dda-150">Uma dica de tabela de nível de isolamento não é necessária para tabelas com otimização de memória acessadas por consultas executadas no modo de confirmação automática.</span><span class="sxs-lookup"><span data-stu-id="e8dda-150">An isolation level table hint is not required for memory-optimized tables accessed by queries running in auto-commit mode.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8dda-151">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="e8dda-151">See Also</span></span>  
 <span data-ttu-id="e8dda-152">[Suporte ao Transact-SQL para OLTP na memória](transact-sql-support-for-in-memory-oltp.md) </span><span class="sxs-lookup"><span data-stu-id="e8dda-152">[Transact-SQL Support for In-Memory OLTP](transact-sql-support-for-in-memory-oltp.md) </span></span>  
 [<span data-ttu-id="e8dda-153">Migrando para OLTP na memória</span><span class="sxs-lookup"><span data-stu-id="e8dda-153">Migrating to In-Memory OLTP</span></span>](migrating-to-in-memory-oltp.md)  
  
  
