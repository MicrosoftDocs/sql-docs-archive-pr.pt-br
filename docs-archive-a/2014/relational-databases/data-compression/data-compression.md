---
title: Compactação de dados | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- page compression [Database Engine]
- indexes [SQL Server], compressed
- compressed indexes [SQL Server]
- storage compression [Database Engine]
- tables [SQL Server], compressed
- storage [SQL Server], compressed
- compression [SQL Server]
- row compression [Database Engine]
- compression [SQL Server], about compressed tables and indexes
- data compression [Database Engine]
- compressed tables [SQL Server]
ms.assetid: 5f33e686-e115-4687-bd39-a00c48646513
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 48c4b11963d8e05ff7787ce9200329daf2e899ba
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87581955"
---
# <a name="data-compression"></a><span data-ttu-id="95a5f-102">Data Compression</span><span class="sxs-lookup"><span data-stu-id="95a5f-102">Data Compression</span></span>
  <span data-ttu-id="95a5f-103">O [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] oferece suporte à compactação de linha e página para tabelas e índices rowstore, e oferece suporte a columnstore e à compactação de arquivamento columnstore para tabelas e índices columnstore.</span><span class="sxs-lookup"><span data-stu-id="95a5f-103">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] supports row and page compression for rowstore tables and indexes, and supports columnstore and columnstore archival compression for columnstore tables and indexes.</span></span>  
  
 <span data-ttu-id="95a5f-104">Para tabelas e índices rowstore, use o recurso de compactação de dados para ajudar a reduzir o tamanho do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="95a5f-104">For rowstore tables and indexes, use the data compression feature to help reduce the size of the database.</span></span> <span data-ttu-id="95a5f-105">Além de economizar espaço, a compactação de dados pode ajudar a aprimorar o desempenho de cargas de trabalho intensivas de E/S, pois os dados são armazenados em menos páginas e as consultas precisam ler menos páginas do disco.</span><span class="sxs-lookup"><span data-stu-id="95a5f-105">In addition to saving space, data compression can help improve performance of I/O intensive workloads because the data is stored in fewer pages and queries need to read fewer pages from disk.</span></span> <span data-ttu-id="95a5f-106">No entanto, recursos extras de CPU são necessários no servidor de banco de dados para compactar e descompactar os dados, enquanto os dados são trocados com o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="95a5f-106">However, extra CPU resources are required on the database server to compress and decompress the data, while data is exchanged with the application.</span></span> <span data-ttu-id="95a5f-107">Você pode configurar a compactação de linha e página nos seguintes objetos de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="95a5f-107">You can configure row and page compression on the following database objects:</span></span>  
  
-   <span data-ttu-id="95a5f-108">Uma tabela inteira que é armazenada como um heap.</span><span class="sxs-lookup"><span data-stu-id="95a5f-108">A whole table that is stored as a heap.</span></span>  
  
-   <span data-ttu-id="95a5f-109">Uma tabela inteira que é armazenada como um índice clusterizado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-109">A whole table that is stored as a clustered index.</span></span>  
  
-   <span data-ttu-id="95a5f-110">Um índice não clusterizado inteiro.</span><span class="sxs-lookup"><span data-stu-id="95a5f-110">A whole nonclustered index.</span></span>  
  
-   <span data-ttu-id="95a5f-111">Uma exibição indexada inteira.</span><span class="sxs-lookup"><span data-stu-id="95a5f-111">A whole indexed view.</span></span>  
  
-   <span data-ttu-id="95a5f-112">Para tabelas e índices particionados, você pode configurar a opção de compactação para cada partição, e as várias partições de um objeto não precisam ter a mesma configuração de compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-112">For partitioned tables and indexes, you can configure the compression option for each partition, and the various partitions of an object do not have to have the same compression setting.</span></span>  
  
 <span data-ttu-id="95a5f-113">Para tabelas e índices columnstore, qualquer tabela e índice columnstore sempre usam a compactação columnstore, e isso não é configurável pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="95a5f-113">For columnstore tables and indexes, all columnstore tables and indexes always use columnstore compression and this is not user configurable.</span></span> <span data-ttu-id="95a5f-114">Use a compactação de arquivamento columnstore para reduzir ainda mais o tamanho dos dados em situações em que tenha tempo extra e recursos de CPU para armazenar e recuperar os dados.</span><span class="sxs-lookup"><span data-stu-id="95a5f-114">Use columnstore archival compression to further reduce the data size for situations when you can afford extra time and CPU resources to store and retrieve the data.</span></span>  <span data-ttu-id="95a5f-115">Você pode configurar a compactação de arquivamento columnstore nos seguintes objetos de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="95a5f-115">You can configure columnstore archival compression on the following database objects:</span></span>  
  
-   <span data-ttu-id="95a5f-116">Uma tabela columnstore inteira ou um índice columnstore clusterizado inteiro.</span><span class="sxs-lookup"><span data-stu-id="95a5f-116">A whole columnstore table or a whole clustered columnstore index.</span></span>  <span data-ttu-id="95a5f-117">Desde que uma tabela columnstore é armazenada como um índice columnstore clusterizado, ambas as abordagens têm os mesmos resultados.</span><span class="sxs-lookup"><span data-stu-id="95a5f-117">Since a columnstore table is stored as a clustered columnstore index, both approaches have the same results.</span></span>  
  
-   <span data-ttu-id="95a5f-118">Um índice columnstore não clusterizado inteiro.</span><span class="sxs-lookup"><span data-stu-id="95a5f-118">A whole nonclustered columnstore index.</span></span>  
  
-   <span data-ttu-id="95a5f-119">Para tabelas columnstore particionadas e índices columnstore, você pode configurar a opção de compactação de arquivamento para cada partição, e as várias partições não precisam ter a mesma configuração de compactação de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-119">For partitioned columnstore tables and columnstore indexes, you can configure the archival compression option for each partition, and the various partitions do not have to have the same archival compression setting.</span></span>  
  
## <a name="considerations-for-when-you-use-row-and-page-compression"></a><span data-ttu-id="95a5f-120">Considerações sobre quando usar a compactação de linha e de página</span><span class="sxs-lookup"><span data-stu-id="95a5f-120">Considerations for When You Use Row and Page Compression</span></span>  
 <span data-ttu-id="95a5f-121">Ao usar compactação de linha e de página, esteja atento às seguintes considerações:</span><span class="sxs-lookup"><span data-stu-id="95a5f-121">When you use row and page compression, be aware the following considerations:</span></span>  
  
-   <span data-ttu-id="95a5f-122">Os detalhes de compactação de dados estão sujeitos a alteração sem aviso em service packs ou versões subsequentes.</span><span class="sxs-lookup"><span data-stu-id="95a5f-122">The details of data compression are subject to change without notice in service packs or subsequent releases.</span></span>  
  
-   <span data-ttu-id="95a5f-123">A compactação não está disponível em todas as edições do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95a5f-123">Compression is not available in every edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95a5f-124">Para obter mais informações, consulte [recursos com suporte nas edições do SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="95a5f-124">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="95a5f-125">A compactação não está disponível para tabelas do sistema.</span><span class="sxs-lookup"><span data-stu-id="95a5f-125">Compression is not available for system tables.</span></span>  
  
-   <span data-ttu-id="95a5f-126">A compactação pode permitir que mais linhas sejam armazenadas em uma página, mas não altera o tamanho máximo de linha de uma tabela ou de um índice.</span><span class="sxs-lookup"><span data-stu-id="95a5f-126">Compression can allow more rows to be stored on a page, but does not change the maximum row size of a table or index.</span></span>  
  
-   <span data-ttu-id="95a5f-127">Uma tabela não pode ser habilitada para compactação quando o tamanho máximo da linha mais a sobrecarga de compactação exceder o tamanho máximo de linha de 8060 bytes.</span><span class="sxs-lookup"><span data-stu-id="95a5f-127">A table cannot be enabled for compression when the maximum row size plus the compression overhead exceeds the maximum row size of 8060 bytes.</span></span> <span data-ttu-id="95a5f-128">Por exemplo, uma tabela que tem as colunas C1 `char(8000)` e C2 `char(53)` não pode ser compactada devido à sobrecarga de compactação adicional.</span><span class="sxs-lookup"><span data-stu-id="95a5f-128">For example, a table that has the columns c1`char(8000)` and c2`char(53)` cannot be compressed because of the additional compression overhead.</span></span> <span data-ttu-id="95a5f-129">Quando o formato de armazenamento vardecimal é usado, a verificação do tamanho da linha é executada quando o formato é habilitado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-129">When the vardecimal storage format is used, the row-size check is performed when the format is enabled.</span></span> <span data-ttu-id="95a5f-130">Para a compactação de linha e de página, a verificação do tamanho da linha é executada quando o objeto é inicialmente compactado e, depois, verificado à medida que cada linha é inserida ou modificada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-130">For row and page compression, the row-size check is performed when the object is initially compressed, and then checked as each row is inserted or modified.</span></span> <span data-ttu-id="95a5f-131">A compactação impõe as duas regras seguintes:</span><span class="sxs-lookup"><span data-stu-id="95a5f-131">Compression enforces the following two rules:</span></span>  
  
    -   <span data-ttu-id="95a5f-132">Uma atualização para um tipo de comprimento fixo sempre deve ter êxito.</span><span class="sxs-lookup"><span data-stu-id="95a5f-132">An update to a fixed-length type must always succeed.</span></span>  
  
    -   <span data-ttu-id="95a5f-133">A desabilitação da compactação de dados sempre deve ter êxito.</span><span class="sxs-lookup"><span data-stu-id="95a5f-133">Disabling data compression must always succeed.</span></span> <span data-ttu-id="95a5f-134">Mesmo que a linha compactada caiba em uma página, o que significa que ela é menor do que 8060 bytes, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] impedirá atualizações que talvez não caibam na linha quando ela for descompactada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-134">Even if the compressed row fits on the page, which means that it is less than 8060 bytes; [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] prevents updates that would not fit on the row when it is uncompressed.</span></span>  
  
-   <span data-ttu-id="95a5f-135">Quando uma lista de partições é especificada, o tipo de compactação deve ser definido como ROW, PAGE ou NONE em partições individuais.</span><span class="sxs-lookup"><span data-stu-id="95a5f-135">When a list of partitions is specified, the compression type can be set to ROW, PAGE, or NONE on individual partitions.</span></span> <span data-ttu-id="95a5f-136">Se a lista de partições não for especificada, todas as partições serão definidas com a propriedade de compactação de dados especificada na instrução.</span><span class="sxs-lookup"><span data-stu-id="95a5f-136">If the list of partitions is not specified, all partitions are set with the data compression property that is specified in the statement.</span></span> <span data-ttu-id="95a5f-137">Quando uma tabela ou índice é criado, a compactação dos dados é definida como NONE, a menos que especificada de outra maneira.</span><span class="sxs-lookup"><span data-stu-id="95a5f-137">When a table or index is created, data compression is set to NONE unless otherwise specified.</span></span> <span data-ttu-id="95a5f-138">Quando uma tabela é modificada a compactação existente é preservada, a menos que especificada de outra maneira.</span><span class="sxs-lookup"><span data-stu-id="95a5f-138">When a table is modified, the existing compression is preserved unless otherwise specified.</span></span>  
  
-   <span data-ttu-id="95a5f-139">Se for especificada uma lista de partições ou uma partição fora do intervalo, um erro será gerado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-139">If you specify a list of partitions or a partition that is out of range, an error will be generated.</span></span>  
  
-   <span data-ttu-id="95a5f-140">Índices não clusterizados não herdam a propriedade de compactação da tabela.</span><span class="sxs-lookup"><span data-stu-id="95a5f-140">Nonclustered indexes do not inherit the compression property of the table.</span></span> <span data-ttu-id="95a5f-141">Para compactar índices, você deve definir explicitamente a propriedade de compactação dos índices.</span><span class="sxs-lookup"><span data-stu-id="95a5f-141">To compress indexes, you must explicitly set the compression property of the indexes.</span></span> <span data-ttu-id="95a5f-142">Por padrão, a configuração de compactação de índices será definida como NONE quando o índice for criado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-142">By default, the compression setting for indexes will set to NONE when the index is created.</span></span>  
  
-   <span data-ttu-id="95a5f-143">Quando um índice clusterizado é criado em um heap, ele herda o estado de compactação do heap, a menos que um estado de compactação alternativo seja especificado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-143">When a clustered index is created on a heap, the clustered index inherits the compression state of the heap unless an alternative compression state is specified.</span></span>  
  
-   <span data-ttu-id="95a5f-144">Quando um heap é configurado para compactação em nível de página, as páginas só recebem compactação em nível de página nos seguintes modos:</span><span class="sxs-lookup"><span data-stu-id="95a5f-144">When a heap is configured for page-level compression, pages receive page-level compression only in the following ways:</span></span>  
  
    -   <span data-ttu-id="95a5f-145">Os dados são importados em massa com otimizações em massa habilitadas.</span><span class="sxs-lookup"><span data-stu-id="95a5f-145">Data is bulk imported with bulk optimizations enabled.</span></span>  
  
    -   <span data-ttu-id="95a5f-146">Os dados são inseridos usando INSERT INTO ... A sintaxe WITH (TABLOCK) e a tabela não têm um índice não clusterizado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-146">Data is inserted using INSERT INTO ... WITH (TABLOCK) syntax and the table does not have a nonclustered index.</span></span>  
  
    -   <span data-ttu-id="95a5f-147">Uma tabela é recriada executando ALTER TABLE ... Instrução REBUILD com a opção de compactação PAGE.</span><span class="sxs-lookup"><span data-stu-id="95a5f-147">A table is rebuilt by executing the ALTER TABLE ... REBUILD statement with the PAGE compression option.</span></span>  
  
-   <span data-ttu-id="95a5f-148">As novas páginas alocadas em um heap como parte de operações DML não usarão a compactação PAGE até o heap ser recompilado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-148">New pages allocated in a heap as part of DML operations will not use PAGE compression until the heap is rebuilt.</span></span> <span data-ttu-id="95a5f-149">Recompile o heap removendo e reaplicando a compactação ou criando e removendo um índice clusterizado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-149">Rebuild the heap by removing and reapplying compression, or by creating and removing a clustered index.</span></span>  
  
-   <span data-ttu-id="95a5f-150">A alteração da configuração de compactação de um heap exige que todos os índices não clusterizados na tabela sejam recriados, para que tenham ponteiros para os novos locais de linha no heap.</span><span class="sxs-lookup"><span data-stu-id="95a5f-150">Changing the compression setting of a heap requires all nonclustered indexes on the table to be rebuilt so that they have pointers to the new row locations in the heap.</span></span>  
  
-   <span data-ttu-id="95a5f-151">Você pode habilitar ou desabilitar a compactação de ROW ou PAGE online ou offline.</span><span class="sxs-lookup"><span data-stu-id="95a5f-151">You can enable or disable ROW or PAGE compression online or offline.</span></span> <span data-ttu-id="95a5f-152">A habilitação da compactação em um heap tem thread único para uma operação online.</span><span class="sxs-lookup"><span data-stu-id="95a5f-152">Enabling compression on a heap is single threaded for an online operation.</span></span>  
  
-   <span data-ttu-id="95a5f-153">Os requisitos de espaço em disco para habilitar ou desabilitar a compactação de página ou de linha são os mesmos que para criar ou recriar um índice.</span><span class="sxs-lookup"><span data-stu-id="95a5f-153">The disk space requirements for enabling or disabling row or page compression are the same as for creating or rebuilding an index.</span></span> <span data-ttu-id="95a5f-154">Para dados particionados, você pode reduzir o espaço exigido para habilitar ou desabilitar a compactação para uma partição de cada vez.</span><span class="sxs-lookup"><span data-stu-id="95a5f-154">For partitioned data, you can reduce the space that is required by enabling or disabling compression for one partition at a time.</span></span>  
  
-   <span data-ttu-id="95a5f-155">Para determinar o estado de compactação das partições em uma tabela particionada, consulte a coluna data_compression da exibição do catálogo sys.partitions.</span><span class="sxs-lookup"><span data-stu-id="95a5f-155">To determine the compression state of partitions in a partitioned table, query the data_compression column of the sys.partitions catalog view.</span></span>  
  
-   <span data-ttu-id="95a5f-156">Quando você estiver compactando índices, as páginas de nível folha poderão ser compactadas com a compactação de linha e de página.</span><span class="sxs-lookup"><span data-stu-id="95a5f-156">When you are compressing indexes, leaf-level pages can be compressed with both row and page compression.</span></span> <span data-ttu-id="95a5f-157">As páginas que não são de nível folha não recebem a compactação de página.</span><span class="sxs-lookup"><span data-stu-id="95a5f-157">Non-leaf-level pages do not receive page compression.</span></span>  
  
-   <span data-ttu-id="95a5f-158">Devido ao seu tamanho, os tipos de dados de valor grande são, às vezes, armazenados separadamente dos dados de linhas normais em páginas com finalidades específicas.</span><span class="sxs-lookup"><span data-stu-id="95a5f-158">Because of their size, large-value data types are sometimes stored separately from the normal row data on special purpose pages.</span></span> <span data-ttu-id="95a5f-159">A compactação de dados não está disponível para os dados armazenados separadamente.</span><span class="sxs-lookup"><span data-stu-id="95a5f-159">Data compression is not available for the data that is stored separately.</span></span>  
  
-   <span data-ttu-id="95a5f-160">As tabelas que implementaram o formato de armazenamento vardecimal no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] reterão essas configurações quando forem atualizadas.</span><span class="sxs-lookup"><span data-stu-id="95a5f-160">Tables which implemented the vardecimal storage format in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] will retain that setting when upgraded.</span></span> <span data-ttu-id="95a5f-161">Você pode aplicar a compactação de linha a uma tabela com formato de armazenamento vardecimal.</span><span class="sxs-lookup"><span data-stu-id="95a5f-161">You can apply row compression to a table that has the vardecimal storage format.</span></span> <span data-ttu-id="95a5f-162">Entretanto, como a compactação de linha é um superconjunto de formato de armazenamento vardecimal, não há motivo para reter esse formato.</span><span class="sxs-lookup"><span data-stu-id="95a5f-162">However, because row compression is a superset of the vardecimal storage format, there is no reason to retain the vardecimal storage format.</span></span> <span data-ttu-id="95a5f-163">Os valores decimais não ganham compactação adicional quando você combina o formato de armazenamento vardecimal com a compactação de linha.</span><span class="sxs-lookup"><span data-stu-id="95a5f-163">Decimal values gain no additional compression when you combine the vardecimal storage format with row compression.</span></span> <span data-ttu-id="95a5f-164">Só é possível aplicar a compactação de página a uma tabela com formato de armazenamento vardecimal; entretanto, as colunas de formato de armazenamento vardecimal provavelmente não alcançarão a compactação adicional.</span><span class="sxs-lookup"><span data-stu-id="95a5f-164">You can apply page compression to a table that has the vardecimal storage format; however, the vardecimal storage format columns probably will not achieve additional compression.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="95a5f-165">O [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] oferece suporte ao formato de armazenamento vardecimal; porém, como a compactação em nível de linha alcança as mesmas metas, o formato de armazenamento vardecimal é preterido.</span><span class="sxs-lookup"><span data-stu-id="95a5f-165">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] supports the vardecimal storage format; however, because row-level compression achieves the same goals, the vardecimal storage format is deprecated.</span></span> [!INCLUDE[ssNoteDepFutureAvoid](../../includes/ssnotedepfutureavoid-md.md)]  
  
## <a name="using-columnstore-and-columnstore-archive-compression"></a><span data-ttu-id="95a5f-166">Usando a compactação columnstore e de arquivamento columnstore</span><span class="sxs-lookup"><span data-stu-id="95a5f-166">Using Columnstore and Columnstore Archive Compression</span></span>  
  
||  
|-|  
|<span data-ttu-id="95a5f-167">**Aplica-se a**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] até a [versão atual](https://go.microsoft.com/fwlink/p/?LinkId=299658)).</span><span class="sxs-lookup"><span data-stu-id="95a5f-167">**Applies to**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] through [current version](https://go.microsoft.com/fwlink/p/?LinkId=299658)).</span></span>|  
  
### <a name="basics"></a><span data-ttu-id="95a5f-168">Noções básicas</span><span class="sxs-lookup"><span data-stu-id="95a5f-168">Basics</span></span>  
 <span data-ttu-id="95a5f-169">As tabelas e os índices columnstore são sempre armazenados com a compactação columnstore.</span><span class="sxs-lookup"><span data-stu-id="95a5f-169">Columnstore tables and indexes are always stored with columnstore compression.</span></span> <span data-ttu-id="95a5f-170">Você pode reduzir ainda mais o tamanho dos dados de columnstore configurando um compactação adicional denominada compactação de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-170">You can further reduce the size of columnstore data by configuring an additional compression called archival compression.</span></span>  <span data-ttu-id="95a5f-171">Para executar a compactação de arquivamento, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] executa o algoritmo de compactação XPRESS da Microsoft nos dados.</span><span class="sxs-lookup"><span data-stu-id="95a5f-171">To perform archival compression, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] runs the Microsoft XPRESS compression algorithm on the data.</span></span> <span data-ttu-id="95a5f-172">Adicione ou remova a compactação de arquivamento usando os seguintes tipos de compactação de dados:</span><span class="sxs-lookup"><span data-stu-id="95a5f-172">Add or remove archival compression by using the following data compression types:</span></span>  
  
-   <span data-ttu-id="95a5f-173">Use a compactação de dados `COLUMNSTORE_ARCHIVE` para compactar os dados de columnstore com a compactação de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-173">Use `COLUMNSTORE_ARCHIVE` data compression to compress columnstore data with archival compression.</span></span>  
  
-   <span data-ttu-id="95a5f-174">Use a compactação de dados **COLUMNSTORE** para descompactar a compactação de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-174">Use **COLUMNSTORE** data compression to decompress archival compression.</span></span> <span data-ttu-id="95a5f-175">Esses dados resultantes continuarão a ser compactadas com a compactação columnstore.</span><span class="sxs-lookup"><span data-stu-id="95a5f-175">This resulting data will continue to be compressed with columnstore compression.</span></span>  
  
 <span data-ttu-id="95a5f-176">Para adicionar a compactação de arquivamento, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) ou [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) com a opção REBUILD e DATA COMPRESSION = COLUMNSTORE.</span><span class="sxs-lookup"><span data-stu-id="95a5f-176">To add archival compression, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) or [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) with the REBUILD option and DATA COMPRESSION = COLUMNSTORE.</span></span>  
  
 <span data-ttu-id="95a5f-177">Exemplos:</span><span class="sxs-lookup"><span data-stu-id="95a5f-177">Examples:</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE ON PARTITIONS (2,4)) ;  
  
```  
  
 <span data-ttu-id="95a5f-178">Para remover a compactação de arquivamento e restaurar os dados à compactação columnstoue, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) ou [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) com a opção REBUILD e DATA COMPRESSION = COLUMNSTORE.</span><span class="sxs-lookup"><span data-stu-id="95a5f-178">To remove archival compression and restore the data to columnstore compression, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) or [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) with the REBUILD option and DATA COMPRESSION = COLUMNSTORE.</span></span>  
  
 <span data-ttu-id="95a5f-179">Exemplos:</span><span class="sxs-lookup"><span data-stu-id="95a5f-179">Examples:</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  COLUMNSTORE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE ON PARTITIONS (2,4) ) ;  
  
```  
  
 <span data-ttu-id="95a5f-180">O exemplo a seguir define a compactação de dados para columnstore em algumas partições, e para o arquivamento columnstore em outras partições.</span><span class="sxs-lookup"><span data-stu-id="95a5f-180">This next example sets the data compression to columnstore on some partitions, and to columnstore archival on other partitions.</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (  
    DATA_COMPRESSION =  COLUMNSTORE ON PARTITIONS (4,5),  
    DATA COMPRESSION = COLUMNSTORE_ARCHIVE ON PARTITIONS (1,2,3)  
) ;  
```  
  
### <a name="performance"></a><span data-ttu-id="95a5f-181">Desempenho</span><span class="sxs-lookup"><span data-stu-id="95a5f-181">Performance</span></span>  
 <span data-ttu-id="95a5f-182">A compactação dos índices columnstore com a compactação de arquivamento fará com que o índice seja executado de forma mais lenta do que os índices columnstore que não têm a compactação de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-182">Compressing columnstore indexes with archival compression will cause the index to perform slower than columnstore indexes that do not have the archival compression.</span></span>  <span data-ttu-id="95a5f-183">Use a compactação de arquivamento apenas quando tiver tempo extra e recursos de CPU para compactar e recuperar os dados.</span><span class="sxs-lookup"><span data-stu-id="95a5f-183">Use archival compression only when you can afford to use extra time and CPU resources to compress and retrieve the data.</span></span>  
  
 <span data-ttu-id="95a5f-184">O benefício de um desempenho mais lento é o armazenamento reduzido, que é útil para os dados que não são acessados com frequência.</span><span class="sxs-lookup"><span data-stu-id="95a5f-184">The benefit of slower performance is reduced storage which is useful for data that is not frequently accessed.</span></span> <span data-ttu-id="95a5f-185">Por exemplo, se você tiver uma partição para cada mês de dados, e a maior parte da atividade for para os meses mais recentes, você poderá arquivar os meses anteriores para reduzir os requisitos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="95a5f-185">For example, if you have a partition for each month of data, and most of your activity is for the most recent months, you could archive older months to reduce the storage requirements.</span></span>  
  
### <a name="metadata"></a><span data-ttu-id="95a5f-186">Metadados</span><span class="sxs-lookup"><span data-stu-id="95a5f-186">Metadata</span></span>  
 <span data-ttu-id="95a5f-187">As seguintes exibições do sistema contêm informações sobre compactação de dados para índices clusterizados:</span><span class="sxs-lookup"><span data-stu-id="95a5f-187">The following system views contain information about data compression for clustered indexes:</span></span>  
  
-   <span data-ttu-id="95a5f-188">[Sys. indexes &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql) - `type` as `type_desc` colunas e incluem columnstore CLUSTERIZAdo e não clusterizado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-188">[sys.indexes &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql) - The `type` and `type_desc` columns include CLUSTERED COLUMNSTORE and NONCLUSTERED COLUMNSTORE.</span></span>  
  
-   <span data-ttu-id="95a5f-189">[Sys. partitions &#40;&#41;Transact-SQL](/sql/relational-databases/system-catalog-views/sys-partitions-transact-sql) - `data_compression` as `data_compression_desc` colunas e incluem COLUMNSTORE e COLUMNSTORE_ARCHIVE.</span><span class="sxs-lookup"><span data-stu-id="95a5f-189">[sys.partitions &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-partitions-transact-sql) - The `data_compression` and `data_compression_desc` columns include COLUMNSTORE and COLUMNSTORE_ARCHIVE.</span></span>  
  
 <span data-ttu-id="95a5f-190">O procedimento [sp_estimate_data_compression_savings &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-estimate-data-compression-savings-transact-sql) não se aplica a índices columnstore.</span><span class="sxs-lookup"><span data-stu-id="95a5f-190">The procedure [sp_estimate_data_compression_savings &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-estimate-data-compression-savings-transact-sql) does not apply to columnstore indexes.</span></span>  
  
## <a name="how-compression-affects-partitioned-tables-and-indexes"></a><span data-ttu-id="95a5f-191">Como a compactação afeta tabelas e índices particionados</span><span class="sxs-lookup"><span data-stu-id="95a5f-191">How Compression Affects Partitioned Tables and Indexes</span></span>  
 <span data-ttu-id="95a5f-192">Ao usar a compactação de dados com tabelas e índices particionados, esteja atento às seguintes considerações:</span><span class="sxs-lookup"><span data-stu-id="95a5f-192">When you use data compression with partitioned tables and indexes, be aware of the following considerations:</span></span>  
  
-   <span data-ttu-id="95a5f-193">Quando as partições são divididas usando a instrução ALTER PARTITION, ambas as partições herdam o atributo de compactação de dados da partição original.</span><span class="sxs-lookup"><span data-stu-id="95a5f-193">When partitions are split by using the ALTER PARTITION statement, both partitions inherit the data compression attribute of the original partition.</span></span>  
  
-   <span data-ttu-id="95a5f-194">Quando duas partições são mescladas, a partição resultante herda o atributo de compactação de dados da partição de destino.</span><span class="sxs-lookup"><span data-stu-id="95a5f-194">When two partitions are merged, the resultant partition inherits the data compression attribute of the destination partition.</span></span>  
  
-   <span data-ttu-id="95a5f-195">Para alternar uma partição, a propriedade de compactação de dados da partição deve corresponder à propriedade de compactação da tabela.</span><span class="sxs-lookup"><span data-stu-id="95a5f-195">To switch a partition, the data compression property of the partition must match the compression property of the table.</span></span>  
  
-   <span data-ttu-id="95a5f-196">Há duas variações de sintaxe que podem ser usadas para modificar a compactação de uma tabela ou índice particionado:</span><span class="sxs-lookup"><span data-stu-id="95a5f-196">There are two syntax variations that you can use to modify the compression of a partitioned table or index:</span></span>  
  
    -   <span data-ttu-id="95a5f-197">A sintaxe seguinte só recria a partição referenciada:</span><span class="sxs-lookup"><span data-stu-id="95a5f-197">The following syntax rebuilds only the referenced partition:</span></span>  
  
        ```  
        ALTER TABLE <table_name>   
        REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  <option>)  
        ```  
  
    -   <span data-ttu-id="95a5f-198">A sintaxe seguinte recria a tabela inteira usando a configuração de compactação existente para qualquer partição não referenciada:</span><span class="sxs-lookup"><span data-stu-id="95a5f-198">The following syntax rebuilds the whole table by using the existing compression setting for any partitions that are not referenced:</span></span>  
  
        ```  
        ALTER TABLE <table_name>   
        REBUILD PARTITION = ALL   
        WITH (DATA_COMPRESSION = PAGE ON PARTITIONS(<range>),  
        ... )  
        ```  
  
     <span data-ttu-id="95a5f-199">Os índices particionados seguem o mesmo princípio usando ALTER INDEX.</span><span class="sxs-lookup"><span data-stu-id="95a5f-199">Partitioned indexes follow the same principle using ALTER INDEX.</span></span>  
  
-   <span data-ttu-id="95a5f-200">Quando um índice clusterizado é descartado, as partições de heap correspondentes mantêm sua configuração de compactação de dados, a menos que o esquema de particionamento seja modificado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-200">When a clustered index is dropped, the corresponding heap partitions retain their data compression setting unless the partitioning scheme is modified.</span></span> <span data-ttu-id="95a5f-201">Se o esquema de particionamento for alterado, todas as partições serão recriadas para um estado não compactado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-201">If the partitioning scheme is changed, all partitions are rebuilt to an uncompressed state.</span></span> <span data-ttu-id="95a5f-202">As etapas seguintes são necessárias para descartar um índice clusterizado e alterar o esquema de particionamento:</span><span class="sxs-lookup"><span data-stu-id="95a5f-202">To drop a clustered index and change the partitioning scheme requires the following steps:</span></span>  
  
     1. <span data-ttu-id="95a5f-203">Descarte o índice clusterizado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-203">Drop the clustered index.</span></span>  
  
     2. <span data-ttu-id="95a5f-204">Modifique a tabela usando a opção ALTER TABLE ... REBUILD... que especifica a opção de compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-204">Modify the table by using the ALTER TABLE ... REBUILD ... option that specifies the compression option.</span></span>  
  
     <span data-ttu-id="95a5f-205">Descartar um índice clusterizado OFFLINE é uma operação rápida porque apenas os níveis superiores dos índices clusterizados são removidos.</span><span class="sxs-lookup"><span data-stu-id="95a5f-205">To drop a clustered index OFFLINE is a very fast operation, because only the upper levels of clustered indexes are removed.</span></span> <span data-ttu-id="95a5f-206">Quando um índice clusterizado é descartado ONLINE, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve recriar o heap duas vezes, uma para a etapa 1 e outra para a etapa 2.</span><span class="sxs-lookup"><span data-stu-id="95a5f-206">When a clustered index is dropped ONLINE, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must rebuild the heap two times, once for step 1 and once for step 2.</span></span>  
  
## <a name="how-compression-affects-replication"></a><span data-ttu-id="95a5f-207">Como a compactação afeta a replicação</span><span class="sxs-lookup"><span data-stu-id="95a5f-207">How Compression Affects Replication</span></span>  
 <span data-ttu-id="95a5f-208">Ao usar a compactação de dados com replicação, esteja atento às seguintes considerações:</span><span class="sxs-lookup"><span data-stu-id="95a5f-208">When you are using data compression with replication, be aware of the following considerations:</span></span>  
  
-   <span data-ttu-id="95a5f-209">Quando o Agente de Instantâneo gera o script de esquema inicial, o novo esquema usará as mesmas configurações de compactação para a tabela e seus índices.</span><span class="sxs-lookup"><span data-stu-id="95a5f-209">When the Snapshot Agent generates the initial schema script, the new schema will use the same compression settings for both the table and its indexes.</span></span> <span data-ttu-id="95a5f-210">A compactação não pode ser habilitada apenas na tabela e não no índice.</span><span class="sxs-lookup"><span data-stu-id="95a5f-210">Compression cannot be enabled on just the table and not the index.</span></span>  
  
-   <span data-ttu-id="95a5f-211">Para replicação transacional, a opção de esquema de artigo determina quais objetos e propriedades dependentes devem ser incluídos no script.</span><span class="sxs-lookup"><span data-stu-id="95a5f-211">For transactional replication the article schema option determines what dependent objects and properties have to be scripted.</span></span> <span data-ttu-id="95a5f-212">Para obter mais informações, veja [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="95a5f-212">For more information, see [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span>  
  
     <span data-ttu-id="95a5f-213">O Agente de Distribuição não verifica Assinantes de nível inferior ao aplicar scripts.</span><span class="sxs-lookup"><span data-stu-id="95a5f-213">The Distribution Agent does not check for down-level Subscribers when it applies scripts.</span></span> <span data-ttu-id="95a5f-214">Se a replicação de compactação for selecionada, haverá falha na criação da tabela em Assinantes de nível inferior.</span><span class="sxs-lookup"><span data-stu-id="95a5f-214">If the replication of compression is selected, creating the table on down-level Subscribers will fail.</span></span> <span data-ttu-id="95a5f-215">Em caso de topologia mista, não habilite a replicação de compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-215">In the case of a mixed topology, do not enable the replication of compression.</span></span>  
  
-   <span data-ttu-id="95a5f-216">Para replicação de mesclagem, o nível de compatibilidade da publicação substitui as opções de esquema e determina os objetos de esquema que serão incluídos no script.</span><span class="sxs-lookup"><span data-stu-id="95a5f-216">For merge replication, publication compatibility level overrides the schema options and determines the schema objects that will be scripted.</span></span>  
  
     <span data-ttu-id="95a5f-217">Em caso de topologia mista, se não for exigido o suporte a novas opções de compactação, o nível de compatibilidade da publicação deverá ser definido para a versão de Assinante de nível inferior.</span><span class="sxs-lookup"><span data-stu-id="95a5f-217">In the case of a mixed topology, if it is not required to support the new compression options, the publication compatibility level should be set to the down-level Subscriber version.</span></span> <span data-ttu-id="95a5f-218">Se for exigido, será necessário compactar as tabelas no Assinante depois que elas forem criadas.</span><span class="sxs-lookup"><span data-stu-id="95a5f-218">If it is required, compress tables on the Subscriber after they have been created.</span></span>  
  
 <span data-ttu-id="95a5f-219">A tabela a seguir mostra as configurações de replicação que controlam a compactação durante a replicação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-219">The following table shows replication settings that control compression during replication.</span></span>  
  
|<span data-ttu-id="95a5f-220">Intenção do usuário</span><span class="sxs-lookup"><span data-stu-id="95a5f-220">User intent</span></span>|<span data-ttu-id="95a5f-221">Replicar esquema de partição para uma tabela ou um índice</span><span class="sxs-lookup"><span data-stu-id="95a5f-221">Replicate partition scheme for a table or index</span></span>|<span data-ttu-id="95a5f-222">Replicar configurações de compactação</span><span class="sxs-lookup"><span data-stu-id="95a5f-222">Replicate compression settings</span></span>|<span data-ttu-id="95a5f-223">Comportamento do script</span><span class="sxs-lookup"><span data-stu-id="95a5f-223">Scripting behavior</span></span>|  
|-----------------|-----------------------------------------------------|------------------------------------|------------------------|  
|<span data-ttu-id="95a5f-224">Para replicar o esquema de partição e habilitar a compactação no Assinante da partição.</span><span class="sxs-lookup"><span data-stu-id="95a5f-224">To replicate the partition scheme and enable compression on the Subscriber on the partition.</span></span>|<span data-ttu-id="95a5f-225">True</span><span class="sxs-lookup"><span data-stu-id="95a5f-225">True</span></span>|<span data-ttu-id="95a5f-226">True</span><span class="sxs-lookup"><span data-stu-id="95a5f-226">True</span></span>|<span data-ttu-id="95a5f-227">Gera scripts para o esquema da partição e as configurações de compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-227">Scripts both the partition scheme and the compression settings.</span></span>|  
|<span data-ttu-id="95a5f-228">Para replicar o esquema da partição, mas não compactar os dados no Assinante.</span><span class="sxs-lookup"><span data-stu-id="95a5f-228">To replicate the partition scheme but not compress the data on the Subscriber.</span></span>|<span data-ttu-id="95a5f-229">Verdadeiro</span><span class="sxs-lookup"><span data-stu-id="95a5f-229">True</span></span>|<span data-ttu-id="95a5f-230">Falso</span><span class="sxs-lookup"><span data-stu-id="95a5f-230">False</span></span>|<span data-ttu-id="95a5f-231">Gera script para o esquema da partição, mas não para as configurações de compactação da partição.</span><span class="sxs-lookup"><span data-stu-id="95a5f-231">Scripts out the partition scheme but not the compression settings for the partition.</span></span>|  
|<span data-ttu-id="95a5f-232">Para não replicar o esquema da partição e não compactar os dados no Assinante.</span><span class="sxs-lookup"><span data-stu-id="95a5f-232">To not replicate the partition scheme and not compress the data on the Subscriber.</span></span>|<span data-ttu-id="95a5f-233">Falso</span><span class="sxs-lookup"><span data-stu-id="95a5f-233">False</span></span>|<span data-ttu-id="95a5f-234">Falso</span><span class="sxs-lookup"><span data-stu-id="95a5f-234">False</span></span>|<span data-ttu-id="95a5f-235">Não gera scripts para a partição nem para as configurações de compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-235">Does not script partition or compression settings.</span></span>|  
|<span data-ttu-id="95a5f-236">Para compactar a tabela no Assinante, se todas as partições forem compactadas no Publicador, mas não replicar o esquema de partição.</span><span class="sxs-lookup"><span data-stu-id="95a5f-236">To compress the table on the Subscriber if all the partitions are compressed on the Publisher, but not replicate the partition scheme.</span></span>|<span data-ttu-id="95a5f-237">Falso</span><span class="sxs-lookup"><span data-stu-id="95a5f-237">False</span></span>|<span data-ttu-id="95a5f-238">True</span><span class="sxs-lookup"><span data-stu-id="95a5f-238">True</span></span>|<span data-ttu-id="95a5f-239">Verifica se todas as partições estão habilitadas para compactação.</span><span class="sxs-lookup"><span data-stu-id="95a5f-239">Checks if all the partitions are enabled for compression.</span></span><br /><br /> <span data-ttu-id="95a5f-240">Gera scripts para a compactação em nível de tabela.</span><span class="sxs-lookup"><span data-stu-id="95a5f-240">Scripts out compression at the table level.</span></span>|  
  
## <a name="how-compression-affects-other-sql-server-components"></a><span data-ttu-id="95a5f-241">Como a compactação afeta outros componentes do SQL Server</span><span class="sxs-lookup"><span data-stu-id="95a5f-241">How Compression Affects Other SQL Server Components</span></span>  
 <span data-ttu-id="95a5f-242">A compactação ocorre no mecanismo de armazenamento e os dados são apresentados à maioria dos outros componentes do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] em um estado não compactado.</span><span class="sxs-lookup"><span data-stu-id="95a5f-242">Compression occurs in the storage engine and the data is presented to most of the other components of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in an uncompressed state.</span></span> <span data-ttu-id="95a5f-243">Isso limita os efeitos da compactação nos outros componentes para:</span><span class="sxs-lookup"><span data-stu-id="95a5f-243">This limits the effects of compression on the other components to the following:</span></span>  
  
-   <span data-ttu-id="95a5f-244">Operações de importação e exportação em massa</span><span class="sxs-lookup"><span data-stu-id="95a5f-244">Bulk import and export operations</span></span>  
  
     <span data-ttu-id="95a5f-245">Quando os dados são exportados, mesmo em formato nativo, a saída dos dados é realizada no formato de linha descompactada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-245">When data is exported, even in native format, the data is output in the uncompressed row format.</span></span> <span data-ttu-id="95a5f-246">Isso pode fazer com que o tamanho do arquivo de dados exportado seja significativamente maior do que os dados de origem.</span><span class="sxs-lookup"><span data-stu-id="95a5f-246">This can cause the size of exported data file to be significantly larger than the source data.</span></span>  
  
     <span data-ttu-id="95a5f-247">Quando os dados são importados, se a tabela de destino tiver sido habilitada para compactação, os dados serão convertidos pelo mecanismo de armazenamento em formato de linha compactada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-247">When data is imported, if the target table has been enabled for compression, the data is converted by the storage engine into compressed row format.</span></span> <span data-ttu-id="95a5f-248">Isso pode causar um aumento no uso da CPU se comparado à importação de dados em uma tabela descompactada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-248">This can cause increased CPU usage compared to when data is imported into an uncompressed table.</span></span>  
  
     <span data-ttu-id="95a5f-249">Quando os dados são importados em massa para um heap com compactação de página, a operação de importação em massa tentará compactar os dados com a compactação de página quando eles forem inseridos.</span><span class="sxs-lookup"><span data-stu-id="95a5f-249">When data is bulk imported into a heap with page compression, the bulk import operation will try to compress the data with page compression when the data is inserted.</span></span>  
  
-   <span data-ttu-id="95a5f-250">A compactação não afeta o backup e a restauração.</span><span class="sxs-lookup"><span data-stu-id="95a5f-250">Compression does not affect backup and restore.</span></span>  
  
-   <span data-ttu-id="95a5f-251">A compactação não afeta o envio de logs.</span><span class="sxs-lookup"><span data-stu-id="95a5f-251">Compression does not affect log shipping.</span></span>  
  
-   <span data-ttu-id="95a5f-252">A compactação de dados é incompatível com colunas esparsas.</span><span class="sxs-lookup"><span data-stu-id="95a5f-252">Data compression is incompatible with sparse columns.</span></span> <span data-ttu-id="95a5f-253">Portanto, as tabelas que contêm colunas esparsas não podem ser compactadas, assim como as colunas esparsas não podem ser adicionadas a uma tabela compactada.</span><span class="sxs-lookup"><span data-stu-id="95a5f-253">Therefore, tables containing sparse columns cannot be compressed nor can sparse columns be added to a compressed table.</span></span>  
  
-   <span data-ttu-id="95a5f-254">A habilitação da compactação pode fazer com que os planos de consulta sejam alterados, porque os dados são armazenados usando um número diferente de páginas e um número de linhas por página.</span><span class="sxs-lookup"><span data-stu-id="95a5f-254">Enabling compression can cause query plans to change because the data is stored using a different number of pages and number of rows per page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="95a5f-255">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="95a5f-255">See Also</span></span>  
 <span data-ttu-id="95a5f-256">[Implementação da compactação de linha](row-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="95a5f-256">[Row Compression Implementation](row-compression-implementation.md) </span></span>  
 <span data-ttu-id="95a5f-257">[Implementação da compactação de página](page-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="95a5f-257">[Page Compression Implementation](page-compression-implementation.md) </span></span>  
 <span data-ttu-id="95a5f-258">[Implementação da compactação Unicode](unicode-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="95a5f-258">[Unicode Compression Implementation](unicode-compression-implementation.md) </span></span>  
 <span data-ttu-id="95a5f-259">[CREATE PARTITION SCHEME &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-scheme-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="95a5f-259">[CREATE PARTITION SCHEME &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-scheme-transact-sql) </span></span>  
 <span data-ttu-id="95a5f-260">[CREATE PARTITION FUNCTION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-function-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="95a5f-260">[CREATE PARTITION FUNCTION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-function-transact-sql) </span></span>  
 <span data-ttu-id="95a5f-261">[CREATE TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-table-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="95a5f-261">[CREATE TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-table-transact-sql) </span></span>  
 <span data-ttu-id="95a5f-262">[ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="95a5f-262">[ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span></span>  
 <span data-ttu-id="95a5f-263">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="95a5f-263">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span></span>  
 [<span data-ttu-id="95a5f-264">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="95a5f-264">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
  
