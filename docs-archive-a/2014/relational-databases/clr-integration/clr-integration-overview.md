---
title: Visão geral da integração do CLR | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- common language runtime [SQL Server], about CLR integration
- extended stored procedures [SQL Server], vs. managed code
- objects [CLR integration]
- Transact-SQL vs. managed code
- managed code [SQL Server], vs. Transact-SQL
- managed code [SQL Server], vs. extended stored procedures
- execution at client vs. execution at server [CLR integration]
ms.assetid: 5aa176da-3652-4afa-a742-4c40c77ce5c3
author: rothja
ms.author: jroth
ms.openlocfilehash: ab7bb50109fa6b0a313da24f0e6164350a6160e3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87682275"
---
# <a name="overview-of-clr-integration"></a><span data-ttu-id="0c617-102">Visão geral da integração CLR</span><span class="sxs-lookup"><span data-stu-id="0c617-102">Overview of CLR Integration</span></span>
  <span data-ttu-id="0c617-103">O CLR (Common Language Runtime) é o centro do Microsoft .NET Framework; ele fornece o ambiente de execução para todo o código do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0c617-103">The common language runtime (CLR) is the heart of the Microsoft .NET Framework and provides the execution environment for all .NET Framework code.</span></span> <span data-ttu-id="0c617-104">O código executado no CLR é chamado de código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="0c617-104">Code that runs within the CLR is referred to as managed code.</span></span> <span data-ttu-id="0c617-105">O CLR fornece diversas funções e serviços necessários para a execução de programas, incluindo a compilação JIT (Just-In-Time), alocação e gerenciamento de memória, imposição de segurança de tipos, tratamento de exceções, gerenciamento de threads e segurança.</span><span class="sxs-lookup"><span data-stu-id="0c617-105">The CLR provides various functions and services required for program execution, including just-in-time (JIT) compilation, allocating and managing memory, enforcing type safety, exception handling, thread management, and security.</span></span>  <span data-ttu-id="0c617-106">Consulte o SDK do .NET Framework para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="0c617-106">See the .NET Framework SDK for more information.</span></span>  
  
 <span data-ttu-id="0c617-107">Com o CLR hospedado no Microsoft SQL Server (a chamada integração CLR), você pode criar procedimentos armazenados, gatilhos, funções definidas pelo usuário, tipos definidos pelo usuário e agregações definidas pelo usuário no código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="0c617-107">With the CLR hosted in Microsoft SQL Server (called CLR integration), you can author stored procedures, triggers, user-defined functions, user-defined types, and user-defined aggregates in managed code.</span></span> <span data-ttu-id="0c617-108">Como o código gerenciado é compilado em código nativo antes da execução, você pode obter aumentos significativos de desempenho em alguns cenários.</span><span class="sxs-lookup"><span data-stu-id="0c617-108">Because managed code compiles to native code prior to execution, you can achieve significant performance increases in some scenarios.</span></span>  
  
 <span data-ttu-id="0c617-109">O código gerenciado usa a CAS (segurança de acesso do código) para impedir que os assemblies executem determinadas operações.</span><span class="sxs-lookup"><span data-stu-id="0c617-109">Managed code uses Code Access Security (CAS) to prevent assemblies from performing certain operations.</span></span> <span data-ttu-id="0c617-110">O [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] usa a CAS para ajudar a proteger o código gerenciado e evitar o comprometimento do sistema operacional ou do servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0c617-110">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] uses CAS to help secure the managed code and prevent compromise of the operating system or database server.</span></span>  
  
## <a name="advantages-of-clr-integration"></a><span data-ttu-id="0c617-111">Vantagens da integração CLR</span><span class="sxs-lookup"><span data-stu-id="0c617-111">Advantages of CLR Integration</span></span>  
 <span data-ttu-id="0c617-112">O [!INCLUDE[tsql](../../../includes/tsql-md.md)] foi especificamente projetado para a manipulação e o acesso direto a dados no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0c617-112">[!INCLUDE[tsql](../../../includes/tsql-md.md)] is specifically designed for direct data access and manipulation in the database.</span></span> <span data-ttu-id="0c617-113">Embora o [!INCLUDE[tsql](../../../includes/tsql-md.md)] se destaque no gerenciamento e no acesso a dados, ele não é uma linguagem de programação totalmente desenvolvida.</span><span class="sxs-lookup"><span data-stu-id="0c617-113">While [!INCLUDE[tsql](../../../includes/tsql-md.md)] excels at data access and management, it is not a full-fledged programming language.</span></span> <span data-ttu-id="0c617-114">Por exemplo, o [!INCLUDE[tsql](../../../includes/tsql-md.md)] não oferece suporte a matrizes, coleções, loops for-each, deslocamento de bit ou classes.</span><span class="sxs-lookup"><span data-stu-id="0c617-114">For example, [!INCLUDE[tsql](../../../includes/tsql-md.md)] does not support arrays, collections, for-each loops, bit shifting, or classes.</span></span> <span data-ttu-id="0c617-115">Embora algumas dessas construções possam ser simuladas no [!INCLUDE[tsql](../../../includes/tsql-md.md)], o código gerenciado oferece suporte integrado a elas.</span><span class="sxs-lookup"><span data-stu-id="0c617-115">While some of these constructs can be simulated in [!INCLUDE[tsql](../../../includes/tsql-md.md)], managed code has integrated support for these constructs.</span></span> <span data-ttu-id="0c617-116">Dependendo do cenário, esses recursos podem representar um motivo convincente para implementar determinada funcionalidade de banco de dados no código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="0c617-116">Depending on the scenario, these features can provide a compelling reason to implement certain database functionality in managed code.</span></span>  
  
 <span data-ttu-id="0c617-117">O Microsoft Visual Basic .NET e o Microsoft Visual C# oferecem recursos orientados a objeto, como encapsulamento, herança e polimorfismo.</span><span class="sxs-lookup"><span data-stu-id="0c617-117">Microsoft Visual Basic .NET and Microsoft Visual C# offer object-oriented capabilities such as encapsulation, inheritance, and polymorphism.</span></span> <span data-ttu-id="0c617-118">Agora, o código relacionado pode ser facilmente organizado em classes e namespaces.</span><span class="sxs-lookup"><span data-stu-id="0c617-118">Related code can now be easily organized into classes and namespaces.</span></span> <span data-ttu-id="0c617-119">Ao trabalhar com grandes quantidades de código de servidor, isso permite organizar e manter seu código de forma mais fácil.</span><span class="sxs-lookup"><span data-stu-id="0c617-119">When you are working with large amounts of server code, this allows you to more easily organize and maintain your code.</span></span>  
  
 <span data-ttu-id="0c617-120">O código gerenciado é mais adequado do que o [!INCLUDE[tsql](../../../includes/tsql-md.md)] para cálculos e lógica de execução complicada, além de oferecer suporte amplo a diversas tarefas complexas, incluindo o tratamento de cadeias de caracteres e as expressões regulares.</span><span class="sxs-lookup"><span data-stu-id="0c617-120">Managed code is better suited than [!INCLUDE[tsql](../../../includes/tsql-md.md)] for calculations and complicated execution logic, and features extensive support for many complex tasks, including string handling and regular expressions.</span></span> <span data-ttu-id="0c617-121">Com a funcionalidade que se encontra na Biblioteca do .NET Framework, você tem acesso a milhares de classes e rotinas pré-criadas.</span><span class="sxs-lookup"><span data-stu-id="0c617-121">With the functionality found in the .NET Framework Library, you have access to thousands of pre-built classes and routines.</span></span> <span data-ttu-id="0c617-122">Elas podem ser acessadas facilmente de qualquer procedimento armazenado, gatilho ou função definida pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="0c617-122">These can be easily accessed from any stored procedure, trigger or user defined function.</span></span> <span data-ttu-id="0c617-123">A BCL (Base Class Library) inclui classes que fornecem funcionalidade para manipulação de cadeias de caracteres, operações matemáticas avançadas, acesso a arquivos, criptografia e outros.</span><span class="sxs-lookup"><span data-stu-id="0c617-123">The Base Class Library (BCL) includes classes that provide functionality for string manipulation, advanced math operations, file access, cryptography, and more.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="0c617-124">Várias dessas classes estão disponíveis para uso a partir do código CLR no SQL Server, mas aquelas que não são apropriadas para uso do servidor (por exemplo, classes de janelas) não estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="0c617-124">While many of these classes are available for use from within CLR code in SQL Server, those that are not appropriate for server-side use (for example, windowing classes), are not available.</span></span> <span data-ttu-id="0c617-125">Para obter mais informações, consulte [bibliotecas de .NET Framework com suporte](database-objects/supported-net-framework-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="0c617-125">For more information, see [Supported .NET Framework Libraries](database-objects/supported-net-framework-libraries.md).</span></span>  
  
 <span data-ttu-id="0c617-126">Uma das vantagens do código gerenciado é a segurança de tipos ou a garantia de que o código acesse apenas os tipos de modos permitidos e bem definidos.</span><span class="sxs-lookup"><span data-stu-id="0c617-126">One of the benefits of managed code is type safety, or the assurance that code accesses types only in well-defined, permissible ways.</span></span> <span data-ttu-id="0c617-127">Antes da execução do código gerenciado, o CLR verifica se o código é seguro.</span><span class="sxs-lookup"><span data-stu-id="0c617-127">Before managed code is executed, the CLR verifies that the code is safe.</span></span> <span data-ttu-id="0c617-128">Por exemplo, o código é verificado para assegurar que nenhuma memória que não tenha sido gravada anteriormente seja lida.</span><span class="sxs-lookup"><span data-stu-id="0c617-128">For example, the code is checked to ensure that no memory is read that has not previously been written.</span></span> <span data-ttu-id="0c617-129">O CLR também pode ajudar garantir que o código não manipule a memória não gerenciada.</span><span class="sxs-lookup"><span data-stu-id="0c617-129">The CLR can also help ensure that code does not manipulate unmanaged memory.</span></span>  
  
 <span data-ttu-id="0c617-130">A integração CLR oferece a possibilidade de melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="0c617-130">CLR integration offers the potential for improved performance.</span></span> <span data-ttu-id="0c617-131">Para obter informações, consulte [desempenho da integração CLR](clr-integration-architecture-performance.md).</span><span class="sxs-lookup"><span data-stu-id="0c617-131">For information, see [Performance of CLR Integration](clr-integration-architecture-performance.md).</span></span>  
  
## <a name="choosing-between-transact-sql-and-managed-code"></a><span data-ttu-id="0c617-132">Escolhendo entre o Transact-SQL e o código gerenciado</span><span class="sxs-lookup"><span data-stu-id="0c617-132">Choosing Between Transact-SQL and Managed Code</span></span>  
 <span data-ttu-id="0c617-133">Ao escrever procedimentos armazenados, gatilhos e funções definidas pelo usuário, você deve decidir se deseja usar o [!INCLUDE[tsql](../../../includes/tsql-md.md)] tradicional ou uma linguagem do .NET Framework, como Visual Basic .NET ou Visual C#.</span><span class="sxs-lookup"><span data-stu-id="0c617-133">When writing stored procedures, triggers, and user-defined functions, one decision you must make is whether to use traditional [!INCLUDE[tsql](../../../includes/tsql-md.md)], or a .NET Framework language such as Visual Basic .NET or Visual C#.</span></span> <span data-ttu-id="0c617-134">Use o [!INCLUDE[tsql](../../../includes/tsql-md.md)] quando o código executar o acesso a dados principalmente com pouca ou nenhuma lógica de procedimento.</span><span class="sxs-lookup"><span data-stu-id="0c617-134">Use [!INCLUDE[tsql](../../../includes/tsql-md.md)] when the code will mostly perform data access with little or no procedural logic.</span></span> <span data-ttu-id="0c617-135">Use o código gerenciado para funções que utilizam intensamente a CPU e procedimentos que apresentam lógica complexa, ou quando desejar usar a BCL do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0c617-135">Use managed code for CPU-intensive functions and procedures that feature complex logic, or when you want to make use of the BCL of the .NET Framework.</span></span>  
  
### <a name="choosing-between-execution-in-the-server-and-execution-in-the-client"></a><span data-ttu-id="0c617-136">Escolhendo entre a execução no servidor e a execução no cliente</span><span class="sxs-lookup"><span data-stu-id="0c617-136">Choosing Between Execution in the Server and Execution in the Client</span></span>  
 <span data-ttu-id="0c617-137">Outro fator que influencia sua decisão de usar o [!INCLUDE[tsql](../../../includes/tsql-md.md)] ou o código gerenciado é o local onde o código residirá: no computador servidor ou no computador cliente.</span><span class="sxs-lookup"><span data-stu-id="0c617-137">Another factor in your decision about whether to use [!INCLUDE[tsql](../../../includes/tsql-md.md)] or managed code is where you would like your code to reside, the server computer or the client computer.</span></span> <span data-ttu-id="0c617-138">Tanto o [!INCLUDE[tsql](../../../includes/tsql-md.md)] quanto o código gerenciado podem ser executados no servidor.</span><span class="sxs-lookup"><span data-stu-id="0c617-138">Both [!INCLUDE[tsql](../../../includes/tsql-md.md)] and managed code can be run on the server.</span></span> <span data-ttu-id="0c617-139">Assim, o código e os dados ficam próximos, o que possibilita o aproveitamento do poder de processamento do servidor.</span><span class="sxs-lookup"><span data-stu-id="0c617-139">This places code and data close together, and allows you to take advantage of the processing power of the server.</span></span> <span data-ttu-id="0c617-140">Por outro lado, talvez você queira evitar colocar tarefas que utilizam intensamente o processador no servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0c617-140">On the other hand, you may wish to avoid placing processor intensive tasks on your database server.</span></span> <span data-ttu-id="0c617-141">Atualmente, a maioria dos computadores cliente tem uma capacidade grande, e talvez você queira aproveitar esse poder de processamento colocando a maior quantidade de código possível no cliente.</span><span class="sxs-lookup"><span data-stu-id="0c617-141">Most client computers today are very powerful, and you may wish to take advantage of this processing power by placing as much code as possible on the client.</span></span> <span data-ttu-id="0c617-142">O código gerenciado pode ser executado em um computador cliente, o que não ocorre com o [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0c617-142">Managed code can run on a client computer, while [!INCLUDE[tsql](../../../includes/tsql-md.md)] cannot.</span></span>  
  
## <a name="choosing-between-extended-stored-procedures-and-managed-code"></a><span data-ttu-id="0c617-143">Escolhendo entre procedimentos armazenados estendidos e o código gerenciado</span><span class="sxs-lookup"><span data-stu-id="0c617-143">Choosing Between Extended Stored Procedures and Managed Code</span></span>  
 <span data-ttu-id="0c617-144">Os procedimentos armazenados estendidos podem ser criados de forma a executar funcionalidades que não são possíveis com os procedimentos armazenados do [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0c617-144">Extended stored procedures can be built to perform functionality not possible with [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures.</span></span> <span data-ttu-id="0c617-145">Porém, os procedimentos armazenados estendidos podem comprometer a integridade do processo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], o que não ocorre com o código gerenciado, que é verificado para assegurar que é fortemente tipado.</span><span class="sxs-lookup"><span data-stu-id="0c617-145">Extended stored procedures can, however, compromise the integrity of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] process, while managed code that is verified to be type-safe cannot.</span></span> <span data-ttu-id="0c617-146">Além disso, o gerenciamento da memória, o agendamento de threads e fibras, e os serviços de sincronização são integrados de forma mais aprofundada entre o código gerenciado do CLR e o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0c617-146">Further, memory management, scheduling of threads and fibers, and synchronization services are more deeply integrated between the managed code of the CLR and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="0c617-147">Com a integração CLR, você tem uma forma mais segura do que os procedimentos armazenados estendidos para gravar os procedimentos armazenados necessários à execução de tarefas que não são possíveis no [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0c617-147">With CLR integration, you have a more secure way than extended stored procedures to write the stored procedures you need to perform tasks not possible in [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="0c617-148">Para obter mais informações sobre integração CLR e procedimentos armazenados estendidos, consulte [desempenho da integração CLR](clr-integration-architecture-performance.md).</span><span class="sxs-lookup"><span data-stu-id="0c617-148">For more information about CLR integration and extended stored procedures, see [Performance of CLR Integration](clr-integration-architecture-performance.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0c617-149">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="0c617-149">See Also</span></span>  
 <span data-ttu-id="0c617-150">[Instalando o .NET Framework](https://technet.microsoft.com/library/ms166014\(v=SQL.105\).aspx) </span><span class="sxs-lookup"><span data-stu-id="0c617-150">[Installing the .NET Framework](https://technet.microsoft.com/library/ms166014\(v=SQL.105\).aspx) </span></span>  
 <span data-ttu-id="0c617-151">[Arquitetura da integração CLR](../../database-engine/dev-guide/architecture-of-clr-integration.md) </span><span class="sxs-lookup"><span data-stu-id="0c617-151">[Architecture of CLR Integration](../../database-engine/dev-guide/architecture-of-clr-integration.md) </span></span>  
 <span data-ttu-id="0c617-152">[Acesso a dados de objetos de banco de dado CLR](data-access/data-access-from-clr-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="0c617-152">[Data Access from CLR Database Objects](data-access/data-access-from-clr-database-objects.md) </span></span>  
 [<span data-ttu-id="0c617-153">Introdução à integração CLR</span><span class="sxs-lookup"><span data-stu-id="0c617-153">Getting Started with CLR Integration</span></span>](database-objects/getting-started-with-clr-integration.md)  
  
  
