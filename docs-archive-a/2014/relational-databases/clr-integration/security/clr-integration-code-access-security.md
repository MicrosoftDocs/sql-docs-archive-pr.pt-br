---
title: Segurança de acesso ao código de integração CLR | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- UNSAFE assemblies
- permissions [CLR integration]
- common language runtime [SQL Server], security
- SAFE assemblies
- code access security [CLR integration]
- EXTERNAL_ACCESS assemblies
ms.assetid: 2111cfe0-d5e0-43b1-93c3-e994ac0e9729
author: rothja
ms.author: jroth
ms.openlocfilehash: 75b283da2760b39349351802a83caae04e546c06
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87572584"
---
# <a name="clr-integration-code-access-security"></a><span data-ttu-id="900a6-102">Segurança de acesso a código da integração CLR</span><span class="sxs-lookup"><span data-stu-id="900a6-102">CLR Integration Code Access Security</span></span>
  <span data-ttu-id="900a6-103">O CLR (common language runtime) dá suporte a um modelo de segurança denominado segurança de acesso para código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="900a6-103">The common language runtime (CLR) supports a security model called code access security for managed code.</span></span> <span data-ttu-id="900a6-104">Nesse modelo, são concedidas permissões a assemblies com base na identidade do código.</span><span class="sxs-lookup"><span data-stu-id="900a6-104">In this model, permissions are granted to assemblies based on the identity of the code.</span></span> <span data-ttu-id="900a6-105">Para obter mais informações, consulte a seção "Segurança de acesso do código" no Software Development Kit do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="900a6-105">For more information, see the "Code Access Security" section in the .NET Framework software development kit.</span></span>  
  
 <span data-ttu-id="900a6-106">A política de segurança que determina as permissões concedidas a assemblies é definida em três locais diferentes:</span><span class="sxs-lookup"><span data-stu-id="900a6-106">The security policy that determines the permissions granted to assemblies is defined in three different places:</span></span>  
  
-   <span data-ttu-id="900a6-107">Política de máquina: trata-se da política em vigor para todo o código gerenciado em execução na máquina na qual o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] está instalado.</span><span class="sxs-lookup"><span data-stu-id="900a6-107">Machine policy: This is the policy in effect for all managed code running in the machine on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span>  
  
-   <span data-ttu-id="900a6-108">Política de usuário: trata-se da política em vigor para o código gerenciado hospedado por um processo.</span><span class="sxs-lookup"><span data-stu-id="900a6-108">User policy: This is the policy in effect for managed code hosted by a process.</span></span> <span data-ttu-id="900a6-109">Para o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] serviço está em execução.</span><span class="sxs-lookup"><span data-stu-id="900a6-109">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running.</span></span>  
  
-   <span data-ttu-id="900a6-110">Política de host: trata-se da política configurada pelo host do CLR (nesse caso, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) em vigor para o código gerenciado em execução no host.</span><span class="sxs-lookup"><span data-stu-id="900a6-110">Host policy: This is the policy set up by the host of the CLR (in this case, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) that is in effect for managed code running in that host.</span></span>  
  
 <span data-ttu-id="900a6-111">O mecanismo da segurança de acesso do código para o qual o CLR oferece suporte se baseia na pressuposição de que o runtime pode hospedar tanto o código totalmente confiável quanto o parcialmente confiável.</span><span class="sxs-lookup"><span data-stu-id="900a6-111">The code access security mechanism supported by the CLR is based on the assumption that the runtime can host both fully trusted and partially trusted code.</span></span> <span data-ttu-id="900a6-112">Os recursos protegidos pela segurança de acesso ao código CLR são normalmente encapsulados por interfaces de programação de aplicativo gerenciadas que requirethem a permissão correspondente antes de permitir o acesso ao recurso.</span><span class="sxs-lookup"><span data-stu-id="900a6-112">The resources that are protected by CLR code access security are typically wrapped by managed application programming interfaces that requirethe corresponding permission before allowing access to the resource.</span></span> <span data-ttu-id="900a6-113">O Demandfor a permissão será satisfeita somente se todos os chamadores (no nível do assembly) na pilha de chamadas tiverem a permissão de recurso correspondente.</span><span class="sxs-lookup"><span data-stu-id="900a6-113">The demandfor the permission is satisfied only if all the callers (at the assembly level) in the call stack have the corresponding resource permission.</span></span>  
  
 <span data-ttu-id="900a6-114">O conjunto de permissões de segurança de acesso ao código que são concedidas ao código gerenciado durante a execução dentro [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] concede um conjunto de permissões a um assembly carregado no [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , o conjunto eventual de permissões dadas ao código do usuário pode ser restringido ainda mais pelas políticas no nível do usuário e da máquina.</span><span class="sxs-lookup"><span data-stu-id="900a6-114">The set of code access security permissions that are granted to managed code when running inside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] grants a set of permissions to an assembly loaded in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], the eventual set of permissions given to user code may be restricted further by the user and machine-level policies.</span></span>  
  
## <a name="sql-server-host-policy-level-permission-sets"></a><span data-ttu-id="900a6-115">Conjuntos de permissões do nível de política do host do SQL Server</span><span class="sxs-lookup"><span data-stu-id="900a6-115">SQL Server Host Policy Level Permission Sets</span></span>  
 <span data-ttu-id="900a6-116">O conjunto de permissões da segurança de acesso do código concedidas a assemblies pelo nível de política de host do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] é determinado pelo conjunto de permissões especificado durante a criação do assembly.</span><span class="sxs-lookup"><span data-stu-id="900a6-116">The set of code access security permissions granted to assemblies by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy level is determined by the permission set specified when creating the assembly.</span></span> <span data-ttu-id="900a6-117">Há três conjuntos de permissões: `SAFE` `EXTERNAL_ACCESS` e `UNSAFE` (especificado usando a opção **PERMISSION_SET** de[CREATE assembly &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-assembly-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="900a6-117">There are three permission sets: `SAFE`, `EXTERNAL_ACCESS` and `UNSAFE` (specified using the **PERMISSION_SET** option of[CREATE ASSEMBLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-assembly-transact-sql)).</span></span>  
  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="900a6-118">.</span><span class="sxs-lookup"><span data-stu-id="900a6-118">.</span></span> <span data-ttu-id="900a6-119">Essa política não se destina ao domínio de aplicativo padrão que entraria em vigor quando o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] criasse uma instância do CLR.</span><span class="sxs-lookup"><span data-stu-id="900a6-119">This policy is not meant for the default application domain that would be in effect when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] creates an instance of the CLR.</span></span>  
  
 <span data-ttu-id="900a6-120">O [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fixedpolicy para assemblies de sistema e política especificada pelo usuário para assemblies de usuário.</span><span class="sxs-lookup"><span data-stu-id="900a6-120">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fixedpolicy for system assemblies and user-specified policy for user assemblies.</span></span>  
  
 <span data-ttu-id="900a6-121">A política fixa para assemblies do CLR e assemblies de sistema do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] concede a eles confiança total.</span><span class="sxs-lookup"><span data-stu-id="900a6-121">The fixed policy for CLR assemblies and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] system assemblies grants them full trust.</span></span>  
  
 <span data-ttu-id="900a6-122">A parte especificada pelo usuário da política de host do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se baseia na especificação de um dos três recipientes de permissão para cada assembly pelo proprietário do assembly.</span><span class="sxs-lookup"><span data-stu-id="900a6-122">The user-specified portion of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy is based on the assembly owner specifying one of three permission buckets for each assembly.</span></span> <span data-ttu-id="900a6-123">Para obter mais informações sobre as permissões de segurança listadas abaixo, consulte o SDK do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="900a6-123">For more information about the security permissions listed below, see the .NET Framework SDK.</span></span>  
  
### <a name="safe"></a><span data-ttu-id="900a6-124">SAFE</span><span class="sxs-lookup"><span data-stu-id="900a6-124">SAFE</span></span>  
 <span data-ttu-id="900a6-125">Somente a computação interna e o acesso a dados local são permitidos.</span><span class="sxs-lookup"><span data-stu-id="900a6-125">Only internal computation and local data access are allowed.</span></span> <span data-ttu-id="900a6-126">`SAFE` é o conjunto de permissões mais restritivo.</span><span class="sxs-lookup"><span data-stu-id="900a6-126">`SAFE` is the most restrictive permission set.</span></span> <span data-ttu-id="900a6-127">O código executado por um assembly com as permissões `SAFE` não pode acessar recursos externos do sistema, como arquivos, rede, variáveis de ambiente ou Registro.</span><span class="sxs-lookup"><span data-stu-id="900a6-127">Code executed by an assembly with `SAFE` permissions cannot access external system resources such as files, the network, environment variables, or the registry.</span></span>  
  
 <span data-ttu-id="900a6-128">Os assemblies `SAFE` têm as seguintes permissões e valores:</span><span class="sxs-lookup"><span data-stu-id="900a6-128">`SAFE` assemblies have the following permissions and values:</span></span>  
  
|<span data-ttu-id="900a6-129">Permissão</span><span class="sxs-lookup"><span data-stu-id="900a6-129">Permission</span></span>|<span data-ttu-id="900a6-130">Valor(es)/descrição</span><span class="sxs-lookup"><span data-stu-id="900a6-130">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`SecurityPermission`|<span data-ttu-id="900a6-131">`Execution:` permissão para executar código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="900a6-131">`Execution:` Permission to execute managed code.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="900a6-132">`Context connection = true`, `context connection = yes`: apenas a conexão de contexto pode ser usada, e a cadeia de conexão só pode especificar um valor igual a "context connection=true" ou "context connection=yes".</span><span class="sxs-lookup"><span data-stu-id="900a6-132">`Context connection = true`, `context connection = yes`: Only the context-connection can be used and the connection string can only specify a value of "context connection=true" or "context connection=yes".</span></span><br /><br /> <span data-ttu-id="900a6-133">**AllowBlankPassword = false:**  Senhas em branco não são permitidas.</span><span class="sxs-lookup"><span data-stu-id="900a6-133">**AllowBlankPassword = false:**  Blank passwords are not permitted.</span></span>|  
  
### <a name="external_access"></a><span data-ttu-id="900a6-134">EXTERNAL_ACCESS</span><span class="sxs-lookup"><span data-stu-id="900a6-134">EXTERNAL_ACCESS</span></span>  
 <span data-ttu-id="900a6-135">EXTERNAL_ACCESS assemblies têm as mesmas permissões que `SAFE` os assemblies, com a capacidade adicional de acessar recursos externos do sistema, como arquivos, redes, variáveis ambientais e o registro.</span><span class="sxs-lookup"><span data-stu-id="900a6-135">EXTERNAL_ACCESS assemblies have the same permissions as `SAFE` assemblies, with the additional ability to access external system resources such as files, networks, environmental variables, and the registry.</span></span>  
  
 <span data-ttu-id="900a6-136">Os assemblies `EXTERNAL_ACCESS` também têm as seguintes permissões e valores:</span><span class="sxs-lookup"><span data-stu-id="900a6-136">`EXTERNAL_ACCESS` assemblies also have the following permissions and values:</span></span>  
  
|<span data-ttu-id="900a6-137">Permissão</span><span class="sxs-lookup"><span data-stu-id="900a6-137">Permission</span></span>|<span data-ttu-id="900a6-138">Valor(es)/descrição</span><span class="sxs-lookup"><span data-stu-id="900a6-138">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`DistributedTransactionPermission`|<span data-ttu-id="900a6-139">`Unrestricted:`As transações distribuídas são permitidas.</span><span class="sxs-lookup"><span data-stu-id="900a6-139">`Unrestricted:` Distributed transactions are allowed.</span></span>|  
|`DNSPermission`|<span data-ttu-id="900a6-140">`Unrestricted:`Permissão para solicitar informações de servidores de nome de domínio.</span><span class="sxs-lookup"><span data-stu-id="900a6-140">`Unrestricted:` Permission to request information from Domain Name Servers.</span></span>|  
|`EnvironmentPermission`|<span data-ttu-id="900a6-141">`Unrestricted:` é permitido o acesso completo ao sistema e às variáveis de ambiente do usuário.</span><span class="sxs-lookup"><span data-stu-id="900a6-141">`Unrestricted:` Full access to system and user environment variables is allowed.</span></span>|  
|`EventLogPermission`|<span data-ttu-id="900a6-142">`Administer:` As seguintes ações são permitidas: criar uma origem do evento, ler logs existentes, excluir origens do evento ou logs, responder a consultas, limpar um log de eventos, escutar eventos e acessar uma coleção de todos os logs de eventos.</span><span class="sxs-lookup"><span data-stu-id="900a6-142">`Administer:` The following actions are allowed: creating an event source, reading existing logs, deleting event sources or logs, responding to entries, clearing an event log, listening to events, and accessing a collection of all event logs.</span></span>|  
|`FileIOPermission`|<span data-ttu-id="900a6-143">`Unrestricted:` é permitido o acesso completo a arquivos e pastas.</span><span class="sxs-lookup"><span data-stu-id="900a6-143">`Unrestricted:` Full access to files and folders is allowed.</span></span>|  
|`KeyContainerPermission`|<span data-ttu-id="900a6-144">`Unrestricted:` é permitido o acesso completo a contêineres de chave.</span><span class="sxs-lookup"><span data-stu-id="900a6-144">`Unrestricted:` Full access to key containers is allowed.</span></span>|  
|`NetworkInformationPermission`|<span data-ttu-id="900a6-145">`Access:` é permitida a execução de ping.</span><span class="sxs-lookup"><span data-stu-id="900a6-145">`Access:` Pinging is permitted.</span></span>|  
|`RegistryPermission`|<span data-ttu-id="900a6-146">Ela permite a leitura de direitos para `HKEY_CLASSES_ROOT`, `HKEY_LOCAL_MACHINE`, `HKEY_CURRENT_USER`, `HKEY_CURRENT_CONFIG` e `HKEY_USERS.`</span><span class="sxs-lookup"><span data-stu-id="900a6-146">Allows read rights to `HKEY_CLASSES_ROOT`, `HKEY_LOCAL_MACHINE`, `HKEY_CURRENT_USER`, `HKEY_CURRENT_CONFIG`, and `HKEY_USERS.`</span></span>|  
|`SecurityPermission`|<span data-ttu-id="900a6-147">`Assertion:` possibilidade de declarar que todos os chamadores do código tenham a permissão necessária à operação.</span><span class="sxs-lookup"><span data-stu-id="900a6-147">`Assertion:` Ability to assert that all the callers of this code have the requisite permission for the operation.</span></span><br /><br /> <span data-ttu-id="900a6-148">`ControlPrincipal:` possibilidade de manipular o objeto principal.</span><span class="sxs-lookup"><span data-stu-id="900a6-148">`ControlPrincipal:` Ability to manipulate the principal object.</span></span><br /><br /> <span data-ttu-id="900a6-149">`Execution:` permissão para executar código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="900a6-149">`Execution:` Permission to execute managed code.</span></span><br /><br /> <span data-ttu-id="900a6-150">`SerializationFormatter:` possibilidade de fornecer serviços de serialização.</span><span class="sxs-lookup"><span data-stu-id="900a6-150">`SerializationFormatter:` Ability to provide serialization services.</span></span>|  
|<span data-ttu-id="900a6-151">**SmtpPermission**</span><span class="sxs-lookup"><span data-stu-id="900a6-151">**SmtpPermission**</span></span>|<span data-ttu-id="900a6-152">`Access:` são permitidas conexões de saída com a porta de host SMTP 25.</span><span class="sxs-lookup"><span data-stu-id="900a6-152">`Access:` Outbound connections to SMTP host port 25 are allowed.</span></span>|  
|`SocketPermission`|<span data-ttu-id="900a6-153">`Connect:` são permitidas conexões de saída (todas as portas, todos os protocolos) em um endereço de transporte.</span><span class="sxs-lookup"><span data-stu-id="900a6-153">`Connect:` Outbound connections (all ports, all protocols) on a transport address are allowed.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="900a6-154">`Unrestricted:` é permitido o acesso completo à fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="900a6-154">`Unrestricted:` Full access to the datasource is allowed.</span></span>|  
|`StorePermission`|<span data-ttu-id="900a6-155">`Unrestricted:` é permitido o acesso completo a repositórios de certificados X.509.</span><span class="sxs-lookup"><span data-stu-id="900a6-155">`Unrestricted:` Full access to X.509 certificate stores is allowed.</span></span>|  
|`WebPermission`|<span data-ttu-id="900a6-156">`Connect:` são permitidas conexões de saída com recursos da Web.</span><span class="sxs-lookup"><span data-stu-id="900a6-156">`Connect:` Outbound connections to web resources are allowed.</span></span>|  
  
### <a name="unsafe"></a><span data-ttu-id="900a6-157">UNSAFE</span><span class="sxs-lookup"><span data-stu-id="900a6-157">UNSAFE</span></span>  
 <span data-ttu-id="900a6-158">UNSAFE permite que os assemblies tenham acesso irrestrito aos recursos, dentro e fora do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="900a6-158">UNSAFE allows assemblies unrestricted access to resources, both within and outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="900a6-159">O código em execução em um assembly `UNSAFE` também pode chamar código não gerenciado.</span><span class="sxs-lookup"><span data-stu-id="900a6-159">Code executing from within an `UNSAFE` assembly can also call unmanaged code.</span></span>  
  
 <span data-ttu-id="900a6-160">Os assemblies `UNSAFE` recebem `FullTrust`.</span><span class="sxs-lookup"><span data-stu-id="900a6-160">`UNSAFE` assemblies are given `FullTrust`.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="900a6-161">A opção `SAFE` é a configuração de permissão recomendada para assemblies que executam tarefas de computação e de gerenciamento de dados sem acessar recursos externos do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="900a6-161">`SAFE` is the recommended permission setting for assemblies that perform computation and data management tasks without accessing resources outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="900a6-162">`EXTERNAL_ACCESS`os assemblies por padrão são executados como a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] conta de serviço, a permissão para executar `EXTERNAL_ACCESS` deve ser dada somente a logons confiáveis para execução como a conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="900a6-162">`EXTERNAL_ACCESS` assemblies by default execute as the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account, permission to execute `EXTERNAL_ACCESS` should only be given to logins trusted to run as the service account.</span></span> <span data-ttu-id="900a6-163">De uma perspectiva da segurança, os assemblies `EXTERNAL_ACCESS` e `UNSAFE` são idênticos.</span><span class="sxs-lookup"><span data-stu-id="900a6-163">From a security perspective, `EXTERNAL_ACCESS` and `UNSAFE` assemblies are identical.</span></span> <span data-ttu-id="900a6-164">No entanto, os assemblies `EXTERNAL_ACCESS` fornecem várias proteções de confiabilidade e eficiência que não se encontram nos assemblies `UNSAFE`.</span><span class="sxs-lookup"><span data-stu-id="900a6-164">However, `EXTERNAL_ACCESS` assemblies provide various reliability and robustness protections that are not in `UNSAFE` assemblies.</span></span> <span data-ttu-id="900a6-165">Especificar `UNSAFE` permite que o código no assembly execute operações ilegais em relação ao [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="900a6-165">Specifying `UNSAFE` allows the code in the assembly to perform illegal operations against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="900a6-166">Para obter mais informações sobre como criar assemblies CLR no [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , consulte [Gerenciando assemblies de integração CLR](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="900a6-166">For more information about creating CLR assemblies in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Managing CLR Integration Assemblies](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md).</span></span>  
  
## <a name="accessing-external-resources"></a><span data-ttu-id="900a6-167">Acessando recursos externos</span><span class="sxs-lookup"><span data-stu-id="900a6-167">Accessing External Resources</span></span>  
 <span data-ttu-id="900a6-168">Caso uma UDT (tipo definido pelo usuário), um procedimento armazenado ou outro tipo de construção seja registrado com o conjunto de permissões `SAFE`, o código gerenciado em execução na construção não pode acessar recursos externos.</span><span class="sxs-lookup"><span data-stu-id="900a6-168">If a user-defined type (UDT), stored procedure, or other type of construct assembly is registered with the `SAFE` permission set, then managed code executing in the construct is unable to access external resources.</span></span> <span data-ttu-id="900a6-169">No entanto, caso os conjuntos de permissões `EXTERNAL_ACCESS` ou `UNSAFE` sejam especificados e o código gerenciado tente acessar recursos externos, o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] aplica as seguintes regras:</span><span class="sxs-lookup"><span data-stu-id="900a6-169">However, if either the `EXTERNAL_ACCESS` or `UNSAFE` permission sets are specified, and managed code attempts to access external resources, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] applies the following rules:</span></span>  
  
|<span data-ttu-id="900a6-170">Se</span><span class="sxs-lookup"><span data-stu-id="900a6-170">If</span></span>|<span data-ttu-id="900a6-171">Então</span><span class="sxs-lookup"><span data-stu-id="900a6-171">Then</span></span>|  
|--------|----------|  
|<span data-ttu-id="900a6-172">O contexto de execução corresponda a um logon do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="900a6-172">The execution context corresponds to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login.</span></span>|<span data-ttu-id="900a6-173">As tentativas de acessar recursos externos são negadas, e ocorre uma exceção de segurança.</span><span class="sxs-lookup"><span data-stu-id="900a6-173">Attempts to access external resources are denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="900a6-174">O contexto de execução corresponda a um logon do Windows e seja o chamador original.</span><span class="sxs-lookup"><span data-stu-id="900a6-174">The execution context corresponds to a Windows login and the execution context is the original caller.</span></span>|<span data-ttu-id="900a6-175">O recurso externo é acesso no contexto de segurança da conta do serviço do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="900a6-175">The external resource is accessed under the security context of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account.</span></span>|  
|<span data-ttu-id="900a6-176">O chamador não for o chamador original.</span><span class="sxs-lookup"><span data-stu-id="900a6-176">The caller is not the original caller.</span></span>|<span data-ttu-id="900a6-177">O acesso será negado, e ocorrerá uma exceção de segurança.</span><span class="sxs-lookup"><span data-stu-id="900a6-177">Access is denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="900a6-178">O contexto de execução corresponder a um logon do Windows e o contexto da execução for o chamador original, e o chamador tiver sido representado.</span><span class="sxs-lookup"><span data-stu-id="900a6-178">The execution context corresponds to a Windows login and the execution context is the original caller and the caller has been impersonated.</span></span>|<span data-ttu-id="900a6-179">O acesso usará o contexto de segurança do chamador, não a conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="900a6-179">Access uses the caller security context; not the service account.</span></span>|  
  
## <a name="permission-set-summary"></a><span data-ttu-id="900a6-180">Resumo do conjunto de permissões</span><span class="sxs-lookup"><span data-stu-id="900a6-180">Permission Set Summary</span></span>  
 <span data-ttu-id="900a6-181">O gráfico a seguir resume as restrições e as permissões concedidas aos conjuntos de permissões `SAFE`, `EXTERNAL_ACCESS` e `UNSAFE`.</span><span class="sxs-lookup"><span data-stu-id="900a6-181">The following chart summarizes the restrictions and permissions granted to the `SAFE`, `EXTERNAL_ACCESS`, and `UNSAFE` permission sets.</span></span>  
  
|||||  
|-|-|-|-|  
||`SAFE`|`EXTERNAL_ACCESS`|`UNSAFE`|  
|`Code Access Security Permissions`|<span data-ttu-id="900a6-182">Somente execução</span><span class="sxs-lookup"><span data-stu-id="900a6-182">Execute only</span></span>|<span data-ttu-id="900a6-183">Execução + acesso a recursos externos</span><span class="sxs-lookup"><span data-stu-id="900a6-183">Execute + access to external resources</span></span>|<span data-ttu-id="900a6-184">Irrestrito (inclusive P/Invoke)</span><span class="sxs-lookup"><span data-stu-id="900a6-184">Unrestricted (including P/Invoke)</span></span>|  
|`Programming model restrictions`|<span data-ttu-id="900a6-185">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-185">Yes</span></span>|<span data-ttu-id="900a6-186">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-186">Yes</span></span>|<span data-ttu-id="900a6-187">Sem restrições</span><span class="sxs-lookup"><span data-stu-id="900a6-187">No restrictions</span></span>|  
|`Verifiability requirement`|<span data-ttu-id="900a6-188">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-188">Yes</span></span>|<span data-ttu-id="900a6-189">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-189">Yes</span></span>|<span data-ttu-id="900a6-190">Não</span><span class="sxs-lookup"><span data-stu-id="900a6-190">No</span></span>|  
|`Local data access`|<span data-ttu-id="900a6-191">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-191">Yes</span></span>|<span data-ttu-id="900a6-192">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-192">Yes</span></span>|<span data-ttu-id="900a6-193">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-193">Yes</span></span>|  
|`Ability to call native code`|<span data-ttu-id="900a6-194">Não</span><span class="sxs-lookup"><span data-stu-id="900a6-194">No</span></span>|<span data-ttu-id="900a6-195">Não</span><span class="sxs-lookup"><span data-stu-id="900a6-195">No</span></span>|<span data-ttu-id="900a6-196">Sim</span><span class="sxs-lookup"><span data-stu-id="900a6-196">Yes</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="900a6-197">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="900a6-197">See Also</span></span>  
 <span data-ttu-id="900a6-198">[Segurança de integração CLR](clr-integration-security.md) </span><span class="sxs-lookup"><span data-stu-id="900a6-198">[CLR Integration Security](clr-integration-security.md) </span></span>  
 <span data-ttu-id="900a6-199">[Atributos de proteção do host e programação de integração CLR](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span><span class="sxs-lookup"><span data-stu-id="900a6-199">[Host Protection Attributes and CLR Integration Programming](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span></span>  
 <span data-ttu-id="900a6-200">[Restrições do modelo de programação de integração CLR](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span><span class="sxs-lookup"><span data-stu-id="900a6-200">[CLR Integration Programming Model Restrictions](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span></span>  
 [<span data-ttu-id="900a6-201">Ambiente hospedado de CLR</span><span class="sxs-lookup"><span data-stu-id="900a6-201">CLR Hosted Environment</span></span>](../clr-integration-architecture-clr-hosted-environment.md)  
  
  
