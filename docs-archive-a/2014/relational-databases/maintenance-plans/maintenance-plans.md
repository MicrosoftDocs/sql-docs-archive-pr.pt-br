---
title: Planos de manutenção | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
f1_keywords:
- SQL12.AG.MAINTPLAN.LEGACY.F1
helpviewer_keywords:
- maintenance plans [SQL Server], about database maintenance plans
- maintenance plans [SQL Server], database compatibility level displayed in designer
- maintenance plans [SQL Server]
ms.assetid: 5982ca65-74fe-44e3-aef9-00a65a0db169
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 2f614e2cfad78cb1efddc49cc897ca57087fec68
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87568557"
---
# <a name="maintenance-plans"></a><span data-ttu-id="b95dd-102">Planos de manutenção</span><span class="sxs-lookup"><span data-stu-id="b95dd-102">Maintenance Plans</span></span>
  <span data-ttu-id="b95dd-103">Os planos de manutenção criam um fluxo de trabalho das tarefas necessárias para garantir que o banco de dados seja otimizado, armazenado regularmente em backup e livre de inconsistências.</span><span class="sxs-lookup"><span data-stu-id="b95dd-103">Maintenance plans create a workflow of the tasks required to make sure that your database is optimized, regularly backed up, and free of inconsistencies.</span></span> <span data-ttu-id="b95dd-104">O Assistente de Plano de Manutenção também cria os planos principais de manutenção, mas criar planos de forma manual pode oferecer uma flexibilidade bem maior.</span><span class="sxs-lookup"><span data-stu-id="b95dd-104">The Maintenance Plan Wizard also creates core maintenance plans, but creating plans manually gives you much more flexibility.</span></span>  
  
## <a name="benefits-of-maintenance-plans"></a><span data-ttu-id="b95dd-105">Benefícios de planos de manutenção</span><span class="sxs-lookup"><span data-stu-id="b95dd-105">Benefits of Maintenance Plans</span></span>  
 <span data-ttu-id="b95dd-106">No [!INCLUDE[ssDECurrent](../../includes/ssdecurrent-md.md)], os planos de manutenção criam um pacote [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] que é executado por um trabalho do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="b95dd-106">In [!INCLUDE[ssDECurrent](../../includes/ssdecurrent-md.md)], maintenance plans create an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, which is run by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job.</span></span> <span data-ttu-id="b95dd-107">Os planos de manutenção podem ser executados de forma manual ou automática em intervalos agendados.</span><span class="sxs-lookup"><span data-stu-id="b95dd-107">Maintenance plans can be run manually or automatically at scheduled intervals.</span></span>  
  
 <span data-ttu-id="b95dd-108">Os planos de manutenção do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] fornecem os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="b95dd-108">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] maintenance plans provide the following features:</span></span>  
  
-   <span data-ttu-id="b95dd-109">Criação de fluxo de trabalho usando uma série de tarefas básicas de manutenção.</span><span class="sxs-lookup"><span data-stu-id="b95dd-109">Workflow creation using a variety of typical maintenance tasks.</span></span> <span data-ttu-id="b95dd-110">É igualmente possível criar scripts [!INCLUDE[tsql](../../includes/tsql-md.md)] próprios e personalizados.</span><span class="sxs-lookup"><span data-stu-id="b95dd-110">You can also create your own custom [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts.</span></span>  
  
-   <span data-ttu-id="b95dd-111">Hierarquias conceituais.</span><span class="sxs-lookup"><span data-stu-id="b95dd-111">Conceptual hierarchies.</span></span> <span data-ttu-id="b95dd-112">Todos os planos permitem que se criem e editem fluxos de trabalho de tarefas.</span><span class="sxs-lookup"><span data-stu-id="b95dd-112">Each plan lets you create or edit task workflows.</span></span> <span data-ttu-id="b95dd-113">As tarefas de todos os planos podem ser agrupadas em subplanos, que podem ser agendados para execução em horas diferentes.</span><span class="sxs-lookup"><span data-stu-id="b95dd-113">Tasks in each plan can be grouped into subplans, which can be scheduled to run at different times.</span></span>  
  
-   <span data-ttu-id="b95dd-114">O suporte para planos multisservidor pode ser usado em ambientes de servidor mestre/servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="b95dd-114">Support for multiserver plans that can be used in master server/target server environments.</span></span>  
  
-   <span data-ttu-id="b95dd-115">Suporte a histórico de plano de registro em servidores remotos.</span><span class="sxs-lookup"><span data-stu-id="b95dd-115">Support for logging plan history to remote servers.</span></span>  
  
-   <span data-ttu-id="b95dd-116">Suporte à Autenticação do Windows e à Autenticação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b95dd-116">Support for Windows Authentication and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication.</span></span> [!INCLUDE[ssNoteWinAuthentication](../../includes/ssnotewinauthentication-md.md)]  
  
## <a name="maintenace-plan-functionality"></a><span data-ttu-id="b95dd-117">Funcionalidade de plano de manutenção</span><span class="sxs-lookup"><span data-stu-id="b95dd-117">Maintenace Plan Functionality</span></span>  
 <span data-ttu-id="b95dd-118">É possível criar planos de manutenção para executar as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="b95dd-118">Maintenance plans can be created to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="b95dd-119">Reorganizar os dados de páginas de índice e de dados através da recompilação de índices com um novo fator de preenchimento.</span><span class="sxs-lookup"><span data-stu-id="b95dd-119">Reorganize the data on the data and index pages by rebuilding indexes with a new fill factor.</span></span> <span data-ttu-id="b95dd-120">A recompilação de índices com um novo fator de preenchimento garante que essas páginas de bancos de dados tenham espaços em branco e dados distribuídos igualmente.</span><span class="sxs-lookup"><span data-stu-id="b95dd-120">Rebuilding indexes with a new fill factor makes sure that database pages contain an equally distributed amount of data and free space.</span></span> <span data-ttu-id="b95dd-121">Também possibilita o crescimento mais rápido no futuro.</span><span class="sxs-lookup"><span data-stu-id="b95dd-121">It also enables faster growth in the future.</span></span> <span data-ttu-id="b95dd-122">Para obter mais informações, veja [Especificar fator de preenchimento para um índice](../indexes/specify-fill-factor-for-an-index.md).</span><span class="sxs-lookup"><span data-stu-id="b95dd-122">For more information, see [Specify Fill Factor for an Index](../indexes/specify-fill-factor-for-an-index.md).</span></span>  
  
-   <span data-ttu-id="b95dd-123">Compactar arquivos de dados removendo páginas vazias do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b95dd-123">Compress data files by removing empty database pages.</span></span>  
  
-   <span data-ttu-id="b95dd-124">Atualizar estatísticas de índices para garantir que o otimizador de consulta possua as informações atuais sobre a distribuição de valores nas tabelas,</span><span class="sxs-lookup"><span data-stu-id="b95dd-124">Update index statistics to make sure the query optimizer has current information about the distribution of data values in the tables.</span></span> <span data-ttu-id="b95dd-125">o que permite que o otimizador de consultas avalie melhor a forma de acessar os dados, já que possui mais informações sobre os dados armazenados no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b95dd-125">This enables the query optimizer to make better judgments about the best way to access data, because it has more information about the data stored in the database.</span></span> <span data-ttu-id="b95dd-126">Embora as estatísticas de índice sejam atualizadas periódica e automaticamente através do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , esta opção pode forçar a atualização imediata das estatísticas.</span><span class="sxs-lookup"><span data-stu-id="b95dd-126">Although index statistics are automatically updated by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] periodically, this option can force the statistics to update immediately.</span></span>  
  
-   <span data-ttu-id="b95dd-127">Executar verificações internas de consistência de páginas de dados e dados dentro do banco de dados para garantir que um problema no sistema ou software não danificou os dados.</span><span class="sxs-lookup"><span data-stu-id="b95dd-127">Perform internal consistency checks of the data and data pages within the database to make sure that a system or software problem has not damaged data.</span></span>  
  
-   <span data-ttu-id="b95dd-128">Fazer backup do banco de dados e dos arquivos de log de transações.</span><span class="sxs-lookup"><span data-stu-id="b95dd-128">Back up the database and transaction log files.</span></span> <span data-ttu-id="b95dd-129">É possível reter backups de bancos de dados e de logs por um período especificado,</span><span class="sxs-lookup"><span data-stu-id="b95dd-129">Database and log backups can be retained for a specified period.</span></span> <span data-ttu-id="b95dd-130">o que permite criar um histórico dos backups a serem usados caso haja necessidade de restaurar o banco de dados em uma determinada data anterior ao último backup executado.</span><span class="sxs-lookup"><span data-stu-id="b95dd-130">This lets you create a history of backups to be used if you have to restore the database to a time earlier than the last database backup.</span></span> <span data-ttu-id="b95dd-131">Também é possível executar backups diferenciais.</span><span class="sxs-lookup"><span data-stu-id="b95dd-131">You can also perform differential backups.</span></span>  
  
-   <span data-ttu-id="b95dd-132">Executar tarefas do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent,</span><span class="sxs-lookup"><span data-stu-id="b95dd-132">Run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs.</span></span> <span data-ttu-id="b95dd-133">o que pode ser usado para criar trabalhos que efetuem várias ações e os planos de manutenção que executem esses trabalhos.</span><span class="sxs-lookup"><span data-stu-id="b95dd-133">This can be used to create jobs that perform a variety of actions and the maintenance plans to run those jobs.</span></span>  
  
 <span data-ttu-id="b95dd-134">Os resultados gerados pelas tarefas de manutenção podem ser gravados como relatórios em arquivos de texto ou como tabelas de plano de manutenção, (`sysmaintplan_log` e `sysmaintplan_logdetail`) no `msdb`.</span><span class="sxs-lookup"><span data-stu-id="b95dd-134">The results generated by the maintenance tasks can be written as a report to a text file or to the maintenance plan tables (`sysmaintplan_log` and `sysmaintplan_logdetail`) in `msdb`.</span></span> <span data-ttu-id="b95dd-135">Para exibir os resultados no visualizador de arquivos de log, clique com o botão direito do mouse em **Planos de Manutenção** e clique em **Exibir Histórico**.</span><span class="sxs-lookup"><span data-stu-id="b95dd-135">To view the results in the log file viewer, right-click **Maintenance Plans**, and then click **View History**.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="b95dd-136">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="b95dd-136">Related Tasks</span></span>  
 <span data-ttu-id="b95dd-137">Use os tópicos a seguir como introdução rápida aos planos de manutenção.</span><span class="sxs-lookup"><span data-stu-id="b95dd-137">Use the following topics to get started with maintenance plans.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="b95dd-138">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="b95dd-138">**Description**</span></span>|<span data-ttu-id="b95dd-139">**Tópico**</span><span class="sxs-lookup"><span data-stu-id="b95dd-139">**Topic**</span></span>|  
|<span data-ttu-id="b95dd-140">Descreve como criar um plano de manutenção usando o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b95dd-140">Describes how to create a maintenance plan by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span>|[<span data-ttu-id="b95dd-141">Criar um Plano de Manutenção</span><span class="sxs-lookup"><span data-stu-id="b95dd-141">Create a Maintenance Plan</span></span>](create-a-maintenance-plan.md)|  
|<span data-ttu-id="b95dd-142">Descreve como criar um plano de manutenção usando a Superfície de Design do Plano de Manutenção.</span><span class="sxs-lookup"><span data-stu-id="b95dd-142">Describes how to create a maintenance plan by using the Maintenance Plan Design Surface.</span></span>|[<span data-ttu-id="b95dd-143">Criar um plano de manutenção &#40;Superfície de Design do Plano de Manutenção&#41;</span><span class="sxs-lookup"><span data-stu-id="b95dd-143">Create a Maintenance Plan &#40;Maintenance Plan Design Surface&#41;</span></span>](create-a-maintenance-plan-maintenance-plan-design-surface.md)|  
|<span data-ttu-id="b95dd-144">Documenta a funcionalidade de plano de manutenção disponível no Pesquisador de Objetos.</span><span class="sxs-lookup"><span data-stu-id="b95dd-144">Documents maintenance plan functionality available in Object Explorer.</span></span>|[<span data-ttu-id="b95dd-145">Nó de planos de manutenção &#40;Pesquisador de Objetos&#41;</span><span class="sxs-lookup"><span data-stu-id="b95dd-145">Maintenance Plans Node &#40;Object Explorer&#41;</span></span>](../../ssms/object/object-explorer.md)|  
  
  
