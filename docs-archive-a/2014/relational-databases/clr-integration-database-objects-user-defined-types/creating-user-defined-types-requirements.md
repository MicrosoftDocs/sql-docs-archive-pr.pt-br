---
title: Requisitos de tipo definidos pelo usuário | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- UDTs [CLR integration], requirements
- serialization
- Native serialization format [CLR integration]
- attributes [CLR integration]
- XML serialization [CLR integration]
- user-defined types [CLR integration], requirements
- user-defined serialization [CLR integration]
- user-defined types [CLR integration], Native serialization
- UDTs [CLR integration], Native serialization
ms.assetid: bedc3372-50eb-40f2-bcf2-d6db6a63b7e6
author: rothja
ms.author: jroth
ms.openlocfilehash: d4e692a4523829713cd95daf62374f84a74b6584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87570720"
---
# <a name="user-defined-type-requirements"></a><span data-ttu-id="31ee2-102">Requisitos do tipo definido pelo usuário</span><span class="sxs-lookup"><span data-stu-id="31ee2-102">User-Defined Type Requirements</span></span>
  <span data-ttu-id="31ee2-103">Você deve fazer várias decisões de design importantes ao criar um UDT (tipo definido pelo usuário) a ser instalado no [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="31ee2-103">You must make several important design decisions when creating a user-defined type (UDT) to be installed in [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="31ee2-104">De uma forma geral, é recomendável criar o UDT como uma estrutura, embora criá-lo como classe também seja uma opção.</span><span class="sxs-lookup"><span data-stu-id="31ee2-104">For most UDTs, creating the UDT as a structure is recommended, although creating it as a class is also an option.</span></span> <span data-ttu-id="31ee2-105">A definição do UDT precisa estar de acordo com as especificações para criação de UDTs para que seja registrado com o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31ee2-105">The UDT definition must conform to the specifications for creating UDTs in order for it to be registered with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="requirements-for-implementing-udts"></a><span data-ttu-id="31ee2-106">Requisitos para implementação de UDTs</span><span class="sxs-lookup"><span data-stu-id="31ee2-106">Requirements for Implementing UDTs</span></span>  
 <span data-ttu-id="31ee2-107">Para ser executado no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], o UDT precisa implementar os seguintes requisitos na definição do UDT:</span><span class="sxs-lookup"><span data-stu-id="31ee2-107">To run in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], your UDT must implement the following requirements in the UDT definition:</span></span>  
  
 <span data-ttu-id="31ee2-108">O UDT precisa especificar o `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-108">The UDT must specify the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span></span> <span data-ttu-id="31ee2-109">O uso do `System.SerializableAttribute` é opcional, porém recomendado.</span><span class="sxs-lookup"><span data-stu-id="31ee2-109">The use of the `System.SerializableAttribute` is optional, but recommended.</span></span>  
  
-   <span data-ttu-id="31ee2-110">O UDT precisa implementar a interface `System.Data.SqlTypes.INullable` na classe ou estrutura criando um método `static` (`Shared` no [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic) `Null`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-110">The UDT must implement the `System.Data.SqlTypes.INullable` interface in the class or structure by creating a public `static` (`Shared` in [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic) `Null` method.</span></span> <span data-ttu-id="31ee2-111">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reconhece o valor nulo por padrão.</span><span class="sxs-lookup"><span data-stu-id="31ee2-111">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is null-aware by default.</span></span> <span data-ttu-id="31ee2-112">Isso é necessário para que o código executado no UDT consiga reconhecer um valor nulo.</span><span class="sxs-lookup"><span data-stu-id="31ee2-112">This is necessary for code executing in the UDT to be able to recognize a null value.</span></span>  
  
-   <span data-ttu-id="31ee2-113">O UDT precisa conter um método `static` (ou `Shared`) `Parse` público que dê suporte a análise e um método `ToString` público para converter em uma representação de cadeia de caracteres do objeto.</span><span class="sxs-lookup"><span data-stu-id="31ee2-113">The UDT must contain a public `static` (or `Shared`) `Parse` method that supports parsing from, and a public `ToString` method for converting to a string representation of the object.</span></span>  
  
-   <span data-ttu-id="31ee2-114">Um UDT com formato de serialização definido pelo usuário precisa implementar a interface `System.Data.IBinarySerialize` e fornecer um método `Read` e um `Write`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-114">A UDT with a user-defined serialization format must implement the `System.Data.IBinarySerialize` interface and provide a `Read` and a `Write` method.</span></span>  
  
-   <span data-ttu-id="31ee2-115">O UDT precisa implementar `System.Xml.Serialization.IXmlSerializable`, ou todos os campos e propriedades públicos precisam ser de tipos que sejam serializáveis por XML ou decorados com o atributo `XmlIgnore` se for necessário substituir a serialização padrão.</span><span class="sxs-lookup"><span data-stu-id="31ee2-115">The UDT must implement `System.Xml.Serialization.IXmlSerializable`, or all public fields and properties must be of types that are XML serializable or decorated with the `XmlIgnore` attribute if overriding standard serialization is required.</span></span>  
  
-   <span data-ttu-id="31ee2-116">Deve haver apenas uma serialização de um objeto UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-116">There must be only one serialization of a UDT object.</span></span> <span data-ttu-id="31ee2-117">Haverá falha na validação se as rotinas de serialização ou desserialização reconhecerem mais de uma representação de um objeto específico.</span><span class="sxs-lookup"><span data-stu-id="31ee2-117">Validation fails if the serialize or deserialize routines recognize more than one representation of a particular object.</span></span>  
  
-   <span data-ttu-id="31ee2-118">`SqlUserDefinedTypeAttribute.IsByteOrdered` deve ser `true` para comparar dados em ordem de byte.</span><span class="sxs-lookup"><span data-stu-id="31ee2-118">`SqlUserDefinedTypeAttribute.IsByteOrdered` must be `true` to compare data in byte order.</span></span> <span data-ttu-id="31ee2-119">Se a interface IComparable não estiver implementada e `SqlUserDefinedTypeAttribute.IsByteOrdered` for `false`, as comparações de ordem de byte falharão.</span><span class="sxs-lookup"><span data-stu-id="31ee2-119">If the IComparable interface is not implemented and `SqlUserDefinedTypeAttribute.IsByteOrdered` is `false`, byte order comparisons will fail.</span></span>  
  
-   <span data-ttu-id="31ee2-120">Um UDT definido em uma classe deve ter um construtor público que não leve argumentos.</span><span class="sxs-lookup"><span data-stu-id="31ee2-120">A UDT defined in a class must have a public constructor that takes no arguments.</span></span> <span data-ttu-id="31ee2-121">Você tem a opção de criar construtores de classe sobrecarregados adicionais.</span><span class="sxs-lookup"><span data-stu-id="31ee2-121">You can optionally create additional overloaded class constructors.</span></span>  
  
-   <span data-ttu-id="31ee2-122">O UDT precisa expor elementos de dados como campos públicos ou procedimentos de propriedade.</span><span class="sxs-lookup"><span data-stu-id="31ee2-122">The UDT must expose data elements as public fields or property procedures.</span></span>  
  
-   <span data-ttu-id="31ee2-123">Nomes públicos não podem ter mais de 128 caracteres e devem estar em conformidade com as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] regras de nomenclatura para identificadores, conforme definido em [identificadores de banco de dados](../databases/database-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="31ee2-123">Public names cannot be longer than 128 characters, and must conform to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] naming rules for identifiers as defined in [Database Identifiers](../databases/database-identifiers.md).</span></span>  
  
-   <span data-ttu-id="31ee2-124">As colunas `sql_variant` não podem conter instâncias de um UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-124">`sql_variant` columns cannot contain instances of a UDT.</span></span>  
  
-   <span data-ttu-id="31ee2-125">Os membros herdados não são acessíveis a partir do [!INCLUDE[tsql](../../includes/tsql-md.md)] porque o sistema de tipos do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] não reconhece a hierarquia de herança entre UDTs.</span><span class="sxs-lookup"><span data-stu-id="31ee2-125">Inherited members are not accessible from [!INCLUDE[tsql](../../includes/tsql-md.md)] because the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] type system is not aware of the inheritance hierarchy among UDTs.</span></span> <span data-ttu-id="31ee2-126">Entretanto, você pode usar a herança ao estruturar suas classes, além de chamar esses métodos na implementação de código gerenciado do tipo.</span><span class="sxs-lookup"><span data-stu-id="31ee2-126">However, you can use inheritance when you structure your classes and you can call such methods in the managed code implementation of the type.</span></span>  
  
-   <span data-ttu-id="31ee2-127">Os membros não podem ficar sobrecarregados, com exceção do construtor de classe.</span><span class="sxs-lookup"><span data-stu-id="31ee2-127">Members cannot be overloaded, except for the class constructor.</span></span> <span data-ttu-id="31ee2-128">Se você criar um método sobrecarregado, nenhum erro ocorrerá quando você registrar o assembly ou criar o tipo no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31ee2-128">If you do create an overloaded method, no error is raised when you register the assembly or create the type in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="31ee2-129">A detecção do método sobrecarregado ocorre em tempo de execução, e não quando o tipo é criado.</span><span class="sxs-lookup"><span data-stu-id="31ee2-129">Detection of the overloaded method occurs at run time, not when the type is created.</span></span> <span data-ttu-id="31ee2-130">Os métodos sobrecarregados podem existir na classe, contanto que nunca sejam invocados.</span><span class="sxs-lookup"><span data-stu-id="31ee2-130">Overloaded methods can exist in the class as long as they are never invoked.</span></span> <span data-ttu-id="31ee2-131">Quando você invoca o método sobrecarregado, ocorre um erro.</span><span class="sxs-lookup"><span data-stu-id="31ee2-131">Once you invoke the overloaded method, an error is raised.</span></span>  
  
-   <span data-ttu-id="31ee2-132">Quaisquer membros `static` (ou `Shared`) precisam ser declarados como constantes ou somente leitura.</span><span class="sxs-lookup"><span data-stu-id="31ee2-132">Any `static` (or `Shared`) members must be declared as constants or as read-only.</span></span> <span data-ttu-id="31ee2-133">Membros estáticos não podem ser mutáveis.</span><span class="sxs-lookup"><span data-stu-id="31ee2-133">Static members cannot be mutable.</span></span>  
  
-   <span data-ttu-id="31ee2-134">Se o campo `SqlUserDefinedTypeAttribute.MaxByteSize` for definido para -1, o UDT serial poderá ser tão grande quanto o limite de tamanho para objetos grandes (LOB) (atualmente 2 GB).</span><span class="sxs-lookup"><span data-stu-id="31ee2-134">If the `SqlUserDefinedTypeAttribute.MaxByteSize` field is set to -1, the serialized UDT can be as large as the large object (LOB) size limit (currently 2 GB).</span></span> <span data-ttu-id="31ee2-135">O tamanho do UDT não pode ultrapassar o valor especificado no campo `MaxByteSized`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-135">The size of the UDT cannot exceed the value specified in the `MaxByteSized` field.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="31ee2-136">Apesar de ele não ser usado pelo servidor para executar comparações, você tem a opção de implementar a interface `System.IComparable`, que expõe um único método, o `CompareTo`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-136">Although it is not used by the server for performing comparisons, you can optionally implement the `System.IComparable` interface, which exposes a single method, `CompareTo`.</span></span> <span data-ttu-id="31ee2-137">Isso é usado no lado do cliente em situações nas quais é desejável comparar ou ordenar valores UDT com precisão.</span><span class="sxs-lookup"><span data-stu-id="31ee2-137">This is used on the client side in situations in which it is desirable to accurately compare or order UDT values.</span></span>  
  
## <a name="native-serialization"></a><span data-ttu-id="31ee2-138">Serialização nativa</span><span class="sxs-lookup"><span data-stu-id="31ee2-138">Native Serialization</span></span>  
 <span data-ttu-id="31ee2-139">A escolha dos atributos de serialização adequados para o UDT depende do tipo de UDT que você está tentando criar.</span><span class="sxs-lookup"><span data-stu-id="31ee2-139">Choosing the right serialization attributes for your UDT depends on the type of UDT you are trying to create.</span></span> <span data-ttu-id="31ee2-140">O formato de serialização `Native` utiliza uma estrutura muito simples que permite que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] armazene uma representação nativa eficiente do UDT em disco.</span><span class="sxs-lookup"><span data-stu-id="31ee2-140">The `Native` serialization format utilizes a very simple structure that enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to store an efficient native representation of the UDT on disk.</span></span> <span data-ttu-id="31ee2-141">O formato `Native` será recomendado se o UDT for simples e contiver somente campos dos tipos a seguir:</span><span class="sxs-lookup"><span data-stu-id="31ee2-141">The `Native` format is recommended if the UDT is simple and only contains fields of the following types:</span></span>  
  
 <span data-ttu-id="31ee2-142">**bool**, **byte**, **sbyte**, **short**, **ushort**, **int**, **uint**, **long**, **ulong**, **float**, **double**, **SqlByte**, **SqlInt16**, **SqlInt32**, **SqlInt64**, **SqlDateTime**, **SqlSingle**, **SqlDouble**, **SqlMoney**, **SqlBoolean**</span><span class="sxs-lookup"><span data-stu-id="31ee2-142">**bool**, **byte**, **sbyte**, **short**, **ushort**, **int**, **uint**, **long**, **ulong**, **float**, **double**, **SqlByte**, **SqlInt16**, **SqlInt32**, **SqlInt64**, **SqlDateTime**, **SqlSingle**, **SqlDouble**, **SqlMoney**, **SqlBoolean**</span></span>  
  
 <span data-ttu-id="31ee2-143">Os tipos de valor que são compostos de campos dos tipos acima são bons candidatos para o `Native` formato, como `structs` no Visual C#, (ou `Structures` como são conhecidos em Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="31ee2-143">Value types that are composed of fields of the above types are good candidates for `Native` format, such as `structs` in Visual C#, (or `Structures` as they are known in Visual Basic).</span></span> <span data-ttu-id="31ee2-144">Por exemplo, um UDT especificado com o formato de serialização `Native` pode conter um campo de outro UDT que também foi especificado com o formato `Native`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-144">For example, a UDT specified with the `Native` serialization format may contain a field of another UDT that was also specified with the `Native` format.</span></span> <span data-ttu-id="31ee2-145">Se a definição de UDT for mais complexa e contiver tipos de dados na lista anterior, você precisará especificar o formato de serialização `UserDefined`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-145">If the UDT definition is more complex and contains data types not on the above list, you must specify the `UserDefined` serialization format instead.</span></span>  
  
 <span data-ttu-id="31ee2-146">O formato `Native` tem os requisitos a seguir:</span><span class="sxs-lookup"><span data-stu-id="31ee2-146">The `Native` format has the following requirements:</span></span>  
  
-   <span data-ttu-id="31ee2-147">O tipo não deve especificar um valor para `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.MaxByteSize`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-147">The type must not specify a value for `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.MaxByteSize`.</span></span>  
  
-   <span data-ttu-id="31ee2-148">Todos os campos precisam ser serializáveis.</span><span class="sxs-lookup"><span data-stu-id="31ee2-148">All fields must be serializable.</span></span>  
  
-   <span data-ttu-id="31ee2-149">O `System.Runtime.InteropServices.StructLayoutAttribute` precisa ser especificado como `StructLayout.LayoutKindSequential` se o UDT for definido em uma classe, e não em uma estrutura.</span><span class="sxs-lookup"><span data-stu-id="31ee2-149">The `System.Runtime.InteropServices.StructLayoutAttribute` must be specified as `StructLayout.LayoutKindSequential` if the UDT is defined in a class and not a structure.</span></span> <span data-ttu-id="31ee2-150">Esse atributo controla o layout físico dos campos de dados e é usado para obrigar os membros a ser dispostos na ordem em que aparecem.</span><span class="sxs-lookup"><span data-stu-id="31ee2-150">This attribute controls the physical layout of the data fields and is used to force the members to be laid out in the order in which they appear.</span></span> <span data-ttu-id="31ee2-151">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usa esse atributo para determinar a ordem dos campos para UDTs com vários valores.</span><span class="sxs-lookup"><span data-stu-id="31ee2-151">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses this attribute to determine the field order for UDTs with multiple values.</span></span>  
  
 <span data-ttu-id="31ee2-152">Para obter um exemplo de um UDT definido com `Native` serialização, consulte o ponto UDT na [codificação de tipos definidos pelo usuário](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="31ee2-152">For an example of a UDT defined with `Native` serialization, see the Point UDT in [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
## <a name="userdefined-serialization"></a><span data-ttu-id="31ee2-153">Serialização UserDefined</span><span class="sxs-lookup"><span data-stu-id="31ee2-153">UserDefined Serialization</span></span>  
 <span data-ttu-id="31ee2-154">A configuração do formato `UserDefined` para o atributo `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` proporciona ao desenvolvedor total controle do formato binário.</span><span class="sxs-lookup"><span data-stu-id="31ee2-154">The `UserDefined` format setting for the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` attribute gives the developer full control over the binary format.</span></span> <span data-ttu-id="31ee2-155">Ao especificar a propriedade de atributo `Format` como `UserDefined`, você precisa seguir este procedimento no código:</span><span class="sxs-lookup"><span data-stu-id="31ee2-155">When specifying the `Format` attribute property as `UserDefined`, you must do the following in your code:</span></span>  
  
-   <span data-ttu-id="31ee2-156">Especificar a propriedade de atributo `IsByteOrdered` opcional.</span><span class="sxs-lookup"><span data-stu-id="31ee2-156">Specify the optional `IsByteOrdered` attribute property.</span></span> <span data-ttu-id="31ee2-157">O valor padrão é `false`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-157">The default value is `false`.</span></span>  
  
-   <span data-ttu-id="31ee2-158">Especificar a propriedade `MaxByteSize` do `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-158">Specify the `MaxByteSize` property of the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span></span>  
  
-   <span data-ttu-id="31ee2-159">Escrever código para implementar os métodos `Read` e `Write` para o UDT implementando a interface `System.Data.Sql.IBinarySerialize`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-159">Write code to implement `Read` and `Write` methods for the UDT by implementing the `System.Data.Sql.IBinarySerialize` interface.</span></span>  
  
 <span data-ttu-id="31ee2-160">Para obter um exemplo de um UDT definido com `UserDefined` serialização, consulte a moeda UDT em [codificação de tipos definidos pelo usuário](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="31ee2-160">For an example of a UDT defined with `UserDefined` serialization, see the Currency UDT in [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="31ee2-161">Os campos UDT precisam usar serialização nativa ou serem persistidos para serem indexados.</span><span class="sxs-lookup"><span data-stu-id="31ee2-161">UDT fields must use native serialization or be persisted in order to be indexed.</span></span>  
  
## <a name="serialization-attributes"></a><span data-ttu-id="31ee2-162">Atributos de serialização</span><span class="sxs-lookup"><span data-stu-id="31ee2-162">Serialization Attributes</span></span>  
 <span data-ttu-id="31ee2-163">Os atributos determinam como a serialização é usada para construir a representação de armazenamento de UDTs e transmiti-los por valor para o cliente.</span><span class="sxs-lookup"><span data-stu-id="31ee2-163">Attributes determine how serialization is used to construct the storage representation of UDTs and to transmit UDTs by value to the client.</span></span> <span data-ttu-id="31ee2-164">Você precisa especificar o `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` ao criar o UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-164">You are required to specify the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` when creating the UDT.</span></span> <span data-ttu-id="31ee2-165">O atributo `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` indica que a classe é um UDT e especifica o armazenamento para o UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-165">The `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` attribute indicates that the class is a UDT and specifies the storage for the UDT.</span></span> <span data-ttu-id="31ee2-166">Você tem a opção de especificar o atributo `Serializable`, apesar de que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] não exige isso.</span><span class="sxs-lookup"><span data-stu-id="31ee2-166">You can optionally specify the `Serializable` attribute, although [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] does not require this.</span></span>  
  
 <span data-ttu-id="31ee2-167">O `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` tem as propriedades a seguir.</span><span class="sxs-lookup"><span data-stu-id="31ee2-167">The `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` has the following properties.</span></span>  
  
 `Format`  
 <span data-ttu-id="31ee2-168">Especifica o formato de serialização, que pode ser `Native` ou `UserDefined`, dependendo dos tipos de dados do UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-168">Specifies the serialization format, which can be `Native` or `UserDefined`, depending on the data types of the UDT.</span></span>  
  
 `IsByteOrdered`  
 <span data-ttu-id="31ee2-169">Um valor `Boolean` que determina como o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] executa comparações binárias no UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-169">A `Boolean` value that determines how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performs binary comparisons on the UDT.</span></span>  
  
 `IsFixedLength`  
 <span data-ttu-id="31ee2-170">Indica se todas as instâncias desse UDT têm a mesma extensão.</span><span class="sxs-lookup"><span data-stu-id="31ee2-170">Indicates whether all instances of this UDT are the same length.</span></span>  
  
 `MaxByteSize`  
 <span data-ttu-id="31ee2-171">O tamanho máximo da instância, em bytes.</span><span class="sxs-lookup"><span data-stu-id="31ee2-171">The maximum size of the instance, in bytes.</span></span> <span data-ttu-id="31ee2-172">Você precisa especificar `MaxByteSize` com o formato de serialização `UserDefined`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-172">You must specify `MaxByteSize` with the `UserDefined` serialization format.</span></span> <span data-ttu-id="31ee2-173">Para um UDT com serialização definida pelo usuário especificada, `MaxByteSize` se refere ao tamanho total do UDT em sua forma serializada conforme definido pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="31ee2-173">For a UDT with user-defined serialization specified, `MaxByteSize` refers to the total size of the UDT in its serialized form as defined by the user.</span></span> <span data-ttu-id="31ee2-174">O valor de `MaxByteSize` precisa estar no intervalo de 1 a 8000 ou definido como -1 para indicar que o UDT tem tamanho maior do que 8000 bytes (o tamanho total não pode ultrapassar o tamanho de LOB máximo).</span><span class="sxs-lookup"><span data-stu-id="31ee2-174">The value of `MaxByteSize` must be in the range of 1 to 8000, or set to -1 to indicate that the UDT is greater than 8000 bytes (the total size cannot exceed the maximum LOB size).</span></span> <span data-ttu-id="31ee2-175">Considere um UDT com a propriedade de uma cadeia de 10 caracteres (`System.Char`).</span><span class="sxs-lookup"><span data-stu-id="31ee2-175">Consider a UDT with a property of a string of 10 characters (`System.Char`).</span></span> <span data-ttu-id="31ee2-176">Quando o UDT é serializado usando um BinaryWriter, o tamanho total da cadeia de caracteres serializada é de 22 bytes: 2 bytes por caractere Unicode UTF-16, multiplicados pelo número máximo de caracteres, mais 2 bytes de controle da sobrecarga ocasionada pela serialização de um fluxo binário.</span><span class="sxs-lookup"><span data-stu-id="31ee2-176">When the UDT is serialized by using a BinaryWriter, the total size of the serialized string is 22 bytes: 2 bytes per Unicode UTF-16 character, multiplied by the maximum number of characters, plus 2 control bytes of overhead incurred from serializing a binary stream.</span></span> <span data-ttu-id="31ee2-177">Portanto, ao determinar o valor de `MaxByteSize`, é necessário considerar o tamanho total do UDT serializado: o tamanho dos dados serializados em forma binária, mais a sobrecarga ocasionada pela serialização.</span><span class="sxs-lookup"><span data-stu-id="31ee2-177">Therefore, when determining the value of `MaxByteSize`, the total size of the serialized UDT must be considered: the size of the data serialized in binary form plus the overhead incurred by serialization.</span></span>  
  
 `ValidationMethodName`  
 <span data-ttu-id="31ee2-178">O nome do método usado para validar instâncias do UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-178">The name of the method used to validate instances of the UDT.</span></span>  
  
### <a name="setting-isbyteordered"></a><span data-ttu-id="31ee2-179">Definindo IsByteOrdered</span><span class="sxs-lookup"><span data-stu-id="31ee2-179">Setting IsByteOrdered</span></span>  
 <span data-ttu-id="31ee2-180">Quando a propriedade `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.IsByteOrdered` é definida como `true`, você está garantindo que os dados binários serializados possam ser usados para ordenação semântica das informações.</span><span class="sxs-lookup"><span data-stu-id="31ee2-180">When the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.IsByteOrdered` property is set to `true`, you are in effect guaranteeing that the serialized binary data can be used for semantic ordering of the information.</span></span> <span data-ttu-id="31ee2-181">Assim, cada instância de um objeto UDT ordenado por byte pode ter somente uma representação serializada.</span><span class="sxs-lookup"><span data-stu-id="31ee2-181">Thus, each instance of a byte-ordered UDT object can only have one serialized representation.</span></span> <span data-ttu-id="31ee2-182">Quando é executada uma operação de comparação no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nos bytes serializados, os resultados devem ser os mesmos de quando a operação de comparação ocorre em código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="31ee2-182">When a comparison operation is performed in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the serialized bytes, its results should be the same as if the same comparison operation had taken place in managed code.</span></span> <span data-ttu-id="31ee2-183">Os recursos a seguir também são suportados quando `IsByteOrdered` é definido como `true`:</span><span class="sxs-lookup"><span data-stu-id="31ee2-183">The following features are also supported when `IsByteOrdered` is set to `true`:</span></span>  
  
-   <span data-ttu-id="31ee2-184">A capacidade de criar índices em colunas desse tipo.</span><span class="sxs-lookup"><span data-stu-id="31ee2-184">The ability to create indexes on columns of this type.</span></span>  
  
-   <span data-ttu-id="31ee2-185">A capacidade de criar chaves primárias e estrangeiras, além de restrições CHECK e UNIQUE em colunas desse tipo.</span><span class="sxs-lookup"><span data-stu-id="31ee2-185">The ability to create primary and foreign keys as well as CHECK and UNIQUE constraints on columns of this type.</span></span>  
  
-   <span data-ttu-id="31ee2-186">A capacidade de usar as cláusulas [!INCLUDE[tsql](../../includes/tsql-md.md)] ORDER BY, GROUP BY e PARTITION BY.</span><span class="sxs-lookup"><span data-stu-id="31ee2-186">The ability to use [!INCLUDE[tsql](../../includes/tsql-md.md)] ORDER BY, GROUP BY, and PARTITION BY clauses.</span></span> <span data-ttu-id="31ee2-187">Nesses casos, a representação binária do tipo é usada para determinar a ordem.</span><span class="sxs-lookup"><span data-stu-id="31ee2-187">In these cases, the binary representation of the type is used to determine the order.</span></span>  
  
-   <span data-ttu-id="31ee2-188">A capacidade de usar operadores de comparação em instruções [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31ee2-188">The ability to use comparison operators in [!INCLUDE[tsql](../../includes/tsql-md.md)] statements.</span></span>  
  
-   <span data-ttu-id="31ee2-189">A capacidade de persistir colunas computadas desse tipo.</span><span class="sxs-lookup"><span data-stu-id="31ee2-189">The ability to persist computed columns of this type.</span></span>  
  
 <span data-ttu-id="31ee2-190">Observe que tanto o formato de serialização `Native` quanto o `UserDefined` suporta os seguintes operadores de comparação quando `IsByteOrdered` é definido como `true`:</span><span class="sxs-lookup"><span data-stu-id="31ee2-190">Note that both the `Native` and `UserDefined` serialization formats support the following comparison operators when `IsByteOrdered` is set to `true`:</span></span>  
  
-   <span data-ttu-id="31ee2-191">Igual a (=).</span><span class="sxs-lookup"><span data-stu-id="31ee2-191">Equal to (=)</span></span>  
  
-   <span data-ttu-id="31ee2-192">Diferente de (!=)</span><span class="sxs-lookup"><span data-stu-id="31ee2-192">Not equal to (!=)</span></span>  
  
-   <span data-ttu-id="31ee2-193">Maior que (>)</span><span class="sxs-lookup"><span data-stu-id="31ee2-193">Greater than (>)</span></span>  
  
-   <span data-ttu-id="31ee2-194">Menor que (\<)</span><span class="sxs-lookup"><span data-stu-id="31ee2-194">Less than (\<)</span></span>  
  
-   <span data-ttu-id="31ee2-195">Maior que ou igual a (>=)</span><span class="sxs-lookup"><span data-stu-id="31ee2-195">Greater than or equal to (>=)</span></span>  
  
-   <span data-ttu-id="31ee2-196">Menor que ou igual a (<=)</span><span class="sxs-lookup"><span data-stu-id="31ee2-196">Less than or equal to (<=)</span></span>  
  
### <a name="implementing-nullability"></a><span data-ttu-id="31ee2-197">Implementando a nulidade</span><span class="sxs-lookup"><span data-stu-id="31ee2-197">Implementing Nullability</span></span>  
 <span data-ttu-id="31ee2-198">Além de especificar corretamente os atributos dos assemblies, sua classe também precisa suportar a nulidade.</span><span class="sxs-lookup"><span data-stu-id="31ee2-198">In addition to specifying the attributes for your assemblies correctly, your class must also support nullability.</span></span> <span data-ttu-id="31ee2-199">Os UDTs carregados no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reconhecem a nulidade, mas para que o UDT reconheça um valor nulo, a classe precisa implementar a interface `INullable`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-199">UDTs loaded into [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are null-aware, but in order for the UDT to recognize a null value, the class must implement the `INullable` interface.</span></span> <span data-ttu-id="31ee2-200">Para obter mais informações e um exemplo de como implementar a nulidade em um UDT, consulte [codificação de tipos definidos pelo usuário](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="31ee2-200">For more information and an example of how to implement nullability in a UDT, see [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
### <a name="string-conversions"></a><span data-ttu-id="31ee2-201">Conversões de cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="31ee2-201">String Conversions</span></span>  
 <span data-ttu-id="31ee2-202">Para suportar a conversão de cadeia de caracteres para o UDT e do UDT, você precisa fornecer um método `Parse` e um método `ToString` em sua classe.</span><span class="sxs-lookup"><span data-stu-id="31ee2-202">To support string conversion to and from the UDT, you must provide a `Parse` method and a `ToString` method in your class.</span></span> <span data-ttu-id="31ee2-203">O método `Parse` permite converter uma cadeia de caracteres em uma UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-203">The `Parse` method allows a string to be converted into a UDT.</span></span> <span data-ttu-id="31ee2-204">Ele precisa ser declarado como `static` (ou `Shared` no Visual Basic) e usar um parâmetro do tipo `System.Data.SqlTypes.SqlString`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-204">It must be declared as `static` (or `Shared` in Visual Basic), and take a parameter of type `System.Data.SqlTypes.SqlString`.</span></span> <span data-ttu-id="31ee2-205">Para obter mais informações e um exemplo de como implementar os `Parse` `ToString` métodos e, consulte [codificando tipos definidos pelo usuário](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="31ee2-205">For more information and an example of how to implement the `Parse` and `ToString` methods, see [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
## <a name="xml-serialization"></a><span data-ttu-id="31ee2-206">Serialização XML</span><span class="sxs-lookup"><span data-stu-id="31ee2-206">XML Serialization</span></span>  
 <span data-ttu-id="31ee2-207">Os UDTs precisam suportar a conversão de e para o tipo de dados `xml` cumprindo o contrato para serialização XML.</span><span class="sxs-lookup"><span data-stu-id="31ee2-207">UDTs must support conversion to and from the `xml` data type by conforming to the contract for XML serialization.</span></span> <span data-ttu-id="31ee2-208">O namespace `System.Xml.Serialization` contém classes que são usadas para serializar objetos nos documentos ou fluxos de formato XML.</span><span class="sxs-lookup"><span data-stu-id="31ee2-208">The `System.Xml.Serialization` namespace contains classes that are used to serialize objects into XML format documents or streams.</span></span> <span data-ttu-id="31ee2-209">Você pode optar por implementar a serialização `xml` usando a interface `IXmlSerializable` que oferece formatação personalizada para serialização e desserialização XML.</span><span class="sxs-lookup"><span data-stu-id="31ee2-209">You can choose to implement `xml` serialization by using the `IXmlSerializable` interface, which provides custom formatting for XML serialization and deserialization.</span></span>  
  
 <span data-ttu-id="31ee2-210">Além de executar conversões explícitas de UDT para `xml`, a serialização XML permite:</span><span class="sxs-lookup"><span data-stu-id="31ee2-210">In addition to performing explicit conversions from UDT to `xml`, XML serialization enables you to:</span></span>  
  
-   <span data-ttu-id="31ee2-211">Usar `Xquery` sobre valores de instâncias de UDT após a conversão para o tipo de dados `xml`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-211">Use `Xquery` over values of UDT instances after conversion to the `xml` data type.</span></span>  
  
-   <span data-ttu-id="31ee2-212">Usar UDTs em consultas parametrizadas e métodos de Web com XML Web Services Nativos no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31ee2-212">Use UDTs in parameterized queries and Web methods with Native XML Web Services in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="31ee2-213">Usar UDTs para receber um carregamento em massa de dados XML.</span><span class="sxs-lookup"><span data-stu-id="31ee2-213">Use UDTs to receive a bulk load of XML data.</span></span>  
  
-   <span data-ttu-id="31ee2-214">Serializar DataSets que contêm tabelas com colunas de UDT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-214">Serialize DataSets that contain tables with UDT columns.</span></span>  
  
 <span data-ttu-id="31ee2-215">Os UDTs não são serializados em consultas FOR XML.</span><span class="sxs-lookup"><span data-stu-id="31ee2-215">UDTs are not serialized in FOR XML queries.</span></span> <span data-ttu-id="31ee2-216">Para executar uma consulta FOR XML que exibe a serialização XML dos UDTs, converta explicitamente cada coluna de UDT no tipo de dados `xml` da instrução SELECT.</span><span class="sxs-lookup"><span data-stu-id="31ee2-216">To execute a FOR XML query that displays the XML serialization of UDTs, explicitly convert each UDT column to the `xml` data type in the SELECT statement.</span></span> <span data-ttu-id="31ee2-217">Você também pode converter explicitamente as colunas em `varbinary`, `varchar` ou `nvarchar`.</span><span class="sxs-lookup"><span data-stu-id="31ee2-217">You can also explicitly convert the columns to `varbinary`, `varchar`, or `nvarchar`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="31ee2-218">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="31ee2-218">See Also</span></span>  
 [<span data-ttu-id="31ee2-219">Criando um tipo definido pelo usuário</span><span class="sxs-lookup"><span data-stu-id="31ee2-219">Creating a User-Defined Type</span></span>](creating-user-defined-types.md)  
  
  
