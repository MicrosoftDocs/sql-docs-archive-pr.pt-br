---
title: Iniciar e usar o Orientador de Otimização do Mecanismo de Banco de Dados | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
f1_keywords:
- sql12.dta.advancedtuningoptions.f1
- sql12.dta.general.f1
- sql12.dta.tuningoptions.f1
- sql12.dta.workload.f1
- sql12.dta.progress.f1
- sql12.dta.options.f1
helpviewer_keywords:
- Database Engine Tuning Advisor [SQL Server], starting
ms.assetid: a4e3226a-3917-4ec8-bdf0-472879d231c9
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 46f8e49de657d7021d846c7e57022a580b877f8e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87680918"
---
# <a name="start-and-use-the-database-engine-tuning-advisor"></a><span data-ttu-id="a0261-102">Iniciar e usar o Orientador de Otimização do Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="a0261-102">Start and Use the Database Engine Tuning Advisor</span></span>
  <span data-ttu-id="a0261-103">Este tópico descreve como iniciar e usar o Orientador de Otimização do Mecanismo de Banco de Dados no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-103">This topic describes how to start and use Database Engine Tuning Advisor in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="a0261-104">Para obter informações sobre como exibir e trabalhar com os resultados depois que você ajustar um banco de dados, veja [Exibir e trabalhar com a saída do Orientador de Otimização do Mecanismo de Banco de Dados](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-104">For information about how to view and work with the results after you tune a database, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
##  <a name="initialize-the-database-engine-tuning-advisor"></a><a name="Initialize"></a> <span data-ttu-id="a0261-105">Inicialize o Orientador de Otimização do Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="a0261-105">Initialize the Database Engine Tuning Advisor</span></span>  
 <span data-ttu-id="a0261-106">Ao usá-lo pela primeira vez, um usuário que seja membro da função de servidor fixa **sysadmin** deve inicializar o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-106">On first use, a user who is member of the **sysadmin** fixed server role must initialize the Database Engine Tuning Advisor.</span></span> <span data-ttu-id="a0261-107">Isso acontece porque devem ser criadas vários tabelas do sistema no banco de dados `msdb` para oferecer suporte a operações de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-107">This is because several system tables must be created in the `msdb` database to support tuning operations.</span></span> <span data-ttu-id="a0261-108">A inicialização também possibilita que os usuários membros da função de banco de dados fixa **db_owner** ajustem cargas de trabalho em tabelas em seus próprios bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-108">Initialization also enables users that are members of the **db_owner** fixed database role to tune workloads on tables in databases that they own.</span></span>  
  
 <span data-ttu-id="a0261-109">Um usuário com permissões de administrador do sistema deve executar qualquer um das ações a seguir:</span><span class="sxs-lookup"><span data-stu-id="a0261-109">A user that has system administrator permissions must perform either of the following actions:</span></span>  
  
-   <span data-ttu-id="a0261-110">Use a interface gráfica do usuário do Orientador de Otimização do Mecanismo de Banco de Dados para se conectar a uma instância do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-110">Use the Database Engine Tuning Advisor graphical user interface to connect to an instance of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="a0261-111">Para obter mais informações, consulte [Iniciar o Orientador de Otimização do Mecanismo de Banco de Dados](#Start) posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-111">For more information, see [Start the Database Engine Tuning Advisor](#Start) later in this topic.</span></span>  
  
-   <span data-ttu-id="a0261-112">Use o utilitário **dta** para ajustar a primeira carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-112">Use the **dta** utility to tune the first workload.</span></span> <span data-ttu-id="a0261-113">Para obter mais informações, consulte [Usar o utilitário dta](#dta) mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-113">For more information, see [Use the dta Utility](#dta) later in this topic.</span></span>  
  
##  <a name="start-the-database-engine-tuning-advisor"></a><a name="Start"></a> <span data-ttu-id="a0261-114">Iniciar o Orientador de Otimização do Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="a0261-114">Start the Database Engine Tuning Advisor</span></span>  
 <span data-ttu-id="a0261-115">Você pode iniciar a GUI (interface gráfica do usuário) do Orientador de Otimização do Mecanismo de Banco de Dados de diversas maneiras diferentes para dar suporte ao ajuste do banco de dados em diversos cenários.</span><span class="sxs-lookup"><span data-stu-id="a0261-115">You can start the Database Engine Tuning Advisor graphical user interface (GUI) in several different ways to support database tuning in a variety of scenarios.</span></span> <span data-ttu-id="a0261-116">As diferentes maneiras de iniciar o Orientador de Otimização do Mecanismo de Banco de Dados incluem: a partir do menu **Iniciar** , a partir do menu **Ferramentas** no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], no Editor de Consultas no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], e a partir do menu **Ferramentas** no [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-116">The different ways to start Database Engine Tuning Advisor include: from the **Start** menu, from the **Tools** menu in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], from the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and from the **Tools** menu in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="a0261-117">Ao iniciar o Orientador de Otimização do Mecanismo de Banco de Dados pela primeira vez, o aplicativo exibe uma caixa de diálogo **Conectar ao Servidor** onde você poderá especificar a instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à qual deseja conecta-se.</span><span class="sxs-lookup"><span data-stu-id="a0261-117">When you first start Database Engine Tuning Advisor, the application displays a **Connect to Server** dialog box where you can specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance to which you want to connect.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="a0261-118">Não inicie o Orientador de Otimização do Mecanismo de Banco de Dados quando o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] estiver executando no modo de usuário único.</span><span class="sxs-lookup"><span data-stu-id="a0261-118">Do not start Database Engine Tuning Advisor when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running in single-user mode.</span></span> <span data-ttu-id="a0261-119">Se você tentar iniciá-lo enquanto o servidor estiver em modo de usuário único, aparecerá uma mensagem de erro e o Orientador de Otimização do Mecanismo de Banco de Dados não iniciará.</span><span class="sxs-lookup"><span data-stu-id="a0261-119">If you attempt to start it while the server is in single-user mode, an error will be returned and Database Engine Tuning Advisor will not start.</span></span> <span data-ttu-id="a0261-120">Para obter mais informações sobre o modo de usuário único, veja [Iniciar o SQL Server no modo de usuário único](../../database-engine/configure-windows/start-sql-server-in-single-user-mode.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-120">For more information about single-user mode, see [Start SQL Server in Single-User Mode](../../database-engine/configure-windows/start-sql-server-in-single-user-mode.md).</span></span>  
  
#### <a name="to-start-database-engine-tuning-advisor-from-the-windows-start-menu"></a><span data-ttu-id="a0261-121">Para iniciar o Orientador de Otimização do Mecanismo de Banco de Dados a partir do menu Iniciar do Windows</span><span class="sxs-lookup"><span data-stu-id="a0261-121">To start Database Engine Tuning Advisor from the Windows Start menu</span></span>  
  
1.  <span data-ttu-id="a0261-122">No menu **Iniciar** , aponte para **Todos os Programas**, aponte para **Microsoft SQL Server**, aponte para **Ferramentas de Desempenho**, e em seguida clique em **Orientador de Otimização do Mecanismo de Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-122">On the **Start** menu, point to **All Programs**, point to **Microsoft SQL Server**, point to **Performance Tools**, and then click **Database Engine Tuning Advisor**.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-in-sql-server-management-studio"></a><span data-ttu-id="a0261-123">Para iniciar o Orientador de Otimização do Mecanismo de Banco de Dados no SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="a0261-123">To start the Database Engine Tuning Advisor in SQL Server Management Studio</span></span>  
  
1.  <span data-ttu-id="a0261-124">No menu [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] **Ferramentas**, clique em **Orientador de Otimização do Mecanismo de Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-124">On the [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] **Tools** menu, click **Database Engine Tuning Advisor**.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-from-the-sql-server-management-studio-query-editor"></a><span data-ttu-id="a0261-125">Para iniciar o Orientador de Otimização do Mecanismo de Banco de Dados do Editor de Consultas do SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="a0261-125">To start the Database Engine Tuning Advisor from the SQL Server Management Studio Query Editor</span></span>  
  
1.  <span data-ttu-id="a0261-126">Abra um arquivo de script do [!INCLUDE[tsql](../../includes/tsql-md.md)] no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-126">Open a [!INCLUDE[tsql](../../includes/tsql-md.md)] script file in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="a0261-127">Para obter mais informações, veja [Editores de Consultas e de Texto &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-127">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
2.  <span data-ttu-id="a0261-128">Selecione uma consulta no script do [!INCLUDE[tsql](../../includes/tsql-md.md)] ou selecione todo o script, clique com o botão direito do mouse na seleção e escolha **Analisar Consulta no Orientador de Otimização do Mecanismo de Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-128">Select a query in the [!INCLUDE[tsql](../../includes/tsql-md.md)] script, or select the entire script, right-click the selection, and choose **Analyze Query in Database Engine Tuning Advisor**.</span></span> <span data-ttu-id="a0261-129">A interface gráfica do usuário do Orientador de Otimização do Mecanismo de Banco de Dados abre e importa o script como uma carga de trabalho de arquivo XML.</span><span class="sxs-lookup"><span data-stu-id="a0261-129">The Database Engine Tuning Advisor GUI opens and imports the script as an XML file workload.</span></span> <span data-ttu-id="a0261-130">Você pode especificar um nome de sessão e opções de ajuste para ajustar as consultas selecionadas no [!INCLUDE[tsql](../../includes/tsql-md.md)] como sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-130">You can specify a session name and tuning options to tune the selected [!INCLUDE[tsql](../../includes/tsql-md.md)] queries as your workload.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-in-sql-server-profiler"></a><span data-ttu-id="a0261-131">Para iniciar o Orientador de Otimização do Mecanismo de Banco de Dados no SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="a0261-131">To start the Database Engine Tuning Advisor in SQL Server Profiler</span></span>  
  
1.  <span data-ttu-id="a0261-132">No menu **Ferramentas** do SQL Server Profiler, clique em **Orientador de Otimização do Mecanismo de Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-132">On the SQL Server Profiler **Tools** menu, click **Database Engine Tuning Advisor**.</span></span>  
  
##  <a name="create-a-workload"></a><a name="Create"></a> <span data-ttu-id="a0261-133">Crie uma carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="a0261-133">Create a Workload</span></span>  
 <span data-ttu-id="a0261-134">A carga de trabalho é um conjunto de instruções [!INCLUDE[tsql](../../includes/tsql-md.md)] executadas em um ou mais bancos de dados a serem ajustados.</span><span class="sxs-lookup"><span data-stu-id="a0261-134">A workload is a set of [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that execute against a database or databases that you want to tune.</span></span> <span data-ttu-id="a0261-135">O Orientador de Otimização do Mecanismo de Banco de Dados analisa essas cargas de trabalho para recomendar índices ou estratégias de particionamento que melhorarão o desempenho de consulta de seu servidor.</span><span class="sxs-lookup"><span data-stu-id="a0261-135">Database Engine Tuning Advisor analyzes these workloads to recommend indexes or partitioning strategies that will improve your server's query performance.</span></span>  
  
 <span data-ttu-id="a0261-136">Você pode criar uma carga de trabalho usando um dos métodos a seguir.</span><span class="sxs-lookup"><span data-stu-id="a0261-136">You can create a workload by using one of the following methods.</span></span>  
  
-   <span data-ttu-id="a0261-137">Use o cache de planos como uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-137">Use the plan cache as a workload.</span></span> <span data-ttu-id="a0261-138">Fazendo isso, você poderá evitar a criação de uma carga de trabalho manualmente.</span><span class="sxs-lookup"><span data-stu-id="a0261-138">By doing this, you can avoid having to manually create a workload.</span></span> <span data-ttu-id="a0261-139">Para obter mais informações, consulte [Ajustar um banco de dados](#Tune) mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-139">For more information, see [Tune a Database](#Tune) later in this topic.</span></span>  
  
-   <span data-ttu-id="a0261-140">Use o Editor de Consultas no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou seu editor de textos favorito para criar manualmente cargas de trabalho de script [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a0261-140">Use the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or your favorite text editor to manually create [!INCLUDE[tsql](../../includes/tsql-md.md)] script workloads.</span></span>  
  
-   <span data-ttu-id="a0261-141">Usar [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] para criar cargas de trabalho de arquivos ou tabelas de rastreamento</span><span class="sxs-lookup"><span data-stu-id="a0261-141">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to create trace file or trace table workloads</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a0261-142">Quando uma tabela de rastreamento é usada como uma carga de trabalho, ela deve existir no mesmo servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está ajustando.</span><span class="sxs-lookup"><span data-stu-id="a0261-142">When using a trace table as a workload, that table must exist on the same server where Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="a0261-143">Se você criou a tabela de rastreamento em um servidor diferente, mova-a para o servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está ajustando.</span><span class="sxs-lookup"><span data-stu-id="a0261-143">If you create the trace table on a different server, then move it to the server where Database Engine Tuning Advisor is tuning.</span></span>  
  
-   <span data-ttu-id="a0261-144">As cargas de trabalho também podem ser inseridas em um arquivo de entrada XML, no qual você também pode especificar um peso para cada evento.</span><span class="sxs-lookup"><span data-stu-id="a0261-144">Workloads can also be embedded in an XML input file, where you can also specify a weight for each event.</span></span> <span data-ttu-id="a0261-145">Para obter mais informações sobre como especificar cargas de trabalho inseridas, consulte [Criar um arquivo de entrada XML](#XMLInput) mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-145">For more information about specifying embedded workloads, see [Create an XML Input File](#XMLInput) later in this topic.</span></span>  
  
###  <a name="to-create-transact-sql-script-workloads"></a><a name="SSMS"></a> <span data-ttu-id="a0261-146">Para criar cargas de trabalho de script do Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="a0261-146">To create Transact-SQL script workloads</span></span>  
  
1.  <span data-ttu-id="a0261-147">Inicie o Editor de Consultas no [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-147">Launch the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="a0261-148">Para obter mais informações, veja [Editores de Consultas e de Texto &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-148">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
2.  <span data-ttu-id="a0261-149">Digite seu script [!INCLUDE[tsql](../../includes/tsql-md.md)] no Editor de Consultas.</span><span class="sxs-lookup"><span data-stu-id="a0261-149">Type your [!INCLUDE[tsql](../../includes/tsql-md.md)] script into the Query Editor.</span></span> <span data-ttu-id="a0261-150">Este script deve conter um conjunto de instruções [!INCLUDE[tsql](../../includes/tsql-md.md)] que são executadas no banco ou bancos de dados que você quer ajustar.</span><span class="sxs-lookup"><span data-stu-id="a0261-150">This script should contain a set of [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that execute against the database or databases that you want to tune.</span></span>  
  
3.  <span data-ttu-id="a0261-151">Salve o arquivo com uma extensão **.sql** .</span><span class="sxs-lookup"><span data-stu-id="a0261-151">Save the file with a **.sql** extension.</span></span> <span data-ttu-id="a0261-152">A interface gráfica do usuário do Orientador de Otimização do Mecanismo de Banco de Dados e o utilitário de linha de comando **dta** podem usar esse script [!INCLUDE[tsql](../../includes/tsql-md.md)] como carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-152">The Database Engine Tuning Advisor GUI and the command-line **dta** utility can use this [!INCLUDE[tsql](../../includes/tsql-md.md)] script as a workload.</span></span>  
  
###  <a name="to-create-trace-file-and-trace-table-workloads"></a><a name="Profiler"></a> <span data-ttu-id="a0261-153">Para criar cargas de trabalho de arquivos e tabelas de rastreamento</span><span class="sxs-lookup"><span data-stu-id="a0261-153">To create trace file and trace table workloads</span></span>  
  
1.  <span data-ttu-id="a0261-154">Inicie o [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] usando um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="a0261-154">Launch [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="a0261-155">No menu **Iniciar** , aponte para **Todos os Programas**, **Microsoft SQL Server**, **Ferramentas de Desempenho**e clique em **SQL Server Profiler**.</span><span class="sxs-lookup"><span data-stu-id="a0261-155">On the **Start** menu, point to **All Programs**, **Microsoft SQL Server**, **Performance Tools**, and then click **SQL Server Profiler**.</span></span>  
  
    -   <span data-ttu-id="a0261-156">No [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], clique no menu **Ferramentas** e em **SQL Server Profiler**.</span><span class="sxs-lookup"><span data-stu-id="a0261-156">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], click the **Tools** menu, and then click **SQL Server Profiler**.</span></span>  
  
2.  <span data-ttu-id="a0261-157">Crie um arquivo ou tabela de rastreamento, seguindo os procedimentos abaixo, que use o modelo de **Ajuste** do [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="a0261-157">Create a trace file or table as described in the following procedures that uses the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] **Tuning** template:</span></span>  
  
    -   [<span data-ttu-id="a0261-158">Criar um rastreamento &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a0261-158">Create a Trace &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/create-a-trace-sql-server-profiler.md)  
  
    -   [<span data-ttu-id="a0261-159">Salvar resultados de rastreamento em um arquivo &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a0261-159">Save Trace Results to a File &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/save-trace-results-to-a-file-sql-server-profiler.md)  
  
         <span data-ttu-id="a0261-160">O Orientador de Otimização do Mecanismo de Banco de Dados pressupõe que o arquivo de rastreamento de carga de trabalho seja um arquivo de substituição.</span><span class="sxs-lookup"><span data-stu-id="a0261-160">Database Engine Tuning Advisor assumes that the workload trace file is a rollover file.</span></span> <span data-ttu-id="a0261-161">Para obter mais informações sobre arquivos de substituição, consulte [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-161">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
    -   [<span data-ttu-id="a0261-162">Salvar resultados de rastreamento em uma tabela &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a0261-162">Save Trace Results to a Table &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/save-trace-results-to-a-table-sql-server-profiler.md)  
  
         <span data-ttu-id="a0261-163">Verifique se o rastreamento terminou, antes de usar uma tabela de rastreamento como uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-163">Make sure that tracing has stopped before using a trace table as a workload.</span></span>  
  
 <span data-ttu-id="a0261-164">Recomendamos que você use o modelo de Ajuste do SQL Server Profiler para capturar cargas de trabalho para o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-164">We recommend that you use the SQL Server Profiler Tuning template for capturing workloads for Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="a0261-165">Se desejar usar seu próprio modelo, verifique se estes eventos de rastreamento foram capturados:</span><span class="sxs-lookup"><span data-stu-id="a0261-165">If you want to use your own template, ensure that the following trace events are captured:</span></span>  
  
-   <span data-ttu-id="a0261-166">**RPC:Completed**</span><span class="sxs-lookup"><span data-stu-id="a0261-166">**RPC:Completed**</span></span>  
  
-   <span data-ttu-id="a0261-167">**SQL:BatchCompleted**</span><span class="sxs-lookup"><span data-stu-id="a0261-167">**SQL:BatchCompleted**</span></span>  
  
-   <span data-ttu-id="a0261-168">**SP:StmtCompleted**</span><span class="sxs-lookup"><span data-stu-id="a0261-168">**SP:StmtCompleted**</span></span>  
  
 <span data-ttu-id="a0261-169">Você também pode usar as versões **Iniciais** desses eventos de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-169">You can also use the **Starting** versions of these trace events.</span></span> <span data-ttu-id="a0261-170">Por exemplo, **SQL:BatchStarting**.</span><span class="sxs-lookup"><span data-stu-id="a0261-170">For example, **SQL:BatchStarting**.</span></span> <span data-ttu-id="a0261-171">Contudo, as versões **Concluído** desses eventos de rastreamento incluem a coluna **Duração** , que permite que o Orientador de Otimização do Mecanismo de Banco de Dados ajuste a carga de trabalho de maneira mais eficaz.</span><span class="sxs-lookup"><span data-stu-id="a0261-171">However, the **Completed** versions of these trace events include the **Duration** column, which allows Database Engine Tuning Advisor to more effectively tune the workload.</span></span> <span data-ttu-id="a0261-172">O Orientador de Otimização do Mecanismo de Banco de Dados não ajusta outros tipos de eventos de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-172">Database Engine Tuning Advisor does not tune other types of trace events.</span></span> <span data-ttu-id="a0261-173">Para obter mais informações sobre esses eventos de rastreamento, consulte [Stored Procedures Event Category](../event-classes/stored-procedures-event-category.md) e [TSQL Event Category](../event-classes/tsql-event-category.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-173">For more information about these trace events, see [Stored Procedures Event Category](../event-classes/stored-procedures-event-category.md) and [TSQL Event Category](../event-classes/tsql-event-category.md).</span></span> <span data-ttu-id="a0261-174">Para obter informações sobre como usar os procedimentos armazenados do Rastreamento do SQL para criar uma carga de trabalho de arquivo de rastreamento, veja [Criar um rastreamento &#40;Transact-SQL&#41;](../sql-trace/create-a-trace-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-174">For information about using the SQL Trace stored procedures to create a trace file workload, see [Create a Trace &#40;Transact-SQL&#41;](../sql-trace/create-a-trace-transact-sql.md).</span></span>  
  
### <a name="trace-file-or-trace-table-workloads-that-contain-the-loginname-data-column"></a><span data-ttu-id="a0261-175">Cargas de trabalho de arquivo ou tabela de rastreamento que contêm a coluna de dados LoginName</span><span class="sxs-lookup"><span data-stu-id="a0261-175">Trace File or Trace Table Workloads That Contain the LoginName Data Column</span></span>  
 <span data-ttu-id="a0261-176">O Orientador de Otimização do Mecanismo de Banco de Dados submete solicitações ao Plano de execução como parte do processo de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-176">Database Engine Tuning Advisor submits Showplan requests as part of the tuning process.</span></span> <span data-ttu-id="a0261-177">Quando uma tabela ou arquivo de rastreamento que contém a coluna de dados **LoginName** é consumida como carga de trabalho, o Orientador de Otimização do Mecanismo de Banco de Dados representa o usuário especificado no **LoginName**.</span><span class="sxs-lookup"><span data-stu-id="a0261-177">When a trace table or file that contains the **LoginName** data column is consumed as a workload, Database Engine Tuning Advisor impersonates the user specified in **LoginName**.</span></span> <span data-ttu-id="a0261-178">Se esse usuário não recebeu a permissão SHOWPLAN, que permite que o usuário execute e crie Planos de execução para as instruções contidas no rastreamento, o Orientador de Otimização do Mecanismo de Banco de Dados não ajustará essas instruções.</span><span class="sxs-lookup"><span data-stu-id="a0261-178">If this user has not been granted the SHOWPLAN permission, which enables the user to execute and produce Showplans for the statements contained in the trace, Database Engine Tuning Advisor will not tune those statements.</span></span>  
  
##### <a name="to-avoid-granting-the-showplan-permission-to-each-user-specified-in-the-loginname-column-of-the-trace"></a><span data-ttu-id="a0261-179">Para evitar conceder a permissão SHOWPLAN a cada usuário especificado na coluna LoginName do rastreamento</span><span class="sxs-lookup"><span data-stu-id="a0261-179">To avoid granting the SHOWPLAN permission to each user specified in the LoginName column of the trace</span></span>  
  
1.  <span data-ttu-id="a0261-180">Ajuste a carga de trabalho do arquivo ou tabela de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-180">Tune the trace file or table workload.</span></span> <span data-ttu-id="a0261-181">Para obter mais informações, consulte [Ajustar um banco de dados](#Tune) mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-181">For more information, see [Tune a Database](#Tune) later in this topic.</span></span>  
  
2.  <span data-ttu-id="a0261-182">Verifique o log de ajuste de instruções que não foram ajustadas devido a permissões inadequadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-182">Check the tuning log for statements that were not tuned due to inadequate permissions.</span></span> <span data-ttu-id="a0261-183">Para obter mais informações, veja [Exibir e trabalhar com a saída do Orientador de Otimização do Mecanismo de Banco de Dados](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-183">For more information, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="a0261-184">Crie uma nova carga de trabalho excluindo a coluna **LoginName** dos eventos que não foram ajustados e salve somente os eventos não ajustados em um novo arquivo ou tabela de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-184">Create a new workload by deleting the **LoginName** column from the events that were not tuned, and then save only the untuned events in a new trace file or table.</span></span> <span data-ttu-id="a0261-185">Para obter mais informações sobre como excluir colunas de dados de um rastreamento, veja [Especificar eventos e colunas de dados para um arquivo de rastreamento &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/specify-events-and-data-columns-for-a-trace-file-sql-server-profiler.md) ou [Modificar um rastreamento existente &#40;Transact-SQL&#41;](../sql-trace/modify-an-existing-trace-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-185">For more information about deleting data columns from a trace, see [Specify Events and Data Columns for a Trace File &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/specify-events-and-data-columns-for-a-trace-file-sql-server-profiler.md) or [Modify an Existing Trace &#40;Transact-SQL&#41;](../sql-trace/modify-an-existing-trace-transact-sql.md).</span></span>  
  
4.  <span data-ttu-id="a0261-186">Submeta novamente a nova carga de trabalho sem a coluna **LoginName** ao Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-186">Resubmit the new workload without the **LoginName** column to Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="a0261-187">O Orientador de Otimização do Mecanismo de Banco de Dados ajustará a nova carga de trabalho, pois as informações de logon não foram especificadas no rastreamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-187">Database Engine Tuning Advisor will tune the new workload because login information is not specified in the trace.</span></span> <span data-ttu-id="a0261-188">Se não houver **LoginName** para uma instrução, o Orientador de Otimização do Mecanismo de Banco de Dados ajustará essa instrução representando o usuário que iniciou a sessão de ajuste (um membro da função de servidor fixa **sysadmin** ou de função de banco de dados fixa **db_owner** ).</span><span class="sxs-lookup"><span data-stu-id="a0261-188">If the **LoginName** does not exist for a statement, Database Engine Tuning Advisor tunes that statement by impersonating the user who started the tuning session (a member of either the **sysadmin** fixed server role or the **db_owner** fixed database role).</span></span>  
  
##  <a name="tune-a-database"></a><a name="Tune"></a> <span data-ttu-id="a0261-189">Ajustar um banco de dados</span><span class="sxs-lookup"><span data-stu-id="a0261-189">Tune a Database</span></span>  
 <span data-ttu-id="a0261-190">Para ajustar um banco de dados, você pode usar a GUI do Orientador de Otimização do Mecanismo de Banco de Dados ou o utilitário **dta** .</span><span class="sxs-lookup"><span data-stu-id="a0261-190">To tune a database, you can use the Database Engine Tuning Advisor GUI or the **dta** utility.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0261-191">Certifique-se de que o rastreamento tenha parado antes de usar uma tabela de rastreamento como carga de trabalho para o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-191">Make sure that tracing has stopped before using a trace table as a workload for Database Engine Tuning Advisor.</span></span> <span data-ttu-id="a0261-192">O Orientador de Otimização do Mecanismo de Banco de Dados não suporta a utilização de uma tabela de rastreamento na qual os eventos de rastreamento ainda estejam sendo gravados como carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-192">Database Engine Tuning Advisor does not support using a trace table to which trace events are still being written as a workload.</span></span>  
  
### <a name="use-the-database-engine-tuning-advisor-graphical-user-interface"></a><span data-ttu-id="a0261-193">Use a interface gráfica do usuário do Orientador de Otimização do Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="a0261-193">Use the Database Engine Tuning Advisor Graphical User Interface</span></span>  
 <span data-ttu-id="a0261-194">Na GUI (interface gráfica do usuário) do Orientador de Otimização do Mecanismo de Banco de Dados, você pode ajustar um banco de dados usando o cache de planos, arquivos de carga de trabalho ou tabelas de carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="a0261-194">On the Database Engine Tuning Advisor GUI, you can tune a database by using the plan cache, workload files, or workload tables.</span></span> <span data-ttu-id="a0261-195">Você pode usar a GUI do Orientador de Otimização do Mecanismo de Banco de Dados para exibir facilmente os resultados de sua sessão de ajuste atual e os das sessões anteriores.</span><span class="sxs-lookup"><span data-stu-id="a0261-195">You can use the Database Engine Tuning Advisor GUI to easily view the results of your current tuning session and results of previous tuning sessions.</span></span> <span data-ttu-id="a0261-196">Para obter mais informações sobre as opções da interface do usuário, consulte [Descrições da interface do usuário](#UI) posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-196">For information about user interface options, see [User Interface Descriptions](#UI) later in this topic.</span></span> <span data-ttu-id="a0261-197">Para obter mais informações sobre como trabalhar com a saída depois que você ajustar um banco de dados, veja [Exibir e trabalhar com a saída do Orientador de Otimização do Mecanismo de Banco de Dados](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-197">For more information about working with the output after you tune a database, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
####  <a name="to-tune-a-database-by-using-the-plan-cache"></a><a name="PlanCache"></a> <span data-ttu-id="a0261-198">Para ajustar um banco de dados usando o cache de plano</span><span class="sxs-lookup"><span data-stu-id="a0261-198">To tune a database by using the plan cache</span></span>  
  
1.  <span data-ttu-id="a0261-199">Inicie o Orientador de Otimização do Mecanismo de Banco de Dados e faça logon em uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-199">Launch Database Engine Tuning Advisor, and log into an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a0261-200">Para obter mais informações, consulte [Iniciar o Orientador de Otimização do Mecanismo de Banco de Dados](#Start) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-200">For more information, see [Start the Database Engine Tuning Advisor](#Start) earlier in this topic.</span></span>  
  
2.  <span data-ttu-id="a0261-201">Na guia **Geral** , digite um nome em **Nome da sessão** para criar uma nova sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-201">On the **General** tab, type a name in **Session name** to create a new tuning session.</span></span> <span data-ttu-id="a0261-202">Você deve configurar os campos na guia **Geral** antes de iniciar uma sessão de otimização.</span><span class="sxs-lookup"><span data-stu-id="a0261-202">You must configure the fields in the **General** tab before starting a tuning session.</span></span> <span data-ttu-id="a0261-203">Não é necessário modificar as configurações da guia **Opções de Ajuste** antes de iniciar uma sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-203">It is not necessary to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
3.  <span data-ttu-id="a0261-204">Selecione **Cache de Planos** como opção de carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-204">Select **Plan Cache** as the workload option.</span></span> <span data-ttu-id="a0261-205">O Orientador de Otimização do Mecanismo de Banco de Dados seleciona os primeiros 1.000 eventos no cache de planos para usar na análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-205">Database Engine Tuning Advisor selects the top 1,000 events from the plan cache to use for analysis.</span></span>  
  
4.  <span data-ttu-id="a0261-206">Selecione o(s) banco(s) de dados que você deseja ajustar e, se desejar, em **Tabelas Selecionadas**, escolha uma ou mais tabelas de cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-206">Select the database or databases that you want to tune, and optionally from **Selected Tables**, choose one or more tables from each database.</span></span> <span data-ttu-id="a0261-207">Para incluir entradas de cache para todos os bancos de dados, em **Opções de Ajuste**, clique em **Opções Avançadas** e verifique **Incluir eventos de cache de planos de todos os bancos de dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-207">To include cache entries for all databases, from **Tuning Options**, click **Advanced Options** and then check **Include plan cache events from all databases**.</span></span>  
  
5.  <span data-ttu-id="a0261-208">Marque **Salvar log de ajuste** para salvar uma cópia do log de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-208">Check **Save tuning log** to save a copy of the tuning log.</span></span> <span data-ttu-id="a0261-209">Desmarque a caixa de seleção caso não queira salvar uma cópia do log de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-209">Clear the check box if you do not want to save a copy of the tuning log.</span></span>  
  
     <span data-ttu-id="a0261-210">Você pode exibir o log de ajuste depois da análise abrindo a sessão e selecionando a guia **Progresso** .</span><span class="sxs-lookup"><span data-stu-id="a0261-210">You can view the tuning log after analysis by opening the session and selecting the **Progress** tab.</span></span>  
  
6.  <span data-ttu-id="a0261-211">Clique na guia **Opções de Ajuste** e selecione entre as opções listadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-211">Click the **Tuning Options** tab and select from the options listed there.</span></span>  
  
7.  <span data-ttu-id="a0261-212">Clique em **Iniciar Análise**.</span><span class="sxs-lookup"><span data-stu-id="a0261-212">Click **Start Analysis**.</span></span>  
  
     <span data-ttu-id="a0261-213">Se quiser parar a sessão de ajuste depois de iniciada, escolha uma das opções a seguir no menu **Ações** :</span><span class="sxs-lookup"><span data-stu-id="a0261-213">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
    -   <span data-ttu-id="a0261-214">**Parar Análise (com Recomendações)** interrompe a sessão de ajuste e solicita se você quer que o Orientador de Otimização do Mecanismo de Banco de Dados gere recomendações com base na análise concluída até este ponto.</span><span class="sxs-lookup"><span data-stu-id="a0261-214">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
    -   <span data-ttu-id="a0261-215">**Parar Análise** interrompe a sessão de ajuste sem gerar qualquer recomendação.</span><span class="sxs-lookup"><span data-stu-id="a0261-215">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0261-216">Não há suporte para pausar o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-216">Pausing Database Engine Tuning Advisor is not supported.</span></span> <span data-ttu-id="a0261-217">Se você clicar no botão de barra de ferramentas **Iniciar Análise** depois de clicar no botão **Parar Análise** ou **Parar Análise (com Recomendações)** , o Orientador de Otimização do Mecanismo de Banco de Dados iniciará uma nova sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-217">If you click the **Start Analysis** toolbar button after clicking either the **Stop Analysis** or **Stop Analysis (With Recommendations)** toolbar buttons, Database Engine Tuning Advisor starts a new tuning session.</span></span>  
  
##### <a name="to-tune-a-database-using-a-workload-file-or-table-as-input"></a><span data-ttu-id="a0261-218">Para ajustar um banco de dados usando uma tabela ou arquivo de carga de trabalho como entrada</span><span class="sxs-lookup"><span data-stu-id="a0261-218">To tune a database using a workload file or table as input</span></span>  
  
1.  <span data-ttu-id="a0261-219">Determine os recursos de banco de dados (índices, exibições indexadas, particionamento) que o Orientador de Otimização do Mecanismo de Banco de Dados deve considerar para adição, remoção ou retenção durante a análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-219">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="a0261-220">Crie uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-220">Create a workload.</span></span> <span data-ttu-id="a0261-221">Para obter mais informações, consulte [Criar uma carga de trabalho](#Create) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-221">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="a0261-222">Inicie o Orientador de Otimização do Mecanismo de Banco de Dados e faça logon em uma instância do [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-222">Launch Database Engine Tuning Advisor, and log into an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a0261-223">Para obter mais informações, consulte [Iniciar o Orientador de Otimização do Mecanismo de Banco de Dados](#Start) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-223">For more information, see [Start the Database Engine Tuning Advisor](#Start) earlier in this topic.</span></span>  
  
4.  <span data-ttu-id="a0261-224">Na guia **Geral** , digite um nome em **Nome da sessão** para criar uma nova sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-224">On the **General** tab, type a name in **Session name** to create a new tuning session.</span></span>  
  
5.  <span data-ttu-id="a0261-225">Escolha um **Arquivo de Carga de Trabalho** ou uma **Tabela** e digite o caminho do arquivo ou o nome da tabela na caixa de texto adjacente.</span><span class="sxs-lookup"><span data-stu-id="a0261-225">Choose either a **Workload File** or **Table** and type either the path to the file, or the name of the table in the adjacent text box.</span></span>  
  
     <span data-ttu-id="a0261-226">O formato para especificar uma tabela é</span><span class="sxs-lookup"><span data-stu-id="a0261-226">The format for specifying a table is</span></span>  
  
    ```  
  
    database_name.schema_name.table_name  
    ```  
  
     <span data-ttu-id="a0261-227">Para procurar uma tabela ou um arquivo de carga de trabalho, clique em **Procurar**.</span><span class="sxs-lookup"><span data-stu-id="a0261-227">To search for a workload file or table, click **Browse**.</span></span> <span data-ttu-id="a0261-228">O Orientador de Otimização do Mecanismo de Banco de Dados assume que os arquivos de carga de trabalho são arquivos de substituição.</span><span class="sxs-lookup"><span data-stu-id="a0261-228">Database Engine Tuning Advisor assumes that workload files are rollover files.</span></span> <span data-ttu-id="a0261-229">Para obter mais informações sobre arquivos de substituição, consulte [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-229">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
     <span data-ttu-id="a0261-230">Ao usar uma tabela de rastreamento como uma carga de trabalho, essa tabela deve existir no mesmo servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está ajustando.</span><span class="sxs-lookup"><span data-stu-id="a0261-230">When using a trace table as a workload, that table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="a0261-231">Se você criar a tabela de rastreamento em um servidor diferente, mova-a para o servidor que o Orientador de Otimização do Mecanismo de Banco de Dados está ajustando antes de usá-la como sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-231">If you create the trace table on a different server, move it to the server that Database Engine Tuning Advisor is tuning before using it as your workload.</span></span>  
  
6.  <span data-ttu-id="a0261-232">Selecione os bancos de dados e as tabelas em que você deseja executar a carga de trabalho selecionada na etapa 5.</span><span class="sxs-lookup"><span data-stu-id="a0261-232">Select the databases and tables against which you wish to run the workload that you selected in step 5.</span></span> <span data-ttu-id="a0261-233">Para selecionar as tabelas, clique na seta **Tabelas Selecionadas** .</span><span class="sxs-lookup"><span data-stu-id="a0261-233">To select the tables, click the **Selected Tables** arrow.</span></span>  
  
7.  <span data-ttu-id="a0261-234">Marque **Salvar log de ajuste** para salvar uma cópia do log de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-234">Check **Save tuning log** to save a copy of the tuning log.</span></span> <span data-ttu-id="a0261-235">Desmarque a caixa de seleção caso não queira salvar uma cópia do log de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-235">Clear the check box if you do not want to save a copy of the tuning log.</span></span>  
  
     <span data-ttu-id="a0261-236">Você pode exibir o log de ajuste depois da análise abrindo a sessão e selecionando a guia **Progresso** .</span><span class="sxs-lookup"><span data-stu-id="a0261-236">You can view the tuning log after analysis by opening the session and selecting the **Progress** tab.</span></span>  
  
8.  <span data-ttu-id="a0261-237">Clique na guia **Opções de Ajuste** e selecione entre as opções listadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-237">Click the **Tuning Options** tab and select from the options listed there.</span></span>  
  
9. <span data-ttu-id="a0261-238">Clique no botão **Iniciar Análise** na barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="a0261-238">Click the **Start Analysis** button in the toolbar.</span></span>  
  
     <span data-ttu-id="a0261-239">Se quiser parar a sessão de ajuste depois de iniciada, escolha uma das opções a seguir no menu **Ações** :</span><span class="sxs-lookup"><span data-stu-id="a0261-239">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
    -   <span data-ttu-id="a0261-240">**Parar Análise (com Recomendações)** interrompe a sessão de ajuste e solicita se você quer que o Orientador de Otimização do Mecanismo de Banco de Dados gere recomendações com base na análise concluída até este ponto.</span><span class="sxs-lookup"><span data-stu-id="a0261-240">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
    -   <span data-ttu-id="a0261-241">**Parar Análise** interrompe a sessão de ajuste sem gerar qualquer recomendação.</span><span class="sxs-lookup"><span data-stu-id="a0261-241">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0261-242">Não há suporte para pausar o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-242">Pausing Database Engine Tuning Advisor is not supported.</span></span> <span data-ttu-id="a0261-243">Se você clicar no botão de barra de ferramentas **Iniciar Análise** depois de clicar no botão **Parar Análise** ou **Parar Análise (com Recomendações)** , o Orientador de Otimização do Mecanismo de Banco de Dados iniciará uma nova sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-243">If you click the **Start Analysis** toolbar button after clicking either the **Stop Analysis** or **Stop Analysis (With Recommendations)** toolbar buttons, Database Engine Tuning Advisor starts a new tuning session.</span></span>  
  
###  <a name="use-the-dta-utility"></a><a name="dta"></a> <span data-ttu-id="a0261-244">Usar o utilitário dta</span><span class="sxs-lookup"><span data-stu-id="a0261-244">Use the dta Utility</span></span>  
 <span data-ttu-id="a0261-245">O utilitário [dta utility](../../tools/dta/dta-utility.md) fornece um arquivo executável de prompt de comando que pode ser usado para ajustar bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-245">The [dta utility](../../tools/dta/dta-utility.md) provides a command prompt executable file that you can use to tune databases.</span></span> <span data-ttu-id="a0261-246">Ele permite usar a funcionalidade do Orientador de Otimização do Mecanismo de Banco de Dados em scripts e arquivos em lote.</span><span class="sxs-lookup"><span data-stu-id="a0261-246">It enables you to use Database Engine Tuning Advisor functionality in batch files and scripts.</span></span> <span data-ttu-id="a0261-247">O utilitário **dta** assume entradas de cache de plano, arquivos de rastreamento, tabelas de rastreamento e scripts [!INCLUDE[tsql](../../includes/tsql-md.md)] como cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-247">The **dta** utility takes plan cache entries, trace files, trace tables, and [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts as workloads.</span></span> <span data-ttu-id="a0261-248">Ele ainda aceita entrada XML compatível com o esquema XML do Orientador de Otimização do Mecanismo de Banco de Dados, que está disponível no [Microsoft Web site](https://go.microsoft.com/fwlink/?linkid=43100).</span><span class="sxs-lookup"><span data-stu-id="a0261-248">It also takes XML input that conforms to the Database Engine Tuning Advisor XML schema, which is available at this [Microsoft Web site](https://go.microsoft.com/fwlink/?linkid=43100).</span></span>  
  
 <span data-ttu-id="a0261-249">Antes de começar a ajustar uma carga de trabalho com o utilitário **dta** , considere o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a0261-249">Consider the following before you begin tuning a workload with the **dta** utility:</span></span>  
  
-   <span data-ttu-id="a0261-250">Ao usar uma tabela de rastreamento como uma carga de trabalho, essa tabela deve existir no mesmo servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está ajustando.</span><span class="sxs-lookup"><span data-stu-id="a0261-250">When using a trace table as a workload, that table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="a0261-251">Se você criar a tabela de rastreamento em um servidor diferente, mova-a para o servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está fazendo o ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-251">If you create the trace table on a different server, then move it to the server that Database Engine Tuning Advisor is tuning.</span></span>  
  
-   <span data-ttu-id="a0261-252">Certifique-se de que o rastreamento tenha parado antes de usar uma tabela de rastreamento como carga de trabalho para o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-252">Make sure that tracing has stopped before using a trace table as a workload for Database Engine Tuning Advisor.</span></span> <span data-ttu-id="a0261-253">O Orientador de Otimização do Mecanismo de Banco de Dados não suporta a utilização de uma tabela de rastreamento na qual os eventos de rastreamento ainda estejam sendo gravados como carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-253">Database Engine Tuning Advisor does not support using a trace table to which trace events are still being written as a workload.</span></span>  
  
-   <span data-ttu-id="a0261-254">Se uma sessão de ajuste continuar em execução por mais tempo que o esperado, pressione CTRL+C para parar a sessão de ajuste e gerar recomendações baseadas na análise do que o **dta** completou até esse ponto.</span><span class="sxs-lookup"><span data-stu-id="a0261-254">If a tuning session continues running longer than you had anticipated it would run, you can press CTRL+C to stop the tuning session and generate recommendations based on the analysis **dta** has completed up to this point.</span></span> <span data-ttu-id="a0261-255">Você será solicitado a indicar se deseja ou não gerar recomendações.</span><span class="sxs-lookup"><span data-stu-id="a0261-255">You will be prompted to decide whether you want to generate recommendations or not.</span></span> <span data-ttu-id="a0261-256">Pressione CTRL+C novamente para parar a sessão de ajuste sem gerar recomendações.</span><span class="sxs-lookup"><span data-stu-id="a0261-256">Press CTRL+C again to stop the tuning session without generating recommendations.</span></span>  
  
 <span data-ttu-id="a0261-257">Para obter mais informações sobre sintaxe e exemplos do utilitário **dta** , consulte [dta Utility](../../tools/dta/dta-utility.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-257">For more information about **dta** utility syntax and examples, see [dta Utility](../../tools/dta/dta-utility.md).</span></span>  
  
##### <a name="to-tune-a-database-by-using-the-plan-cache"></a><span data-ttu-id="a0261-258">Para ajustar um banco de dados usando o cache de plano</span><span class="sxs-lookup"><span data-stu-id="a0261-258">To tune a database by using the plan cache</span></span>  
  
1.  <span data-ttu-id="a0261-259">Especifique a opção **-ip** .</span><span class="sxs-lookup"><span data-stu-id="a0261-259">Specify the **-ip** option.</span></span> <span data-ttu-id="a0261-260">Os primeiros 1.000 eventos de cache de plano para bancos de dados selecionados são analisados.</span><span class="sxs-lookup"><span data-stu-id="a0261-260">The top 1,000 plan cache events for the selected databases are analyzed.</span></span>  
  
     <span data-ttu-id="a0261-261">Em um prompt de comando, digite o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a0261-261">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -s SessionName  
    ```  
  
2.  <span data-ttu-id="a0261-262">Para modificar o número de eventos a serem usados para análise, especifique a opção **-n**.</span><span class="sxs-lookup"><span data-stu-id="a0261-262">To modify the number of events to use for analysis, specify the **-n** option.</span></span> <span data-ttu-id="a0261-263">O exemplo a seguir aumenta o número de entradas de cache para 2.000.</span><span class="sxs-lookup"><span data-stu-id="a0261-263">The following example increases the number of cache entries to 2,000.</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -n 2000-s SessionName1  
    ```  
  
3.  <span data-ttu-id="a0261-264">Para analisar eventos para todos os bancos de dados na instância, especifique a opção **-ipf** .</span><span class="sxs-lookup"><span data-stu-id="a0261-264">To analyze events for all databases in the instance, specify the **-ipf** option.</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -ipf -n 2000 -s SessionName2  
    ```  
  
##### <a name="to-tune-a-database-by-using-a-workload-and-dta-utility-default-settings"></a><span data-ttu-id="a0261-265">Para ajustar um banco de dados usando uma carga de trabalho e configurações padrão do utilitário dta</span><span class="sxs-lookup"><span data-stu-id="a0261-265">To tune a database by using a workload and dta utility default settings</span></span>  
  
1.  <span data-ttu-id="a0261-266">Determine os recursos de banco de dados (índices, exibições indexadas, particionamento) que o Orientador de Otimização do Mecanismo de Banco de Dados deve considerar para adição, remoção ou retenção durante a análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-266">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="a0261-267">Crie uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-267">Create a workload.</span></span> <span data-ttu-id="a0261-268">Para obter mais informações, consulte [Criar uma carga de trabalho](#Create) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-268">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="a0261-269">Em um prompt de comando, digite o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a0261-269">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -D DatabaseName -if WorkloadFile -s SessionName  
    ```  
  
     <span data-ttu-id="a0261-270">em que `-E` especifica que sua sessão de ajuste usa uma conexão confiável (em vez de ID e senha de logon), `-D` especifica o nome do banco de dados que você quer ajustar.</span><span class="sxs-lookup"><span data-stu-id="a0261-270">where `-E` specifies that your tuning session uses a trusted connection (instead of a login ID and password), `-D` specifies the name of the database you want to tune.</span></span> <span data-ttu-id="a0261-271">Por padrão, o utilitário conecta a instância padrão do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no computador local.</span><span class="sxs-lookup"><span data-stu-id="a0261-271">By default, the utility connects to the default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the local computer.</span></span> <span data-ttu-id="a0261-272">(Use a opção `-S` para especificar um banco de dados remoto, como mostrado no procedimento a seguir, ou para especificar uma instância nomeada.) A opção `-if` especifica o nome e o caminho de um arquivo de carga de trabalho (que pode ser um script [!INCLUDE[tsql](../../includes/tsql-md.md)] ou um arquivo de rastreamento), e `-s` especifica um nome para a sua sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-272">(Use the `-S` option to specify a remote database as shown in the following procedure, or to specify a named instance.) The `-if` option specifies the name and path to a workload file (which can be a [!INCLUDE[tsql](../../includes/tsql-md.md)] script or a trace file), and `-s` specifies a name for your tuning session.</span></span>  
  
     <span data-ttu-id="a0261-273">As quatro opções mostradas aqui (nome de banco de dados, carga de trabalho, tipo de conexão e nome de sessão) são obrigatórias.</span><span class="sxs-lookup"><span data-stu-id="a0261-273">The four options shown here (database name, workload, connection type, and session name) are mandatory.</span></span>  
  
##### <a name="to-tune-a-remote-database-or-a-named-instance-for-a-specific-duration"></a><span data-ttu-id="a0261-274">Para ajustar um banco de dados remoto ou uma instância nomeada para uma duração específica</span><span class="sxs-lookup"><span data-stu-id="a0261-274">To tune a remote database or a named instance for a specific duration</span></span>  
  
1.  <span data-ttu-id="a0261-275">Determine os recursos de banco de dados (índices, exibições indexadas, particionamento) que o Orientador de Otimização do Mecanismo de Banco de Dados deve considerar para adição, remoção ou retenção durante a análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-275">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="a0261-276">Crie uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-276">Create a workload.</span></span> <span data-ttu-id="a0261-277">Para obter mais informações, consulte [Criar uma carga de trabalho](#Create) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-277">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="a0261-278">Em um prompt de comando, digite o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a0261-278">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -S ServerName\Instance -D DatabaseName -it WorkloadTableName   
    -U LoginID -P Password -s SessionName -A TuningTimeInMinutes  
    ```  
  
     <span data-ttu-id="a0261-279">em que `-S` especifica uma instância e um nome de servidor remoto (ou uma instância nomeada no servidor local), e `-D` especifica o nome do banco de dados que você deseja ajustar.</span><span class="sxs-lookup"><span data-stu-id="a0261-279">where `-S` specifies a remote server name and instance (or a named instance on the local server) and `-D` specifies the name of the database you want to tune.</span></span> <span data-ttu-id="a0261-280">A opção `-it` especifica o nome da tabela de carga de trabalho, `-U` e `-P` especificam a ID e a senha de logon para o banco de dados remoto, `-s` especifica o nome da sessão de ajuste e `-A` especifica a duração da sessão de ajuste em minutos.</span><span class="sxs-lookup"><span data-stu-id="a0261-280">The `-it` option specifies the name of the workload table, `-U` and `-P` specify the login ID and password to the remote database, `-s` specifies the tuning session name, and `-A` specifies the tuning session duration in minutes.</span></span> <span data-ttu-id="a0261-281">Por padrão, o utilitário **dta** usa uma duração de ajuste de 8 horas.</span><span class="sxs-lookup"><span data-stu-id="a0261-281">By default, the **dta** utility uses an 8-hour tuning duration.</span></span> <span data-ttu-id="a0261-282">Se quiser que o Orientador de Otimização do Mecanismo de Banco de Dados ajuste uma carga de trabalho por tempo ilimitado, especifique **0** (zero) na opção `-A` .</span><span class="sxs-lookup"><span data-stu-id="a0261-282">If you would like Database Engine Tuning Advisor to tune a workload for an unlimited amount of time, specify **0** (zero) with the `-A` option.</span></span>  
  
##### <a name="to-tune-a-database-using-an-xml-input-file"></a><span data-ttu-id="a0261-283">Para ajustar um banco de dados que usa um arquivo de entrada XML</span><span class="sxs-lookup"><span data-stu-id="a0261-283">To tune a database using an XML input file</span></span>  
  
1.  <span data-ttu-id="a0261-284">Determine os recursos de banco de dados (índices, exibições indexadas, particionamento) que o Orientador de Otimização do Mecanismo de Banco de Dados deve considerar para adição, remoção ou retenção durante a análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-284">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="a0261-285">Crie uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-285">Create a workload.</span></span> <span data-ttu-id="a0261-286">Para obter mais informações, consulte [Criar uma carga de trabalho](#Create) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-286">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="a0261-287">Crie um arquivo de entrada XML.</span><span class="sxs-lookup"><span data-stu-id="a0261-287">Create an XML input file.</span></span> <span data-ttu-id="a0261-288">Para obter mais informações, consulte [Criar arquivos de entrada XML](#XMLInput) , posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-288">For more information, see [Create XML Input Files](#XMLInput) later in this topic.</span></span>  
  
4.  <span data-ttu-id="a0261-289">Em um prompt de comando, digite o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a0261-289">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -S ServerName\Instance -s SessionName -ix PathToXMLInputFile  
    ```  
  
     <span data-ttu-id="a0261-290">em que `-E` especifica uma conexão confiável, `-S` especifica uma instância e servidor remoto, ou uma instância nomeada no servidor local, `-s` especifica o nome da sessão de ajuste e `-ix` especifica o arquivo de entrada XML a ser usado pela sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-290">where `-E` specifies a trusted connection, `-S` specifies a remote server and instance, or a named instance on the local server, `-s` specifies a tuning session name, and `-ix` specifies the XML input file to use for the tuning session.</span></span>  
  
5.  <span data-ttu-id="a0261-291">Depois que o utilitário terminar de ajustar a carga de trabalho, você pode exibir os resultados das sessões de ajuste com a GUI do Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-291">After the utility finishes tuning the workload, you can view the results of tuning sessions with the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="a0261-292">Como alternativa, também é possível especificar que as recomendações de ajuste sejam gravadas em um arquivo XML na opção **-ox** .</span><span class="sxs-lookup"><span data-stu-id="a0261-292">As an alternative, you can also specify that the tuning recommendations be written to an XML file with the **-ox** option.</span></span> <span data-ttu-id="a0261-293">Para obter mais informações, consulte [dta Utility](../../tools/dta/dta-utility.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-293">For more information, see [dta Utility](../../tools/dta/dta-utility.md).</span></span>  
  
##  <a name="create-an-xml-input-file"></a><a name="XMLInput"></a> <span data-ttu-id="a0261-294">Criar um arquivo de entrada XML</span><span class="sxs-lookup"><span data-stu-id="a0261-294">Create an XML Input File</span></span>  
 <span data-ttu-id="a0261-295">Se você for um desenvolvedor de XML experiente, poderá criar arquivos formatados em XML que podem ser usados pelo Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] para ajustar cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-295">If you are an experienced XML developer, you can create XML-formatted files that [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor can use to tune workloads.</span></span> <span data-ttu-id="a0261-296">Para criar estes arquivos XML, use suas ferramentas de XML favoritas para editar um arquivo de exemplo ou gerar uma instância do esquema XML do Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a0261-296">To create these XML files, use your favorite XML tools to edit a sample file or to generate an instance from the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema.</span></span>  
  
 <span data-ttu-id="a0261-297">O esquema XML do Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] está disponível na instalação do [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] na seguinte localização:</span><span class="sxs-lookup"><span data-stu-id="a0261-297">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema is available in your [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation in the following location:</span></span>  
  
 <span data-ttu-id="a0261-298">C:\Arquivos de Programas\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd</span><span class="sxs-lookup"><span data-stu-id="a0261-298">C:\Program Files\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd</span></span>  
  
 <span data-ttu-id="a0261-299">O esquema XML do Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] também está disponível online neste [site da Microsoft](https://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="a0261-299">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema is also available online at this [Microsoft Web site](https://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).</span></span>  
  
 <span data-ttu-id="a0261-300">Esse URL abre uma página em que estão disponíveis vários esquemas XML do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a0261-300">This URL takes you to a page where many [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML schemas are available.</span></span> <span data-ttu-id="a0261-301">Role a página para baixo até atingir a linha do Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a0261-301">Scroll down the page until you reach the row for [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span>  
  
#### <a name="to-create-an-xml-input-file-to-tune-workloads"></a><span data-ttu-id="a0261-302">Para criar um arquivo de entrada XML para ajustar cargas de trabalho</span><span class="sxs-lookup"><span data-stu-id="a0261-302">To create an XML input file to tune workloads</span></span>  
  
1.  <span data-ttu-id="a0261-303">Crie uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-303">Create a workload.</span></span> <span data-ttu-id="a0261-304">Você pode usar um arquivo ou tabela de rastreamento usando o modelo de ajuste no [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]ou criar um script [!INCLUDE[tsql](../../includes/tsql-md.md)] que reproduza uma carga de trabalho representativa para o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-304">You can use a trace file or table by using the tuning template in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], or create a [!INCLUDE[tsql](../../includes/tsql-md.md)] script that reproduces a representative workload for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a0261-305">Para obter mais informações, consulte [Criar uma carga de trabalho](#Create) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-305">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
2.  <span data-ttu-id="a0261-306">Crie um arquivo de entrada XML por meio de um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="a0261-306">Create an XML input file by one of the following methods:</span></span>  
  
    -   <span data-ttu-id="a0261-307">Copie e cole uma das [Amostras de arquivos de entrada XML &#40;DTA&#41;](../../tools/dta/xml-input-file-samples-dta.md) em seu editor XML favorito.</span><span class="sxs-lookup"><span data-stu-id="a0261-307">Copy and paste one of the [XML Input File Samples &#40;DTA&#41;](../../tools/dta/xml-input-file-samples-dta.md) into your favorite XML editor.</span></span> <span data-ttu-id="a0261-308">Altere os valores para especificar os argumentos corretos para sua instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e salve o arquivo XML.</span><span class="sxs-lookup"><span data-stu-id="a0261-308">Change the values to specify the appropriate arguments for your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation, and save the XML file.</span></span>  
  
    -   <span data-ttu-id="a0261-309">Usando sua ferramenta XML favorita, gere uma instância a partir do esquema XML do Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a0261-309">Using your favorite XML tool, generate an instance from the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema.</span></span>  
  
3.  <span data-ttu-id="a0261-310">Depois de criar o arquivo de entrada XML, use-o como entrada para o utilitário de linha de comando **dta** para ajustar a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-310">After creating the XML input file, use it as input to the **dta** command-line utility to tune the workload.</span></span> <span data-ttu-id="a0261-311">Para obter informações sobre como usar arquivos de entrada de XML com este utilitário, consulte a seção [Usar o utilitário dta](#dta) anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="a0261-311">For information about using XML input files with this utility, see the section [Use the dta Utililty](#dta) earlier in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0261-312">Se quiser usar uma carga de trabalho embutida, que é uma carga de trabalho especificada diretamente no arquivo de entrada XML, use a [Amostra do arquivo de entrada XML com carga de trabalho embutida &#40;DTA&#41;](../../tools/dta/xml-input-file-sample-with-inline-workload-dta.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-312">If you want to use an inline workload, which is a workload that is specified directly in the XML input file, use the sample [XML Input File Sample with Inline Workload &#40;DTA&#41;](../../tools/dta/xml-input-file-sample-with-inline-workload-dta.md).</span></span>  
  
##  <a name="user-interface-descriptions"></a><a name="UI"></a> <span data-ttu-id="a0261-313">Descrições da interface do usuário</span><span class="sxs-lookup"><span data-stu-id="a0261-313">User Interface Descriptions</span></span>  
  
### <a name="tools-menuoptions-page"></a><span data-ttu-id="a0261-314">Página de Menu/Opções de Ferramentas</span><span class="sxs-lookup"><span data-stu-id="a0261-314">Tools Menu/Options Page</span></span>  
 <span data-ttu-id="a0261-315">Use essa caixa de diálogo para especificar parâmetros de configuração gerais para o Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-315">Use this dialog box to specify general configuration parameters for the Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="a0261-316">**Na inicialização**</span><span class="sxs-lookup"><span data-stu-id="a0261-316">**On startup**</span></span>  
 <span data-ttu-id="a0261-317">Especifica o que Orientador de Otimização do Mecanismo de Banco de Dados deve fazer ao ser iniciado: abrir sem uma conexão de banco de dados, exibir uma caixa de diálogo **Nova Conexão** , exibir uma sessão nova ou carregar a última sessão carregada.</span><span class="sxs-lookup"><span data-stu-id="a0261-317">Specify what Database Engine Tuning Advisor should do when it is started: open without a database connection, show a **New Connection** dialog box, show a new session, or load the last loaded session.</span></span>  
  
 <span data-ttu-id="a0261-318">**Alterar fonte**</span><span class="sxs-lookup"><span data-stu-id="a0261-318">**Change font**</span></span>  
 <span data-ttu-id="a0261-319">Especifica a fonte de monitor usada pelas tabelas do Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-319">Specify the display font used by Database Engine Tuning Advisor tables.</span></span>  
  
 <span data-ttu-id="a0261-320">**Número de itens em listas usadas mais recentemente**</span><span class="sxs-lookup"><span data-stu-id="a0261-320">**Number of items in most recently used lists**</span></span>  
 <span data-ttu-id="a0261-321">Especifica o número de sessões ou arquivos a serem exibidos em **Sessões Recentes** ou **Arquivos Recentes** no menu **Arquivo** .</span><span class="sxs-lookup"><span data-stu-id="a0261-321">Specify the number of sessions or files to display under **Recent Sessions** or **Recent Files** in the **File** menu.</span></span>  
  
 <span data-ttu-id="a0261-322">**Lembrar minhas últimas opções de ajuste**</span><span class="sxs-lookup"><span data-stu-id="a0261-322">**Remember my last tuning options**</span></span>  
 <span data-ttu-id="a0261-323">Retém opções de ajuste entre sessões.</span><span class="sxs-lookup"><span data-stu-id="a0261-323">Retain tuning options between sessions.</span></span> <span data-ttu-id="a0261-324">Selecionadas por padrão.</span><span class="sxs-lookup"><span data-stu-id="a0261-324">Selected by default.</span></span> <span data-ttu-id="a0261-325">Desmarque essa caixa de seleção para iniciar sempre com os padrões do Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-325">Clear this check box to always start with the Database Engine Tuning Advisor defaults.</span></span>  
  
 <span data-ttu-id="a0261-326">**Perguntar antes de excluir sessões permanentemente**</span><span class="sxs-lookup"><span data-stu-id="a0261-326">**Ask before permanently deleting sessions**</span></span>  
 <span data-ttu-id="a0261-327">Exibe uma caixa de diálogo de confirmação antes de excluir sessões.</span><span class="sxs-lookup"><span data-stu-id="a0261-327">Display a confirmation dialog box before deleting sessions.</span></span>  
  
 <span data-ttu-id="a0261-328">**Perguntar antes de parar a análise da sessão**</span><span class="sxs-lookup"><span data-stu-id="a0261-328">**Ask before stopping session analysis**</span></span>  
 <span data-ttu-id="a0261-329">Exibe uma caixa de diálogo de confirmação antes de parar a análise de uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-329">Display a confirmation dialog box before stopping analysis of a workload.</span></span>  
  
#### <a name="general-tab-options"></a><span data-ttu-id="a0261-330">Opções da guia Geral</span><span class="sxs-lookup"><span data-stu-id="a0261-330">General Tab Options</span></span>  
 <span data-ttu-id="a0261-331">Você deve configurar os campos na guia **Geral** antes de iniciar uma sessão de otimização.</span><span class="sxs-lookup"><span data-stu-id="a0261-331">You must configure the fields in the **General** tab before starting a tuning session.</span></span> <span data-ttu-id="a0261-332">Você não precisa modificar as configurações da guia **Opções de Ajuste** antes de iniciar uma sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-332">You do not have to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
 <span data-ttu-id="a0261-333">**Nome da sessão**</span><span class="sxs-lookup"><span data-stu-id="a0261-333">**Session name**</span></span>  
 <span data-ttu-id="a0261-334">Especifique um nome para a sessão.</span><span class="sxs-lookup"><span data-stu-id="a0261-334">Specify a name for the session.</span></span> <span data-ttu-id="a0261-335">O nome de sessão associa um nome a uma sessão de otimização.</span><span class="sxs-lookup"><span data-stu-id="a0261-335">The session name associates a name with a tuning session.</span></span> <span data-ttu-id="a0261-336">Você pode consultar esse nome para revisar a sessão de otimização posteriormente.</span><span class="sxs-lookup"><span data-stu-id="a0261-336">You can refer to this name to review the tuning session later.</span></span>  
  
 <span data-ttu-id="a0261-337">**Arquivo**</span><span class="sxs-lookup"><span data-stu-id="a0261-337">**File**</span></span>  
 <span data-ttu-id="a0261-338">Especifique um script .sql ou arquivo de rastreamento para uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-338">Specify a .sql script or trace file for a workload.</span></span> <span data-ttu-id="a0261-339">Especifique o caminho e o nome de arquivo na caixa de texto associada.</span><span class="sxs-lookup"><span data-stu-id="a0261-339">Specify the path and filename in the associated text box.</span></span> <span data-ttu-id="a0261-340">O Orientador de Otimização do Mecanismo de Banco de Dados pressupõe que o arquivo de rastreamento de carga de trabalho seja um arquivo de substituição.</span><span class="sxs-lookup"><span data-stu-id="a0261-340">Database Engine Tuning Advisor assumes that the workload trace file is a rollover file.</span></span> <span data-ttu-id="a0261-341">Para obter mais informações sobre arquivos de substituição, consulte [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="a0261-341">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
 <span data-ttu-id="a0261-342">**Table**</span><span class="sxs-lookup"><span data-stu-id="a0261-342">**Table**</span></span>  
 <span data-ttu-id="a0261-343">Especifique uma tabela de rastreamento para uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-343">Specify a trace table for a workload.</span></span> <span data-ttu-id="a0261-344">Especifique o nome totalmente qualificado da tabela de rastreamento na caixa de texto associada, como a seguir:</span><span class="sxs-lookup"><span data-stu-id="a0261-344">Specify the fully qualified name of the trace table in the associated text box as follows:</span></span>  
  
```  
database_name.owner_name.table_name  
```  
  
-   <span data-ttu-id="a0261-345">Verifique se o rastreamento terminou, antes de usar uma tabela de rastreamento como uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-345">Make sure that tracing has stopped before using a trace table as a workload.</span></span>  
  
-   <span data-ttu-id="a0261-346">A tabela de rastreamento deve existir no mesmo servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está otimizando.</span><span class="sxs-lookup"><span data-stu-id="a0261-346">The trace table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="a0261-347">Se você criar a tabela de rastreamento em um servidor diferente, mova-a para o servidor em que o Orientador de Otimização do Mecanismo de Banco de Dados está fazendo o ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-347">If you create the trace table on a different server, then move it to the server that Database Engine Tuning Advisor is tuning.</span></span>  
  
 <span data-ttu-id="a0261-348">**Cache de Planos**</span><span class="sxs-lookup"><span data-stu-id="a0261-348">**Plan Cache**</span></span>  
 <span data-ttu-id="a0261-349">Especifique o cache de planos como uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-349">Specify the plan cache as a workload.</span></span> <span data-ttu-id="a0261-350">Fazendo isso, você poderá evitar a criação de uma carga de trabalho manualmente.</span><span class="sxs-lookup"><span data-stu-id="a0261-350">By doing this, you can avoid having to manually create a workload.</span></span> <span data-ttu-id="a0261-351">O Orientador de Otimização do Mecanismo de Banco de Dados seleciona os primeiros 1.000 eventos a serem usados para análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-351">Database Engine Tuning Advisor selects the top 1,000 events to use for analysis.</span></span>  
  
 <span data-ttu-id="a0261-352">**Xml**</span><span class="sxs-lookup"><span data-stu-id="a0261-352">**Xml**</span></span>  
 <span data-ttu-id="a0261-353">Só será exibido se você importar uma consulta de carga de trabalho do [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-353">This does not appear unless you import a workload query from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="a0261-354">Para importar uma consulta de carga de trabalho do [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="a0261-354">To import a workload query from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]:</span></span>  
  
1.  <span data-ttu-id="a0261-355">Digite uma consulta no Editor de Consultas e realce-a.</span><span class="sxs-lookup"><span data-stu-id="a0261-355">Type a query into Query Editor and highlight it.</span></span>  
  
2.  <span data-ttu-id="a0261-356">Clique com o botão direito do mouse na consulta realçada e clique em **Analisar Consulta no Orientador de Otimização do Mecanismo de Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-356">Right-click the highlighted query and click **Analyze Query in Database Engine Tuning Advisor**.</span></span>  
  
 <span data-ttu-id="a0261-357">**Procurar uma carga de trabalho [arquivo ou tabela]**</span><span class="sxs-lookup"><span data-stu-id="a0261-357">**Browse for a workload [file or table]**</span></span>  
 <span data-ttu-id="a0261-358">Quando **Arquivo** ou **Tabela** for selecionado como fonte de carga de trabalho, use esse botão Procurar para selecionar o destino.</span><span class="sxs-lookup"><span data-stu-id="a0261-358">When **File** or **Table** is selected as the workload source, use this browse button to select the target.</span></span>  
  
 <span data-ttu-id="a0261-359">**Visualizar a carga de trabalho XML**</span><span class="sxs-lookup"><span data-stu-id="a0261-359">**Preview the XML workload**</span></span>  
 <span data-ttu-id="a0261-360">Exiba uma carga de trabalho formatada em XML importada do [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0261-360">View an XML-formatted workload that has been imported from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="a0261-361">**Banco de dados para análise de carga de trabalho**</span><span class="sxs-lookup"><span data-stu-id="a0261-361">**Database for workload analysis**</span></span>  
 <span data-ttu-id="a0261-362">Especifique o primeiro banco de dados ao qual se conecta o Orientador de Otimização do Mecanismo de Banco de Dados quando ajusta uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-362">Specify the first database to which Database Engine Tuning Advisor connects when tuning a workload.</span></span> <span data-ttu-id="a0261-363">Depois que a otimização começa, o Orientador de Otimização do Mecanismo de Banco de Dados se conecta aos bancos de dados especificados pelas instruções `USE DATABASE` contidas na carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-363">After tuning begins, Database Engine Tuning Advisor connects to the databases specified by the `USE DATABASE` statements contained in the workload.</span></span>  
  
 <span data-ttu-id="a0261-364">**Selecionar bancos de dados e tabelas a otimizar**</span><span class="sxs-lookup"><span data-stu-id="a0261-364">**Select databases and tables to tune**</span></span>  
 <span data-ttu-id="a0261-365">Especifique os bancos de dados e tabelas a serem otimizados.</span><span class="sxs-lookup"><span data-stu-id="a0261-365">Specify the databases and tables to be tuned.</span></span> <span data-ttu-id="a0261-366">Para especificar todos os bancos de dados, marque a caixa de seleção no cabeçalho da coluna **Nome** .</span><span class="sxs-lookup"><span data-stu-id="a0261-366">To specify all of the databases, select the check box in the **Name** column heading.</span></span> <span data-ttu-id="a0261-367">Para especificar alguns bancos de dados, marque a caixa de seleção ao lado do nome do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-367">To specify certain databases, select the check box next to the database name.</span></span> <span data-ttu-id="a0261-368">Por padrão, todas as tabelas dos bancos de dados selecionados são automaticamente incluídas na sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-368">By default, all of the tables for selected databases are automatically included in the tuning session.</span></span> <span data-ttu-id="a0261-369">Para excluir tabelas, clique na seta na coluna **Tabelas Selecionadas** e desmarque as caixas de seleção ao lado das tabelas que não desejar ajustar.</span><span class="sxs-lookup"><span data-stu-id="a0261-369">To exclude tables, click the arrow in the **Selected Tables** column, and then clear the check boxes next to the tables that you do not want to tune.</span></span>  
  
 <span data-ttu-id="a0261-370">Seta para baixo das**Tabelas Selecionadas**</span><span class="sxs-lookup"><span data-stu-id="a0261-370">**Selected Tables** down arrow</span></span>  
 <span data-ttu-id="a0261-371">Expanda a lista de tabelas para permitir a seleção de tabelas individuais para ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-371">Expand the tables list to allow selecting individual tables for tuning.</span></span>  
  
 <span data-ttu-id="a0261-372">**Salvar log de ajuste**</span><span class="sxs-lookup"><span data-stu-id="a0261-372">**Save tuning log**</span></span>  
 <span data-ttu-id="a0261-373">Crie um log e registre erros durante a sessão.</span><span class="sxs-lookup"><span data-stu-id="a0261-373">Create a log and record errors during the session.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0261-374">O Orientador de Otimização do Mecanismo de Banco de Dados não atualiza automaticamente as informações das linhas das tabelas exibidas na guia **Geral** . Em vez disso, ele se baseia nos metadados do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-374">Database Engine Tuning Advisor does not automatically update the rows information for the tables displayed on the **General** tab. Instead it relies upon the metadata in the database.</span></span> <span data-ttu-id="a0261-375">Se você suspeitar que as informações das linhas estão desatualizadas, execute o comando DBCC UPDATEUSAGE para os objetos relevantes.</span><span class="sxs-lookup"><span data-stu-id="a0261-375">If you suspect that the rows information is outdated, run the DBCC UPDATEUSAGE command for the relevant objects.</span></span>  
  
##### <a name="tuning-tab-options"></a><span data-ttu-id="a0261-376">Opções da guia Ajuste</span><span class="sxs-lookup"><span data-stu-id="a0261-376">Tuning Tab Options</span></span>  
 <span data-ttu-id="a0261-377">Use a guia **Opções de Ajuste** para modificar configurações padrão de opções de ajuste gerais.</span><span class="sxs-lookup"><span data-stu-id="a0261-377">Use the **Tuning Options** tab to modify default settings of general tuning options.</span></span> <span data-ttu-id="a0261-378">Você não precisa modificar as configurações da guia **Opções de Ajuste** antes de iniciar uma sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-378">You do not have to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
 <span data-ttu-id="a0261-379">**Limitar tempo de ajuste**</span><span class="sxs-lookup"><span data-stu-id="a0261-379">**Limit tuning time**</span></span>  
 <span data-ttu-id="a0261-380">Limita o tempo para a sessão de ajuste atual.</span><span class="sxs-lookup"><span data-stu-id="a0261-380">Limits the time for the current tuning session.</span></span> <span data-ttu-id="a0261-381">Fornecer mais tempo para o ajuste melhora a qualidade das recomendações.</span><span class="sxs-lookup"><span data-stu-id="a0261-381">Providing more time for turning improves the quality of the recommendations.</span></span> <span data-ttu-id="a0261-382">Para garantir as melhores recomendações, não selecione essa opção.</span><span class="sxs-lookup"><span data-stu-id="a0261-382">To ensure the best recommendations, do not select this option.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="a0261-383">consome recursos do sistema durante a análise.</span><span class="sxs-lookup"><span data-stu-id="a0261-383">Tuning Advisor consumes system resources during analysis.</span></span> <span data-ttu-id="a0261-384">Use **Limitar tempo de ajuste** para parar o ajuste antes de períodos de carga de trabalho pesada antecipada no servidor que está sendo ajustado.</span><span class="sxs-lookup"><span data-stu-id="a0261-384">Use **Limit tuning time** to stop tuning before periods of anticipated heavy workload on the server being tuned.</span></span>  
  
 <span data-ttu-id="a0261-385">**Opções Avançadas**</span><span class="sxs-lookup"><span data-stu-id="a0261-385">**Advanced Options**</span></span>  
 <span data-ttu-id="a0261-386">Use a caixa de diálogo **Opções de Ajuste Avançado** para configurar o espaço de máximo, o máximo de colunas de chave e recomendações de índice online.</span><span class="sxs-lookup"><span data-stu-id="a0261-386">Use the **Advanced Tuning Options** dialog box to configure the maximum space, maximum key columns, and online index recommendations.</span></span>  
  
 <span data-ttu-id="a0261-387">**Definir espaço máximo para recomendações (MB)**</span><span class="sxs-lookup"><span data-stu-id="a0261-387">**Define max. space for recommendations (MB)**</span></span>  
 <span data-ttu-id="a0261-388">Digite o valor do espaço máximo a ser usado pelas estruturas de design físico recomendadas pelo Orientador de Otimização do Mecanismo de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-388">Type the maximum amount of space to be used by physical design structures recommended by Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="a0261-389">Se nenhum valor for digitado, o Orientador de Otimização do Mecanismo de Banco de Dados assumirá o menor dos seguintes limites de espaço:</span><span class="sxs-lookup"><span data-stu-id="a0261-389">If no value is entered here, Database Engine Tuning Advisor assumes the smaller of the following space limits:</span></span>  
  
-   <span data-ttu-id="a0261-390">Três vezes o tamanho de dados brutos atuais, o que inclui o tamanho total de heaps e índices cluster em tabelas no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-390">Three times the current raw data size, which includes the total size of heaps and clustered indexes on tables in the database.</span></span>  
  
-   <span data-ttu-id="a0261-391">Os espaços livres em todas as unidades de disco anexas mais o tamanho dos dados brutos.</span><span class="sxs-lookup"><span data-stu-id="a0261-391">The free space on all attached disk drives plus the raw data size.</span></span>  
  
 <span data-ttu-id="a0261-392">**Incluir eventos de cache de planos de todos os bancos de dados**</span><span class="sxs-lookup"><span data-stu-id="a0261-392">**Include plan cache events from all databases**</span></span>  
 <span data-ttu-id="a0261-393">Especifique que são analisados eventos de cache de plano de todos os bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="a0261-393">Specify that plan cache events from all databases are analyzed.</span></span>  
  
 <span data-ttu-id="a0261-394">**Máximo de colunas por índice**</span><span class="sxs-lookup"><span data-stu-id="a0261-394">**Max. columns per index**</span></span>  
 <span data-ttu-id="a0261-395">Especifica o número máximo de colunas para incluir em qualquer índice.</span><span class="sxs-lookup"><span data-stu-id="a0261-395">Specify the maximum number of columns to include in any index.</span></span> <span data-ttu-id="a0261-396">O padrão é 1023.</span><span class="sxs-lookup"><span data-stu-id="a0261-396">The default is 1023.</span></span>  
  
 <span data-ttu-id="a0261-397">**Todas as recomendações são offline**</span><span class="sxs-lookup"><span data-stu-id="a0261-397">**All recommendations are offline**</span></span>  
 <span data-ttu-id="a0261-398">Gera as melhores recomendações possíveis, mas não recomenda que qualquer estrutura de design físico seja criada online.</span><span class="sxs-lookup"><span data-stu-id="a0261-398">Generate the best recommendations possible, but do not recommend that any physical design structures be created online.</span></span>  
  
 <span data-ttu-id="a0261-399">**Gerar recomendações online quando possível**</span><span class="sxs-lookup"><span data-stu-id="a0261-399">**Generate online recommendations where possible**</span></span>  
 <span data-ttu-id="a0261-400">Ao criar instruções [!INCLUDE[tsql](../../includes/tsql-md.md)] para implementar as recomendações, escolha métodos que possam ser implementados com o servidor online, mesmo se um método offline mais rápido estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="a0261-400">When creating [!INCLUDE[tsql](../../includes/tsql-md.md)] statements to implement the recommendations, choose methods that can be implemented with the server online, even if a faster offline method is available.</span></span>  
  
 <span data-ttu-id="a0261-401">**Gerar apenas recomendações online**</span><span class="sxs-lookup"><span data-stu-id="a0261-401">**Generate only online recommendations**</span></span>  
 <span data-ttu-id="a0261-402">Só faça recomendações que permitam que o servidor permaneça online.</span><span class="sxs-lookup"><span data-stu-id="a0261-402">Only make recommendations that allow the server to stay online.</span></span>  
  
 <span data-ttu-id="a0261-403">**Pare em**</span><span class="sxs-lookup"><span data-stu-id="a0261-403">**Stop at**</span></span>  
 <span data-ttu-id="a0261-404">Forneça a data e hora em que o Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] deve parar.</span><span class="sxs-lookup"><span data-stu-id="a0261-404">Provide the date and time when [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor should stop.</span></span>  
  
 <span data-ttu-id="a0261-405">**Índices e exibições indexadas**</span><span class="sxs-lookup"><span data-stu-id="a0261-405">**Indexes and indexed views**</span></span>  
 <span data-ttu-id="a0261-406">Marque essa caixa para incluir recomendações para somar índices clusterizados, índices não clusterizados e exibições indexadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-406">Check this box to include recommendations for adding clustered indexes, nonclustered indexes, and indexed views.</span></span>  
  
 <span data-ttu-id="a0261-407">**Exibições indexadas**</span><span class="sxs-lookup"><span data-stu-id="a0261-407">**Indexed views**</span></span>  
 <span data-ttu-id="a0261-408">Inclua apenas recomendações para adicionar exibições indexadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-408">Only include recommendations for adding indexed views.</span></span> <span data-ttu-id="a0261-409">Índices clusterizados e não clusterizados  não serão recomendados.</span><span class="sxs-lookup"><span data-stu-id="a0261-409">Clustered and nonclustered indexes will not be recommended.</span></span>  
  
 <span data-ttu-id="a0261-410">**Incluir índices filtrados**</span><span class="sxs-lookup"><span data-stu-id="a0261-410">**Include filtered indexes**</span></span>  
 <span data-ttu-id="a0261-411">Inclua recomendações para adicionar índices filtrados.</span><span class="sxs-lookup"><span data-stu-id="a0261-411">Include recommendations for adding filtered indexes.</span></span> <span data-ttu-id="a0261-412">Essa opção estará disponível se você selecionar uma destas estruturas de design físico: **índices e exibições indexadas**, **índices** ou **índices não clusterizados**.</span><span class="sxs-lookup"><span data-stu-id="a0261-412">This option is available if you select one of these physical design structures: **Indexes and indexed views**, **Indexes**, or **Nonclustered indexes**.</span></span>  
  
 <span data-ttu-id="a0261-413">**Índices**</span><span class="sxs-lookup"><span data-stu-id="a0261-413">**Indexes**</span></span>  
 <span data-ttu-id="a0261-414">Inclua apenas recomendações para adicionar índices clusterizados e não clusterizados.</span><span class="sxs-lookup"><span data-stu-id="a0261-414">Only include recommendations for adding clustered and nonclustered indexes.</span></span> <span data-ttu-id="a0261-415">Não serão recomendadas exibições indexadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-415">Indexed views will not be recommended.</span></span>  
  
 <span data-ttu-id="a0261-416">**Índices não clusterizados**</span><span class="sxs-lookup"><span data-stu-id="a0261-416">**Nonclustered indexes**</span></span>  
 <span data-ttu-id="a0261-417">Inclua recomendações só para índices não clusterizados.</span><span class="sxs-lookup"><span data-stu-id="a0261-417">Include recommendations for only nonclustered indexes.</span></span> <span data-ttu-id="a0261-418">Índices clusterizados e exibições indexadas não serão recomendados.</span><span class="sxs-lookup"><span data-stu-id="a0261-418">Clustered indexes and indexed views will not be recommended.</span></span>  
  
 <span data-ttu-id="a0261-419">**Avaliar a utilização apenas dos PDS existentes**</span><span class="sxs-lookup"><span data-stu-id="a0261-419">**Evaluate utilization of existing PDS only**</span></span>  
 <span data-ttu-id="a0261-420">Avalie a efetividade dos índices atuais mas não recomende índices adicionais nem exibições indexadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-420">Evaluate the effectiveness of the current indexes but do not recommend additional indexes or indexed views.</span></span>  
  
 <span data-ttu-id="a0261-421">**Nenhum particionamento**</span><span class="sxs-lookup"><span data-stu-id="a0261-421">**No partitioning**</span></span>  
 <span data-ttu-id="a0261-422">Não recomende particionamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-422">Do not recommend partitioning.</span></span>  
  
 <span data-ttu-id="a0261-423">**Particionamento completo**</span><span class="sxs-lookup"><span data-stu-id="a0261-423">**Full partitioning**</span></span>  
 <span data-ttu-id="a0261-424">Inclua recomendações para particionamento.</span><span class="sxs-lookup"><span data-stu-id="a0261-424">Include recommendations for partitioning.</span></span>  
  
 <span data-ttu-id="a0261-425">**Particionamento alinhado**</span><span class="sxs-lookup"><span data-stu-id="a0261-425">**Aligned partitioning**</span></span>  
 <span data-ttu-id="a0261-426">As novas partições recomendadas serão alinhadas para facilitar a manutenção das partições.</span><span class="sxs-lookup"><span data-stu-id="a0261-426">New recommended partitions will be aligned to make partitions easy to maintain.</span></span>  
  
 <span data-ttu-id="a0261-427">**Não manter nenhuma PDS existente**</span><span class="sxs-lookup"><span data-stu-id="a0261-427">**Do not keep any existing PDS**</span></span>  
 <span data-ttu-id="a0261-428">Recomende descartar índices, exibições e particionamentos existentes desnecessários.</span><span class="sxs-lookup"><span data-stu-id="a0261-428">Recommend dropping unnecessary existing indexes, views, and partitioning.</span></span> <span data-ttu-id="a0261-429">Se uma PDS (estrutura de design física) existente for útil para a carga de trabalho, o Orientador de Otimização do [!INCLUDE[ssDE](../../includes/ssde-md.md)] não recomendará o seu descarte.</span><span class="sxs-lookup"><span data-stu-id="a0261-429">If an existing physical design structure (PDS) is useful to the workload, [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor does not recommend dropping it.</span></span>  
  
 <span data-ttu-id="a0261-430">**Manter apenas índices**</span><span class="sxs-lookup"><span data-stu-id="a0261-430">**Keep indexes only**</span></span>  
 <span data-ttu-id="a0261-431">Mantenha todos os índices existentes mas recomende descartar exibições indexadas e particionamentos desnecessários.</span><span class="sxs-lookup"><span data-stu-id="a0261-431">Keep all existing indexes but recommend dropping unnecessary indexed views, and partitioning.</span></span>  
  
 <span data-ttu-id="a0261-432">**Manter todas as PDS existentes**</span><span class="sxs-lookup"><span data-stu-id="a0261-432">**Keep all existing PDS**</span></span>  
 <span data-ttu-id="a0261-433">Mantenha todos os índices, exibições indexadas e particionamentos existentes.</span><span class="sxs-lookup"><span data-stu-id="a0261-433">Keep all existing indexes, indexed views, and partitioning.</span></span>  
  
 <span data-ttu-id="a0261-434">**Manter apenas índices cluster**</span><span class="sxs-lookup"><span data-stu-id="a0261-434">**Keep clustered indexes only**</span></span>  
 <span data-ttu-id="a0261-435">Mantenha todos os índices clusterizados existentes mas recomende descartar exibições indexadas, partições e índices não clusterizados desnecessários.</span><span class="sxs-lookup"><span data-stu-id="a0261-435">Keep all existing clustered indexes but recommend dropping unnecessary indexed views, partitions, and nonclustered indexes.</span></span>  
  
 <span data-ttu-id="a0261-436">**Manter particionamento alinhado**</span><span class="sxs-lookup"><span data-stu-id="a0261-436">**Keep aligned partitioning**</span></span>  
 <span data-ttu-id="a0261-437">Mantenha estruturas de particionamento que estão atualmente alinhadas, mas recomende descartar exibições indexadas, índices e particionamento desalinhado desnecessários.</span><span class="sxs-lookup"><span data-stu-id="a0261-437">Keep partitioning structures that are currently aligned, but recommend dropping unnecessary indexed views, indexes, and non-aligned partitioning.</span></span> <span data-ttu-id="a0261-438">Todo particionamento adicional recomendado será alinhado com o esquema de particionamento atual.</span><span class="sxs-lookup"><span data-stu-id="a0261-438">Any additional partitioning recommended will align with the current partitioning scheme.</span></span>  
  
###### <a name="progress-tab-options"></a><span data-ttu-id="a0261-439">Opções da guia Progresso</span><span class="sxs-lookup"><span data-stu-id="a0261-439">Progress Tab Options</span></span>  
 <span data-ttu-id="a0261-440">A guia **Progresso** do Orientador de Otimização do Mecanismo de Banco de Dados aparece depois que o Orientador de Otimização do Mecanismo de Banco de Dados começar a analisar uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a0261-440">The **Progress** tab of Database Engine Tuning Advisor appears after Database Engine Tuning Advisor begins analyzing a workload.</span></span>  
  
 <span data-ttu-id="a0261-441">Se quiser parar a sessão de ajuste depois de iniciada, escolha uma das opções a seguir no menu **Ações** :</span><span class="sxs-lookup"><span data-stu-id="a0261-441">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
-   <span data-ttu-id="a0261-442">**Parar Análise (com Recomendações)** interrompe a sessão de ajuste e solicita se você quer que o Orientador de Otimização do Mecanismo de Banco de Dados gere recomendações com base na análise concluída até este ponto.</span><span class="sxs-lookup"><span data-stu-id="a0261-442">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
-   <span data-ttu-id="a0261-443">**Parar Análise** interrompe a sessão de ajuste sem gerar qualquer recomendação.</span><span class="sxs-lookup"><span data-stu-id="a0261-443">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
 <span data-ttu-id="a0261-444">**Progresso do Ajuste**</span><span class="sxs-lookup"><span data-stu-id="a0261-444">**Tuning Progress**</span></span>  
 <span data-ttu-id="a0261-445">Indica o status atual do progresso.</span><span class="sxs-lookup"><span data-stu-id="a0261-445">Indicates the current status of the progress.</span></span> <span data-ttu-id="a0261-446">Contém o número de ações executadas e o número de mensagens de erro, de sucesso e de advertência recebidas.</span><span class="sxs-lookup"><span data-stu-id="a0261-446">Contains the number of actions performed, and the number of error, success, and warning messages received.</span></span>  
  
 <span data-ttu-id="a0261-447">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="a0261-447">**Details**</span></span>  
 <span data-ttu-id="a0261-448">Contém um ícone que indica o status.</span><span class="sxs-lookup"><span data-stu-id="a0261-448">Contains an icon indicating status.</span></span>  
  
 <span data-ttu-id="a0261-449">**Ação**</span><span class="sxs-lookup"><span data-stu-id="a0261-449">**Action**</span></span>  
 <span data-ttu-id="a0261-450">Exibe as etapas que estão sendo executadas.</span><span class="sxs-lookup"><span data-stu-id="a0261-450">Displays the steps being performed.</span></span>  
  
 <span data-ttu-id="a0261-451">**Status**</span><span class="sxs-lookup"><span data-stu-id="a0261-451">**Status**</span></span>  
 <span data-ttu-id="a0261-452">Exibe o status da etapa de ação.</span><span class="sxs-lookup"><span data-stu-id="a0261-452">Displays the status of the action step.</span></span>  
  
 <span data-ttu-id="a0261-453">**Mensagem**</span><span class="sxs-lookup"><span data-stu-id="a0261-453">**Message**</span></span>  
 <span data-ttu-id="a0261-454">Contém mensagem retornada pelas etapas de ação.</span><span class="sxs-lookup"><span data-stu-id="a0261-454">Contains any messages returned by the action steps.</span></span>  
  
 <span data-ttu-id="a0261-455">**Log de Ajuste**</span><span class="sxs-lookup"><span data-stu-id="a0261-455">**Tuning Log**</span></span>  
 <span data-ttu-id="a0261-456">Contém informações relativas a esta sessão de ajuste.</span><span class="sxs-lookup"><span data-stu-id="a0261-456">Contains information regarding this tuning session.</span></span> <span data-ttu-id="a0261-457">Para imprimir esse log, clique com o botão direito do mouse no log e clique em **Imprimir**.</span><span class="sxs-lookup"><span data-stu-id="a0261-457">To print this log, right-click the log, and then click **Print**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a0261-458">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="a0261-458">See Also</span></span>  
 <span data-ttu-id="a0261-459">[Exibir e trabalhar com a saída do Orientador de Otimização do Mecanismo de Banco de Dados](database-engine-tuning-advisor.md) </span><span class="sxs-lookup"><span data-stu-id="a0261-459">[View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md) </span></span>  
 [<span data-ttu-id="a0261-460">Utilitário dta</span><span class="sxs-lookup"><span data-stu-id="a0261-460">dta Utility</span></span>](../../tools/dta/dta-utility.md)  
  
  
