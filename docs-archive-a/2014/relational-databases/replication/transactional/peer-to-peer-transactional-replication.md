---
title: Replicação transacional ponto a ponto | Microsoft Docs
ms.custom: ''
ms.date: 08/29/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- bidirectional replication
- transactional replication, bidirectional replication
- bidirectional transactional replication
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication
ms.assetid: 23e7e8c1-002f-4e69-8c99-d63e4100de64
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f61db9a8e7cecb107fd1b27fae966d133e043c8b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87574634"
---
# <a name="peer-to-peer-transactional-replication"></a><span data-ttu-id="1c950-102">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="1c950-102">Peer-to-Peer Transactional Replication</span></span>
  <span data-ttu-id="1c950-103">A replicação ponto a ponto fornece uma a solução, expandida e de alta disponibilidade, para manter cópias de dados em várias instâncias de servidor, também denominadas *nós*.</span><span class="sxs-lookup"><span data-stu-id="1c950-103">Peer-to-peer replication provides a scale-out and high-availability solution by maintaining copies of data across multiple server instances, also referred to as *nodes*.</span></span> <span data-ttu-id="1c950-104">Criada na base da replicação transacional, a replicação ponto a ponto se propaga de forma transacional, de acordo com as alterações em tempo real.</span><span class="sxs-lookup"><span data-stu-id="1c950-104">Built on the foundation of transactional replication, peer-to-peer replication propagates transactionally consistent changes in near real-time.</span></span> <span data-ttu-id="1c950-105">Ativa aplicativos que requerem operações expandidas de leitura para distribuir as leituras de clientes em vários nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-105">This enables applications that require scale-out of read operations to distribute the reads from clients across multiple nodes.</span></span> <span data-ttu-id="1c950-106">Como os dados são mantidos em todos os nós em tempo quase real, a replicação ponto a ponto fornece redundância de dados, o que amplia a disponibilidade de dados.</span><span class="sxs-lookup"><span data-stu-id="1c950-106">Because data is maintained across the nodes in near real-time, peer-to-peer replication provides data redundancy, which increases the availability of data.</span></span>  
  
 <span data-ttu-id="1c950-107">Considere um aplicativo da Web.</span><span class="sxs-lookup"><span data-stu-id="1c950-107">Consider a Web application.</span></span> <span data-ttu-id="1c950-108">Ele pode se beneficiar da replicação ponto a ponto dos seguintes modos:</span><span class="sxs-lookup"><span data-stu-id="1c950-108">This can benefit from peer-to-peer replication in the following ways:</span></span>  
  
-   <span data-ttu-id="1c950-109">As consultas de catálogo e outras leituras são disseminadas por vários nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-109">Catalog queries and other reads are spread across multiple nodes.</span></span> <span data-ttu-id="1c950-110">Isso permite que o desempenho permaneça consistente à medida que as leituras aumentam.</span><span class="sxs-lookup"><span data-stu-id="1c950-110">This enables performance to remain consistent as reads increase.</span></span>  
  
-   <span data-ttu-id="1c950-111">Se um dos nós do sistema falhar, uma camada de aplicativo poderá redirecionar as gravações daquele nó para outro nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-111">If one of the nodes in the system fails, an application layer can redirect the writes for that node to another node.</span></span> <span data-ttu-id="1c950-112">Isso mantém a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="1c950-112">This maintains availability.</span></span>  
  
-   <span data-ttu-id="1c950-113">Se um nó exigir a manutenção ou o sistema inteiro necessitar de uma atualização, cada nó poderá ser posto offline e adicionado de volta ao sistema sem que a disponibilidade do aplicativo seja afetada.</span><span class="sxs-lookup"><span data-stu-id="1c950-113">If a node requires maintenance or the whole system requires an upgrade, each node can be taken offline and added back to the system without affecting the availability of the application.</span></span>  
  
 <span data-ttu-id="1c950-114">Embora a replicação ponto a ponto ative a expansão das operações de leitura, o desempenho de gravação para a topologia é igual à de um único nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-114">Although peer-to-peer replication enables scaling out of read operations, write performance for the topology is like that for a single node.</span></span> <span data-ttu-id="1c950-115">Isso ocorre porque, essencialmente, todas as inserções, atualizações e exclusões são propagadas para todos os nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-115">This is because ultimately all inserts, updates, and deletes are propagated to all nodes.</span></span> <span data-ttu-id="1c950-116">A replicação reconhece quando uma alteração foi aplicada a um determinado nó e impede que as alterações sejam cíclicas nos nós, mais de uma vez.</span><span class="sxs-lookup"><span data-stu-id="1c950-116">Replication recognizes when a change has been applied to a given node and prevents changes from cycling through the nodes more than one time.</span></span> <span data-ttu-id="1c950-117">É altamente recomendado que as operações de gravação de cada linha seja realizada em único nó, pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="1c950-117">We strongly recommend that write operations for each row be performed at only node, for the following reasons:</span></span>  
  
-   <span data-ttu-id="1c950-118">Se uma linha for modificada em mais de um nó, isso poderá causar um conflito ou mesmo uma atualização perdida quando a linha for propagada para outros nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-118">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
-   <span data-ttu-id="1c950-119">Há sempre alguma latência envolvida quando as alterações são replicadas.</span><span class="sxs-lookup"><span data-stu-id="1c950-119">There is always some latency involved when changes are replicated.</span></span> <span data-ttu-id="1c950-120">Com relação aos aplicativos que requerem que a última alteração seja vista de imediato, equilibrar a carga do aplicativo de maneira dinâmica pelos vários nós poderá se transformar em um problema.</span><span class="sxs-lookup"><span data-stu-id="1c950-120">For applications that require the latest change to be seen immediately, dynamically load balancing the application across multiple nodes can be problematic.</span></span>  
  
 <span data-ttu-id="1c950-121">A replicação ponto a ponto inclui a opção de ativar a detecção de conflito por uma topologia ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="1c950-121">Peer-to-peer replication includes the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="1c950-122">Essa opção ajuda a evitar os problemas causados por conflitos não detectados, inclusive o comportamento inconsistente do aplicativo e as atualizações perdidas.</span><span class="sxs-lookup"><span data-stu-id="1c950-122">This option helps prevent the issues that are caused from undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="1c950-123">Ao ativar essa opção, por padrão uma alteração de conflito é tratada como erro crítico que causa a falha do Distribution Agent.</span><span class="sxs-lookup"><span data-stu-id="1c950-123">By enabling this option, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="1c950-124">No evento de um conflito, a topologia é mantida em um estado inconsistente até que o conflito seja resolvido manualmente e os dados sejam tornados consistentes em toda a topologia.</span><span class="sxs-lookup"><span data-stu-id="1c950-124">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved manually and the data is made consistent across the topology.</span></span> <span data-ttu-id="1c950-125">Para obter mais informações, consulte [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span><span class="sxs-lookup"><span data-stu-id="1c950-125">For more information, see [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1c950-126">Para evitar inconsistência potencial de dados, certifique-se de evitar conflitos em uma topologia ponto a ponto, mesmo com a detecção de conflitos ativada.</span><span class="sxs-lookup"><span data-stu-id="1c950-126">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="1c950-127">Para assegurar que as operações de gravação de uma linha particular sejam realizadas em um único nó, os aplicativos que acessam e alteram dados devem realizar operações de partição, inserção, atualização e exclusão.</span><span class="sxs-lookup"><span data-stu-id="1c950-127">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="1c950-128">Esse particionamento assegurará que as modificações de uma determinada linha originária de um nó sejam sincronizadas com todos os outros nós da topologia antes que a linha seja modificada por um outro nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-128">This partitioning ensures that modifications to a given row originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="1c950-129">Se um aplicativo requerer detecção de conflito e recursos de resolução sofisticados, use a replicação de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="1c950-129">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="1c950-130">Para obter mais informações, consulte [Mesclar a replicação](../merge/merge-replication.md) e [Detectar e resolver conflitos na replicação de mesclagem](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="1c950-130">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="peer-to-peer-topologies"></a><span data-ttu-id="1c950-131">Topologias ponto a ponto</span><span class="sxs-lookup"><span data-stu-id="1c950-131">Peer-to-Peer Topologies</span></span>  
 <span data-ttu-id="1c950-132">Os cenários a seguir ilustram usos típicos para replicação ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="1c950-132">The following scenarios illustrate typical uses for peer-to-peer replication.</span></span>  
  
### <a name="topology-that-has-two-participating-databases"></a><span data-ttu-id="1c950-133">Topologia com participação de dois bancos de dados</span><span class="sxs-lookup"><span data-stu-id="1c950-133">Topology That Has Two Participating Databases</span></span>  
 <span data-ttu-id="1c950-134">![Replicação ponto a ponto, dois nós](../media/repl-multinode-01.gif "Replicação ponto a ponto, dois nós")</span><span class="sxs-lookup"><span data-stu-id="1c950-134">![Peer-to-peer replication, two nodes](../media/repl-multinode-01.gif "Peer-to-peer replication, two nodes")</span></span>  
  
 <span data-ttu-id="1c950-135">Ambas as ilustrações precedentes mostram dois bancos de dados participantes, com tráfego de usuário direcionado para os bancos de dados por meio do servidor de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="1c950-135">Both of the preceding illustrations show two participating databases, with user traffic directed to the databases through an application server.</span></span> <span data-ttu-id="1c950-136">Essa configuração pode ser usada para uma série de aplicativos, de sites a aplicativos de grupos de trabalho, e oferece as seguintes vantagens:</span><span class="sxs-lookup"><span data-stu-id="1c950-136">This configuration can be used for a variety of applications, from Web sites to workgroup applications, and provides the following benefits:</span></span>  
  
-   <span data-ttu-id="1c950-137">Desempenho melhorado de leitura, porque as leituras são difundidas em mais de dois servidores.</span><span class="sxs-lookup"><span data-stu-id="1c950-137">Improved read performance, because reads are spread out over two servers.</span></span>  
  
-   <span data-ttu-id="1c950-138">Disponibilidade superior, caso a manutenção seja necessária ou em caso de falha de um nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-138">Higher availability if maintenance is required or in case of failure at one node.</span></span>  
  
 <span data-ttu-id="1c950-139">Em ambas as ilustrações, a atividade de leitura é equilibrada por carga entre os bancos de dados participantes, mas as atualizações são controladas diferentemente:</span><span class="sxs-lookup"><span data-stu-id="1c950-139">In both illustrations, read activity is load-balanced between the participating databases, but updates are handled differently:</span></span>  
  
-   <span data-ttu-id="1c950-140">À esquerda, as atualizações são particionadas entre os dois servidores.</span><span class="sxs-lookup"><span data-stu-id="1c950-140">On the left, updates are partitioned between the two servers.</span></span> <span data-ttu-id="1c950-141">Se o banco de dados contiver um catálogo de produtos, você poderá, por exemplo, fazer com que um aplicativo personalizado atualize diretamente no nó **A** com relação aos nomes de produto começando de A a M, e que ele atualize diretamente no nó **B** com relação aos nomes de produtos começando de N a Z. As atualizações, em seguida, são replicadas no outro nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-141">If the database contained a product catalog, you could, for example, have a custom application direct updates to node **A** for product names that start with A through M, and direct updates to node **B** for product names that start with N through Z. Updates are then replicated to the other node.</span></span>  
  
-   <span data-ttu-id="1c950-142">À direita, todas as atualizações são direcionadas para o nó **B**. A partir daí, as atualizações são replicadas para o nó **A**. Se **B** estiver offline (por exemplo, para manutenção), o servidor de aplicativos poderá direcionar todas as atividades para **A**. Quando **B** ficar online outra vez, as atualizações poderão fluir para ele e o servidor de aplicativos poderá mover todas as atualizações novamente para **B** ou continuar direcionando-as para **A**.</span><span class="sxs-lookup"><span data-stu-id="1c950-142">On the right, all updates are directed to node **B**. From there, updates are replicated to node **A**. If **B** is offline (for example, for maintenance), the application server can direct all activity to **A**. When **B** is back online, updates can flow to it, and the application server can move all updates back to **B** or keep directing them to **A**.</span></span>  
  
 <span data-ttu-id="1c950-143">A replicação ponto a ponto pode oferecer suporte a ambas as abordagens, mas o exemplo de atualização central à direita é também usado com frequência na replicação transacional padrão.</span><span class="sxs-lookup"><span data-stu-id="1c950-143">Peer-to-peer replication can support either approach, but the central update example on the right is also often used with standard transactional replication.</span></span>  
  
### <a name="topologies-that-have-three-or-more-participating-databases"></a><span data-ttu-id="1c950-144">Topologias com três ou mais bancos de dados participantes</span><span class="sxs-lookup"><span data-stu-id="1c950-144">Topologies That Have Three or More Participating Databases</span></span>  
 <span data-ttu-id="1c950-145">![Replicação ponto a ponto para locais dispersos](../media/repl-multinode-02.gif "Replicação ponto a ponto para locais dispersos")</span><span class="sxs-lookup"><span data-stu-id="1c950-145">![Peer-to-peer replication to dispersed locations](../media/repl-multinode-02.gif "Peer-to-peer replication to dispersed locations")</span></span>  
  
 <span data-ttu-id="1c950-146">A ilustração anterior mostra três bancos de dados participantes que fornecem dados para uma organização de suporte a software mundial, e com escritórios em Los Angeles, Londres e Taipei.</span><span class="sxs-lookup"><span data-stu-id="1c950-146">The preceding illustration shows three participating databases that provide data for a worldwide software support organization, with offices in Los Angeles, London, and Taipei.</span></span> <span data-ttu-id="1c950-147">Os engenheiros de suporte de cada escritório recebem chamadas telefônicas e atualizam informações sobre cada uma das chamadas de cliente.</span><span class="sxs-lookup"><span data-stu-id="1c950-147">The support engineers at each office take customer calls and enter and update information about each customer call.</span></span> <span data-ttu-id="1c950-148">Os fusos horários dos três escritórios têm oito horas de diferença entre si, de modo a não haver sobreposições no dia de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1c950-148">The time zones for the three offices are eight hours apart, so there is no overlap in the workday.</span></span> <span data-ttu-id="1c950-149">O escritório de Taipei fecha, quando o escritório de Londres está apenas começando o expediente.</span><span class="sxs-lookup"><span data-stu-id="1c950-149">As the Taipei office closes, the London office is opening for the day.</span></span> <span data-ttu-id="1c950-150">Se uma chamada ainda está em andamento quando um escritório estiver fechando, a chamada será transferida para um representante no primeiro escritório que abrir.</span><span class="sxs-lookup"><span data-stu-id="1c950-150">If a call is still in progress as one office is closing, the call is transferred to a representative at the next office to open.</span></span>  
  
 <span data-ttu-id="1c950-151">Cada local tem um banco de dados e um servidor de aplicativo, que são usados por engenheiros de suporte à medida que eles digitam e atualizam informações sobre as chamadas de cliente.</span><span class="sxs-lookup"><span data-stu-id="1c950-151">Each location has a database and an application server, which are used by the support engineers as they enter and update information about customer calls.</span></span> <span data-ttu-id="1c950-152">A topologia é particionada por tempo.</span><span class="sxs-lookup"><span data-stu-id="1c950-152">The topology is partitioned by time.</span></span> <span data-ttu-id="1c950-153">Por isso, as atualizações ocorrem apenas no nó que está atualmente aberto para negócios e, em seguida, elas fluem para outros bancos de dados participantes.</span><span class="sxs-lookup"><span data-stu-id="1c950-153">Therefore, updates occur only at the node that is currently open for business, and then the updates flow to the other participating databases.</span></span> <span data-ttu-id="1c950-154">Essa topologia oferece as seguintes vantagens:</span><span class="sxs-lookup"><span data-stu-id="1c950-154">This topology provides the following benefits:</span></span>  
  
-   <span data-ttu-id="1c950-155">Independência sem isolamento: cada escritório pode inserir, atualizar ou excluir dados, de forma independente, mas também compartilhá-los, porque eles são replicados em todos os outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="1c950-155">Independence without isolation: Each office can insert, update, or delete data independently but can also share the data because it is replicated to all other participating databases.</span></span>  
  
-   <span data-ttu-id="1c950-156">Disponibilidade superior no caso de falha ou permissão de manutenção em um ou mais dos bancos de dados participantes.</span><span class="sxs-lookup"><span data-stu-id="1c950-156">Higher availability in case of failure or to allow maintenance at one or more of the participating databases.</span></span>  
  
     <span data-ttu-id="1c950-157">![Replicação ponto a ponto, três e quatro nós](../media/repl-multinode-04.gif "Replicação ponto a ponto, três e quatro nós")</span><span class="sxs-lookup"><span data-stu-id="1c950-157">![Peer-to-peer replication, three and four nodes](../media/repl-multinode-04.gif "Peer-to-peer replication, three and four nodes")</span></span>  
  
 <span data-ttu-id="1c950-158">A ilustração anterior mostra a adição de um nó à topologia de três nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-158">The preceding illustration shows the addition of a node to the three-node topology.</span></span> <span data-ttu-id="1c950-159">Um nó poderia ser adicionado a esse cenário pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="1c950-159">A node could be added in this scenario for the following reasons:</span></span>  
  
-   <span data-ttu-id="1c950-160">Porque outro escritório foi aberto.</span><span class="sxs-lookup"><span data-stu-id="1c950-160">Because another office is opened.</span></span>  
  
-   <span data-ttu-id="1c950-161">Para fornecer alta disponibilidade em suporte à manutenção ou para aumentar a tolerância a falhas, ou caso ocorra uma falha de disco ou outra falha significativa.</span><span class="sxs-lookup"><span data-stu-id="1c950-161">To provide higher availability to support maintenance or increase fault tolerance if a disk failure or other major failure occurs.</span></span>  
  
 <span data-ttu-id="1c950-162">Observe que nas topologias de três ou quatro nós, todos os bancos de dados publicam e assinam todos os outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="1c950-162">Notice that in both the three- and four-node topologies, all databases publish and subscribe to all other databases.</span></span> <span data-ttu-id="1c950-163">Isso oferece um máximo de disponibilidade no caso de necessidades de manutenção ou falha de um ou mais nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-163">This provides maximum availability in case of maintenance needs or failure of one or more nodes.</span></span> <span data-ttu-id="1c950-164">À medida que os nós são adicionados, é preciso equilibrar as necessidades de disponibilidade e escalabilidade, segundo o desempenho e a complexidade da implantação e do gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="1c950-164">As nodes are added, you must balance availability and scalability needs against performance and the complexity of deployment and administration.</span></span>  
  
## <a name="configuring-peer-to-peer-replication"></a><span data-ttu-id="1c950-165">Configurando a replicação ponto a ponto</span><span class="sxs-lookup"><span data-stu-id="1c950-165">Configuring Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="1c950-166">Configurar uma topologia de replicação ponto a ponto é bem semelhante a configurar uma série de publicações transacionais e assinaturas padrão.</span><span class="sxs-lookup"><span data-stu-id="1c950-166">Configuring a peer-to-peer replication topology is very similar to configuring a series of standard transactional publications and subscriptions.</span></span> <span data-ttu-id="1c950-167">As etapas descritas nos tópicos a seguir mostram a configuração de um sistema de três nós, semelhante à configuração mostrada à esquerda da ilustração anterior, que apresenta a topologia ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="1c950-167">The steps described in the following topics show the configuration of a three-node system, similar to the configuration shown on the left in the previous illustration that shows peer-to-peer topology.</span></span>  
  
## <a name="considerations-for-using-peer-to-peer-replication"></a><span data-ttu-id="1c950-168">Considerações sobre o uso da replicação ponto a ponto</span><span class="sxs-lookup"><span data-stu-id="1c950-168">Considerations for Using Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="1c950-169">Esta seção fornece informações e diretrizes para avaliar o momento a usar a replicação ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="1c950-169">This section provides information and guidelines to consider when you use peer-to-peer replication.</span></span>  
  
### <a name="general-considerations"></a><span data-ttu-id="1c950-170">Considerações gerais</span><span class="sxs-lookup"><span data-stu-id="1c950-170">General Considerations</span></span>  
  
-   <span data-ttu-id="1c950-171">A replicação ponto a ponto estará disponível apenas em versões Enterprise do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c950-171">Peer-to-peer replication is available only in Enterprise versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="1c950-172">Todos os bancos de dados que participam da replicação ponto a ponto devem conter esquema e dados idênticos:</span><span class="sxs-lookup"><span data-stu-id="1c950-172">All databases that participate in peer-to-peer replication should contain identical schema and data:</span></span>  
  
    -   <span data-ttu-id="1c950-173">Os nomes de objeto, de esquema de objeto e de publicação devem ser idênticos.</span><span class="sxs-lookup"><span data-stu-id="1c950-173">Object names, object schema, and publication names should be identical.</span></span>  
  
    -   <span data-ttu-id="1c950-174">As publicações precisam permitir a replicação de alterações de esquema.</span><span class="sxs-lookup"><span data-stu-id="1c950-174">Publications must allow schema changes to be replicated.</span></span> <span data-ttu-id="1c950-175">(Essa é uma configuração de **1** da propriedade da publicação **replicate_ddl**, que é a configuração padrão.) Para obter mais informações, consulte [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md) (Fazer alterações de esquema em bancos de dados de publicação).</span><span class="sxs-lookup"><span data-stu-id="1c950-175">(This is a setting of **1** for the publication property **replicate_ddl**, which is the default setting.) For more information, see [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md).</span></span>  
  
    -   <span data-ttu-id="1c950-176">Não há suporte para filtragens de linha e de coluna.</span><span class="sxs-lookup"><span data-stu-id="1c950-176">Row and column filtering are not supported.</span></span>  
  
-   <span data-ttu-id="1c950-177">Recomenda-se que cada nó use o seu próprio banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="1c950-177">We recommend that each node use its own distribution database.</span></span> <span data-ttu-id="1c950-178">Isso elimina o potencial de haver um único ponto de falha.</span><span class="sxs-lookup"><span data-stu-id="1c950-178">This eliminates the potential of having a single point of failure.</span></span>  
  
-   <span data-ttu-id="1c950-179">Tabelas e outros objetos não podem ser incluídos em várias publicações ponto a ponto em um único banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="1c950-179">Tables and other objects cannot be included in multiple peer-to-peer publications in a single publication database.</span></span>  
  
-   <span data-ttu-id="1c950-180">Uma publicação precisa ser ativada para replicação ponto a ponto antes que qualquer assinatura seja criada.</span><span class="sxs-lookup"><span data-stu-id="1c950-180">A publication must be enabled for peer-to-peer replication before any subscriptions are created.</span></span>  
  
-   <span data-ttu-id="1c950-181">As assinaturas devem ser inicializadas usando-se um backup ou com a opção **'suporte para replicação somente'** .</span><span class="sxs-lookup"><span data-stu-id="1c950-181">Subscriptions must be initialized by using a backup or with the **'replication support only'** option.</span></span> <span data-ttu-id="1c950-182">Para obter mais informações, consulte [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="1c950-182">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
-   <span data-ttu-id="1c950-183">O uso de colunas de identidade não é recomendado.</span><span class="sxs-lookup"><span data-stu-id="1c950-183">We do not recommend the use of identity columns.</span></span> <span data-ttu-id="1c950-184">Ao usar identidades, será preciso gerenciar manualmente os intervalos atribuídos às tabelas em todos os bancos de dados participantes.</span><span class="sxs-lookup"><span data-stu-id="1c950-184">When using identities, you must manually manage the ranges assigned to the tables at each participating database.</span></span> <span data-ttu-id="1c950-185">Para obter mais informações, consulte a seção “Atribuindo intervalos para o gerenciamento manual de intervalos de identidade” em [Replicar colunas de identidade](../publish/replicate-identity-columns.md).</span><span class="sxs-lookup"><span data-stu-id="1c950-185">For more information, see the section "Assigning Ranges for Manual Identity Range Management" in [Replicate Identity Columns](../publish/replicate-identity-columns.md).</span></span>  
  
### <a name="feature-restrictions"></a><span data-ttu-id="1c950-186">Restrições de recursos</span><span class="sxs-lookup"><span data-stu-id="1c950-186">Feature Restrictions</span></span>  
 <span data-ttu-id="1c950-187">A replicação ponto a ponto oferece suporte aos principais recursos da replicação transacional, mas não às seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="1c950-187">Peer-to-peer replication supports the core features of transactional replication, but does not support the following options:</span></span>  
  
-   <span data-ttu-id="1c950-188">Inicialização e reinicialização com um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="1c950-188">Initialization and reinitialization with a snapshot.</span></span>  
  
-   <span data-ttu-id="1c950-189">Filtros de linha e de coluna.</span><span class="sxs-lookup"><span data-stu-id="1c950-189">Row and column filters.</span></span>  
  
-   <span data-ttu-id="1c950-190">Colunas de carimbo de data/hora.</span><span class="sxs-lookup"><span data-stu-id="1c950-190">Timestamp columns.</span></span>  
  
-   <span data-ttu-id="1c950-191">Publicadores e Assinantes não[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c950-191">Non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers and Subscribers.</span></span>  
  
-   <span data-ttu-id="1c950-192">Assinaturas de atualização imediata e de atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="1c950-192">Immediate updating and queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="1c950-193">Assinaturas anônimas.</span><span class="sxs-lookup"><span data-stu-id="1c950-193">Anonymous subscriptions.</span></span>  
  
-   <span data-ttu-id="1c950-194">Assinaturas parciais.</span><span class="sxs-lookup"><span data-stu-id="1c950-194">Partial subscriptions.</span></span>  
  
-   <span data-ttu-id="1c950-195">Assinaturas anexáveis e assinaturas transformáveis.</span><span class="sxs-lookup"><span data-stu-id="1c950-195">Attachable subscriptions and transformable subscriptions.</span></span> <span data-ttu-id="1c950-196">(Essas duas opções foram preteridas no [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="1c950-196">(Both of these options were deprecated in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].)</span></span>  
  
-   <span data-ttu-id="1c950-197">Distribution Agents compartilhados.</span><span class="sxs-lookup"><span data-stu-id="1c950-197">Shared Distribution Agents.</span></span>  
  
-   <span data-ttu-id="1c950-198">O parâmetro Distribution Agent **-SubscriptionStreams** e o parâmetro Log Reader Agent **-MaxCmdsInTran**.</span><span class="sxs-lookup"><span data-stu-id="1c950-198">The Distribution Agent parameter **-SubscriptionStreams** and the Log Reader Agent parameter **-MaxCmdsInTran**.</span></span>  
  
-   <span data-ttu-id="1c950-199">As propriedades do artigo \*\* \@ destination_owner\*\* e \*\* \@ destination_table\*\*.</span><span class="sxs-lookup"><span data-stu-id="1c950-199">The article properties **\@destination_owner** and **\@destination_table**.</span></span>  

-   <span data-ttu-id="1c950-200">A replicação transacional ponto a ponto não dá suporte à criação de uma assinatura transacional unidirecional em uma publicação ponto a ponto</span><span class="sxs-lookup"><span data-stu-id="1c950-200">Peer-to-Peer transactional replication does not support creating a one-way transactional subscription to a Peer-to-Peer publication</span></span>
  
 <span data-ttu-id="1c950-201">As propriedades a seguir têm considerações especiais:</span><span class="sxs-lookup"><span data-stu-id="1c950-201">The following properties have special considerations:</span></span>  
  
-   <span data-ttu-id="1c950-202">A \*\* \@ allow_initialize_from_backup\*\* da propriedade de publicação requer um valor de `true` .</span><span class="sxs-lookup"><span data-stu-id="1c950-202">The publication property **\@allow_initialize_from_backup** requires a value of `true`.</span></span>  
  
-   <span data-ttu-id="1c950-203">A propriedade do artigo \*\* \@ replicate_ddl\*\* requer um valor de `true` ; \*\* \@ identityrangemanagementoption\*\* requer um valor de `manual` ; e o \*\* \@ status\*\* requer que a opção **24** esteja definida.</span><span class="sxs-lookup"><span data-stu-id="1c950-203">The article property **\@replicate_ddl** requires a value of `true`; **\@identityrangemanagementoption** requires a value of `manual`; and **\@status** requires that option **24** is set.</span></span>  
  
-   <span data-ttu-id="1c950-204">O valor das propriedades do artigo \*\* \@ ins_cmd**, \*\* \@ del_cmd**e \*\* \@ upd_cmd\*\* não pode ser definido como `SQL` .</span><span class="sxs-lookup"><span data-stu-id="1c950-204">The value for article properties **\@ins_cmd**, **\@del_cmd**, and **\@upd_cmd** cannot be set to `SQL`.</span></span>  
  
-   <span data-ttu-id="1c950-205">A propriedade de assinatura \*\* \@ sync_type\*\* requer um valor de `none` ou `automatic` .</span><span class="sxs-lookup"><span data-stu-id="1c950-205">The subscription property **\@sync_type** requires a value of `none` or `automatic`.</span></span>  
  
### <a name="maintenance-considerations"></a><span data-ttu-id="1c950-206">Considerações sobre manutenção</span><span class="sxs-lookup"><span data-stu-id="1c950-206">Maintenance Considerations</span></span>  
 <span data-ttu-id="1c950-207">As ações a seguir requerem que o sistema seja confirmado.</span><span class="sxs-lookup"><span data-stu-id="1c950-207">The following actions require the system to be quiesced.</span></span> <span data-ttu-id="1c950-208">Isso significa parar as atividades em tabelas publicadas em todos os nós e assegurar que todos os nós tenham recebido todas as alterações de todos os outros nós.</span><span class="sxs-lookup"><span data-stu-id="1c950-208">This means stopping activity on published tables at all nodes and making sure that each node has received all changes from all other nodes.</span></span>  
  
-   <span data-ttu-id="1c950-209">Adicionando um [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] nó a uma topologia existente</span><span class="sxs-lookup"><span data-stu-id="1c950-209">Adding a [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] node to an existing topology</span></span>  
  
-   <span data-ttu-id="1c950-210">Adicionando um artigo a uma publicação existente</span><span class="sxs-lookup"><span data-stu-id="1c950-210">Adding an article to an existing publication</span></span>  
  
-   <span data-ttu-id="1c950-211">Fazendo alterações de esquema</span><span class="sxs-lookup"><span data-stu-id="1c950-211">Making schema changes</span></span>  
  
-   <span data-ttu-id="1c950-212">Restaurando um nó de um backup</span><span class="sxs-lookup"><span data-stu-id="1c950-212">Restoring a node from a backup</span></span>  
  
 <span data-ttu-id="1c950-213">Para obter mais informações, consulte [Fechar uma topologia de replicação para novas sessões &#40;programação de Transact-SQL de replicação&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) e [Administrar uma topologia ponto a ponto &#40;programação de Transact-SQL de replicação&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="1c950-213">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) and [Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="1c950-214">Ao adicionar um novo nó a uma topologia ponto a ponto, você deve restaurar apenas dos backups que foram criados depois que o novo nó foi adicionado.</span><span class="sxs-lookup"><span data-stu-id="1c950-214">If you add a new node to a peer-to-peer topology, you should restore only from backups that were created after the new node was added.</span></span>  
  
-   <span data-ttu-id="1c950-215">Você não pode reinicializar assinaturas em uma topologia ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="1c950-215">You cannot reinitialize subscriptions in a peer-to-peer topology.</span></span> <span data-ttu-id="1c950-216">Se for necessário garantir que um nó tenha uma nova cópia dos dados, restaure o backup no nó.</span><span class="sxs-lookup"><span data-stu-id="1c950-216">If you have to ensure that a node has a new copy of the data, restore a backup at the node.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1c950-217">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="1c950-217">See Also</span></span>  
 <span data-ttu-id="1c950-218">[Administrar uma topologia ponto a ponto &#40;programação Transact-SQL de replicação&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span><span class="sxs-lookup"><span data-stu-id="1c950-218">[Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span></span>  
 <span data-ttu-id="1c950-219">[Estratégias para fazer backup e restaurar o instantâneo e a replicação transacional](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="1c950-219">[Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span></span>  
 [<span data-ttu-id="1c950-220">Tipos de publicação para a Replicação Transacional</span><span class="sxs-lookup"><span data-stu-id="1c950-220">Publication Types for Transactional Replication</span></span>](transactional-replication.md)  
  
  
