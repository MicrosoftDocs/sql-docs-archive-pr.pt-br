---
title: Detecção de conflitos na replicação ponto a ponto | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication, conflict detection
ms.assetid: 754a1070-59bc-438d-998b-97fdd77d45ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 301a751bf5b5959ab1fc434ac2a583a6b0378fdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87574635"
---
# <a name="conflict-detection-in-peer-to-peer-replication"></a><span data-ttu-id="c6adb-102">Detecção de conflitos na replicação ponto a ponto</span><span class="sxs-lookup"><span data-stu-id="c6adb-102">Conflict Detection in Peer-to-Peer Replication</span></span>
  <span data-ttu-id="c6adb-103">A replicação transacional ponto a ponto permite inserir, atualizar ou excluir dados em qualquer modo em uma topologia e faz com que as alterações de dados sejam propagadas para os outros nós.</span><span class="sxs-lookup"><span data-stu-id="c6adb-103">Peer-to-peer transactional replication lets you insert, update, or delete data at any node in a topology and have data changes propagated to the other nodes.</span></span> <span data-ttu-id="c6adb-104">Uma vez que você pode alterar dados em qualquer nó, as alterações de dados em nós diferentes podem entrar em conflito umas com as outras.</span><span class="sxs-lookup"><span data-stu-id="c6adb-104">Because you can change data at any node, data changes at different nodes could conflict with each other.</span></span> <span data-ttu-id="c6adb-105">Se uma linha for modificada em mais de um nó, isso poderá causar um conflito ou mesmo uma atualização perdida quando a linha for propagada para outros nós.</span><span class="sxs-lookup"><span data-stu-id="c6adb-105">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
 <span data-ttu-id="c6adb-106">A replicação ponto a ponto no [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] e em versões posteriores oferece a opção de habilitar a detecção de conflito em uma topologia ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="c6adb-106">Peer-to-peer replication in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions provides the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="c6adb-107">Essa opção ajuda a evitar os problemas causados por conflitos não detectados, inclusive o comportamento inconsistente do aplicativo e as atualizações perdidas.</span><span class="sxs-lookup"><span data-stu-id="c6adb-107">This option would help prevent the issues that are caused by undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="c6adb-108">Com essa opção habilitada, por padrão uma alteração de conflito é tratada como erro crítico que causa a falha do Agente de Distribuição.</span><span class="sxs-lookup"><span data-stu-id="c6adb-108">With this option enabled, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="c6adb-109">No evento de um conflito, a topologia é mantida em um estado inconsistente até que o conflito seja resolvido e os dados sejam tornados consistentes em toda a topologia.</span><span class="sxs-lookup"><span data-stu-id="c6adb-109">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved and the data is made consistent across the topology.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c6adb-110">Para evitar inconsistência potencial de dados, certifique-se de evitar conflitos em uma topologia ponto a ponto, mesmo com a detecção de conflitos ativada.</span><span class="sxs-lookup"><span data-stu-id="c6adb-110">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="c6adb-111">Para assegurar que as operações de gravação de uma linha particular sejam realizadas em um único nó, os aplicativos que acessam e alteram dados devem realizar operações de partição, inserção, atualização e exclusão.</span><span class="sxs-lookup"><span data-stu-id="c6adb-111">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="c6adb-112">Esse particionamento assegurará que as modificações em uma determinada linha originária de um nó sejam sincronizadas com todos os outros nós da topologia antes que a linha seja modificada por um outro nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-112">This partitioning ensures that modifications to a given row that is originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="c6adb-113">Se um aplicativo requerer detecção de conflito e recursos de resolução sofisticados, use a replicação de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="c6adb-113">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="c6adb-114">Para obter mais informações, consulte [Mesclar a replicação](../merge/merge-replication.md) e [Detectar e resolver conflitos na replicação de mesclagem](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="c6adb-114">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="understanding-conflicts-and-conflict-detection"></a><span data-ttu-id="c6adb-115">Entendendo conflitos e detecção de conflitos</span><span class="sxs-lookup"><span data-stu-id="c6adb-115">Understanding Conflicts and Conflict Detection</span></span>  
 <span data-ttu-id="c6adb-116">Em um único banco de dados, as alterações feitas na mesma linha por aplicativos diferentes não causam um conflito.</span><span class="sxs-lookup"><span data-stu-id="c6adb-116">In a single database, changes that are made to the same row by different applications do not cause a conflict.</span></span> <span data-ttu-id="c6adb-117">Isso ocorre uma vez que as transações são serializadas, e os bloqueios são usados para controlar as alterações simultâneas.</span><span class="sxs-lookup"><span data-stu-id="c6adb-117">This is because transactions are serialized, and locks are used to handle concurrent changes.</span></span> <span data-ttu-id="c6adb-118">Em um sistema distribuído assíncrono como a replicação ponto a ponto, as transações agem de maneira independente em cada nó e não há nenhum mecanismo para serializar as transações por diversos nós.</span><span class="sxs-lookup"><span data-stu-id="c6adb-118">In an asynchronous distributed system such as peer-to-peer replication, transactions act independently on each node; and there is no mechanism to serialize transactions across multiple nodes.</span></span> <span data-ttu-id="c6adb-119">Um protocolo como o protocolo 2PC pode ser usado, mas isso afeta o desempenho significativamente.</span><span class="sxs-lookup"><span data-stu-id="c6adb-119">A protocol like two-phase commit could be used, but this affects performance significantly.</span></span>  
  
 <span data-ttu-id="c6adb-120">Em sistemas como replicação ponto a ponto, os conflitos não são detectados quando as alterações são confirmadas em pontos individuais.</span><span class="sxs-lookup"><span data-stu-id="c6adb-120">In systems such as peer-to-peer replication, conflicts are not detected when changes are committed at individual peers.</span></span> <span data-ttu-id="c6adb-121">Ao contrário, eles são detectados quando essas alterações são replicadas e aplicadas em outros pontos.</span><span class="sxs-lookup"><span data-stu-id="c6adb-121">Instead, they are detected when those changes are replicated and applied at other peers.</span></span> <span data-ttu-id="c6adb-122">Na replicação ponto a ponto, os conflitos são detectados pelos procedimentos armazenados que se aplicam a alterações em cada nó, com base em uma coluna oculta em cada tabela publicada.</span><span class="sxs-lookup"><span data-stu-id="c6adb-122">In peer-to-peer replication, conflicts are detected by the stored procedures that apply changes to each node, based on a hidden column in each published table.</span></span> <span data-ttu-id="c6adb-123">Essa coluna oculta armazena uma ID que combina uma *ID de originador* que você especifica para cada nó e a versão da linha.</span><span class="sxs-lookup"><span data-stu-id="c6adb-123">This hidden column stores an ID that combines an *originator ID* that you specify for each node and the version of the row.</span></span> <span data-ttu-id="c6adb-124">Durante a sincronização, o Agente de Distribuição executa procedimentos para cada tabela.</span><span class="sxs-lookup"><span data-stu-id="c6adb-124">During synchronization, the Distribution Agent executes procedures for each table.</span></span> <span data-ttu-id="c6adb-125">Esses procedimentos aplicam operações de inserção, atualização e exclusão de outros pontos.</span><span class="sxs-lookup"><span data-stu-id="c6adb-125">These procedures apply insert, update, and delete operations from other peers.</span></span> <span data-ttu-id="c6adb-126">Se um dos procedimentos detectar um conflito quando ele ler o valor de coluna oculta, ocorrerá o erro 22815 que tem um nível de severidade de 16:</span><span class="sxs-lookup"><span data-stu-id="c6adb-126">If one of the procedures detects a conflict when it reads the hidden column value, it raises error 22815 that has a severity level of 16:</span></span>  
  
 `A conflict of type '%s' was detected at peer %d between peer %d (incoming), transaction id %s  and peer %d (on disk), transaction id %s`  
  
 <span data-ttu-id="c6adb-127">Por padrão, esse erro faz o Agente de Distribuição pare de aplicar alterações naquele nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-127">By default, this error causes the Distribution Agent to stop applying changes to that node.</span></span> <span data-ttu-id="c6adb-128">Para obter informações sobre como controlar os conflitos detectados, consulte "Controlando conflitos" posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="c6adb-128">For information about how to handle the conflicts that are detected, see "Handling Conflicts" later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c6adb-129">A coluna oculta pode ser acessada somente por um usuário registrado pela conexão de administrador dedicada (DAC).</span><span class="sxs-lookup"><span data-stu-id="c6adb-129">The hidden column can be accessed only by a user that is logged in through the Dedicated Administrator Connection (DAC).</span></span> <span data-ttu-id="c6adb-130">Para obter informações sobre o DAC, consulte [Conexão de diagnóstico para administradores de banco de dados](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="c6adb-130">For information about DAC, see [Diagnostic Connection for Database Administrators](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span>  
  
 <span data-ttu-id="c6adb-131">A replicação ponto a ponto detecta os seguintes tipos de conflitos:</span><span class="sxs-lookup"><span data-stu-id="c6adb-131">Peer-to-peer replication detects the following types of conflicts:</span></span>  
  
-   <span data-ttu-id="c6adb-132">Inserção-inserção</span><span class="sxs-lookup"><span data-stu-id="c6adb-132">Insert-insert</span></span>  
  
     <span data-ttu-id="c6adb-133">Todas as linhas em cada tabela que participa da replicação ponto a ponto são identificadas exclusivamente usando valores de chave primários.</span><span class="sxs-lookup"><span data-stu-id="c6adb-133">All rows in each table participating in peer-to-peer replication are uniquely identified by using primary key values.</span></span> <span data-ttu-id="c6adb-134">Um conflito inserção-inserção ocorre quando uma linha com o mesmo valor de chave é inserida em mais de um nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-134">An insert-insert conflict occurs when a row with the same key value was inserted at more than one node.</span></span>  
  
-   <span data-ttu-id="c6adb-135">Atualização-atualização</span><span class="sxs-lookup"><span data-stu-id="c6adb-135">Update-update</span></span>  
  
     <span data-ttu-id="c6adb-136">Ocorre quando a mesma linha foi atualizada em mais de um nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-136">Occurs when the same row was updated at more than one node.</span></span>  
  
-   <span data-ttu-id="c6adb-137">Inserção-atualização</span><span class="sxs-lookup"><span data-stu-id="c6adb-137">Insert-update</span></span>  
  
     <span data-ttu-id="c6adb-138">Ocorre se uma linha foi atualizada em um nó, mas a mesma linha foi excluída e, em seguida, reinserida em outro nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-138">Occurs if a row was updated at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="c6adb-139">Inserção-exclusão</span><span class="sxs-lookup"><span data-stu-id="c6adb-139">Insert-delete</span></span>  
  
     <span data-ttu-id="c6adb-140">Ocorre se uma linha foi excluída em um nó, mas a mesma linha foi excluída e, em seguida, reinserida em outro nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-140">Occurs if a row was deleted at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="c6adb-141">Atualização-exclusão</span><span class="sxs-lookup"><span data-stu-id="c6adb-141">Update-delete</span></span>  
  
     <span data-ttu-id="c6adb-142">Ocorre se uma linha foi atualizada em um nó, mas a mesma linha foi excluída em outro.</span><span class="sxs-lookup"><span data-stu-id="c6adb-142">Occurs if a row was updated at one node, but the same row was deleted at another node.</span></span>  
  
-   <span data-ttu-id="c6adb-143">Exclusão-exclusão</span><span class="sxs-lookup"><span data-stu-id="c6adb-143">Delete-delete</span></span>  
  
     <span data-ttu-id="c6adb-144">Ocorre quando uma linha foi excluída em mais de um nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-144">Occurs when a row was deleted at more than one node.</span></span>  
  
## <a name="enabling-conflict-detection"></a><span data-ttu-id="c6adb-145">Habilitando a detecção de conflito</span><span class="sxs-lookup"><span data-stu-id="c6adb-145">Enabling Conflict Detection</span></span>  
 <span data-ttu-id="c6adb-146">Para usar detecção de conflito, todos os nós devem ser executados no [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] ou uma versão posterior, e a detecção deve estar habilitada para todos os nós.</span><span class="sxs-lookup"><span data-stu-id="c6adb-146">To use conflict detection, all nodes must be running [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] or a later version; and detection must be enabled for all nodes.</span></span> <span data-ttu-id="c6adb-147">No [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] e versões posteriores, por padrão, a detecção de conflito é habilitada em [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c6adb-147">In [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions, by default, conflict detection is enabled in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="c6adb-148">Recomendamos que você habilite a detecção, até mesmo em cenários nos quais você não espera nenhum conflito.</span><span class="sxs-lookup"><span data-stu-id="c6adb-148">We recommend that you have detection enabled, even in scenarios in which you do not expect any conflicts.</span></span> <span data-ttu-id="c6adb-149">A detecção de conflito pode ser habilitada e desabilitada usando os procedimentos armazenados do [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] ou [!INCLUDE[tsql](../../../includes/tsql-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="c6adb-149">Conflict detection can be enabled and disabled by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures:</span></span>  
  
-   <span data-ttu-id="c6adb-150">Você pode habilitar e desabilitar a detecção no [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] usando a página **Opções de Assinatura** da caixa de diálogo **Propriedades de Publicação** ou a página **Configurar Topologia** do Assistente para Configurar Topologia Ponto a Ponto.</span><span class="sxs-lookup"><span data-stu-id="c6adb-150">You can enable and disable detection in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] either by using the **Subscription Options** page of the **Publication Properties** dialog box or the **Configure Topology** page of the Configure Peer-to-Peer Topology Wizard.</span></span>  
  
     <span data-ttu-id="c6adb-151">Se você configurar a detecção de conflito usando o [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], o Agente de Distribuição será configurado para parar de aplicar as alterações quando um conflito for detectado.</span><span class="sxs-lookup"><span data-stu-id="c6adb-151">If you configure conflict detection by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], the Distribution Agent is configured to stop applying changes when a conflict is detected.</span></span>  
  
-   <span data-ttu-id="c6adb-152">Você também pode habilitar e desabilitar a detecção usando os seguintes procedimentos armazenados: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) ou [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c6adb-152">You can also enable and disable detection by using the following stored procedures: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) or [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span></span>  
  
     <span data-ttu-id="c6adb-153">Se você configurar a detecção de conflito usando os procedimentos armazenados, poderá especificar se o Agente de Distribuição deve parar de aplicar as alterações quando um conflito for detectado.</span><span class="sxs-lookup"><span data-stu-id="c6adb-153">If you configure conflict detection by using stored procedures, you can specify whether the Distribution Agent should stop applying changes when a conflict is detected.</span></span> <span data-ttu-id="c6adb-154">O padrão é o agente parar.</span><span class="sxs-lookup"><span data-stu-id="c6adb-154">The default is for the agent to stop.</span></span> <span data-ttu-id="c6adb-155">Recomendamos o uso da configuração padrão.</span><span class="sxs-lookup"><span data-stu-id="c6adb-155">We recommend that you use the default setting.</span></span>  
  
## <a name="handling-conflicts"></a><span data-ttu-id="c6adb-156">Controlando conflitos</span><span class="sxs-lookup"><span data-stu-id="c6adb-156">Handling Conflicts</span></span>  
 <span data-ttu-id="c6adb-157">Quando ocorrer um conflito na replicação ponto a ponto, o alerta de detecção de conflito ponto a ponto é emitido.</span><span class="sxs-lookup"><span data-stu-id="c6adb-157">When a conflict occurs in peer-to-peer replication, the Peer-to-peer conflict detection alert is raised.</span></span> <span data-ttu-id="c6adb-158">Recomendamos que você configure esse alerta de forma que você seja notificado quando ocorrer um conflito.</span><span class="sxs-lookup"><span data-stu-id="c6adb-158">We recommend that you configure this alert so that you are notified when a conflict occurs.</span></span> <span data-ttu-id="c6adb-159">Para obter mais informações sobre alertas, consulte [Usar alertas para eventos do agente de replicação](../agents/use-alerts-for-replication-agent-events.md).</span><span class="sxs-lookup"><span data-stu-id="c6adb-159">For more information about alerts, see [Use Alerts for Replication Agent Events](../agents/use-alerts-for-replication-agent-events.md).</span></span>  
  
 <span data-ttu-id="c6adb-160">Depois que o Agente de Distribuição parar e o alerta for emitido, use uma das abordagens a seguir para controlar os conflitos ocorridos:</span><span class="sxs-lookup"><span data-stu-id="c6adb-160">After the Distribution Agent stops and the alert is raised, use one of the following approaches to handle the conflicts that occurred:</span></span>  
  
-   <span data-ttu-id="c6adb-161">Reinicialize o nó no qual o conflito foi detectado a partir do backup de um nó que contém os dados obrigatórios (a abordagem recomendada).</span><span class="sxs-lookup"><span data-stu-id="c6adb-161">Reinitialize the node where the conflict was detected from the backup of a node that contains the required data (the recommended approach).</span></span> <span data-ttu-id="c6adb-162">Esse método garante que os dados estejam em um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="c6adb-162">This method ensures that data is in a consistent state.</span></span>  
  
-   <span data-ttu-id="c6adb-163">Tente sincronizar o nó novamente permitindo que o Agente de Distribuição continue a aplicar as alterações:</span><span class="sxs-lookup"><span data-stu-id="c6adb-163">Try to synchronize the node again by enabling the Distribution Agent to continue to apply changes:</span></span>  
  
    1.  <span data-ttu-id="c6adb-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): especifique ' p2p_continue_onconflict ' para o @property parâmetro e `true` para o @value parâmetro.</span><span class="sxs-lookup"><span data-stu-id="c6adb-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `true` for the @value parameter.</span></span>  
  
    2.  <span data-ttu-id="c6adb-165">Reinicie o Agente de Distribuição.</span><span class="sxs-lookup"><span data-stu-id="c6adb-165">Restart the Distribution Agent.</span></span>  
  
    3.  <span data-ttu-id="c6adb-166">Verifique os conflitos detectados usando o visualizador de conflitos e determine as linhas que foram envolvidas, o tipo de conflito e o vencedor.</span><span class="sxs-lookup"><span data-stu-id="c6adb-166">Verify the conflicts that were detected by using the conflict viewer and determine the rows that were involved, the type of conflict, and the winner.</span></span> <span data-ttu-id="c6adb-167">O conflito é resolvido com base no valor da ID do originador especificado durante a configuração: a linha originada no nó com a ID mais alta vence o conflito.</span><span class="sxs-lookup"><span data-stu-id="c6adb-167">The conflict is resolved based on the originator ID value that you specified during configuration: the row that originated at the node with the highest ID wins the conflict.</span></span> <span data-ttu-id="c6adb-168">Para obter mais informações, consulte [Exibir conflitos de dados em publicações transacionais &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="c6adb-168">For more information, see [View Data Conflicts for Transactional Publications &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span></span>  
  
    4.  <span data-ttu-id="c6adb-169">Execute a validação para garantir que as linhas de conflito se encontraram corretamente.</span><span class="sxs-lookup"><span data-stu-id="c6adb-169">Run validation to ensure that the conflicting rows converged correctly.</span></span> <span data-ttu-id="c6adb-170">Para obter mais informações, consulte [Validar os dados replicados](../validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="c6adb-170">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="c6adb-171">Se os dados forem inconsistentes depois dessa etapa, você deve atualizar manualmente as linhas no nó que tem a prioridade mais alta e, em seguida, permitir que as alterações propagem a partir desse nó.</span><span class="sxs-lookup"><span data-stu-id="c6adb-171">If data is inconsistent after this step, you must manually update rows on the node that has the highest priority, and then let the changes propagate from this node.</span></span> <span data-ttu-id="c6adb-172">Se não houver nenhuma outra alteração conflitante na topologia, todos os nós serão levados para um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="c6adb-172">If there are no further conflicting changes in the topology, all nodes will be brought to a consistent state.</span></span>  
  
    5.  <span data-ttu-id="c6adb-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): especifique ' p2p_continue_onconflict ' para o @property parâmetro e `false` para o @value parâmetro.</span><span class="sxs-lookup"><span data-stu-id="c6adb-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `false` for the @value parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c6adb-174">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="c6adb-174">See Also</span></span>  
 [<span data-ttu-id="c6adb-175">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="c6adb-175">Peer-to-Peer Transactional Replication</span></span>](peer-to-peer-transactional-replication.md)  
  
  
