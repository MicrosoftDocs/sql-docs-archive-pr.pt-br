---
title: Configurar publicação e distribuição | Microsoft Docs
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], distribution
- distribution configuration [SQL Server replication]
- publishing [SQL Server replication], configuring
ms.assetid: 3cfc8966-833e-42fa-80cb-09175d1feed7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: afd1544b5412c6ce2d83a9a1e9a50ddf662b3056
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569391"
---
# <a name="configure-publishing-and-distribution"></a><span data-ttu-id="bf405-102">Configurar a publicação e a distribuição</span><span class="sxs-lookup"><span data-stu-id="bf405-102">Configure Publishing and Distribution</span></span>
  <span data-ttu-id="bf405-103">Este tópico descreve como configurar publicação e distribuição no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] usando [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]ou RMO (Replication Management Objects).</span><span class="sxs-lookup"><span data-stu-id="bf405-103">This topic describes how to configure publishing and distribution in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="bf405-104">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="bf405-104">Before You Begin</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="bf405-105">Segurança</span><span class="sxs-lookup"><span data-stu-id="bf405-105">Security</span></span>  
 <span data-ttu-id="bf405-106">Para obter mais informações, consulte [implantação de replicação segura](security/view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="bf405-106">For more information, see [Secure Replication Deployment](security/view-and-modify-replication-security-settings.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="bf405-107">Usando o SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bf405-107">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="bf405-108">Configure a distribuição, usando o Assistente para Novas Publicações ou o Assistente para Configurar a Distribuição.</span><span class="sxs-lookup"><span data-stu-id="bf405-108">Configure distribution using the New Publication Wizard or the Configure Distribution Wizard.</span></span> <span data-ttu-id="bf405-109">Depois que o Distribuidor estiver configurado, veja e modifique as propriedades na caixa de diálogo **Propriedades do Distribuidor – \<Distributor>** .</span><span class="sxs-lookup"><span data-stu-id="bf405-109">After the Distributor is configured, view and modify properties in the **Distributor Properties - \<Distributor>** dialog box.</span></span> <span data-ttu-id="bf405-110">Use o Assistente para Configurar Distribuição se você desejar configurar um Distribuidor para que os membros de funções de banco de dados fixas **db_owner** possam criar publicações ou para configurar um Distribuidor remoto que não é um Publicador.</span><span class="sxs-lookup"><span data-stu-id="bf405-110">Use the Configure Distribution Wizard if you want to configure a Distributor so that members of the **db_owner** fixed database roles can create publications, or because you want to configure a remote Distributor that is not a Publisher.</span></span>  
  
#### <a name="to-configure-distribution"></a><span data-ttu-id="bf405-111">Para configurar a distribuição</span><span class="sxs-lookup"><span data-stu-id="bf405-111">To configure distribution</span></span>  
  
1.  <span data-ttu-id="bf405-112">No [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], conecte-se ao servidor que será o Distribuidor (em muitos casos, o Publicador e o Distribuidor são o mesmo servidor) e, então, expanda o nó de servidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-112">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the server that will be the Distributor (in many cases, the Publisher and Distributor are the same server), and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="bf405-113">Clique com o botão direito na pasta **Replicação** e clique em **Configurar Distribuição**.</span><span class="sxs-lookup"><span data-stu-id="bf405-113">Right-click the **Replication** folder, and then click **Configure Distribution**.</span></span>  
  
3.  <span data-ttu-id="bf405-114">Siga o Assistente para Configurar Distribuição para:</span><span class="sxs-lookup"><span data-stu-id="bf405-114">Follow the Configure Distribution Wizard to:</span></span>  
  
    -   <span data-ttu-id="bf405-115">Selecionar um Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-115">Select a Distributor.</span></span> <span data-ttu-id="bf405-116">Para usar um distribuidor local, selecione **' \<ServerName> ' atuará como seu próprio distribuidor; SQL Server criará um banco de dados de distribuição e um log**.</span><span class="sxs-lookup"><span data-stu-id="bf405-116">To use a local Distributor, select **'\<ServerName>' will act as its own Distributor; SQL Server will create a distribution database and log**.</span></span> <span data-ttu-id="bf405-117">Para usar um Distribuidor remoto, selecione **Use o seguinte servidor como Distribuidor**e, em seguida, selecione um servidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-117">To use a remote Distributor, select **Use the following server as the Distributor**, and then select a server.</span></span> <span data-ttu-id="bf405-118">O servidor já deve ser configurado como um Distribuidor e o Publicador deve ser habilitado a usar o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-118">The server must already be configured as a Distributor, and the Publisher must be enabled to use the Distributor.</span></span> <span data-ttu-id="bf405-119">Para obter mais informações, consulte [Habilitar um Publicador Remoto em um Distribuidor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="bf405-119">For more information, see [Enable a Remote Publisher at a Distributor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span></span>  
  
         <span data-ttu-id="bf405-120">Se você selecionar um Distribuidor remoto, você deverá inserir uma senha na página **Senha Administrativa** para conexões feitas do Publicador ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-120">If you select a remote Distributor, you must enter a password on the **Administrative Password** page for connections made from the Publisher to the Distributor.</span></span> <span data-ttu-id="bf405-121">Esta senha deve corresponder à senha especificada quando o Publicador foi habilitado no Distribuidor remoto.</span><span class="sxs-lookup"><span data-stu-id="bf405-121">This password must match the password specified when the Publisher was enabled at the remote Distributor.</span></span>  
  
    -   <span data-ttu-id="bf405-122">Especifique uma pasta de instantâneo de raiz (para um Distribuidor local).</span><span class="sxs-lookup"><span data-stu-id="bf405-122">Specify a root snapshot folder (for a local Distributor).</span></span> <span data-ttu-id="bf405-123">A pasta de instantâneo é simplesmente um diretório que você designou como um compartilhamento, agentes que leem essa pasta e gravam nela devem ter permissões suficientes para acessá-la.</span><span class="sxs-lookup"><span data-stu-id="bf405-123">The snapshot folder is simply a directory that you have designated as a share; agents that read from and write to this folder must have sufficient permissions to access it.</span></span> <span data-ttu-id="bf405-124">Cada Publicador que usa esse Distribuidor cria uma pasta na pasta raiz, e cada publicação cria pastas na pasta Publicador em que armazenará arquivos de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="bf405-124">Each Publisher that uses this Distributor creates a folder under the root folder, and each publication creates folders under the Publisher folder in which to store snapshot files.</span></span> <span data-ttu-id="bf405-125">Para obter mais informações sobre como proteger a pasta adequadamente, consulte [Proteger a Pasta de Instantâneos](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="bf405-125">For more information on securing the folder appropriately, see [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
    -   <span data-ttu-id="bf405-126">Especifique o banco de dados de distribuição (para um Distribuidor local).</span><span class="sxs-lookup"><span data-stu-id="bf405-126">Specify the distribution database (for a local Distributor).</span></span> <span data-ttu-id="bf405-127">O banco de dados de distribuição armazena metadados e dados de histórico para todos os tipos de replicação e transações para replicação transacional.</span><span class="sxs-lookup"><span data-stu-id="bf405-127">The distribution database stores metadata and history data for all types of replication and transactions for transactional replication.</span></span>  
  
    -   <span data-ttu-id="bf405-128">Além disso, permite que outros Publicadores usem o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-128">Optionally enable other Publishers to use the Distributor.</span></span> <span data-ttu-id="bf405-129">Se outros Publicadores estiverem habilitados para usar o Distribuidor, você deverá inserir uma senha na página **Senha do Distribuidor** para conexões feitas desses Publicadores para os Distribuidores.</span><span class="sxs-lookup"><span data-stu-id="bf405-129">If other Publishers are enabled to use the Distributor, you must enter a password on the **Distributor Password** page for connections made from these Publishers to the Distributor.</span></span>  
  
    -   <span data-ttu-id="bf405-130">Além disso, faça o script das definições de configuração.</span><span class="sxs-lookup"><span data-stu-id="bf405-130">Optionally script configuration settings.</span></span> <span data-ttu-id="bf405-131">Para obter mais informações, consulte [Scripting Replication](scripting-replication.md).</span><span class="sxs-lookup"><span data-stu-id="bf405-131">For more information, see [Scripting Replication](scripting-replication.md).</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="bf405-132">Usando o Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="bf405-132">Using Transact-SQL</span></span>  
 <span data-ttu-id="bf405-133">Publicação e distribuição de replicação podem ser configuradas de forma programada, usando-se procedimentos de replicação armazenados.</span><span class="sxs-lookup"><span data-stu-id="bf405-133">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
#### <a name="to-configure-publishing-using-a-local-distributor"></a><span data-ttu-id="bf405-134">Para configurar publicação usando um distribuidor local</span><span class="sxs-lookup"><span data-stu-id="bf405-134">To configure publishing using a local distributor</span></span>  
  
1.  <span data-ttu-id="bf405-135">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) para determinar se o servidor já está configurado como um Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-135">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="bf405-136">Se o valor **installed** no resultado definido for **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) no Distribuidor no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="bf405-136">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span>  
  
    -   <span data-ttu-id="bf405-137">Se o valor **bd de distribuição instalado** no resultado definido for **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) no Distribuidor no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="bf405-137">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="bf405-138">Especifique o nome do banco de dados de distribuição para o \*\* \@ banco de dados\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-138">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="bf405-139">Opcionalmente, você pode especificar o período máximo de retenção transacional para \*\* \@ max_distretention\*\* e o período de retenção do histórico para \*\* \@ history_retention\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-139">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="bf405-140">Se um banco de dados novo estiver sendo criado, especifique os parâmetros de propriedade de banco de dados desejados.</span><span class="sxs-lookup"><span data-stu-id="bf405-140">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="bf405-141">No distribuidor, que também é o Publicador, execute [sp_adddistpublisher &#40;&#41;Transact-SQL ](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), especificando o compartilhamento UNC que será usado como pasta de instantâneo padrão para \*\* \@ working_directory\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-141">At the Distributor, which is also the Publisher, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span>  
  
3.  <span data-ttu-id="bf405-142">No Editor, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bf405-142">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="bf405-143">Especifique o banco de dados que está sendo publicado para \*\* \@ dbname**, o tipo de replicação para \*\* \@ OptName**e um valor de `true` para \*\* \@ valor\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-143">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of `true` for **\@value**.</span></span>  
  
#### <a name="to-configure-publishing-using-a-remote-distributor"></a><span data-ttu-id="bf405-144">Para configurar publicação usando um distribuidor remoto</span><span class="sxs-lookup"><span data-stu-id="bf405-144">To configure publishing using a remote distributor</span></span>  
  
1.  <span data-ttu-id="bf405-145">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) para determinar se o servidor já está configurado como um Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-145">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="bf405-146">Se o valor **installed** no resultado definido for **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) no Distribuidor no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="bf405-146">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="bf405-147">Especifique uma senha forte para a \*\* \@ senha\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-147">Specify a strong password for **\@password**.</span></span> <span data-ttu-id="bf405-148">Essa senha para a conta **distributor_admin** será usada pelo Publicador ao se conectar ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-148">This password for the **distributor_admin** account will be used by the Publisher when connecting to the Distributor.</span></span>  
  
    -   <span data-ttu-id="bf405-149">Se o valor **bd de distribuição instalado** no resultado definido for **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) no Distribuidor no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="bf405-149">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="bf405-150">Especifique o nome do banco de dados de distribuição para o \*\* \@ banco de dados\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-150">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="bf405-151">Opcionalmente, você pode especificar o período máximo de retenção transacional para \*\* \@ max_distretention\*\* e o período de retenção do histórico para \*\* \@ history_retention\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-151">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="bf405-152">Se um banco de dados novo estiver sendo criado, especifique os parâmetros de propriedade de banco de dados desejados.</span><span class="sxs-lookup"><span data-stu-id="bf405-152">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="bf405-153">No distribuidor, execute [sp_adddistpublisher &#40;&#41;Transact-SQL ](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), especificando o compartilhamento UNC que será usado como pasta de instantâneo padrão para \*\* \@ working_directory\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-153">At the Distributor, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span> <span data-ttu-id="bf405-154">Se o distribuidor usar [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] autenticação ao se conectar ao Publicador, você também deverá especificar um valor de **0** para \*\* \@ security_mode\*\* e as [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] informações de logon para \*\* \@ logon\*\* e \*\* \@ senha\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-154">If the Distributor will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@security_mode** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@login** and **\@password**.</span></span>  
  
3.  <span data-ttu-id="bf405-155">No Editor do banco de dados mestre, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bf405-155">At the Publisher on the master database, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span></span> <span data-ttu-id="bf405-156">Especifique a senha forte usada na etapa 1 para \*\* \@ senha\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-156">Specify the strong password used in step 1 for **\@password**.</span></span> <span data-ttu-id="bf405-157">Essa senha será usada pelo Publicador ao se conectar ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="bf405-157">This password will be used by the Publisher when connecting to the Distributor.</span></span>  
  
4.  <span data-ttu-id="bf405-158">No Editor, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bf405-158">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="bf405-159">Especifique o banco de dados que está sendo publicado para \*\* \@ dbname**, o tipo de replicação para \*\* \@ OptName**e um valor de true para \*\* \@ Value\*\*.</span><span class="sxs-lookup"><span data-stu-id="bf405-159">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of true for **\@value**.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="bf405-160">Exemplo (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="bf405-160">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="bf405-161">O exemplo a seguir mostra como configurar publicação e distribuição programaticamente.</span><span class="sxs-lookup"><span data-stu-id="bf405-161">The following example demonstrates how to configure publishing and distribution programmatically.</span></span> <span data-ttu-id="bf405-162">Nesse exemplo, o nome do servidor que está sendo configurado como publicador e um distribuidor local são fornecidos usando variáveis de script.</span><span class="sxs-lookup"><span data-stu-id="bf405-162">In this example, the name of the server that is being configured as a publisher and a local distributor is supplied using scripting variables.</span></span> <span data-ttu-id="bf405-163">Publicação e distribuição de replicação podem ser configuradas de forma programada, usando-se procedimentos de replicação armazenados.</span><span class="sxs-lookup"><span data-stu-id="bf405-163">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
 [!code-sql[HowTo#AddDistPub](../../snippets/tsql/SQL15/replication/howto/tsql/adddistpub.sql#adddistpub)]  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="bf405-164">Usando o RMO (Replication Management Objects)</span><span class="sxs-lookup"><span data-stu-id="bf405-164">Using Replication Management Objects (RMO)</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-on-a-single-server"></a><span data-ttu-id="bf405-165">Para configurar a publicação e a distribuição em um único servidor</span><span class="sxs-lookup"><span data-stu-id="bf405-165">To configure publishing and distribution on a single server</span></span>  
  
1.  <span data-ttu-id="bf405-166">Crie uma conexão ao servidor usando a classe <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bf405-166">Create a connection to the server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="bf405-167">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="bf405-167">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="bf405-168">Passe o <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-168">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="bf405-169">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.DistributionDatabase>.</span><span class="sxs-lookup"><span data-stu-id="bf405-169">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="bf405-170">Defina a propriedade <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> para o nome do banco de dados e defina a propriedade <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> para o <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-170">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="bf405-171">Instale o Distribuidor chamando o método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="bf405-171">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="bf405-172">Passe o objeto <xref:Microsoft.SqlServer.Replication.DistributionDatabase> da etapa 3.</span><span class="sxs-lookup"><span data-stu-id="bf405-172">Pass the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span>  
  
6.  <span data-ttu-id="bf405-173">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.DistributionPublisher>.</span><span class="sxs-lookup"><span data-stu-id="bf405-173">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="bf405-174">Defina as seguintes propriedades de <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span><span class="sxs-lookup"><span data-stu-id="bf405-174">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="bf405-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - nome do Publicador.</span><span class="sxs-lookup"><span data-stu-id="bf405-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the Publisher.</span></span>  
  
    -   <span data-ttu-id="bf405-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - o <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="bf405-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - o nome do banco de dados criado na etapa 5.</span><span class="sxs-lookup"><span data-stu-id="bf405-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="bf405-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - o compartilhamento usado para acessar os arquivos de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="bf405-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="bf405-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - o modo de segurança usado durante a conexão com o Publicador.</span><span class="sxs-lookup"><span data-stu-id="bf405-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="bf405-180">O<xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> é recomendado.</span><span class="sxs-lookup"><span data-stu-id="bf405-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="bf405-181">Chame o método <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="bf405-181">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-using-a-remote-distributor"></a><span data-ttu-id="bf405-182">Para configurar a publicação e a distribuição usando um Distribuidor remoto</span><span class="sxs-lookup"><span data-stu-id="bf405-182">To configure publishing and distribution using a remote Distributor</span></span>  
  
1.  <span data-ttu-id="bf405-183">Crie uma conexão ao servidor do Distribuidor remoto usando a classe <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bf405-183">Create a connection to the remote Distributor server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="bf405-184">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="bf405-184">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="bf405-185">Passe o <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-185">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="bf405-186">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.DistributionDatabase>.</span><span class="sxs-lookup"><span data-stu-id="bf405-186">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="bf405-187">Defina a propriedade <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> ao nome do banco de dados e defina a propriedade <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> ao <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-187">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name, and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="bf405-188">Instale o Distribuidor chamando o método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="bf405-188">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="bf405-189">Especifique uma senha segura (usada pelo Publicador ao se conectar ao Distribuidor remoto) e o objeto <xref:Microsoft.SqlServer.Replication.DistributionDatabase> da etapa 3.</span><span class="sxs-lookup"><span data-stu-id="bf405-189">Specify a secure password (used by the Publisher when connecting to the remote Distributor) and the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span> <span data-ttu-id="bf405-190">Para obter mais informações, consulte [Proteger o Distribuidor](security/secure-the-distributor.md).</span><span class="sxs-lookup"><span data-stu-id="bf405-190">For more information, see [Secure the Distributor](security/secure-the-distributor.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="bf405-191">Quando possível, solicite que os usuários insiram as credenciais de segurança em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="bf405-191">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="bf405-192">Se for preciso armazenar credenciais, use os serviços [criptográficos](https://go.microsoft.com/fwlink/?LinkId=34733) fornecidos pelo [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Framework do Windows.</span><span class="sxs-lookup"><span data-stu-id="bf405-192">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
6.  <span data-ttu-id="bf405-193">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.DistributionPublisher>.</span><span class="sxs-lookup"><span data-stu-id="bf405-193">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="bf405-194">Defina as seguintes propriedades de <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span><span class="sxs-lookup"><span data-stu-id="bf405-194">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="bf405-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - o nome do servidor do Publicador local.</span><span class="sxs-lookup"><span data-stu-id="bf405-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the local Publisher server.</span></span>  
  
    -   <span data-ttu-id="bf405-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - o <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="bf405-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="bf405-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - o nome do banco de dados criado na etapa 5.</span><span class="sxs-lookup"><span data-stu-id="bf405-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="bf405-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - o compartilhamento usado para acessar os arquivos de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="bf405-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="bf405-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - o modo de segurança usado durante a conexão com o Publicador.</span><span class="sxs-lookup"><span data-stu-id="bf405-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="bf405-200">O<xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> é recomendado.</span><span class="sxs-lookup"><span data-stu-id="bf405-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="bf405-201">Chame o método <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="bf405-201">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
9. <span data-ttu-id="bf405-202">Crie uma conexão com o servidor do Publicador local usando a classe <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bf405-202">Create a connection to the local Publisher server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
10. <span data-ttu-id="bf405-203">Criar uma instância da classe <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="bf405-203">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="bf405-204">Passe a <xref:Microsoft.SqlServer.Management.Common.ServerConnection> da etapa 9.</span><span class="sxs-lookup"><span data-stu-id="bf405-204">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 9.</span></span>  
  
11. <span data-ttu-id="bf405-205">Chame o método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="bf405-205">Call the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="bf405-206">Passe o nome do Distribuidor remoto e a senha para o Distribuidor remoto especificados na etapa 5.</span><span class="sxs-lookup"><span data-stu-id="bf405-206">Pass the name of the remote Distributor and the password for the remote Distributor specified in step 5.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="bf405-207">Quando possível, solicite que os usuários insiram as credenciais de segurança em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="bf405-207">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="bf405-208">Se for preciso armazenar credenciais, use os [serviços criptográficos](https://go.microsoft.com/fwlink/?LinkId=34733) fornecidos pelo Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="bf405-208">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the Windows .NET Framework.</span></span>  
  
###  <a name="example-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="bf405-209">Exemplo (RMO)</span><span class="sxs-lookup"><span data-stu-id="bf405-209">Example (RMO)</span></span>  
 <span data-ttu-id="bf405-210">Você pode configurar a replicação da publicação e da distribuição de forma programada usando o RMO (Replication Management Objects).</span><span class="sxs-lookup"><span data-stu-id="bf405-210">You can programmatically configure replication publishing and distribution by using Replication Management Objects (RMO).</span></span>  
  
 [!code-csharp[HowTo#rmo_AddDistPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_adddistpub)]  
  
 [!code-vb[HowTo#rmo_vb_AddDistPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_adddistpub)]  
  
## <a name="see-also"></a><span data-ttu-id="bf405-211">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="bf405-211">See Also</span></span>  
 <span data-ttu-id="bf405-212">[Exibir e modificar propriedades de Publicador e Distribuidor](view-and-modify-distributor-and-publisher-properties.md) </span><span class="sxs-lookup"><span data-stu-id="bf405-212">[View and Modify Distributor and Publisher Properties](view-and-modify-distributor-and-publisher-properties.md) </span></span>  
 <span data-ttu-id="bf405-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="bf405-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="bf405-214">[Configurar Distribuição](configure-distribution.md) </span><span class="sxs-lookup"><span data-stu-id="bf405-214">[Configure Distribution](configure-distribution.md) </span></span>  
 <span data-ttu-id="bf405-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="bf405-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span></span>  
 [<span data-ttu-id="bf405-216">Configurar a replicação para Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="bf405-216">Configure Replication for AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) 
  
  
