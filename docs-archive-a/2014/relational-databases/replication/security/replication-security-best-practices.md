---
title: Práticas recomendadas de segurança de replicação | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- security [SQL Server replication], best practices
- security [SQL Server replication], between domains
- authentication [SQL Server replication]
- Internet [SQL Server replication], security
ms.assetid: 1ab2635d-0992-4c99-b17d-041d02ec9a7c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8e5918bfed52a6ed1befd81d2fdb7910062060e6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87568437"
---
# <a name="replication-security-best-practices"></a><span data-ttu-id="d4969-102">Práticas recomendadas em relação à segurança de replicação</span><span class="sxs-lookup"><span data-stu-id="d4969-102">Replication Security Best Practices</span></span>
  <span data-ttu-id="d4969-103">A replicação move dados em ambientes distribuídos variando deste intranets em um único domínio até aplicativos que acessam dados entre domínios não confiáveis e na internet.</span><span class="sxs-lookup"><span data-stu-id="d4969-103">Replication moves data in distributed environments ranging from intranets on a single domain to applications that access data between untrusted domains and over the Internet.</span></span> <span data-ttu-id="d4969-104">É importante para entender a melhor abordagem para proteger as conexões de replicação sob essas diversas circunstâncias.</span><span class="sxs-lookup"><span data-stu-id="d4969-104">It is important to understand the best approach for securing replication connections under these different circumstances.</span></span>  
  
 <span data-ttu-id="d4969-105">As informações abaixo são relevantes para a replicação em todos os ambientes:</span><span class="sxs-lookup"><span data-stu-id="d4969-105">The following information is relevant to replication in all environments:</span></span>  
  
-   <span data-ttu-id="d4969-106">Criptografar as conexão entre computadores é uma topologia de replicação que usa um método padrão da indústria, como VPN (Virtual Private Networks), SSL (Secure Sockets Layer) ou IPSEC (IP Security).</span><span class="sxs-lookup"><span data-stu-id="d4969-106">Encrypt the connections between computers in a replication topology using an industry standard method, such as Virtual Private Networks (VPN), Secure Sockets Layer (SSL), or IP Security (IPSEC).</span></span> <span data-ttu-id="d4969-107">Para obter mais informações, veja [Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="d4969-107">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span> <span data-ttu-id="d4969-108">Para obter informações sobre como usar VPN e SSL para replicar dados na Internet, consulte [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="d4969-108">For information about using VPN and SSL for replicating data over the Internet, see [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span></span>  
  
     <span data-ttu-id="d4969-109">Se você usar SSL para proteger as conexões entre computadores em uma topologia de replicação, especifique um valor de **1** ou **2** para o parâmetro **-EncryptionLevel** de cada agente de replicação (um valor de **2** é recomendado).</span><span class="sxs-lookup"><span data-stu-id="d4969-109">If you use SSL to secure the connections between computers in a replication topology, specify a value of **1** or **2** for the **-EncryptionLevel** parameter of each replication agent (a value of **2** is recommended).</span></span> <span data-ttu-id="d4969-110">Um valor de **1** especifica que é usada criptografia, porém o agente não verifica se o certificado do servidor SSL está assinado por um emissor confiável; um valor **2** especifica que o certificado é verificado.</span><span class="sxs-lookup"><span data-stu-id="d4969-110">A value of **1** specifies that encryption is used, but the agent does not verify that the SSL server certificate is signed by a trusted issuer; a value of **2** specifies that the certificate is verified.</span></span> <span data-ttu-id="d4969-111">Os parâmetros de agente podem ser especificados em perfis de agente e na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="d4969-111">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="d4969-112">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="d4969-112">For more information, see:</span></span>  
  
    -   [<span data-ttu-id="d4969-113">Trabalhar com perfis do Agente de Replicação</span><span class="sxs-lookup"><span data-stu-id="d4969-113">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
    -   [<span data-ttu-id="d4969-114">Exibir e modificar parâmetros do prompt de comando de agentes de replicação &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d4969-114">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
    -   [<span data-ttu-id="d4969-115">Conceitos dos executáveis do Replication Agent</span><span class="sxs-lookup"><span data-stu-id="d4969-115">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
-   <span data-ttu-id="d4969-116">Execute cada agente de replicação em uma conta diferente do Windows e use a Autenticação do Windows para todas as conexões de agente de replicação.</span><span class="sxs-lookup"><span data-stu-id="d4969-116">Run each replication agent under a different Windows account, and use Windows Authentication for all replication agent connections.</span></span> <span data-ttu-id="d4969-117">Para obter mais informações sobre como especificar contas, consulte [Gerenciar logons e senhas na replicação](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span><span class="sxs-lookup"><span data-stu-id="d4969-117">For more information about specifying accounts, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
-   <span data-ttu-id="d4969-118">Conceda somente as permissões exigidas para cada agente.</span><span class="sxs-lookup"><span data-stu-id="d4969-118">Grant only the required permissions to each agent.</span></span> <span data-ttu-id="d4969-119">Para obter mais informações, consulte a seção "Permissões necessárias para agentes" em [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="d4969-119">For more information, see the "Permissions Required by Agents" section of [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="d4969-120">Certifique-se de que todas as contas Agente de Mesclagem e Agente de Distribuição estão na lista de acesso à publicação (PAL).</span><span class="sxs-lookup"><span data-stu-id="d4969-120">Ensure all Merge Agent and Distribution Agent accounts are in the publication access list (PAL).</span></span> <span data-ttu-id="d4969-121">Para obter mais informações, consulte [Secure the Publisher](secure-the-publisher.md) (Proteger o publicador).</span><span class="sxs-lookup"><span data-stu-id="d4969-121">For more information, see [Secure the Publisher](secure-the-publisher.md).</span></span>  
  
-   <span data-ttu-id="d4969-122">Siga o princípio de menos privilégios concedendo às contas na PAL somente as permissões que necessitam para executar tarefas de replicação.</span><span class="sxs-lookup"><span data-stu-id="d4969-122">Follow the principle of least privilege by allowing accounts in the PAL only the permissions they need to perform replication tasks.</span></span> <span data-ttu-id="d4969-123">Não adicione os logons a qualquer função de servidor fixa que não seja necessária para replicação.</span><span class="sxs-lookup"><span data-stu-id="d4969-123">Do not add the logins to any fixed server roles that are not required for replication.</span></span>  
  
-   <span data-ttu-id="d4969-124">Configure o compartilhamento de instantâneo para permitir acesso de leitura a todos os Agente de Mesclagems e Agente de Distribuiçãos.</span><span class="sxs-lookup"><span data-stu-id="d4969-124">Configure the snapshot share to allow read access by all Merge Agents and Distribution Agents.</span></span> <span data-ttu-id="d4969-125">No caso de instantâneos para publicação com filtros com parâmetros, assegure que cada pasta está configurada para permitir acesso somente às contas do Agente de Mesclagem adequadas.</span><span class="sxs-lookup"><span data-stu-id="d4969-125">In the case of snapshots for publications with parameterized filters, ensure that each folder is configured to allow access only to the appropriate Merge Agent accounts.</span></span>  
  
-   <span data-ttu-id="d4969-126">Configure o compartilhamento de instantâneo para permitir acesso de gravação pelo Agente de Instantâneo.</span><span class="sxs-lookup"><span data-stu-id="d4969-126">Configure the snapshot share to allow write access by the Snapshot Agent.</span></span>  
  
-   <span data-ttu-id="d4969-127">Se você usar assinaturas pull, use um compartilhamento de rede ao invés de um caminho local para a pasta de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="d4969-127">If you use pull subscriptions, use a network share rather than a local path for the snapshot folder.</span></span>  
  
 <span data-ttu-id="d4969-128">Se a sua topologia de replicação incluir computadores que não estejam no mesmo domínio ou que estejam em domínios que não possuam relação segura um com o outro, você poderá usar a Autenticação do Windows ou a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para as conexões feitas por agentes (para obter mais informações sobre domínios, consulte a documentação do Windows).</span><span class="sxs-lookup"><span data-stu-id="d4969-128">If your replication topology includes computers that are not in the same domain or are in domains that do not have trust relationships with each other, you can use Windows Authentication or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication for the connections made by agents (For more information about domains, see the Windows documentation).</span></span> <span data-ttu-id="d4969-129">Sugerimos como prática recomendada de segurança que você use a Autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="d4969-129">It is recommended as a security best practice that you use Windows Authentication.</span></span>  
  
-   <span data-ttu-id="d4969-130">Para usar a Autenticação do Windows:</span><span class="sxs-lookup"><span data-stu-id="d4969-130">To use Windows Authentication:</span></span>  
  
    -   <span data-ttu-id="d4969-131">Adicione uma conta local do Windows (não uma conta de domínio) para cada agente nos nós adequados (use o mesmo nome e senha em cada nó).</span><span class="sxs-lookup"><span data-stu-id="d4969-131">Add a local Windows account (not a domain account) for each agent at the appropriate nodes (use the same name and password at each node).</span></span> <span data-ttu-id="d4969-132">Por exemplo, o Agente de Distribuição para uma assinatura push executa no Distribuidor e faz conexões para o Distribuidor e para o Assinante.</span><span class="sxs-lookup"><span data-stu-id="d4969-132">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="d4969-133">A conta do Windows para o Agente de Distribuição deve ser adicionada ao Distribuidor e ao Assinante.</span><span class="sxs-lookup"><span data-stu-id="d4969-133">The Windows account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="d4969-134">Certifique-se que um determinado agente (por exemplo, o Agente de Distribuição para uma assinatura) é executado na mesma conta em cada computador.</span><span class="sxs-lookup"><span data-stu-id="d4969-134">Ensure that a given agent (for example the Distribution Agent for a subscription) runs under the same account at each computer.</span></span>  
  
-   <span data-ttu-id="d4969-135">Para usar a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="d4969-135">To use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication:</span></span>  
  
    -   <span data-ttu-id="d4969-136">Adicione uma conta [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para cada agente nos nós adequados (use o mesmo nome e senha em cada nó).</span><span class="sxs-lookup"><span data-stu-id="d4969-136">Add a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for each agent at the appropriate nodes (use the same account name and password at each node).</span></span> <span data-ttu-id="d4969-137">Por exemplo, o Agente de Distribuição para uma assinatura push executa no Distribuidor e faz conexões para o Distribuidor e para o Assinante.</span><span class="sxs-lookup"><span data-stu-id="d4969-137">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="d4969-138">A conta do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para o Agente de Distribuição deve ser adicionada ao Distribuidor e ao Assinante.</span><span class="sxs-lookup"><span data-stu-id="d4969-138">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="d4969-139">Certifique-se que um determinado agente (por exemplo, o Agente de Distribuição para uma assinatura) faz conexões na mesma conta em cada computador.</span><span class="sxs-lookup"><span data-stu-id="d4969-139">Ensure that a given agent (for example the Distribution Agent for a subscription) makes connections under the same account at each computer.</span></span>  
  
    -   <span data-ttu-id="d4969-140">Quando for necessária a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , normalmente o acesso ao compartilhamento de instantâneo UNC não estará disponível (por exemplo, o acesso poderá ser bloqueado por um firewall).</span><span class="sxs-lookup"><span data-stu-id="d4969-140">In situations that require [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication, access to UNC snapshot shares is often not available (for example access might be blocked by a firewall).</span></span> <span data-ttu-id="d4969-141">Neste caso, você pode transferir o instantâneo aos Assinantes por FTP (File Transfer Protocol).</span><span class="sxs-lookup"><span data-stu-id="d4969-141">In this case, you can transfer the snapshot to Subscribers through file transfer protocol (FTP).</span></span> <span data-ttu-id="d4969-142">Para obter mais informações, consulte [Transferir instantâneos pelo FTP](../transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="d4969-142">For more information, see [Transfer Snapshots Through FTP](../transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d4969-143">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d4969-143">See Also</span></span>  
 <span data-ttu-id="d4969-144">[Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="d4969-144">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="d4969-145">[Replicação na Internet](../replication-over-the-internet.md) </span><span class="sxs-lookup"><span data-stu-id="d4969-145">[Replication over the Internet](../replication-over-the-internet.md) </span></span>  
 <span data-ttu-id="d4969-146">[Proteger o Assinante](secure-the-subscriber.md) </span><span class="sxs-lookup"><span data-stu-id="d4969-146">[Secure the Subscriber](secure-the-subscriber.md) </span></span>  
 <span data-ttu-id="d4969-147">[Proteger o Distribuidor](secure-the-distributor.md) </span><span class="sxs-lookup"><span data-stu-id="d4969-147">[Secure the Distributor](secure-the-distributor.md) </span></span>  
 <span data-ttu-id="d4969-148">[Proteger o Publicador](secure-the-publisher.md) </span><span class="sxs-lookup"><span data-stu-id="d4969-148">[Secure the Publisher](secure-the-publisher.md) </span></span>  
 [<span data-ttu-id="d4969-149">Segurança de Replicação do SQL Server</span><span class="sxs-lookup"><span data-stu-id="d4969-149">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
