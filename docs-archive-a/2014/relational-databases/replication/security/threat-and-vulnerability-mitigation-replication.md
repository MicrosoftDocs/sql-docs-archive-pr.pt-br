---
title: Ameaça e mitigação de vulnerabilidade (Replicação) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c1a9c2c646f26d0cb61ae3d41ccdbd72551094d4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87683451"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a><span data-ttu-id="03f0b-102">Ameaça e mitigação de vulnerabilidade (Replicação)</span><span class="sxs-lookup"><span data-stu-id="03f0b-102">Threat and Vulnerability Mitigation (Replication)</span></span>
  <span data-ttu-id="03f0b-103">Este tópico descreve técnicas para reduzir ameaças a uma topologia de replicação.</span><span class="sxs-lookup"><span data-stu-id="03f0b-103">This topic describes techniques to reduce threats to a replication topology.</span></span>  
  
## <a name="encryption"></a><span data-ttu-id="03f0b-104">Criptografia</span><span class="sxs-lookup"><span data-stu-id="03f0b-104">Encryption</span></span>  
 <span data-ttu-id="03f0b-105">A criptografia é o processo de converter dados em um formato que não pode ser lido sem uma chave especial, de modo que somente o destinatário pode ler os dados.</span><span class="sxs-lookup"><span data-stu-id="03f0b-105">Encryption is the process of converting data into a form that cannot be read without a special key, so that only the intended recipient can read the data.</span></span> <span data-ttu-id="03f0b-106">A replicação não criptografa dados armazenados em tabelas ou enviados por conexões de rede.</span><span class="sxs-lookup"><span data-stu-id="03f0b-106">Replication does not encrypt data stored in tables or sent over network connections.</span></span> <span data-ttu-id="03f0b-107">Isso é por projeto, pois a criptografia está disponível em nível de transporte com diversas tecnologias, incluindo as seguintes tecnologias padrão da indústria: VPN (Virtual Private Networks), SSL (Secure Sockets Layer) e IPSEC (IP Security).</span><span class="sxs-lookup"><span data-stu-id="03f0b-107">This is by design, because encryption is available at the transport level with a number of technologies, including the following industry standard technologies: Virtual Private Networks (VPN), Secure Sockets Layer (SSL), and IP Security (IPSEC).</span></span> <span data-ttu-id="03f0b-108">Recomendamos usar um desses métodos de criptografia para as conexões entre computadores em uma topologia de replicação.</span><span class="sxs-lookup"><span data-stu-id="03f0b-108">We recommend using one of these encryption methods for the connections between computers in a replication topology.</span></span> <span data-ttu-id="03f0b-109">Para obter mais informações, veja [Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="03f0b-109">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span> <span data-ttu-id="03f0b-110">Para obter informações sobre como usar VPN e SSL para replicar dados na Internet, consulte [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="03f0b-110">For information about using VPN and SSL for replicating data over the Internet, see [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span></span>  
  
 <span data-ttu-id="03f0b-111">Se você usar SSL para proteger as conexões entre computadores em uma topologia de replicação, especifique um valor de **1** ou **2** para o parâmetro **-EncryptionLevel** de cada agente de replicação (um valor de **2** é recomendado).</span><span class="sxs-lookup"><span data-stu-id="03f0b-111">If you use SSL to secure the connections between computers in a replication topology, specify a value of **1** or **2** for the **-EncryptionLevel** parameter of each replication agent (a value of **2** is recommended).</span></span> <span data-ttu-id="03f0b-112">Um valor de **1** especifica que é usada criptografia, porém o agente não verifica se o certificado do servidor SSL está assinado por um emissor confiável; um valor **2** especifica que o certificado é verificado.</span><span class="sxs-lookup"><span data-stu-id="03f0b-112">A value of **1** specifies that encryption is used, but the agent does not verify that the SSL server certificate is signed by a trusted issuer; a value of **2** specifies that the certificate is verified.</span></span> <span data-ttu-id="03f0b-113">Os parâmetros de agente podem ser especificados em perfis de agente e na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="03f0b-113">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="03f0b-114">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="03f0b-114">For more information, see:</span></span>  
  
-   [<span data-ttu-id="03f0b-115">Trabalhar com perfis do Agente de Replicação</span><span class="sxs-lookup"><span data-stu-id="03f0b-115">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
-   [<span data-ttu-id="03f0b-116">Exibir e modificar parâmetros do prompt de comando de agentes de replicação &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="03f0b-116">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [<span data-ttu-id="03f0b-117">Conceitos dos executáveis do Replication Agent</span><span class="sxs-lookup"><span data-stu-id="03f0b-117">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
 <span data-ttu-id="03f0b-118">A replicação tem o seguinte comportamento em relação a Chaves Mestras de banco de dados, que são usadas para criptografar dados:</span><span class="sxs-lookup"><span data-stu-id="03f0b-118">Replication has the following behavior with respect to database Master Keys, which are used to encrypt data:</span></span>  
  
-   <span data-ttu-id="03f0b-119">Se existir uma Chave Mestra em um banco de dados envolvido em replicação (um banco de dados de publicação, um banco de dados de assinatura ou um banco de dados de distribuição), a replicação criptografa e descriptografa as senhas dos agentes nesse banco de dados usando uma chave simétrica de banco de dados do [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="03f0b-119">If a Master Key is present in a database involved in replication (a publication database, subscription database, or distribution database), replication encrypts and decrypts agent passwords in that database using a [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] database symmetric key.</span></span> <span data-ttu-id="03f0b-120">Se forem usadas Chaves Mestras, deverá ser criada uma Chave Mestra em cada banco de dados envolvido na replicação.</span><span class="sxs-lookup"><span data-stu-id="03f0b-120">If Master Keys are used, a Master Key should be created in each database involved in replication.</span></span> <span data-ttu-id="03f0b-121">Para obter mais informações sobre como criar chaves mestras, consulte [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="03f0b-121">For more information about creating Master Keys, see [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>  
  
-   <span data-ttu-id="03f0b-122">Replicação não replica Chaves Mestras.</span><span class="sxs-lookup"><span data-stu-id="03f0b-122">Replication does not replicate Master Keys.</span></span> <span data-ttu-id="03f0b-123">Caso exija a Chave Mestra no Assinante, você deverá exportá-la do banco de dados de publicação usando BACKUP MASTER KEY e, em seguida, importá-la para o banco de dados de assinatura usando RESTORE MASTER KEY.</span><span class="sxs-lookup"><span data-stu-id="03f0b-123">If you require the Master Key at the Subscriber, you must export it from the publication database using BACKUP MASTER KEY and then import it into the subscription database using RESTORE MASTER KEY.</span></span> <span data-ttu-id="03f0b-124">Para obter mais informações, veja [BACKUP MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-master-key-transact-sql) e [RESTORE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="03f0b-124">For more information, see [BACKUP MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-master-key-transact-sql) and [RESTORE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-master-key-transact-sql).</span></span>  
  
-   <span data-ttu-id="03f0b-125">Se uma chave mestra for definida para um banco de dados de assinatura anexável, especifique a senha da chave mestra usando o **@db_master_key_password** parâmetro de [sp_attachsubscription &#40;&#41;TRANSACT-SQL ](/sql/relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="03f0b-125">If a Master Key is defined for an attachable subscription database, specify the Master Key password using the **@db_master_key_password** parameter of [sp_attachsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql).</span></span> <span data-ttu-id="03f0b-126">Isso permite anexar o banco de dados no Assinante.</span><span class="sxs-lookup"><span data-stu-id="03f0b-126">This allows the database to be attached at the Subscriber.</span></span>  
  
 <span data-ttu-id="03f0b-127">Para obter mais informações sobre criptografia e Chaves Mestras, consulte [Encryption Hierarchy](../../security/encryption/encryption-hierarchy.md).</span><span class="sxs-lookup"><span data-stu-id="03f0b-127">For more information about encryption and Master Keys, see [Encryption Hierarchy](../../security/encryption/encryption-hierarchy.md).</span></span>  
  
 <span data-ttu-id="03f0b-128">A replicação permite que você publique dados criptografados em coluna.</span><span class="sxs-lookup"><span data-stu-id="03f0b-128">Replication enables you to publish encrypted column data.</span></span> <span data-ttu-id="03f0b-129">Para descriptografar e usar esses dados no Assinante, a chave usada para criptografar os dados no Publicador também deve estar presente no Assinante.</span><span class="sxs-lookup"><span data-stu-id="03f0b-129">To decrypt and use this data at the Subscriber, the key that was used to encrypt the data at the Publisher must also be present on the Subscriber.</span></span> <span data-ttu-id="03f0b-130">A replicação não fornece um mecanismo seguro para transportar chaves de criptografia.</span><span class="sxs-lookup"><span data-stu-id="03f0b-130">Replication does not provide a secure mechanism to transport encryption keys.</span></span> <span data-ttu-id="03f0b-131">Você deve recriar a chave de criptografia manualmente no Assinante.</span><span class="sxs-lookup"><span data-stu-id="03f0b-131">You must manually re-create the encryption key at the Subscriber.</span></span> <span data-ttu-id="03f0b-132">Para obter mais informações, consulte [Replicar dados em colunas criptografadas &#40;SQL Server Management Studio&#41;](replicate-data-in-encrypted-columns-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="03f0b-132">For more information, see [Replicate Data in Encrypted Columns &#40;SQL Server Management Studio&#41;](replicate-data-in-encrypted-columns-sql-server-management-studio.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="03f0b-133">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="03f0b-133">See Also</span></span>  
 <span data-ttu-id="03f0b-134">[Controle de acesso e identidade &#40;&#41;de replicação](identity-and-access-control-replication.md) </span><span class="sxs-lookup"><span data-stu-id="03f0b-134">[Identity and Access Control &#40;Replication&#41;](identity-and-access-control-replication.md) </span></span>  
 [<span data-ttu-id="03f0b-135">Implantação de replicação segura</span><span class="sxs-lookup"><span data-stu-id="03f0b-135">Secure Replication Deployment</span></span>](view-and-modify-replication-security-settings.md)  
  
  
