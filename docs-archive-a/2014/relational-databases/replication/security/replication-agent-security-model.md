---
title: Modelo de segurança do agente de replicação | Microsoft Docs
ms.custom: ''
ms.date: 10/07/2015
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Snapshot Agent, security
- agents [SQL Server replication], security
- Distribution Agent, security
- logins [SQL Server replication], permissions for agents
- security [SQL Server replication], agent security model
- Log Reader Agent, security
- Queue Reader Agent, security
- Merge Agent, security
- replication [SQL Server], agents and profiles
ms.assetid: 6d09fc8d-843a-4a7a-9812-f093d99d8192
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: da597bf97422f5a0960062b385bc0b67338edfe1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87568443"
---
# <a name="replication-agent-security-model"></a><span data-ttu-id="d2fba-102">Modelo de segurança do agente de replicação</span><span class="sxs-lookup"><span data-stu-id="d2fba-102">Replication Agent Security Model</span></span>
  <span data-ttu-id="d2fba-103">O modelo de segurança do agente de replicação permite um controle refinado das contas nas quais os agentes de replicação executam e efetuam conexões: Uma conta diferente pode ser especificada para cada agente.</span><span class="sxs-lookup"><span data-stu-id="d2fba-103">The replication agent security model allows for fine-grained control over the accounts under which replication agents run and make connections: A different account can be specified for each agent.</span></span> <span data-ttu-id="d2fba-104">Para obter mais informações sobre como especificar contas, consulte [Gerenciar logons e senhas na replicação](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span><span class="sxs-lookup"><span data-stu-id="d2fba-104">For more information about how to specify accounts, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d2fba-105">Quando um membro da função fixa do servidor **sysadmin** configura a replicação, os agentes de replicação podem ser configurados para representar a conta do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-105">When a member of the **sysadmin** fixed server role configures replication, replication agents can be configured to impersonate the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent account.</span></span> <span data-ttu-id="d2fba-106">Isso é realizado não especificando um logon nem uma senha para um agente de replicação, contudo, não recomendamos essa abordagem.</span><span class="sxs-lookup"><span data-stu-id="d2fba-106">This is done by not specifying a login and password for a replication agent; however, we do not recommend this approach.</span></span> <span data-ttu-id="d2fba-107">Em vez disso, como a melhor prática de segurança, recomendamos especificar uma conta para cada agente que tenha as permissões mínimas descritas na seção "Permissões exigidas pelos agentes", mais adiante nesse tópico.</span><span class="sxs-lookup"><span data-stu-id="d2fba-107">Instead, as a security best practice, we recommend that you specify an account for each agent that has the minimum permissions that are described in the section "Permissions That Are Required by Agents" later in this topic.</span></span>  
  
 <span data-ttu-id="d2fba-108">Os agentes de replicação, como todos os executáveis, são executados sob o contexto de uma conta do Windows.</span><span class="sxs-lookup"><span data-stu-id="d2fba-108">Replication agents, like all executables, run under the context of a Windows account.</span></span> <span data-ttu-id="d2fba-109">Os agentes fazem conexões de Segurança Integrada do Windows usando essa conta.</span><span class="sxs-lookup"><span data-stu-id="d2fba-109">The agents make Windows Integrated Security connections by using this account.</span></span> <span data-ttu-id="d2fba-110">A conta sob a qual o agente executa depende de como o agente é iniciado:</span><span class="sxs-lookup"><span data-stu-id="d2fba-110">The account under which the agent runs depends on how the agent is started:</span></span>  
  
-   <span data-ttu-id="d2fba-111">Iniciando o agente de um trabalho do Agente [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], o padrão: quando um trabalho do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent é usado para iniciar um agente de replicação, o agente executa sob o contexto de uma conta que é especificada quando a replicação é configurada.</span><span class="sxs-lookup"><span data-stu-id="d2fba-111">Starting the agent from a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent job, the default: When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent job is used to start a replication agent, the agent runs under the context of an account that you specify when you configure replication.</span></span> <span data-ttu-id="d2fba-112">Para obter mais informações sobre o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent e replicação, consulte a seção "Segurança do Agente sob SQL Server Agent", mais adiante nesse tópico.</span><span class="sxs-lookup"><span data-stu-id="d2fba-112">For more information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent and replication, see the section "Agent Security under SQL Server Agent" later in this topic.</span></span> <span data-ttu-id="d2fba-113">Para obter informações sobre as permissões necessárias para a conta na qual o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent é executado, consulte [Configurar o SQL Server Agent](../../../ssms/agent/configure-sql-server-agent.md).</span><span class="sxs-lookup"><span data-stu-id="d2fba-113">For information about the permissions that are required for the account under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent runs, see [Configure SQL Server Agent](../../../ssms/agent/configure-sql-server-agent.md).</span></span>  
  
-   <span data-ttu-id="d2fba-114">Iniciando o agente de uma linha de comando do MS-DOS, seja diretamente ou por meio de um script: O agente é executado no contexto da conta do usuário que está executando o agente na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="d2fba-114">Starting the agent from an MS-DOS command line, either directly or through a script: The agent runs under the context of the account of the user that is running the agent at the command line.</span></span>  
  
-   <span data-ttu-id="d2fba-115">Iniciando o agente de um aplicativo que usa objetos RMO ( Replication Management Objects) ou um controle ActiveX: O agente é executado no contexto do aplicativo que está chamando o RMO ou o controle ActiveX.</span><span class="sxs-lookup"><span data-stu-id="d2fba-115">Starting the agent from an application that uses Replication Management Objects (RMO) or an ActiveX control: The agent runs under the context of the application that is calling RMO or the ActiveX control.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d2fba-116">Os controles ActiveX são preteridos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-116">ActiveX controls are deprecated.</span></span>  
  
 <span data-ttu-id="d2fba-117">Recomendamos que as conexões sejam feitas sob o contexto da Segurança Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="d2fba-117">We recommend that connections be made under the context of Windows Integrated Security.</span></span> <span data-ttu-id="d2fba-118">Para compatibilidade com versões anteriores, a Segurança do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] pode ser usada também.</span><span class="sxs-lookup"><span data-stu-id="d2fba-118">For backward compatibility, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Security can also be used.</span></span> <span data-ttu-id="d2fba-119">Para obter mais informações sobre as práticas recomendadas, consulte [Replication Security Best Practices](replication-security-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="d2fba-119">For more information about best practices, see [Replication Security Best Practices](replication-security-best-practices.md).</span></span>  
  
## <a name="permissions-that-are-required-by-agents"></a><span data-ttu-id="d2fba-120">Permissões exigidas pelos agentes</span><span class="sxs-lookup"><span data-stu-id="d2fba-120">Permissions That Are Required by Agents</span></span>  
 <span data-ttu-id="d2fba-121">As contas sob as quais os agentes executam e fazem conexões requerem uma variedade de permissões.</span><span class="sxs-lookup"><span data-stu-id="d2fba-121">The accounts under which agents run and make connections require a variety of permissions.</span></span> <span data-ttu-id="d2fba-122">Essas permissões estão descritas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="d2fba-122">These permissions are described in the following table.</span></span> <span data-ttu-id="d2fba-123">Recomendamos que cada agente execute sob uma conta do Windows diferente, e que a conta deve receber somente as permissões necessárias.</span><span class="sxs-lookup"><span data-stu-id="d2fba-123">We recommend that each agent run under a different Windows account and the account should be granted only the required permissions.</span></span> <span data-ttu-id="d2fba-124">Para obter informações sobre a PAL (lista de acesso à publicação), que são relevantes para vários agentes, consulte [Proteger o Publicador](secure-the-publisher.md).</span><span class="sxs-lookup"><span data-stu-id="d2fba-124">For information about the publication access list (PAL), which is relevant for a number of agents, see [Secure the Publisher](secure-the-publisher.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d2fba-125">O UAC (User Account Control) em alguns sistemas operacionais Windows pode impedir o acesso administrativo ao compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-125">User Account Control (UAC) in some Windows operating systems can prevent administrative access to the snapshot share.</span></span> <span data-ttu-id="d2fba-126">Portanto, você deve conceder permissões de compartilhamento de instantâneos explicitamente às contas do Windows usadas pelo Agente de Instantâneo, pelo Agente de Distribuição, e pelo Agente de Mesclagem.</span><span class="sxs-lookup"><span data-stu-id="d2fba-126">You must therefore explicitly grant snapshot share permissions to the Windows accounts that are used by the Snapshot Agent, Distribution Agent, and Merge Agent.</span></span> <span data-ttu-id="d2fba-127">Faça isso, mesmo se as contas do Windows forem membros do grupo de Administradores.</span><span class="sxs-lookup"><span data-stu-id="d2fba-127">You must do this even if the Windows accounts are members of the Administrators group.</span></span> <span data-ttu-id="d2fba-128">Para obter mais informações, consulte [Proteger a pasta de instantâneos](secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="d2fba-128">For more information, see [Secure the Snapshot Folder](secure-the-snapshot-folder.md).</span></span>  
  
|<span data-ttu-id="d2fba-129">Agente</span><span class="sxs-lookup"><span data-stu-id="d2fba-129">Agent</span></span>|<span data-ttu-id="d2fba-130">Permissões</span><span class="sxs-lookup"><span data-stu-id="d2fba-130">Permissions</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="d2fba-131">Snapshot Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-131">Snapshot Agent</span></span>|<span data-ttu-id="d2fba-132">A conta do Windows sob a qual o agente executa é usada quando fizer conexões ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d2fba-132">The Windows account under which the agent runs is used when it makes connections to the Distributor.</span></span> <span data-ttu-id="d2fba-133">Essa conta deve:</span><span class="sxs-lookup"><span data-stu-id="d2fba-133">This account must:</span></span><br /><br /> <span data-ttu-id="d2fba-134">\- Ser, no mínimo, um membro da função de banco de dados fixa **db_owner** no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-134">-At minimum, be a member of the **db_owner** fixed database role in the distribution database.</span></span><br /><br /> <span data-ttu-id="d2fba-135">\- Ter permissões de leitura, gravação e modificação no compartilhamento de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="d2fba-135">-Have read, write, and modify permissions on the snapshot share.</span></span><br /><br /> <br /><br /> <span data-ttu-id="d2fba-136">A conta usada para conexão com o Publicador deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="d2fba-136">The account that is used to connect to the Publisher must at minimum be a member of the **db_owner** fixed database role in the publication database.</span></span>|  
|<span data-ttu-id="d2fba-137">Agente de Leitor de Log</span><span class="sxs-lookup"><span data-stu-id="d2fba-137">Log Reader Agent</span></span>|<span data-ttu-id="d2fba-138">A conta do Windows sob a qual o agente executa é usada quando fizer conexões ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d2fba-138">The Windows account under which the agent runs is used when it makes connections to the Distributor.</span></span> <span data-ttu-id="d2fba-139">Essa conta deve ser no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-139">This account must at minimum be a member of the **db_owner** fixed database role in the distribution database.</span></span><br /><br /> <span data-ttu-id="d2fba-140">A conta usada para conexão com o Publicador deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="d2fba-140">The account that is used to connect to the Publisher must at minimum be a member of the **db_owner** fixed database role in the publication database.</span></span><br /><br /> <span data-ttu-id="d2fba-141">Ao selecionar as `sync_type` opções *somente suporte de replicação*, *inicializar com backup*ou *inicializar do LSN*, o agente de leitor de log deve ser executado após a execução `sp_addsubscription` , para que os scripts de configuração sejam gravados no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-141">When selecting the `sync_type` options *replication support only*, *initialize with backup*, or *initialize from lsn*, the log reader agent must run after executing `sp_addsubscription`, so that the set-up scripts are written to the distribution database.</span></span> <span data-ttu-id="d2fba-142">O Agente de Leitor de Log deve ser executado sob uma conta que seja membro da função de servidor fixa **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="d2fba-142">The log reader agent must be running under an account that is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="d2fba-143">Quando a `sync_type` opção é definida como *automática*, nenhuma ação especial do agente de leitor de log é necessária.</span><span class="sxs-lookup"><span data-stu-id="d2fba-143">When the `sync_type` option is set to *Automatic*, no special log reader agent actions are required.</span></span>|  
|<span data-ttu-id="d2fba-144">Agente de Distribuição para uma assinatura push</span><span class="sxs-lookup"><span data-stu-id="d2fba-144">Distribution Agent for a push subscription</span></span>|<span data-ttu-id="d2fba-145">A conta do Windows sob a qual o agente executa é usada quando fizer conexões ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d2fba-145">The Windows account under which the agent runs is used when it makes connections to the Distributor.</span></span> <span data-ttu-id="d2fba-146">Essa conta deve:</span><span class="sxs-lookup"><span data-stu-id="d2fba-146">This account must:</span></span><br /><br /> <span data-ttu-id="d2fba-147">\- Ser, no mínimo, um membro da função de banco de dados fixa **db_owner** no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-147">-At minimum be a member of the **db_owner** fixed database role in the distribution database.</span></span><br /><br /> <span data-ttu-id="d2fba-148">\- Ser um membro da PAL.</span><span class="sxs-lookup"><span data-stu-id="d2fba-148">-Be a member of the PAL.</span></span><br /><br /> <span data-ttu-id="d2fba-149">\- Ter permissões de leitura no compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-149">-Have read permissions on the snapshot share.</span></span><br /><br /> <span data-ttu-id="d2fba-150">\- Ter permissões de leitura no diretório de instalação do provedor OLE DB para o Assinante, se a assinatura for um Assinante não SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2fba-150">-Have read permissions on the installation directory of the OLE DB provider for the Subscriber if the subscription is for a non-SQL Server Subscriber.</span></span><br /><br /> <span data-ttu-id="d2fba-151">\- Ao replicar dados LOB, o agente de distribuição deve ter permissões de gravação na pasta **C:\Arquivos de Programas\Microsoft SQL Server\XX\COM** de replicação, em que XX representa a ID da instância.</span><span class="sxs-lookup"><span data-stu-id="d2fba-151">-When replicating LOB data, the distribution agent must have write permissions on the replication **C:\Program Files\Microsoft SQL Server\XX\COMfolder** where XX represents the instanceID.</span></span><br /><br /> <br /><br /> <span data-ttu-id="d2fba-152">A conta usada para conectar-se com o Assinante deverá ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de assinatura, ou ter permissões equivalentes, se a assinatura for um Assinante não SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2fba-152">The account that is used to connect to the Subscriber must at minimum be a member of the **db_owner** fixed database role in the subscription database, or have equivalent permissions if the subscription is for a non-SQL Server Subscriber.</span></span><br /><br /> <span data-ttu-id="d2fba-153">Observação: ao usar `-subscriptionstreams >= 2` o no agente de distribuição, você também deve conceder a `View Server State` permissão nos assinantes para detectar deadlocks.</span><span class="sxs-lookup"><span data-stu-id="d2fba-153">Note: When using `-subscriptionstreams >= 2` on the distribution agent you must also grant the `View Server State` permission on the subscribers to detect deadlocks.</span></span>|  
|<span data-ttu-id="d2fba-154">Distribution Agent para uma assinatura pull</span><span class="sxs-lookup"><span data-stu-id="d2fba-154">Distribution Agent for a pull subscription</span></span>|<span data-ttu-id="d2fba-155">A conta do Windows sob a qual o agente executa é usada quando ele se conecta com o Assinante.</span><span class="sxs-lookup"><span data-stu-id="d2fba-155">The Windows account under which the agent runs is used when it makes connections to the Subscriber.</span></span> <span data-ttu-id="d2fba-156">Essa conta deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="d2fba-156">This account must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span> <span data-ttu-id="d2fba-157">A conta usada para conectar-se ao Distribuidor deve:</span><span class="sxs-lookup"><span data-stu-id="d2fba-157">The account that is used to connect to the Distributor must:</span></span><br /><br /> <span data-ttu-id="d2fba-158">\- Ser um membro da PAL.</span><span class="sxs-lookup"><span data-stu-id="d2fba-158">-Be a member of the PAL.</span></span><br /><br /> <span data-ttu-id="d2fba-159">\- Ter permissões de leitura no compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-159">-Have read permissions on the snapshot share.</span></span><br /><br /> <span data-ttu-id="d2fba-160">\- Ao replicar dados LOB, o agente de distribuição deve ter permissões de gravação na pasta **C:\Arquivos de Programas\Microsoft SQL Server\XX\COM** de replicação, em que XX representa a ID da instância.</span><span class="sxs-lookup"><span data-stu-id="d2fba-160">-When replicating LOB data, the distribution agent must have write permissions on the replication **C:\Program Files\Microsoft SQL Server\XX\COMfolder** where XX represents the instanceID.</span></span><br /><br /> <br /><br /> <span data-ttu-id="d2fba-161">Observação: ao usar `-subscriptionstreams >= 2` o no agente de distribuição, você também deve conceder a `View Server State` permissão nos assinantes para detectar deadlocks.</span><span class="sxs-lookup"><span data-stu-id="d2fba-161">Note: When using `-subscriptionstreams >= 2` on the distribution agent you must also grant the `View Server State` permission on the subscribers to detect deadlocks.</span></span>|  
|<span data-ttu-id="d2fba-162">Merge Agent para uma assinatura push</span><span class="sxs-lookup"><span data-stu-id="d2fba-162">Merge Agent for a push subscription</span></span>|<span data-ttu-id="d2fba-163">A conta do Windows sob a qual o agente executa é usada quando ele se conecta ao Publicador e o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d2fba-163">The Windows account under which the agent runs is used when it makes connections to the Publisher and Distributor.</span></span> <span data-ttu-id="d2fba-164">Essa conta deve:</span><span class="sxs-lookup"><span data-stu-id="d2fba-164">This account must:</span></span><br /><br /> <span data-ttu-id="d2fba-165">\- Ser, no mínimo, um membro da função de banco de dados fixa **db_owner** no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-165">-At minimum be a member of the **db_owner** fixed database role in the distribution database.</span></span><br /><br /> <span data-ttu-id="d2fba-166">\- Ser um membro da PAL.</span><span class="sxs-lookup"><span data-stu-id="d2fba-166">-Be a member of the PAL.</span></span><br /><br /> <span data-ttu-id="d2fba-167">- Ser um logon associado a um usuário no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="d2fba-167">-Be a login that is associated with a user in the publication database.</span></span><br /><br /> <span data-ttu-id="d2fba-168">\- Ter permissões de leitura no compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-168">-Have read permissions on the snapshot share.</span></span><br /><br /> <br /><br /> <span data-ttu-id="d2fba-169">A conta usada para conectar-se ao Assinante deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** ,no banco de dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="d2fba-169">The account used to connect to the Subscriber must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span>|  
|<span data-ttu-id="d2fba-170">Merge Agent para uma assinatura pull</span><span class="sxs-lookup"><span data-stu-id="d2fba-170">Merge Agent for a pull subscription</span></span>|<span data-ttu-id="d2fba-171">A conta do Windows sob a qual o agente executa é usada quando ele se conecta com o Assinante.</span><span class="sxs-lookup"><span data-stu-id="d2fba-171">The Windows account under which the agent runs is used when it makes connections to the Subscriber.</span></span> <span data-ttu-id="d2fba-172">Essa conta deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="d2fba-172">This account must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span> <span data-ttu-id="d2fba-173">A conta usada para conectar-se ao Publicador e o Distribuidor deve:</span><span class="sxs-lookup"><span data-stu-id="d2fba-173">The account that is used to connect to the Publisher and Distributor must:</span></span><br /><br /> <span data-ttu-id="d2fba-174">\- Ser um membro da PAL.</span><span class="sxs-lookup"><span data-stu-id="d2fba-174">-Be a member of the PAL.</span></span><br /><br /> <span data-ttu-id="d2fba-175">- Ser um logon associado a um usuário no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="d2fba-175">-Be a login associated with a user in the publication database.</span></span><br /><br /> <span data-ttu-id="d2fba-176">\- Ser um logon associado a um usuário no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-176">-Be a login associated with a user in the distribution database.</span></span> <span data-ttu-id="d2fba-177">O usuário pode ser o usuário `Guest`.</span><span class="sxs-lookup"><span data-stu-id="d2fba-177">The user can be the `Guest` user.</span></span><br /><br /> <span data-ttu-id="d2fba-178">\- Ter permissões de leitura no compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-178">-Have read permissions on the snapshot share.</span></span>|  
|<span data-ttu-id="d2fba-179">Queue Reader Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-179">Queue Reader Agent</span></span>|<span data-ttu-id="d2fba-180">A conta do Windows sob a qual o agente executa é usada quando fizer conexões ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d2fba-180">The Windows account under which the agent runs is used when it makes connections to the Distributor.</span></span> <span data-ttu-id="d2fba-181">Essa conta deve ser no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="d2fba-181">This account must at minimum be a member of the **db_owner** fixed database role in the distribution database.</span></span><br /><br /> <span data-ttu-id="d2fba-182">A conta usada para conexão com o Publicador deve ser, no mínimo, um membro da função de banco de dados fixa **db_owner** , no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="d2fba-182">The account that is used to connect to the Publisher must at minimum be a member of the **db_owner** fixed database role in the publication database.</span></span><br /><br /> <span data-ttu-id="d2fba-183">A conta usada para se conectar ao Assinante deve ser no mínimo um membro da função de banco de dados fixa **db_owner** , no banco de dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="d2fba-183">The account that is used to connect to the Subscriber must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span>|  
  
## <a name="agent-security-under-sql-server-agent"></a><span data-ttu-id="d2fba-184">Segurança do agente sob o SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-184">Agent Security Under SQL Server Agent</span></span>  
 <span data-ttu-id="d2fba-185">Ao configurar a replicação usando o [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], procedimentos [!INCLUDE[tsql](../../../includes/tsql-md.md)] ou RMO, um trabalho do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent é criado, por padrão, para cada agente.</span><span class="sxs-lookup"><span data-stu-id="d2fba-185">When you configure replication by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)] procedures, or RMO, a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent job is created by default for each agent.</span></span> <span data-ttu-id="d2fba-186">Os agentes executam sob o contexto de uma etapa de trabalho, independentemente de a execução ser contínua, por agendamento ou sob demanda.</span><span class="sxs-lookup"><span data-stu-id="d2fba-186">Agents then run under the context of a job step, regardless of whether they run continuously, on a schedule, or on demand.</span></span> <span data-ttu-id="d2fba-187">Esses trabalhos podem ser visualizados na pasta **Trabalhos** , no [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d2fba-187">You can view these jobs under the **Jobs** folder in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="d2fba-188">A tabela a seguir lista o nome dos trabalhos.</span><span class="sxs-lookup"><span data-stu-id="d2fba-188">The following table lists the job names.</span></span>  
  
|<span data-ttu-id="d2fba-189">Agente</span><span class="sxs-lookup"><span data-stu-id="d2fba-189">Agent</span></span>|<span data-ttu-id="d2fba-190">Nome do trabalho</span><span class="sxs-lookup"><span data-stu-id="d2fba-190">Job name</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="d2fba-191">Snapshot Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-191">Snapshot Agent</span></span>|**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<integer>**|  
|<span data-ttu-id="d2fba-192">Snapshot Agent para uma partição de publicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="d2fba-192">Snapshot Agent for a merge publication partition</span></span>|<span data-ttu-id="d2fba-193">**Dyn_\<Publisher>-\<PublicationDatabase>-\<Publication>-\<GUID>**</span><span class="sxs-lookup"><span data-stu-id="d2fba-193">**Dyn_\<Publisher>-\<PublicationDatabase>-\<Publication>-\<GUID>**</span></span>|  
|<span data-ttu-id="d2fba-194">Agente de Leitor de Log</span><span class="sxs-lookup"><span data-stu-id="d2fba-194">Log Reader Agent</span></span>|**\<Publisher>-\<PublicationDatabase>-\<integer>**|  
|<span data-ttu-id="d2fba-195">Merge Agent para assinaturas pull</span><span class="sxs-lookup"><span data-stu-id="d2fba-195">Merge Agent for pull subscriptions</span></span>|**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<SubscriptionDatabase>-\<integer>**|  
|<span data-ttu-id="d2fba-196">Merge Agent para assinaturas push</span><span class="sxs-lookup"><span data-stu-id="d2fba-196">Merge Agent for push subscriptions</span></span>|**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<integer>**|  
|<span data-ttu-id="d2fba-197">Distribution Agent para assinaturas push</span><span class="sxs-lookup"><span data-stu-id="d2fba-197">Distribution Agent for push subscriptions</span></span>|<span data-ttu-id="d2fba-198">**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<integer>** <sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="d2fba-198">**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<integer>** <sup>1</sup></span></span>|  
|<span data-ttu-id="d2fba-199">Distribution Agent para assinaturas pull</span><span class="sxs-lookup"><span data-stu-id="d2fba-199">Distribution Agent for pull subscriptions</span></span>|<span data-ttu-id="d2fba-200">**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<SubscriptionDatabase>-\<GUID>** <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="d2fba-200">**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<SubscriptionDatabase>-\<GUID>** <sup>2</sup></span></span>|  
|<span data-ttu-id="d2fba-201">Distribution Agent para assinaturas push para Assinantes não SQL Server</span><span class="sxs-lookup"><span data-stu-id="d2fba-201">Distribution Agent for push subscriptions to non-SQL Server Subscribers</span></span>|**\<Publisher>-\<PublicationDatabase>-\<Publication>-\<Subscriber>-\<integer>**|  
|<span data-ttu-id="d2fba-202">Queue Reader Agent</span><span class="sxs-lookup"><span data-stu-id="d2fba-202">Queue Reader Agent</span></span>|<span data-ttu-id="d2fba-203">**[\<Distributor>].\<integer>**</span><span class="sxs-lookup"><span data-stu-id="d2fba-203">**[\<Distributor>].\<integer>**</span></span>|  
  
 <span data-ttu-id="d2fba-204"><sup>1</sup> para assinaturas push para publicações Oracle, o nome do trabalho é \* \* \<Publisher> - \<Publisher**> em vez de **\<Publisher>-\<PublicationDatabase>** .</span><span class="sxs-lookup"><span data-stu-id="d2fba-204"><sup>1</sup> For push subscriptions to Oracle publications, the job name is \*\*\<Publisher>-\<Publisher**> instead of **\<Publisher>-\<PublicationDatabase>**.</span></span>  
  
 <span data-ttu-id="d2fba-205"><sup>2</sup> para assinaturas pull para publicações Oracle, o nome do trabalho é \* \* \<Publisher> - \<DistributionDatabase**> em vez de **\<Publisher>-\<PublicationDatabase>** .</span><span class="sxs-lookup"><span data-stu-id="d2fba-205"><sup>2</sup> For pull subscriptions to Oracle publications, the job name is \*\*\<Publisher>-\<DistributionDatabase**> instead of **\<Publisher>-\<PublicationDatabase>**.</span></span>  
  
 <span data-ttu-id="d2fba-206">Ao configurar a replicação, você especifica as contas sob as quais os agentes devem executar.</span><span class="sxs-lookup"><span data-stu-id="d2fba-206">When you configure replication, you specify accounts under which agents should run.</span></span> <span data-ttu-id="d2fba-207">Porém, todas as etapas do trabalho executam sob o contexto de segurança de um *proxy*; portanto, a replicação realiza internamente os seguintes mapeamentos para as contas de agentes que você especificar:</span><span class="sxs-lookup"><span data-stu-id="d2fba-207">However, all job steps run under the security context of a *proxy*; therefore, replication performs the following mappings internally for the agent accounts that you specify:</span></span>  
  
-   <span data-ttu-id="d2fba-208">A conta é mapeada primeiro para uma credencial usando a instrução [!INCLUDE[tsql](../../../includes/tsql-md.md)] [CREATE CREDENTIAL](/sql/t-sql/statements/create-credential-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d2fba-208">The account is first mapped to a credential by using the [!INCLUDE[tsql](../../../includes/tsql-md.md)] [CREATE CREDENTIAL](/sql/t-sql/statements/create-credential-transact-sql) statement.</span></span> <span data-ttu-id="d2fba-209">Os proxies do[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent usam credenciais para armazenar informações sobre as contas de usuário do Windows.</span><span class="sxs-lookup"><span data-stu-id="d2fba-209">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxies use credentials to store information about Windows user accounts.</span></span>  
  
-   <span data-ttu-id="d2fba-210">O procedimento armazenado [sp_add_proxy](/sql/relational-databases/system-stored-procedures/sp-add-proxy-transact-sql) é chamado e a credencial é usada para criar um proxy.</span><span class="sxs-lookup"><span data-stu-id="d2fba-210">The [sp_add_proxy](/sql/relational-databases/system-stored-procedures/sp-add-proxy-transact-sql) stored procedure is called, and the credential is used to create a proxy..</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d2fba-211">Essas informações são fornecidas para auxiliar a entender o que está envolvido na execução de agentes com o contexto de segurança adequado.</span><span class="sxs-lookup"><span data-stu-id="d2fba-211">This information is provided to help you understand what is involved in running agents with the appropriate security context.</span></span> <span data-ttu-id="d2fba-212">Você não deve interagir diretamente com as credenciais ou com os proxies que foram criados.</span><span class="sxs-lookup"><span data-stu-id="d2fba-212">You should not have to interact directly with the credentials or proxies that have been created.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d2fba-213">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d2fba-213">See Also</span></span>  
 <span data-ttu-id="d2fba-214">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="d2fba-214">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 <span data-ttu-id="d2fba-215">[Segurança de Replicação do SQL Server](view-and-modify-replication-security-settings.md) </span><span class="sxs-lookup"><span data-stu-id="d2fba-215">[SQL Server Replication Security](view-and-modify-replication-security-settings.md) </span></span>  
 [<span data-ttu-id="d2fba-216">Proteger a pasta de instantâneos</span><span class="sxs-lookup"><span data-stu-id="d2fba-216">Secure the Snapshot Folder</span></span>](secure-the-snapshot-folder.md)  
  
  
