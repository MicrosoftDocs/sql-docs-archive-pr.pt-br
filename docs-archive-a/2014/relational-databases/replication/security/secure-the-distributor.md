---
title: Proteger o Distribuidor | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- security [SQL Server replication], Distributors
- Distributors [SQL Server replication], security
ms.assetid: 76d78229-0ff2-4aa4-9b4e-ad97534c5296
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d55f5e214f89b678367124da8342ec9801ab686a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87568436"
---
# <a name="secure-the-distributor"></a><span data-ttu-id="d4b20-102">Proteger o distribuidor</span><span class="sxs-lookup"><span data-stu-id="d4b20-102">Secure the Distributor</span></span>
  <span data-ttu-id="d4b20-103">Os agentes de replicação a seguir se conectam ao Distribuidor: o Agente de Leitor de Log, Agente de Instantâneo, Agente de Leitor de Fila, Agente de Distribuição e Agente de Mesclagem.</span><span class="sxs-lookup"><span data-stu-id="d4b20-103">The following replication agents connect to the Distributor: the Log Reader Agent, Snapshot Agent, Queue Reader Agent, Distribution Agent, and Merge Agent.</span></span> <span data-ttu-id="d4b20-104">É importante fornecer um logon adequado para cada um desses agentes e seguir o princípio de conceder o mínimo possível de direitos necessários e de proteger também o armazenamento de todas as senhas:</span><span class="sxs-lookup"><span data-stu-id="d4b20-104">It is important to provide an appropriate login for each of these agents while following the principle of granting the minimal rights necessary and also protecting the storage of all passwords:</span></span>  
  
-   <span data-ttu-id="d4b20-105">Para obter mais informações sobre como gerenciar logons e senhas, consulte [Gerenciar logons e senhas na Replicação](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span><span class="sxs-lookup"><span data-stu-id="d4b20-105">For information about managing logins and passwords, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
-   <span data-ttu-id="d4b20-106">Para obter informações detalhadas sobre as permissões requeridas por cada agente, consulte [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="d4b20-106">For detailed information about the permissions required for each agent, see [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
 <span data-ttu-id="d4b20-107">Além de gerenciar os logons e as senhas adequadamente, é importante entender a função do link **repl_distributor** do servidor remoto e a conta **distributor_admin** .</span><span class="sxs-lookup"><span data-stu-id="d4b20-107">In addition to managing logins and passwords appropriately, it is important to understand the role of the **repl_distributor** remote server link and the **distributor_admin** account.</span></span>  
  
## <a name="securing-the-connection-from-the-publisher-to-the-distributor"></a><span data-ttu-id="d4b20-108">Protegendo a conexão do Publicador com o Distribuidor</span><span class="sxs-lookup"><span data-stu-id="d4b20-108">Securing the Connection from the Publisher to the Distributor</span></span>  
 <span data-ttu-id="d4b20-109">Para dar suporte à comunicação necessária quando os procedimentos administrativos armazenados são executados no Publicador e as informações são atualizadas no Distribuidor, a replicação configura automaticamente o servidor remoto **repl_distributor**.</span><span class="sxs-lookup"><span data-stu-id="d4b20-109">To support the communication necessary when administrative stored procedures execute at the Publisher and update information at the Distributor, replication automatically configures the remote server **repl_distributor**.</span></span> <span data-ttu-id="d4b20-110">A entrada do servidor remoto **repl_distributor** é usada na comunicação com o banco de dados de distribuição, independentemente de o banco de dados estar incluído na instância do Publicador (um Distribuidor local) ou residir em uma instância remota do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (um Distribuidor remoto).</span><span class="sxs-lookup"><span data-stu-id="d4b20-110">The **repl_distributor** remote server entry is used for communication to the distribution database regardless of whether the distribution database is contained within the Publisher instance (a local Distributor) or resides within a remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance (a remote Distributor).</span></span>  
  
 <span data-ttu-id="d4b20-111">Quando o banco de dados de distribuição é incluído em uma instância local, uma senha aleatória é gerada e configurada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="d4b20-111">When the distribution database is contained on a local instance, a random password is generated and configured automatically.</span></span> <span data-ttu-id="d4b20-112">Quando o banco de dados de distribuição estiver localizado em uma instância remota, o administrador configurará uma senha compartilhada durante a instalação do Publicador e do Distribuidor; essa senha, então, será usada para fornecer a autenticação do tráfego que atravessa o link **repl_distributor** .</span><span class="sxs-lookup"><span data-stu-id="d4b20-112">When the distribution database is located on a remote instance, the administrator configures a shared password during setup of the Publisher and Distributor; this password is then used to provide authentication of traffic that traverses the **repl_distributor** link.</span></span>  
  
 <span data-ttu-id="d4b20-113">O Distribuidor usa a entrada **repl_distributor** do servidor remoto para verificar se o servidor que efetua a chamada está configurado como um Publicador no Distribuidor, valida a senha fornecida pelo Publicador e valida que o procedimento armazenado seja um procedimento de replicação armazenado durante a execução.</span><span class="sxs-lookup"><span data-stu-id="d4b20-113">The Distributor uses the **repl_distributor** remote server entry to verify that the calling server is configured as a Publisher at the Distributor, validates the password supplied by the Publisher, and validates that the stored procedure is a replication stored procedure during execution.</span></span>  
  
 <span data-ttu-id="d4b20-114">A senha configurada para a entrada **repl_distributor** do servidor remoto durante a instalação é associada a um logon do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], **distributor_admin**, que é adicionado à função de servidor fixa **sysadmin** no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d4b20-114">The password configured for the **repl_distributor** remote server entry during setup is associated with a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login, **distributor_admin**, which is added to the **sysadmin** fixed server role at the Distributor.</span></span> <span data-ttu-id="d4b20-115">O logon **distributor_admin** é usado pelos procedimentos de replicação armazenados na conexão com o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d4b20-115">The **distributor_admin** login is used by replication stored procedures when connecting to the Distributor.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d4b20-116">Não altere manualmente a senha para o **distributor_admin** .</span><span class="sxs-lookup"><span data-stu-id="d4b20-116">Do not change the password for the **distributor_admin** manually.</span></span> <span data-ttu-id="d4b20-117">Use sempre o procedimento armazenado **sp_changedistributor_password** , ou as caixas de diálogo **Propriedades do Distribuidor** ou **Atualizar Senhas de Replicação** no [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], pois as alterações de senhas serão então aplicadas automaticamente às publicações locais.</span><span class="sxs-lookup"><span data-stu-id="d4b20-117">Always use the **sp_changedistributor_password** stored procedure, or the **Distributor Properties** or **Update Replication Passwords** dialog boxes in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], because password changes are then applied to local publications automatically.</span></span>  
  
## <a name="snapshot-folder-security"></a><span data-ttu-id="d4b20-118">Segurança da pasta de instantâneos</span><span class="sxs-lookup"><span data-stu-id="d4b20-118">Snapshot Folder Security</span></span>  
 <span data-ttu-id="d4b20-119">Certifique-se de que o compartilhamento de instantâneos tenha acesso de leitura para a conta sob a qual o Agente de Mesclagem (para replicação de mesclagem) ou o Agente de Distribuição (para replicação transacional ou de instantâneos) executa, e acesso de gravação concedido à conta sob a qual o Agente de Instantâneo executa.</span><span class="sxs-lookup"><span data-stu-id="d4b20-119">Ensure that the snapshot share has read access granted to the account under which the Merge Agent (for merge replication) or Distribution Agent (for snapshot or transactional replication) runs and write access granted to the account under which the Snapshot Agent runs.</span></span> <span data-ttu-id="d4b20-120">Para obter mais informações sobre a pasta de instantâneos, consulte [Proteger a pasta de instantâneos](secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="d4b20-120">For more information about the snapshot folder, see [Secure the Snapshot Folder](secure-the-snapshot-folder.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d4b20-121">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d4b20-121">See Also</span></span>  
 <span data-ttu-id="d4b20-122">[Exibir e modificar configurações de segurança de replicação](view-and-modify-replication-security-settings.md) </span><span class="sxs-lookup"><span data-stu-id="d4b20-122">[View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md) </span></span>  
 <span data-ttu-id="d4b20-123">[Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="d4b20-123">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="d4b20-124">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="d4b20-124">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="d4b20-125">Segurança de Replicação do SQL Server</span><span class="sxs-lookup"><span data-stu-id="d4b20-125">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
