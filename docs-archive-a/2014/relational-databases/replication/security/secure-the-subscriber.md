---
title: Proteger o assinante | Microsoft Docs
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- subscriptions [SQL Server replication], security
- Subscribers [SQL Server replication], security
- security [SQL Server replication], Subscribers
ms.assetid: c8f0d62a-8b5d-4a21-9aec-223da52bb708
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1f03b9a202c3c49f147368460518a579f28dc850
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87576273"
---
# <a name="secure-the-subscriber"></a><span data-ttu-id="d6edd-102">Proteger o Assinante</span><span class="sxs-lookup"><span data-stu-id="d6edd-102">Secure the Subscriber</span></span>
  <span data-ttu-id="d6edd-103">Agentes de mesclagem e agentes de distribuição que conectam ao assinante.</span><span class="sxs-lookup"><span data-stu-id="d6edd-103">Merge Agents and Distribution Agents connect to the Subscriber.</span></span> <span data-ttu-id="d6edd-104">Essas conexões podem ser feitas no contexto de um logon do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ou de um logon do Windows.</span><span class="sxs-lookup"><span data-stu-id="d6edd-104">These connections can be made under the context of a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login or a Windows login.</span></span> <span data-ttu-id="d6edd-105">É importante fornecer um logon adequado para cada um desses agentes e seguir o princípio de conceder o mínimo possível de direitos, e, também proteger o armazenamento de todas as senhas.</span><span class="sxs-lookup"><span data-stu-id="d6edd-105">It is important to provide an appropriate login for these agents while following the principle of granting the minimal rights necessary and also protecting the storage of all passwords.</span></span> <span data-ttu-id="d6edd-106">Para obter informações sobre as permissões exigidas para cada agente, consulte [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-106">For information about the permissions required for each agent, see [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
## <a name="distribution-agent"></a><span data-ttu-id="d6edd-107">Agente de Distribuição</span><span class="sxs-lookup"><span data-stu-id="d6edd-107">Distribution Agent</span></span>  
 <span data-ttu-id="d6edd-108">Há um Agente de Distribuição por assinatura (um agente independente, o padrão para publicações criadas no Assistente para Nova Publicação) ou um Agente de Distribuição por par composto por banco de dados de publicação e banco de dados de assinatura (um agente compartilhado).</span><span class="sxs-lookup"><span data-stu-id="d6edd-108">There is either one Distribution Agent per subscription (an independent agent, the default for publications created in the New Publication Wizard) or one Distribution Agent per publication database and subscription database pair (a shared agent).</span></span> <span data-ttu-id="d6edd-109">T</span><span class="sxs-lookup"><span data-stu-id="d6edd-109">T</span></span>  
  
 <span data-ttu-id="d6edd-110">Para especificar informações de conexão para assinaturas push, consulte [Criar uma assinatura push](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-110">To specify connection information for push subscriptions, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
 <span data-ttu-id="d6edd-111">Para especificar informações de conexão para assinaturas pull, consulte [Criar uma assinatura pull](../create-a-pull-subscription.md)</span><span class="sxs-lookup"><span data-stu-id="d6edd-111">To specify connection information for pull subscriptions, see [Create a Pull Subscription](../create-a-pull-subscription.md)</span></span>  
  
## <a name="merge-agent"></a><span data-ttu-id="d6edd-112">Merge Agent</span><span class="sxs-lookup"><span data-stu-id="d6edd-112">Merge Agent</span></span>  
 <span data-ttu-id="d6edd-113">Cada assinatura de mesclagem possui seu próprio Agente de Mesclagem que se conecta e atualiza ambos, o Publicador e o Assinante.</span><span class="sxs-lookup"><span data-stu-id="d6edd-113">Each merge subscription has its own Merge Agent that connects to and updates both the Publisher and the Subscriber.</span></span>  
  
 <span data-ttu-id="d6edd-114">Para especificar informações de conexão para assinaturas push, consulte [Criar uma assinatura push](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-114">To specify connection information for push subscriptions, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
 <span data-ttu-id="d6edd-115">Para especificar informações de conexão para assinaturas pull, consulte [Criar uma assinatura pull](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-115">To specify connection information for pull subscriptions, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
## <a name="immediate-updating-subscriptions"></a><span data-ttu-id="d6edd-116">Assinaturas de atualização imediata</span><span class="sxs-lookup"><span data-stu-id="d6edd-116">Immediate Updating Subscriptions</span></span>  
 <span data-ttu-id="d6edd-117">Quando configurar uma assinatura de atualização imediata, especifique uma conta no Assinante na qual as conexões com o Publicador são realizadas.</span><span class="sxs-lookup"><span data-stu-id="d6edd-117">When you configure an immediate updating subscription, you specify an account at the Subscriber under which connections to the Publisher are made.</span></span> <span data-ttu-id="d6edd-118">Conexões são usadas pelos gatilhos acionados no Assinante e que propagam as alterações no Publicador.</span><span class="sxs-lookup"><span data-stu-id="d6edd-118">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="d6edd-119">Há três opções disponíveis para o tipo de conexão:</span><span class="sxs-lookup"><span data-stu-id="d6edd-119">There are three options available for the type of connection:</span></span>  
  
-   <span data-ttu-id="d6edd-120">Um servidor vinculado que a replicação cria; a conexão é feita com as credenciais que você especifica durante a configuração.</span><span class="sxs-lookup"><span data-stu-id="d6edd-120">A linked server that replication creates; the connection is made with the credentials you specify at configuration time.</span></span>  
  
-   <span data-ttu-id="d6edd-121">Um servidor vinculado que a replicação cria; a conexão é feita com as credenciais do usuário que faz a alteração no Assinante.</span><span class="sxs-lookup"><span data-stu-id="d6edd-121">A linked server that replication creates; the connection is made with the credentials of the user making the change at the Subscriber.</span></span>  
  
-   <span data-ttu-id="d6edd-122">Um servidor vinculado ou remoto que você já definiu.</span><span class="sxs-lookup"><span data-stu-id="d6edd-122">A linked server or remote server that you have already defined.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d6edd-123">Para especificar as informações de conexão, use o procedimento armazenado [sp_link_publication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d6edd-123">To specify connection information, use the stored procedure [sp_link_publication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="d6edd-124">Você também pode usar a página **Logon para Assinaturas Atualizáveis** do Assistente para Nova Assinatura, chamada **sp_link_publication**.</span><span class="sxs-lookup"><span data-stu-id="d6edd-124">You can also use the **Login for Updatable Subscriptions** page of the New Subscription Wizard, which calls **sp_link_publication**.</span></span> <span data-ttu-id="d6edd-125">Em certas condições, esse procedimento armazenado pode falhar se o Assinante estiver executando o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Service Pack 1(SP1) ou versão posterior e o Publicador estiver executando uma versão anterior.</span><span class="sxs-lookup"><span data-stu-id="d6edd-125">Under certain conditions, this stored procedure can fail if the Subscriber is running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Service Pack 1 (SP1) or later, and the Publisher is running an earlier version.</span></span> <span data-ttu-id="d6edd-126">Se o procedimento armazenado falhar nesse cenário, atualize o Publicador para o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] SP1 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="d6edd-126">If the stored procedure fails in this scenario, upgrade the Publisher to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] SP1 or later.</span></span>  
  
 <span data-ttu-id="d6edd-127">Para obter mais informações, consulte [Criar uma assinatura atualizável em uma publicação transacional](../publish/create-an-updatable-subscription-to-a-transactional-publication.md) e [Exibir e modificar as configurações de segurança de replicação](view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-127">For more information, see [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md) and [View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d6edd-128">A conta especificada para a conexão só deve receber permissão para inserir, atualizar e excluir dados nas exibições criadas pela replicação no banco de dados de publicação; nenhuma permissão adicional será dada.</span><span class="sxs-lookup"><span data-stu-id="d6edd-128">The account specified for the connection should only be granted permission to insert, update, and delete data on the views that replication creates in the publication database; it should not be given any additional permissions.</span></span> <span data-ttu-id="d6edd-129">Conceda permissões nas exibições do banco de dados de publicação que são denominadas no formato **syncobj_** _\<HexadecimalNumber>_ para a conta configurada em cada Assinante.</span><span class="sxs-lookup"><span data-stu-id="d6edd-129">Grant permissions on views in the publication database that are named in the form **syncobj_**_\<HexadecimalNumber>_ to the account you configured at each Subscriber.</span></span>  
  
## <a name="queued-updating-subscriptions"></a><span data-ttu-id="d6edd-130">Assinaturas de atualização em fila</span><span class="sxs-lookup"><span data-stu-id="d6edd-130">Queued Updating Subscriptions</span></span>  
 <span data-ttu-id="d6edd-131">Quando você configurar assinatura de atualização em fila, há duas áreas a considerar relacionadas a segurança:</span><span class="sxs-lookup"><span data-stu-id="d6edd-131">When you configure queued updating subscriptions, there are two areas to keep in mind that relate to security:</span></span>  
  
-   <span data-ttu-id="d6edd-132">Há só um Agente de Leitor de Fila para cada Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="d6edd-132">There is only one Queue Reader Agent for each Distributor.</span></span> <span data-ttu-id="d6edd-133">Recomenda-se que para cada Distribuidor, você configure, no máximo uma publicação que esteja habilitada para assinaturas de atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="d6edd-133">It is recommended that for each Distributor, you configure at most one publication that is enabled for queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="d6edd-134">O agente do Queue Reader faz conexões com o Distribuidor, Publicador e cada Assinante:</span><span class="sxs-lookup"><span data-stu-id="d6edd-134">The Queue Reader agent makes connections to the Distributor, Publisher, and each Subscriber:</span></span>  
  
    -   <span data-ttu-id="d6edd-135">A conta na qual o agente executa e faz as conexões para o Distribuidor é especificada quando você criar o agente (se usar o Assistente para Nova Publicação, o agente é criado quando você criar uma publicação habilitada para assinaturas de atualização ).</span><span class="sxs-lookup"><span data-stu-id="d6edd-135">The account under which the agent runs and makes connections to the Distributor is specified when you create the agent (if you use the New Publication Wizard, the agent is created when you create a publication that is enabled for updating subscriptions).</span></span>  
  
    -   <span data-ttu-id="d6edd-136">A conta na qual o agente faz as conexões com o Publicador é especificada quando você configura a distribuição para o Publicador.</span><span class="sxs-lookup"><span data-stu-id="d6edd-136">The account under which the agent makes connections to the Publisher is specified when you configure distribution for a Publisher.</span></span> <span data-ttu-id="d6edd-137">Especifique a conta de Windows na qual o agente executará ou uma conta [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d6edd-137">Specify the Windows account under which the agent runs or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account.</span></span>  
  
    -   <span data-ttu-id="d6edd-138">A conta na qual o agente faz conexões com o Assinante é especificada quando você cria a assinatura.</span><span class="sxs-lookup"><span data-stu-id="d6edd-138">The account under which the agent makes connections to the Subscriber is specified when you create the subscription.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d6edd-139">Use a Autenticação [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para conexões com os Assinantes e especifique uma conta diferente para a conexão com cada Assinante.</span><span class="sxs-lookup"><span data-stu-id="d6edd-139">Use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication for connections to Subscribers, and specify a different account for the connection to each Subscriber.</span></span> <span data-ttu-id="d6edd-140">Se usar uma assinatura pull, a replicação sempre define a conexão a ser usada com a Autenticação do Windows (em assinaturas pull, a replicação não pode acessar metadados no Assinante com a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="d6edd-140">If you use a pull subscription, replication always sets the connection to use Windows Authentication (for pull subscriptions, replication cannot access metadata at the Subscriber required to use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication).</span></span> <span data-ttu-id="d6edd-141">Nesse caso, altere a conexão para usar a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] depois que a assinatura for configurada.</span><span class="sxs-lookup"><span data-stu-id="d6edd-141">In this case, change the connection to use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication after the subscription is configured.</span></span>  
  
     <span data-ttu-id="d6edd-142">Para obter mais informações, confira Como criar uma assinatura de atualização a uma publicação transacional (SQL Server Management Studio) e [Exibir e modificar as configurações de segurança de replicação](view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="d6edd-142">For more information, see How to: Create an Updating Subscription to a Transactional Publication (SQL Server Management Studio) and [View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d6edd-143">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d6edd-143">See Also</span></span>  
 <span data-ttu-id="d6edd-144">[Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="d6edd-144">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="d6edd-145">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="d6edd-145">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="d6edd-146">Segurança de Replicação do SQL Server</span><span class="sxs-lookup"><span data-stu-id="d6edd-146">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
