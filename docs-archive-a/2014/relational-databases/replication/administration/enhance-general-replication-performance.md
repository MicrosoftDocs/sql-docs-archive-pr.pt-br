---
title: Aprimorar o desempenho de replicação geral | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], design and performance
- designing databases [SQL Server], replication performance
- Snapshot Agent, performance
- snapshots [SQL Server replication], performance considerations
- merge replication performance [SQL Server replication]
- snapshot replication [SQL Server], performance
- subscriptions [SQL Server replication], performance considerations
- agents [SQL Server replication], performance
- performance [SQL Server replication], general considerations
- transactional replication, performance
ms.assetid: 895b1ad7-ffb9-4a5c-bda6-e1dfbd56d9bf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0a85519a947e7d5d03f324b71984d2ffb40bcefe
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685585"
---
# <a name="enhance-general-replication-performance"></a><span data-ttu-id="4acab-102">Aprimorar o desempenho geral da replicação</span><span class="sxs-lookup"><span data-stu-id="4acab-102">Enhance General Replication Performance</span></span>
  <span data-ttu-id="4acab-103">É possível melhorar o desempenho geral para todos os tipos de replicação no seu aplicativo e na rede, por meio das diretrizes descritas neste tópico.</span><span class="sxs-lookup"><span data-stu-id="4acab-103">You can enhance the general performance for all types of replication in your application and on your network by using the guidelines described in this topic.</span></span>  
  
## <a name="server-and-network"></a><span data-ttu-id="4acab-104">Servidor e rede</span><span class="sxs-lookup"><span data-stu-id="4acab-104">Server and Network</span></span>  
  
-   <span data-ttu-id="4acab-105">Defina a quantidade mínima e máxima de memória alocada para [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4acab-105">Set the minimum and maximum amount of memory allocated to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span></span>  
  
     <span data-ttu-id="4acab-106">Por padrão, o [!INCLUDE[ssDE](../../../includes/ssde-md.md)] altera seus requisitos de memória dinamicamente com base nos recursos do sistema disponíveis.</span><span class="sxs-lookup"><span data-stu-id="4acab-106">By default, the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] changes its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="4acab-107">Para evitar baixa disponibilidade de memória durante as atividades de replicação, use a opção **min server memory** para definir a mínima memória disponível.</span><span class="sxs-lookup"><span data-stu-id="4acab-107">To avoid low memory availability during replication activities, use the **min server memory** option to set the minimum available memory.</span></span> <span data-ttu-id="4acab-108">Para evitar que o sistema operacional busque memória no disco, você também pode definir a quantidade máxima de memória com a opção **max server memory** .</span><span class="sxs-lookup"><span data-stu-id="4acab-108">To avoid having the operating system page to disc for memory, you can also set a maximum amount of memory with the **max server memory** option.</span></span> <span data-ttu-id="4acab-109">Para mais informações, consulte [Opções de configuração do servidor da memória do servidor](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-109">For more information, see [Server Memory Server Configuration Options](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span></span>  
  
-   <span data-ttu-id="4acab-110">Assegure alocação adequada de arquivos de dados de banco de dados e arquivos de log.</span><span class="sxs-lookup"><span data-stu-id="4acab-110">Ensure proper allocation of database data files and log files.</span></span> <span data-ttu-id="4acab-111">Use uma unidade de disco separada para o log de transação para todos os bancos de dados envolvidos na replicação.</span><span class="sxs-lookup"><span data-stu-id="4acab-111">Use a separate disk drive for the transaction log for all databases involved in replication.</span></span>  
  
     <span data-ttu-id="4acab-112">É possível diminuir o tempo de gravação das transações armazenando os arquivos de log em uma unidade de disco diferente da usada para armazenar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4acab-112">You can decrease the time it takes to write transactions by storing the log files on a disk drive different than the one used to store the database.</span></span> <span data-ttu-id="4acab-113">É possível espelhar aquela unidade, usando um RAID (Arranjo Redundante de Discos Baratos)-1, se for necessária tolerância a falhas.</span><span class="sxs-lookup"><span data-stu-id="4acab-113">You can mirror that drive, using a Redundant Array of Inexpensive Disks (RAID)-1, if you require fault tolerance.</span></span> <span data-ttu-id="4acab-114">Use RAID 0 ou 0+1 (dependendo de sua necessidade por tolerância a falhas) para outros arquivos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4acab-114">Use RAID 0 or 0+1 (depending on your need for fault tolerance) for other database files.</span></span> <span data-ttu-id="4acab-115">Essa é uma prática boa que independe do uso da replicação.</span><span class="sxs-lookup"><span data-stu-id="4acab-115">This is a good practice regardless of whether or not replication is being used.</span></span>  
  
-   <span data-ttu-id="4acab-116">Considere a adição de memória a servidores usados na replicação, particularmente o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="4acab-116">Consider adding memory to servers used in replication, particularly the Distributor.</span></span>  
  
-   <span data-ttu-id="4acab-117">Use computadores com multiprocessadores.</span><span class="sxs-lookup"><span data-stu-id="4acab-117">Use multiprocessor computers.</span></span>  
  
     <span data-ttu-id="4acab-118">Os agentes de replicação podem tirar proveito de processadores adicionais no servidor.</span><span class="sxs-lookup"><span data-stu-id="4acab-118">Replication agents can take advantage of additional processors on the server.</span></span> <span data-ttu-id="4acab-119">Se estiver trabalhando com alto uso de CPU, considere a instalação de uma CPU mais rápida ou de várias CPUs.</span><span class="sxs-lookup"><span data-stu-id="4acab-119">If you are running at high CPU usage, consider installing a faster CPU or multiple CPUs.</span></span>  
  
-   <span data-ttu-id="4acab-120">Use uma rede rápida.</span><span class="sxs-lookup"><span data-stu-id="4acab-120">Use a fast network.</span></span>  
  
     <span data-ttu-id="4acab-121">A rede pode ser um gargalo de desempenho significante, particularmente para replicação transacional.</span><span class="sxs-lookup"><span data-stu-id="4acab-121">The network can be a significant performance bottleneck, particularly for transactional replication.</span></span> <span data-ttu-id="4acab-122">A propagação de alterações aos Assinantes pode ser melhorada significantemente por meio de uma rede rápida de 100 megabits por segundo (Mbs) ou mais rápida.</span><span class="sxs-lookup"><span data-stu-id="4acab-122">The propagation of changes to Subscribers can be significantly enhanced by using a fast network of 100 megabits per second (Mbps) or faster.</span></span> <span data-ttu-id="4acab-123">Se a rede for lenta, especifique configurações de rede e parâmetros de agente apropriados.</span><span class="sxs-lookup"><span data-stu-id="4acab-123">If the network is slow, specify appropriate network settings and agent parameters.</span></span>  
  
## <a name="database-design"></a><span data-ttu-id="4acab-124">Design de banco de dados</span><span class="sxs-lookup"><span data-stu-id="4acab-124">Database Design</span></span>  
  
-   <span data-ttu-id="4acab-125">Siga as práticas recomendadas para design de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4acab-125">Follow best practices for database design.</span></span>  
  
     <span data-ttu-id="4acab-126">Um banco de dados replicado geralmente se beneficia das mesmas otimizações de desempenho que um banco de dados não replicado.</span><span class="sxs-lookup"><span data-stu-id="4acab-126">A replicated database generally benefits from the same performance optimizations as a non-replicated database.</span></span> <span data-ttu-id="4acab-127">Entretanto, os índices devem ser usados com cautela no Assinante: a coluna de chave primária no Assinante deve ser indexada, mas índices adicionais podem afetar o desempenho de inserção, atualização e exclusão.</span><span class="sxs-lookup"><span data-stu-id="4acab-127">However, indexes should be used with caution at the Subscriber: the primary key column at the Subscriber should be indexed, but additional indexes can affect insert, update, and delete performance.</span></span>  
  
-   <span data-ttu-id="4acab-128">Considere definir a opção de banco de dados READ_COMMITTED_SNAPSHOT.</span><span class="sxs-lookup"><span data-stu-id="4acab-128">Consider setting the READ_COMMITTED_SNAPSHOT database option.</span></span>  
  
     <span data-ttu-id="4acab-129">Para ajudar a reduzir a contenção entre a atividade do usuário e a atividade do agente de replicação, defina essa opção para os bancos de dados de publicação e assinatura:</span><span class="sxs-lookup"><span data-stu-id="4acab-129">To help reduce contention between user activity and replication agent activity, set this option for the publication and subscription databases:</span></span>  
  
    ```  
    ALTER DATABASE AdventureWorks  
    SET READ_COMMITTED_SNAPSHOT ON  
    ```  
  
     <span data-ttu-id="4acab-130">Para obter mais informações, veja [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4acab-130">For more information, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="4acab-131">Seja cauteloso com a lógica do aplicativo nos gatilhos.</span><span class="sxs-lookup"><span data-stu-id="4acab-131">Be cautious with application logic in triggers.</span></span>  
  
     <span data-ttu-id="4acab-132">A lógica corporativa nos gatilhos definidos pelo usuário no Assinante pode reduzir a velocidade da replicação de alterações no Assinante:</span><span class="sxs-lookup"><span data-stu-id="4acab-132">Business logic in user-defined triggers at the Subscriber can slow down the replication of changes to the Subscriber:</span></span>  
  
    -   <span data-ttu-id="4acab-133">Para a replicação transacional, pode ser mais eficiente incluir essa lógica nos procedimentos armazenados personalizados usados para aplicar os comandos de replicação.</span><span class="sxs-lookup"><span data-stu-id="4acab-133">For transactional replication, it can be more efficient to include this logic in custom stored procedures used to apply the replicated commands.</span></span> <span data-ttu-id="4acab-134">Para obter mais informações, consulte [Especificar como as alterações são propagadas para artigos transacionais](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-134">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
    -   <span data-ttu-id="4acab-135">Para replicação de mesclagem, pode ser mais eficiente usar manipuladores de lógica de negócios.</span><span class="sxs-lookup"><span data-stu-id="4acab-135">For merge replication, it can be more efficient to use business logic handlers.</span></span> <span data-ttu-id="4acab-136">Para obter mais informações, consulte [Executar lógica de negócios durante a sincronizações de mesclagem](../merge/execute-business-logic-during-merge-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-136">For more information, see [Execute Business Logic During Merge Synchronization](../merge/execute-business-logic-during-merge-synchronization.md).</span></span>  
  
     <span data-ttu-id="4acab-137">Se gatilhos forem usados para manter a integridade referencial nas tabelas publicadas para replicação de mesclagem, especifique a ordem de processamento das tabelas para reduzir o número de repetições necessárias para o Merge Agent.</span><span class="sxs-lookup"><span data-stu-id="4acab-137">If you use triggers to maintain referential integrity in tables published for merge replication, specify the processing order of tables to reduce the number of retries required for the Merge Agent.</span></span> <span data-ttu-id="4acab-138">Para obter mais informações, confira [propriedades de Especificar Replicação de Mesclagem](../publish/specify-merge-replication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-138">For more information, see [Specify Merge Replication properties](../publish/specify-merge-replication-properties.md).</span></span>  
  
-   <span data-ttu-id="4acab-139">Limite o uso de tipos de dados LOB (objetos grandes).</span><span class="sxs-lookup"><span data-stu-id="4acab-139">Limit the use of Large Object (LOB) data types.</span></span>  
  
     <span data-ttu-id="4acab-140">Os LOBs requerem mais espaço de armazenamento e processamento que outros tipos de dados de coluna.</span><span class="sxs-lookup"><span data-stu-id="4acab-140">LOBs require more storage space and processing than other column data types.</span></span> <span data-ttu-id="4acab-141">Não inclua essas colunas em artigos a menos que seja necessário para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4acab-141">Do not include these columns in articles unless necessary for your application.</span></span> <span data-ttu-id="4acab-142">Os tipos de dados `text`, `ntext` e `image`são preteridos.</span><span class="sxs-lookup"><span data-stu-id="4acab-142">The data types `text`, `ntext`, and `image` are deprecated.</span></span> <span data-ttu-id="4acab-143">Se incluir LOBs, recomendamos o uso dos tipos de dados `varchar(max)`, `nvarchar(max)`, `varbinary(max)`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="4acab-143">If you do include LOBs, we recommend that you use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)`, respectively.</span></span>  
  
     <span data-ttu-id="4acab-144">Para replicação transacional, considere usar o perfil do Distribution Agent chamado **Perfil de distribuição para fluxo contínuo do banco de dados OLE**.</span><span class="sxs-lookup"><span data-stu-id="4acab-144">For transactional replication, consider using the Distribution Agent profile called **Distribution Profile for OLEDB streaming**.</span></span> <span data-ttu-id="4acab-145">Para saber mais, confira [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-145">For more information, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="publication-design"></a><span data-ttu-id="4acab-146">Design de publicação</span><span class="sxs-lookup"><span data-stu-id="4acab-146">Publication Design</span></span>  
  
-   <span data-ttu-id="4acab-147">Publique somente os dados requeridos.</span><span class="sxs-lookup"><span data-stu-id="4acab-147">Publish only the data required.</span></span>  
  
     <span data-ttu-id="4acab-148">Porque a replicação é fácil de configurar, há uma tendência para publicar mais dados do que é, de fato, necessário.</span><span class="sxs-lookup"><span data-stu-id="4acab-148">Because replication is easy to set up, there is a tendency to publish more data than is actually required.</span></span> <span data-ttu-id="4acab-149">Isso pode consumir recursos adicionais dentro dos bancos de dados de distribuição e arquivos de instantâneo, e pode reduzir a taxa de transferência para os dados requeridos.</span><span class="sxs-lookup"><span data-stu-id="4acab-149">This can consume additional resources within the distribution databases and snapshot files, and can lower the throughput for required data.</span></span> <span data-ttu-id="4acab-150">Evite publicar tabelas desnecessárias e considere atualizar as publicações com menos frequência.</span><span class="sxs-lookup"><span data-stu-id="4acab-150">Avoid publishing unnecessary tables and consider updating publications less frequently.</span></span>  
  
-   <span data-ttu-id="4acab-151">Minimize conflitos por design de publicação e comportamento de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4acab-151">Minimize conflicts through publication design and application behavior.</span></span>  
  
     <span data-ttu-id="4acab-152">Os seguintes tipos de replicação permitem que os dados sejam alterados no Assinante: replicação de mesclagem, replicação transacional com assinaturas atualizáveis e replicação transacional ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="4acab-152">The following types of replication allow data to be changed at Subscribers: merge replication, transactional replication with updatable subscriptions, and peer-to-peer transactional replication.</span></span> <span data-ttu-id="4acab-153">A replicação de mesclagem e a replicação transacional com assinaturas atualizáveis oferecem suporte a conflitos de dados, se uma dada linha for atualizada em um ou mais nós entre sincronizações.</span><span class="sxs-lookup"><span data-stu-id="4acab-153">Merge replication and transactional replication with updatable subscriptions support data conflicts if a given row is updated at more than one node between synchronizations.</span></span> <span data-ttu-id="4acab-154">A replicação ponto a ponto não oferece suporte a conflitos de dados; as alterações de dados devem ser particionadas.</span><span class="sxs-lookup"><span data-stu-id="4acab-154">Peer-to-peer replication does not support data conflicts; data changes must be partitioned.</span></span> <span data-ttu-id="4acab-155">Independentemente do tipo de replicação usada, recomendamos que o particionamento das alterações sempre que possível, pois isso reduz o processamento necessário para detecção e resolução de conflitos.</span><span class="sxs-lookup"><span data-stu-id="4acab-155">Regardless of the type of replication used, we recommend that you partition changes whenever possible, because this reduces the processing required for conflict detection and resolution.</span></span>  
  
     <span data-ttu-id="4acab-156">As alterações podem ser particionadas por meio da publicação de subconjuntos de dados em cada Assinante, ou fazendo com que o aplicativo faça alterações diretas para uma determinada linha em um nó específico:</span><span class="sxs-lookup"><span data-stu-id="4acab-156">Changes can be partitioned by publishing subsets of data to each Subscriber or by having an application direct changes for a given row to a given node:</span></span>  
  
    -   <span data-ttu-id="4acab-157">A replicação de mesclagem oferece suporte a subconjuntos de publicação de dados que usam filtros com parâmetros com uma única publicação.</span><span class="sxs-lookup"><span data-stu-id="4acab-157">Merge replication supports publishing subsets of data using parameterized filters with a single publication.</span></span> <span data-ttu-id="4acab-158">Para obter mais informações, consulte [Filtros de linha com parâmetros](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-158">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
    -   <span data-ttu-id="4acab-159">A replicação transacional oferece suporte à publicação de subconjuntos de dados que usam filtros estáticos com publicações múltiplas.</span><span class="sxs-lookup"><span data-stu-id="4acab-159">Transactional replication supports publishing subsets of data using static filters with multiple publications.</span></span> <span data-ttu-id="4acab-160">Para obter mais informações, consulte [Filter Published Data](../publish/filter-published-data.md) (Filtrar dados publicados).</span><span class="sxs-lookup"><span data-stu-id="4acab-160">For more information, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
-   <span data-ttu-id="4acab-161">Use filtros de linha criteriosamente.</span><span class="sxs-lookup"><span data-stu-id="4acab-161">Use row filters judiciously.</span></span>  
  
     <span data-ttu-id="4acab-162">Quando uma publicação transacional inclui um ou mais artigos que usam filtros de linha, o Log Reader Agent deve aplicar o filtro a cada linha afetada por uma atualização à tabela enquanto verifica o log de transações.</span><span class="sxs-lookup"><span data-stu-id="4acab-162">When a transactional publication includes one or more articles that use row filters, the Log Reader Agent must apply the filter to each row affected by an update to the table as it scans the transaction log.</span></span> <span data-ttu-id="4acab-163">Consequentemente, a taxa de transferência do Log Reader Agent é afetada.</span><span class="sxs-lookup"><span data-stu-id="4acab-163">The throughput of the Log Reader Agent is therefore affected.</span></span>  
  
     <span data-ttu-id="4acab-164">De forma semelhante, a replicação de mesclagem deve avaliar as linhas alteradas ou excluídas para determinar quais Assinantes devem receber essas linhas.</span><span class="sxs-lookup"><span data-stu-id="4acab-164">Similarly, merge replication must evaluate changed or deleted rows to determine which Subscribers should receive those rows.</span></span> <span data-ttu-id="4acab-165">Quando os filtros de linha são empregados para reduzir os dados requeridos no Assinante, esse processamento é mais complexo e pode ser mais lento do que publicar todas as linhas em uma tabela.</span><span class="sxs-lookup"><span data-stu-id="4acab-165">When row filters are employed to reduce the data required at a Subscriber, this processing is more complex and can be slower than when you publish all rows in a table.</span></span> <span data-ttu-id="4acab-166">Considere cuidadosamente a troca entre requisitos de armazenamento reduzidos em cada Assinante e a necessidade de alcançar a taxa de transferência máxima.</span><span class="sxs-lookup"><span data-stu-id="4acab-166">Consider carefully the tradeoff between reduced storage requirements at each Subscriber and the need for achieving maximum throughput.</span></span> <span data-ttu-id="4acab-167">Para mais informações sobre filtragem, consulte [Filtrar dados publicados](../publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-167">For more information on filtering, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
## <a name="subscription-considerations"></a><span data-ttu-id="4acab-168">Considerações sobre assinatura</span><span class="sxs-lookup"><span data-stu-id="4acab-168">Subscription Considerations</span></span>  
  
-   <span data-ttu-id="4acab-169">Use assinaturas pull quando houver um número grande de Assinantes.</span><span class="sxs-lookup"><span data-stu-id="4acab-169">Use pull subscriptions when there are a large number of Subscribers.</span></span>  
  
     <span data-ttu-id="4acab-170">O Distribution Agent e o Merge Agent são executados no Distribuidor para as assinaturas push e nos Assinantes para assinaturas pull.</span><span class="sxs-lookup"><span data-stu-id="4acab-170">The Distribution Agent and Merge Agent run at the Distributor for push subscriptions, and at Subscribers for pull subscriptions.</span></span> <span data-ttu-id="4acab-171">Use assinaturas pull para melhorar o desempenho movendo o processamento do agente do Distribuidor para os Assinantes.</span><span class="sxs-lookup"><span data-stu-id="4acab-171">Using pull subscriptions can improve performance by moving agent processing from the Distributor to Subscribers.</span></span> <span data-ttu-id="4acab-172">Para obter mais informações, consulte [Subscribe to Publications](../subscribe-to-publications.md) (Assinar publicações).</span><span class="sxs-lookup"><span data-stu-id="4acab-172">For more information, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="4acab-173">Considere a reinicialização da assinatura se os Assinantes estiverem muito desatualizados.</span><span class="sxs-lookup"><span data-stu-id="4acab-173">Consider reinitialization of the subscription if Subscribers are too far behind.</span></span>  
  
     <span data-ttu-id="4acab-174">Quando grandes quantidades de alterações precisarem ser enviadas aos Assinantes, reinicializá-los com um novo instantâneo pode ser mais rápido que usar a replicação para mover as alterações individuais.</span><span class="sxs-lookup"><span data-stu-id="4acab-174">When large amounts of changes need to be sent to Subscribers, reinitializing them with a new snapshot might be faster than using replication to move the individual changes.</span></span> <span data-ttu-id="4acab-175">Para obter mais informações, consulte [Reinicializar as assinaturas](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-175">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
     <span data-ttu-id="4acab-176">Para replicação transacional, o Replication Monitor exibe na guia **Comandos Não Distribuídos** as informações sobre: o número de transações no banco de dados de distribuição que ainda não foi distribuídas ao Assinante e o tempo estimado para distribuir essas transações.</span><span class="sxs-lookup"><span data-stu-id="4acab-176">For transactional replication, Replication Monitor displays on the **Undistributed Commands** tab information about: the number of transactions in the distribution database that have not yet been distributed to a Subscriber; and the estimated time for distributing these transactions.</span></span> <span data-ttu-id="4acab-177">Para obter mais informações, confira [Exibir informações e executar tarefas usando o Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-177">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="snapshot-considerations"></a><span data-ttu-id="4acab-178">Considerações de instantâneo</span><span class="sxs-lookup"><span data-stu-id="4acab-178">Snapshot Considerations</span></span>  
  
-   <span data-ttu-id="4acab-179">Execute o Snapshot Agent apenas quando necessário e em períodos de pouca atividade.</span><span class="sxs-lookup"><span data-stu-id="4acab-179">Run the Snapshot Agent only when necessary and at off-peak times.</span></span>  
  
     <span data-ttu-id="4acab-180">O Snapshot Agent copia em massa os dados da tabela publicada no Publicador para uma pasta de instantâneo no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="4acab-180">The Snapshot Agent bulk copies data from the published table on the Publisher to a file in the snapshot folder on the Distributor.</span></span> <span data-ttu-id="4acab-181">Gerar um instantâneo pode ser um processo intensivo de recurso e é melhor ser agendado para períodos de pouca atividade.</span><span class="sxs-lookup"><span data-stu-id="4acab-181">Generating a snapshot can be a resource intensive process and is best scheduled during off-peak times.</span></span>  
  
-   <span data-ttu-id="4acab-182">Use um instantâneo de modo nativo a menos que um instantâneo de modo de caractere seja requerido.</span><span class="sxs-lookup"><span data-stu-id="4acab-182">Use a native mode snapshot unless a character mode snapshot is required.</span></span>  
  
     <span data-ttu-id="4acab-183">Use o instantâneo de modo nativo para todos os Assinantes exceto os Assinantes não[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e Assinantes que estão executando o [!INCLUDE[ssEW](../../../includes/ssew-md.md)], que requerem o instantâneo de modo de caractere.</span><span class="sxs-lookup"><span data-stu-id="4acab-183">Use the default native mode snapshot for all Subscribers except non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Subscribers and Subscribers running [!INCLUDE[ssEW](../../../includes/ssew-md.md)], which require a character mode snapshot.</span></span>  
  
-   <span data-ttu-id="4acab-184">Use uma única pasta de instantâneo para a publicação.</span><span class="sxs-lookup"><span data-stu-id="4acab-184">Use a single snapshot folder for a publication.</span></span>  
  
     <span data-ttu-id="4acab-185">Ao especificar as propriedades da publicação relacionadas com o local do instantâneo, é possível escolher gerar os arquivos de instantâneo na pasta de instantâneo padrão, em uma pasta alternativa de instantâneo ou em ambos.</span><span class="sxs-lookup"><span data-stu-id="4acab-185">When specifying the publication properties related to snapshot location, you can choose to generate snapshot files to the default snapshot folder, to an alternate snapshot folder, or to both.</span></span> <span data-ttu-id="4acab-186">Gerar arquivos de instantâneo em ambos os locais requer espaço em disco adicional e mais processamento durante a execução do Snapshot Agent.</span><span class="sxs-lookup"><span data-stu-id="4acab-186">Generating snapshot files in both locations requires additional disk space and more processing when the Snapshot Agent runs.</span></span>  
  
-   <span data-ttu-id="4acab-187">Coloque a pasta de instantâneo em uma unidade local do Distribuidor que não seja usada para armazenar bancos de dados ou arquivos de log.</span><span class="sxs-lookup"><span data-stu-id="4acab-187">Place the snapshot folder on a drive local to the Distributor that is not used to store database or log files.</span></span>  
  
     <span data-ttu-id="4acab-188">O Snapshot Agent executa uma gravação sequencial de dados na pasta de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="4acab-188">The Snapshot Agent performs a sequential write of data to the snapshot folder.</span></span> <span data-ttu-id="4acab-189">Colocar a pasta de instantâneo em uma unidade separada de qualquer banco de dados ou de arquivos de log reduz a contenção entre os discos, e faz com que o processo do instantâneo seja concluído mais rapidamente.</span><span class="sxs-lookup"><span data-stu-id="4acab-189">Placing the snapshot folder on a separate drive from any database or log files reduces contention among the disks and helps the snapshot process complete faster.</span></span>  
  
-   <span data-ttu-id="4acab-190">Ao criar o banco de dados de assinatura no Assinante, considere especificar um modelo de recuperação de registros simples ou com log de operações em massa.</span><span class="sxs-lookup"><span data-stu-id="4acab-190">When you create the subscription database at the Subscriber, consider specifying a recovery model of simple or bulk-logged.</span></span> <span data-ttu-id="4acab-191">Isso permite log mínimo das inserções em massa executado durante a aplicação do instantâneo no Assinante.</span><span class="sxs-lookup"><span data-stu-id="4acab-191">This allows minimal logging of the bulk inserts performed during the application of the snapshot at the Subscriber.</span></span> <span data-ttu-id="4acab-192">Após o instantâneo ter sido aplicado ao banco de dados de assinatura, é possível mudar para um modelo diferente de recuperação, se necessário (os bancos de dados replicados podem usar qualquer um dos modelos de recuperação).</span><span class="sxs-lookup"><span data-stu-id="4acab-192">After the snapshot has been applied to the subscription database, you can change to a different recovery model if necessary (replicated databases can use any of the recovery models).</span></span> <span data-ttu-id="4acab-193">Para mais informações sobre como selecionar um modelo de recuperação, consulte [Visão geral da recuperação e da restauração &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-193">For more information about selecting a recovery model, see [Restore and Recovery Overview &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span></span>  
  
-   <span data-ttu-id="4acab-194">Considere usar a pasta de instantâneo alternativo e instantâneos compactados em mídia removíveis para redes que não sejam de banda larga.</span><span class="sxs-lookup"><span data-stu-id="4acab-194">Consider using the alternate snapshot folder and compressed snapshots on removable media for low-bandwidth networks.</span></span>  
  
     <span data-ttu-id="4acab-195">Os arquivos de instantâneo compactados na pasta de instantâneo alternativo podem reduzir os requisitos de armazenamento em disco, e facilitar a transferência de arquivos de instantâneo em mídia removível.</span><span class="sxs-lookup"><span data-stu-id="4acab-195">Compressing snapshot files in the alternate snapshot folder can reduce snapshot disk storage requirements and make it easier to transfer snapshot files on removable media.</span></span>  
  
     <span data-ttu-id="4acab-196">Os instantâneos compactados podem, em alguns casos, melhorar o desempenho da transferência de arquivos de instantâneo pela rede.</span><span class="sxs-lookup"><span data-stu-id="4acab-196">Compressed snapshots can, in some cases, improve the performance of transferring snapshot files across the network.</span></span> <span data-ttu-id="4acab-197">No entanto, a compactação de instantâneos exige processamento adicional por parte do Snapshot Agent ao gerar os arquivos de instantâneo, e por parte do Distribution Agent ou Merge Agent ao aplicar os arquivos de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="4acab-197">However, compressing the snapshot requires additional processing by the Snapshot Agent when generating the snapshot files, and by the Distribution Agent or Merge Agent when applying the snapshot files.</span></span> <span data-ttu-id="4acab-198">Em alguns casos, isso pode reduzir a velocidade da geração de instantâneos e aumentar o tempo para se aplicar um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="4acab-198">This may slow down snapshot generation and increase the time it takes to apply a snapshot in some cases.</span></span> <span data-ttu-id="4acab-199">Além disso, instantâneos compactados não podem ser retomados no caso de uma falha de rede; consequentemente, não são apropriados para redes não confiáveis.</span><span class="sxs-lookup"><span data-stu-id="4acab-199">Additionally, compressed snapshots cannot be resumed if a network failure occurs; therefore they are not suitable for unreliable networks.</span></span> <span data-ttu-id="4acab-200">Considere essa possibilidade cuidadosamente ao usar instantâneos compactados por uma rede.</span><span class="sxs-lookup"><span data-stu-id="4acab-200">Consider these tradeoffs carefully when using compressed snapshots across a network.</span></span> <span data-ttu-id="4acab-201">Para obter mais informações, consulte [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) e [Compressed Snapshots](../compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-201">For more information, see [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) and [Compressed Snapshots](../compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="4acab-202">Considere inicializar uma assinatura manualmente.</span><span class="sxs-lookup"><span data-stu-id="4acab-202">Consider initializing a subscription manually.</span></span>  
  
     <span data-ttu-id="4acab-203">Em alguns cenários, como os que envolvem grandes bancos de dados iniciais, é preferível inicializar uma assinatura usando um método diferente do que usando um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="4acab-203">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using a method other than a snapshot.</span></span> <span data-ttu-id="4acab-204">Para obter mais informações, consulte [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-204">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
## <a name="agent-parameters"></a><span data-ttu-id="4acab-205">Parâmetros de agente</span><span class="sxs-lookup"><span data-stu-id="4acab-205">Agent Parameters</span></span>  
  
-   <span data-ttu-id="4acab-206">Reduza os níveis detalhados de agentes de replicação, exceto durante o teste inicial, a monitoração e a depuração.</span><span class="sxs-lookup"><span data-stu-id="4acab-206">Reduce the verbose levels of replication agents except during initial testing, monitoring, or debugging.</span></span>  
  
     <span data-ttu-id="4acab-207">Reduza os parâmetros **-HistoryVerboseLevel** e **-OutputVerboseLevel** dos Agentes de Distribuição ou dos Agentes de Mesclagem.</span><span class="sxs-lookup"><span data-stu-id="4acab-207">Reduce the **-HistoryVerboseLevel** parameter and the **-OutputVerboseLevel** parameter of the Distribution Agents or Merge Agents.</span></span> <span data-ttu-id="4acab-208">Isso reduz o número de linhas novas inseridas para controlar o histórico de agente e saída.</span><span class="sxs-lookup"><span data-stu-id="4acab-208">This reduces the number of new rows inserted to track agent history and output.</span></span> <span data-ttu-id="4acab-209">Em vez disso, as mensagens de histórico anteriores com o mesmo status são atualizadas para as novas informações de histórico.</span><span class="sxs-lookup"><span data-stu-id="4acab-209">Instead, previous history messages with the same status are updated to the new history information.</span></span> <span data-ttu-id="4acab-210">Aumente os níveis detalhados de teste, monitoração e depuração, de forma a obter o máximo possível de informações sobre a atividade do agente.</span><span class="sxs-lookup"><span data-stu-id="4acab-210">Increase the verbose levels for testing, monitoring, and debugging so that you have as much information about agent activity as possible.</span></span>  
  
-   <span data-ttu-id="4acab-211">Use o parâmetro **-MaxBCPThreads** do Agente de Instantâneo, do Agente de Mesclagem e do Agente de Distribuição (o número de threads especificado não deve exceder o número de processadores no computador).</span><span class="sxs-lookup"><span data-stu-id="4acab-211">Use the **-MaxBCPThreads** parameter of the Snapshot Agent, Merge Agent, and Distribution Agent (the number of threads specified should not exceed the number of processors on the computer).</span></span> <span data-ttu-id="4acab-212">Esse parâmetro especifica o número de operações de cópia em massa que podem ser executadas em paralelo quando o instantâneo é criado e aplicado.</span><span class="sxs-lookup"><span data-stu-id="4acab-212">This parameter specifies the number of bulk copy operations that can be performed in parallel when the snapshot is created and applied.</span></span>  
  
-   <span data-ttu-id="4acab-213">Use o parâmetro **-UseInprocLoader** do Agente de Distribuição e do Agente de Mesclagem (esse parâmetro não poderá ser usado se as tabelas publicadas incluírem colunas XML).</span><span class="sxs-lookup"><span data-stu-id="4acab-213">Use the **-UseInprocLoader** parameter of the Distribution Agent and the Merge Agent (this parameter cannot be used if published tables include XML columns).</span></span> <span data-ttu-id="4acab-214">Esse parâmetro faz o agente usar o comando BULK INSERT quando o instantâneo for aplicado.</span><span class="sxs-lookup"><span data-stu-id="4acab-214">This parameter causes the agent to use the BULK INSERT command when the snapshot is applied.</span></span>  
  
 <span data-ttu-id="4acab-215">Os parâmetros de agente podem ser especificados em perfis de agente e na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="4acab-215">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="4acab-216">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="4acab-216">For more information, see:</span></span>  
  
-   [<span data-ttu-id="4acab-217">Trabalhar com perfis do Agente de Replicação</span><span class="sxs-lookup"><span data-stu-id="4acab-217">Work with Replication Agent Profiles</span></span>](../agents/work-with-replication-agent-profiles.md)  
  
-   [<span data-ttu-id="4acab-218">Exibir e modificar parâmetros do prompt de comando de agentes de replicação &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="4acab-218">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   <span data-ttu-id="4acab-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="4acab-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
  
