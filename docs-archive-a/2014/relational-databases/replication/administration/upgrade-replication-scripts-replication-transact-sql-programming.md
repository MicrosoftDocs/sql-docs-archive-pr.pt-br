---
title: Atualizar scripts de replicação (Programação Transact-SQL de replicação) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- TSQL
helpviewer_keywords:
- scripts [SQL Server replication], upgrading
- upgrading SQL Server, replicated databases
- upgrading replication applications
- replication [SQL Server], scripting
- replication [SQL Server], upgrading
- upgrading replicated databases
ms.assetid: 0b8720bd-f339-4842-bc8f-b35a46f6d3ee
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c47101c76ca2c585accd493b74f0e59c56bf009e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87571969"
---
# <a name="upgrade-replication-scripts-replication-transact-sql-programming"></a><span data-ttu-id="00bd9-102">Atualizar scripts de replicação (Programação Transact-SQL de replicação)</span><span class="sxs-lookup"><span data-stu-id="00bd9-102">Upgrade Replication Scripts (Replication Transact-SQL Programming)</span></span>
  <span data-ttu-id="00bd9-103">Podem ser usados arquivos de script[!INCLUDE[tsql](../../../includes/tsql-md.md)] para configurar uma topologia de replicação programaticamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-103">[!INCLUDE[tsql](../../../includes/tsql-md.md)] script files can be used to programmatically configure a replication topology.</span></span> <span data-ttu-id="00bd9-104">Para obter mais informações, consulte [Conceitos de procedimentos armazenados no sistema de replicação](../concepts/replication-system-stored-procedures-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-104">For more information, see [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="00bd9-105">Embora não se exija a atualização de scripts executados por membros da função `sysadmin`, recomendamos que você modifique os scripts existentes como descrito neste tópico.</span><span class="sxs-lookup"><span data-stu-id="00bd9-105">Although you are not required to upgrade scripts that are executed by members of the `sysadmin` role, we recommend that you modify existing scripts as described in this topic.</span></span> <span data-ttu-id="00bd9-106">Especifique uma conta que tenha permissões mínimas para cada agente de replicação como descrito na seção "Permissões exigidas por agentes" do tópico [Replication Agent Security Model](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-106">Specify an account that has minimum permissions for each replication agent as described in the "Permissions Required By Agents" section of the topic [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
 <span data-ttu-id="00bd9-107">Esses aprimoramentos de segurança, que permitem um maior controle das permissões permitindo que você especifique explicitamente as contas do Windows do [!INCLUDE[msCoName](../../../includes/msconame-md.md)] nas quais são executados trabalhos do agente de replicação, afetam os seguintes procedimentos armazenados nos scripts existentes:</span><span class="sxs-lookup"><span data-stu-id="00bd9-107">These security improvements, which enable more control over permissions by allowing you to explicitly specify the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows accounts under which replication agent jobs are executed, affect the following stored procedures in existing scripts:</span></span>  
  
-   <span data-ttu-id="00bd9-108">**sp_addpublication_snapshot**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-108">**sp_addpublication_snapshot**:</span></span>  
  
     <span data-ttu-id="00bd9-109">Agora você deve fornecer as credenciais do Windows como **@job_login** e **@job_password** ao executar [Sp_addpublication_snapshot &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) para criar o trabalho sob o qual o agente de instantâneo é executado no distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-109">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) to create the job under which the Snapshot Agent runs at the Distributor.</span></span>  
  
-   <span data-ttu-id="00bd9-110">**sp_addpushsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-110">**sp_addpushsubscription_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-111">Então você deve executar o [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) para adicionar explicitamente um trabalho e fornecer as credenciais do Windows (**@job_login** e **@job_password**) nas quais será executado o trabalho do Agente de Distribuição no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-111">You should now execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) to explicitly add a job and supply the Windows credentials (**@job_login** and **@job_password**) under which the Distribution Agent job runs at the Distributor.</span></span> <span data-ttu-id="00bd9-112">Em versões do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] anteriores ao [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], isto era feito automaticamente quando era criada uma assinatura push.</span><span class="sxs-lookup"><span data-stu-id="00bd9-112">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a push subscription was created.</span></span>  
  
-   <span data-ttu-id="00bd9-113">**sp_addmergepushsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-113">**sp_addmergepushsubscription_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-114">Então você deve executar o [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) para adicionar explicitamente um trabalho e fornecer as credenciais do Windows (**@job_login** e **@job_password**) nas quais será executado o trabalho do Agente de Mesclagem no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-114">You should now execute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) to explicitly add a job and supply the Windows credentials (**@job_login** and **@job_password**) under which the Merge Agent job runs at the Distributor.</span></span> <span data-ttu-id="00bd9-115">Em versões do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] anteriores ao [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], isto era feito automaticamente quando era criada uma assinatura push.</span><span class="sxs-lookup"><span data-stu-id="00bd9-115">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a push subscription was created.</span></span>  
  
-   <span data-ttu-id="00bd9-116">**sp_addpullsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-116">**sp_addpullsubscription_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-117">Agora você deve fornecer as credenciais do Windows como **@job_login** e **@job_password** ao executar [Sp_addpullsubscription_agent &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) para criar o trabalho sob o qual o agente de distribuição é executado no Assinante.</span><span class="sxs-lookup"><span data-stu-id="00bd9-117">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) to create the job under which the Distribution Agent runs at the Subscriber.</span></span>  
  
-   <span data-ttu-id="00bd9-118">**sp_addmergepullsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-118">**sp_addmergepullsubscription_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-119">Agora você deve fornecer as credenciais do Windows como **@job_login** e **@job_password** ao executar [Sp_addmergepullsubscription_agent &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) para criar o trabalho sob o qual o agente de mesclagem é executado no Assinante.</span><span class="sxs-lookup"><span data-stu-id="00bd9-119">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) to create the job under which the Merge Agent runs at the Subscriber.</span></span>  
  
-   <span data-ttu-id="00bd9-120">**sp_addlogreader_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-120">**sp_addlogreader_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-121">Você deve executar o [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) para adicionar manualmente o trabalho e fornecer as credenciais do Windows sob as quais será executado o Agente de Leitor de Log no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-121">You should now execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) to manually add the job and supply the Windows credentials under which the Log Reader Agent runs at the Distributor.</span></span> <span data-ttu-id="00bd9-122">Em versões do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] anteriores ao [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], isto era feito automaticamente quando era criada uma publicação transacional.</span><span class="sxs-lookup"><span data-stu-id="00bd9-122">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a transactional publication was created.</span></span>  
  
-   <span data-ttu-id="00bd9-123">**sp_addqreader_agent**:</span><span class="sxs-lookup"><span data-stu-id="00bd9-123">**sp_addqreader_agent**:</span></span>  
  
     <span data-ttu-id="00bd9-124">Você deve executar o [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) para adicionar manualmente o trabalho e fornecer as credenciais do Windows sob as quais será executado o Queue Reader Agent no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-124">You should now execute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) to manually add the job and supply the Windows credentials under which the Queue Reader Agent runs at the Distributor.</span></span> <span data-ttu-id="00bd9-125">Em versões do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] anteriores ao [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], isso era feito automaticamente quando era criada uma publicação transacional que suportava atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="00bd9-125">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a transactional publication that supported queued updating was created.</span></span>  
  
 <span data-ttu-id="00bd9-126">No modelo de segurança introduzido no [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] , os agentes de replicação sempre fazem conexões com a instância local do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] com a autenticação do Windows usando as credenciais fornecidas no **@job_name** e no **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-126">In the security model introduced in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], replication agents always make connections to the local instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] with Windows Authentication using the credentials supplied in **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-127">Para obter informações sobre os requisitos de contas do Windows usados ao executar trabalhos de agente de replicação, consulte [Replication Agent Security Model](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-127">For information about the requirements of Windows accounts used when running replication agent jobs, see [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="00bd9-128">Quando possível, solicite que os usuários insiram as credenciais de segurança em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="00bd9-128">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="00bd9-129">Se você armazenar credenciais em um arquivo de script, verifique se o arquivo está protegido.</span><span class="sxs-lookup"><span data-stu-id="00bd9-129">If you store credentials in a script file, ensure that the file itself is secured.</span></span>  
  
### <a name="to-upgrade-scripts-that-configure-a-snapshot-or-transactional-publication"></a><span data-ttu-id="00bd9-130">Para atualizar scripts que configuram um instantâneo ou uma publicação transacional</span><span class="sxs-lookup"><span data-stu-id="00bd9-130">To upgrade scripts that configure a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="00bd9-131">No script existente, antes de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) no publicador do banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-131">In the existing script, before [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="00bd9-132">Especifique as credenciais do Windows sob as quais o Agente de Leitor de Log é executado para **@job_name** e **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-132">Specify the Windows credentials under which the Log Reader Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-133">Se o agente usar a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] quando se conectar ao Publicador, você também deverá especificar um valor de **0** para **@publisher_security_mode** e as credenciais do Windows [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** e **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="00bd9-133">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="00bd9-134">Isso cria um trabalho do Agente de Leitor de Log para o banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-134">This creates a Log Reader Agent job for the publication database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="00bd9-135">Essa etapa é só para publicações transacionais e não é necessária para publicações de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="00bd9-135">This step is only for transactional publications and is not required for snapshot publications.</span></span>  
  
2.  <span data-ttu-id="00bd9-136">(Opcional) Antes de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) no Distribuidor no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="00bd9-136">(Optional) Before [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) at the Distributor on the distribution database.</span></span> <span data-ttu-id="00bd9-137">Especifique as credenciais do Windows sob as quais o Queue Reader Agent é executado para **@job_name** e **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-137">Specify the Windows credentials under which the Queue Reader Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-138">Isso cria um trabalho do Agente de Leitor de Fila para o Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="00bd9-138">This creates a Queue Reader Agent job for the Distributor.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="00bd9-139">Essa etapa só é necessária para publicações transacionais que dão suporte a assinantes de atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="00bd9-139">This step is only required for transactional publications that support queued updating subscribers.</span></span>  
  
3.  <span data-ttu-id="00bd9-140">(Opcional) Atualize a execução de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) para definir qualquer valor não padrão para parâmetros que implementam novas funcionalidades de replicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-140">(Optional) Update the execution of [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
4.  <span data-ttu-id="00bd9-141">Depois de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) no Publicador do banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-141">After [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="00bd9-142">Especifique **@publication** e as credenciais do Windows sob as quais o agente de instantâneo é executado para **@job_name** e **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-142">Specify **@publication** and the Windows credentials under which the Snapshot Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-143">Se o agente usar a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] quando se conectar ao Publicador, você também deverá especificar um valor de **0** para **@publisher_security_mode** e as credenciais do Windows [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** e **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="00bd9-143">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="00bd9-144">Isso cria um trabalho do Agente de Instantâneo para a publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-144">This creates a Snapshot Agent job for the publication.</span></span>  
  
5.  <span data-ttu-id="00bd9-145">(Opcional) Atualize a execução de [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) para definir qualquer valor não padrão para parâmetros que implementam novas funcionalidades de replicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-145">(Optional) Update the execution of [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
### <a name="to-upgrade-scripts-that-add-subscriptions-to-a-snapshot-or-transactional-publication"></a><span data-ttu-id="00bd9-146">Para atualizar scripts que adicionam assinaturas a um instantâneo ou publicação transacional</span><span class="sxs-lookup"><span data-stu-id="00bd9-146">To upgrade scripts that add subscriptions to a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="00bd9-147">Após executar o procedimento armazenado que cria a assinatura, certifique-se de executar o procedimento armazenado que cria um trabalho do agente de distribuição para sincronizar a assinatura.</span><span class="sxs-lookup"><span data-stu-id="00bd9-147">After executing the stored procedure that creates the subscription, ensure that you execute the stored procedure that creates a Distribution Agent job to synchronize the subscription.</span></span> <span data-ttu-id="00bd9-148">O procedimento armazenado usado dependerá do tipo de assinatura.</span><span class="sxs-lookup"><span data-stu-id="00bd9-148">The stored procedure that you use will depend on the type of subscription.</span></span>  
  
    -   <span data-ttu-id="00bd9-149">Para uma assinatura pull, atualize a execução do [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) para fornecer as credenciais do Windows no qual o Agente de Distribuição é executado no Assinante para **@job_name** e **@job_password**.</span><span class="sxs-lookup"><span data-stu-id="00bd9-149">For a pull subscription, update the execution of [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) to supply the Windows credentials under which the Distribution Agent runs at the Subscriber for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-150">Isso é feito após a execução de [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="00bd9-150">This is done after the execution of [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="00bd9-151">Para obter mais informações, consulte [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-151">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
    -   <span data-ttu-id="00bd9-152">Para uma assinatura push, execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) no Publicador.</span><span class="sxs-lookup"><span data-stu-id="00bd9-152">For a push subscription, execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) at the Publisher.</span></span> <span data-ttu-id="00bd9-153">Especifique **@subscriber** , **@subscriber_db** , **@publication** , as credenciais do Windows sob as quais o agente de distribuição é executado no distribuidor para **@job_name** e e **@job_password** uma agenda para esse trabalho do Agent.</span><span class="sxs-lookup"><span data-stu-id="00bd9-153">Specify **@subscriber**, **@subscriber_db**, **@publication**, Windows credentials under which the Distribution Agent runs at the Distributor for **@job_name** and **@job_password**, and a schedule for this agent job.</span></span> <span data-ttu-id="00bd9-154">Para obter mais informações, consulte [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-154">For more information, see [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span></span> <span data-ttu-id="00bd9-155">Isso é feito após a execução de [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="00bd9-155">This is done after the execution of [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="00bd9-156">Para obter mais informações, consulte [Create a Push Subscription](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-156">For more information, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
### <a name="to-upgrade-scripts-that-configure-a-merge-publication"></a><span data-ttu-id="00bd9-157">Para atualizar scripts que configuram uma publicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="00bd9-157">To upgrade scripts that configure a merge publication</span></span>  
  
1.  <span data-ttu-id="00bd9-158">(Opcional) No script existente, atualize a execução de [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) para definir qualquer valor não padrão para parâmetros que implementam novas funcionalidades de replicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-158">(Optional) In the existing script, update the execution of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
2.  <span data-ttu-id="00bd9-159">Depois de [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) no Publicador do banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-159">After [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="00bd9-160">Especifique **@publication** e as credenciais do Windows sob as quais o agente de instantâneo é executado para **@job_name** e **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-160">Specify **@publication** and the Windows credentials under which the Snapshot Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-161">Se o agente usar a Autenticação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] quando se conectar ao Publicador, você também deverá especificar um valor de **0** para **@publisher_security_mode** e as credenciais do Windows [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** e **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="00bd9-161">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="00bd9-162">Isso cria um trabalho do Agente de Instantâneo para a publicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-162">This creates a Snapshot Agent job for the publication.</span></span>  
  
3.  <span data-ttu-id="00bd9-163">(Opcional) Atualize a execução de [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) para definir qualquer valor não padrão para parâmetros que implementam novas funcionalidades de replicação.</span><span class="sxs-lookup"><span data-stu-id="00bd9-163">(Optional) Update the execution of [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
### <a name="to-upgrade-scripts-that-add-subscriptions-to-a-merge-publication"></a><span data-ttu-id="00bd9-164">Para atualizar scripts que adicionam assinaturas a uma publicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="00bd9-164">To upgrade scripts that add subscriptions to a merge publication</span></span>  
  
1.  <span data-ttu-id="00bd9-165">Após executar o procedimento armazenado que cria a assinatura, assegure-se de executar o procedimento armazenado que cria um trabalho do Agente de Mesclagem para sincronizar a assinatura.</span><span class="sxs-lookup"><span data-stu-id="00bd9-165">After executing the stored procedure that creates the subscription, ensure that you execute the stored procedure that creates a Merge Agent job to synchronize the subscription.</span></span> <span data-ttu-id="00bd9-166">O procedimento armazenado usado dependerá do tipo de assinatura.</span><span class="sxs-lookup"><span data-stu-id="00bd9-166">The stored procedure that you use will depend on the type of subscription.</span></span>  
  
    -   <span data-ttu-id="00bd9-167">Para uma assinatura pull, atualize a execução do [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) para fornecer as credenciais do Windows no qual o Agente de Mesclagem é executado no Assinante para **@job_name** e **@job_password**.</span><span class="sxs-lookup"><span data-stu-id="00bd9-167">For a pull subscription, update the execution of [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) to supply the Windows credentials under which the Merge Agent runs at the Subscriber for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="00bd9-168">Isso é feito após a execução de [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="00bd9-168">This is done after the execution of [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="00bd9-169">Para obter mais informações, consulte [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-169">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
    -   <span data-ttu-id="00bd9-170">Para uma assinatura push, execute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) no Publicador.</span><span class="sxs-lookup"><span data-stu-id="00bd9-170">For a push subscription, execute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) at the Publisher.</span></span> <span data-ttu-id="00bd9-171">Especifique **@subscriber** , **@subscriber_db** , **@publication** , as credenciais do Windows sob as quais o agente de mesclagem no distribuidor é executado para **@job_name** e e **@job_password** uma agenda para esse trabalho do Agent.</span><span class="sxs-lookup"><span data-stu-id="00bd9-171">Specify **@subscriber**, **@subscriber_db**, **@publication**, the Windows credentials under which the Merge Agent at the Distributor runs for **@job_name** and **@job_password**, and a schedule for this agent job.</span></span> <span data-ttu-id="00bd9-172">Para obter mais informações, consulte [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-172">For more information, see [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span></span> <span data-ttu-id="00bd9-173">Isso é feito após a execução de [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="00bd9-173">This is done after the execution of [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="00bd9-174">Para obter mais informações, consulte [Create a Push Subscription](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="00bd9-174">For more information, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
## <a name="example"></a><span data-ttu-id="00bd9-175">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-175">Example</span></span>  
 <span data-ttu-id="00bd9-176">Abaixo está um exemplo de um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma publicação transacional para a tabela Produto.</span><span class="sxs-lookup"><span data-stu-id="00bd9-176">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a transactional publication for the Product table.</span></span> <span data-ttu-id="00bd9-177">Essa publicação dá suporte para a atualização imediata com atualização em fila como failover.</span><span class="sxs-lookup"><span data-stu-id="00bd9-177">This publication supports immediate updating with queued updating as failover.</span></span> <span data-ttu-id="00bd9-178">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-178">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpub80.sql#sp_createtranpub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-179">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-179">Example</span></span>  
 <span data-ttu-id="00bd9-180">Abaixo mostramos um exemplo de atualização do script anterior, que cria uma publicação transacional, para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-180">The following is an example of upgrading the previous script, which creates a transactional publication, to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-181">Essa publicação dá suporte para a atualização imediata com atualização em fila como failover.</span><span class="sxs-lookup"><span data-stu-id="00bd9-181">This publication supports immediate updating with queued updating as failover.</span></span> <span data-ttu-id="00bd9-182">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-182">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-183"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-183">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpublication.sql#sp_createtranpub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-184">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-184">Example</span></span>  
 <span data-ttu-id="00bd9-185">Abaixo mostramos um exemplo de um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma publicação de mesclagem para a tabela Clientes.</span><span class="sxs-lookup"><span data-stu-id="00bd9-185">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a merge publication for the Customers table.</span></span> <span data-ttu-id="00bd9-186">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-186">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepub80.sql#sp_createmergepub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-187">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-187">Example</span></span>  
 <span data-ttu-id="00bd9-188">Abaixo mostramos um exemplo do script anterior, que cria uma publicação de mesclagem, atualizada para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-188">The following is an example of the previous script, which creates a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-189">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-189">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-190"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-190">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepublication.sql#sp_createmergepub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-191">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-191">Example</span></span>  
 <span data-ttu-id="00bd9-192">O exemplo abaixo mostra um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma assinatura push para uma publicação transacional.</span><span class="sxs-lookup"><span data-stu-id="00bd9-192">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a push subscription to a transactional publication.</span></span> <span data-ttu-id="00bd9-193">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-193">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpushsub80.sql#sp_createtranpushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-194">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-194">Example</span></span>  
 <span data-ttu-id="00bd9-195">Abaixo mostramos um exemplo do script anterior, que cria uma assinatura push para uma publicação transacional, atualizado para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-195">The following is an example of the previous script, which creates a push subscription to a transactional publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-196">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-196">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-197"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-197">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpushsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpushsub.sql#sp_createtranpushsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-198">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-198">Example</span></span>  
 <span data-ttu-id="00bd9-199">O exemplo abaixo mostra um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma assinatura push para uma publicação de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="00bd9-199">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a push subscription to a merge publication.</span></span> <span data-ttu-id="00bd9-200">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-200">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepushsub80.sql#sp_createmergepushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-201">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-201">Example</span></span>  
 <span data-ttu-id="00bd9-202">Abaixo mostramos um exemplo do script anterior, que cria uma assinatura push para uma publicação de mesclagem, atualizado para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-202">The following is an example of the previous script, which creates a push subscription to a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-203">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-203">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-204"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-204">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpushsub.sql#sp_createmergepushsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-205">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-205">Example</span></span>  
 <span data-ttu-id="00bd9-206">O exemplo abaixo mostra um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma assinatura pull para uma publicação transacional.</span><span class="sxs-lookup"><span data-stu-id="00bd9-206">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a pull subscription to a transactional publication.</span></span> <span data-ttu-id="00bd9-207">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-207">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepushsub80.sql#sp_createmergepushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-208">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-208">Example</span></span>  
 <span data-ttu-id="00bd9-209">Abaixo mostramos um exemplo do script anterior, que cria uma assinatura pull para uma publicação transacional, atualizado para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-209">The following is an example of the previous script, which creates a pull subscription to a transactional publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-210">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-210">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-211"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-211">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpullsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpullsub.sql#sp_createtranpullsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-212">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-212">Example</span></span>  
 <span data-ttu-id="00bd9-213">O exemplo abaixo mostra um script do [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que cria uma assinatura pull para uma publicação de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="00bd9-213">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a pull subscription to a merge publication.</span></span> <span data-ttu-id="00bd9-214">Os parâmetros padrão foram removidos para facilitar a legibilidade.</span><span class="sxs-lookup"><span data-stu-id="00bd9-214">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepullsub80.sql#sp_createmergepullsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="00bd9-215">Exemplo</span><span class="sxs-lookup"><span data-stu-id="00bd9-215">Example</span></span>  
 <span data-ttu-id="00bd9-216">Abaixo mostramos um exemplo do script anterior, que cria uma assinatura pull para uma publicação de mesclagem, atualizado para que o [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] e suas versões posteriores possam ser executadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="00bd9-216">The following is an example of the previous script, which creates a pull subscription to a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="00bd9-217">Os padrões para parâmetros novos foram declarados explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00bd9-217">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="00bd9-218"> As credenciais do Windows são fornecidas no runtime que usa variáveis de script **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="00bd9-218">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpullsub.sql#sp_createmergepullsub_nwpostupgrade)]  
  
## <a name="see-also"></a><span data-ttu-id="00bd9-219">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="00bd9-219">See Also</span></span>  
 <span data-ttu-id="00bd9-220">[Create a Publication](../publish/create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-220">[Create a Publication](../publish/create-a-publication.md) </span></span>  
 <span data-ttu-id="00bd9-221">[Create a Push Subscription](../create-a-push-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-221">[Create a Push Subscription](../create-a-push-subscription.md) </span></span>  
 <span data-ttu-id="00bd9-222">[Create a Pull Subscription](../create-a-pull-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-222">[Create a Pull Subscription](../create-a-pull-subscription.md) </span></span>  
 <span data-ttu-id="00bd9-223">[Exibir e modificar configurações de segurança de replicação](../security/view-and-modify-replication-security-settings.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-223">[View and Modify Replication Security Settings](../security/view-and-modify-replication-security-settings.md) </span></span>  
 <span data-ttu-id="00bd9-224">[MSSQL_ENG021797](../mssql-eng021797.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-224">[MSSQL_ENG021797](../mssql-eng021797.md) </span></span>  
 <span data-ttu-id="00bd9-225">[MSSQL_ENG021798](../mssql-eng021798.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-225">[MSSQL_ENG021798](../mssql-eng021798.md) </span></span>  
 <span data-ttu-id="00bd9-226">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="00bd9-226">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="00bd9-227">Atualizar bancos de dados replicados</span><span class="sxs-lookup"><span data-stu-id="00bd9-227">Upgrade Replicated Databases</span></span>](../../../database-engine/install-windows/upgrade-replicated-databases.md)  
  
  
