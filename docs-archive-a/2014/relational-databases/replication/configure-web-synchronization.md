---
title: Configure a sincronização da Web | Microsoft Docs
ms.custom: ''
ms.date: 01/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- SQL10.REP.CONFIGWEBSYNCWIZARD.SUBTYPE.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.CLIENTAUTH.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.WEBSERV.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.DIRACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.VIRDIRINFO.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.AUTHACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.COMPLETEWIZ.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.ANONACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.SNAPSHARE.F1
helpviewer_keywords:
- Web synchronization, security best practices
- Web synchronization, configuring
ms.assetid: 21f8e4d4-cd07-4856-98f0-9c9890ebbc82
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 406175533b92d13dce8c14b91b654fbb6099dc22
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569381"
---
# <a name="configure-web-synchronization"></a><span data-ttu-id="9a843-102">Configurar Sincronização da Web</span><span class="sxs-lookup"><span data-stu-id="9a843-102">Configure Web Synchronization</span></span>
  <span data-ttu-id="9a843-103">A opção de sincronização da Web da Replicação de Mesclagem do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] habilita a replicação de dados usando o protocolo HTTP pela Internet.</span><span class="sxs-lookup"><span data-stu-id="9a843-103">The Web synchronization option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Merge Replication enables data replication using the HTTPS protocol over the Internet.</span></span> <span data-ttu-id="9a843-104">Para usar a sincronização da Web, primeiro você precisa executar as ações de configuração a seguir:</span><span class="sxs-lookup"><span data-stu-id="9a843-104">To use Web synchronization, you first need to perform the following configuration actions:</span></span>  
  
1.  <span data-ttu-id="9a843-105">Crie novas contas de domínio e mapeie logons do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="9a843-105">Create new domain accounts and map [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] logins.</span></span>  
  
2.  <span data-ttu-id="9a843-106">Configure o computador que está executando o Serviços de Informações da Internet (IIS) do [!INCLUDE[msCoName](../../includes/msconame-md.md)] para sincronizar assinaturas.</span><span class="sxs-lookup"><span data-stu-id="9a843-106">Configure the computer that is running [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) to synchronize subscriptions.</span></span>  
  
3.  <span data-ttu-id="9a843-107">Configure uma publicação de mesclagem para permitir a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-107">Configure a merge publication to allow Web synchronization.</span></span>  
  
4.  <span data-ttu-id="9a843-108">Configure uma ou mais assinaturas para usar a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-108">Configure one or more subscriptions to use Web synchronization.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9a843-109">Se você planeja replicar grandes volumes de dados ou usar tipos de dados grandes, como `varchar(max)`, leia a seção "Replicando grandes volumes de dados" neste tópico.</span><span class="sxs-lookup"><span data-stu-id="9a843-109">If you plan to replicate large volumes of data or use large data types such as `varchar(max)`, read the section "Replicating Large Volumes of Data" in this topic.</span></span>  
  
 <span data-ttu-id="9a843-110">Para configurar a sincronização da Web com êxito, você deve decidir como configurará a segurança para atender a seus requisitos e políticas específicos.</span><span class="sxs-lookup"><span data-stu-id="9a843-110">To successfully set up Web synchronization, you must decide how you will configure security to meet your particular requirements and policies.</span></span> <span data-ttu-id="9a843-111">É melhor tomar essas decisões e criar as contas necessárias antes de tentar configurar o IIS, a publicação e as assinaturas.</span><span class="sxs-lookup"><span data-stu-id="9a843-111">It is best to make these decisions and create the necessary accounts before you attempt to configure IIS, the publication, and subscriptions.</span></span>  
  
 <span data-ttu-id="9a843-112">Nos procedimentos a seguir, uma configuração de segurança simplificada que usa contas locais é descrita, para brevidade.</span><span class="sxs-lookup"><span data-stu-id="9a843-112">In the procedures that follow, a simplified security configuration using local accounts is described, for brevity.</span></span> <span data-ttu-id="9a843-113">Essa configuração simplificada é adequada para instalações onde o IIS e o Publicador e o Distribuidor do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] estão em execução no mesmo computador, embora seja muito mais provável (e recomendável) que você use uma topologia de vários servidores para uma instalação de produção.</span><span class="sxs-lookup"><span data-stu-id="9a843-113">This simplified configuration is suitable for installations where both IIS and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Publisher and Distributor are running on the same computer, even though it is much more likely (and recommended) that you will use a multiple-server topology for a production installation.</span></span> <span data-ttu-id="9a843-114">Você pode substituir contas de domínio para as contas locais nos procedimentos.</span><span class="sxs-lookup"><span data-stu-id="9a843-114">You can substitute domain accounts for the local accounts in the procedures.</span></span>  
  
## <a name="creating-new-accounts-and-mapping-sql-server-logins"></a><span data-ttu-id="9a843-115">Criando novas contas e mapeando logons do SQL Server</span><span class="sxs-lookup"><span data-stu-id="9a843-115">Creating New Accounts and Mapping SQL Server Logins</span></span>  
 <span data-ttu-id="9a843-116">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) conecta-se ao Publicador representando a conta especificada para o pool de aplicativos que está associado ao site de replicação.</span><span class="sxs-lookup"><span data-stu-id="9a843-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) connects to the Publisher by impersonating the account specified for the application pool that is associated with the replication web site.</span></span>  
  
 <span data-ttu-id="9a843-117">A conta usada para o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener deve ter permissões conforme descrito no tópico [Merge Agent Security](merge-agent-security.md), na seção "Conectar-se ao publicador ou ao distribuidor".</span><span class="sxs-lookup"><span data-stu-id="9a843-117">The account used for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener must have permissions as described in [Merge Agent Security](merge-agent-security.md), under the section "Connect to the Publisher or Distributor."</span></span> <span data-ttu-id="9a843-118">Em resumo, a conta deve:</span><span class="sxs-lookup"><span data-stu-id="9a843-118">In summary, the account must:</span></span>  
  
-   <span data-ttu-id="9a843-119">Ser um membro da lista de acesso à publicação (PAL).</span><span class="sxs-lookup"><span data-stu-id="9a843-119">Be a member of the Publication Access List (PAL).</span></span>  
  
-   <span data-ttu-id="9a843-120">Ser mapeada para um logon associado a um usuário no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="9a843-120">Be mapped to a login associated with a user in the publication database.</span></span>  
  
-   <span data-ttu-id="9a843-121">Ser mapeada para um logon associado a um usuário no banco de dados de distribuição.</span><span class="sxs-lookup"><span data-stu-id="9a843-121">Be mapped to a login associated with a user in the distribution database.</span></span>  
  
-   <span data-ttu-id="9a843-122">Ter permissões de Leitura no compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="9a843-122">Have Read permissions on the snapshot share.</span></span>  
  
 <span data-ttu-id="9a843-123">Se esta for a primeira vez que você está usando a Replicação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , você também precisará criar contas e logons para os agentes de replicação.</span><span class="sxs-lookup"><span data-stu-id="9a843-123">If this is the first time you are using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication, you will also need to create accounts and logins for the replication agents.</span></span> <span data-ttu-id="9a843-124">Para obter mais informações, consulte as seções "Configurando a publicação" e "Configurando a assinatura" neste tópico.</span><span class="sxs-lookup"><span data-stu-id="9a843-124">For more information, see the "Configuring the Publication" and "Configuring the Subscription" sections in this topic.</span></span>  
  
 <span data-ttu-id="9a843-125">Antes de configurar a sincronização da Web, é recomendável ler a seção "Práticas recomendadas de segurança para sincronização da Web" neste tópico.</span><span class="sxs-lookup"><span data-stu-id="9a843-125">Before you configure Web synchronization, we recommend that you read the "Security Best Practices for Web Synchronization" section in this topic.</span></span> <span data-ttu-id="9a843-126">Para obter mais informações sobre a sincronização da Web, consulte [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-126">For more information about Web synchronization security, see [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span></span>  
  
## <a name="configuring-the-computer-that-is-running-iis"></a><span data-ttu-id="9a843-127">Configurando o computador que está executando o IIS</span><span class="sxs-lookup"><span data-stu-id="9a843-127">Configuring the Computer That Is Running IIS</span></span>  
 <span data-ttu-id="9a843-128">A sincronização da Web exige instalação e configuração do IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-128">Web synchronization requires that you install and configure IIS.</span></span> <span data-ttu-id="9a843-129">Você precisará da URL para o site de replicação para poder configurar uma publicação para usar a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-129">You will need the URL to the replication Web site before you can configure a publication to use Web synchronization.</span></span>  
  
<span data-ttu-id="9a843-130">Há suporte para sincronização da Web no IIS, a partir da versão 5.0.</span><span class="sxs-lookup"><span data-stu-id="9a843-130">Web synchronization is supported on IIS beginning with version 5.0.</span></span> <span data-ttu-id="9a843-131">O Assistente para Configurar a Sincronização da Web não tem suporte no IIS versão 7.0.</span><span class="sxs-lookup"><span data-stu-id="9a843-131">The Configure Web Synchronization Wizard is not supported on IIS version 7.0.</span></span> <span data-ttu-id="9a843-132">A partir do SQL Server 2012, para usar o componente de sincronização da Web no servidor IIS, recomendamos instalar o SQL Server com replicação.</span><span class="sxs-lookup"><span data-stu-id="9a843-132">Beginning with SQL Server 2012, to use the web sync component on IIS server, we recommend users install SQL Server with replication.</span></span> <span data-ttu-id="9a843-133">Essa pode ser a edição gratuita do SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="9a843-133">This can be the free SQL Server Express edition.</span></span>  
  
 <span data-ttu-id="9a843-134">O SSL é necessário para a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-134">SSL is required for Web synchronization.</span></span> <span data-ttu-id="9a843-135">Você precisará de um certificado de segurança emitido por uma autoridade de certificação.</span><span class="sxs-lookup"><span data-stu-id="9a843-135">You will need a security certificate issued by a certification authority.</span></span> <span data-ttu-id="9a843-136">Apenas para objetivos de teste, é possível usar certificados de segurança emitidos por conta própria.</span><span class="sxs-lookup"><span data-stu-id="9a843-136">For testing purposes only, you can use a self-issued security certificate.</span></span>  
  
  
 <span data-ttu-id="9a843-137">**Para configurar o IIS para sincronização da Web**</span><span class="sxs-lookup"><span data-stu-id="9a843-137">**To configure IIS for Web synchronization**</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="9a843-138">: [Configurar o IIS para sincronização da Web](configure-iis-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="9a843-138">: [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="9a843-139">: [Configurar o IIS 7 para sincronização da Web](configure-iis-7-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="9a843-139">: [Configure IIS 7 for Web Synchronization](configure-iis-7-for-web-synchronization.md)</span></span>  
  
## <a name="creating-a-web-garden"></a><span data-ttu-id="9a843-140">Criando um ambiente Web</span><span class="sxs-lookup"><span data-stu-id="9a843-140">Creating a Web Garden</span></span>  
 <span data-ttu-id="9a843-141">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener dá suporte a duas operações de sincronização simultâneas por thread.</span><span class="sxs-lookup"><span data-stu-id="9a843-141">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener supports two concurrent synchronization operations per thread.</span></span> <span data-ttu-id="9a843-142">Exceder esse limite pode fazer com que o Replication Listener pare de responder.</span><span class="sxs-lookup"><span data-stu-id="9a843-142">Exceeding this limit may cause the Replication Listener to stop responding.</span></span> <span data-ttu-id="9a843-143">O número de threads alocados para replisapi.dll é determinado pela propriedade Máximo de Processos do Operador do pool de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="9a843-143">The number of threads allocated to replisapi.dll is determined by the application pool Maximum Worker Processes property.</span></span> <span data-ttu-id="9a843-144">Por padrão, essa propriedade é definida como 1.</span><span class="sxs-lookup"><span data-stu-id="9a843-144">By default, this property is set at 1.</span></span>  
  
 <span data-ttu-id="9a843-145">É possível dar suporte a um número maior de operações de sincronização simultâneas por CPU aumentando o valor da propriedade Máximo de Processos do Operador.</span><span class="sxs-lookup"><span data-stu-id="9a843-145">You can support a greater number of concurrent synchronization operations per CPU by increasing the Maximum Worker Process property value.</span></span> <span data-ttu-id="9a843-146">A expansão com o aumento do número de processos do operador por CPU é conhecido como a criação de um "Ambiente Web".</span><span class="sxs-lookup"><span data-stu-id="9a843-146">Scaling out by increasing the number of worker processes per CPU is known as creating a "Web garden."</span></span>  
  
 <span data-ttu-id="9a843-147">O ambiente Web permitirá que mais de dois Assinantes sincronizem ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="9a843-147">Web gardening will allow more than two Subscribers to synchronize at the same time.</span></span> <span data-ttu-id="9a843-148">Também aumentará a utilização de CPU por replisapi.dll, o que pode afetar negativamente o desempenho global do servidor.</span><span class="sxs-lookup"><span data-stu-id="9a843-148">It will also increase CPU utilization by replisapi.dll, which can negatively impact overall server performance.</span></span> <span data-ttu-id="9a843-149">É importante balancear essas considerações ao escolher um valor para Máximo de Máximos do Operador.</span><span class="sxs-lookup"><span data-stu-id="9a843-149">It is important to balance these considerations when you choose a value for Maximum Worker Processes.</span></span>  
  
#### <a name="to-increase-maximum-worker-processes-in-iis-7"></a><span data-ttu-id="9a843-150">Para aumentar Máximo de Processos do Operador no IIS 7</span><span class="sxs-lookup"><span data-stu-id="9a843-150">To increase Maximum Worker Processes in IIS 7</span></span>  
  
1.  <span data-ttu-id="9a843-151">No **Gerenciador dos Serviços de Informações da Internet (IIS)** , expanda o nó do servidor local e clique no nó **Pool de Aplicativos** .</span><span class="sxs-lookup"><span data-stu-id="9a843-151">In **Internet Information Services (IIS) Manager**, expand the local server node, and then click on the **Application Pool** node.</span></span>  
  
2.  <span data-ttu-id="9a843-152">Selecione o pool de aplicativos associado ao site de sincronização da Web e clique em **Configurações Avançadas** no painel **Ações** .</span><span class="sxs-lookup"><span data-stu-id="9a843-152">Select the application pool associated with the Web synchronization site, and then click **Advanced Settings** on the **Actions** pane.</span></span>  
  
3.  <span data-ttu-id="9a843-153">Na caixa de diálogo Configurações Avançadas, sob o título **Modelo de Processo** , clique na linha rotulada como **Máximo de Processos do Operador**.</span><span class="sxs-lookup"><span data-stu-id="9a843-153">On the Advanced Settings dialog, under the **Process Model** heading, click the row labeled **Maximum Worker Processes**.</span></span> <span data-ttu-id="9a843-154">Altere o valor da propriedade e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9a843-154">Change the property value, and then click **OK**.</span></span>  
  
## <a name="configuring-the-publication"></a><span data-ttu-id="9a843-155">Configurando a publicação</span><span class="sxs-lookup"><span data-stu-id="9a843-155">Configuring the Publication</span></span>  
 <span data-ttu-id="9a843-156">Para usar a sincronização da Web, primeiro crie uma publicação da mesma forma como o faria para uma topologia de mesclagem padrão.</span><span class="sxs-lookup"><span data-stu-id="9a843-156">To use Web synchronization, create a publication in the same way that you would for a standard merge topology.</span></span> <span data-ttu-id="9a843-157">Para obter mais informações, consulte [Publicar dados e objetos de banco de dados](publish/publish-data-and-database-objects.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-157">For more information, see [Publish Data and Database Objects](publish/publish-data-and-database-objects.md).</span></span>  
  
 <span data-ttu-id="9a843-158">Depois de criar a publicação, habilite a opção para permitir a sincronização da Web usando um dos seguintes métodos: [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]ou Replication Management Objects (RMO).</span><span class="sxs-lookup"><span data-stu-id="9a843-158">After the publication is created, enable the option to allow for Web synchronization by using one of the following methods: [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span> <span data-ttu-id="9a843-159">Para habilitar a sincronização da Web, é necessário fornecer o endereço do servidor Web para conexões do Assinante.</span><span class="sxs-lookup"><span data-stu-id="9a843-159">To enable Web synchronization, you will need to supply the Web server address for Subscriber connections.</span></span>  
  
 <span data-ttu-id="9a843-160">Se você estiver usando um Publicador pela primeira vez, será necessário configurar também um Distribuidor e um compartilhamento de instantâneos.</span><span class="sxs-lookup"><span data-stu-id="9a843-160">If you are using a Publisher for the first time, you must also configure a Distributor and a snapshot share.</span></span> <span data-ttu-id="9a843-161">O Agente de Mesclagem, em cada Assinante, precisa ter permissões de leitura no compartilhamento de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="9a843-161">The Merge Agent at each Subscriber must have read permissions on the snapshot share.</span></span> <span data-ttu-id="9a843-162">Para obter mais informações, consulte [Configurar a distribuição](configure-distribution.md) e [Proteger uma pasta de instantâneo](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-162">For more information, see [Configure Distribution](configure-distribution.md) and [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
 <span data-ttu-id="9a843-163">`gen` é uma palavra reservada em arquivos XML websync.</span><span class="sxs-lookup"><span data-stu-id="9a843-163">`gen` is a reserved word in websync xml files.</span></span> <span data-ttu-id="9a843-164">Não tente publicar tabelas que contêm colunas nomeadas `gen`.</span><span class="sxs-lookup"><span data-stu-id="9a843-164">Do not attempt to publish tables containing columns named `gen`.</span></span>  
  
## <a name="configuring-the-subscription"></a><span data-ttu-id="9a843-165">Configurando a assinatura</span><span class="sxs-lookup"><span data-stu-id="9a843-165">Configuring the Subscription</span></span>  
 <span data-ttu-id="9a843-166">Depois de habilitar uma publicação e configurar o IIS, crie uma assinatura pull e especifique que ela deve ser sincronizada usando o IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-166">After you enable a publication and configure IIS, create a pull subscription and specify that the pull subscription should synchronize by using IIS.</span></span> <span data-ttu-id="9a843-167">(A sincronização da Web tem suporte apenas para assinaturas pull.)</span><span class="sxs-lookup"><span data-stu-id="9a843-167">(Web synchronization is supported only for pull subscriptions.)</span></span>  
  
## <a name="upgrading-from-an-earlier-version-of-sql-server"></a><span data-ttu-id="9a843-168">Atualizando de uma versão anterior do SQL Server</span><span class="sxs-lookup"><span data-stu-id="9a843-168">Upgrading from an Earlier Version of SQL Server</span></span>  
 <span data-ttu-id="9a843-169">Se houver uma topologia de sincronização da Web existente e você atualizar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], será necessário verificar se a última versão de Replisapi.dll foi copiada para o diretório virtual usado pela sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-169">If you have an existing Web synchronization topology configured and you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must ensure that the latest version of Replisapi.dll is copied to the virtual directory used by Web synchronization.</span></span> <span data-ttu-id="9a843-170">Por padrão, a última versão de Replisapi.dll está localizada em C:\Arquivos de Programas\Microsoft SQL Server\\<nnn\>\COM.</span><span class="sxs-lookup"><span data-stu-id="9a843-170">By default, the latest version of Replisapi.dll is located in C:\Program Files\Microsoft SQL Server\\<nnn\>\COM.</span></span>  
  
## <a name="replicating-large-volumes-of-data"></a><span data-ttu-id="9a843-171">Replicando grandes volumes de dados</span><span class="sxs-lookup"><span data-stu-id="9a843-171">Replicating Large Volumes of Data</span></span>  
 <span data-ttu-id="9a843-172">Para ajudar a evitar possíveis problemas de memória em computadores Assinantes, a sincronização da Web usa um tamanho padrão máximo de 100 MB para o arquivo XML usado para transferir alterações.</span><span class="sxs-lookup"><span data-stu-id="9a843-172">To help avoid potential memory problems on Subscriber computers Web synchronization uses a default maximum size of 100 MB for the XML file used to transfer changes.</span></span> <span data-ttu-id="9a843-173">O limite pode ser aumentado definindo a seguinte chave do registro:</span><span class="sxs-lookup"><span data-stu-id="9a843-173">The limit can be raised by setting the following registry key:</span></span>  
  
 <span data-ttu-id="9a843-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span><span class="sxs-lookup"><span data-stu-id="9a843-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span></span>  
  
 <span data-ttu-id="9a843-175">**WebSyncMaxXmlSize DWORD 2000000**</span><span class="sxs-lookup"><span data-stu-id="9a843-175">**WebSyncMaxXmlSize DWORD 2000000**</span></span>  
  
 <span data-ttu-id="9a843-176">O intervalo de valores aceitáveis para esta chave é de 100 MB a 4 GB.</span><span class="sxs-lookup"><span data-stu-id="9a843-176">The range of acceptable values for this key is 100 MB to 4GB.</span></span> <span data-ttu-id="9a843-177">O valor é especificado em KB.</span><span class="sxs-lookup"><span data-stu-id="9a843-177">The value is specified in KB.</span></span> <span data-ttu-id="9a843-178">Definir este parâmetro como um valor alto não garante que você pode sincronizar essa quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="9a843-178">Setting this parameter to a high value does not guarantee that you can synchronize that amount of data.</span></span> <span data-ttu-id="9a843-179">O limite efetivo é restringido pela quantidade de memória contígua disponível no computador de Assinante.</span><span class="sxs-lookup"><span data-stu-id="9a843-179">The effective limit is constrained by how much contiguous memory is available on the Subscriber computer.</span></span> <span data-ttu-id="9a843-180">Se for necessário um valor maior que 100 MB, recomendamos que você aumente o valor de modo incremental e teste o consumo de memória com uma carga de trabalho típica no Assinante.</span><span class="sxs-lookup"><span data-stu-id="9a843-180">If you must have a value larger than 100 MB, we recommend that you increase the value incrementally and test memory consumption with a typical workload on the Subscriber.</span></span>  
  
 <span data-ttu-id="9a843-181">O tamanho máximo do arquivo XML é 4 GB, mas a replicação sincroniza as alterações desse arquivo em lotes.</span><span class="sxs-lookup"><span data-stu-id="9a843-181">The maximum size for the XML file is 4 GB, but replication synchronizes the changes from that file in batches.</span></span> <span data-ttu-id="9a843-182">O tamanho de lote máximo de dados e metadados é de 25 MB.</span><span class="sxs-lookup"><span data-stu-id="9a843-182">The maximum batch size of data and metadata is 25 MB.</span></span> <span data-ttu-id="9a843-183">Você deve garantir que os dados não excedam a aproximadamente 20 MB em cada lote, o que permite metadados e qualquer outra sobrecarga.</span><span class="sxs-lookup"><span data-stu-id="9a843-183">You must ensure that the data in each batch does not exceed approximately 20 MB, which allows for metadata and any other overhead.</span></span> <span data-ttu-id="9a843-184">Esse limite tem as seguintes implicações:</span><span class="sxs-lookup"><span data-stu-id="9a843-184">This limit has the following implications:</span></span>  
  
-   <span data-ttu-id="9a843-185">Você não pode reproduzir nenhuma coluna que faça com que os dados e metadados excedam 25 MB.</span><span class="sxs-lookup"><span data-stu-id="9a843-185">You cannot replicate any column that causes the data and metadata to exceed 25 MB.</span></span> <span data-ttu-id="9a843-186">Esse poderia ser um assunto quando você estiver reproduzindo linhas que contenham tipos de dados grandes, como `varchar(max)`.</span><span class="sxs-lookup"><span data-stu-id="9a843-186">This might be an issue when you are replicating rows that contain large data types, such as `varchar(max)`.</span></span>  
  
-   <span data-ttu-id="9a843-187">Se você reproduzir grandes volumes de dados, talvez tenha que ajustar o tamanho do lote do Agente de Mesclagem.</span><span class="sxs-lookup"><span data-stu-id="9a843-187">If you replicate large volumes of data, you might have to adjust the Merge Agent batch size.</span></span>  
  
 <span data-ttu-id="9a843-188">O tamanho do lote para replicação de mesclagem é medido em *gerações*, que são coleções de alterações por artigo.</span><span class="sxs-lookup"><span data-stu-id="9a843-188">Batch size for merge replication is measured in *generations*, which are collections of changes per article.</span></span> <span data-ttu-id="9a843-189">O número de gerações em um lote é especificado usando os parâmetros- `DownloadGenerationsPerBatch` e- `UploadGenerationsPerBatch` do agente de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="9a843-189">The number of generations in a batch is specified by using the-`DownloadGenerationsPerBatch` and -`UploadGenerationsPerBatch` parameters of the Merge Agent.</span></span> <span data-ttu-id="9a843-190">Para obter mais informações, consulte [Replication Merge Agent](agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-190">For more information, see [Replication Merge Agent](agents/replication-merge-agent.md).</span></span>  
  
 <span data-ttu-id="9a843-191">Para grandes volumes de dados, especifique um número pequeno para cada um dos parâmetros para envio em lote.</span><span class="sxs-lookup"><span data-stu-id="9a843-191">For large volumes of data, specify a small number for each of the batching parameters.</span></span> <span data-ttu-id="9a843-192">É recomendável começar com um valor de 10 e ajustá-lo com base nas necessidades e no desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9a843-192">We recommend that you start with a value of 10, and then tune based on application needs and performance.</span></span> <span data-ttu-id="9a843-193">Normalmente, esses parâmetros são especificados em um perfil de agente.</span><span class="sxs-lookup"><span data-stu-id="9a843-193">Typically, these parameters are specified in an agent profile.</span></span> <span data-ttu-id="9a843-194">Para obter mais informações sobre perfis, consulte [Replication Agent Profiles](agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-194">For more information about profiles, see [Replication Agent Profiles](agents/replication-agent-profiles.md).</span></span>  
  
## <a name="security-best-practices-for-web-synchronization"></a><span data-ttu-id="9a843-195">Práticas recomendadas de segurança para a sincronização da Web</span><span class="sxs-lookup"><span data-stu-id="9a843-195">Security Best Practices for Web Synchronization</span></span>  
 <span data-ttu-id="9a843-196">Há muitas opções para configurações relacionadas à segurança na sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-196">There are many choices for security-related settings in Web synchronization.</span></span> <span data-ttu-id="9a843-197">É recomendável usar a abordagem a seguir:</span><span class="sxs-lookup"><span data-stu-id="9a843-197">We recommend the following approach:</span></span>  
  
-   <span data-ttu-id="9a843-198">O Distribuidor e o Publicador do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] podem estar no mesmo computador (uma configuração típica da replicação de mesclagem).</span><span class="sxs-lookup"><span data-stu-id="9a843-198">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributor and Publisher can be on the same computer (a typical setup for merge replication).</span></span> <span data-ttu-id="9a843-199">No entanto, o IIS dever ser instalado em um computador separado.</span><span class="sxs-lookup"><span data-stu-id="9a843-199">However, IIS should be installedon a separate computer.</span></span>  
  
-   <span data-ttu-id="9a843-200">Use o protocolo SSL para criptografar a conexão entre o Assinante e o computador que está executando o IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-200">Use Secure Sockets Layer (SSL) to encrypt the connection between the Subscriber and the computer running IIS.</span></span> <span data-ttu-id="9a843-201">Isso é necessário para a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-201">This is required for Web synchronization.</span></span>  
  
-   <span data-ttu-id="9a843-202">Use a autenticação básica para conexões do Assinante com o IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-202">Use Basic Authentication for connections from the Subscriber to IIS.</span></span> <span data-ttu-id="9a843-203">Usando a Autenticação básica, o IIS pode fazer conexões para o Publicador/Distribuidor em nome do Assinante, sem requerer delegação.</span><span class="sxs-lookup"><span data-stu-id="9a843-203">Using Basic Authentication, IIS can make connections to the Publisher/Distributor on behalf of the Subscriber without requiring delegation.</span></span> <span data-ttu-id="9a843-204">A delegação é necessária quando se usa a Autenticação integrada.</span><span class="sxs-lookup"><span data-stu-id="9a843-204">Delegation is required if you use Integrated Authentication.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="9a843-205">A autenticação básica é o método pelo qual são passadas credenciais ao IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-205">Basic Authentication is the method by which credentials are passed to IIS.</span></span> <span data-ttu-id="9a843-206">A Autenticação Básica não impede a especificação de contas do domínio do Windows para conexões feitas no IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-206">Basic Authentication does not prevent specifying Windows domain accounts for connections that are made to IIS.</span></span>  
  
-   <span data-ttu-id="9a843-207">Especifique que o Agente de Instantâneo seja executado em uma conta de domínio do Windows, e especifique que o agente faça conexões de acordo com essa conta.</span><span class="sxs-lookup"><span data-stu-id="9a843-207">Specify that the Snapshot Agent should run under a Windows domain account, and specify that the agent should make connections as that account.</span></span> <span data-ttu-id="9a843-208">(Essa é a configuração padrão.) Especifique que cada Agente de Mesclagem seja executado na conta de domínio do usuário que utiliza o computador Assinante, e especifique que o agente faça conexões segundo essa conta.</span><span class="sxs-lookup"><span data-stu-id="9a843-208">(This is the default configuration.) Specify that each Merge Agent should run under the domain account of the user that uses the Subscriber computer, and specify that the agent should make connections as that account.</span></span>  
  
     <span data-ttu-id="9a843-209">Para obter mais informações sobre permissões requeridas pelos agentes, consulte [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-209">For more information about the permissions that are required by agents, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="9a843-210">Especifique a mesma conta de domínio que o Agente de Mesclagem usa quando você especifica uma conta e uma senha na página de **informações do servidor Web** do assistente para nova assinatura ou quando você especifica valores para **@internet_url** os **@internet_login** parâmetros e de [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="9a843-210">Specify the same domain account as the one the Merge Agent uses when you specify an account and password on the **Web Server Information** page of the New Subscription Wizard or when you specify values for the **@internet_url** and **@internet_login** parameters of [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="9a843-211">Essa conta deve ter permissões de leitura para o compartilhamento de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="9a843-211">This account must have read permissions for the snapshot share.</span></span>  
  
-   <span data-ttu-id="9a843-212">Cada publicação deve usar um diretório virtual separado para o IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-212">Each publication should use a separate virtual directory for IIS.</span></span>  
  
-   <span data-ttu-id="9a843-213">A conta sob a qual o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (Replisapi.dll) executa também é a conta que se conectará ao Publicador e ao Distribuidor durante a sincronização.</span><span class="sxs-lookup"><span data-stu-id="9a843-213">The account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (Replisapi.dll) runs is also the account that will connect to the Publisher and Distributor during synchronization.</span></span> <span data-ttu-id="9a843-214">Essa conta deve ser mapeada para uma conta de logon do SQL no Publicador e no Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="9a843-214">This account must be mapped to a SQL Login account on the Publisher and Distributor.</span></span> <span data-ttu-id="9a843-215">Para obter mais informações, consulte a seção "Definindo permissões para o SQL Server Replication Listener" no [Configurar IIS para sincronização da Web](configure-iis-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-215">For more information, see the "Setting Permissions for the SQL Server Replication Listener" section in the [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md).</span></span>  
  
-   <span data-ttu-id="9a843-216">É possível usar FTP para entregar o instantâneo do Publicador ao computador que está executando o IIS.</span><span class="sxs-lookup"><span data-stu-id="9a843-216">You can use FTP to deliver the snapshot from the Publisher to the computer that is running IIS.</span></span> <span data-ttu-id="9a843-217">O instantâneo é sempre entregue do computador que está executando o IIS ao Assinante, usando HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9a843-217">The snapshot is always delivered from the computer that is running IIS to the Subscriber by using HTTPS.</span></span> <span data-ttu-id="9a843-218">Para obter mais informações, consulte [Transferir instantâneos pelo FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-218">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
-   <span data-ttu-id="9a843-219">Se os servidores da topologia de replicação estiverem protegidos por firewall, poderá ser necessário abrir portas no firewall para habilitar a sincronização da Web.</span><span class="sxs-lookup"><span data-stu-id="9a843-219">If servers in the replication topology are behind a firewall, you might need to open ports in the firewall to enable Web synchronization.</span></span>  
  
    -   <span data-ttu-id="9a843-220">O computador Assinante conecta-se ao computador que está executando o IIS por HTTPS usando o SSL que, normalmente, é configurado para usar a porta 443.</span><span class="sxs-lookup"><span data-stu-id="9a843-220">The Subscriber computer connects to the computer that is running IIS over HTTPS using SSL, which is typically configured to use port 443.</span></span> <span data-ttu-id="9a843-221">Os assinantes do[!INCLUDE[ssEW](../../includes/ssew-md.md)] também podem ser conectados por HTTP, que é configurado normalmente para usar a porta 80.</span><span class="sxs-lookup"><span data-stu-id="9a843-221">[!INCLUDE[ssEW](../../includes/ssew-md.md)] Subscribers can also connect over HTTP, which is typically configured to use port 80.</span></span>  
  
    -   <span data-ttu-id="9a843-222">O computador que está executando o IIS, em geral, conecta-se ao Publicador ou ao Distribuidor usando a porta 1433 (instância padrão).</span><span class="sxs-lookup"><span data-stu-id="9a843-222">The computer that is running IIS typically connects to the Publisher or Distributor using port 1433 (default instance).</span></span> <span data-ttu-id="9a843-223">Quando o Publicador ou o Distribuidor é uma instância nomeada em um servidor com outra instância padrão, a porta 1500 é normalmente usada para conexão à instância nomeada.</span><span class="sxs-lookup"><span data-stu-id="9a843-223">When the Publisher or Distributor is a named instance on a server with another default instance, port 1500 is typically used to connect to the named instance.</span></span>  
  
    -   <span data-ttu-id="9a843-224">Se o computador que está executando o IIS estiver separado do Distribuidor por um firewall, e um compartilhamento de FTP for usado para a entrega de instantâneo, as portas usadas para o FTP precisarão ser abertas.</span><span class="sxs-lookup"><span data-stu-id="9a843-224">If the computer running IIS is separated from the Distributor by a firewall and an FTP share is used for snapshot delivery, the ports used for FTP must be opened.</span></span> <span data-ttu-id="9a843-225">Para obter mais informações, consulte [Transferir instantâneos pelo FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-225">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="9a843-226">A abertura de portas no firewall pode deixar o servidor exposto a ataques mal-intencionados.</span><span class="sxs-lookup"><span data-stu-id="9a843-226">Opening ports in your firewall can leave your server exposed to malicious attacks.</span></span> <span data-ttu-id="9a843-227">Certifique-se de conhecer os sistemas de firewall antes de abrir portas.</span><span class="sxs-lookup"><span data-stu-id="9a843-227">Make sure that you understand firewall systems before you open ports.</span></span> <span data-ttu-id="9a843-228">Para obter mais informações, consulte [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="9a843-228">For more information, see [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9a843-229">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="9a843-229">See Also</span></span>  
 [<span data-ttu-id="9a843-230">Sincronização da Web para replicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="9a843-230">Web Synchronization for Merge Replication</span></span>](web-synchronization-for-merge-replication.md)  
  
  
