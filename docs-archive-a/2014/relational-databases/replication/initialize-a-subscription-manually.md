---
title: Inicializar uma assinatura manualmente | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- manual subscription initialization [SQL Server replication]
- subscriptions [SQL Server replication], initializing
- initializing subscriptions [SQL Server replication], without snapshots
ms.assetid: 27a1bc38-e498-4fff-8082-04b52aa4b22c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4eaeb50da9e4b71a08ec78614ae62ea33e3dc0d1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569885"
---
# <a name="initialize-a-subscription-manually"></a><span data-ttu-id="04551-102">Inicializar uma assinatura manualmente</span><span class="sxs-lookup"><span data-stu-id="04551-102">Initialize a Subscription Manually</span></span>
  <span data-ttu-id="04551-103">Este tópico descreve como inicializar uma assinatura manualmente no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] usando o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou o [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="04551-103">This topic describes how to initialize a subscription manually in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="04551-104">Embora o instantâneo inicial seja normalmente usado para inicializar uma assinatura, as assinaturas para publicações podem ser inicializadas sem o uso de um instantâneo, desde que o esquema e os dados iniciais já estejam presentes no assinante.</span><span class="sxs-lookup"><span data-stu-id="04551-104">While the initial snapshot is normally used to initialize a subscription, subscriptions to publications can be initialized without using a snapshot, provided that the schema and initial data are already present at the subscriber.</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="04551-105">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="04551-105">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="04551-106">Limitações e restrições</span><span class="sxs-lookup"><span data-stu-id="04551-106">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="04551-107">Por exemplo, se houver atividade em um banco de dados publicado que usa replicação transacional entre a hora que os dados e o esquema são copiados no Assinante e a hora em que a assinatura é inicializada manualmente, talvez as alterações resultantes dessa atividade não sejam replicadas no Assinante.</span><span class="sxs-lookup"><span data-stu-id="04551-107">If there is activity on a database published using transactional replication between the time data and schema are copied to the Subscriber and the time at which the subscription is manually initialized, changes resulting from this activity might not be replicated to the Subscriber.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="04551-108">Usando o SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="04551-108">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="04551-109">Inicialize manualmente uma assinatura a uma publicação, copiando o esquema (e normalmente dados) ao banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-109">Initialize a subscription to a publication manually by copying the schema (and typically data) to the subscription database.</span></span> <span data-ttu-id="04551-110">O esquema e os dados devem corresponder ao banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="04551-110">The schema and data should match the publication database.</span></span> <span data-ttu-id="04551-111">Então especifique que a assinatura não requer esquema e dados na página **Inicializar Assinaturas** do Assistente de Novas Assinaturas.</span><span class="sxs-lookup"><span data-stu-id="04551-111">Then specify that the subscription does not require schema and data on the **Initialize Subscriptions** page of the New Subscription Wizard.</span></span> <span data-ttu-id="04551-112">Para mais informações sobre como acessar esse assistente, consulte [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) e [Create a Pull Subscription](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-112">For more information about accessing this wizard, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) and [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
 <span data-ttu-id="04551-113">Quando você sincroniza a assinatura pela primeira vez, os objetos e metadados exigidos pela replicação são copiados para o banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-113">When you synchronize the subscription for the first time, the objects and metadata required by replication are copied to the subscription database.</span></span>  
  
#### <a name="to-initialize-a-subscription-to-a-publication-manually"></a><span data-ttu-id="04551-114">Para inicializar manualmente uma assinatura para uma publicação.</span><span class="sxs-lookup"><span data-stu-id="04551-114">To initialize a subscription to a publication manually</span></span>  
  
1.  <span data-ttu-id="04551-115">Certifique-se que o esquema e dados são copiados para o banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-115">Ensure that the schema and data are copied to the subscription database.</span></span>  
  
2.  <span data-ttu-id="04551-116">Desmarque a caixa de seleção **Inicializar** na página **Inicializar Assinaturas** do Assistente para Novas Assinaturas.</span><span class="sxs-lookup"><span data-stu-id="04551-116">Clear the **Initialize** check box on the **Initialize Subscriptions** page of the New Subscription Wizard.</span></span> <span data-ttu-id="04551-117">Faça isto para cada assinatura que exige apenas que objetos de replicação e metadados sejam copiados.</span><span class="sxs-lookup"><span data-stu-id="04551-117">Do this for each subscription that requires only replication objects and metadata to be copied.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="04551-118">Usando o Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="04551-118">Using Transact-SQL</span></span>  
 <span data-ttu-id="04551-119">As assinaturas podem ser inicializadas manualmente usando procedimentos de replicação armazenados.</span><span class="sxs-lookup"><span data-stu-id="04551-119">Subscriptions can be initialized manually using replication stored procedures.</span></span>  
  
#### <a name="to-manually-initialize-a-pull-subscription-to-a-transactional-publication"></a><span data-ttu-id="04551-120">Para inicializar manualmente uma assinatura pull para uma publicação transacional</span><span class="sxs-lookup"><span data-stu-id="04551-120">To manually initialize a pull subscription to a transactional publication</span></span>  
  
1.  <span data-ttu-id="04551-121">Certifique-se que o esquema e dados existam no banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-121">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="04551-122">Para obter mais informações, consulte [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="04551-122">For more information, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
2.  <span data-ttu-id="04551-123">No Publicador do banco de dados da publicação, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-123">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="04551-124">Especifique **@publication** , **@subscriber** , o nome do banco de dados no Assinante que contém o dado publicado para **@destination_db** , um valor de **pull** para **@subscription_type** e um valor de **suporte de replicação somente** para **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="04551-124">Specify **@publication**, **@subscriber**, the name of the database at the Subscriber containing the published data for **@destination_db**, a value of **pull** for **@subscription_type**, and a value of **replication support only** for **@sync_type**.</span></span> <span data-ttu-id="04551-125">Para obter mais informações, consulte [Create a Pull Subscription](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-125">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
3.  <span data-ttu-id="04551-126">No Assinante, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-126">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="04551-127">Para atualizar assinaturas, consulte [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span><span class="sxs-lookup"><span data-stu-id="04551-127">For updating subscriptions, see [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span></span>  
  
4.  <span data-ttu-id="04551-128">No Assinante, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-128">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="04551-129">Para obter mais informações, consulte [Create a Pull Subscription](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-129">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
5.  <span data-ttu-id="04551-130">Inicie o Distribution Agent para transferir objetos de replicação e baixe as alterações mais recentes do Publicador.</span><span class="sxs-lookup"><span data-stu-id="04551-130">Start the Distribution Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="04551-131">Para obter mais informações, consulte [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-131">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-push-subscription-to-a-transactional-publication"></a><span data-ttu-id="04551-132">Para inicializar manualmente uma assinatura push para uma publicação transacional</span><span class="sxs-lookup"><span data-stu-id="04551-132">To manually initialize a push subscription to a transactional publication</span></span>  
  
1.  <span data-ttu-id="04551-133">Certifique-se que o esquema e dados existam no banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-133">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="04551-134">Para obter mais informações, consulte [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="04551-134">For more information, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
2.  <span data-ttu-id="04551-135">No Publicador do banco de dados da publicação, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-135">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="04551-136">Especifique o nome do banco de dados no Assinante que contém o dado publicado para **@destination_db** , um valor de **Push** para **@subscription_type** e um valor de **suporte de replicação somente** para **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="04551-136">Specify the name of the database at the Subscriber containing the published data for **@destination_db**, a value of **push** for **@subscription_type**, and a value of **replication support only** for **@sync_type**.</span></span> <span data-ttu-id="04551-137">Para atualizar assinaturas, consulte [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span><span class="sxs-lookup"><span data-stu-id="04551-137">For updating subscriptions, see [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span></span>  
  
3.  <span data-ttu-id="04551-138">No Publicador do banco de dados de publicação, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-138">At the Publisher on the publication database, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="04551-139">Para obter mais informações, consulte [Create a Push Subscription](create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-139">For more information, see [Create a Push Subscription](create-a-push-subscription.md).</span></span>  
  
4.  <span data-ttu-id="04551-140">Inicie o Distribution Agent para transferir objetos de replicação e baixe as alterações mais recentes do Publicador.</span><span class="sxs-lookup"><span data-stu-id="04551-140">Start the Distribution Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="04551-141">Para obter mais informações, consulte [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-141">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-pull-subscription-to-a-merge-publication"></a><span data-ttu-id="04551-142">Para inicializar manualmente uma assinatura pull para uma publicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="04551-142">To manually initialize a pull subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="04551-143">Certifique-se que o esquema e dados existam no banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-143">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="04551-144">Isso pode ser feito restaurando um backup do banco de dados de publicação no Assinante.</span><span class="sxs-lookup"><span data-stu-id="04551-144">This can be done by restoring a backup of the publication database at the Subscriber.</span></span>  
  
2.  <span data-ttu-id="04551-145">No Publicador, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-145">At the Publisher, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="04551-146">Especifique **@publication** , **@subscriber** , e **@subscriber_db** um valor de **pull** para **@subscription_type** .</span><span class="sxs-lookup"><span data-stu-id="04551-146">Specify **@publication**, **@subscriber**, **@subscriber_db**, and a value of **pull** for **@subscription_type**.</span></span> <span data-ttu-id="04551-147">Isso registra a assinatura pull.</span><span class="sxs-lookup"><span data-stu-id="04551-147">This registers the pull subscription.</span></span>  
  
3.  <span data-ttu-id="04551-148">No Assinante, no banco de dados que contém os dados publicados, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-148">At the Subscriber on the database containing the published data, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="04551-149">Especifique o valor **none** para **@sync_type**.</span><span class="sxs-lookup"><span data-stu-id="04551-149">Specify a value of **none** for **@sync_type**.</span></span>  
  
4.  <span data-ttu-id="04551-150">No Assinante, execute o [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-150">At the Subscriber, execute [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="04551-151">Para obter mais informações, consulte [Create a Pull Subscription](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-151">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
5.  <span data-ttu-id="04551-152">Inicie o Agente de Mesclagem para transferir objetos de replicação e baixe as alterações mais recentes do Publicador.</span><span class="sxs-lookup"><span data-stu-id="04551-152">Start the Merge Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="04551-153">Para obter mais informações, consulte [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-153">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-push-subscription-to-a-merge-publication"></a><span data-ttu-id="04551-154">Para inicializar manualmente uma assinatura push para uma publicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="04551-154">To manually initialize a push subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="04551-155">Certifique-se que o esquema e dados existam no banco de dados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="04551-155">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="04551-156">Isso pode ser feito restaurando um backup do banco de dados de publicação no Assinante.</span><span class="sxs-lookup"><span data-stu-id="04551-156">This can be done by restoring a backup of the publication database at the Subscriber.</span></span>  
  
2.  <span data-ttu-id="04551-157">No Publicador, no banco de dados da publicação, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-157">At the Publisher on the publication database, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="04551-158">Especifique o nome do banco de dados no Assinante que contém o dado publicado para **@subscriber_db** , um valor de **Push** para **@subscription_type** e um valor de **None** para **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="04551-158">Specify the name of the database at the Subscriber containing the published data for **@subscriber_db**, a value of **push** for **@subscription_type**, and a value of **none** for **@sync_type**.</span></span>  
  
3.  <span data-ttu-id="04551-159">No Publicador, no banco de dados da publicação, execute [sp_addmergepushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="04551-159">At the Publisher on the publication database, execute [sp_addmergepushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="04551-160">Para obter mais informações, consulte [Create a Push Subscription](create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-160">For more information, see [Create a Push Subscription](create-a-push-subscription.md).</span></span>  
  
4.  <span data-ttu-id="04551-161">Inicie o Agente de Mesclagem para transferir objetos de replicação e baixe as alterações mais recentes do Publicador.</span><span class="sxs-lookup"><span data-stu-id="04551-161">Start the Merge Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="04551-162">Para obter mais informações, consulte [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="04551-162">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="04551-163">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="04551-163">See Also</span></span>  
 <span data-ttu-id="04551-164">[Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) </span><span class="sxs-lookup"><span data-stu-id="04551-164">[Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) </span></span>  
 <span data-ttu-id="04551-165">[Fazer backup e restaurar bancos de dados replicados](administration/back-up-and-restore-replicated-databases.md) </span><span class="sxs-lookup"><span data-stu-id="04551-165">[Back Up and Restore Replicated Databases](administration/back-up-and-restore-replicated-databases.md) </span></span>  
 [<span data-ttu-id="04551-166">Replication Security Best Practices</span><span class="sxs-lookup"><span data-stu-id="04551-166">Replication Security Best Practices</span></span>](security/replication-security-best-practices.md)  
  
  
