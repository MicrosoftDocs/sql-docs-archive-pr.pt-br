---
title: Filtros de linha com parâmetros | Microsoft Docs
ms.custom: ''
ms.date: 06/02/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], dynamic filters
- merge replication [SQL Server replication], dynamic filters
- parameterized filters [SQL Server replication]
- filters [SQL Server replication], dynamic
- merge replication parameterized filters [SQL Server replication]
- publications [SQL Server replication], parameterized filters
- parameterized filters [SQL Server replication], about parameterized filters
- filters [SQL Server replication], parameterized
- dynamic filters [SQL Server replication]
ms.assetid: b48a6825-068f-47c8-afdc-c83540da4639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a293d5dfc6bfbdf66afb680f0604117e2cc02b2d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569374"
---
# <a name="parameterized-row-filters"></a><span data-ttu-id="2f99d-102">Parameterized Row Filters</span><span class="sxs-lookup"><span data-stu-id="2f99d-102">Parameterized Row Filters</span></span>
  <span data-ttu-id="2f99d-103">Os filtros de linha com parâmetros permitem que diferentes partições de dados sejam enviadas a diferentes Assinantes sem a necessidade de criar múltiplas publicações (os filtros com parâmetros foram referidos como filtros dinâmicos em versões anteriores do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="2f99d-103">Parameterized row filters allow different partitions of data to be sent to different Subscribers without requiring multiple publications to be created (parameterized filters were referred to as dynamic filters in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="2f99d-104">Uma partição é um subconjunto das linhas de uma tabela; dependendo das configurações escolhidas ao criar um filtro de linha com parâmetros, cada linha de uma tabela publicada pode pertencer a uma partição somente (o que produz partições que não se sobrepõem) ou a duas ou mais partições (o que produzem partições que se sobrepõem).</span><span class="sxs-lookup"><span data-stu-id="2f99d-104">A partition is a subset of the rows in a table; depending on the settings chosen when creating a parameterized row filter, each row in a published table can belong to one partition only (which produces nonoverlapping partitions) or to two or more partitions (which produces overlapping partitions).</span></span>  
  
 <span data-ttu-id="2f99d-105">Partições que não se sobrepõem podem ser compartilhadas entre assinaturas ou podem ser restringidas de modo que só uma assinatura receba uma determinada partição.</span><span class="sxs-lookup"><span data-stu-id="2f99d-105">Nonoverlapping partitions can be shared among subscriptions or they can be restricted so that only one subscription receives a given partition.</span></span> <span data-ttu-id="2f99d-106">As configurações que controlam comportamento de partição são descritas em "Usando opções de filtragem apropriadas", mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="2f99d-106">The settings that control partition behavior are described in "Using the Appropriate Filtering Options" later in this topic.</span></span> <span data-ttu-id="2f99d-107">Usando essas configurações você pode personalizar a filtragem com parâmetros de acordo com o aplicativo e os requisitos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="2f99d-107">Using these settings you can tailor parameterized filtering according to application and performance requirements.</span></span> <span data-ttu-id="2f99d-108">Em geral, partições que se sobrepõem permitem maior flexibilidade e partições que não se sobrepõem replicadas a uma única assinatura proporcionam melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="2f99d-108">In general, overlapping partitions allow for greater flexibility, and nonoverlapping partitions replicated to a single subscription provide better performance.</span></span>  
  
 <span data-ttu-id="2f99d-109">Os filtros com parâmetros são usados em uma única tabela e normalmente são combinados com filtros de junção para estender a filtragem a tabelas relacionadas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-109">Parameterized filters are used on a single table and are typically combined with join filters to extend filtering to related tables.</span></span> <span data-ttu-id="2f99d-110">Para obter mais informações, consulte [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-110">For more information, see [Join Filters](join-filters.md).</span></span>  
  
 <span data-ttu-id="2f99d-111">Para definir ou modificar um filtro de linha com parâmetros, consulte [Definir e modificar um filtro de linha com parâmetros para um artigo de mesclagem](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-111">To define or modify a parameterized row filter, see [Define and Modify a Parameterized Row Filter for a Merge Article](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
## <a name="how-parameterized-filters-work"></a><span data-ttu-id="2f99d-112">Como funcionam os filtros com parâmetros</span><span class="sxs-lookup"><span data-stu-id="2f99d-112">How Parameterized Filters Work</span></span>  
 <span data-ttu-id="2f99d-113">Um filtro de linha com parâmetros usa uma cláusula WHERE para selecionar os dados apropriados a serem publicados.</span><span class="sxs-lookup"><span data-stu-id="2f99d-113">A parameterized row filter uses a WHERE clause to select the appropriate data to be published.</span></span> <span data-ttu-id="2f99d-114">Em vez de especificar um valor literal na cláusula (como faria com um filtro de linha estático), você especifica uma das seguintes funções do sistema ou ambas: SUSER_SNAME() e HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="2f99d-114">Rather than specifying a literal value in the clause (as you do with a static row filter), you specify one or both of the following system functions: SUSER_SNAME() and HOST_NAME().</span></span> <span data-ttu-id="2f99d-115">Funções definidas pelo usuário também podem ser usadas, mas devem incluir SUSER_SNAME() ou HOST_NAME() no corpo da função, ou avaliar uma dessas funções de sistema (como `MyUDF(SUSER_SNAME()`).</span><span class="sxs-lookup"><span data-stu-id="2f99d-115">User-defined functions can also be used, but they must include SUSER_SNAME() or HOST_NAME() in the body of the function, or evaluate one of these system functions (such as `MyUDF(SUSER_SNAME()`).</span></span> <span data-ttu-id="2f99d-116">Se uma função definida pelo usuário incluir SUSER_SNAME() ou HOST_NAME() no corpo da função, você não pode passar parâmetros para a função.</span><span class="sxs-lookup"><span data-stu-id="2f99d-116">If a user-defined function includes SUSER_SNAME() or HOST_NAME() in the body of the function, you cannot pass parameters to the function.</span></span>  
  
 <span data-ttu-id="2f99d-117">As funções de sistema SUSER_SNAME() e HOST_NAME() não são específicas para replicação de mesclagem, mas são usadas para por replicação de mesclagem para filtragem com parâmetros:</span><span class="sxs-lookup"><span data-stu-id="2f99d-117">The system functions SUSER_SNAME() and HOST_NAME() are not specific to merge replication, but they are used by merge replication for parameterized filtering:</span></span>  
  
-   <span data-ttu-id="2f99d-118">SUSER_SNAME() retorna informações de logon para conexões feitas a uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2f99d-118">SUSER_SNAME() returns login information for connections made to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f99d-119">Quando usado em um filtro com parâmetros, esse retorna o logon utilizado pelo Agente de Mesclagem para fazer a conexão com o Publicador (você pode especificar um logon ao criar uma assinatura).</span><span class="sxs-lookup"><span data-stu-id="2f99d-119">When used in a parameterized filter, it returns the login used by the Merge Agent to connect to the Publisher (you specify a login when you create a subscription).</span></span>  
  
-   <span data-ttu-id="2f99d-120">HOST_NAME() retorna o nome do computador que está se conectando a uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2f99d-120">HOST_NAME() returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f99d-121">Ao usar um filtro com parâmetros, por padrão este retorna o nome do computador no qual o Agente de Mesclagem está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="2f99d-121">When used in a parameterized filter, by default it returns the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="2f99d-122">Para assinaturas pull, este é o nome do Assinante; para assinaturas push, é o nome do Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="2f99d-122">For pull subscriptions it is the name of the Subscriber; for push subscriptions it is the name of the Distributor.</span></span>  
  
     <span data-ttu-id="2f99d-123">Também é possível substituir essa função com um valor que não seja o nome do Assinante ou do Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="2f99d-123">It is also possible to override this function with a value other than the name of the Subscriber or Distributor.</span></span> <span data-ttu-id="2f99d-124">Normalmente, os aplicativos substituem essa função com valores mais significativos, tais como um nome de vendedor ou uma identificação de vendedor.</span><span class="sxs-lookup"><span data-stu-id="2f99d-124">Typically applications override this function with more meaningful values, such as a salesperson name or salesperson ID.</span></span> <span data-ttu-id="2f99d-125">Para obter mais informações, consulte a seção "Substituindo o valor de HOST_NAME()" neste tópico.</span><span class="sxs-lookup"><span data-stu-id="2f99d-125">For more information, see the section "Overriding the HOST_NAME() Value" in this topic.</span></span>  
  
 <span data-ttu-id="2f99d-126">O valor retornado pela função do sistema é comparado a uma coluna que você especifica na tabela que está filtrando, e os dados apropriados são baixados para o Assinante.</span><span class="sxs-lookup"><span data-stu-id="2f99d-126">The value returned by the system function is compared to a column you specify in the table you are filtering, and the appropriate data is downloaded to the Subscriber.</span></span> <span data-ttu-id="2f99d-127">Essa comparação é feita quando a assinatura é inicializada (de modo que apenas os dados apropriados estejam contidos no instantâneo inicial) e a cada vez que a assinatura é sincronizada.</span><span class="sxs-lookup"><span data-stu-id="2f99d-127">This comparison is made when the subscription is initialized (so only the appropriate data is contained in the initial snapshot) and every time the subscription is synchronized.</span></span> <span data-ttu-id="2f99d-128">Por padrão, se uma alteração no Publicador resultar em uma linha sendo movida para fora de uma partição, a linha será excluída no Assinante (esse comportamento é controlado usando o **@allow_partition_realignment** parâmetro de [sp_addmergepublication &#40;&#41;TRANSACT-SQL ](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="2f99d-128">By default, if a change at the Publisher results in a row being moved out of a partition, the row is deleted at the Subscriber (this behavior is controlled using the **@allow_partition_realignment** parameter of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2f99d-129">Quando são feitas comparações para filtros com parâmetros, a ordenação de banco de dados sempre é usada.</span><span class="sxs-lookup"><span data-stu-id="2f99d-129">When comparisons are made for parameterized filters, the database collation is always used.</span></span> <span data-ttu-id="2f99d-130">Por exemplo, se a ordenação de banco de dados não diferencia maiúsculas e minúsculas, mas a ordenação de tabela ou coluna o faz, a comparação não diferenciará maiúsculas e minúsculas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-130">For example, if the database collation is case insensitive, but the table or column collation is case sensitive, the comparison will be case insensitive.</span></span>  
  
### <a name="filtering-with-suser_sname"></a><span data-ttu-id="2f99d-131">Filtrando com SUSER_SNAME()</span><span class="sxs-lookup"><span data-stu-id="2f99d-131">Filtering with SUSER_SNAME()</span></span>  
 <span data-ttu-id="2f99d-132">Considere a **Tabela de Funcionários** no banco de dados de exemplo [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2f99d-132">Consider the **Employee Table** in the [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] sample database.</span></span> <span data-ttu-id="2f99d-133">Essa tabela inclui a coluna **LoginID**, que contém o login para cada funcionário na forma '*domain\login*'.</span><span class="sxs-lookup"><span data-stu-id="2f99d-133">This table includes the column **LoginID**, which contains the login for each employee in the form '*domain\login*'.</span></span> <span data-ttu-id="2f99d-134">Para filtrar essa tabela de modo que os funcionários recebam só os dados relacionados a eles, especifique uma cláusula de filtro de:</span><span class="sxs-lookup"><span data-stu-id="2f99d-134">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
LoginID = SUSER_SNAME()  
```  
  
 <span data-ttu-id="2f99d-135">Por exemplo, o valor para um dos funcionários é 'adventure-works\john5'.</span><span class="sxs-lookup"><span data-stu-id="2f99d-135">For example, the value for one of the employees is 'adventure-works\john5'.</span></span> <span data-ttu-id="2f99d-136">Quando o Agente de Mesclagem faz a conexão com o Publicador, ele utiliza o logon especificado na criação da assinatura (neste caso, 'adventure-works\john5').</span><span class="sxs-lookup"><span data-stu-id="2f99d-136">When the Merge Agent connects to the Publisher, it uses the login you specified when creating the subscription (in this case 'adventure-works\john5').</span></span> <span data-ttu-id="2f99d-137">O Agente de Mesclagem então compara o valor retornado por SUSER_SNAME() com os valores na tabela e baixa apenas a linha que contenha um valor de 'adventure-works\john5' na coluna **LoginID** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-137">The Merge Agent then compares the value returned by SUSER_SNAME() to the values in the table and downloads only the row that contains a value of 'adventure-works\john5' in the **LoginID** column.</span></span>  
  
### <a name="filtering-with-host_name"></a><span data-ttu-id="2f99d-138">Filtrando com HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="2f99d-138">Filtering with HOST_NAME()</span></span>  
 <span data-ttu-id="2f99d-139">Considere a tabela **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-139">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="2f99d-140">Suponha que essa tabela contenha uma coluna tal como **ComputerName** com o nome de cada computador de funcionário na forma '*name_computertype*'.</span><span class="sxs-lookup"><span data-stu-id="2f99d-140">Suppose this table contained a column such as **ComputerName** with the name of each employee's computer in the form '*name_computertype*'.</span></span> <span data-ttu-id="2f99d-141">Para filtrar essa tabela de modo que os funcionários recebam só os dados relacionados a eles, especifique uma cláusula de filtro de:</span><span class="sxs-lookup"><span data-stu-id="2f99d-141">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="2f99d-142">Por exemplo, o valor para um dos funcionários poderia ser 'john5_laptop'.</span><span class="sxs-lookup"><span data-stu-id="2f99d-142">For example, the value for one of the employees could be 'john5_laptop'.</span></span> <span data-ttu-id="2f99d-143">Quando o Agente de Mesclagem faz a conexão com o Publicador, ele compara o valor retornado por HOST_NAME() com os valores na tabela e baixa apenas a linha que contenha um valor de 'john5_laptop' na coluna **ComputerName** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-143">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 'john5_laptop' in the **ComputerName** column.</span></span>  
  
 <span data-ttu-id="2f99d-144">Também é possível combinar as funções em um filtro.</span><span class="sxs-lookup"><span data-stu-id="2f99d-144">It is also possible to combine the functions in a filter.</span></span> <span data-ttu-id="2f99d-145">Por exemplo, se você quisesse assegurar-se de que um funcionário recebeu os dados apenas se usou seu logon em seu computador, a cláusula do filtro poderia ser:</span><span class="sxs-lookup"><span data-stu-id="2f99d-145">For example, if you wanted to ensure that an employee received data only if they used their login on their computer, the filter clause could be:</span></span>  
  
```  
LoginID = SUSER_SNAME() AND ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="2f99d-146">A menos que você esteja substituindo o valor HOST_NAME(), a filtragem com HOST_NAME() normalmente é usada somente com assinaturas pull.</span><span class="sxs-lookup"><span data-stu-id="2f99d-146">Unless you are overriding the HOST_NAME() value, filtering with HOST_NAME() is typically used only with pull subscriptions.</span></span> <span data-ttu-id="2f99d-147">O valor retornado pela função é o nome do computador no qual o Agente de Mesclagem está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="2f99d-147">The value returned by the function is the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="2f99d-148">Para assinaturas pull, o valor é diferente para cada assinatura; para assinaturas push, porém, o valor é o mesmo (todos os Agente de Mesclagems são executados no Distribuidor para assinaturas push).</span><span class="sxs-lookup"><span data-stu-id="2f99d-148">For pull subscriptions, the value is different for each subscription, but for push subscriptions, the value is the same (all Merge Agents run at the Distributor for push subscriptions).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2f99d-149">O valor para a função HOST_NAME() pode ser substituído; portanto não é possível usar filtros que incluam HOST_NAME() para controlar o acesso a partições de dados.</span><span class="sxs-lookup"><span data-stu-id="2f99d-149">The value for the HOST_NAME() function can be overridden; therefore it is not possible to use filters that include HOST_NAME() to control access to partitions of data.</span></span> <span data-ttu-id="2f99d-150">Para controlar o acesso a partições de dados, use SUSER_SNAME(), SUSER_SNAME() em combinação com HOST_NAME(), ou use filtros de linha estáticos.</span><span class="sxs-lookup"><span data-stu-id="2f99d-150">To control access to partitions of data, use SUSER_SNAME(), SUSER_SNAME() in combination with HOST_NAME(), or use static row filters.</span></span>  
  
#### <a name="overriding-the-host_name-value"></a><span data-ttu-id="2f99d-151">Substituindo o valor HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="2f99d-151">Overriding the HOST_NAME() Value</span></span>  
 <span data-ttu-id="2f99d-152">Como observado anteriormente, HOST_NAME() por padrão retorna o nome do computador que está se conectando a uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2f99d-152">As noted earlier, HOST_NAME() by default returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f99d-153">Ao usar filtros com parâmetros, é comum substituir esse valor fornecendo um valor ao criar uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="2f99d-153">When using parameterized filters, it is common to override this value by supplying a value when you create a subscription.</span></span> <span data-ttu-id="2f99d-154">Uma função HOST_NAME() retorna o valor que você especifica em lugar do nome do computador.</span><span class="sxs-lookup"><span data-stu-id="2f99d-154">The HOST_NAME() function then returns the value you specify rather than the name of the computer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2f99d-155">Se substituir HOST_NAME(), todas as chamadas para a função HOST_NAME() retornarão o valor que você especificou.</span><span class="sxs-lookup"><span data-stu-id="2f99d-155">If you override HOST_NAME(), all calls to the HOST_NAME() function will return the value you specify.</span></span> <span data-ttu-id="2f99d-156">Assegure-se de que outros aplicativos não estão dependendo de que HOST_NAME() retorne o nome do computador.</span><span class="sxs-lookup"><span data-stu-id="2f99d-156">Ensure that other applications are not depending on HOST_NAME() returning the computer name.</span></span>  
  
 <span data-ttu-id="2f99d-157">Considere a tabela **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-157">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="2f99d-158">Essa tabela inclui a coluna **EmployeeID**.</span><span class="sxs-lookup"><span data-stu-id="2f99d-158">This table includes the column **EmployeeID**.</span></span> <span data-ttu-id="2f99d-159">Para filtrar essa tabela de modo que cada funcionário receba só os dados relacionados a ele, especifique uma cláusula de filtro de:</span><span class="sxs-lookup"><span data-stu-id="2f99d-159">To filter this table so that each employee receives only the data related to them, specify a filter clause of:</span></span>  
  
 `EmployeeID = CONVERT(int,HOST_NAME())`  
  
 <span data-ttu-id="2f99d-160">Por exemplo, a funcionária Pamela Ansman-Wolfe recebeu uma identificação de funcionário 280.</span><span class="sxs-lookup"><span data-stu-id="2f99d-160">For example, employee Pamela Ansman-Wolfe has been assigned an employee ID of 280.</span></span> <span data-ttu-id="2f99d-161">Especifique o valor da identificação de funcionário (280 em nosso exemplo) para o valor HOST_NAME() ao criar uma assinatura para essa funcionária.</span><span class="sxs-lookup"><span data-stu-id="2f99d-161">Specify the value of the employee ID (280 in our example) for the HOST_NAME() value when creating a subscription for this employee.</span></span> <span data-ttu-id="2f99d-162">Quando o Agente de Mesclagem faz a conexão com o Publicador, ele compara o valor retornado por HOST_NAME() com os valores na tabela e baixa apenas a linha que contém um valor 280 na coluna **EmployeeID** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-162">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 280 in the **EmployeeID** column.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2f99d-163">A função HOST_NAME() retorna um valor `nchar`, e por isso você deve usar CONVERT se a coluna na cláusula de filtro for de tipo de dados numéricos, como no exemplo acima.</span><span class="sxs-lookup"><span data-stu-id="2f99d-163">The HOST_NAME() function returns an `nchar` value, so you must use CONVERT if the column in the filter clause is of a numeric data type, as it is in the example above.</span></span> <span data-ttu-id="2f99d-164">Por razões de desempenho, recomendamos não aplicar funções a nomes de colunas em cláusulas de filtro de linha com parâmetros, tais como `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span><span class="sxs-lookup"><span data-stu-id="2f99d-164">For performance reasons, we recommended that you do not apply functions to column names in parameterized row filter clauses, such as `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span></span> <span data-ttu-id="2f99d-165">Em vez disso, recomendamos usar a abordagem mostrada no exemplo: `EmployeeID = CONVERT(int,HOST_NAME())`.</span><span class="sxs-lookup"><span data-stu-id="2f99d-165">Instead, we recommend using the approach shown in the example: `EmployeeID = CONVERT(int,HOST_NAME())`.</span></span> <span data-ttu-id="2f99d-166">Essa cláusula pode ser usada para o **@subset_filterclause** parâmetro de [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), mas ela normalmente não pode ser usada no Assistente para nova publicação (o assistente executa a cláusula de filtro para validá-la, o que falha porque o nome do computador não pode ser convertido em um `int` ).</span><span class="sxs-lookup"><span data-stu-id="2f99d-166">This clause can be used for the **@subset_filterclause** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), but it typically cannot be used in the New Publication Wizard (the wizard executes the filter clause to validate it, which fails because the computer name cannot be converted to an `int`).</span></span> <span data-ttu-id="2f99d-167">Se você usar o Assistente de Nova Publicação, recomendamos especificar `CONVERT(nchar,EmployeeID) = HOST_NAME()` no assistente e usar [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) para alterar a cláusula para `EmployeeID = CONVERT(int,HOST_NAME())` antes de criar um instantâneo para a publicação.</span><span class="sxs-lookup"><span data-stu-id="2f99d-167">If you use the New Publication Wizard, we recommend specifying `CONVERT(nchar,EmployeeID) = HOST_NAME()` in the wizard and then use [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) to change the clause to `EmployeeID = CONVERT(int,HOST_NAME())` before creating a snapshot for the publication.</span></span>  
  
 <span data-ttu-id="2f99d-168">**Para substituir o valor HOST_NAME()**</span><span class="sxs-lookup"><span data-stu-id="2f99d-168">**To override the HOST_NAME() value**</span></span>  
  
 <span data-ttu-id="2f99d-169">Use um dos métodos seguintes para substituir o valor HOST_NAME():</span><span class="sxs-lookup"><span data-stu-id="2f99d-169">Use one of the following methods to override the HOST_NAME() value:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="2f99d-170">: especifique um valor na página **Valores de HOST\_NAME\(\)** do Assistente de Nova Assinatura.</span><span class="sxs-lookup"><span data-stu-id="2f99d-170">: specify a value on the **HOST\_NAME\(\) Values** page of the New Subscription Wizard.</span></span> <span data-ttu-id="2f99d-171">Para obter mais informações sobre como criar assinaturas, consulte [Assinar publicações](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-171">For more information about creating subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="2f99d-172">[!INCLUDE[tsql](../../../includes/tsql-md.md)]Programação de replicação: especifique um valor para o **@hostname** parâmetro de [Sp_addmergesubscription &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (para assinaturas push) ou sp_addmergepullsubscription_agent &#40;&#41;[Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (para assinaturas pull).</span><span class="sxs-lookup"><span data-stu-id="2f99d-172">Replication [!INCLUDE[tsql](../../../includes/tsql-md.md)] programming: specify a value for the **@hostname** parameter of [sp_addmergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (for push subscriptions) or [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (for pull subscriptions).</span></span>  
  
-   <span data-ttu-id="2f99d-173">Agente de Mesclagem: especifique um valor para o parâmetro **-Hostname** na linha de comando ou por meio de um perfil de agente.</span><span class="sxs-lookup"><span data-stu-id="2f99d-173">Merge Agent: specify a value for the **-Hostname** parameter at the command line or through an agent profile.</span></span> <span data-ttu-id="2f99d-174">Para obter mais informações sobre o Agente de Mesclagem, consulte [Replication Merge Agent](../agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-174">For more information about the Merge Agent, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span> <span data-ttu-id="2f99d-175">Para obter mais informações sobre perfis de agente, consulte [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-175">For more information about agent profiles, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="initializing-a-subscription-to-a-publication-with-parameterized-filters"></a><span data-ttu-id="2f99d-176">Inicializando uma assinatura para uma publicação com filtros com parâmetros</span><span class="sxs-lookup"><span data-stu-id="2f99d-176">Initializing a Subscription to a Publication with Parameterized Filters</span></span>  
 <span data-ttu-id="2f99d-177">Quando são usados filtros de linha com parâmetros em publicações de mesclagem, a replicação inicializa cada assinatura com um instantâneo de duas partes.</span><span class="sxs-lookup"><span data-stu-id="2f99d-177">When parameterized row filters are used in merge publications, replication initializes each subscription with a two-part snapshot.</span></span> <span data-ttu-id="2f99d-178">Para obter mais informações, consulte [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-178">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="using-the-appropriate-filtering-options"></a><span data-ttu-id="2f99d-179">Usando as opções de filtragem apropriadas</span><span class="sxs-lookup"><span data-stu-id="2f99d-179">Using the Appropriate Filtering Options</span></span>  
 <span data-ttu-id="2f99d-180">Há duas áreas-chaves sobre as quais você tem controle ao usar filtros com parâmetros:</span><span class="sxs-lookup"><span data-stu-id="2f99d-180">There are two key areas over which you have control when using parameterized filters:</span></span>  
  
-   <span data-ttu-id="2f99d-181">Como os filtros são processados por replicação de mesclagem, que é controlada por uma das duas configurações de publicação: **usar grupos de partição** e **manter alterações de partição**.</span><span class="sxs-lookup"><span data-stu-id="2f99d-181">How the filters are processed by merge replication, which is controlled by one of two publication settings: **use partition groups** and **keep partition changes**.</span></span>  
  
-   <span data-ttu-id="2f99d-182">Como os dados são compartilhados entre Assinantes, o que deve ser refletido pela configuração de artigo **opções de partição**.</span><span class="sxs-lookup"><span data-stu-id="2f99d-182">How the data is shared among Subscribers, which must be reflected by the article setting **partition options**.</span></span>  
  
 <span data-ttu-id="2f99d-183">Para definir opções de filtragem, consulte [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-183">To set filtering options, see [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span></span>  
  
### <a name="setting-use-partition-groups-and-keep-partition-changes"></a><span data-ttu-id="2f99d-184">Definindo 'usar grupos de partição’ e 'manter alterações de partição’</span><span class="sxs-lookup"><span data-stu-id="2f99d-184">Setting 'use partition groups' and 'keep partition changes'</span></span>  
 <span data-ttu-id="2f99d-185">Tanto a opção **usar grupos de partição** quanto a opção **manter alterações de partição** melhoram o desempenho de sincronização para publicações com artigos filtrados, por armazenarem metadados adicionais no banco de dados de publicação.</span><span class="sxs-lookup"><span data-stu-id="2f99d-185">Both the **use partition groups** and **keep partition changes** options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="2f99d-186">A opção **usar grupos de partição** proporciona maior melhoria de desempenho pelo uso do recurso de partições pré-computadas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-186">The **use partition groups** option provides greater performance improvement through the use of the precomputed partitions feature.</span></span> <span data-ttu-id="2f99d-187">Essa opção é por padrão definida como `true` se os artigos em sua publicação obedecem a um conjunto de requisitos.</span><span class="sxs-lookup"><span data-stu-id="2f99d-187">This option is set to `true` by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="2f99d-188">Para obter mais informações sobre esses requisitos, consulte [Otimizar o desempenho de filtro com parâmetros com partições pré-computadas](parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-188">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="2f99d-189">Se seus artigos não atenderem aos requisitos de uso de partições preputadas, a opção **manter alterações de partição** para será definida como `true` .</span><span class="sxs-lookup"><span data-stu-id="2f99d-189">If your articles do not meet the requirements for using precomputed partitions, the **keep partition changes** option to is set to `true`.</span></span>  
  
### <a name="setting-partition-options"></a><span data-ttu-id="2f99d-190">Definindo 'opções de partição’</span><span class="sxs-lookup"><span data-stu-id="2f99d-190">Setting 'partition options'</span></span>  
 <span data-ttu-id="2f99d-191">Você especifica um valor para a propriedade **opções de partição** ao criar um artigo, de acordo com a maneira em que os dados na tabela filtrada serão compartilhados pelos Assinantes.</span><span class="sxs-lookup"><span data-stu-id="2f99d-191">You specify a value for the **partition options** property when creating an article, according to the way in which data in the filtered table will be shared by Subscribers.</span></span> <span data-ttu-id="2f99d-192">A propriedade pode ser definida com um dentre quatro valores usando [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)e a caixa de diálogo **Propriedades do Artigo** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-192">The property can be set to one of four values using [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), and the **Article Properties** dialog box.</span></span> <span data-ttu-id="2f99d-193">A propriedade pode ser definida com um dentre dois valores usando as caixas de diálogo **Adicionar Filtro** ou **Editar Filtro** , que estão disponíveis no Assistente de Nova Publicação e na caixa de diálogo **Propriedades de Publicação** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-193">The property can be set to one of two values using the **Add Filter** or **Edit Filter** dialog boxes, which are available from the New Publication Wizard and the **Publication Properties** dialog box.</span></span> <span data-ttu-id="2f99d-194">A tabela a seguir resume os valores disponíveis:</span><span class="sxs-lookup"><span data-stu-id="2f99d-194">The following table summarizes the available values:</span></span>  
  
|<span data-ttu-id="2f99d-195">DESCRIÇÃO</span><span class="sxs-lookup"><span data-stu-id="2f99d-195">Description</span></span>|<span data-ttu-id="2f99d-196">Valor em Adicionar filtro e Editar Filtro</span><span class="sxs-lookup"><span data-stu-id="2f99d-196">Value in Add Filter and Edit Filter</span></span>|<span data-ttu-id="2f99d-197">Valor em Propriedades do Artigo</span><span class="sxs-lookup"><span data-stu-id="2f99d-197">Value in Article Properties</span></span>|<span data-ttu-id="2f99d-198">Valor em procedimentos armazenados</span><span class="sxs-lookup"><span data-stu-id="2f99d-198">Value in stored procedures</span></span>|  
|-----------------|-----------------------------------------|---------------------------------|--------------------------------|  
|<span data-ttu-id="2f99d-199">Os dados nas partições estão sobrepostos e o Assinante pode atualizar colunas referenciadas em um filtro com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2f99d-199">Data in the partitions is overlapping, and the Subscriber can update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2f99d-200">**Uma linha dessa tabela irá para múltiplas assinaturas**</span><span class="sxs-lookup"><span data-stu-id="2f99d-200">**A row from this table will go to multiple subscriptions**</span></span>|<span data-ttu-id="2f99d-201">**Com sobreposição**</span><span class="sxs-lookup"><span data-stu-id="2f99d-201">**Overlapping**</span></span>|<span data-ttu-id="2f99d-202">**0**</span><span class="sxs-lookup"><span data-stu-id="2f99d-202">**0**</span></span>|  
|<span data-ttu-id="2f99d-203">Os dados nas partições estão sobrepostos e o Assinante não pode atualizar colunas referenciadas em um filtro com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2f99d-203">Data in the partitions is overlapping, and the Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2f99d-204">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="2f99d-204">N/A<sup>1</sup></span></span>|<span data-ttu-id="2f99d-205">**Com sobreposição, não permitir alterações de dados fora da partição**</span><span class="sxs-lookup"><span data-stu-id="2f99d-205">**Overlapping, disallow out-of-partition data changes**</span></span>|<span data-ttu-id="2f99d-206">**1**</span><span class="sxs-lookup"><span data-stu-id="2f99d-206">**1**</span></span>|  
|<span data-ttu-id="2f99d-207">Os dados nas partições não estão sobrepostos e os dados são compartilhados entre assinaturas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-207">Data in the partitions is not overlapping, and the data is shared between subscriptions.</span></span> <span data-ttu-id="2f99d-208">O Assinante não pode atualizar colunas referenciadas em um filtro com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2f99d-208">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2f99d-209">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="2f99d-209">N/A<sup>1</sup></span></span>|<span data-ttu-id="2f99d-210">**Sem-sobreposição, compartilhados entre assinaturas**</span><span class="sxs-lookup"><span data-stu-id="2f99d-210">**Nonoverlapping, shared between subscriptions**</span></span>|<span data-ttu-id="2f99d-211">**2**</span><span class="sxs-lookup"><span data-stu-id="2f99d-211">**2**</span></span>|  
|<span data-ttu-id="2f99d-212">Os dados nas partições não estão sobrepostos e há uma única assinatura por partição.</span><span class="sxs-lookup"><span data-stu-id="2f99d-212">Data in the partitions is not overlapping, and there is a single subscription per partition.</span></span> <span data-ttu-id="2f99d-213">O Assinante não pode atualizar colunas referenciadas em um filtro com parâmetros. <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="2f99d-213">The Subscriber cannot update columns referenced in a parameterized filter.<sup>2</sup></span></span>|<span data-ttu-id="2f99d-214">**Uma linha dessa tabela irá para apenas uma assinatura**</span><span class="sxs-lookup"><span data-stu-id="2f99d-214">**A row from this table will go to only one subscription**</span></span>|<span data-ttu-id="2f99d-215">**Sem-sobreposição, única assinatura**</span><span class="sxs-lookup"><span data-stu-id="2f99d-215">**Nonoverlapping, single subscription**</span></span>|<span data-ttu-id="2f99d-216">**3**</span><span class="sxs-lookup"><span data-stu-id="2f99d-216">**3**</span></span>|  
  
 <span data-ttu-id="2f99d-217"><sup>1</sup> se a opção de filtragem subjacente estiver definida como **0**ou **1**, ou **2**, as caixas de diálogo **Adicionar filtro** e **Editar Filtro** exibirão **uma linha dessa tabela, que vai para várias assinaturas**.</span><span class="sxs-lookup"><span data-stu-id="2f99d-217"><sup>1</sup> If the underlying filtering option is set to **0**, or **1**, or **2**, the **Add Filter** and **Edit Filter** dialog boxes will display **A row from this table will go to multiple subscriptions**.</span></span>  
  
 <span data-ttu-id="2f99d-218"><sup>2</sup> se você especificar essa opção, só poderá haver uma única assinatura para cada partição de dados nesse artigo.</span><span class="sxs-lookup"><span data-stu-id="2f99d-218"><sup>2</sup> If you specify this option, there can only be a single subscription for each partition of data in that article.</span></span> <span data-ttu-id="2f99d-219">Se uma segunda assinatura for criada na qual o critério de filtragem da nova assinatura for resolvido para a mesma partição como a assinatura existente, a assinatura existente será cancelada.</span><span class="sxs-lookup"><span data-stu-id="2f99d-219">If a second subscription is created in which the filtering criterion of the new subscription resolves to the same partition as the existing subscription, the existing subscription is dropped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2f99d-220">O valor **opções de partição** deve ser definido de acordo com a maneira como os dados são compartilhados pelos Assinantes.</span><span class="sxs-lookup"><span data-stu-id="2f99d-220">The **partition options** value must be set according to how data is shared by Subscribers.</span></span> <span data-ttu-id="2f99d-221">Se, por exemplo, você especificar que uma partição é sem-sobreposição com uma assinatura única por partição, mas os dados forem então atualizados em outro Assinante, o Agente de Mesclagem poderá não funcionar durante a sincronização e poderá ocorrer uma não convergência.</span><span class="sxs-lookup"><span data-stu-id="2f99d-221">If, for example, you specify that a partition is nonoverlapping with a single subscription per partition, but data is then updated at another Subscriber, the Merge Agent can fail during synchronization and non-convergence can occur.</span></span>  
  
#### <a name="selecting-the-appropriate-partition-option"></a><span data-ttu-id="2f99d-222">Selecionando a opção de partição apropriada</span><span class="sxs-lookup"><span data-stu-id="2f99d-222">Selecting the Appropriate Partition Option</span></span>  
 <span data-ttu-id="2f99d-223">Partições que não se sobrepõem funcionam em conjunção com partições pré-computadas para melhorar o desempenho em situações em que algumas limitações funcionais sejam aceitáveis.</span><span class="sxs-lookup"><span data-stu-id="2f99d-223">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance in situations where some functional limitations are acceptable.</span></span> <span data-ttu-id="2f99d-224">As partições pré-computadas aceleram os downloads para Assinantes, mas retardam os carregamentos.</span><span class="sxs-lookup"><span data-stu-id="2f99d-224">Precomputed partitions quicken downloads to Subscribers, but slow uploads.</span></span> <span data-ttu-id="2f99d-225">Partições que não se sobrepõem minimizam o custo de carregamento associado a partições pré-computadas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-225">Nonoverlapping partitions minimize the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="2f99d-226">O benefício de desempenho de partições que não se sobrepõem é mais notável quando os filtros com parâmetros e de junção usados são mais complexos.</span><span class="sxs-lookup"><span data-stu-id="2f99d-226">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span>  
  
 <span data-ttu-id="2f99d-227">Considere os cenários seguintes ao decidir que opções de partição usar em uma publicação.</span><span class="sxs-lookup"><span data-stu-id="2f99d-227">Consider the following scenarios when deciding which partition options to use in a publication.</span></span>  
  
-   [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] <span data-ttu-id="2f99d-228">dispõe de uma força de vendas móvel em cada vendedor responsável por clientes em um determinado código postal.</span><span class="sxs-lookup"><span data-stu-id="2f99d-228">has a mobile sales force with each sales person responsible for customers in a given zip code.</span></span> <span data-ttu-id="2f99d-229">O aplicativo requer que o código postal seja atualizado se um cliente se muda de um território de vendas para outro, de maneira o cliente que seja atribuído a um vendedor diferente.</span><span class="sxs-lookup"><span data-stu-id="2f99d-229">The application requires that  the zip code be updated if a customer moves from one sales territory to another, so that the customer is assigned to a different sales person.</span></span> <span data-ttu-id="2f99d-230">O filtro com parâmetros tem como base o código postal do cliente e a atualização remove o código postal da partição de um vendedor e insere-o na partição de outro vendedor.</span><span class="sxs-lookup"><span data-stu-id="2f99d-230">The parameterized filter is based on the customer's zip code, and the update removes the zip code from one sales person's partition and inserts it into another sales person's partition.</span></span> <span data-ttu-id="2f99d-231">Isso requer partições que se sobreponham e que possam atualizar colunas referenciadas em um filtro com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2f99d-231">This requires overlapping partitions with the ability to update columns referenced in a parameterized filter.</span></span> <span data-ttu-id="2f99d-232">Essa opção maximiza a flexibilidade, mas poderia não ter desempenho tão bom quanto partições que não se sobrepõem.</span><span class="sxs-lookup"><span data-stu-id="2f99d-232">This option maximizes flexibility but might not perform as well as nonoverlapping partitions.</span></span>  
  
-   <span data-ttu-id="2f99d-233">Uma agência de empregos tem dados que são fornecidos a escritórios regionais em cada município do estado.</span><span class="sxs-lookup"><span data-stu-id="2f99d-233">An employment agency has data that is supplied to regional offices in each county of the state.</span></span> <span data-ttu-id="2f99d-234">Os dados não se sobrepõem; cada linha na tabela para a matriz do órgão está incluída em apenas uma partição, mas esta partição é enviada a escritórios múltiplos no mesmo município.</span><span class="sxs-lookup"><span data-stu-id="2f99d-234">The data does not overlap; each row in the table at the agency's headquarters is included in only one partition, but that partition is sent to multiple offices in the same county.</span></span> <span data-ttu-id="2f99d-235">A opção de partição que não se sobrepõe, com partições compartilhadas entre assinaturas, é apropriada, proporcionando uma melhoria de desempenho, se comparada com a partições que se sobrepõem, e ao mesmo tempo satisfazem os requisitos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f99d-235">The nonoverlapping partition option with partitions shared between subscriptions is appropriate, providing a performance improvement over overlapping partitions while satisfying the application requirements.</span></span>  
  
-   <span data-ttu-id="2f99d-236">Se você tiver partições que não se sobrepõem e apenas uma assinatura recebe e atualiza os dados em uma partição, benefícios de desempenho adicionais podem ser obtidos.</span><span class="sxs-lookup"><span data-stu-id="2f99d-236">If you have nonoverlapping partitions and only one subscription receives and updates the data in a partition, further performance benefits can be realized.</span></span> <span data-ttu-id="2f99d-237">Esse cenário é comum para sistemas de pontos de vendas e aplicativos de força de vendas em que os dados são basicamente coletados no Assinante e carregados no Publicador.</span><span class="sxs-lookup"><span data-stu-id="2f99d-237">This scenario is common for point of sale systems, and field force applications in which data is primarily collected at the Subscriber and uploaded to the Publisher.</span></span> <span data-ttu-id="2f99d-238">Considere uma tabela **Pacote** em um aplicativo de entrega: como cada pacote é carregado em um caminhão, o status do pacote é alterado na tabela **Pacote** , e a alteração é replicada de volta para a matriz.</span><span class="sxs-lookup"><span data-stu-id="2f99d-238">Consider a **Package** table in a delivery application: as each package is loaded onto a truck, the status of the package is changed in the **Package** table, and the change is replicated back to headquarters.</span></span> <span data-ttu-id="2f99d-239">Os motoristas não atualizariam os status do mesmo pacote em dois caminhões diferentes, e por isso a tabela **Pacote** é uma boa candidata para uma partição que não se sobrepõe, com uma assinatura única por partição.</span><span class="sxs-lookup"><span data-stu-id="2f99d-239">Drivers would not update the status of the same package on two different trucks, so the **Package** table is a good candidate for a nonoverlapping partition with a single subscription per partition.</span></span>  
  
#### <a name="considerations-for-nonoverlapping-partitions"></a><span data-ttu-id="2f99d-240">Considerações para partições que não se sobrepõem</span><span class="sxs-lookup"><span data-stu-id="2f99d-240">Considerations for Nonoverlapping Partitions</span></span>  
 <span data-ttu-id="2f99d-241">Lembre-se das seguintes considerações ao usar partições que não se sobrepõem.</span><span class="sxs-lookup"><span data-stu-id="2f99d-241">Keep the following considerations in mind when using nonoverlapping partitions.</span></span>  
  
##### <a name="general-considerations"></a><span data-ttu-id="2f99d-242">Considerações gerais</span><span class="sxs-lookup"><span data-stu-id="2f99d-242">General Considerations</span></span>  
  
-   <span data-ttu-id="2f99d-243">A publicação deve usar partições pré-computadas.</span><span class="sxs-lookup"><span data-stu-id="2f99d-243">The publication must use precomputed partitions.</span></span>  
  
-   <span data-ttu-id="2f99d-244">Uma linha deve pertencer a uma só partição.</span><span class="sxs-lookup"><span data-stu-id="2f99d-244">A row must belong to only one partition.</span></span>  
  
-   <span data-ttu-id="2f99d-245">Artigos não podem fazer parte de um registro lógico.</span><span class="sxs-lookup"><span data-stu-id="2f99d-245">Articles cannot be part of a logical record.</span></span>  
  
-   <span data-ttu-id="2f99d-246">Não há suporte para parceiros de sincronização alternativos (esse recurso é preterido).</span><span class="sxs-lookup"><span data-stu-id="2f99d-246">Alternate synchronization partners are not supported (this feature is deprecated).</span></span>  
  
-   <span data-ttu-id="2f99d-247">O Assinante não pode atualizar colunas referenciadas em um filtro com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2f99d-247">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>  
  
-   <span data-ttu-id="2f99d-248">Se uma inserção em um Assinante não pertencer à partição, não é excluída.</span><span class="sxs-lookup"><span data-stu-id="2f99d-248">If an insert at a Subscriber does not belong to the partition, it is not deleted.</span></span> <span data-ttu-id="2f99d-249">Ela, porém, não será replicada a outros Assinantes.</span><span class="sxs-lookup"><span data-stu-id="2f99d-249">However, it will not be replicated to other Subscribers.</span></span>  
  
-   <span data-ttu-id="2f99d-250">Em algumas circunstâncias com partições que se sobrepõem, os intervalos de identidade são ajustados quando o Agente de Mesclagem insere dados.</span><span class="sxs-lookup"><span data-stu-id="2f99d-250">In some circumstances with overlapping partitions, identity ranges are adjusted when the Merge Agent inserts data.</span></span> <span data-ttu-id="2f99d-251">Com partições que não se sobrepõem, os intervalos podem ser ajustados durante as inserções por um usuário que tenha permissão para ajustar intervalos de identidade no banco de dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="2f99d-251">With nonoverlapping partitions, ranges can only be adjusted during inserts by a user who has permission to adjust identity ranges in the subscription database.</span></span> <span data-ttu-id="2f99d-252">O usuário deve possuir a tabela ou ser um membro da função de servidor fixa **sysadmin** , da função de banco de dados fixa **db_owner** ou da função de banco de dados fixa **db_ddladmin** .</span><span class="sxs-lookup"><span data-stu-id="2f99d-252">The user must either own the table, or be a member of the **sysadmin** fixed server role, the **db_owner** fixed database role, or the **db_ddladmin** fixed database role.</span></span>  
  
##### <a name="additional-considerations-for-nonoverlapping-partitions-with-a-single-subscription-per-partition"></a><span data-ttu-id="2f99d-253">Considerações adicionais para partições que não se sobrepõem com uma única assinatura por partição</span><span class="sxs-lookup"><span data-stu-id="2f99d-253">Additional Considerations for Nonoverlapping Partitions with a Single Subscription per Partition</span></span>  
  
-   <span data-ttu-id="2f99d-254">Os artigos podem estar presentes em apenas uma publicação; não podem ser republicados.</span><span class="sxs-lookup"><span data-stu-id="2f99d-254">Articles can exist in only one publication; articles cannot be republished.</span></span>  
  
-   <span data-ttu-id="2f99d-255">A publicação deve permitir que os Assinantes iniciem o processo de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="2f99d-255">The publication must allow Subscribers to initiate the snapshot process.</span></span> <span data-ttu-id="2f99d-256">Para obter mais informações, consulte [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-256">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##### <a name="additional-considerations-for-join-filters"></a><span data-ttu-id="2f99d-257">Considerações adicionais para filtros de junção</span><span class="sxs-lookup"><span data-stu-id="2f99d-257">Additional Considerations for Join Filters</span></span>  
  
-   <span data-ttu-id="2f99d-258">Em uma hierarquia de filtros de junção, um artigo com uma partição que se sobrepõe não pode aparecer acima de um artigo com uma partição que não se sobrepõe.</span><span class="sxs-lookup"><span data-stu-id="2f99d-258">In a join filter hierarchy, an article with an overlapping partition cannot appear above an article with a nonoverlapping partition.</span></span> <span data-ttu-id="2f99d-259">Em outras palavras, um artigo pai deve usar partições que não se sobrepõem se o artigo de filho as usar também.</span><span class="sxs-lookup"><span data-stu-id="2f99d-259">In other words, a parent article must use nonoverlapping partitions if the child article does.</span></span> <span data-ttu-id="2f99d-260">Para obter mais informações sobre filtros de junção, consulte [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-260">For information about join filters, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="2f99d-261">Em um filtro de junção em que a partição que não se sobrepõe seja filho, a propriedade **juntar chave exclusiva** deve ser definida como 1.</span><span class="sxs-lookup"><span data-stu-id="2f99d-261">A join filter in which the nonoverlapping partition is a child must have the **join unique key** property set to 1.</span></span> <span data-ttu-id="2f99d-262">Para obter mais informações, consulte [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2f99d-262">For more information, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="2f99d-263">O artigo deve ter só um filtro com parâmetros ou filtro de junção.</span><span class="sxs-lookup"><span data-stu-id="2f99d-263">The article should only have one parameterized filter or join filter.</span></span> <span data-ttu-id="2f99d-264">É permitido ter um filtro com parâmetros e ser o pai em um filtro de junção.</span><span class="sxs-lookup"><span data-stu-id="2f99d-264">Having a parameterized filter and being the parent in a join filter is allowed.</span></span> <span data-ttu-id="2f99d-265">Não é permitido ter um filtro com parâmetros e ser o filho em um filtro de junção.</span><span class="sxs-lookup"><span data-stu-id="2f99d-265">Having a parameterized filter and being the child in a join filter is not allowed.</span></span> <span data-ttu-id="2f99d-266">Também não é permitido ter mais que um filtro de junção.</span><span class="sxs-lookup"><span data-stu-id="2f99d-266">Having more than one join filter is also not allowed.</span></span>  
  
-   <span data-ttu-id="2f99d-267">Se duas tabelas do Publicador tiverem uma relação de filtro de junção e a tabela filho tiver linhas que não tenham nenhuma linha correspondente na tabela pai, uma inserção da linha pai faltante não fará com que as linhas relacionadas sejam baixadas para o Assinante (as linhas seriam baixadas com partições que se sobrepusessem).</span><span class="sxs-lookup"><span data-stu-id="2f99d-267">If two tables at the Publisher have a join filter relationship and the child table has rows that have no corresponding row in the parent table, an insert of the missing parent row will not result in the related rows being downloaded to the Subscriber (the rows would be downloaded with overlapping partitions).</span></span> <span data-ttu-id="2f99d-268">Por exemplo, se a tabela **SalesOrderDetail** tiver linhas sem nenhuma linha correspondente na tabela **SalesOrderHeader** e você inserir a linhas faltante em **SalesOrderHeader**, a linha é baixada para o Assinante, mas as linhas correspondentes em **SalesOrderDetail** não o são.</span><span class="sxs-lookup"><span data-stu-id="2f99d-268">For example, if the **SalesOrderDetail** table has rows with no corresponding row in the **SalesOrderHeader** table, and you insert the missing row in **SalesOrderHeader**, the row is downloaded to the Subscriber, but the corresponding rows in **SalesOrderDetail** are not.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2f99d-269">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="2f99d-269">See Also</span></span>  
 <span data-ttu-id="2f99d-270">[Melhores práticas para filtros de linha baseados em tempo](best-practices-for-time-based-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="2f99d-270">[Best Practices for Time-Based Row Filters](best-practices-for-time-based-row-filters.md) </span></span>  
 <span data-ttu-id="2f99d-271">[Filtrar os dados publicados](../publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="2f99d-271">[Filter Published Data](../publish/filter-published-data.md) </span></span>  
 [<span data-ttu-id="2f99d-272">Filtrar dados publicados para a replicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="2f99d-272">Filter Published Data for Merge Replication</span></span>](filter-published-data-for-merge-replication.md)  
  
  
