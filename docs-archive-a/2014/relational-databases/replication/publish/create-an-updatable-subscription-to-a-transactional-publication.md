---
title: Criar uma assinatura atualizável para uma publicação transacional (Management Studio) | Microsoft Docs
ms.custom: ''
ms.date: 07/20/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- updateable transactional subscriptions
- updateable transactional subscriptions, SSMS
ms.assetid: f9ef89ed-36f6-431b-8843-25d445ec137f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e784216116bdb9ab308dff5fa998740b0fa459b0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685540"
---
# <a name="create-an-updatable-subscription-to-a-transactional-publication-management-studio"></a><span data-ttu-id="8efdf-102">Como criar uma assinatura atualizável para uma publicação transacional (Management Studio)</span><span class="sxs-lookup"><span data-stu-id="8efdf-102">Create an Updatable Subscription to a Transactional Publication (Management Studio)</span></span>

> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
 
<span data-ttu-id="8efdf-103">A replicação transacional permite que mudanças sejam realizadas em um Assinante para serem propagadas de volta para o Publicador usando assinaturas de atualizações imediatas ou colocadas em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-103">Transactional replication enables changes made at a Subscriber to be propagated back to the Publisher using either immediate or queued updating subscriptions.</span></span> <span data-ttu-id="8efdf-104">Você pode criar uma assinatura de atualização de forma programada, usando os procedimentos de replicação armazenados.</span><span class="sxs-lookup"><span data-stu-id="8efdf-104">You can create an updating subscription programmatically using replication stored procedures.</span></span>

<span data-ttu-id="8efdf-105">Configurar assinaturas atualizáveis no página **Assinaturas Atualizáveis** do **Assistente para Nova Assinatura**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-105">Configure updatable subscriptions on the **Updatable Subscriptions** page of the **New Subscription Wizard**.</span></span> <span data-ttu-id="8efdf-106">Esta página só estará disponível quando uma publicação transacional tiver sido ativada para assinaturas atualizáveis.</span><span class="sxs-lookup"><span data-stu-id="8efdf-106">This page is only available if you have enabled a transactional publication for updatable subscriptions.</span></span> <span data-ttu-id="8efdf-107">Para obter mais informações sobre como habilitar assinaturas atualizáveis, consulte [Habilitar atualização de assinaturas para publicações transacionais](enable-updating-subscriptions-for-transactional-publications.md).</span><span class="sxs-lookup"><span data-stu-id="8efdf-107">For more information about enabling updatable subscriptions, see [Enable Updating Subscriptions for Transactional Publications](enable-updating-subscriptions-for-transactional-publications.md).</span></span>   
  
## <a name="configure-an-updatable-subscription-from-the-publisher"></a><span data-ttu-id="8efdf-108">Configurar uma assinatura atualizável do Editor</span><span class="sxs-lookup"><span data-stu-id="8efdf-108">Configure an updatable subscription from the Publisher</span></span>  

1. <span data-ttu-id="8efdf-109">Conecte-se ao Publicador no Microsoft SQL Server Management Studio e, em seguida, expanda o nó de servidor.</span><span class="sxs-lookup"><span data-stu-id="8efdf-109">Connect to the Publisher in Microsoft SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="8efdf-110">Expanda a pasta **Replicação** e, em seguida, a pasta **Publicações Locais** .</span><span class="sxs-lookup"><span data-stu-id="8efdf-110">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>
3. <span data-ttu-id="8efdf-111">Clique com o botão direito do mouse em uma publicação transacional habilitada para atualizar assinaturas e, em seguida, clique em **Novas Assinaturas**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-111">Right-click a transactional publication enabled for updating subscriptions, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="8efdf-112">Percorra as páginas no assistente para especificar opções para a assinatura, como onde o Distribution Agent deverá ser executado.</span><span class="sxs-lookup"><span data-stu-id="8efdf-112">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
5. <span data-ttu-id="8efdf-113">Na página **Assinaturas Atualizáveis** do **Assistente para Nova Assinatura**, verifique se **Replicar** está selecionado.</span><span class="sxs-lookup"><span data-stu-id="8efdf-113">On the **Updatable Subscriptions** page of the **New Subscription Wizard**, ensure **Replicate** is selected.</span></span>
6. <span data-ttu-id="8efdf-114">Selecione uma opção na lista suspensa **Confirmar no Publicador**:</span><span class="sxs-lookup"><span data-stu-id="8efdf-114">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    *  <span data-ttu-id="8efdf-115">Para usar a atualização imediata de assinaturas, selecione **Confirmar alterações simultaneamente**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-115">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="8efdf-116">Se você selecionar essa opção e a publicação permitir atualização de assinatura na fila (o padrão para publicações criadas com o Assistente para Nova Publicação), a propriedade de assinatura **update_mode** será definida como **failover**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-116">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="8efdf-117">Esse modo permite a troca posterior para atualização em fila, se necessário.</span><span class="sxs-lookup"><span data-stu-id="8efdf-117">This mode allows you to switch to queued updating later if necessary.</span></span>
    *  <span data-ttu-id="8efdf-118">Para usar atualização de assinaturas em fila, selecione **Enfileirar alterações e confirmar quando possível**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-118">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="8efdf-119">Se você selecionar essa opção e a publicação permitir atualização imediata de assinaturas (o padrão para publicações criadas com o Assistente para Nova Publicação) e o Assinante estiver executando o SQL Server 2005 ou uma versão posterior, a propriedade de assinatura **update_mode** será definida como failover em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-119">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued failover.</span></span> <span data-ttu-id="8efdf-120">Esse modo permite troca imediata para atualização posterior, se necessária.</span><span class="sxs-lookup"><span data-stu-id="8efdf-120">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="8efdf-121">Para obter informações sobre como alternar os modos de atualização, consulte [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md) (Alternar entre modos de atualização para uma assinatura transacional atualizável).</span><span class="sxs-lookup"><span data-stu-id="8efdf-121">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

7. <span data-ttu-id="8efdf-122">A página **Login for Updatable Subscriptions** (Logon para Assinaturas Atualizáveis) é exibida para assinaturas que usam a atualização imediata ou têm **update_mode** definido para **failover em fila**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-122">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to **queued failover**.</span></span> <span data-ttu-id="8efdf-123">Na página **Login for Updatable Subscriptions** (Logon para Assinaturas Atualizáveis), especifique um servidor vinculado por meio do qual as conexões com o Publicador serão feitas para atualizações imediatas de assinaturas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-123">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="8efdf-124">Conexões são usadas pelos gatilhos acionados no Assinante e que propagam as alterações no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-124">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="8efdf-125">Selecione uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="8efdf-125">Select one of the following options:</span></span>

    * <span data-ttu-id="8efdf-126">**Criar um servidor vinculado que se conecta usando a Autenticação do SQL Server.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-126">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="8efdf-127">Selecione essa opção se um servidor vinculado ou remoto entre o Assinante e o Publicador ainda não tiver sido definido.</span><span class="sxs-lookup"><span data-stu-id="8efdf-127">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="8efdf-128">A replicação cria um servidor vinculado para você.</span><span class="sxs-lookup"><span data-stu-id="8efdf-128">Replication creates a linked server for you.</span></span> <span data-ttu-id="8efdf-129">É necessário que a conta especificada já exista no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-129">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="8efdf-130">**Usar servidor vinculado ou remoto já definido.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-130">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="8efdf-131">Selecione esta opção se você tiver definido um servidor remoto ou vinculado entre o Assinante e o Publicador usando [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), o SQL Server Management Studio ou outro método.</span><span class="sxs-lookup"><span data-stu-id="8efdf-131">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="8efdf-132">Para obter informações sobre as permissões exigidas pela conta de servidor vinculado, consulte o **Assinaturas de atualização em fila** de [inserir descrição do link aqui](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="8efdf-132">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

8. <span data-ttu-id="8efdf-133">Conclua o assistente.</span><span class="sxs-lookup"><span data-stu-id="8efdf-133">Complete the wizard.</span></span>

## <a name="configure-an-updatable-subscription-from-the-subscriber"></a><span data-ttu-id="8efdf-134">Configurar uma assinatura atualizável do Assinante</span><span class="sxs-lookup"><span data-stu-id="8efdf-134">Configure an updatable subscription from the Subscriber</span></span>


1. <span data-ttu-id="8efdf-135">Conecte-se ao Assinante no SQL Server Management Studio e, em seguida, expanda o nó de servidor.</span><span class="sxs-lookup"><span data-stu-id="8efdf-135">Connect to the Subscriber in SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="8efdf-136">Expanda a pasta **Replicação** .</span><span class="sxs-lookup"><span data-stu-id="8efdf-136">Expand the **Replication** folder.</span></span>
3. <span data-ttu-id="8efdf-137">Clique com o botão direito do mouse na pasta **Assinaturas Locais** e depois clique em **Novas Assinaturas**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-137">Right-click the **Local Subscriptions** folder, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="8efdf-138">Na página **Publicação** do **Assistente para Nova Assinatura**, selecione **Encontrar Publicador do SQL Server** na lista suspensa **Publicador**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-138">On the **Publication** page of the **New Subscription Wizard**, select **Find SQL Server Publisher** from the **Publisher** drop-down list.</span></span>
5. <span data-ttu-id="8efdf-139">Conecte-se ao Publicador na caixa de diálogo **Conectar ao Servidor** .</span><span class="sxs-lookup"><span data-stu-id="8efdf-139">Connect to the Publisher in the **Connect to Server** dialog box.</span></span>
6. <span data-ttu-id="8efdf-140">Selecione uma publicação transacional habilitada para atualizar assinaturas na página **Publicação**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-140">Select a transactional publication enabled for updating subscriptions on the **Publication** page.</span></span>
7. <span data-ttu-id="8efdf-141">Percorra as páginas no assistente para especificar opções para a assinatura, como onde o Distribution Agent deverá ser executado.</span><span class="sxs-lookup"><span data-stu-id="8efdf-141">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
8. <span data-ttu-id="8efdf-142">Na página **Assinaturas Atualizáveis** do Assistente para Nova Assinatura, verifique se **Replicar** está selecionado.</span><span class="sxs-lookup"><span data-stu-id="8efdf-142">On the **Updatable Subscriptions** page of the New Subscription Wizard, ensure **Replicate** is selected.</span></span>
9. <span data-ttu-id="8efdf-143">Selecione uma opção na lista suspensa **Confirmar no Publicador**:</span><span class="sxs-lookup"><span data-stu-id="8efdf-143">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    * <span data-ttu-id="8efdf-144">Para usar a atualização imediata de assinaturas, selecione **Confirmar alterações simultaneamente**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-144">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="8efdf-145">Se você selecionar essa opção e a publicação permitir atualização de assinatura na fila (o padrão para publicações criadas com o Assistente para Nova Publicação), a propriedade de assinatura **update_mode** será definida como **failover**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-145">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="8efdf-146">Esse modo permite a troca posterior para atualização em fila, se necessário.</span><span class="sxs-lookup"><span data-stu-id="8efdf-146">This mode allows you to switch to queued updating later if necessary.</span></span>
    * <span data-ttu-id="8efdf-147">Para usar atualização de assinaturas em fila, selecione **Enfileirar alterações e confirmar quando possível**.</span><span class="sxs-lookup"><span data-stu-id="8efdf-147">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="8efdf-148">Se você selecionar essa opção e a publicação permitir atualização imediata de assinaturas (o padrão para publicações criadas com o Assistente para Nova Publicação) e o Assinante estiver executando o SQL Server 2005 ou uma versão posterior, a propriedade de assinatura **update_mode** será definida como **failover** em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-148">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued **failover**.</span></span> <span data-ttu-id="8efdf-149">Esse modo permite troca imediata para atualização posterior, se necessária.</span><span class="sxs-lookup"><span data-stu-id="8efdf-149">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="8efdf-150">Para obter informações sobre como alternar os modos de atualização, consulte [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md) (Alternar entre modos de atualização para uma assinatura transacional atualizável).</span><span class="sxs-lookup"><span data-stu-id="8efdf-150">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

10. <span data-ttu-id="8efdf-151">A página **Login for Updatable Subscriptions** (Logon para Assinaturas Atualizáveis) é exibida para assinaturas que usam a atualização imediata ou têm **update_mode** definido para **failover** em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-151">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to queued **failover**.</span></span> <span data-ttu-id="8efdf-152">Na página **Login for Updatable Subscriptions** (Logon para Assinaturas Atualizáveis), especifique um servidor vinculado por meio do qual as conexões com o Publicador serão feitas para atualizações imediatas de assinaturas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-152">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="8efdf-153">Conexões são usadas pelos gatilhos acionados no Assinante e que propagam as alterações no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-153">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="8efdf-154">Selecione uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="8efdf-154">Select one of the following options:</span></span>

    * <span data-ttu-id="8efdf-155">**Criar um servidor vinculado que se conecta usando a Autenticação do SQL Server.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-155">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="8efdf-156">Selecione essa opção se um servidor vinculado ou remoto entre o Assinante e o Publicador ainda não tiver sido definido.</span><span class="sxs-lookup"><span data-stu-id="8efdf-156">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="8efdf-157">A replicação cria um servidor vinculado para você.</span><span class="sxs-lookup"><span data-stu-id="8efdf-157">Replication creates a linked server for you.</span></span> <span data-ttu-id="8efdf-158">É necessário que a conta especificada já exista no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-158">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="8efdf-159">**Usar servidor vinculado ou remoto já definido.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-159">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="8efdf-160">Selecione esta opção se você tiver definido um servidor remoto ou vinculado entre o Assinante e o Publicador usando [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), o SQL Server Management Studio ou outro método.</span><span class="sxs-lookup"><span data-stu-id="8efdf-160">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="8efdf-161">Para obter informações sobre as permissões exigidas pela conta de servidor vinculado, consulte o **Assinaturas de atualização em fila** de [inserir descrição do link aqui](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="8efdf-161">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

11. <span data-ttu-id="8efdf-162">Conclua o assistente.</span><span class="sxs-lookup"><span data-stu-id="8efdf-162">Complete the wizard.</span></span>

## <a name="create-an-immediate-updating-pull-subscription"></a><span data-ttu-id="8efdf-163">Criar uma assinatura pull de atualização imediata</span><span class="sxs-lookup"><span data-stu-id="8efdf-163">Create an immediate updating pull subscription</span></span>

1. <span data-ttu-id="8efdf-164">No Publicador, verifique se a publicação tem suporte para assinaturas de atualização imediata executando o [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-164">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-165">Se o valor de `allow_sync_tran` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-165">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="8efdf-166">Se o valor de `allow_sync_tran` no conjunto de resultados for `0`, a publicação deverá ser recriada com as assinaturas de atualização imediata habilitadas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-166">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="8efdf-167">No Publicador, verifique se a publicação tem suporte para assinaturas pull executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-167">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-168">Se o valor de `allow_pull` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas pull.</span><span class="sxs-lookup"><span data-stu-id="8efdf-168">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="8efdf-169">Se o valor de `allow_pull` for `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)especificando `allow_pull` para `@property` e `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-169">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="8efdf-170">No Assinante, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-170">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="8efdf-171">Especifique `@publisher` e `@publication`, e um dos valores a seguir para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-171">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="8efdf-172">`sync tran` – habilita a assinatura para atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-172">`sync tran` - enables the subscription for immediate updating.</span></span>
    * <span data-ttu-id="8efdf-173">`failover` – habilita a assinatura para atualização imediata com atualização enfileirada como uma opção de failover.</span><span class="sxs-lookup"><span data-stu-id="8efdf-173">`failover` - enables the subscription for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="8efdf-174">`failover` requer que a publicação também esteja habilitada para assinaturas de atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-174">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="8efdf-175">No Assinante, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-175">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="8efdf-176">Especifique o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8efdf-176">Specify the following:</span></span>

    * <span data-ttu-id="8efdf-177">Os parâmetros `@publisher`, `@publisher_db`e `@publication` .</span><span class="sxs-lookup"><span data-stu-id="8efdf-177">The `@publisher`, `@publisher_db`, and `@publication` parameters.</span></span> 
    * <span data-ttu-id="8efdf-178">As credenciais do Microsoft Windows sob as quais o Distribution Agent do Assinante é executado para `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-178">The Microsoft Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="8efdf-179">As conexões realizadas com o uso da Autenticação Integrada do Windows sempre são feitas com as credenciais do Windows especificadas por `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-179">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="8efdf-180">O Distribution Agent sempre faz a conexão local ao Assinante usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-180">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="8efdf-181">Por padrão, o agente se conecta ao Distribuidor usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-181">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="8efdf-182">(Opcional) Um valor de `0` para `@distributor_security_mode` e as informações de logon do Microsoft SQL Server para `@distributor_login` e `@distributor_password`, se você precisar usar a Autenticação do SQL Server ao se conectar ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="8efdf-182">(Optional) A value of `0` for `@distributor_security_mode` and the Microsoft SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="8efdf-183">Agenda para o trabalho do Distribution Agent para essa assinatura.</span><span class="sxs-lookup"><span data-stu-id="8efdf-183">A schedule for the Distribution Agent job for this subscription.</span></span> 

5. <span data-ttu-id="8efdf-184">No Assinante, no banco de dados de assinatura, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-184">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="8efdf-185">Especifique `@publisher`, `@publication`, o nome do banco de dados da publicação para `@publisher_db`e um dos seguintes valores para `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-185">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

    * <span data-ttu-id="8efdf-186">`0` – Use a Autenticação do SQL Server ao fazer atualizações no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-186">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="8efdf-187">Essa opção requer a especificação de um logon válido no Publicador para `@login` e `@password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-187">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
    * <span data-ttu-id="8efdf-188">`1` – Use o contexto de segurança do usuário que faz alterações no Assinante quando se conecta ao Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-188">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="8efdf-189">Consulte [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) quanto às restrições relacionadas a esse modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="8efdf-189">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
    * <span data-ttu-id="8efdf-190">`2` – Use um logon de servidor vinculado, existente, definido pelo usuário criado usando [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-190">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>

6. <span data-ttu-id="8efdf-191">No Publicador, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) especificando `@publication`, `@subscriber`, `@destination_db`, um valor de pull para `@subscription_type`e o mesmo valor especificado na etapa 3 para `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-191">At the publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="8efdf-192">Isto registra a assinatura pull no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-192">This registers the pull subscription at the Publisher.</span></span> 


## <a name="create-an-immediate-updating-push-subscription"></a><span data-ttu-id="8efdf-193">Criar uma assinatura push de atualização imediata</span><span class="sxs-lookup"><span data-stu-id="8efdf-193">Create an immediate updating push subscription</span></span> 

1. <span data-ttu-id="8efdf-194">No Publicador, verifique se a publicação tem suporte para assinaturas de atualização imediata executando o [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-194">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-195">Se o valor de `allow_sync_tran` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-195">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="8efdf-196">Se o valor de `allow_sync_tran` no conjunto de resultados for `0`, a publicação deverá ser recriada com as assinaturas de atualização imediata habilitadas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-196">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="8efdf-197">No Publicador, verifique se a publicação tem suporte para assinaturas push executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-197">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-198">Se o valor de `allow_push` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas push.</span><span class="sxs-lookup"><span data-stu-id="8efdf-198">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="8efdf-199">Se o valor de `allow_push` for `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)especificando `allow_push` para `@property` e `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-199">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_push` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="8efdf-200">No Publicador, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-200">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="8efdf-201">Especifique `@publication`, `@subscriber`, `@destination_db`e um dos valores a seguir para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-201">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="8efdf-202">`sync tran` – habilita o suporte para a atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-202">`sync tran` - enables support for immediate updating.</span></span>
    * <span data-ttu-id="8efdf-203">`failover` – habilita o suporte para atualização imediata com a atualização em fila como opção do failover.</span><span class="sxs-lookup"><span data-stu-id="8efdf-203">`failover` - enables support for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="8efdf-204">`failover` requer que a publicação também esteja habilitada para assinaturas de atualização em fila.</span><span class="sxs-lookup"><span data-stu-id="8efdf-204">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="8efdf-205">No Publicador, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-205">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="8efdf-206">Especifique os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="8efdf-206">Specify the following parameters:</span></span>

    * <span data-ttu-id="8efdf-207">`@subscriber`, `@subscriber_db`e `@publication`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-207">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="8efdf-208">As credenciais do Windows sob as quais o Distribution Agent no Distribuidor é executado pata `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-208">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="8efdf-209">As conexões realizadas com o uso da Autenticação Integrada do Windows sempre são feitas com as credenciais do Windows especificadas por `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-209">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="8efdf-210">O Distribution Agent sempre faz a conexão local com o Distribuidor usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-210">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="8efdf-211">Por padrão, o agente se conecta ao Assinante usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-211">By default, the agent will connect to the Subscriber using Windows Integrated Authentication.</span></span> 

    * <span data-ttu-id="8efdf-212">(Opcional) Um valor de `0` para `@subscriber_security_mode` e as informações de logon do SQL Server para `@subscriber_login` e `@subscriber_password`, se você precisar usar a Autenticação do SQL Server ao se conectar ao Assinante.</span><span class="sxs-lookup"><span data-stu-id="8efdf-212">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="8efdf-213">Agenda para o trabalho do Distribution Agent para essa assinatura.</span><span class="sxs-lookup"><span data-stu-id="8efdf-213">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="8efdf-214">No Assinante, no banco de dados de assinatura, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-214">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="8efdf-215">Especifique `@publisher`, `@publication`, o nome do banco de dados da publicação para `@publisher_db`e um dos seguintes valores para `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-215">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

     * <span data-ttu-id="8efdf-216">`0` – Use a Autenticação do SQL Server ao fazer atualizações no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-216">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="8efdf-217">Essa opção requer a especificação de um logon válido no Publicador para `@login` e `@password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-217">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
     * <span data-ttu-id="8efdf-218">`1` – Use o contexto de segurança do usuário que faz alterações no Assinante quando se conecta ao Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-218">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="8efdf-219">Consulte [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) quanto às restrições relacionadas a esse modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="8efdf-219">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
     * <span data-ttu-id="8efdf-220">`2` – Use um logon de servidor vinculado, existente, definido pelo usuário criado usando [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-220">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>


## <a name="create-a-queued-updating-pull-subscription"></a><span data-ttu-id="8efdf-221">Criar uma assinatura pull de atualização em fila</span><span class="sxs-lookup"><span data-stu-id="8efdf-221">Create a queued updating pull subscription</span></span> ##

1. <span data-ttu-id="8efdf-222">No Publicador, verifique se a publicação tem suporte para assinaturas de atualização em fila executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-222">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-223">Se o valor de `allow_queued_tran` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-223">If the value of `allow_queued_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="8efdf-224">Se o valor de `allow_queued_tran` no conjunto de resultados for `0`, a publicação deverá ser recriada com as assinaturas de atualização em fila habilitadas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-224">If the value of `allow_queued_tran` in the result set is `0`, the publication must be recreated with queued updating subscriptions enabled.</span></span>

2. <span data-ttu-id="8efdf-225">No Publicador, verifique se a publicação tem suporte para assinaturas pull executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-225">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-226">Se o valor de `allow_pull` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas pull.</span><span class="sxs-lookup"><span data-stu-id="8efdf-226">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="8efdf-227">Se o valor de `allow_pull` for `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)especificando `allow_pull` para `@property` e `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-227">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="8efdf-228">No Assinante, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-228">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="8efdf-229">Especifique `@publisher` e `@publication`, e um dos valores a seguir para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-229">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="8efdf-230">`queued tran` – habilita a assinatura de atualização enfileirada.</span><span class="sxs-lookup"><span data-stu-id="8efdf-230">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="8efdf-231">`queued failover` – habilita o suporte para atualização em fila com a atualização imediata como opção do failover.</span><span class="sxs-lookup"><span data-stu-id="8efdf-231">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="8efdf-232">`queued failover` requer que a publicação também esteja habilitada para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-232">`queued failover` requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="8efdf-233">Para failover de atualização imediata, você deve usar [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para definir as credenciais sob as quais as alterações no Assinante são replicadas no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-233">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>
 
4. <span data-ttu-id="8efdf-234">No Assinante, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-234">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="8efdf-235">Especifique os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="8efdf-235">Specify the following parameters:</span></span>

    * <span data-ttu-id="8efdf-236">@publisher, `@publisher_db`e `@publication`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-236">@publisher, `@publisher_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="8efdf-237">As credenciais do Windows sob as quais o Distribution Agent do Assinante é executado para `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-237">The Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="8efdf-238">As conexões realizadas com o uso da Autenticação Integrada do Windows sempre são feitas com as credenciais do Windows especificadas por `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-238">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="8efdf-239">O Distribution Agent sempre faz a conexão local ao Assinante usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-239">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="8efdf-240">Por padrão, o agente se conecta ao Distribuidor usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-240">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="8efdf-241">(Opcional) Um valor de `0` para `@distributor_security_mode` e as informações de logon do SQL Server para `@distributor_login` e `@distributor_password`, se você precisar usar a Autenticação do SQL Server ao se conectar ao Distribuidor.</span><span class="sxs-lookup"><span data-stu-id="8efdf-241">(Optional) A value of `0` for `@distributor_security_mode` and the SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="8efdf-242">Agenda para o trabalho do Distribution Agent para essa assinatura.</span><span class="sxs-lookup"><span data-stu-id="8efdf-242">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="8efdf-243">No Publicador, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) para registrar o Assinante no Publicador, especificando `@publication`, `@subscriber`, `@destination_db`, um valor de pull para `@subscription_type`e o mesmo valor especificado na etapa 3 para `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-243">At the publisher, execute [sp_addsubscriber](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) to register the Subscriber at the Publisher, specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="8efdf-244">Isto registra a assinatura pull no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-244">This registers the pull subscription at the Publisher.</span></span> 


## <a name="to-create-a-queued-updating-push-subscription"></a><span data-ttu-id="8efdf-245">Para criar uma assinatura push de atualização em fila</span><span class="sxs-lookup"><span data-stu-id="8efdf-245">To create a queued updating push subscription</span></span> ##

1. <span data-ttu-id="8efdf-246">No Publicador, verifique se a publicação tem suporte para assinaturas de atualização em fila executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-246">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-247">Se o valor de allow_queued_tran no conjunto de resultados for 1, a publicação tem suporte para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-247">If the value of allow_queued_tran in the result set is 1, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="8efdf-248">Se o valor de allow_queued_tran no conjunto de resultados for 0, a publicação deverá ser recriada com as assinaturas de atualização em fila habilitadas.</span><span class="sxs-lookup"><span data-stu-id="8efdf-248">If the value of allow_queued_tran in the result set is 0, the publication must be recreated with queued updating subscriptions enabled.</span></span> <span data-ttu-id="8efdf-249">Para obter mais informações, confira Como Habilitar atualização de assinaturas para publicações transacionais (Programação Transact-SQL de replicação).</span><span class="sxs-lookup"><span data-stu-id="8efdf-249">For more information, see How to: Enable Updating Subscriptions for Transactional Publications (Replication Transact-SQL Programming).</span></span>

2. <span data-ttu-id="8efdf-250">No Publicador, verifique se a publicação tem suporte para assinaturas push executando [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-250">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="8efdf-251">Se o valor de `allow_push` no conjunto de resultados for `1`, a publicação tem suporte para assinaturas push.</span><span class="sxs-lookup"><span data-stu-id="8efdf-251">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="8efdf-252">Se o valor de `allow_push` for `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)especificando allow_push para `@property` e `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-252">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying allow_push for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="8efdf-253">No Publicador, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-253">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="8efdf-254">Especifique `@publication`, `@subscriber`, `@destination_db`e um dos valores a seguir para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="8efdf-254">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="8efdf-255">`queued tran` – habilita a assinatura de atualização enfileirada.</span><span class="sxs-lookup"><span data-stu-id="8efdf-255">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="8efdf-256">`queued failover` – habilita o suporte para atualização em fila com a atualização imediata como opção do failover.</span><span class="sxs-lookup"><span data-stu-id="8efdf-256">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="8efdf-257">A opção failover em fila requer que a publicação também esteja habilitada para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-257">The queued failover option requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="8efdf-258">Para failover de atualização imediata, você deve usar [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para definir as credenciais sob as quais as alterações no Assinante são replicadas no Publicador.</span><span class="sxs-lookup"><span data-stu-id="8efdf-258">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>

4. <span data-ttu-id="8efdf-259">No Publicador, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8efdf-259">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="8efdf-260">Especifique os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="8efdf-260">Specify the following parameters:</span></span>

    * <span data-ttu-id="8efdf-261">`@subscriber`, `@subscriber_db`e `@publication`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-261">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="8efdf-262">As credenciais do Windows sob as quais o Distribution Agent no Distribuidor é executado pata `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-262">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="8efdf-263">As conexões realizadas com o uso da Autenticação Integrada do Windows sempre são feitas com as credenciais do Windows especificadas por `@job_login` e `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-263">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="8efdf-264">O Distribution Agent sempre faz a conexão local com o Distribuidor usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-264">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="8efdf-265">Por padrão, o agente se conecta com o Assinante usando a Autenticação Integrada do Windows.</span><span class="sxs-lookup"><span data-stu-id="8efdf-265">By default, the agent connects to the Subscriber using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="8efdf-266">(Opcional) Um valor de `0` para `@subscriber_security_mode` e as informações de logon do SQL Server para `@subscriber_login` e `@subscriber_password`, se você precisar usar a Autenticação do SQL Server ao se conectar ao Assinante.</span><span class="sxs-lookup"><span data-stu-id="8efdf-266">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="8efdf-267">Agenda para o trabalho do Distribution Agent para essa assinatura.</span><span class="sxs-lookup"><span data-stu-id="8efdf-267">A schedule for the Distribution Agent job for this subscription.</span></span>


## <a name="example"></a><span data-ttu-id="8efdf-268">Exemplo</span><span class="sxs-lookup"><span data-stu-id="8efdf-268">Example</span></span> ##

<span data-ttu-id="8efdf-269">Este exemplo cria uma assinatura pull de atualização imediata a uma publicação que tem suporte para assinaturas de atualização imediata.</span><span class="sxs-lookup"><span data-stu-id="8efdf-269">This example creates an immediate updating pull subscription to a publication that supports immediate updating subscriptions.</span></span> <span data-ttu-id="8efdf-270">Os valores para o logon e senha são fornecidos no runtime usando as variáveis sqlcmd scripting.</span><span class="sxs-lookup"><span data-stu-id="8efdf-270">Login and password values are supplied at runtime using sqlcmd scripting variables.</span></span>

> [!NOTE]  
>  <span data-ttu-id="8efdf-271">Este script usa as variáveis de script do sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="8efdf-271">This script uses sqlcmd scripting variables.</span></span> <span data-ttu-id="8efdf-272">Elas estão no formato `$(MyVariable)`.</span><span class="sxs-lookup"><span data-stu-id="8efdf-272">They are in the form `$(MyVariable)`.</span></span> <span data-ttu-id="8efdf-273">Para obter informações sobre como usar variáveis de script na linha de comando e no SQL Server Management Studio, consulte a seção **Executando scripts de replicação** no tópico [Conceitos dos procedimentos armazenados do sistema de replicação](../concepts/replication-system-stored-procedures-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="8efdf-273">For information about how to use scripting variables on the command line and in SQL Server Management Studio, see the **Executing Replication Scripts** section in the topic [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md).</span></span>

```sql
-- Execute this batch at the Subscriber.
DECLARE @publication AS sysname;
DECLARE @publicationDB AS sysname;
DECLARE @publisher AS sysname;
DECLARE @login AS sysname;
DECLARE @password AS nvarchar(512);
SET @publication = N'AdvWorksProductTran';
SET @publicationDB = N'AdventureWorks2008R2';
SET @publisher = $(PubServer);
SET @login = $(Login);
SET @password = $(Password);

-- At the subscription database, create a pull subscription to a transactional 
-- publication using immediate updating with queued updating as a failover.
EXEC sp_addpullsubscription 
    @publisher = @publisher, 
    @publication = @publication, 
    @publisher_db = @publicationDB, 
    @update_mode = N'failover', 
    @subscription_type = N'pull';

-- Add an agent job to synchronize the pull subscription, 
-- which uses Windows Authentication when connecting to the Distributor.
EXEC sp_addpullsubscription_agent 
    @publisher = @publisher, 
    @publisher_db = @publicationDB, 
    @publication = @publication,
    @job_login = @login,
    @job_password = @password; 

-- Add a Windows Authentication-based linked server that enables the 
-- Subscriber-side triggers to make updates at the Publisher. 
EXEC sp_link_publication 
    @publisher = @publisher, 
    @publication = @publication,
    @publisher_db = @publicationDB, 
    @security_mode = 0,
    @login = @login,
    @password = @password;
GO

USE AdventureWorks2008R2;
GO

-- Execute this batch at the Publisher.
DECLARE @publication AS sysname;
DECLARE @subscriptionDB AS sysname;
DECLARE @subscriber AS sysname;
SET @publication = N'AdvWorksProductTran'; 
SET @subscriptionDB = N'AdventureWorks2008R2Replica'; 
SET @subscriber = $(SubServer);

-- At the Publisher, register the subscription, using the defaults.
USE [AdventureWorks2008R2]
EXEC sp_addsubscription 
    @publication = @publication, 
    @subscriber = @subscriber, 
    @destination_db = @subscriptionDB, 
    @subscription_type = N'pull', 
    @update_mode = N'failover';
GO
```

## <a name="set-queued-updating-conflict-resolution-options-sql-server-management-studio"></a><span data-ttu-id="8efdf-274">Definir opções de resolução de conflito de atualização na fila (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="8efdf-274">Set Queued Updating Conflict Resolution Options (SQL Server Management Studio)</span></span>
  <span data-ttu-id="8efdf-275">Defina as opções de resolução de conflitos para publicações que dão suporte a assinaturas de atualização na fila na página **Opções de Assinatura** da caixa de diálogo **Propriedades de Publicação – \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="8efdf-275">Set conflict resolution options for publications that support queued updating subscriptions on the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="8efdf-276">Para obter mais informações sobre como acessar essa caixa de diálogo, consulte [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8efdf-276">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
### <a name="to-set-queued-updating-conflict-resolution-options"></a><span data-ttu-id="8efdf-277">Para definir opções de resolução de conflito de atualização na fila</span><span class="sxs-lookup"><span data-stu-id="8efdf-277">To set queued updating conflict resolution options</span></span>  
  
1.  <span data-ttu-id="8efdf-278">Na página **Opções de Assinatura** da caixa de diálogo **Propriedades de Publicação – \<Publication>** , selecione um dos seguintes valores para a opção **Política de resolução de conflitos**:</span><span class="sxs-lookup"><span data-stu-id="8efdf-278">On the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box, select one of the following values for the **Conflict resolution policy** option:</span></span>    
    -   <span data-ttu-id="8efdf-279">**Mantenha a alteração do Publicador.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-279">**Keep the Publisher change**</span></span>    
    -   <span data-ttu-id="8efdf-280">**Mantenha a alteração do Assinante.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-280">**Keep the Subscriber change**</span></span>    
    -   <span data-ttu-id="8efdf-281">**Reinicialize a assinatura.**</span><span class="sxs-lookup"><span data-stu-id="8efdf-281">**Reinitialize the subscription**</span></span>    
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  

## <a name="see-also"></a><span data-ttu-id="8efdf-282">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8efdf-282">See Also</span></span> ##
 <span data-ttu-id="8efdf-283">[Create a Publication](create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="8efdf-283">[Create a Publication](create-a-publication.md) </span></span>  
 <span data-ttu-id="8efdf-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="8efdf-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span></span>  
 [<span data-ttu-id="8efdf-285">Usar sqlcmd com variáveis de script</span><span class="sxs-lookup"><span data-stu-id="8efdf-285">Use sqlcmd with Scripting Variables</span></span>](../../scripting/sqlcmd-use-with-scripting-variables.md)   

  
