---
title: Inicializar uma assinatura com um instantâneo | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- snapshots [SQL Server replication], initializing subscriptions
- initializing subscriptions [SQL Server replication], snapshots
ms.assetid: 77a9ade2-cdc0-4ae9-a02d-6e29d7c2ada0
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f8b776e71e9d1197bc174169aee8ccf692884308
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569886"
---
# <a name="initialize-a-subscription-with-a-snapshot"></a><span data-ttu-id="a3ece-102">Inicializar uma assinatura com um instantâneo</span><span class="sxs-lookup"><span data-stu-id="a3ece-102">Initialize a Subscription with a Snapshot</span></span>
  <span data-ttu-id="a3ece-103">Após uma publicação ter sido criada, um instantâneo inicial é tipicamente criado e copiado para a pasta de instantâneo (isso acontece por padrão para publicações de mesclagem criadas com o Assistente para Novas Publicações).</span><span class="sxs-lookup"><span data-stu-id="a3ece-103">After a publication has been created, an initial snapshot is typically created and copied to the snapshot folder (this occurs by default for merge publications created with the New Publication Wizard).</span></span> <span data-ttu-id="a3ece-104">Isso é então aplicado ao Assinante pelo Agente de Distribuição (para publicações transacionais e instantâneas) ou o Agente de Mesclagem (para publicações de mesclagem) durante a sincronização inicial da assinatura.</span><span class="sxs-lookup"><span data-stu-id="a3ece-104">It is then applied to the Subscriber by the Distribution Agent (for transactional and snapshot publications) or the Merge Agent (for merge publications) during the initial synchronization of the subscription.</span></span> <span data-ttu-id="a3ece-105">O processo de instantâneo depende do tipo de publicação:</span><span class="sxs-lookup"><span data-stu-id="a3ece-105">The snapshot process depends on the type of publication:</span></span>  
  
-   <span data-ttu-id="a3ece-106">Se o instantâneo destinar-se a uma publicação instantânea, a uma publicação transacional ou a uma publicação de mesclagem que não use filtros com parâmetros, o instantâneo conterá o esquema e os dados em arquivos do BPC (programa de cópia em massa), assim como restrições, propriedades estendidas, índices, gatilhos e tabelas de sistema necessárias para a replicação.</span><span class="sxs-lookup"><span data-stu-id="a3ece-106">If the snapshot is for a snapshot publication, a transactional publication, or a merge publication that doesn't use parameterized filters, the snapshot contains the schema and data in bulk copy program (bcp) files, as well as constraints, extended properties, indexes, triggers, and the system tables necessary for replication.</span></span> <span data-ttu-id="a3ece-107">Para mais informações sobre criação e aplicação do instantâneo, consulte [Criar e aplicar o instantâneo](create-and-apply-the-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="a3ece-107">For more information about creating and applying the snapshot, see [Create and Apply the Snapshot](create-and-apply-the-snapshot.md).</span></span>  
  
-   <span data-ttu-id="a3ece-108">Se o instantâneo for uma publicação de mesclagem que usa filtros com parâmetros, o instantâneo será criado usando um processo de duas partes.</span><span class="sxs-lookup"><span data-stu-id="a3ece-108">If the snapshot is for a merge publication that uses parameterized filters, the snapshot is created using a two-part process.</span></span> <span data-ttu-id="a3ece-109">Primeiro é criado um instantâneo do esquema que contém os scripts de replicação e o esquema dos objetos publicados, mas não os dados.</span><span class="sxs-lookup"><span data-stu-id="a3ece-109">First a schema snapshot is created that contains the replication scripts and the schema of the published objects, but not the data.</span></span> <span data-ttu-id="a3ece-110">Cada assinatura é então inicializada com um instantâneo que inclui os scripts e o esquema copiados do instantâneo do esquema e os dados pertencentes à partição de assinatura.</span><span class="sxs-lookup"><span data-stu-id="a3ece-110">Each subscription is then initialized with a snapshot that includes the scripts and schema copied from the schema snapshot and the data that belongs to the subscription's partition.</span></span> <span data-ttu-id="a3ece-111">Para obter mais informações, consulte [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="a3ece-111">For more information, see [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
 <span data-ttu-id="a3ece-112">O instantâneo consiste de arquivos diferentes que dependem do tipo de replicação e os artigos em sua publicação.</span><span class="sxs-lookup"><span data-stu-id="a3ece-112">The snapshot consists of different files depending on the type of replication and the articles in your publication.</span></span> <span data-ttu-id="a3ece-113">Esses arquivos são copiados para a pasta padrão de instantâneo quando o Distribuidor foi configurado ou para uma pasta alternativa de instantâneo especificada quando a publicação foi criada.</span><span class="sxs-lookup"><span data-stu-id="a3ece-113">These files are copied to the default snapshot folder specified when the Distributor was configured or the alternate snapshot folder specified when the publication was created.</span></span>  
  
|<span data-ttu-id="a3ece-114">Tipo de replicação</span><span class="sxs-lookup"><span data-stu-id="a3ece-114">Type of Replication</span></span>|<span data-ttu-id="a3ece-115">Arquivos comuns de instantâneo</span><span class="sxs-lookup"><span data-stu-id="a3ece-115">Common Snapshot Files</span></span>|  
|-------------------------|---------------------------|  
|<span data-ttu-id="a3ece-116">Replicação de instantâneo ou replicação transacional</span><span class="sxs-lookup"><span data-stu-id="a3ece-116">Snapshot Replication or Transactional Replication</span></span>|<span data-ttu-id="a3ece-117">esquema (.sch); dados (.bcp); restrições e índices (.dri); restrições (.idx); gatilhos (.trg): para atualizar só os Assinantes; arquivos de instantâneo compactados (.cab).</span><span class="sxs-lookup"><span data-stu-id="a3ece-117">schema (.sch); data (.bcp); constraints and indexes (.dri); constraints (.idx); triggers (.trg):for updating Subscribers only; compressed snapshot files (.cab).</span></span>|  
|<span data-ttu-id="a3ece-118">Replicação de mesclagem</span><span class="sxs-lookup"><span data-stu-id="a3ece-118">Merge Replication</span></span>|<span data-ttu-id="a3ece-119">esquema (.sch); dados (.bcp); restrições e índices (.dri); gatilhos (.trg); dados da tabela do sistema (.sys); tabelas em conflito (.cft); arquivos de instantâneo compactados (.cab).</span><span class="sxs-lookup"><span data-stu-id="a3ece-119">schema (.sch); data (.bcp); constraints and indexes (.dri); triggers (.trg); system table data (.sys); conflict tables (.cft); compressed snapshot files (.cab).</span></span>|  
  
 <span data-ttu-id="a3ece-120">Se uma transferência de instantâneo for interrompida, ela retomará automaticamente de onde parou e não reenviará nenhum arquivo que já tenha sido transferido completamente.</span><span class="sxs-lookup"><span data-stu-id="a3ece-120">If the snapshot transfer is interrupted at any point, it will automatically resume and will not resend any files that have already been completely transferred.</span></span> <span data-ttu-id="a3ece-121">A unidade de entrega para o Agente de Instantâneo é o arquivo bcp para cada artigo de publicação, então, os arquivos que são parcialmente entregues deverão ser reenviados completamente.</span><span class="sxs-lookup"><span data-stu-id="a3ece-121">The unit of delivery for the Snapshot Agent is the bcp file for each publication article, so files that are partially delivered must be completely redelivered.</span></span> <span data-ttu-id="a3ece-122">Entretanto, continuar o instantâneo de onde parou pode reduzir significantemente a quantia de dados transmitidos e assegurar uma entrega de instantâneo a tempo mesmo se a conexão não for confiável.</span><span class="sxs-lookup"><span data-stu-id="a3ece-122">However, resuming the snapshot can significantly reduce the amount of data transmitted and ensure timely snapshot delivery even if the connection is unreliable.</span></span>  
  
## <a name="snapshot-options"></a><span data-ttu-id="a3ece-123">Opções de instantâneo</span><span class="sxs-lookup"><span data-stu-id="a3ece-123">Snapshot Options</span></span>  
 <span data-ttu-id="a3ece-124">Há várias opções disponíveis ao inicializar uma assinatura com um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="a3ece-124">There are a number of options available when initializing a subscription with a snapshot.</span></span> <span data-ttu-id="a3ece-125">Você pode:</span><span class="sxs-lookup"><span data-stu-id="a3ece-125">You can:</span></span>  
  
-   <span data-ttu-id="a3ece-126">Especificar um local alternativo para a pasta de instantâneo em vez do ou além do local da pasta de instantâneo padrão.</span><span class="sxs-lookup"><span data-stu-id="a3ece-126">Specify an alternate snapshot folder location instead of, or in addition, to the default snapshot folder location.</span></span> <span data-ttu-id="a3ece-127">Para obter mais informações, consulte [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span><span class="sxs-lookup"><span data-stu-id="a3ece-127">For more information, see [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span></span>  
  
-   <span data-ttu-id="a3ece-128">Compacte instantâneos para armazenamento em mídias removíveis ou para transferência em uma rede lenta.</span><span class="sxs-lookup"><span data-stu-id="a3ece-128">Compress snapshots for storage on removable media or for transfer over a slow network.</span></span> <span data-ttu-id="a3ece-129">Para obter mais informações, consulte [Compressed Snapshots](compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="a3ece-129">For more information, see [Compressed Snapshots](compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="a3ece-130">Execute scripts de Transact-SQL antes ou depois que o instantâneo seja aplicado.</span><span class="sxs-lookup"><span data-stu-id="a3ece-130">Execute Transact-SQL scripts before or after the snapshot is applied.</span></span> <span data-ttu-id="a3ece-131">Para mais informações, consulte [Executar scripts antes e depois da aplicação do instantâneo](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span><span class="sxs-lookup"><span data-stu-id="a3ece-131">For more information, see [Execute Scripts Before and After the Snapshot Is Applied](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span></span>  
  
-   <span data-ttu-id="a3ece-132">Transfira arquivos de instantâneo usando o Protocolo de Transferência de Arquivo (FTP).</span><span class="sxs-lookup"><span data-stu-id="a3ece-132">Transfer snapshot files using File Transfer Protocol (FTP).</span></span> <span data-ttu-id="a3ece-133">Para obter mais informações, consulte [Transferir instantâneos pelo FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="a3ece-133">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a3ece-134">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="a3ece-134">See Also</span></span>  
 <span data-ttu-id="a3ece-135">[Inicializar uma assinatura](initialize-a-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="a3ece-135">[Initialize a Subscription](initialize-a-subscription.md) </span></span>  
 [<span data-ttu-id="a3ece-136">Proteger a pasta de instantâneos</span><span class="sxs-lookup"><span data-stu-id="a3ece-136">Secure the Snapshot Folder</span></span>](security/secure-the-snapshot-folder.md)  
  
  
