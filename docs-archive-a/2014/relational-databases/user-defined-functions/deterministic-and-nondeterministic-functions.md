---
title: Funções determinísticas e não determinísticas | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- built-in functions [SQL Server]
- nondeterministic functions
- extended stored procedures [SQL Server], functions that call
- deterministic functions
- user-defined functions [SQL Server], deterministic
ms.assetid: 2f3ce5f5-c81c-4470-8141-8144d4f218dd
author: rothja
ms.author: jroth
ms.openlocfilehash: 9e755532e06d64e273408c7e81936a1c2d370697
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685036"
---
# <a name="deterministic-and-nondeterministic-functions"></a><span data-ttu-id="2eb2a-102">Funções determinísticas e não determinísticas</span><span class="sxs-lookup"><span data-stu-id="2eb2a-102">Deterministic and Nondeterministic Functions</span></span>
  <span data-ttu-id="2eb2a-103">As funções determinísticas sempre retornam o mesmo resultado quando são chamadas com o uso de um conjunto específico de valores de entrada e quando recebem o mesmo estado do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-103">Deterministic functions always return the same result any time they are called with a specific set of input values and given the same state of the database.</span></span> <span data-ttu-id="2eb2a-104">As funções não determinísticas podem retornar resultados diferentes cada vez que são chamadas com um conjunto específico de valores de entrada, mesmo que o estado do banco de dados que elas acessam permaneça o mesmo.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-104">Nondeterministic functions may return different results each time they are called with a specific set of input values even if the database state that they access remains the same.</span></span> <span data-ttu-id="2eb2a-105">Por exemplo, a função AVG sempre retorna o mesmo resultado, dadas as qualificações declaradas acima, mas a função GETDATE, que retorna o valor datetime atual, sempre retorna um resultado diferente.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-105">For example, the function AVG always returns the same result given the qualifications stated above, but the GETDATE function, which returns the current datetime value, always returns a different result.</span></span>  
  
 <span data-ttu-id="2eb2a-106">Há várias propriedades de funções definidas pelo usuário que determinam a capacidade do [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] de indexar os resultados da função, tanto por meio de índices em colunas computadas que chamam a função como por meio de exibições indexadas que referenciam a função.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-106">There are several properties of user-defined functions that determine the ability of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to index the results of the function, either through indexes on computed columns that call the function, or through indexed views that reference the function.</span></span> <span data-ttu-id="2eb2a-107">O determinismo de uma função é uma dessas propriedades.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-107">The determinism of a function is one such property.</span></span> <span data-ttu-id="2eb2a-108">Por exemplo, um índice clusterizado não poderá ser criado em uma exibição se ela referenciar qualquer função não determinística.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-108">For example, a clustered index cannot be created on a view if the view references any nondeterministic functions.</span></span> <span data-ttu-id="2eb2a-109">Para obter mais informações sobre propriedades de funções, inclusive determinismo, consulte [Funções definidas pelo usuário](user-defined-functions.md).</span><span class="sxs-lookup"><span data-stu-id="2eb2a-109">For more information about the properties of functions, including determinism, see [User-Defined Functions](user-defined-functions.md).</span></span>  
  
 <span data-ttu-id="2eb2a-110">Este tópico identifica o determinismo de funções de sistema internas e o efeito da propriedade determinística de funções definidas pelo usuário quando ela contém uma chamada para procedimentos armazenados estendidos.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-110">This topic identifies the determinism of built-in system functions and the effect on the deterministic property of user-defined functions when it contains a call to extended stored procedures.</span></span>  
  
## <a name="built-in-function-determinism"></a><span data-ttu-id="2eb2a-111">Determinismo de função interna</span><span class="sxs-lookup"><span data-stu-id="2eb2a-111">Built-in Function Determinism</span></span>  
 <span data-ttu-id="2eb2a-112">Você não pode influenciar o determinismo de nenhuma função interna.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-112">You cannot influence the determinism of any built-in function.</span></span> <span data-ttu-id="2eb2a-113">Cada função interna é determinística ou não determinística com base no modo como a função é implementada pelo [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb2a-113">Each built-in function is deterministic or nondeterministic based on how the function is implemented by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb2a-114">Por exemplo, a especificação de uma cláusula ORDER BY em uma consulta não altera o determinismo de uma função usada nessa consulta.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-114">For example, specifying an ORDER BY clause in a query does not change the determinism of a function that used in that query.</span></span>  
  
 <span data-ttu-id="2eb2a-115">Todas as funções internas de cadeia de caracteres são determinísticas.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-115">All of the string built-in functions are deterministic.</span></span> <span data-ttu-id="2eb2a-116">Para obter uma lista dessas funções, consulte [Funções de sequência de caracteres &#40;Transact-SQL&#41;](/sql/t-sql/functions/string-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb2a-116">For a list of these functions, see [String Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/string-functions-transact-sql).</span></span>  
  
 <span data-ttu-id="2eb2a-117">As seguintes funções internas pertencentes a categorias de funções internas que não sejam de cadeia de caracteres sempre são determinísticas.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-117">The following built-in functions from categories of built-in functions other than string functions are always deterministic.</span></span>  
  
||||  
|-|-|-|  
|<span data-ttu-id="2eb2a-118">ABS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-118">ABS</span></span>|<span data-ttu-id="2eb2a-119">DATEDIFF</span><span class="sxs-lookup"><span data-stu-id="2eb2a-119">DATEDIFF</span></span>|<span data-ttu-id="2eb2a-120">POWER</span><span class="sxs-lookup"><span data-stu-id="2eb2a-120">POWER</span></span>|  
|<span data-ttu-id="2eb2a-121">ACOS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-121">ACOS</span></span>|<span data-ttu-id="2eb2a-122">DAY</span><span class="sxs-lookup"><span data-stu-id="2eb2a-122">DAY</span></span>|<span data-ttu-id="2eb2a-123">RADIANS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-123">RADIANS</span></span>|  
|<span data-ttu-id="2eb2a-124">ASIN</span><span class="sxs-lookup"><span data-stu-id="2eb2a-124">ASIN</span></span>|<span data-ttu-id="2eb2a-125">DEGREES</span><span class="sxs-lookup"><span data-stu-id="2eb2a-125">DEGREES</span></span>|<span data-ttu-id="2eb2a-126">ROUND</span><span class="sxs-lookup"><span data-stu-id="2eb2a-126">ROUND</span></span>|  
|<span data-ttu-id="2eb2a-127">ATAN</span><span class="sxs-lookup"><span data-stu-id="2eb2a-127">ATAN</span></span>|<span data-ttu-id="2eb2a-128">EXP</span><span class="sxs-lookup"><span data-stu-id="2eb2a-128">EXP</span></span>|<span data-ttu-id="2eb2a-129">SIGN</span><span class="sxs-lookup"><span data-stu-id="2eb2a-129">SIGN</span></span>|  
|<span data-ttu-id="2eb2a-130">ATN2</span><span class="sxs-lookup"><span data-stu-id="2eb2a-130">ATN2</span></span>|<span data-ttu-id="2eb2a-131">FLOOR</span><span class="sxs-lookup"><span data-stu-id="2eb2a-131">FLOOR</span></span>|<span data-ttu-id="2eb2a-132">SIN</span><span class="sxs-lookup"><span data-stu-id="2eb2a-132">SIN</span></span>|  
|<span data-ttu-id="2eb2a-133">CEILING</span><span class="sxs-lookup"><span data-stu-id="2eb2a-133">CEILING</span></span>|<span data-ttu-id="2eb2a-134">ISNULL</span><span class="sxs-lookup"><span data-stu-id="2eb2a-134">ISNULL</span></span>|<span data-ttu-id="2eb2a-135">SQUARE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-135">SQUARE</span></span>|  
|<span data-ttu-id="2eb2a-136">COALESCE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-136">COALESCE</span></span>|<span data-ttu-id="2eb2a-137">ISNUMERIC</span><span class="sxs-lookup"><span data-stu-id="2eb2a-137">ISNUMERIC</span></span>|<span data-ttu-id="2eb2a-138">SQRT</span><span class="sxs-lookup"><span data-stu-id="2eb2a-138">SQRT</span></span>|  
|<span data-ttu-id="2eb2a-139">COS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-139">COS</span></span>|<span data-ttu-id="2eb2a-140">LOG</span><span class="sxs-lookup"><span data-stu-id="2eb2a-140">LOG</span></span>|<span data-ttu-id="2eb2a-141">TAN</span><span class="sxs-lookup"><span data-stu-id="2eb2a-141">TAN</span></span>|  
|<span data-ttu-id="2eb2a-142">COT</span><span class="sxs-lookup"><span data-stu-id="2eb2a-142">COT</span></span>|<span data-ttu-id="2eb2a-143">LOG10</span><span class="sxs-lookup"><span data-stu-id="2eb2a-143">LOG10</span></span>|<span data-ttu-id="2eb2a-144">YEAR</span><span class="sxs-lookup"><span data-stu-id="2eb2a-144">YEAR</span></span>|  
|<span data-ttu-id="2eb2a-145">DATALENGTH</span><span class="sxs-lookup"><span data-stu-id="2eb2a-145">DATALENGTH</span></span>|<span data-ttu-id="2eb2a-146">MONTH</span><span class="sxs-lookup"><span data-stu-id="2eb2a-146">MONTH</span></span>||  
|<span data-ttu-id="2eb2a-147">DATEADD</span><span class="sxs-lookup"><span data-stu-id="2eb2a-147">DATEADD</span></span>|<span data-ttu-id="2eb2a-148">NULLIF</span><span class="sxs-lookup"><span data-stu-id="2eb2a-148">NULLIF</span></span>||  
  
 <span data-ttu-id="2eb2a-149">As funções a seguir nem sempre são determinísticas, mas podem ser usadas em exibições indexadas ou índices em colunas computadas quando são especificadas de uma maneira determinística.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-149">The following functions are not always deterministic, but can be used in indexed views or indexes on computed columns when they are specified in a deterministic manner.</span></span>  
  
|<span data-ttu-id="2eb2a-150">Função</span><span class="sxs-lookup"><span data-stu-id="2eb2a-150">Function</span></span>|<span data-ttu-id="2eb2a-151">Comentários</span><span class="sxs-lookup"><span data-stu-id="2eb2a-151">Comments</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="2eb2a-152">todas as funções de agregação</span><span class="sxs-lookup"><span data-stu-id="2eb2a-152">all aggregate functions</span></span>|<span data-ttu-id="2eb2a-153">Todas as funções de agregação são determinísticas, a menos que sejam especificadas com as cláusulas OVER e ORDER BY.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-153">All aggregate functions are deterministic unless they are specified with the OVER and ORDER BY clauses.</span></span> <span data-ttu-id="2eb2a-154">Para obter uma lista dessas funções, consulte [Funções de agregação &#40;Transact-SQL&#41;](/sql/t-sql/functions/aggregate-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb2a-154">For a list of these functions, see [Aggregate Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/aggregate-functions-transact-sql).</span></span>|  
|<span data-ttu-id="2eb2a-155">CAST</span><span class="sxs-lookup"><span data-stu-id="2eb2a-155">CAST</span></span>|<span data-ttu-id="2eb2a-156">Determinística, a menos que usada com `datetime`, `smalldatetime` ou `sql_variant`.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-156">Deterministic unless used with `datetime`, `smalldatetime`, or `sql_variant`.</span></span>|  
|<span data-ttu-id="2eb2a-157">CONVERT</span><span class="sxs-lookup"><span data-stu-id="2eb2a-157">CONVERT</span></span>|<span data-ttu-id="2eb2a-158">Determinística, a menos que um destas condições exista:</span><span class="sxs-lookup"><span data-stu-id="2eb2a-158">Deterministic unless one of these conditions exists:</span></span><br /><br /> <span data-ttu-id="2eb2a-159">O tipo de origem é `sql_variant`.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-159">Source type is `sql_variant`.</span></span><br /><br /> <span data-ttu-id="2eb2a-160">O tipo de destino é `sql_variant` e seu tipo de origem é não determinístico.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-160">Target type is `sql_variant` and its source type is nondeterministic.</span></span><br /><br /> <span data-ttu-id="2eb2a-161">O tipo de origem ou de destino é `datetime` ou `smalldatetime`, o outro tipo de origem ou destino é uma cadeia de caracteres, e um estilo não determinístico é especificado.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-161">Source or target type is `datetime` or `smalldatetime`, the other source or target type is a character string, and a nondeterministic style is specified.</span></span> <span data-ttu-id="2eb2a-162">Para ser determinístico, o parâmetro de estilo deve ser uma constante.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-162">To be deterministic, the style parameter must be a constant.</span></span> <span data-ttu-id="2eb2a-163">Além disso, estilos menores ou iguais a 100 são não determinísticos, com exceção dos estilos 20 e 21.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-163">Additionally, styles less than or equal to 100 are nondeterministic, except for styles 20 and 21.</span></span> <span data-ttu-id="2eb2a-164">Estilos maiores que 100 são determinísticos, com exceção dos estilos 106, 107, 109 e 113.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-164">Styles greater than 100 are deterministic, except for styles 106, 107, 109 and 113.</span></span>|  
|<span data-ttu-id="2eb2a-165">CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="2eb2a-165">CHECKSUM</span></span>|<span data-ttu-id="2eb2a-166">Determinístico, com a exceção de CHECKSUM(\*).</span><span class="sxs-lookup"><span data-stu-id="2eb2a-166">Deterministic, with the exception of CHECKSUM(\*).</span></span>|  
|<span data-ttu-id="2eb2a-167">ISDATE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-167">ISDATE</span></span>|<span data-ttu-id="2eb2a-168">Determinístico somente se usado com a função CONVERT, o parâmetro de estilo CONVERT é especificado e o estilo não é igual a 0, 100, 9 ou 109.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-168">Deterministic only if used with the CONVERT function, the CONVERT style parameter is specified and style is not equal to 0, 100, 9, or 109.</span></span>|  
|<span data-ttu-id="2eb2a-169">RAND</span><span class="sxs-lookup"><span data-stu-id="2eb2a-169">RAND</span></span>|<span data-ttu-id="2eb2a-170">RAND só é determinística quando um parâmetro *seed* é especificado.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-170">RAND is deterministic only when a *seed* parameter is specified.</span></span>|  
  
 <span data-ttu-id="2eb2a-171">Todas as funções estatísticas de configuração, cursor, metadados, segurança e sistema são não determinísticas.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-171">All the configuration, cursor, metadata, security, and system statistical functions are nondeterministic.</span></span> <span data-ttu-id="2eb2a-172">Para obter uma lista dessas funções, consulte [Funções de configuração &#40;Transact-SQL&#41;](/sql/t-sql/functions/configuration-functions-transact-sql), [Funções de cursor &#40;Transact-SQL&#41;](/sql/t-sql/functions/cursor-functions-transact-sql), [Funções de metadados &#40;Transact-SQL&#41;](/sql/t-sql/functions/metadata-functions-transact-sql), [Funções de segurança &#40;Transact-SQL&#41;](/sql/t-sql/functions/security-functions-transact-sql) e [Funções estatísticas de sistema &#40;Transact-SQL&#41;](/sql/t-sql/functions/system-statistical-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb2a-172">For a list of these functions, see [Configuration Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/configuration-functions-transact-sql), [Cursor Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/cursor-functions-transact-sql), [Metadata Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/metadata-functions-transact-sql), [Security Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/security-functions-transact-sql), and [System Statistical Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/system-statistical-functions-transact-sql).</span></span>  
  
 <span data-ttu-id="2eb2a-173">As funções internas a seguir de outras categorias nunca são determinísticas.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-173">The following built-in functions from other categories are always nondeterministic.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2eb2a-174">@@CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-174">@@CONNECTIONS</span></span>|<span data-ttu-id="2eb2a-175">GETDATE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-175">GETDATE</span></span>|  
|<span data-ttu-id="2eb2a-176">@@CPU_BUSY</span><span class="sxs-lookup"><span data-stu-id="2eb2a-176">@@CPU_BUSY</span></span>|<span data-ttu-id="2eb2a-177">GETUTCDATE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-177">GETUTCDATE</span></span>|  
|<span data-ttu-id="2eb2a-178">@@DBTS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-178">@@DBTS</span></span>|<span data-ttu-id="2eb2a-179">GET_TRANSMISSION_STATUS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-179">GET_TRANSMISSION_STATUS</span></span>|  
|<span data-ttu-id="2eb2a-180">@@IDLE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-180">@@IDLE</span></span>|<span data-ttu-id="2eb2a-181">LAG</span><span class="sxs-lookup"><span data-stu-id="2eb2a-181">LAG</span></span>|  
|<span data-ttu-id="2eb2a-182">@@IO_BUSY</span><span class="sxs-lookup"><span data-stu-id="2eb2a-182">@@IO_BUSY</span></span>|<span data-ttu-id="2eb2a-183">LAST_VALUE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-183">LAST_VALUE</span></span>|  
|<span data-ttu-id="2eb2a-184">@@MAX_CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-184">@@MAX_CONNECTIONS</span></span>|<span data-ttu-id="2eb2a-185">LEAD</span><span class="sxs-lookup"><span data-stu-id="2eb2a-185">LEAD</span></span>|  
|<span data-ttu-id="2eb2a-186">@@PACK_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="2eb2a-186">@@PACK_RECEIVED</span></span>|<span data-ttu-id="2eb2a-187">MIN_ACTIVE_ROWVERSION</span><span class="sxs-lookup"><span data-stu-id="2eb2a-187">MIN_ACTIVE_ROWVERSION</span></span>|  
|<span data-ttu-id="2eb2a-188">@@PACK_SENT</span><span class="sxs-lookup"><span data-stu-id="2eb2a-188">@@PACK_SENT</span></span>|<span data-ttu-id="2eb2a-189">NEWID</span><span class="sxs-lookup"><span data-stu-id="2eb2a-189">NEWID</span></span>|  
|<span data-ttu-id="2eb2a-190">@@PACKET_ERRORS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-190">@@PACKET_ERRORS</span></span>|<span data-ttu-id="2eb2a-191">NEWSEQUENTIALID</span><span class="sxs-lookup"><span data-stu-id="2eb2a-191">NEWSEQUENTIALID</span></span>|  
|<span data-ttu-id="2eb2a-192">@@TIMETICKS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-192">@@TIMETICKS</span></span>|<span data-ttu-id="2eb2a-193">NEXT VALUE FOR</span><span class="sxs-lookup"><span data-stu-id="2eb2a-193">NEXT VALUE FOR</span></span>|  
|<span data-ttu-id="2eb2a-194">@@TOTAL_ERRORS</span><span class="sxs-lookup"><span data-stu-id="2eb2a-194">@@TOTAL_ERRORS</span></span>|<span data-ttu-id="2eb2a-195">NTILE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-195">NTILE</span></span>|  
|<span data-ttu-id="2eb2a-196">@@TOTAL_READ</span><span class="sxs-lookup"><span data-stu-id="2eb2a-196">@@TOTAL_READ</span></span>|<span data-ttu-id="2eb2a-197">PARSENAME</span><span class="sxs-lookup"><span data-stu-id="2eb2a-197">PARSENAME</span></span>|  
|<span data-ttu-id="2eb2a-198">@@TOTAL_WRITE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-198">@@TOTAL_WRITE</span></span>|<span data-ttu-id="2eb2a-199">PERCENTILE_CONT</span><span class="sxs-lookup"><span data-stu-id="2eb2a-199">PERCENTILE_CONT</span></span>|  
|<span data-ttu-id="2eb2a-200">CUME_DIST</span><span class="sxs-lookup"><span data-stu-id="2eb2a-200">CUME_DIST</span></span>|<span data-ttu-id="2eb2a-201">PERCENTILE_DISC</span><span class="sxs-lookup"><span data-stu-id="2eb2a-201">PERCENTILE_DISC</span></span>|  
|<span data-ttu-id="2eb2a-202">CURRENT_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="2eb2a-202">CURRENT_TIMESTAMP</span></span>|<span data-ttu-id="2eb2a-203">PERCENT_RANK</span><span class="sxs-lookup"><span data-stu-id="2eb2a-203">PERCENT_RANK</span></span>|  
|<span data-ttu-id="2eb2a-204">DENSE_RANK</span><span class="sxs-lookup"><span data-stu-id="2eb2a-204">DENSE_RANK</span></span>|<span data-ttu-id="2eb2a-205">RAND</span><span class="sxs-lookup"><span data-stu-id="2eb2a-205">RAND</span></span>|  
|<span data-ttu-id="2eb2a-206">FIRST_VALUE</span><span class="sxs-lookup"><span data-stu-id="2eb2a-206">FIRST_VALUE</span></span>|<span data-ttu-id="2eb2a-207">RANK</span><span class="sxs-lookup"><span data-stu-id="2eb2a-207">RANK</span></span>|  
||<span data-ttu-id="2eb2a-208">ROW_NUMBER</span><span class="sxs-lookup"><span data-stu-id="2eb2a-208">ROW_NUMBER</span></span>|  
||<span data-ttu-id="2eb2a-209">TEXTPTR</span><span class="sxs-lookup"><span data-stu-id="2eb2a-209">TEXTPTR</span></span>|  
  
## <a name="calling-extended-stored-procedures-from-functions"></a><span data-ttu-id="2eb2a-210">Chamando procedimentos armazenados estendidos de funções</span><span class="sxs-lookup"><span data-stu-id="2eb2a-210">Calling Extended Stored Procedures from Functions</span></span>  
 <span data-ttu-id="2eb2a-211">Funções que chamam procedimentos armazenados estendidos são não determinísticas, pois esses procedimentos podem causar efeitos colaterais no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-211">Functions that call extended stored procedures are nondeterministic, because the extended stored procedures can cause side effects on the database.</span></span> <span data-ttu-id="2eb2a-212">Efeitos colaterais são alterações em um estado global do banco de dados, como a atualização de uma tabela ou de um recurso externo, como um arquivo ou a rede; por exemplo, a modificação de um arquivo ou o envio de uma mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-212">Side effects are changes to a global state of the database, such as an update to a table, or to an external resource, such as a file or the network; for example, modifying a file or sending an e-mail message.</span></span> <span data-ttu-id="2eb2a-213">Você não deve confiar no retorno de um conjunto de resultados consistente ao executar um procedimento armazenado estendido de uma função definida pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-213">You should not rely on returning a consistent result set when executing an extended stored procedure from a user-defined function.</span></span> <span data-ttu-id="2eb2a-214">Funções definidas pelo usuário que criam efeitos colaterais no banco de dados não são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-214">User-defined functions that create side effects on the database are not recommended.</span></span>  
  
 <span data-ttu-id="2eb2a-215">Quando chamado de dentro de uma função, o procedimento armazenado estendido não pode retornar conjuntos de resultados para o cliente.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-215">When called from inside a function, the extended stored procedure cannot return result sets to the client.</span></span> <span data-ttu-id="2eb2a-216">Qualquer API Open Data Services que retorna conjuntos de resultados para o cliente terá um código de retorno FAIL.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-216">Any Open Data Services API that returns result sets to the client will have a return code of FAIL.</span></span>  
  
 <span data-ttu-id="2eb2a-217">O procedimento armazenado estendido pode voltar a se conectar ao [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb2a-217">The extended stored procedure can connect back to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb2a-218">No entanto, o procedimento não pode unir a mesma transação como a função original que invocou o procedimento armazenado estendido.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-218">However, the procedure cannot join the same transaction as the original function that invoked the extended stored procedure.</span></span>  
  
 <span data-ttu-id="2eb2a-219">Semelhante a invocações de um procedimento armazenado ou em lotes, o procedimento armazenado estendido é executado no contexto da conta de segurança do [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows sob a qual o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-219">Similar to invocations from a batch or stored procedure, the extended stored procedure is executed in the context of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows security account under which [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="2eb2a-220">O proprietário do procedimento armazenado estendido deve considerar isso ao conceder permissões para outros usuários executarem o procedimento.</span><span class="sxs-lookup"><span data-stu-id="2eb2a-220">The owner of the extended stored procedure should consider this when granting permissions to other users to execute the procedure.</span></span>  
  
  
