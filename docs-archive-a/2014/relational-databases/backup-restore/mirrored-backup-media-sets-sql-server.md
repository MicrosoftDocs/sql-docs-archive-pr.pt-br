---
title: Conjuntos de mídia de backup espelhado (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- recovery [SQL Server], mirrored backups
- mirrored media sets [SQL Server]
- backup mirrors [SQL Server]
- duplicate backup copies
- interchangeable backup copies [SQL Server]
- media sets [SQL Server], mirrored backup media sets
- backup media [SQL Server], mirrored media
ms.assetid: 05a0b8d1-3585-4f77-972f-69d1c0d4aa9b
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: ce3513c67a0087dd00021de75f360b19819b46db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87583117"
---
# <a name="mirrored-backup-media-sets-sql-server"></a><span data-ttu-id="bd1c5-102">Conjuntos de mídias de backup espelhadas (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bd1c5-102">Mirrored Backup Media Sets (SQL Server)</span></span>
    
> [!NOTE]  
>  <span data-ttu-id="bd1c5-103">Os conjuntos de mídias de backup espelhados têm suporte somente na edição Enterprise do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bd1c5-103">Mirrored backup media sets are supported only in the Enterprise edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="bd1c5-104">O espelhamento de um conjunto de mídias aumenta a confiabilidade do backup reduzindo o impacto do mau funcionamento do dispositivo de backup.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-104">Mirroring a media set increases backup reliability by reducing the impact of backup-device malfunctions.</span></span> <span data-ttu-id="bd1c5-105">Esse mau funcionamento é muito sério, uma vez que os backups são a última linha de defesa contra a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-105">These malfunctions are very serious because backups are the last line of defense against data loss.</span></span> <span data-ttu-id="bd1c5-106">À medida que os bancos de dados crescem, aumenta a probabilidade de que uma falha de um dispositivo de backup ou mídia torne impossível a restauração de um backup.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-106">As databases grow, the probability increases that a failure of a backup device or media will make a backup nonrestorable.</span></span> <span data-ttu-id="bd1c5-107">O espelhamento de mídias de backup aumenta a confiabilidade dos backups fornecendo redundância.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-107">Mirroring backup media increases the reliability of backups by providing redundancy.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bd1c5-108">Para obter informações sobre conjuntos de mídias em geral, consulte [Conjuntos de mídias, famílias de mídia e conjuntos de backup &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="bd1c5-108">For information about media sets in general, see [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
 <span data-ttu-id="bd1c5-109">**Neste tópico:**</span><span class="sxs-lookup"><span data-stu-id="bd1c5-109">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="bd1c5-110">Visão geral dos conjuntos de mídias espelhados</span><span class="sxs-lookup"><span data-stu-id="bd1c5-110">Overview of Mirrored Media Sets</span></span>](#OverviewofMirroredMediaSets)  
  
-   [<span data-ttu-id="bd1c5-111">Requisitos de hardware para espelhos de backup</span><span class="sxs-lookup"><span data-stu-id="bd1c5-111">Hardware Requirements for Backup Mirrors</span></span>](#HardwareReqs)  
  
-   [<span data-ttu-id="bd1c5-112">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="bd1c5-112">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="overview-of-mirrored-media-sets"></a><a name="OverviewofMirroredMediaSets"></a> <span data-ttu-id="bd1c5-113">Visão geral dos conjuntos de mídias espelhados</span><span class="sxs-lookup"><span data-stu-id="bd1c5-113">Overview of Mirrored Media Sets</span></span>  
 <span data-ttu-id="bd1c5-114">Espelhamento de mídia é uma propriedade do conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-114">Media mirroring is a property of the media set.</span></span> <span data-ttu-id="bd1c5-115">Um *conjunto de mídias espelhado* consiste em várias cópias (*espelhos*) do conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-115">A *mirrored media set* consists of multiple copies (*mirrors*) of the media set.</span></span> <span data-ttu-id="bd1c5-116">Um conjunto de mídias contém uma ou mais famílias de mídia, cada uma correspondendo a um dispositivo de backup.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-116">A media set contains one or more media families, each of which corresponds to a backup device.</span></span> <span data-ttu-id="bd1c5-117">Por exemplo, se a cláusula TO de uma instrução BACKUP DATABASE listar três dispositivos, BACKUP difundirá os dados entre três famílias de mídia, um por dispositivo.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-117">For example, if the TO clause of a BACKUP DATABASE statement lists three devices, BACKUP spreads the data among three media families, one per device.</span></span> <span data-ttu-id="bd1c5-118">O número de famílias de mídia e espelhos é definido quando o conjunto de mídias é criado (por uma instrução BACKUP DATABASE que especifica WITH FORMAT).</span><span class="sxs-lookup"><span data-stu-id="bd1c5-118">The number of media families and mirrors is defined when the media set is created (by a BACKUP DATABASE statement that specifies WITH FORMAT).</span></span>  
  
 <span data-ttu-id="bd1c5-119">Um conjunto de mídias espelhado tem de dois a quatro espelhos.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-119">A mirrored media set possesses from two to four mirrors.</span></span> <span data-ttu-id="bd1c5-120">Cada espelho contém todas as famílias de mídia no conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-120">Each mirror contains all the media families in the media set.</span></span> <span data-ttu-id="bd1c5-121">Os espelhos requerem o mesmo número de dispositivos, um por família de mídia.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-121">The mirrors require the same number of devices, one per media family.</span></span> <span data-ttu-id="bd1c5-122">Cada espelho requer um dispositivo de backup separado para cada família de mídia.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-122">Each mirror requires a separate backup device for each media family.</span></span> <span data-ttu-id="bd1c5-123">Por exemplo, um conjunto de mídias espelhado que consiste em quatro famílias de mídia com três espelhos requer doze dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-123">For example, a mirrored media set that consists of four media families with three mirrors requires twelve backup devices.</span></span> <span data-ttu-id="bd1c5-124">Todos esses dispositivos devem ser equivalentes.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-124">All of these devices must be equivalent.</span></span> <span data-ttu-id="bd1c5-125">Por exemplo, unidades de fita que tenham o mesmo número de modelo do mesmo fabricante.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-125">For example, tape drives that have the same model number from the same manufacturer.</span></span>  
  
 <span data-ttu-id="bd1c5-126">A ilustração a seguir mostra um exemplo de um conjunto de mídias espelhado que consiste em duas famílias de mídia com dois espelhos.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-126">The following illustration shows an example of a mirrored media set that consists of two media families with two mirrors.</span></span> <span data-ttu-id="bd1c5-127">Cada família de mídia contém três volumes de mídia, cujo backup é feito uma vez por espelho.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-127">Each media family contains three media volumes, which are backed up one time per mirror.</span></span>  
  
 <span data-ttu-id="bd1c5-128">![Conjunto de mídias espelhado: duas famílias com dois espelhos](../../database-engine/media/bnr-backup-media-mirror.gif "Conjunto de mídias espelhado: duas famílias com dois espelhos")</span><span class="sxs-lookup"><span data-stu-id="bd1c5-128">![Mirrored media set: two families with two mirrors](../../database-engine/media/bnr-backup-media-mirror.gif "Mirrored media set: two families with two mirrors")</span></span>  
  
 <span data-ttu-id="bd1c5-129">Volumes correspondentes nos espelhos têm conteúdos idênticos.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-129">Corresponding volumes on the mirrors have identical contents.</span></span> <span data-ttu-id="bd1c5-130">Isso os torna intercambiáveis quando da restauração.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-130">This makes them interchangeable at restore time.</span></span> <span data-ttu-id="bd1c5-131">Por exemplo, na ilustração anterior, o terceiro volume de tape2 é intercambiável com o terceiro volume de tape0.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-131">For example, in the previous illustration, the third volume of tape2 is interchangeable with the third volume of tape0.</span></span>  
  
 <span data-ttu-id="bd1c5-132">O [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] garante que as mídias espelhadas tenham conteúdo idêntico sincronizando gravações nos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-132">The [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] guarantees that the mirrored media have identical contents by synchronizing writes to the devices.</span></span> <span data-ttu-id="bd1c5-133">Quando qualquer um dos espelhos encher, todos os espelhos serão transpostos ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-133">When any one of the mirrors fills, all the mirrors are spanned at one time.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bd1c5-134">Um conjunto de mídias espelhado não pode ser implicitamente desfeito (dividido) removendo-se um espelho.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-134">A mirrored media set cannot be implicitly broken (split) by removing a mirror.</span></span> <span data-ttu-id="bd1c5-135">Se qualquer fita ou disco em um espelho for danificado ou reformatado, o espelho não será mais utilizável em outros backups.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-135">If any tape or disk in a mirror is damaged or reformatted, the mirror is no longer usable for additional backups.</span></span> <span data-ttu-id="bd1c5-136">Se pelo menos um espelho cheio permanecer intacto, o conjunto de mídias poderá ser lido.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-136">If at least one full mirror remains intact, the media set can be read.</span></span> <span data-ttu-id="bd1c5-137">Se todos os espelhos perderem uma determinada família de mídia, o conjunto de mídias será inútil.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-137">If every mirror loses a given media family, the media set is useless.</span></span>  
  
 <span data-ttu-id="bd1c5-138">As operações de backup e de restauração impõem requisitos diferentes quanto à presença ou não de todos os espelhos.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-138">Backup and restore operations impose different requirements on whether all the mirrors must be present.</span></span> <span data-ttu-id="bd1c5-139">Para que uma operação de backup grave (ou seja, crie ou estenda) um conjunto de mídias espelhado, todos os espelhos devem estar presentes.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-139">For a backup operation to write (that is, to create or extend) a mirrored media set, all the mirrors must be present.</span></span> <span data-ttu-id="bd1c5-140">Em contrapartida, ao restaurar um backup de um conjunto de mídias espelhado, você poderá especificar apenas um único espelho para cada família de mídia.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-140">In contrast, when you are restoring a backup from a mirrored media set, you can specify only a single mirror for each media family.</span></span> <span data-ttu-id="bd1c5-141">Você pode executar a restauração de menos dispositivos do que famílias, mas cada família de mídia é processada somente uma vez.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-141">You can restore from fewer devices than families, but each media family is processed only one time.</span></span> <span data-ttu-id="bd1c5-142">Porém, na presença de erros, a existência de outros espelhos permite que alguns problemas de restauração sejam resolvidos rapidamente.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-142">In the presence of errors, however, having the other mirrors enables some restore problems to be resolved quickly.</span></span> <span data-ttu-id="bd1c5-143">Você pode substituir um volume de mídia danificado pelo volume correspondente de outro espelho.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-143">You can substitute a damaged media volume with the corresponding volume from another mirror.</span></span> <span data-ttu-id="bd1c5-144">Isso ocorre porque RESTORE e RESTORE VERIFYONLY oferecem suporte à substituição de mídias danificadas pelo volume das mídias de backup correspondentes de outro espelho.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-144">This is because RESTORE and RESTORE VERIFYONLY support substitution of damaged media with the corresponding backup-media volume from another mirror.</span></span>  
  
##  <a name="hardware-requirements-for-backup-mirrors"></a><a name="HardwareReqs"></a> <span data-ttu-id="bd1c5-145">Requisitos de hardware para espelhos de backup</span><span class="sxs-lookup"><span data-stu-id="bd1c5-145">Hardware Requirements for Backup Mirrors</span></span>  
 <span data-ttu-id="bd1c5-146">O espelhamento se aplica a disco e fita (discos não dão suporte a fitas de continuação).</span><span class="sxs-lookup"><span data-stu-id="bd1c5-146">Mirroring applies both to disk and tape (disks do not support continuation tapes).</span></span> <span data-ttu-id="bd1c5-147">Todos os dispositivos de backup de um único backup ou operação de restauração devem ser do mesmo tipo, disco ou fita.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-147">All backup devices for a single backup or restore operation must be of the same type, disk or tape.</span></span>  
  
 <span data-ttu-id="bd1c5-148">Dentro dessas classes mais amplas, deve-se usar dispositivos semelhantes que tenham as mesmas propriedades.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-148">Within these broader classes, you must use similar devices that have the same properties.</span></span> <span data-ttu-id="bd1c5-149">Dispositivos insuficientemente semelhantes geram uma mensagem de erro (3212).</span><span class="sxs-lookup"><span data-stu-id="bd1c5-149">Insufficiently similar devices generate an error message (3212).</span></span> <span data-ttu-id="bd1c5-150">Para evitar o risco de uma incompatibilidade de dispositivo, use dispositivos que sejam equivalentes, como somente unidades com o mesmo número de modelo do mesmo fabricante.</span><span class="sxs-lookup"><span data-stu-id="bd1c5-150">To avoid the risk of a device mismatch, use devices that are equivalent, such as, only drives with the same model number from the same manufacturer.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="bd1c5-151">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="bd1c5-151">Related Tasks</span></span>  
 <span data-ttu-id="bd1c5-152">**Para fazer backup em dispositivos de backup espelhados**</span><span class="sxs-lookup"><span data-stu-id="bd1c5-152">**To back up to mirrored backup devices**</span></span>  
  
-   [<span data-ttu-id="bd1c5-153">Fazer backup em um conjunto de mídias espelhado &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="bd1c5-153">Back Up to a Mirrored Media Set &#40;Transact-SQL&#41;</span></span>](back-up-to-a-mirrored-media-set-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="bd1c5-154">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="bd1c5-154">See Also</span></span>  
 <span data-ttu-id="bd1c5-155">[Erros de mídia possíveis durante backup e restauração &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="bd1c5-155">[Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) </span></span>  
 <span data-ttu-id="bd1c5-156">[RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd1c5-156">[RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql) </span></span>  
 <span data-ttu-id="bd1c5-157">[Dispositivos de backup &#40;SQL Server&#41;](backup-devices-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="bd1c5-157">[Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) </span></span>  
 [<span data-ttu-id="bd1c5-158">Conjuntos de mídias, famílias de mídia e conjuntos de backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="bd1c5-158">Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;</span></span>](media-sets-media-families-and-backup-sets-sql-server.md)  
  
  
