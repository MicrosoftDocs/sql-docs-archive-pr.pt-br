---
title: Backups completos de arquivos (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- full backups [SQL Server]
- backing up [SQL Server], files or filegroups
- backups [SQL Server], files or filegroups
- full recovery model [SQL Server], full file backups
- file backups [SQL Server], full
- files [SQL Server], backing up
- filegroups [SQL Server], backing up
- file backups [SQL Server]
ms.assetid: a716bf8d-0c5a-490d-aadd-597b3b0fac0c
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e2e45dc68afa4d464aa3931075a1c1b3be792e6f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87581433"
---
# <a name="full-file-backups-sql-server"></a><span data-ttu-id="b6052-102">Backups completos de arquivos (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="b6052-102">Full File Backups (SQL Server)</span></span>
  <span data-ttu-id="b6052-103">Este tópico é relevante para bancos de dados [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que contêm vários arquivos ou grupos de arquivos.</span><span class="sxs-lookup"><span data-stu-id="b6052-103">This topic is relevant for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] databases that contain multiple files or filegroups.</span></span>  
  
 <span data-ttu-id="b6052-104">Pode ser feito backup dos arquivos em um banco de dados [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e restaurá-los individualmente.</span><span class="sxs-lookup"><span data-stu-id="b6052-104">The files in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database can be backed up and restored individually.</span></span> <span data-ttu-id="b6052-105">Além disso, você pode especificar um grupo de arquivos inteiro em vez de especificar cada arquivo constituinte separadamente.</span><span class="sxs-lookup"><span data-stu-id="b6052-105">Also, you can specify a whole filegroup instead of specifying each constituent file individually.</span></span> <span data-ttu-id="b6052-106">Note que, se qualquer arquivo de um grupo de arquivos estiver offline (por exemplo, porque o arquivo está sendo restaurado), o grupo de arquivos inteiro ficará offline e não poderá ter backup.</span><span class="sxs-lookup"><span data-stu-id="b6052-106">Note that if any file in a filegroup is offline (for example, because the file is being restored), the whole filegroup is offline and cannot be backed up.</span></span>  
  
 <span data-ttu-id="b6052-107">Backups de arquivos de grupos de arquivos do tipo somente leitura podem ser combinados com backups parciais.</span><span class="sxs-lookup"><span data-stu-id="b6052-107">File backups of read-only filegroups can be combined with partial backups.</span></span> <span data-ttu-id="b6052-108">Os backups parciais incluem todos os grupos de arquivos do tipo leitura/gravação e, opcionalmente, um ou mais grupos de arquivos do tipo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="b6052-108">Partial backups include all the read/write filegroups and, optionally, one or more read-only filegroups.</span></span> <span data-ttu-id="b6052-109">Para obter mais informações, veja [Backups parciais &#40;SQL Server&#41;](partial-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b6052-109">For more information, see [Partial Backups &#40;SQL Server&#41;](partial-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="b6052-110">Um backup de arquivo pode servir como a *base diferencial* para backups de arquivos diferenciais.</span><span class="sxs-lookup"><span data-stu-id="b6052-110">A file backup can serve as the *differential base* for differential file backups.</span></span> <span data-ttu-id="b6052-111">Para obter mais informações, veja [Backups diferenciais &#40;SQL Server&#41;](differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b6052-111">For more information, see [Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b6052-112">Os backups completos de arquivos normalmente são chamados de *backups de arquivo*, exceto quando estão sendo comparados explicitamente com *backups de arquivo diferenciais*.</span><span class="sxs-lookup"><span data-stu-id="b6052-112">Full file backups are typically called *file backups*, except when they are being explicitly compared with *differential file backups*.</span></span>  
  
 <span data-ttu-id="b6052-113">**Neste tópico:**</span><span class="sxs-lookup"><span data-stu-id="b6052-113">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="b6052-114">Benefícios de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-114">Benefits of File Backups</span></span>](#Benefits)  
  
-   [<span data-ttu-id="b6052-115">Desvantagens de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-115">Disadvantages of File Backups</span></span>](#Disadvantages)  
  
-   [<span data-ttu-id="b6052-116">Visão geral de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-116">Overview of File Backups</span></span>](#Overview)  
  
-   [<span data-ttu-id="b6052-117">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="b6052-117">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="benefits-of-file-backups"></a><a name="Benefits"></a> <span data-ttu-id="b6052-118">Benefícios de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-118">Benefits of File Backups</span></span>  
 <span data-ttu-id="b6052-119">Backups de arquivo oferecem as seguintes vantagens sobre backups de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="b6052-119">File backups offer the following advantages over database backups:</span></span>  
  
-   <span data-ttu-id="b6052-120">O uso de backups de arquivos pode aumentar a velocidade de recuperação permitindo restaurar somente arquivos danificados, sem restaurar o restante do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6052-120">Using file backups can increase the speed of recovery by letting you restore only damaged files, without restoring the rest of the database.</span></span>  
  
     <span data-ttu-id="b6052-121">Por exemplo, se um banco de dados consistir em diversos arquivos situados em discos diferentes e um disco falhar, somente o arquivo no disco com falha precisará ser restaurado.</span><span class="sxs-lookup"><span data-stu-id="b6052-121">For example, if a database consists of several files that are located on different disks and one disk fails, only the file on the failed disk has to be restored.</span></span> <span data-ttu-id="b6052-122">O arquivo danificado pode ser restaurado rapidamente e a recuperação é mais rápida do que em um banco de dados inteiro.</span><span class="sxs-lookup"><span data-stu-id="b6052-122">The damaged file can be quickly restored, and recovery is faster than it would be for an entire database.</span></span>  
  
-   <span data-ttu-id="b6052-123">Backups de arquivo aumentam a flexibilidade no cronograma e tratamento de mídia em relação aos backups de banco de dados completos, os quais para os casos de bancos de dados muito grandes podem tornar-se difíceis de gerenciar.</span><span class="sxs-lookup"><span data-stu-id="b6052-123">File backups increase flexibility in scheduling and media handling over full database backups, which for very large databases can become unmanageable.</span></span> <span data-ttu-id="b6052-124">A maior flexibilidade de arquivo ou backups de grupo de arquivos também é útil para bancos de dados grandes que contêm dados com características variadas de atualização.</span><span class="sxs-lookup"><span data-stu-id="b6052-124">The increased flexibility of file or filegroup backups is also useful for large databases that contain data that has varying update characteristics.</span></span>  
  
##  <a name="disadvantages-of-file-backups"></a><a name="Disadvantages"></a> <span data-ttu-id="b6052-125">Desvantagens de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-125">Disadvantages of File Backups</span></span>  
  
-   <span data-ttu-id="b6052-126">A desvantagem básica de backups de arquivo comparada a backups de banco de dados completos está na complexidade administrativa adicional.</span><span class="sxs-lookup"><span data-stu-id="b6052-126">The primary disadvantage of file backups compared to full database backups is the additional administrative complexity.</span></span> <span data-ttu-id="b6052-127">Manter e rastrear um conjunto completo destes backups pode ser uma tarefa demorada que pode sobrecarregar as exigências de espaço de backups de banco de dados completos.</span><span class="sxs-lookup"><span data-stu-id="b6052-127">Maintaining and keeping track of a complete set of these backups can be a time-consuming task that might outweigh the space requirements of full database backups.</span></span>  
  
-   <span data-ttu-id="b6052-128">Uma falha de mídia poderá tornar um banco de dados completo irrecuperável se um arquivo danificado não tiver um backup.</span><span class="sxs-lookup"><span data-stu-id="b6052-128">A media failure can make a complete database unrecoverable if a damaged file lacks a backup.</span></span> <span data-ttu-id="b6052-129">Você deve manter um conjunto completo de backups de arquivo, e, para o modelo de recuperação completa/bulk-logged, um ou mais backups de log que abrangem o intervalo entre o primeiro backup de arquivo completo e último backup de arquivo completo.</span><span class="sxs-lookup"><span data-stu-id="b6052-129">You must therefore maintain a complete set of file backups, and, for the full/bulk-logged recovery model, one or more log backups covering minimally the interval between the first full file backup and last full file backup.</span></span>  
  
##  <a name="overview-of-file-backups"></a><a name="Overview"></a> <span data-ttu-id="b6052-130">Visão geral de backups de arquivos</span><span class="sxs-lookup"><span data-stu-id="b6052-130">Overview of File Backups</span></span>  
 <span data-ttu-id="b6052-131">Um backup completo de arquivo faz o backup de todos os dados em um ou mais arquivos ou grupos de arquivos.</span><span class="sxs-lookup"><span data-stu-id="b6052-131">A full file backup backs up all the data in one or more files or filegroups.</span></span> <span data-ttu-id="b6052-132">Por padrão, backups de arquivos contêm registros de log suficientes para efetuar roll-forward do arquivo até o final da operação de backup.</span><span class="sxs-lookup"><span data-stu-id="b6052-132">By default, file backups contain enough log records to roll forward the file to the end of the backup operation.</span></span>  
  
 <span data-ttu-id="b6052-133">Fazer backup de um arquivo ou grupo de arquivos do tipo somente leitura é o mesmo para todo modelo de recuperação.</span><span class="sxs-lookup"><span data-stu-id="b6052-133">Backing up a read-only file or filegroup is the same for every recovery model.</span></span> <span data-ttu-id="b6052-134">No o modelo de recuperação completa, um conjunto inteiro de backups de arquivo completos junto com backups de log suficientes para abranger todos os backups de arquivos, é equivalente ao backup de banco de dados completo.</span><span class="sxs-lookup"><span data-stu-id="b6052-134">Under the full recovery model, a complete set of full file backups, together with enough log backups to span all the file backups, is the equivalent of a full database backup.</span></span>  
  
 <span data-ttu-id="b6052-135">Somente uma operação de backup de arquivo pode ocorrer de cada vez.</span><span class="sxs-lookup"><span data-stu-id="b6052-135">Only one file backup operation can occur at a time.</span></span> <span data-ttu-id="b6052-136">Você pode fazer backup de vários arquivos em uma operação, mas isto pode aumentar o tempo de recuperação se você precisar restaurar somente um único arquivo.</span><span class="sxs-lookup"><span data-stu-id="b6052-136">You can back up multiple files in one operation, but this might extend the recovery time if you only have to restore a single file.</span></span> <span data-ttu-id="b6052-137">Isto ocorre porque para localizar esse arquivo, o backup inteiro é lido.</span><span class="sxs-lookup"><span data-stu-id="b6052-137">This is because to locate that file, the whole backup is read.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b6052-138">Arquivos individuais de um backup de banco de dados podem ser restaurados; porém, localizar e restaurar um arquivo leva mais tempo a partir de um backup de banco de dados do que a partir de um backup de arquivo.</span><span class="sxs-lookup"><span data-stu-id="b6052-138">Individual files can be restored from a database backup; however, locating and restoring a file takes longer from a database backup than from a file backup.</span></span>  
  
### <a name="file-backups-and-the-simple-recovery-model"></a><span data-ttu-id="b6052-139">Backups de arquivos e o modelo de recuperação simples</span><span class="sxs-lookup"><span data-stu-id="b6052-139">File Backups and the Simple Recovery Model</span></span>  
 <span data-ttu-id="b6052-140">No modelo de recuperação simples, o backup deve ser feito em todos os arquivos de leitura/gravação juntos.</span><span class="sxs-lookup"><span data-stu-id="b6052-140">Under the simple recovery model, read/write files must all be backed up together.</span></span> <span data-ttu-id="b6052-141">Isso assegura que o banco de dados possa ser restaurado até um point-in-time consistente.</span><span class="sxs-lookup"><span data-stu-id="b6052-141">This makes sure that the database can be restored to a consistent point in time.</span></span> <span data-ttu-id="b6052-142">Em vez de especificar cada arquivo ou grupo de arquivos de leitura/gravação individualmente, use a opção de READ_WRITE_FILEGROUPS.</span><span class="sxs-lookup"><span data-stu-id="b6052-142">Instead of individually specifying each read/write file or filegroup, use the READ_WRITE_FILEGROUPS option.</span></span> <span data-ttu-id="b6052-143">Esta opção efetua backup de todos os grupos de arquivos de leitura/gravação no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6052-143">This option backs up all the read/write filegroups in the database.</span></span> <span data-ttu-id="b6052-144">Um backup que é criado especificando READ_WRITE_FILEGROUPS é conhecido como um backup parcial.</span><span class="sxs-lookup"><span data-stu-id="b6052-144">A backup that is created by specifying READ_WRITE_FILEGROUPS is known as a partial backup.</span></span> <span data-ttu-id="b6052-145">Para obter mais informações, veja [Backups parciais &#40;SQL Server&#41;](partial-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b6052-145">For more information, see [Partial Backups &#40;SQL Server&#41;](partial-backups-sql-server.md).</span></span>  
  
### <a name="file-backups-and-the-full-recovery-model"></a><span data-ttu-id="b6052-146">Backups de arquivos e o modelo de recuperação completa</span><span class="sxs-lookup"><span data-stu-id="b6052-146">File Backups and the Full Recovery Model</span></span>  
 <span data-ttu-id="b6052-147">No modelo de recuperação completa, você deve fazer backup de log de transações, independente do restante de sua estratégia de backup.</span><span class="sxs-lookup"><span data-stu-id="b6052-147">Under the full recovery model, you must back up the transaction log, regardless of the rest of your backup strategy.</span></span> <span data-ttu-id="b6052-148">Um conjunto inteiro de backups completos de arquivos junto com backups de log suficientes para abranger todos os backups de arquivos desde o início do primeiro backup de arquivos, é equivalente a um backup de banco de dados completo.</span><span class="sxs-lookup"><span data-stu-id="b6052-148">A complete set of full file backups, together with enough log backups to span all the file backups from the start of the first file backup, is the equivalent of a full database backup.</span></span>  
  
 <span data-ttu-id="b6052-149">A restauração de um banco de dados com o uso de apenas um arquivo e backups de log pode ser complexa.</span><span class="sxs-lookup"><span data-stu-id="b6052-149">Restoring a database using just file and log backups can be complex.</span></span> <span data-ttu-id="b6052-150">Por isso, se for possível, é uma prática recomendada executar um backup de banco de dados completo e iniciar os backups de log antes do primeiro backup de arquivo.</span><span class="sxs-lookup"><span data-stu-id="b6052-150">Therefore, if it is possible, it is a best practice to perform a full database backup and start the log backups before the first file backup.</span></span> <span data-ttu-id="b6052-151">A ilustração a seguir mostra uma estratégia na qual um backup de banco de dados completo é feito (em t1) logo após o banco de dados ser criado (em t0).</span><span class="sxs-lookup"><span data-stu-id="b6052-151">The following illustration shows a strategy in which a full database backup is taken (at time t1) soon after the database is created (at time t0).</span></span> <span data-ttu-id="b6052-152">Este primeiro backup de banco de dados permite backups de log de transações no início.</span><span class="sxs-lookup"><span data-stu-id="b6052-152">This first database backup enables transaction log backups to start.</span></span> <span data-ttu-id="b6052-153">Os backups de log de transações são programados para ocorrer em intervalos definidos.</span><span class="sxs-lookup"><span data-stu-id="b6052-153">Transaction log backups are scheduled to occur at set intervals.</span></span> <span data-ttu-id="b6052-154">Os backups de arquivos ocorrem no intervalo que melhor corresponder às necessidades empresariais do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6052-154">File backups occur at whatever interval best meets the business requirements for the database.</span></span> <span data-ttu-id="b6052-155">Esta ilustração exibe cada um dos quatro grupos de arquivos com backup feito um de cada vez.</span><span class="sxs-lookup"><span data-stu-id="b6052-155">This illustration shows each of the four filegroups being backed up one at a time.</span></span> <span data-ttu-id="b6052-156">A ordem na qual é feito backup (A, C, B, A) reflete as necessidades empresariais do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6052-156">The order in which they are backed up (A, C, B, A) reflects the business requirements of the database.</span></span>  
  
 <span data-ttu-id="b6052-157">![Estratégia que combina backups de banco de dados, de arquivo e de log](../../database-engine/media/bnr-rmfull-3-fulldb-filegrps-log-backups.gif "Estratégia que combina backups de banco de dados, de arquivo e de log")</span><span class="sxs-lookup"><span data-stu-id="b6052-157">![Strategy combining database, file, and log backups](../../database-engine/media/bnr-rmfull-3-fulldb-filegrps-log-backups.gif "Strategy combining database, file, and log backups")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b6052-158">No modelo de recuperação completa, você deve efetuar roll-forward do log de transações ao restaurar um backup de arquivo de leitura/gravação para verificar se o arquivo está consistente com o restante do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6052-158">Under the full recovery model, you must roll forward the transaction log when restoring a read/write file backup to make sure that the file is consistent with the rest of the database.</span></span> <span data-ttu-id="b6052-159">Para evitar que o roll forward seja efetuado em muitos backups de log de transações, considere o uso de backups de arquivo diferenciais.</span><span class="sxs-lookup"><span data-stu-id="b6052-159">To avoid rolling forward a lot of transaction log backups, consider using differential file backups.</span></span> <span data-ttu-id="b6052-160">Para obter mais informações, veja [Backups diferenciais &#40;SQL Server&#41;](differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b6052-160">For more information, see [Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="b6052-161">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="b6052-161">Related Tasks</span></span>  
 <span data-ttu-id="b6052-162">**Para criar backup de um arquivo ou de um grupo de arquivos**</span><span class="sxs-lookup"><span data-stu-id="b6052-162">**To create a file or filegroup backup**</span></span>  
  
-   [<span data-ttu-id="b6052-163">Fazer backup de arquivos e de grupos de arquivos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b6052-163">Back Up Files and Filegroups &#40;SQL Server&#41;</span></span>](back-up-files-and-filegroups-sql-server.md)  
  
-   <span data-ttu-id="b6052-164"><xref:Microsoft.SqlServer.Management.Smo.Backup.SqlBackup%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="b6052-164"><xref:Microsoft.SqlServer.Management.Smo.Backup.SqlBackup%2A> (SMO)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b6052-165">Backups de arquivo não são suportados pelo Assistente de plano de manutenção.</span><span class="sxs-lookup"><span data-stu-id="b6052-165">File backups are not supported by the Maintenance Plan Wizard.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b6052-166">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="b6052-166">See Also</span></span>  
 <span data-ttu-id="b6052-167">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="b6052-167">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="b6052-168">[Visão geral do backup &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-168">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="b6052-169">[Backup e Restauração: Interoperabilidade e Coexistência &#40;SQL Server&#41;](backup-and-restore-interoperability-and-coexistence-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-169">[Backup and Restore: Interoperability and Coexistence &#40;SQL Server&#41;](backup-and-restore-interoperability-and-coexistence-sql-server.md) </span></span>  
 <span data-ttu-id="b6052-170">[Backups diferenciais &#40;SQL Server&#41;](differential-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-170">[Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md) </span></span>  
 <span data-ttu-id="b6052-171">[Restaurações de arquivos &#40;Modelo de recuperação simples&#41;](file-restores-simple-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-171">[File Restores &#40;Simple Recovery Model&#41;](file-restores-simple-recovery-model.md) </span></span>  
 <span data-ttu-id="b6052-172">[Restaurações de arquivo &#40;Modelo de recuperação completa&#41;](file-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-172">[File Restores &#40;Full Recovery Model&#41;](file-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="b6052-173">[Restauração online &#40;SQL Server&#41;](online-restore-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b6052-173">[Online Restore &#40;SQL Server&#41;](online-restore-sql-server.md) </span></span>  
 [<span data-ttu-id="b6052-174">Restaurações por etapas &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b6052-174">Piecemeal Restores &#40;SQL Server&#41;</span></span>](piecemeal-restores-sql-server.md)  
  
  
