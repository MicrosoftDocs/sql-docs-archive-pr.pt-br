---
title: Conjuntos de mídias, famílias de mídia e conjuntos de backup (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- media sets [SQL Server], about media sets
- backup media [SQL Server], about backup media
- backups [SQL Server], media sets
- media sets [SQL Server]
- media headers [SQL Server]
- backup sets [SQL Server], about backup sets
- backup media [SQL Server], media sets
- backups [SQL Server], media families
- backup media [SQL Server], media families
- media families [SQL Server]
- backups [SQL Server], backup sets
- backup sets [SQL Server]
ms.assetid: 2b8f19a2-ee9d-4120-b194-fbcd2076a489
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 853451ea5a7c43cd073fdf75703b3c4651b442d0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87581431"
---
# <a name="media-sets-media-families-and-backup-sets-sql-server"></a><span data-ttu-id="39f2f-102">Conjuntos de mídias, famílias de mídia e conjuntos de backup (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="39f2f-102">Media Sets, Media Families, and Backup Sets (SQL Server)</span></span>
  <span data-ttu-id="39f2f-103">Este tópico apresenta a terminologia básica de mídia de backup da restauração e do backup do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , e destina-se a leitores que não têm experiência com o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="39f2f-103">This topic introduces the basic backup-media terminology of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore and is intended for readers who are new to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="39f2f-104">Este tópico descreve o formato que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usa na mídia de backup, a correspondência entre mídia de backup e dispositivos de backup, a organização dos backups na mídia de backup, e as várias considerações sobre conjuntos de mídias e famílias de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-104">This topic describes the format that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses for backup media, the correspondence between backup media and backup devices, the organization of backups on backup media, and several considerations for media sets and media families.</span></span> <span data-ttu-id="39f2f-105">O tópico também descreve as etapas de inicialização ou formatação de mídia de backup antes que você use isso pela primeira vez ou substitua um conjunto de mídias antigo por um novo conjunto de mídias, como substituir conjuntos de backup antigos em um conjunto de mídias, e como acrescentar novos conjuntos de backup a um conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-105">The topic also describes the steps initializing or formatting backup media before you use it for the first time or replace an old media set with a new media set, how to overwrite old backup sets in a media set, and how to append new backup sets to a media set.</span></span>

> [!NOTE]
>  <span data-ttu-id="39f2f-106">Para obter mais informações sobre SQL Server Backup para o serviço de armazenamento de BLOBs do Azure, consulte [SQL Server Backup e restauração com o serviço de armazenamento de BLOBs do Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-106">For more information on SQL Server backup to the Azure Blob storage service,, see, [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span></span>


##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="39f2f-107">Termos e definições</span><span class="sxs-lookup"><span data-stu-id="39f2f-107">Terms and Definitions</span></span>
 <span data-ttu-id="39f2f-108">conjunto de mídias Uma coleção ordenada de mídias de backup, fitas ou arquivos de disco, em que uma ou mais operações de backup foram gravadas, usando um número e um tipo fixo de dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-108">media set An ordered collection of backup media, tapes or disk files, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span>

 <span data-ttu-id="39f2f-109">família de mídia Os backups criados em um único dispositivo não espelhado ou um conjunto de dispositivos espelhados em um conjunto de mídias</span><span class="sxs-lookup"><span data-stu-id="39f2f-109">media family Backups created on a single nonmirrored device or a set of mirrored devices in a media set</span></span>

 <span data-ttu-id="39f2f-110">conjunto de backup O conteúdo de backup adicionado a um conjunto de mídias por uma operação de backup bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="39f2f-110">backup set The backup content that is added to a media set by a successful backup operation.</span></span>


##  <a name="overview-of-media-sets-media-families-and-backup-sets"></a><a name="OvMediaSetsFamiliesBackupSets"></a><span data-ttu-id="39f2f-111">Visão geral de conjuntos de mídias, famílias de mídia e conjuntos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-111">Overview of Media Sets, Media Families, and Backup Sets</span></span>
 <span data-ttu-id="39f2f-112">Os backups em um conjunto de uma ou mais mídias de backup compõem um único conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-112">The backups on a set of one or more backup media compose a single media set.</span></span> <span data-ttu-id="39f2f-113">Um *conjunto de mídias* é uma coleção ordenada de *mídia de backup*, fitas ou arquivos de disco, ou Blobs do Azure, em que uma ou mais operações de backup foram gravadas usando um tipo fixo e número de dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-113">A *media set* is an ordered collection of *backup media*, tapes or disk files, or Azure Blobs, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span> <span data-ttu-id="39f2f-114">Um conjunto de mídias específica usa unidades de fita, ou unidades de disco ou blobs do Azure, mas não uma combinação dos dois ou mais.</span><span class="sxs-lookup"><span data-stu-id="39f2f-114">A given media set uses tape drives, or disk drives or Azure blobs, but not a combination of two or more.</span></span> <span data-ttu-id="39f2f-115">Por exemplo, os dispositivos de backup associados ao conjunto de mídias podem ser três unidades de fita chamadas `\\.\TAPE0`, `\\.\TAPE1`e `\\.\TAPE2`.</span><span class="sxs-lookup"><span data-stu-id="39f2f-115">For example, the backup devices associated with a media set might be three tape drives named `\\.\TAPE0`, `\\.\TAPE1`, and `\\.\TAPE2`.</span></span> <span data-ttu-id="39f2f-116">Aquele conjunto de mídias contém apenas fitas, começando com um mínimo de três fitas (uma por unidade).</span><span class="sxs-lookup"><span data-stu-id="39f2f-116">That media set contains only tapes, starting with a minimum of three tapes (one per drive).</span></span> <span data-ttu-id="39f2f-117">O tipo e o número de dispositivos de backup são estabelecidos quando um conjunto de mídias é criado, e não podem ser alterados.</span><span class="sxs-lookup"><span data-stu-id="39f2f-117">The type and number of backup devices are established when a media set is created, and they cannot be changed.</span></span> <span data-ttu-id="39f2f-118">No entanto, entre as operações de backup e de restauração, um determinado dispositivo pode ser substituído por outro dispositivo do mesmo tipo, se necessário.</span><span class="sxs-lookup"><span data-stu-id="39f2f-118">However, if necessary, between backup and restore operations a given device can be replaced with a device of the same type.</span></span>

 <span data-ttu-id="39f2f-119">Um conjunto de mídias é criado na mídia de backup durante uma operação de backup ao formatar a mídia de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-119">A media set is created on the backup media during a backup operation by formatting the backup media.</span></span> <span data-ttu-id="39f2f-120">Para obter mais informações, consulte [Criando um novo conjunto de mídias](#CreatingMediaSet), posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="39f2f-120">For more information, see [Creating a New Media Set](#CreatingMediaSet), later in this topic.</span></span> <span data-ttu-id="39f2f-121">Após a formatação, cada arquivo ou fita conterá um cabeçalho de mídia para o conjunto de mídias e estará pronto para receber conteúdo de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-121">After formatting, each file or tape contains a media header for the media set and is ready to receive backup content.</span></span> <span data-ttu-id="39f2f-122">Com o cabeçalho no lugar, a operação de backup continua a fazer backup dos dados especificados na mídia de backup em todos os dispositivos de backup especificados para a operação.</span><span class="sxs-lookup"><span data-stu-id="39f2f-122">With the header in place, the backup operation proceeds to back up the specified data to the backup media on all of the backup devices specified for the operation.</span></span>

> [!NOTE]
>  <span data-ttu-id="39f2f-123">Os conjuntos de mídias podem ser espelhados para proteger contra um volume de mídia danificado (uma fita ou arquivo de disco).</span><span class="sxs-lookup"><span data-stu-id="39f2f-123">Media sets can be mirrored to protect against a damaged media volume (a tape or disk file).</span></span> <span data-ttu-id="39f2f-124">Para obter mais informações, veja [Conjuntos de mídias de backup espelhadas &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-124">For more information, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="39f2f-125">ou posterior podem ler backups compactados.</span><span class="sxs-lookup"><span data-stu-id="39f2f-125">or later can read compressed backups.</span></span> <span data-ttu-id="39f2f-126">Para obter mais informações, veja [Compactação de backup &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-126">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


### <a name="media-families"></a><span data-ttu-id="39f2f-127">Famílias de mídia</span><span class="sxs-lookup"><span data-stu-id="39f2f-127">Media Families</span></span>
 <span data-ttu-id="39f2f-128">Os backups criados em um único dispositivo não espelhado ou um conjunto de dispositivos espelhados em um conjunto de mídias constituem uma *família de mídia*.</span><span class="sxs-lookup"><span data-stu-id="39f2f-128">Backups created on a single nonmirrored device or a set of mirrored devices in a media set constitute a *media family*.</span></span> <span data-ttu-id="39f2f-129">O número de dispositivos de backup usados no conjunto de mídias determina o número de famílias de mídia em um conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-129">The number of backup devices used for the media set determines the number of media families in a media set.</span></span> <span data-ttu-id="39f2f-130">Por exemplo, se um conjunto de mídias usa dois dispositivos de backup não espelhados, o conjunto de mídias conterá duas famílias de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-130">For example, if a media set uses two nonmirrored backup devices, the media set contains two media families.</span></span>

> [!NOTE]
>  <span data-ttu-id="39f2f-131">Em um conjunto de mídias espelhado, cada família de mídia é espelhada.</span><span class="sxs-lookup"><span data-stu-id="39f2f-131">In a mirrored media set, each media family is mirrored.</span></span> <span data-ttu-id="39f2f-132">Por exemplo, se seis dispositivos de backup são usados para formatar um conjunto de mídias, no qual dois espelhos são usados, existirão três famílias de mídia, cada uma contendo duas cópias equivalentes de dados de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-132">For example, if six backup devices are used to format a media set, where two mirrors are used, there are three media families, each containing two equivalent copies of backup data.</span></span> <span data-ttu-id="39f2f-133">Para obter mais informações sobre conjuntos de mídia espelhadas, consulte [Conjuntos de mídias de backup espelhadas &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-133">For more information about mirrored media sets, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 <span data-ttu-id="39f2f-134">A cada fita ou disco em uma família de mídia é atribuído um *número de sequência de mídia*.</span><span class="sxs-lookup"><span data-stu-id="39f2f-134">Each tape or disk in a media family is assigned a *media sequence number*.</span></span> <span data-ttu-id="39f2f-135">O número de sequência de mídia de um disco é sempre 1.</span><span class="sxs-lookup"><span data-stu-id="39f2f-135">The media sequence number of a disk is always 1.</span></span> <span data-ttu-id="39f2f-136">Em uma família de mídia de fita, o número de sequência da fita inicial é 1, da segunda fita é 2 e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="39f2f-136">In a tape media family, the sequence number of the initial tape is 1, the sequence number of the second tape is 2, and so forth.</span></span> <span data-ttu-id="39f2f-137">Para obter mais informações, consulte [Usando conjuntos de mídias e famílias de mídia](#ConsiderationsForMediaSetFamilies).</span><span class="sxs-lookup"><span data-stu-id="39f2f-137">For more information, see [Using Media Sets and Families](#ConsiderationsForMediaSetFamilies).</span></span>

#### <a name="the-media-header"></a><span data-ttu-id="39f2f-138">O cabeçalho de mídia</span><span class="sxs-lookup"><span data-stu-id="39f2f-138">The Media Header</span></span>
 <span data-ttu-id="39f2f-139">Todo volume de mídia de backup (arquivo de disco ou fita) contém um cabeçalho de mídia criado pela primeira operação de backup que utiliza a fita (ou disco).</span><span class="sxs-lookup"><span data-stu-id="39f2f-139">Every volume of backup media (disk file or tape) contains a media header that is created when by the first backup operation that uses the tape (or disk).</span></span> <span data-ttu-id="39f2f-140">Esse cabeçalho permanece intacto até que a mídia seja reformatada.</span><span class="sxs-lookup"><span data-stu-id="39f2f-140">That header remains intact until the media is reformatted.</span></span>

 <span data-ttu-id="39f2f-141">O cabeçalho de mídia contém todas as informações exigidas para identificar a mídia (arquivo de disco ou fita) e está localizado dentro da família de mídia a qual pertence.</span><span class="sxs-lookup"><span data-stu-id="39f2f-141">The media header contains all of the information required to identify the media (disk file or tape) and its place within the media family to which it belongs.</span></span> <span data-ttu-id="39f2f-142">Essas informações incluem:</span><span class="sxs-lookup"><span data-stu-id="39f2f-142">This information includes:</span></span>

-   <span data-ttu-id="39f2f-143">O nome da mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-143">The name of the media.</span></span>

     <span data-ttu-id="39f2f-144">O nome de mídia é opcional, mas recomendamos consistentemente o uso de nomes de mídia que claramente identificam sua mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-144">The media name is optionally, but we recommend consistently using media names that clearly identify your media.</span></span> <span data-ttu-id="39f2f-145">Um nome de mídia é atribuído por quem formata a mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-145">A media name is assigned by whoever formats the media.</span></span>

-   <span data-ttu-id="39f2f-146">O número de identificação exclusivo do conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-146">The unique identification number of the media set.</span></span>

-   <span data-ttu-id="39f2f-147">O número de famílias de mídia no conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-147">The number of media families in the media set.</span></span>

-   <span data-ttu-id="39f2f-148">O número de sequência da família de mídia que contém essa mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-148">The sequence number of the media family containing this media.</span></span>

-   <span data-ttu-id="39f2f-149">O número de identificação exclusivo da família de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-149">The unique identification number for the media family.</span></span>

-   <span data-ttu-id="39f2f-150">O número de sequência dessa mídia na família de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-150">The sequence number of this media in the media family.</span></span> <span data-ttu-id="39f2f-151">Para um arquivo de disco, este valor é sempre 1.</span><span class="sxs-lookup"><span data-stu-id="39f2f-151">For a disk file, this value is always 1.</span></span>

-   <span data-ttu-id="39f2f-152">A descrição de mídia contém um rótulo de mídia MTF ou uma descrição de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-152">Whether the media description contains an MTF media label or a media description.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="39f2f-153">Toda a mídia usada para uma operação de backup ou restauração usa um formato de backup padrão chamado [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] preserva qualquer rótulo de mídia MTF gravado por outro aplicativo, mas não grava rótulos de mídia de MTF.</span><span class="sxs-lookup"><span data-stu-id="39f2f-153">All media that is used for a backup or restore operation use a standard backup format called [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] preserves any MTF media label written by another application but does not write MTF media labels.</span></span>

-   <span data-ttu-id="39f2f-154">O rótulo de mídia de formato de fita [!INCLUDE[msCoName](../../../includes/msconame-md.md)] ou a descrição de mídia (em texto de formato livre).</span><span class="sxs-lookup"><span data-stu-id="39f2f-154">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Tape Format media label or the media description (in free-form text).</span></span>

-   <span data-ttu-id="39f2f-155">O nome do software de backup que gravou o rótulo.</span><span class="sxs-lookup"><span data-stu-id="39f2f-155">The name of the backup software that wrote the label.</span></span>

-   <span data-ttu-id="39f2f-156">O número de identificação do fornecedor exclusivo do fornecedor de software que formatou a mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-156">The unique vendor identification number of the software vendor that formatted the media.</span></span>

-   <span data-ttu-id="39f2f-157">A data e a hora que o rótulo foi gravado.</span><span class="sxs-lookup"><span data-stu-id="39f2f-157">The date and time the label was written.</span></span>

-   <span data-ttu-id="39f2f-158">O número de espelhos do conjunto (1-4); 1 indica um dispositivo não espelhado.</span><span class="sxs-lookup"><span data-stu-id="39f2f-158">The number of mirrors in the set (1-4); 1 indicates an unmirrored device.</span></span>

 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="39f2f-159">pode processar mídia formatadas por versões anteriores do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="39f2f-159">can process media formatted by earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>

### <a name="backup-sets"></a><span data-ttu-id="39f2f-160">Conjuntos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-160">Backup Sets</span></span>
 <span data-ttu-id="39f2f-161">Uma operação de backup bem-sucedida adiciona um único *conjunto de backup* ao conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-161">A successful backup operation adds a single *backup set* to the media set.</span></span> <span data-ttu-id="39f2f-162">O conjunto de backup é descrito nos termos do conjunto de mídias ao qual o backup pertence.</span><span class="sxs-lookup"><span data-stu-id="39f2f-162">The backup set is described in terms of the media set to which the backup belongs.</span></span> <span data-ttu-id="39f2f-163">Se a mídia de backup consistir de apenas uma família de mídia, a família conterá o conjunto de backup completo.</span><span class="sxs-lookup"><span data-stu-id="39f2f-163">If the backup media consists of only one media family, that family contains the entire backup set.</span></span> <span data-ttu-id="39f2f-164">Se a mídia de backup consistir de várias famílias de mídia, o conjunto de backup será distribuído entre elas.</span><span class="sxs-lookup"><span data-stu-id="39f2f-164">If the backup media consists of multiple media families, the backup set is distributed among them.</span></span> <span data-ttu-id="39f2f-165">Em cada mídia, o conjunto de backup contém um cabeçalho que descreve o conjunto de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-165">On each medium, the backup set contains a header that describes the backup set.</span></span>

 <span data-ttu-id="39f2f-166">O exemplo a seguir mostra uma instrução [!INCLUDE[tsql](../../includes/tsql-md.md)] que cria um conjunto de mídias chamado de `MyAdvWorks_MediaSet_1` para o banco de dados [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] usando três unidades de fita como dispositivos de backup:</span><span class="sxs-lookup"><span data-stu-id="39f2f-166">The following example shows a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement that creates a media set called `MyAdvWorks_MediaSet_1` for the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database using three tape drives as backup devices:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   FORMAT,
   MEDIANAME = 'MyAdvWorks_MediaSet_1'
```

 <span data-ttu-id="39f2f-167">Se tiver êxito, essa operação de backup resultará em um novo conjunto de mídias contendo um novo cabeçalho de mídia e um conjunto de backup disseminado por três fitas.</span><span class="sxs-lookup"><span data-stu-id="39f2f-167">If successful, this backup operation results in a new media set containing a new media header and one backup set spread across three tapes.</span></span> <span data-ttu-id="39f2f-168">A figura a seguir ilustra esses resultados:</span><span class="sxs-lookup"><span data-stu-id="39f2f-168">The following figure illustrates these results:</span></span>

 <span data-ttu-id="39f2f-169">![Cabeçalho de mídia e primeiro conjunto de backups em três fitas](../../database-engine/media/bnr-mediaset-new.gif "Cabeçalho de mídia e primeiro conjunto de backups em três fitas")</span><span class="sxs-lookup"><span data-stu-id="39f2f-169">![Media header and first backup set on 3 tapes](../../database-engine/media/bnr-mediaset-new.gif "Media header and first backup set on 3 tapes")</span></span>

 <span data-ttu-id="39f2f-170">Normalmente, depois que um conjunto de mídias é criado, as operações de backup subsequentes, uma após a outra, anexam seus conjuntos de backup ao conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-170">Typically, after a media set is created, subsequent backup operations, one after another, append their backup sets to the media set.</span></span> <span data-ttu-id="39f2f-171">Todas as mídias usadas pelo conjunto de backup compõem o conjunto de mídias, independentemente do número de mídias ou de dispositivos de backup envolvidos.</span><span class="sxs-lookup"><span data-stu-id="39f2f-171">All of the media used by a backup set make up the media set, regardless of the number of media or backup devices involved.</span></span> <span data-ttu-id="39f2f-172">Os conjuntos de backup são numerados sequencialmente de acordo com sua posição no conjunto de mídias, permitindo que você especifique qual conjunto de backup será restaurado.</span><span class="sxs-lookup"><span data-stu-id="39f2f-172">Backup sets are sequentially numbered by their position in the media set, allowing you to specify which backup set to restore.</span></span>

 <span data-ttu-id="39f2f-173">Toda operação de backup para um conjunto de mídias deve gravar no mesmo número e tipo de dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-173">Every backup operation to a media set must write to the same number and type of backup devices.</span></span> <span data-ttu-id="39f2f-174">Com vários dispositivos, assim como com o primeiro dispositivo de backup, o conteúdo de todo backup subsequente é distribuído entre a mídia de backup em todos os dispositivos.</span><span class="sxs-lookup"><span data-stu-id="39f2f-174">With multiple devices, as with the first backup set, the content of every subsequent backup set is distributed among the backup media on all of the devices.</span></span> <span data-ttu-id="39f2f-175">Para continuar o exemplo acima, uma segunda operação de backup (um backup diferencial) acrescenta informações ao mesmo conjunto de mídias:</span><span class="sxs-lookup"><span data-stu-id="39f2f-175">To continue the above example, a second backup operation (a differential backup) appends information to the same media set:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   NOINIT,
   MEDIANAME = 'AdventureWorksMediaSet1',
   DIFFERENTIAL
```

> [!NOTE]
>  <span data-ttu-id="39f2f-176">A opção NOINIT é o padrão, mas é incluída a título de esclarecimento.</span><span class="sxs-lookup"><span data-stu-id="39f2f-176">The NOINIT option is the default, but is included for clarity.</span></span>

 <span data-ttu-id="39f2f-177">Se a segunda operação de backup for bem-sucedida, ela gravará um segundo conjunto de backup no conjunto de mídias, com a distribuição de conteúdo de backup a seguir:</span><span class="sxs-lookup"><span data-stu-id="39f2f-177">If the second backup operation succeeds, it writes a second backup set to the media set, with the following distribution of backup content:</span></span>

 <span data-ttu-id="39f2f-178">![Segundo conjunto de backups espalhado em três fitas de conjunto de mídias](../../database-engine/media/bnr-mediaset-appendedto.gif "Segundo conjunto de backups espalhado em três fitas de conjunto de mídias")</span><span class="sxs-lookup"><span data-stu-id="39f2f-178">![Second backup set spread across 3 media-set tapes](../../database-engine/media/bnr-mediaset-appendedto.gif "Second backup set spread across 3 media-set tapes")</span></span>

 <span data-ttu-id="39f2f-179">Ao restaurar backups, você pode usar a opção FILE para especificar quais backups deseja usar.</span><span class="sxs-lookup"><span data-stu-id="39f2f-179">When you are restoring backups, you can use you the FILE option to specify which backups you want to use.</span></span> <span data-ttu-id="39f2f-180">O exemplo a seguir mostra o uso de cláusulas FILE **=** _backup_set_file_number_ ao restaurar um backup de banco de dados completo do banco de dados [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] seguido de um backup de banco de dados diferencial no mesmo conjunto de mídias.</span><span class="sxs-lookup"><span data-stu-id="39f2f-180">The following example shows the use of FILE **=**_backup_set_file_number_ clauses when restoring a full database backup of the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database followed by a differential database backup on the same media set.</span></span> <span data-ttu-id="39f2f-181">O conjunto de mídias usa três fitas de backup, que estão nas unidades de fita `\\.\tape0`, `tape1`e `tape2`.</span><span class="sxs-lookup"><span data-stu-id="39f2f-181">The media set uses three backup tapes, which are on tape drives `\\.\tape0`, `tape1`, and `tape2`.</span></span>

```
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=1, 
   NORECOVERY;
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2' 
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=2, 
   RECOVERY;
GO
```

 <span data-ttu-id="39f2f-182">Para obter informações sobre tabelas de histórico que armazenam informações sobre conjuntos de mídias e suas famílias de mídia e conjuntos de backup, consulte [Informações de histórico e cabeçalho de backup &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-182">For information about the history tables that store information about media sets and their media families and backup sets, see [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span></span>

 <span data-ttu-id="39f2f-183">O número de mídia de backup em um conjunto de mídias depende de vários fatores:</span><span class="sxs-lookup"><span data-stu-id="39f2f-183">The number of backup media in a media set depends on several factors:</span></span>

-   <span data-ttu-id="39f2f-184">Número de dispositivos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-184">Number of backup devices</span></span>

-   <span data-ttu-id="39f2f-185">Tipo de dispositivos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-185">Type of backup devices</span></span>

-   <span data-ttu-id="39f2f-186">Número de conjuntos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-186">Number of backup sets</span></span>

##  <a name="using-media-sets-and-families"></a><a name="ConsiderationsForMediaSetFamilies"></a><span data-ttu-id="39f2f-187">Usando conjuntos de mídias e famílias</span><span class="sxs-lookup"><span data-stu-id="39f2f-187">Using Media Sets and Families</span></span>
 <span data-ttu-id="39f2f-188">Esta seção aborda várias considerações para o uso de conjuntos de mídias e famílias de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-188">This section discusses several considerations for using media sets and media families.</span></span>



###  <a name="creating-a-new-media-set"></a><a name="CreatingMediaSet"></a><span data-ttu-id="39f2f-189">Criando um novo conjunto de mídias</span><span class="sxs-lookup"><span data-stu-id="39f2f-189">Creating a New Media Set</span></span>
 <span data-ttu-id="39f2f-190">Para criar um novo conjunto de mídias, é necessário formatar a mídia de backup (uma ou mais fitas ou arquivos de disco).</span><span class="sxs-lookup"><span data-stu-id="39f2f-190">To create a new media set, you must format the backup media (one or more tapes or disk files).</span></span> <span data-ttu-id="39f2f-191">O processo de formatação altera as mídias de backup da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="39f2f-191">The formatting process changes the backup media as follows:</span></span>

1.  <span data-ttu-id="39f2f-192">Exclui o cabeçalho antigo (se houver), excluindo efetivamente o conteúdo anterior da mídia de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-192">Deletes the old header (if any), effectively deleting the previous contents of the backup media.</span></span>

     <span data-ttu-id="39f2f-193">A formatação de um dispositivo de fita exclui todo o conteúdo anterior da fita atualmente montada.</span><span class="sxs-lookup"><span data-stu-id="39f2f-193">Formatting a tape device deletes all previous contents of the currently mounted tape.</span></span> <span data-ttu-id="39f2f-194">A formatação de um disco afeta somente o arquivo especificado para a operação de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-194">Formatting a disk affects only the file that you specify for the backup operation</span></span>

2.  <span data-ttu-id="39f2f-195">Grava um novo cabeçalho de mídia na mídia de backup (fita ou arquivo de disco) em cada um dos dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-195">Writes a new media header on the backup media (tape or disk file) on each of the backup devices.</span></span>


###  <a name="backing-up-to-an-existing-media-set"></a><a name="UseExistingMediaSet"></a><span data-ttu-id="39f2f-196">Fazendo backup em um conjunto de mídias existente</span><span class="sxs-lookup"><span data-stu-id="39f2f-196">Backing Up to an Existing Media Set</span></span>
 <span data-ttu-id="39f2f-197">Quando você estiver fazendo backup em um conjunto de mídias existente, estas serão as duas opções disponíveis:</span><span class="sxs-lookup"><span data-stu-id="39f2f-197">When you are backing up to an existing media set, you have the following two options:</span></span>

-   <span data-ttu-id="39f2f-198">Anexar ao conjunto de backups existente.</span><span class="sxs-lookup"><span data-stu-id="39f2f-198">Append to the existing backup set.</span></span>

     <span data-ttu-id="39f2f-199">Para usar da melhor forma o espaço disponível, novos conjuntos de backups são geralmente anexados a conjuntos de mídias existentes.</span><span class="sxs-lookup"><span data-stu-id="39f2f-199">To make the best possible use of the available space, new backup sets typically are appended to existing media set.</span></span> <span data-ttu-id="39f2f-200">Fazer um acréscimo ao backup preserva qualquer backup anterior.</span><span class="sxs-lookup"><span data-stu-id="39f2f-200">Appending to the backup preserves any prior backups.</span></span> <span data-ttu-id="39f2f-201">Para obter mais informações, consulte [Acrescentando a conjuntos de backup existentes](#Appending), posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="39f2f-201">For more information, see [Appending to Existing Backup Sets](#Appending), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="39f2f-202">O acréscimo, que é o comportamento padrão do BACKUP, pode ser especificado explicitamente com a opção NOINIT.</span><span class="sxs-lookup"><span data-stu-id="39f2f-202">Appending, which is the default behavior of the BACKUP, can be explicitly specified by using the NOINIT option.</span></span>

-   <span data-ttu-id="39f2f-203">Substituir todos os conjuntos de backups existentes pelo backup atual, deixando o cabeçalho da mídia atual em funcionamento.</span><span class="sxs-lookup"><span data-stu-id="39f2f-203">Overwrite all existing backup sets with the current backup, leaving the current media header in place.</span></span>

     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="39f2f-204">tem proteções para impedir que você substitua a mídia acidentalmente.</span><span class="sxs-lookup"><span data-stu-id="39f2f-204">backup has safeguards to prevent you from accidentally overwriting media.</span></span> <span data-ttu-id="39f2f-205">No entanto, o backup pode substituir automaticamente conjuntos de backups que alcançaram uma data de validade predefinida.</span><span class="sxs-lookup"><span data-stu-id="39f2f-205">However, backup can automatically overwrite backup sets that have reached a predefined expiration date.</span></span>

     <span data-ttu-id="39f2f-206">No caso de cabeçalhos de fita, deixar o cabeçalho no lugar pode fazer sentido.</span><span class="sxs-lookup"><span data-stu-id="39f2f-206">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="39f2f-207">Para obter mais informações, consulte [Substituindo conjuntos de backup](#Overwriting), posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="39f2f-207">For more information, see [Overwriting Backup Sets](#Overwriting), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="39f2f-208">A substituição de conjuntos de backup existentes é especificada com a opção INIT da instrução BACKUP.</span><span class="sxs-lookup"><span data-stu-id="39f2f-208">Overwriting existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span>

####  <a name="appending-to-existing-backup-sets"></a><a name="Appending"></a><span data-ttu-id="39f2f-209">Anexando a conjuntos de backup existentes</span><span class="sxs-lookup"><span data-stu-id="39f2f-209">Appending to Existing Backup Sets</span></span>
 <span data-ttu-id="39f2f-210">Backups executados em momentos diferentes no mesmo banco de dados ou em bancos de dados diferentes podem ser armazenados na mesma mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-210">Backups performed at different times from the same or different databases can be stored on the same media.</span></span> <span data-ttu-id="39f2f-211">Ao anexar outro conjunto de backups a uma mídia existente, o conteúdo anterior da mídia permanece intacto e o novo backup é gravado após o final do último backup da mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-211">By appending another backup set to existing media, the previous contents of the media remain intact, and the new backup is written after the end of the last backup on the media.</span></span>

 <span data-ttu-id="39f2f-212">Por padrão, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sempre acrescenta backups novos à mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-212">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] always appends new backups to media.</span></span> <span data-ttu-id="39f2f-213">O acréscimo só pode ocorrer no final da mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-213">Appending can occur only at the end of the media.</span></span> <span data-ttu-id="39f2f-214">Por exemplo, se um volume de mídia contiver cinco conjuntos de backup, não é possível ignorar os três primeiros conjuntos de backup para substituir o quarto conjunto de backup por um conjunto novo.</span><span class="sxs-lookup"><span data-stu-id="39f2f-214">For example, if a media volume contains five backup sets, it is not possible to skip the first three backup sets to overwrite the fourth backup set with a new backup set.</span></span>

 <span data-ttu-id="39f2f-215">Se você usar BACKUP WITH NOREWIND para um backup em fita, a fita ficará aberta no final da operação.</span><span class="sxs-lookup"><span data-stu-id="39f2f-215">If you use BACKUP WITH NOREWIND for a tape backup, the tape will be left open at the end of the operation.</span></span> <span data-ttu-id="39f2f-216">Isso permite anexar outros backups à fita sem rebobiná-la e depois verificar para a frente novamente para encontrar o último conjunto de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-216">This allows you to append further backups to the tape without rewinding the tape and then scanning forward again to find the last backup set.</span></span> <span data-ttu-id="39f2f-217">Você pode obter uma lista das unidades de fita abertas na exibição de gerenciamento dinâmico **sys.dm_io_backup_tapes**; para obter mais informações, consulte [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="39f2f-217">You can find the list of open tape drives in the **sys.dm_io_backup_tapes** dynamic management view; for more information, see [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span></span>

 <span data-ttu-id="39f2f-218">Os backups do Microsoft Windows e do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] podem compartilhar a mesma mídia, mas não são interoperáveis.</span><span class="sxs-lookup"><span data-stu-id="39f2f-218">Microsoft Windows backups and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups can share the same media, but they are not interoperable.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="39f2f-219">não pode fazer backup dos dados do Windows.</span><span class="sxs-lookup"><span data-stu-id="39f2f-219">backup cannot back up Windows data.</span></span>

> [!IMPORTANT]
>  [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="39f2f-220">ou versões posteriores podem ler backups compactados.</span><span class="sxs-lookup"><span data-stu-id="39f2f-220">or later versions can read compressed backups.</span></span> <span data-ttu-id="39f2f-221">Para obter mais informações, veja [Compactação de backup &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="39f2f-221">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


####  <a name="overwriting-backup-sets"></a><a name="Overwriting"></a><span data-ttu-id="39f2f-222">Substituindo conjuntos de backup</span><span class="sxs-lookup"><span data-stu-id="39f2f-222">Overwriting Backup Sets</span></span>
 <span data-ttu-id="39f2f-223">A substituição de conjuntos de backups existentes é especificada com a opção INIT da instrução BACKUP.</span><span class="sxs-lookup"><span data-stu-id="39f2f-223">Overwriting of existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span> <span data-ttu-id="39f2f-224">Essa opção substitui todos os conjuntos de backups na mídia e preserva o cabeçalho da mídia, se houver.</span><span class="sxs-lookup"><span data-stu-id="39f2f-224">This option overwrites all the backup sets on the media and preserve the media header, if any.</span></span> <span data-ttu-id="39f2f-225">Se não houver nenhum cabeçalho da mídia, será criado um.</span><span class="sxs-lookup"><span data-stu-id="39f2f-225">If no media header exists, one is created.</span></span>

 <span data-ttu-id="39f2f-226">No caso de cabeçalhos de fita, deixar o cabeçalho no lugar pode fazer sentido.</span><span class="sxs-lookup"><span data-stu-id="39f2f-226">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="39f2f-227">Em mídias de backup em disco, serão substituídos somente os arquivos usados pelos dispositivos de backup especificados na operação de backup; os outros arquivos no disco não são afetados.</span><span class="sxs-lookup"><span data-stu-id="39f2f-227">For disk backup media, only the files used by the backup devices specified in the backup operation are overwritten; other files on the disk are unaffected.</span></span> <span data-ttu-id="39f2f-228">Quando backups são substituídos, qualquer cabeçalho da mídia existente é preservado e o backup novo é criado como o primeiro backup no dispositivo de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-228">When overwriting backups, any existing media header is preserved, and the new backup is created as the first backup on the backup device.</span></span> <span data-ttu-id="39f2f-229">Se não houver nenhum cabeçalho da mídia, será gravado automaticamente um cabeçalho da mídia válido com um nome e descrição de mídia associados.</span><span class="sxs-lookup"><span data-stu-id="39f2f-229">If there is no existing media header, a valid media header with an associated media name and media description is written automatically.</span></span> <span data-ttu-id="39f2f-230">Se o cabeçalho da mídia existente for inválido, a operação de backup será encerrada.</span><span class="sxs-lookup"><span data-stu-id="39f2f-230">If the existing media header is invalid, the backup operation terminates.</span></span> <span data-ttu-id="39f2f-231">Se a mídia estiver vazia, o novo cabeçalho de mídia será gerado com o MEDIANAME, MEDIAPASSWORD e MEDIADESCRIPTION fornecidos, se houver.</span><span class="sxs-lookup"><span data-stu-id="39f2f-231">If the media is empty, the new media header is generated with the given MEDIANAME, MEDIAPASSWORD, and MEDIADESCRIPTION, if any.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="39f2f-232">Começando com o [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], a opção MEDIAPASSWORD é interrompida para a criação de backups.</span><span class="sxs-lookup"><span data-stu-id="39f2f-232">Beginning with [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], the MEDIAPASSWORD option is discontinued for creating backups.</span></span> <span data-ttu-id="39f2f-233">No entanto, você ainda poderá restaurar os backups criados com senhas.</span><span class="sxs-lookup"><span data-stu-id="39f2f-233">However, you can still restore backups created with passwords.</span></span>

 <span data-ttu-id="39f2f-234">A mídia de backup não será substituída se qualquer uma das condições for aplicável:</span><span class="sxs-lookup"><span data-stu-id="39f2f-234">Backup media is not overwritten if either of the following conditions exists:</span></span>

-   <span data-ttu-id="39f2f-235">Os backups existentes na mídia não expiraram.</span><span class="sxs-lookup"><span data-stu-id="39f2f-235">The existing backups on the media have not expired.</span></span> <span data-ttu-id="39f2f-236">(Se foi especificado SKIP, a expiração não será verificada.)</span><span class="sxs-lookup"><span data-stu-id="39f2f-236">(If SKIP is specified, expiration is not checked.)</span></span>

     <span data-ttu-id="39f2f-237">A data de validade especifica a data em que o backup expira e pode ser substituído por outro backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-237">The expiration date specifies the date that the backup expires and can be overwritten by another backup.</span></span> <span data-ttu-id="39f2f-238">Você pode especificar a data de validade quando um backup é criado.</span><span class="sxs-lookup"><span data-stu-id="39f2f-238">You can specify the expiration date when a backup is created.</span></span> <span data-ttu-id="39f2f-239">Por padrão, a data de validade é determinada pela opção **media retention** definida com o **sp_configure**.</span><span class="sxs-lookup"><span data-stu-id="39f2f-239">By default, the expiration date is determined by the **media retention** option set with **sp_configure**.</span></span> <span data-ttu-id="39f2f-240">Para obter mais informações, consulte [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="39f2f-240">For more information, see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>

-   <span data-ttu-id="39f2f-241">O nome da mídia, caso fornecido, não corresponde ao nome na mídia de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-241">The media name, if provided, does not match the name on the backup media.</span></span>

     <span data-ttu-id="39f2f-242">O nome da mídia é um nome descritivo usado para facilitar sua identificação.</span><span class="sxs-lookup"><span data-stu-id="39f2f-242">The media name is a descriptive name used for easy identification of the media.</span></span>

 <span data-ttu-id="39f2f-243">Se tiver certeza de que deseja substituir a mídia existente (por exemplo, se souber que os backups na fita já não são necessários), você pode ignorar explicitamente essas verificações.</span><span class="sxs-lookup"><span data-stu-id="39f2f-243">If you are sure you want to overwrite the existing media (for example, if you know that the backups on the tape are no longer needed), you can explicitly skip these checks.</span></span>

 <span data-ttu-id="39f2f-244">Se a mídia de backup for protegida por senha pelo Microsoft Windows, o Microsoft SQL Server não gravará na mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-244">If the backup media is password protected by Microsoft Windows, Microsoft SQL Server does not write to the media.</span></span> <span data-ttu-id="39f2f-245">Para substituir a mídia protegida por senha, você deve reinicializar a mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-245">To overwrite media that is password protected, you must reinitialize the media.</span></span>


###  <a name="sequence-numbers"></a><a name="SequenceNumbers"></a><span data-ttu-id="39f2f-246">Números de sequência</span><span class="sxs-lookup"><span data-stu-id="39f2f-246">Sequence Numbers</span></span>
 <span data-ttu-id="39f2f-247">A ordem correta é importante para várias famílias de mídia dentro de um conjunto de mídia ou de vários backups de mídia dentro de uma família de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-247">The correct order is important for multiple media families within a media set or multiple backup media within a media family.</span></span> <span data-ttu-id="39f2f-248">Portanto, o backup atribui números de sequência dos modos seguintes:</span><span class="sxs-lookup"><span data-stu-id="39f2f-248">Therefore, backup assigns sequence numbers in the following ways:</span></span>

-   <span data-ttu-id="39f2f-249">Famílias de mídia sequenciais dentro de um conjunto de mídia</span><span class="sxs-lookup"><span data-stu-id="39f2f-249">Sequential media families within a media set</span></span>

     <span data-ttu-id="39f2f-250">Dentro de um conjunto de mídia, as famílias de mídia são numeradas sequencialmente de acordo com sua posição no conjunto de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-250">Within a media set, the media families are numbered sequentially according to their position in the media set.</span></span> <span data-ttu-id="39f2f-251">O número da família de mídia é registrado na coluna **family_sequence_number** da tabela **backupmediafamily** .</span><span class="sxs-lookup"><span data-stu-id="39f2f-251">The media-family number is recorded in the **family_sequence_number** column of the **backupmediafamily** table.</span></span>

-   <span data-ttu-id="39f2f-252">Mídias físicas dentro de uma família de mídia</span><span class="sxs-lookup"><span data-stu-id="39f2f-252">Physical media within a media family</span></span>

     <span data-ttu-id="39f2f-253">Um número de sequência de mídia indica a ordem das mídias físicas dentro de uma família de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-253">A media sequence number indicates the order of the physical media within a media family.</span></span> <span data-ttu-id="39f2f-254">O número de sequência é 1 para a mídia inicial do backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-254">The sequence number is 1 for the initial backup media.</span></span> <span data-ttu-id="39f2f-255">Esse é marcado com 1; o segundo (a primeira fita de continuação) é marcado com 2; e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="39f2f-255">This is tagged with 1; the second (the first continuation tape) is tagged with 2; and so on.</span></span> <span data-ttu-id="39f2f-256">Quando o conjunto de backup é restaurado, os números de sequência de mídia garantem que o operador que restaura o backup montará as mídias corretas na ordem correta.</span><span class="sxs-lookup"><span data-stu-id="39f2f-256">When the backup set is restored, the media sequence numbers make sure that the operator restoring the backup mounts the correct media in the correct order.</span></span>

###  <a name="multiple-devices"></a><a name="MultipleDevices"></a> <span data-ttu-id="39f2f-257">Vários dispositivos</span><span class="sxs-lookup"><span data-stu-id="39f2f-257">Multiple Devices</span></span>
 <span data-ttu-id="39f2f-258">Quando você usa várias unidades de fita ou arquivos de disco, as considerações seguintes se aplicam:</span><span class="sxs-lookup"><span data-stu-id="39f2f-258">When you use multiple tape drives or disk files, the following considerations apply:</span></span>

-   <span data-ttu-id="39f2f-259">Para backup:</span><span class="sxs-lookup"><span data-stu-id="39f2f-259">For backup:</span></span>

     <span data-ttu-id="39f2f-260">O conjunto de mídia completo criado por uma operação de backup deve ser usado por todas as operações de backup subsequentes.</span><span class="sxs-lookup"><span data-stu-id="39f2f-260">The complete media set that is created by a backup operation must be used by all subsequent backup operations.</span></span> <span data-ttu-id="39f2f-261">Por exemplo, se um conjunto de mídia foi criado usando dois dispositivos de backup em fita, todas as operações de backup subsequentes que envolvem o mesmo conjunto de mídia devem usar dois dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-261">For example, if a media set was created by using two tape backup devices, all subsequent backup operations that involve the same media set must use two backup devices.</span></span>

-   <span data-ttu-id="39f2f-262">Para restauração:</span><span class="sxs-lookup"><span data-stu-id="39f2f-262">For restore:</span></span>

     <span data-ttu-id="39f2f-263">Para qualquer restauração de backups de disco e qualquer restauração online, todas as famílias de mídia devem ser montadas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="39f2f-263">For any restore from disk backups and for any online restore, all the all media families must be concurrently mounted.</span></span> <span data-ttu-id="39f2f-264">Para uma restauração offline de backups em fita, você pode processar as famílias de mídia a partir de menos dispositivos de backup.</span><span class="sxs-lookup"><span data-stu-id="39f2f-264">For an offline restore from tape backups, you can process the media families from fewer backup devices.</span></span> <span data-ttu-id="39f2f-265">Cada família de mídia deve ser totalmente processada antes de começar a processar outra família de mídia.</span><span class="sxs-lookup"><span data-stu-id="39f2f-265">Each media family must be processed completely before starting to process another media family.</span></span> <span data-ttu-id="39f2f-266">As famílias de mídia sempre serão processadas em paralelo, a menos que estejam sendo restauradas com um dispositivo único.</span><span class="sxs-lookup"><span data-stu-id="39f2f-266">Media families are always processed in parallel, unless they are being restored with a single device.</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="39f2f-267">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="39f2f-267">Related Tasks</span></span>
 <span data-ttu-id="39f2f-268">**Para criar um novo conjunto de mídias**</span><span class="sxs-lookup"><span data-stu-id="39f2f-268">**To create a new media set**</span></span>

-   <span data-ttu-id="39f2f-269">[Criar um backup completo de banco de dados &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opção **Fazer backup em um novo conjunto de mídias e apagar todos os conjuntos de backup existentes**)</span><span class="sxs-lookup"><span data-stu-id="39f2f-269">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Back up to a new media set, and erase all existing backup sets** option)</span></span>

-   <span data-ttu-id="39f2f-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opção FORMAT)</span><span class="sxs-lookup"><span data-stu-id="39f2f-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (FORMAT option)</span></span>

-   <xref:Microsoft.SqlServer.Management.Smo.Backup.FormatMedia%2A>

 <span data-ttu-id="39f2f-271">**Para acrescentar um novo backup à mídia existente**</span><span class="sxs-lookup"><span data-stu-id="39f2f-271">**To append a new backup to existing media**</span></span>

-   <span data-ttu-id="39f2f-272">[Criar um backup completo de banco de dados &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opção **Acrescentar ao conjunto de backup existente**)</span><span class="sxs-lookup"><span data-stu-id="39f2f-272">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Append to the existing backup set** option)</span></span>

-   <span data-ttu-id="39f2f-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opção NOINIT)</span><span class="sxs-lookup"><span data-stu-id="39f2f-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (NOINIT option)</span></span>

 <span data-ttu-id="39f2f-274">**Para substituir todos os conjuntos de backup existentes**</span><span class="sxs-lookup"><span data-stu-id="39f2f-274">**To overwrite existing backup sets**</span></span>

-   <span data-ttu-id="39f2f-275">[Criar um backup completo de banco de dados &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opção **Substituir todos os conjuntos de backup existentes**)</span><span class="sxs-lookup"><span data-stu-id="39f2f-275">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Overwrite all existing backup sets** option)</span></span>

-   <span data-ttu-id="39f2f-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opção INIT)</span><span class="sxs-lookup"><span data-stu-id="39f2f-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (INIT option)</span></span>

 <span data-ttu-id="39f2f-277">**Para definir a data de validade**</span><span class="sxs-lookup"><span data-stu-id="39f2f-277">**To set the expiration date**</span></span>

-   [<span data-ttu-id="39f2f-278">Definir a data de validade em um backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-278">Set the Expiration Date on a Backup &#40;SQL Server&#41;</span></span>](set-the-expiration-date-on-a-backup-sql-server.md)

 <span data-ttu-id="39f2f-279">**Para exibir a sequência de mídia e números de sequência de família**</span><span class="sxs-lookup"><span data-stu-id="39f2f-279">**To view the media sequence and family sequence numbers**</span></span>

-   [<span data-ttu-id="39f2f-280">Exibir as propriedades e o conteúdo de um dispositivo de backup lógico &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-280">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   <span data-ttu-id="39f2f-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (coluna **family_sequence_number**)</span><span class="sxs-lookup"><span data-stu-id="39f2f-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (**family_sequence_number** column)</span></span>

 <span data-ttu-id="39f2f-282">**Para exibir os conjuntos de backup em um dispositivo de backup específico**</span><span class="sxs-lookup"><span data-stu-id="39f2f-282">**To view the backup sets on a particular backup device**</span></span>

-   [<span data-ttu-id="39f2f-283">Exibir os dados e arquivos de log em um conjunto de backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-283">View the Data and Log Files in a Backup Set &#40;SQL Server&#41;</span></span>](view-the-data-and-log-files-in-a-backup-set-sql-server.md)

-   [<span data-ttu-id="39f2f-284">Exibir as propriedades e o conteúdo de um dispositivo de backup lógico &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-284">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   [<span data-ttu-id="39f2f-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)

 <span data-ttu-id="39f2f-286">**Para ler o cabeçalho da mídia em um dispositivo de backup**</span><span class="sxs-lookup"><span data-stu-id="39f2f-286">**To read the media header of the media on a backup device**</span></span>

-   [<span data-ttu-id="39f2f-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="39f2f-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)


## <a name="see-also"></a><span data-ttu-id="39f2f-288">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="39f2f-288">See Also</span></span>
 <span data-ttu-id="39f2f-289">Backup [e restauração de bancos de dados SQL Server](back-up-and-restore-of-sql-server-databases.md) [possíveis erros de mídia durante o backup e a restauração &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [informações de histórico e cabeçalho de backup &#40;](backup-history-and-header-information-sql-server.md) SQL Server os [conjuntos de mídias de backup espelhados](mirrored-backup-media-sets-sql-server.md)&#41;&#40;SQL Server o backup&#41;o TRANSACT [-](/sql/t-sql/statements/backup-transact-sql) SQL &#40;[restauração&#41;transact-SQL &#40;](/sql/t-sql/statements/restore-statements-transact-sql) [RESTORE REWINDONLY&#41;Transact-SQL &#40;](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [&#41;sp_configure Transact-](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) SQL &#40;</span><span class="sxs-lookup"><span data-stu-id="39f2f-289">[Back Up and Restore of SQL Server Databases](back-up-and-restore-of-sql-server-databases.md) [Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md) [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) [BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) [RESTORE REWINDONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)</span></span>


