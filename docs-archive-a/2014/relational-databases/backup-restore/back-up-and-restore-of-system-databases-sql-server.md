---
title: Fazer backup e restaurar bancos de dados do sistema (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- system databases [SQL Server], backing up and restoring
- restoring system databases [SQL Server]
- backing up [SQL Server], system databases
- database backups [SQL Server], system databases
- servers [SQL Server], backup
ms.assetid: aef0c4fa-ba67-413d-9359-1a67682fdaab
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51ccf1aeadcf4ab9a662cdd629a812d3ee4b82aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87583681"
---
# <a name="back-up-and-restore-of-system-databases-sql-server"></a><span data-ttu-id="446d7-102">Fazer backup e restaurar bancos de dados do sistema (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="446d7-102">Back Up and Restore of System Databases (SQL Server)</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="446d7-103">mantém um conjunto de bancos de dados em nível de sistema,*bancos de dados do sistema*, essenciais para a operação de uma instância do servidor.</span><span class="sxs-lookup"><span data-stu-id="446d7-103">maintains a set of system-level databases, s*ystem databases*, which are essential for the operation of a server instance.</span></span> <span data-ttu-id="446d7-104">Deve ser feito backup de vários bancos de dados do sistema após cada atualização significativa.</span><span class="sxs-lookup"><span data-stu-id="446d7-104">Several of the system databases must be backed up after every significant update.</span></span> <span data-ttu-id="446d7-105">Os bancos de dados do sistema que você sempre deve fazer backup incluem **msdb**, **mestre**e **modelo**.</span><span class="sxs-lookup"><span data-stu-id="446d7-105">The system databases that you must always back up include **msdb**, **master**, and **model**.</span></span> <span data-ttu-id="446d7-106">Se qualquer banco de dados usar replicação na instância de servidor, haverá um banco de dados do sistema de **distribuição** do qual também deverá ser feito backup.</span><span class="sxs-lookup"><span data-stu-id="446d7-106">If any database uses replication on the server instance, there is a **distribution** system database that you must also back up.</span></span> <span data-ttu-id="446d7-107">Os backups desses bancos de dados do sistema permitem que você restaure e recupere o sistema do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no caso de falha do sistema, como a perda de um disco rígido.</span><span class="sxs-lookup"><span data-stu-id="446d7-107">Backups of these system databases let you restore and recover the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system in the event of system failure, such as the loss of a hard disk.</span></span>  
  
 <span data-ttu-id="446d7-108">A tabela a seguir resume todos os bancos de dados do sistema.</span><span class="sxs-lookup"><span data-stu-id="446d7-108">The following table summarizes all of the system databases.</span></span>  
  
|<span data-ttu-id="446d7-109">Banco de dados do sistema</span><span class="sxs-lookup"><span data-stu-id="446d7-109">System database</span></span>|<span data-ttu-id="446d7-110">Descrição</span><span class="sxs-lookup"><span data-stu-id="446d7-110">Description</span></span>|<span data-ttu-id="446d7-111">Requer backups?</span><span class="sxs-lookup"><span data-stu-id="446d7-111">Are backups required?</span></span>|<span data-ttu-id="446d7-112">modelo de recuperação</span><span class="sxs-lookup"><span data-stu-id="446d7-112">Recovery model</span></span>|<span data-ttu-id="446d7-113">Comentários</span><span class="sxs-lookup"><span data-stu-id="446d7-113">Comments</span></span>|  
|---------------------|-----------------|---------------------------|--------------------|--------------|  
|[<span data-ttu-id="446d7-114">mestre</span><span class="sxs-lookup"><span data-stu-id="446d7-114">master</span></span>](../databases/master-database.md)|<span data-ttu-id="446d7-115">O banco de dados que registra todas as informações de nível de sistema para um sistema [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="446d7-115">The database that records all of the system level information for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system.</span></span>|<span data-ttu-id="446d7-116">Sim</span><span class="sxs-lookup"><span data-stu-id="446d7-116">Yes</span></span>|<span data-ttu-id="446d7-117">Simples</span><span class="sxs-lookup"><span data-stu-id="446d7-117">Simple</span></span>|<span data-ttu-id="446d7-118">Faça backup do **mestre** com a frequência necessária para proteger adequadamente os dados para suas necessidades empresariais.</span><span class="sxs-lookup"><span data-stu-id="446d7-118">Back up **master** as often as necessary to protect the data sufficiently for your business needs.</span></span> <span data-ttu-id="446d7-119">Recomendamos uma agenda regular de backup, que você pode complementar com um backup adicional após uma atualização significativa.</span><span class="sxs-lookup"><span data-stu-id="446d7-119">We recommend a regular backup schedule, which you can supplement with an additional backup after a substantial update.</span></span>|  
|[<span data-ttu-id="446d7-120">modelo</span><span class="sxs-lookup"><span data-stu-id="446d7-120">model</span></span>](../databases/model-database.md)|<span data-ttu-id="446d7-121">O modelo de todos os bancos de dados criados na instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="446d7-121">The template for all databases that are created on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|<span data-ttu-id="446d7-122">Sim</span><span class="sxs-lookup"><span data-stu-id="446d7-122">Yes</span></span>|<span data-ttu-id="446d7-123">Configurável pelo usuário<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="446d7-123">User configurable<sup>1</sup></span></span>|<span data-ttu-id="446d7-124">Faça backup do **modelo** somente quando necessário para suas necessidades empresariais; por exemplo, logo após personalizar suas opções de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="446d7-124">Back up **model** only when necessary for your business needs; for example, immediately after customizing its database options.</span></span><br /><br /> <span data-ttu-id="446d7-125">**Prática recomendada:** é recomendável criar somente backups completos de bancos de dados do **modelo**, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="446d7-125">**Best practice:** We recommend that you create only full database backups of **model**, as required.</span></span> <span data-ttu-id="446d7-126">Como **model** é pequeno e raramente alterado, é desnecessário fazer backup do log.</span><span class="sxs-lookup"><span data-stu-id="446d7-126">Because **model** is small and rarely changes, backing up the log is unnecessary.</span></span>|  
|[<span data-ttu-id="446d7-127">msdb</span><span class="sxs-lookup"><span data-stu-id="446d7-127">msdb</span></span>](../databases/msdb-database.md)|<span data-ttu-id="446d7-128">O banco de dados é usado pelo [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent para programar alertas e trabalhos, e também para registrar operadores.</span><span class="sxs-lookup"><span data-stu-id="446d7-128">The database used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent for scheduling alerts and jobs, and for recording operators.</span></span> <span data-ttu-id="446d7-129">O**msdb** também contém tabelas de histórico, como as tabelas de histórico de backup e de restauração.</span><span class="sxs-lookup"><span data-stu-id="446d7-129">**msdb** also contains history tables such as the backup and restore history tables.</span></span>|<span data-ttu-id="446d7-130">Sim</span><span class="sxs-lookup"><span data-stu-id="446d7-130">Yes</span></span>|<span data-ttu-id="446d7-131">Simples (padrão)</span><span class="sxs-lookup"><span data-stu-id="446d7-131">Simple (default)</span></span>|<span data-ttu-id="446d7-132">Faça backup do **msdb** sempre que este for atualizado.</span><span class="sxs-lookup"><span data-stu-id="446d7-132">Back up **msdb** whenever it is updated.</span></span>|  
|<span data-ttu-id="446d7-133">[Resource](../databases/resource-database.md) (RDB)</span><span class="sxs-lookup"><span data-stu-id="446d7-133">[Resource](../databases/resource-database.md) (RDB)</span></span>|<span data-ttu-id="446d7-134">Um banco de dados somente leitura que contém cópias de todos os objetos do sistema fornecido com o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="446d7-134">A read-only database that contains copies of all system objects that ship with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|<span data-ttu-id="446d7-135">Não</span><span class="sxs-lookup"><span data-stu-id="446d7-135">No</span></span>|-|<span data-ttu-id="446d7-136">O banco de dados **Resource** reside no arquivo mssqlsystemresource.mdf, que contém somente código.</span><span class="sxs-lookup"><span data-stu-id="446d7-136">The **Resource** database resides in the mssqlsystemresource.mdf file, which contains only code.</span></span> <span data-ttu-id="446d7-137">Portanto, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] não pode fazer backup do banco de dados **Recurso** .</span><span class="sxs-lookup"><span data-stu-id="446d7-137">Therefore, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot back up the **Resource** database.</span></span><br /><br /> <span data-ttu-id="446d7-138">Observação: Você pode executar um backup baseado em arquivo ou disco no arquivo mssqlsystemresource.mdf tratando o arquivo como se fosse um arquivo binário (.exe) em vez de um arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="446d7-138">Note: You can perform a file-based or a disk-based backup on the mssqlsystemresource.mdf file by treating the file as if it were a binary (.exe) file, instead of a database file.</span></span> <span data-ttu-id="446d7-139">Mas você não pode usar a restauração do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nos backups.</span><span class="sxs-lookup"><span data-stu-id="446d7-139">But you cannot use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restore on the backups.</span></span> <span data-ttu-id="446d7-140">A restauração de uma cópia de backup de mssqlsystemresource.mdf pode ser feita apenas manualmente, e é necessário ter cuidado para não substituir o banco de dados **Resource** atual com uma versão desatualizada ou potencialmente insegura.</span><span class="sxs-lookup"><span data-stu-id="446d7-140">Restoring a backup copy of mssqlsystemresource.mdf can only be done manually, and you must be careful not to overwrite the current **Resource** database with an out-of-date or potentially insecure version.</span></span>|  
|[<span data-ttu-id="446d7-141">tempdb</span><span class="sxs-lookup"><span data-stu-id="446d7-141">tempdb</span></span>](../databases/tempdb-database.md)|<span data-ttu-id="446d7-142">Um workspace para manter conjuntos de resultados temporários ou intermediários.</span><span class="sxs-lookup"><span data-stu-id="446d7-142">A workspace for holding temporary or intermediate result sets.</span></span> <span data-ttu-id="446d7-143">Esse banco de dados é recriado sempre que é iniciada uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="446d7-143">This database is re-created every time an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started.</span></span> <span data-ttu-id="446d7-144">Quando a instância de servidor é desativada, qualquer dado em **tempdb** é excluído permanentemente.</span><span class="sxs-lookup"><span data-stu-id="446d7-144">When the server instance is shut down, any data in **tempdb** is deleted permanently.</span></span>|<span data-ttu-id="446d7-145">Não</span><span class="sxs-lookup"><span data-stu-id="446d7-145">No</span></span>|<span data-ttu-id="446d7-146">Simples</span><span class="sxs-lookup"><span data-stu-id="446d7-146">Simple</span></span>|<span data-ttu-id="446d7-147">Você não poderá fazer backup do banco de dados do sistema **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="446d7-147">You cannot back up the **tempdb** system database.</span></span>|  
|[<span data-ttu-id="446d7-148">Configurar Distribuição</span><span class="sxs-lookup"><span data-stu-id="446d7-148">Configure Distribution</span></span>](../replication/configure-distribution.md)|<span data-ttu-id="446d7-149">Um banco de dados que existe somente se o servidor estiver configurado como um Distribuidor de replicação.</span><span class="sxs-lookup"><span data-stu-id="446d7-149">A database that exists only if the server is configured as a replication Distributor.</span></span> <span data-ttu-id="446d7-150">Esse banco de dados armazena metadados e dados de histórico para todos os tipos de replicação e transações para replicação transacional.</span><span class="sxs-lookup"><span data-stu-id="446d7-150">This database stores metadata and history data for all types of replication, and transactions for transactional replication.</span></span>|<span data-ttu-id="446d7-151">Sim</span><span class="sxs-lookup"><span data-stu-id="446d7-151">Yes</span></span>|<span data-ttu-id="446d7-152">Simples</span><span class="sxs-lookup"><span data-stu-id="446d7-152">Simple</span></span>|<span data-ttu-id="446d7-153">Para obter informações sobre quando fazer backup do banco de dados **distribution** , veja [Fazer backup e restaurar bancos de dados replicados](../replication/administration/back-up-and-restore-replicated-databases.md).</span><span class="sxs-lookup"><span data-stu-id="446d7-153">For information about when to back up the **distribution** database, see [Back Up and Restore Replicated Databases](../replication/administration/back-up-and-restore-replicated-databases.md).</span></span>|  
  
 <span data-ttu-id="446d7-154"><sup>1</sup> para aprender o modelo de recuperação atual do modelo, consulte [Exibir ou alterar o modelo de recuperação de um banco de dados &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) ou [sys. databases &#40;&#41;do Transact-SQL ](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="446d7-154"><sup>1</sup> To learn the current recovery model of the model, see [View or Change the Recovery Model of a Database &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) or [sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span></span>  
  
## <a name="limitations-on-restoring-system-databases"></a><span data-ttu-id="446d7-155">Limitações da restauração de bancos de dados do sistema</span><span class="sxs-lookup"><span data-stu-id="446d7-155">Limitations on Restoring System Databases</span></span>  
  
-   <span data-ttu-id="446d7-156">Os bancos de dados do sistema podem ser restaurados somente a partir de backups criados na versão do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que está em execução na instância de servidor no momento.</span><span class="sxs-lookup"><span data-stu-id="446d7-156">System databases can be restored only from backups that are created on the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the server instance is currently running.</span></span> <span data-ttu-id="446d7-157">Por exemplo, para restaurar um banco de dados do sistema em uma instância de servidor em execução no [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span><span class="sxs-lookup"><span data-stu-id="446d7-157">For example, to restore a system database on a server instance that is running on [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span></span>  
  
-   <span data-ttu-id="446d7-158">Para restaurar qualquer banco de dados, a instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve estar em execução.</span><span class="sxs-lookup"><span data-stu-id="446d7-158">To restore any database, the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be running.</span></span> <span data-ttu-id="446d7-159">Iniciar uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] requer que o banco de dados **mestre** esteja acessível e pelo menos parcialmente utilizável.</span><span class="sxs-lookup"><span data-stu-id="446d7-159">Startup of an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] requires that the **master** database is accessible and at least partly usable.</span></span> <span data-ttu-id="446d7-160">Se o **mestre** se tornar inutilizável, você poderá retornar o banco de dados a um estado utilizável das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="446d7-160">If **master** becomes unusable, you can return the database to a usable state in either of the following ways:</span></span>  
  
    -   <span data-ttu-id="446d7-161">Restaure o **mestre** a partir de um backup de banco de dados atual.</span><span class="sxs-lookup"><span data-stu-id="446d7-161">Restore **master** from a current database backup.</span></span>  
  
         <span data-ttu-id="446d7-162">Se você puder iniciar a instância de servidor, deverá poder restaurar o **mestre** a partir de um backup de banco de dados completo.</span><span class="sxs-lookup"><span data-stu-id="446d7-162">If you can start the server instance, you should be able to restore **master** from a full database backup.</span></span>  
  
    -   <span data-ttu-id="446d7-163">Recrie completamente o **mestre** .</span><span class="sxs-lookup"><span data-stu-id="446d7-163">Rebuild **master** completely.</span></span>  
  
         <span data-ttu-id="446d7-164">Se danos graves do **master** impedirem a inicialização do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], recrie o **master**.</span><span class="sxs-lookup"><span data-stu-id="446d7-164">If severe damage to **master** prevents you from starting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must rebuild **master**.</span></span> <span data-ttu-id="446d7-165">Para obter mais informações, consulte [Recriar bancos de dados do sistema](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="446d7-165">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
        > [!IMPORTANT]  
        >  <span data-ttu-id="446d7-166">A recriação de **master** recria todos os bancos de dados do sistema.</span><span class="sxs-lookup"><span data-stu-id="446d7-166">Rebuilding **master** rebuilds all of the system databases.</span></span>  
  
-   <span data-ttu-id="446d7-167">Em algumas circunstâncias, os problemas que recuperam o banco de dados modelo podem exigir a reconstrução dos bancos de dados do sistema ou a substituição dos arquivos mdf e ldf para o banco de dados modelo.</span><span class="sxs-lookup"><span data-stu-id="446d7-167">Under some circumstances, problems recovering the model database may require rebuilding the system databases or replacing the mdf and ldf files for the model database.</span></span> <span data-ttu-id="446d7-168">Para obter mais informações, consulte [Recriar bancos de dados do sistema](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="446d7-168">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="446d7-169">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="446d7-169">Related Tasks</span></span>  
  
-   [<span data-ttu-id="446d7-170">Criar um backup completo de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="446d7-170">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](create-a-full-database-backup-sql-server.md)  
  
-   [<span data-ttu-id="446d7-171">Restaurações completas de banco de dados &#40;Modelo de recuperação simples#41;</span><span class="sxs-lookup"><span data-stu-id="446d7-171">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="446d7-172">Restaurar o banco de dados mestre &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="446d7-172">Restore the master Database &#40;Transact-SQL&#41;</span></span>](restore-the-master-database-transact-sql.md)  
  
-   [<span data-ttu-id="446d7-173">Exibir ou alterar o modelo de recuperação de um banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="446d7-173">View or Change the Recovery Model of a Database &#40;SQL Server&#41;</span></span>](view-or-change-the-recovery-model-of-a-database-sql-server.md)  
  
-   [<span data-ttu-id="446d7-174">Mover bancos de dados do sistema</span><span class="sxs-lookup"><span data-stu-id="446d7-174">Move System Databases</span></span>](../databases/move-system-databases.md)  
  
## <a name="see-also"></a><span data-ttu-id="446d7-175">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="446d7-175">See Also</span></span>  
 <span data-ttu-id="446d7-176">[Banco de dados de distribuição](../../relational-databases/replication/distribution-database.md) </span><span class="sxs-lookup"><span data-stu-id="446d7-176">[Distribution Database](../../relational-databases/replication/distribution-database.md) </span></span>  
 <span data-ttu-id="446d7-177">[Banco de dados mestre](../databases/master-database.md) </span><span class="sxs-lookup"><span data-stu-id="446d7-177">[master Database](../databases/master-database.md) </span></span>  
 <span data-ttu-id="446d7-178">[Banco de dados msdb](../databases/msdb-database.md) </span><span class="sxs-lookup"><span data-stu-id="446d7-178">[msdb Database](../databases/msdb-database.md) </span></span>  
 <span data-ttu-id="446d7-179">[Banco de dados modelo](../databases/model-database.md) </span><span class="sxs-lookup"><span data-stu-id="446d7-179">[model Database](../databases/model-database.md) </span></span>  
 <span data-ttu-id="446d7-180">[Banco de dados de recursos](../databases/resource-database.md) </span><span class="sxs-lookup"><span data-stu-id="446d7-180">[Resource Database](../databases/resource-database.md) </span></span>  
 [<span data-ttu-id="446d7-181">Banco de dados tempdb</span><span class="sxs-lookup"><span data-stu-id="446d7-181">tempdb Database</span></span>](../databases/tempdb-database.md)  
  
  
