---
title: Bancos de dados independentes | Microsoft Docs
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- contained database
- database_uncontained_usage event
- partially contained database
- contained database, understanding
ms.assetid: 36af59d7-ce96-4a02-8598-ffdd78cdc948
author: stevestein
ms.author: sstein
ms.openlocfilehash: 3efd231a1aa4d2b348bcfe887bd05825fcd40c90
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87681686"
---
# <a name="contained-databases"></a><span data-ttu-id="5e637-102">Bancos de dados independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-102">Contained Databases</span></span>
  <span data-ttu-id="5e637-103">Um*banco de dados independente* é um banco de dados isolado de outros bancos de dados e da instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que hospeda o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-103">A*contained database* is a database that is isolated from other databases and from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that hosts the database.</span></span>  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="5e637-104">ajuda o usuário a isolar seu banco de dados da instância de 4 maneiras.</span><span class="sxs-lookup"><span data-stu-id="5e637-104">helps user to isolate their database from the instance in 4 ways.</span></span>  
  
-   <span data-ttu-id="5e637-105">A maioria dos metadados que descrevem um banco de dados é mantida no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-105">Much of the metadata that describes a database is maintained in the database.</span></span> <span data-ttu-id="5e637-106">(Além de, ou em vez de, manter os metadados no banco de dados mestre.)</span><span class="sxs-lookup"><span data-stu-id="5e637-106">(In addition to, or instead of, maintaining metadata in the master database.)</span></span>  
  
-   <span data-ttu-id="5e637-107">Todo os metadados são definidos usando a mesma ordenação.</span><span class="sxs-lookup"><span data-stu-id="5e637-107">All metadata are defined using the same collation.</span></span>  
  
-   <span data-ttu-id="5e637-108">A autenticação de usuário pode ser executada pelo banco de dados, reduzindo a dependência dos bancos de dados dos logons da instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e637-108">User authentication can be performed by the database, reducing the databases dependency on the logins of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="5e637-109">O ambiente do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (DMVs, XEvents etc.) relata e pode agir sobre as informações de contenção.</span><span class="sxs-lookup"><span data-stu-id="5e637-109">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] environment (DMV's, XEvents, etc.) reports and can act upon containment information.</span></span>  
  
 <span data-ttu-id="5e637-110">Alguns recursos de bancos de dados parcialmente independentes, como armazenar metadados no banco de dados, aplicam-se a todos os bancos de dados do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5e637-110">Some features of partially contained databases, such as storing metadata in the database, apply to all [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] databases.</span></span> <span data-ttu-id="5e637-111">Alguns benefícios dos bancos de dados parcialmente independentes, como autenticação no nível de banco de dados e ordenação de catálogos, devem ser habilitados antes de serem disponibilizados.</span><span class="sxs-lookup"><span data-stu-id="5e637-111">Some benefits of partially contained databases, such as database level authentication and catalog collation, must be enabled before they are available.</span></span> <span data-ttu-id="5e637-112">A contenção parcial é habilitada usando as instruções `CREATE DATABASE` e `ALTER DATABASE` ou usando o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e637-112">Partial containment is enabled using the `CREATE DATABASE` and `ALTER DATABASE` statements or by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="5e637-113">Para obter mais informações sobre como habilitar a contenção parcial de bancos de dados, consulte [Migrate to a Partially Contained Database](migrate-to-a-partially-contained-database.md).</span><span class="sxs-lookup"><span data-stu-id="5e637-113">For more information about how to enable partial database containment, see [Migrate to a Partially Contained Database](migrate-to-a-partially-contained-database.md).</span></span>  
  
 <span data-ttu-id="5e637-114">Este tópico inclui as seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="5e637-114">This topic contains the following sections.</span></span>  
  
-   [<span data-ttu-id="5e637-115">Conceitos de banco de dados parcialmente independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-115">Partially Contained Database Concepts</span></span>](#Concepts)  
  
-   [<span data-ttu-id="5e637-116">Contenção</span><span class="sxs-lookup"><span data-stu-id="5e637-116">Containment</span></span>](#containment)  
  
-   [<span data-ttu-id="5e637-117">Benefícios do uso de bancos de dados parcialmente independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-117">Benefits of using Partially Contained Databases</span></span>](#benefits)  
  
-   [<span data-ttu-id="5e637-118">Limitações</span><span class="sxs-lookup"><span data-stu-id="5e637-118">Limitations</span></span>](#Limitations)  
  
-   [<span data-ttu-id="5e637-119">Identificando a contenção de banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-119">Identifying Database Containment</span></span>](#Identifying)  
  
##  <a name="partially-contained-database-concepts"></a><a name="Concepts"></a> <span data-ttu-id="5e637-120">Conceitos de banco de dados parcialmente independente</span><span class="sxs-lookup"><span data-stu-id="5e637-120">Partially Contained Database Concepts</span></span>  
 <span data-ttu-id="5e637-121">Um banco de dados totalmente independente inclui todas as configurações e metadados necessários para definir o banco de dados e não tem nenhuma dependência de configuração da instância do [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] onde o banco de dados está instalado.</span><span class="sxs-lookup"><span data-stu-id="5e637-121">A fully contained database includes all the settings and metadata required to define the database and has no configuration dependencies on the instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] where the database is installed.</span></span> <span data-ttu-id="5e637-122">Em versões anteriores do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], separar um banco de dados da instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] poderia ser demorado e exigir conhecimento detalhado da relação entre o banco de dados e a instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e637-122">In previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], separating a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] could be time consuming and required detailed knowledge of the relationship between the database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5e637-123">Os bancos de dados parcialmente independentes facilitam a separação de um banco de dados de uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e de outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-123">Partially contained databases make it easier to separate a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and other databases.</span></span>  
  
 <span data-ttu-id="5e637-124">O banco de dados independente considera recursos em relação à contenção.</span><span class="sxs-lookup"><span data-stu-id="5e637-124">The contained database considers features with regard to containment.</span></span> <span data-ttu-id="5e637-125">Qualquer entidade definida pelo usuário que confie apenas em funções que residem no banco de dados é considerada totalmente contida.</span><span class="sxs-lookup"><span data-stu-id="5e637-125">Any user-defined entity that relies only on functions that reside in the database is considered fully contained.</span></span> <span data-ttu-id="5e637-126">Qualquer entidade definida pelo usuário que confie apenas em funções que residem fora do banco de dados é considerada não contida.</span><span class="sxs-lookup"><span data-stu-id="5e637-126">Any user-defined entity that relies on functions that reside outside the database is considered uncontained.</span></span> <span data-ttu-id="5e637-127">(Para obter mais informações, consulte a seção [Contenção](#containment) mais adiante neste tópico.)</span><span class="sxs-lookup"><span data-stu-id="5e637-127">(For more information, see the [Containment](#containment) section later in this topic.)</span></span>  
  
 <span data-ttu-id="5e637-128">Os termos a seguir se aplicam ao modelo de banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="5e637-128">The following terms apply to the contained database model.</span></span>  
  
 <span data-ttu-id="5e637-129">Limite de banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-129">Database boundary</span></span>  
 <span data-ttu-id="5e637-130">O limite entre um banco de dados e a instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e637-130">The boundary between a database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5e637-131">O limite entre um banco de dados e outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-131">The boundary between a database and other databases.</span></span>  
  
 <span data-ttu-id="5e637-132">Contida</span><span class="sxs-lookup"><span data-stu-id="5e637-132">Contained</span></span>  
 <span data-ttu-id="5e637-133">Um elemento que existe completamente no limite de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-133">An element that exists entirely in the database boundary.</span></span>  
  
 <span data-ttu-id="5e637-134">Não contida</span><span class="sxs-lookup"><span data-stu-id="5e637-134">Uncontained</span></span>  
 <span data-ttu-id="5e637-135">Um elemento que cruza o limite de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-135">An element that crosses the database boundary.</span></span>  
  
 <span data-ttu-id="5e637-136">Banco de dados dependente</span><span class="sxs-lookup"><span data-stu-id="5e637-136">Non-contained database</span></span>  
 <span data-ttu-id="5e637-137">Um banco de dados com contenção definida como **NONE**.</span><span class="sxs-lookup"><span data-stu-id="5e637-137">A database that has containment set to **NONE**.</span></span> <span data-ttu-id="5e637-138">Todos os bancos de dados em versões anteriores ao [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] são dependentes.</span><span class="sxs-lookup"><span data-stu-id="5e637-138">All databases in versions earlier than [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] are non-contained.</span></span> <span data-ttu-id="5e637-139">Por padrão, todos os bancos de dados do [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] e posteriores têm um conjunto de contenção definido como **NONE**.</span><span class="sxs-lookup"><span data-stu-id="5e637-139">By default, all [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later databases have a containment set to **NONE**.</span></span>  
  
 <span data-ttu-id="5e637-140">Banco de dados parcialmente contido</span><span class="sxs-lookup"><span data-stu-id="5e637-140">Partially contained database</span></span>  
 <span data-ttu-id="5e637-141">Um banco de dados parcialmente independente é um banco de dados independente que permite que alguns recursos cruzem o limite de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-141">A partially contained database is a contained database that can allow some features that cross the database boundary.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="5e637-142">inclui a capacidade de determinar quando o limite de retenção é cruzado.</span><span class="sxs-lookup"><span data-stu-id="5e637-142">includes the ability to determine when the containment boundary is crossed.</span></span>  
  
 <span data-ttu-id="5e637-143">Usuário contido</span><span class="sxs-lookup"><span data-stu-id="5e637-143">Contained user</span></span>  
 <span data-ttu-id="5e637-144">Há dois tipos de usuários de bancos de dados independentes.</span><span class="sxs-lookup"><span data-stu-id="5e637-144">There are two types of users for contained databases.</span></span>  
  
-   <span data-ttu-id="5e637-145">**Usuário de banco de dados independente com senha**</span><span class="sxs-lookup"><span data-stu-id="5e637-145">**Contained database user with password**</span></span>  
  
     <span data-ttu-id="5e637-146">Usuários de banco de dados independente com senhas são autenticados pelo banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-146">Contained database users with passwords are authenticated by the database.</span></span>  
  
-   <span data-ttu-id="5e637-147">**entidades de segurança do Windows**</span><span class="sxs-lookup"><span data-stu-id="5e637-147">**Windows principals**</span></span>  
  
     <span data-ttu-id="5e637-148">Usuários autorizados do Windows e membros de grupos autorizados do Windows podem conectar-se diretamente ao banco de dados e não precisam de logons no banco de dados **mestre** .</span><span class="sxs-lookup"><span data-stu-id="5e637-148">Authorized Windows users and members of authorized Windows groups can connect directly to the database and do not need logins in the **master** database.</span></span> <span data-ttu-id="5e637-149">O banco de dados confia na autenticação pelo Windows.</span><span class="sxs-lookup"><span data-stu-id="5e637-149">The database trusts the authentication by Windows.</span></span>  
  
 <span data-ttu-id="5e637-150">Os usuários baseados em logons no banco de dados **mestre** podem receber acesso a um banco de dados independente, mas isso cria uma dependência na instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5e637-150">Users based on logins in the **master** database can be granted access to a contained database, but that would create a dependency on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5e637-151">Portanto, criar usuários com base em logons permite ver comentários sobre bancos de dados parcialmente independentes.</span><span class="sxs-lookup"><span data-stu-id="5e637-151">Therefore, creating users based on logins see comment for partially contained databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="5e637-152">Habilitar delegados de bancos de dados parcialmente independentes controla o acesso à instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para os proprietários do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-152">Enabling partially contained databases delegates control over access to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the owners of the database.</span></span> <span data-ttu-id="5e637-153">Para obter mais informações, consulte [Security Best Practices with Contained Databases](security-best-practices-with-contained-databases.md).</span><span class="sxs-lookup"><span data-stu-id="5e637-153">For more information, see [Security Best Practices with Contained Databases](security-best-practices-with-contained-databases.md).</span></span>  
  
 <span data-ttu-id="5e637-154">Limite de banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-154">Database Boundary</span></span>  
 <span data-ttu-id="5e637-155">Como os bancos de dados parcialmente independentes separam a funcionalidade do banco de dados das funcionalidades da instância, há uma linha claramente definida entre esses dois elementos chamada de *limite de banco de dados*.</span><span class="sxs-lookup"><span data-stu-id="5e637-155">Because partially contained databases separate the database functionality from those of the instance, there is a clearly defined line between these two elements called the *database boundary*.</span></span>  
  
 <span data-ttu-id="5e637-156">Dentro do limite de banco de dados está o *modelo de banco de dados*, onde os bancos de dados são desenvolvidos e gerenciados.</span><span class="sxs-lookup"><span data-stu-id="5e637-156">Inside of the database boundary is the *database model*, where the databases are developed and managed.</span></span> <span data-ttu-id="5e637-157">Exemplos de entidades localizadas dentro do modelo do banco de dados incluem tabelas do sistema, como **sys.tables**, usuários com senhas de bancos de dados independentes e tabelas de usuário no banco de dados atual referenciadas por um nome de duas partes.</span><span class="sxs-lookup"><span data-stu-id="5e637-157">Examples of entities located inside of the database include, system tables like **sys.tables**, contained database users with passwords, and user tables in the current database referenced by a two-part name.</span></span>  
  
 <span data-ttu-id="5e637-158">Fora do limite de banco de dados está o *modelo de gerenciamento*que pertence às funções e ao gerenciamento em nível da instância.</span><span class="sxs-lookup"><span data-stu-id="5e637-158">Outside of the database boundary is the *management model*, which pertains to instance-level functions and management.</span></span> <span data-ttu-id="5e637-159">Exemplos de entidades localizadas fora do limite de banco de dados incluem tabelas do sistema, como **sys.endpoints**, usuários mapeados para logons e tabelas de usuário em outro banco de dados referenciadas por um nome de três partes.</span><span class="sxs-lookup"><span data-stu-id="5e637-159">Examples of entities located outside of the database boundary include, system tables like **sys.endpoints**, users mapped to logins, and user tables in another database referenced by a three-part-name.</span></span>  
  
##  <a name="containment"></a><a name="containment"></a> <span data-ttu-id="5e637-160">Contenção</span><span class="sxs-lookup"><span data-stu-id="5e637-160">Containment</span></span>  
 <span data-ttu-id="5e637-161">Entidades de usuário que residem inteiramente dentro do banco de dados são consideradas *contidas*.</span><span class="sxs-lookup"><span data-stu-id="5e637-161">User entities that reside entirely within the database are considered *contained*.</span></span> <span data-ttu-id="5e637-162">Qualquer entidade que resida fora do banco de dados ou que dependa da interação com funções fora do banco de dados é considerada como *não contida*.</span><span class="sxs-lookup"><span data-stu-id="5e637-162">Any entities that reside outside of the database, or rely on interaction with functions outside of the database, are considered *uncontained*.</span></span>  
  
 <span data-ttu-id="5e637-163">Em geral, entidades de usuário entram nas seguintes categorias de contenção:</span><span class="sxs-lookup"><span data-stu-id="5e637-163">In general, user entities fall into the following categories of containment:</span></span>  
  
-   <span data-ttu-id="5e637-164">Entidades de usuário totalmente contidas (que nunca cruzam o limite de banco de dados), por exemplo sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="5e637-164">Fully contained user entities (those that never cross the database boundary), for example sys.indexes.</span></span> <span data-ttu-id="5e637-165">Qualquer código que use esses recursos ou qualquer objeto que faça referência apenas a essas entidades também é totalmente contido.</span><span class="sxs-lookup"><span data-stu-id="5e637-165">Any code that uses these features or any object that references only these entities is also fully contained.</span></span>  
  
-   <span data-ttu-id="5e637-166">Entidades de usuário não contidas (que cruzam o limite de banco de dados), por exemplo, sys.server_principals ou a própria entidade de servidor (logon).</span><span class="sxs-lookup"><span data-stu-id="5e637-166">Uncontained user entities (those that cross the database boundary), for example sys.server_principals or a server principal (login) itself.</span></span> <span data-ttu-id="5e637-167">Qualquer código que use essas entidades ou qualquer função que faça referência a essas entidades não é contido.</span><span class="sxs-lookup"><span data-stu-id="5e637-167">Any code that uses these entities or any functions that references these entities are uncontained.</span></span>  
  
###  <a name="partially-contained-database"></a><a name="partial"></a> <span data-ttu-id="5e637-168">Partially Contained Database</span><span class="sxs-lookup"><span data-stu-id="5e637-168">Partially Contained Database</span></span>  
 <span data-ttu-id="5e637-169">O recurso de banco de dados independente está disponível atualmente apenas em um estado parcialmente contido.</span><span class="sxs-lookup"><span data-stu-id="5e637-169">The contained database feature is currently available only in a partially contained state.</span></span> <span data-ttu-id="5e637-170">Um banco de dados parcialmente contido é um banco de dados independente que permite o uso de recursos não contidos.</span><span class="sxs-lookup"><span data-stu-id="5e637-170">A partially contained database is a contained database that allows the use of uncontained features.</span></span>  
  
 <span data-ttu-id="5e637-171">Use as exibições [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) e [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) para retornar informações sobre objetos ou recursos não contidos.</span><span class="sxs-lookup"><span data-stu-id="5e637-171">Use the [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) and [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) view to return information about uncontained objects or features.</span></span> <span data-ttu-id="5e637-172">Por meio da determinação do status da contenção dos elementos de seu banco de dados, é possível descobrir quais objetos ou recursos devem ser substituídos os alterados para promover a contenção.</span><span class="sxs-lookup"><span data-stu-id="5e637-172">By determining the containment status of the elements of your database, you can discover what objects or features must be replaced or altered to promote containment.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="5e637-173">Como determinados objetos têm uma configuração de contenção padrão de **NONE**, essa exibição pode retornar falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="5e637-173">Because certain objects have a default containment setting of **NONE**, this view can return false positives.</span></span>  
  
 <span data-ttu-id="5e637-174">O comportamento de bancos de dados parcialmente independentes difere muito distintamente do comportamento de bancos de dados dependentes em termos de ordenação.</span><span class="sxs-lookup"><span data-stu-id="5e637-174">The behavior of partially contained databases differs most distinctly from that of non-contained databases with regard to collation.</span></span> <span data-ttu-id="5e637-175">Para obter mais informações sobre problemas de ordenação, consulte [Ordenações de banco de dados independentes](contained-database-collations.md).</span><span class="sxs-lookup"><span data-stu-id="5e637-175">For more information about collation issues, see [Contained Database Collations](contained-database-collations.md).</span></span>  
  
##  <a name="benefits-of-using-partially-contained-databases"></a><a name="benefits"></a> <span data-ttu-id="5e637-176">Benefícios do uso de bancos de dados parcialmente independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-176">Benefits of using Partially Contained Databases</span></span>  
 <span data-ttu-id="5e637-177">Há problemas e complicações associadas aos bancos de dados dependentes que podem ser resolvidos por meio de um banco de dados parcialmente independente.</span><span class="sxs-lookup"><span data-stu-id="5e637-177">There are issues and complications associated with the non-contained databases that can be resolved by using a partially contained database.</span></span>  
  
### <a name="database-movement"></a><span data-ttu-id="5e637-178">Movimentação do banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-178">Database Movement</span></span>  
 <span data-ttu-id="5e637-179">Um dos problemas que ocorre ao mover bancos de dados é que algumas informações importantes podem não estar disponíveis quando um banco de dados é movido de uma instância a outra.</span><span class="sxs-lookup"><span data-stu-id="5e637-179">One of the problems that occurs when moving databases, is that some important information can be unavailable when a database is moved from one instance to another.</span></span> <span data-ttu-id="5e637-180">Por exemplo, as informações de logon são armazenadas na instância e não no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-180">For example, login information is stored within the instance instead of in the database.</span></span> <span data-ttu-id="5e637-181">Quando você move um banco de dados dependente de uma instância para outra instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], essas informações são deixadas para trás.</span><span class="sxs-lookup"><span data-stu-id="5e637-181">When you move a non-contained database from one instance to another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], this information is left behind.</span></span> <span data-ttu-id="5e637-182">Você deve identificar as informações ausentes e movê-las com seu banco de dados para a nova instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e637-182">You must identify the missing information and move it with your database to the new instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5e637-183">Esse processo pode ser difícil e demorado.</span><span class="sxs-lookup"><span data-stu-id="5e637-183">This process can be difficult and time-consuming.</span></span>  
  
 <span data-ttu-id="5e637-184">O banco de dados parcialmente independente pode armazenar informações importantes no banco de dados para que o banco de dados ainda contenha as informações depois de ser movido.</span><span class="sxs-lookup"><span data-stu-id="5e637-184">The partially contained database can store important information in the database so the database still has the information after it is moved.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5e637-185">Um banco de dados parcialmente independente pode fornecer documentação que descreve os recursos que são usados por um banco de dados que não pode ser separado da instância.</span><span class="sxs-lookup"><span data-stu-id="5e637-185">A partially contained database can provide documentation describing those features that are used by a database that cannot be separated from the instance.</span></span> <span data-ttu-id="5e637-186">Isso inclui uma lista de outros bancos de dados relacionados, configurações do sistema exigidas pelo banco de dados, mas que não podem ser contidas, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="5e637-186">This includes a list of other interrelated databases, system settings that the database requires but cannot be contained, and so on.</span></span>  
  
### <a name="benefit-of-contained-database-users-with-alwayson"></a><span data-ttu-id="5e637-187">Benefício de usuários de banco de dados independentes com AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="5e637-187">Benefit of Contained Database Users with AlwaysOn</span></span>  
 <span data-ttu-id="5e637-188">Reduzindo as associações à instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], bancos de dados parcialmente independentes podem ser úteis durante o failover quando o [!INCLUDE[ssHADR](../../includes/sshadr-md.md)]é usado.</span><span class="sxs-lookup"><span data-stu-id="5e637-188">By reducing the ties to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], partially contained databases can be useful during failover when you use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span></span>  
  
 <span data-ttu-id="5e637-189">Criar os usuários independentes permite que o usuário se conecte diretamente no banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="5e637-189">Creating contained users enables the user to connect directly to the contained database.</span></span> <span data-ttu-id="5e637-190">Este é um recurso muito significativo em cenários de alta disponibilidade e recuperação de desastres como em uma solução AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="5e637-190">This is a very significant feature in high availability and disaster recovery scenarios such as in an AlwaysOn solution.</span></span> <span data-ttu-id="5e637-191">Se os usuários forem independentes, no caso de failover, as pessoas podem ser capazes de se conectar ao secundário sem criar logons na instância que hospeda o secundário.</span><span class="sxs-lookup"><span data-stu-id="5e637-191">If the users are contained users, in case of failover, people would be able to connect to the secondary without creating logins on the instance hosting the secondary.</span></span> <span data-ttu-id="5e637-192">Isto fornece um benefício imediato.</span><span class="sxs-lookup"><span data-stu-id="5e637-192">This provides an immediate benefit.</span></span> <span data-ttu-id="5e637-193">Para obter mais informações, veja [Visão geral de Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) e [Pré-requisitos, restrições e recomendações para grupos de disponibilidade AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="5e637-193">For more information, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) and [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
### <a name="initial-database-development"></a><span data-ttu-id="5e637-194">Desenvolvimento inicial de bancos de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-194">Initial Database Development</span></span>  
 <span data-ttu-id="5e637-195">Como um desenvolvedor talvez não saiba onde um novo banco de dados será implantado, a limitação dos impactos no ambiente implantados no banco de dados reduz o trabalho e a preocupação do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="5e637-195">Because a developer may not know where a new database will be deployed, limiting the deployed environmental impacts on the database lessens the work and concern for the developer.</span></span> <span data-ttu-id="5e637-196">No modelo não contido, o desenvolvedor deve considerar os possíveis impactos no ambiente no novo banco de dados e programa de maneira correspondente.</span><span class="sxs-lookup"><span data-stu-id="5e637-196">In the non-contained model, the developer must consider possible environmental impacts on the new database and program accordingly.</span></span> <span data-ttu-id="5e637-197">No entanto, ao usar bancos de dados parcialmente independentes, os desenvolvedores podem detectar impactos de nível de instância no banco de dados e preocupações de nível de instância para o desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="5e637-197">However, by using partially contained databases, developers can detect instance-level impacts on the database and instance-level concerns for the developer.</span></span>  
  
### <a name="database-administration"></a><span data-ttu-id="5e637-198">Administração de banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-198">Database Administration</span></span>  
 <span data-ttu-id="5e637-199">Manter as configurações de banco de dados no banco de dados, e não no banco de dados mestre, permite que o proprietário de cada banco de dados tenha mais controle sobre seu banco de dados, sem conceder a eles a permissão **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="5e637-199">Maintaining database settings in the database, instead of in the master database, lets each database owner have more control over their database, without giving the database owner **sysadmin** permission.</span></span>  
  
##  <a name="limitations"></a><a name="Limitations"></a> <span data-ttu-id="5e637-200">Limitações</span><span class="sxs-lookup"><span data-stu-id="5e637-200">Limitations</span></span>  
 <span data-ttu-id="5e637-201">Bancos de dados parcialmente independentes não permitem os recursos a seguir.</span><span class="sxs-lookup"><span data-stu-id="5e637-201">Partially contained databases do not allow the following features.</span></span>  
  
-   <span data-ttu-id="5e637-202">Os bancos de dados parcialmente independentes não podem usar replicação, Change Data Capture ou controle de alterações.</span><span class="sxs-lookup"><span data-stu-id="5e637-202">Partially contained databases cannot use replication, change data capture, or change tracking.</span></span>  
  
-   <span data-ttu-id="5e637-203">Procedimentos numerados</span><span class="sxs-lookup"><span data-stu-id="5e637-203">Numbered procedures</span></span>  
  
-   <span data-ttu-id="5e637-204">Objetos associados a esquema que dependem de funções internas com alterações de ordenação</span><span class="sxs-lookup"><span data-stu-id="5e637-204">Schema-bound objects that depend on built-in functions with collation changes</span></span>  
  
-   <span data-ttu-id="5e637-205">Alteração de associação resultante de alterações de ordenação, inclusive referências a objetos, colunas, símbolos ou tipos.</span><span class="sxs-lookup"><span data-stu-id="5e637-205">Binding change resulting from collation changes, including references to objects, columns, symbols, or types.</span></span>  
  
-   <span data-ttu-id="5e637-206">Replicação, captura de dados de alteração e controle de alterações.</span><span class="sxs-lookup"><span data-stu-id="5e637-206">Replication, change data capture, and change tracking.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="5e637-207">Os procedimentos armazenados temporários são permitidos no momento.</span><span class="sxs-lookup"><span data-stu-id="5e637-207">Temporary stored procedures are currently permitted.</span></span> <span data-ttu-id="5e637-208">Como os procedimentos armazenados temporários violam a retenção, não se espera que eles tenham suporte em versões futuras de bancos de dados independentes.</span><span class="sxs-lookup"><span data-stu-id="5e637-208">Because temporary stored procedures breach containment, they are not expected to be supported in future versions of contained database.</span></span>  
  
##  <a name="identifying-database-containment"></a><a name="Identifying"></a> <span data-ttu-id="5e637-209">Identificando a contenção do banco de dados</span><span class="sxs-lookup"><span data-stu-id="5e637-209">Identifying Database Containment</span></span>  
 <span data-ttu-id="5e637-210">Há duas ferramentas para facilitar a identificação do status de contenção do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-210">There are two tools to help identify the containment status of the database.</span></span> <span data-ttu-id="5e637-211">O [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) é uma exibição que mostra todas as entidades potencialmente não contidas no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-211">The [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) is a view that shows all the potentially uncontained entities in the database.</span></span> <span data-ttu-id="5e637-212">O evento database_uncontained_usage ocorre quando qualquer entidade não contida real é identificada em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5e637-212">The database_uncontained_usage event occurs when any actual uncontained entity is identified at run time.</span></span>  
  
### <a name="sysdm_db_uncontained_entities"></a><span data-ttu-id="5e637-213">sys.dm_db_uncontained_entities</span><span class="sxs-lookup"><span data-stu-id="5e637-213">sys.dm_db_uncontained_entities</span></span>  
 <span data-ttu-id="5e637-214">Esta exibição mostra as entidades do banco de dados que têm potencial para não serem contidas, como aquelas que cruzam o limite de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-214">This view shows any entities in the database that have the potential to be uncontained, such as those that cross-the database boundary.</span></span> <span data-ttu-id="5e637-215">Isso inclui as entidades de usuário que possam usar objetos fora do modelo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5e637-215">This includes those user entities that may use objects outside the database model.</span></span> <span data-ttu-id="5e637-216">Porém, como a contenção de algumas entidades (por exemplo, as que usam SQL dinâmico) não pode ser determinada até o tempo de execução, a exibição poderá mostrar algumas entidades que não estão contidas realmente.</span><span class="sxs-lookup"><span data-stu-id="5e637-216">However, because the containment of some entities (for example, those using dynamic SQL) cannot be determined until run time, the view may show some entities that are not actually uncontained.</span></span> <span data-ttu-id="5e637-217">Para obter mais informações, consulte [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="5e637-217">For more information, see [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span></span>  
  
### <a name="database_uncontained_usage-event"></a><span data-ttu-id="5e637-218">evento database_uncontained_usage</span><span class="sxs-lookup"><span data-stu-id="5e637-218">database_uncontained_usage event</span></span>  
 <span data-ttu-id="5e637-219">Esse XEvent ocorre sempre que uma entidade não contida é identificada no momento de execução.</span><span class="sxs-lookup"><span data-stu-id="5e637-219">This XEvent occurs whenever an uncontained entity is identified at run time.</span></span> <span data-ttu-id="5e637-220">Isso inclui entidades originadas no código de cliente.</span><span class="sxs-lookup"><span data-stu-id="5e637-220">This includes entities originated in client code.</span></span> <span data-ttu-id="5e637-221">Esse XEvent ocorrerá somente para entidades reais não contidas.</span><span class="sxs-lookup"><span data-stu-id="5e637-221">This XEvent will occur only for actual uncontained entities.</span></span> <span data-ttu-id="5e637-222">No entanto, o evento ocorre somente no momento de execução.</span><span class="sxs-lookup"><span data-stu-id="5e637-222">However, the event only occurs at run time.</span></span> <span data-ttu-id="5e637-223">Portanto, qualquer entidade de usuário não contida não executada não será identificada por esse XEvent.</span><span class="sxs-lookup"><span data-stu-id="5e637-223">Therefore, any uncontained user entities you have not run will not be identified by this XEvent</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="5e637-224">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="5e637-224">Related Content</span></span>  
 [<span data-ttu-id="5e637-225">Recursos modificados &#40;Banco de Dados Contidos&#41;</span><span class="sxs-lookup"><span data-stu-id="5e637-225">Modified Features &#40;Contained Database&#41;</span></span>](modified-features-contained-database.md)  
  
 [<span data-ttu-id="5e637-226">Ordenações de banco de dados independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-226">Contained Database Collations</span></span>](contained-database-collations.md)  
  
 [<span data-ttu-id="5e637-227">Práticas recomendadas de segurança com bancos de dados independentes</span><span class="sxs-lookup"><span data-stu-id="5e637-227">Security Best Practices with Contained Databases</span></span>](security-best-practices-with-contained-databases.md)  
  
 [<span data-ttu-id="5e637-228">Migrar para um banco de dados parcialmente independente</span><span class="sxs-lookup"><span data-stu-id="5e637-228">Migrate to a Partially Contained Database</span></span>](migrate-to-a-partially-contained-database.md)  
  
  
