---
title: Criar e gerenciar índices de texto completo | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text indexes [SQL Server], about
ms.assetid: f8a98486-5438-44a8-b454-9e6ecbc74f83
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 603b5e6b929259dc8b1408c0c2a1afab383446e1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87680884"
---
# <a name="create-and-manage-full-text-indexes"></a><span data-ttu-id="5392f-102">Criar e gerenciar índices de texto completo</span><span class="sxs-lookup"><span data-stu-id="5392f-102">Create and Manage Full-Text Indexes</span></span>
  <span data-ttu-id="5392f-103">As informações contidas em índices de texto completo são usadas pelo Mecanismo de Texto Completo para compilar consultas de texto completo que podem procurar determinadas palavras ou combinações de palavras rapidamente em uma tabela.</span><span class="sxs-lookup"><span data-stu-id="5392f-103">The information in full-text indexes is used by the Full-Text Engine to compile full-text queries that can quickly search a table for particular words or combinations of words.</span></span> <span data-ttu-id="5392f-104">Um índice de texto completo armazena informações sobre palavras importantes e sua localização em uma ou mais colunas de uma tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="5392f-104">A full-text index stores information about significant words and their location within one or more columns of a database table.</span></span> <span data-ttu-id="5392f-105">Um índice de texto completo consiste em um tipo especial de índice funcional com base em token que é criado e mantido pelo Mecanismo de Texto Completo do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5392f-105">A full-text index is a special type of token-based functional index that is built and maintained by the Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5392f-106">O processo de criação de um índice de texto completo é diferente da criação de outros tipos de índices.</span><span class="sxs-lookup"><span data-stu-id="5392f-106">The process of building a full-text index differs from building other types of indexes.</span></span> <span data-ttu-id="5392f-107">Em vez de criar uma estrutura de árvore B com base em um valor armazenado em uma linha específica, o Mecanismo de Texto Completo cria uma estrutura de índice compactada, empilhada e invertida com base em tokens individuais do texto que está sendo indexado.</span><span class="sxs-lookup"><span data-stu-id="5392f-107">Instead of constructing a B-tree structure based on a value stored in a particular row, the Full-Text Engine builds an inverted, stacked, compressed index structure based on individual tokens from the text being indexed.</span></span>  <span data-ttu-id="5392f-108">O tamanho de um índice de texto completo é limitado apenas pelos recursos de memória disponíveis do computador no qual a instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] está sendo executada.</span><span class="sxs-lookup"><span data-stu-id="5392f-108">The size of a full-text index is limited only by the available memory resources of the computer on which the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span>  
  
 <span data-ttu-id="5392f-109">A partir do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], os índices de texto completo são integrados ao Mecanismo de Banco de Dados e deixam de residir no sistema de arquivos, como ocorria nas versões anteriores do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5392f-109">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the full-text indexes are integrated with the Database Engine, instead of residing in the file system as in previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5392f-110">Em um novo banco de dados, agora o catálogo de texto completo é um objeto virtual que não pertence a nenhum grupo de arquivos; ele é simplesmente um conceito lógico que faz referência a um grupo dos índices de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-110">For a new database, the full-text catalog is now a virtual object that does not belong to any filegroup; it is merely a logical concept that refers to a group of the full-text indexes.</span></span> <span data-ttu-id="5392f-111">Porém, observe que, durante a atualização de um banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , para qualquer catálogo de texto completo que contenha arquivos de dados, é criado um novo grupo de arquivos. Para obter mais informações, veja [Atualizar pesquisa de texto completo](upgrade-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="5392f-111">Note, however, that during upgrade of a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, any full-text catalog that contains data files, a new filegroup is created; for more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5392f-112">No [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] e em versões posteriores, o Mecanismo de Texto Completo reside no processo do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e não em um serviço separado.</span><span class="sxs-lookup"><span data-stu-id="5392f-112">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, the Full-Text Engine resides in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process, rather than in a separate service.</span></span> <span data-ttu-id="5392f-113">A integração do Mecanismo de Texto Completo ao Mecanismo de Banco de Dados melhora a capacidade de gerenciamento de texto completo, a otimização de consultas mistas e o desempenho como um todo.</span><span class="sxs-lookup"><span data-stu-id="5392f-113">Integrating the Full-Text Engine into the Database Engine improves full-text manageability, optimization of mixed query, and overall performance.</span></span>  
  
 <span data-ttu-id="5392f-114">Só é permitido um índice de texto completo por tabela.</span><span class="sxs-lookup"><span data-stu-id="5392f-114">Only one full-text index is allowed per table.</span></span> <span data-ttu-id="5392f-115">Para que um índice de texto completo seja criado em uma tabela, a tabela deve ter uma única coluna não nula exclusiva.</span><span class="sxs-lookup"><span data-stu-id="5392f-115">For a full-text index to be created on a table, the table must have a single, unique nonnull column.</span></span> <span data-ttu-id="5392f-116">Você pode criar um índice de texto completo em colunas do tipo `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary` e `varbinary(max)`, que podem ser indexadas para pesquisa de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-116">You can build a full-text index on columns of type `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary`, and `varbinary(max)` can be indexed for full-text search.</span></span> <span data-ttu-id="5392f-117">A criação de um índice de texto completo em uma coluna cujo tipo de dados é `varbinary`, `varbinary(max)`, `image` ou `xml` requer que você especifique uma coluna de tipo.</span><span class="sxs-lookup"><span data-stu-id="5392f-117">Creating a full-text index on a column whose data type is  `varbinary`, `varbinary(max)`, `image`, or `xml` requires that you specify a type column.</span></span> <span data-ttu-id="5392f-118">Uma *coluna de tipo* consiste em uma coluna de tabela em que você armazena a extensão de arquivo (.doc, .pdf, .xls, etc.) do documento em cada linha.</span><span class="sxs-lookup"><span data-stu-id="5392f-118">A *type column* is a table column in which you store the file extension (.doc, .pdf, .xls, and so forth) of the document in each row.</span></span>  
  
 <span data-ttu-id="5392f-119">O processo de criar e manter um índice de texto completo é chamado de *população* (também conhecido como *rastreamento*).</span><span class="sxs-lookup"><span data-stu-id="5392f-119">The process of creating and maintaining a full-text index is called a *population* (also known as a *crawl*).</span></span> <span data-ttu-id="5392f-120">Existem três tipos de população de índice de texto completo: população completa, população com base em controle de alterações e população incremental com base em carimbo de data e hora.</span><span class="sxs-lookup"><span data-stu-id="5392f-120">There are three types of full-text index population: full population, change tracking-based population, and incremental timestamp-based population.</span></span> <span data-ttu-id="5392f-121">Para obter mais informações, veja [Popular índices de texto completo](populate-full-text-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="5392f-121">For more information, see [Populate Full-Text Indexes](populate-full-text-indexes.md).</span></span>  
  
##  <a name="common-tasks"></a><a name="tasks"></a><span data-ttu-id="5392f-122">Tarefas comuns</span><span class="sxs-lookup"><span data-stu-id="5392f-122">Common Tasks</span></span>  
 <span data-ttu-id="5392f-123">**Para criar um índice de texto completo**</span><span class="sxs-lookup"><span data-stu-id="5392f-123">**To create a full-text index**</span></span>  
  
-   [<span data-ttu-id="5392f-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="5392f-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-fulltext-index-transact-sql)  
  
 <span data-ttu-id="5392f-125">**Para alterar um índice de texto completo**</span><span class="sxs-lookup"><span data-stu-id="5392f-125">**To alter a full-text index**</span></span>  
  
-   [<span data-ttu-id="5392f-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="5392f-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-fulltext-index-transact-sql)  
  
 <span data-ttu-id="5392f-127">**Para descartar um índice de texto completo**</span><span class="sxs-lookup"><span data-stu-id="5392f-127">**To drop a full-text index**</span></span>  
  
-   [<span data-ttu-id="5392f-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="5392f-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-fulltext-index-transact-sql)  
  
 [<span data-ttu-id="5392f-129">Neste tópico</span><span class="sxs-lookup"><span data-stu-id="5392f-129">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-structure"></a><a name="structure"></a><span data-ttu-id="5392f-130">Estrutura do índice de texto completo</span><span class="sxs-lookup"><span data-stu-id="5392f-130">Full-Text Index Structure</span></span>  
 <span data-ttu-id="5392f-131">Um bom conhecimento da estrutura do índice de texto completo ajudará você a entender como funciona o Mecanismo de Texto Completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-131">A good understanding of the structure of a full-text index will help you understand how the Full-Text Engine works.</span></span> <span data-ttu-id="5392f-132">Este tópico usa o trecho a seguir da tabela **Document** em [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] como tabela de exemplo.</span><span class="sxs-lookup"><span data-stu-id="5392f-132">This topic uses the following excerpt of the **Document** table in [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] as an example table.</span></span> <span data-ttu-id="5392f-133">Esse trecho mostra apenas duas colunas, **DocumentID** e **Title** , e três linhas da tabela.</span><span class="sxs-lookup"><span data-stu-id="5392f-133">This excerpt shows only two columns, the **DocumentID** column and the **Title** column, and three rows from the table.</span></span>  
  
 <span data-ttu-id="5392f-134">Para este exemplo, assumiremos que um índice de texto completo foi criado na coluna **Title** .</span><span class="sxs-lookup"><span data-stu-id="5392f-134">For this example, we will assume that a full-text index has been created on the **Title** column.</span></span>  
  
|<span data-ttu-id="5392f-135">DocumentID</span><span class="sxs-lookup"><span data-stu-id="5392f-135">DocumentID</span></span>|<span data-ttu-id="5392f-136">Title</span><span class="sxs-lookup"><span data-stu-id="5392f-136">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="5392f-137">1</span><span class="sxs-lookup"><span data-stu-id="5392f-137">1</span></span>|<span data-ttu-id="5392f-138">Crank Arm and Tire Maintenance</span><span class="sxs-lookup"><span data-stu-id="5392f-138">Crank Arm and Tire Maintenance</span></span>|  
|<span data-ttu-id="5392f-139">2</span><span class="sxs-lookup"><span data-stu-id="5392f-139">2</span></span>|<span data-ttu-id="5392f-140">Front Reflector Bracket and Reflector Assembly 3</span><span class="sxs-lookup"><span data-stu-id="5392f-140">Front Reflector Bracket and Reflector Assembly 3</span></span>|  
|<span data-ttu-id="5392f-141">3</span><span class="sxs-lookup"><span data-stu-id="5392f-141">3</span></span>|<span data-ttu-id="5392f-142">Front Reflector Bracket Installation</span><span class="sxs-lookup"><span data-stu-id="5392f-142">Front Reflector Bracket Installation</span></span>|  
  
 <span data-ttu-id="5392f-143">Por exemplo, a tabela a seguir, que mostra o Fragment 1, descreve o conteúdo do índice de texto completo criado na coluna **Title** da tabela **Document** .</span><span class="sxs-lookup"><span data-stu-id="5392f-143">For example, the following table, which shows Fragment 1, depicts the contents of the full-text index created on the **Title** column of the **Document** table.</span></span> <span data-ttu-id="5392f-144">Os índices de texto completo contêm mais informações do que é apresentado nessa tabela.</span><span class="sxs-lookup"><span data-stu-id="5392f-144">Full-text indexes contain more information than is presented in this table.</span></span> <span data-ttu-id="5392f-145">A tabela é uma representação lógica de um índice de texto completo e é fornecida somente para fins de demonstração.</span><span class="sxs-lookup"><span data-stu-id="5392f-145">The table is a logical representation of a full-text index and is provided for demonstration purposes only.</span></span> <span data-ttu-id="5392f-146">As linhas são armazenadas em um formato compactado para otimizar o uso do disco.</span><span class="sxs-lookup"><span data-stu-id="5392f-146">The rows are stored in a compressed format to optimize disk usage.</span></span>  
  
 <span data-ttu-id="5392f-147">Observe que os dados foram invertidos em relação aos documentos originais.</span><span class="sxs-lookup"><span data-stu-id="5392f-147">Notice that the data has been inverted from the original documents.</span></span> <span data-ttu-id="5392f-148">A inversão ocorre porque as palavras-chave são mapeadas para as IDs de documento.</span><span class="sxs-lookup"><span data-stu-id="5392f-148">Inversion occurs because the keywords are mapped to the document IDs.</span></span> <span data-ttu-id="5392f-149">Por esse motivo, geralmente um índice de texto completo é chamado de índice invertido.</span><span class="sxs-lookup"><span data-stu-id="5392f-149">For this reason, a full-text index is often referred to as an inverted index.</span></span>  
  
 <span data-ttu-id="5392f-150">Observe também que a palavra-chave "and" foi removida do índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-150">Also notice that the keyword "and" has been removed from the full-text index.</span></span> <span data-ttu-id="5392f-151">Isso ocorre porque "and" é uma palavra irrelevante e remover essas palavras de um índice de texto completo pode levar a economias consideráveis do espaço em disco, melhorando o desempenho de consulta.</span><span class="sxs-lookup"><span data-stu-id="5392f-151">This is done because "and" is a stopword, and removing stopwords from a full-text index can lead to substantial savings in disk space thereby improving query performance.</span></span> <span data-ttu-id="5392f-152">Para obter mais informações sobre palavras irrelevantes, veja [Configurar e gerenciar palavras irrelevantes (stop words) e listas de palavras irrelevantes para pesquisa de texto completo](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="5392f-152">For more information about stopwords, see [Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span></span>  
  
 <span data-ttu-id="5392f-153">**Fragmento 1**</span><span class="sxs-lookup"><span data-stu-id="5392f-153">**Fragment 1**</span></span>  
  
|<span data-ttu-id="5392f-154">Palavra-chave</span><span class="sxs-lookup"><span data-stu-id="5392f-154">Keyword</span></span>|<span data-ttu-id="5392f-155">ColId</span><span class="sxs-lookup"><span data-stu-id="5392f-155">ColId</span></span>|<span data-ttu-id="5392f-156">DocId</span><span class="sxs-lookup"><span data-stu-id="5392f-156">DocId</span></span>|<span data-ttu-id="5392f-157">Ocorrência</span><span class="sxs-lookup"><span data-stu-id="5392f-157">Occurrence</span></span>|  
|-------------|-----------|-----------|----------------|  
|<span data-ttu-id="5392f-158">Crank</span><span class="sxs-lookup"><span data-stu-id="5392f-158">Crank</span></span>|<span data-ttu-id="5392f-159">1</span><span class="sxs-lookup"><span data-stu-id="5392f-159">1</span></span>|<span data-ttu-id="5392f-160">1</span><span class="sxs-lookup"><span data-stu-id="5392f-160">1</span></span>|<span data-ttu-id="5392f-161">1</span><span class="sxs-lookup"><span data-stu-id="5392f-161">1</span></span>|  
|<span data-ttu-id="5392f-162">Arm</span><span class="sxs-lookup"><span data-stu-id="5392f-162">Arm</span></span>|<span data-ttu-id="5392f-163">1</span><span class="sxs-lookup"><span data-stu-id="5392f-163">1</span></span>|<span data-ttu-id="5392f-164">1</span><span class="sxs-lookup"><span data-stu-id="5392f-164">1</span></span>|<span data-ttu-id="5392f-165">2</span><span class="sxs-lookup"><span data-stu-id="5392f-165">2</span></span>|  
|<span data-ttu-id="5392f-166">Tire</span><span class="sxs-lookup"><span data-stu-id="5392f-166">Tire</span></span>|<span data-ttu-id="5392f-167">1</span><span class="sxs-lookup"><span data-stu-id="5392f-167">1</span></span>|<span data-ttu-id="5392f-168">1</span><span class="sxs-lookup"><span data-stu-id="5392f-168">1</span></span>|<span data-ttu-id="5392f-169">4</span><span class="sxs-lookup"><span data-stu-id="5392f-169">4</span></span>|  
|<span data-ttu-id="5392f-170">Manutenção</span><span class="sxs-lookup"><span data-stu-id="5392f-170">Maintenance</span></span>|<span data-ttu-id="5392f-171">1</span><span class="sxs-lookup"><span data-stu-id="5392f-171">1</span></span>|<span data-ttu-id="5392f-172">1</span><span class="sxs-lookup"><span data-stu-id="5392f-172">1</span></span>|<span data-ttu-id="5392f-173">5</span><span class="sxs-lookup"><span data-stu-id="5392f-173">5</span></span>|  
|<span data-ttu-id="5392f-174">Front</span><span class="sxs-lookup"><span data-stu-id="5392f-174">Front</span></span>|<span data-ttu-id="5392f-175">1</span><span class="sxs-lookup"><span data-stu-id="5392f-175">1</span></span>|<span data-ttu-id="5392f-176">2</span><span class="sxs-lookup"><span data-stu-id="5392f-176">2</span></span>|<span data-ttu-id="5392f-177">1</span><span class="sxs-lookup"><span data-stu-id="5392f-177">1</span></span>|  
|<span data-ttu-id="5392f-178">Front</span><span class="sxs-lookup"><span data-stu-id="5392f-178">Front</span></span>|<span data-ttu-id="5392f-179">1</span><span class="sxs-lookup"><span data-stu-id="5392f-179">1</span></span>|<span data-ttu-id="5392f-180">3</span><span class="sxs-lookup"><span data-stu-id="5392f-180">3</span></span>|<span data-ttu-id="5392f-181">1</span><span class="sxs-lookup"><span data-stu-id="5392f-181">1</span></span>|  
|<span data-ttu-id="5392f-182">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-182">Reflector</span></span>|<span data-ttu-id="5392f-183">1</span><span class="sxs-lookup"><span data-stu-id="5392f-183">1</span></span>|<span data-ttu-id="5392f-184">2</span><span class="sxs-lookup"><span data-stu-id="5392f-184">2</span></span>|<span data-ttu-id="5392f-185">2</span><span class="sxs-lookup"><span data-stu-id="5392f-185">2</span></span>|  
|<span data-ttu-id="5392f-186">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-186">Reflector</span></span>|<span data-ttu-id="5392f-187">1</span><span class="sxs-lookup"><span data-stu-id="5392f-187">1</span></span>|<span data-ttu-id="5392f-188">2</span><span class="sxs-lookup"><span data-stu-id="5392f-188">2</span></span>|<span data-ttu-id="5392f-189">5</span><span class="sxs-lookup"><span data-stu-id="5392f-189">5</span></span>|  
|<span data-ttu-id="5392f-190">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-190">Reflector</span></span>|<span data-ttu-id="5392f-191">1</span><span class="sxs-lookup"><span data-stu-id="5392f-191">1</span></span>|<span data-ttu-id="5392f-192">3</span><span class="sxs-lookup"><span data-stu-id="5392f-192">3</span></span>|<span data-ttu-id="5392f-193">2</span><span class="sxs-lookup"><span data-stu-id="5392f-193">2</span></span>|  
|<span data-ttu-id="5392f-194">Bracket</span><span class="sxs-lookup"><span data-stu-id="5392f-194">Bracket</span></span>|<span data-ttu-id="5392f-195">1</span><span class="sxs-lookup"><span data-stu-id="5392f-195">1</span></span>|<span data-ttu-id="5392f-196">2</span><span class="sxs-lookup"><span data-stu-id="5392f-196">2</span></span>|<span data-ttu-id="5392f-197">3</span><span class="sxs-lookup"><span data-stu-id="5392f-197">3</span></span>|  
|<span data-ttu-id="5392f-198">Bracket</span><span class="sxs-lookup"><span data-stu-id="5392f-198">Bracket</span></span>|<span data-ttu-id="5392f-199">1</span><span class="sxs-lookup"><span data-stu-id="5392f-199">1</span></span>|<span data-ttu-id="5392f-200">3</span><span class="sxs-lookup"><span data-stu-id="5392f-200">3</span></span>|<span data-ttu-id="5392f-201">3</span><span class="sxs-lookup"><span data-stu-id="5392f-201">3</span></span>|  
|<span data-ttu-id="5392f-202">Assembly</span><span class="sxs-lookup"><span data-stu-id="5392f-202">Assembly</span></span>|<span data-ttu-id="5392f-203">1</span><span class="sxs-lookup"><span data-stu-id="5392f-203">1</span></span>|<span data-ttu-id="5392f-204">2</span><span class="sxs-lookup"><span data-stu-id="5392f-204">2</span></span>|<span data-ttu-id="5392f-205">6</span><span class="sxs-lookup"><span data-stu-id="5392f-205">6</span></span>|  
|<span data-ttu-id="5392f-206">3</span><span class="sxs-lookup"><span data-stu-id="5392f-206">3</span></span>|<span data-ttu-id="5392f-207">1</span><span class="sxs-lookup"><span data-stu-id="5392f-207">1</span></span>|<span data-ttu-id="5392f-208">2</span><span class="sxs-lookup"><span data-stu-id="5392f-208">2</span></span>|<span data-ttu-id="5392f-209">7</span><span class="sxs-lookup"><span data-stu-id="5392f-209">7</span></span>|  
|<span data-ttu-id="5392f-210">Instalação</span><span class="sxs-lookup"><span data-stu-id="5392f-210">Installation</span></span>|<span data-ttu-id="5392f-211">1</span><span class="sxs-lookup"><span data-stu-id="5392f-211">1</span></span>|<span data-ttu-id="5392f-212">3</span><span class="sxs-lookup"><span data-stu-id="5392f-212">3</span></span>|<span data-ttu-id="5392f-213">4</span><span class="sxs-lookup"><span data-stu-id="5392f-213">4</span></span>|  
  
 <span data-ttu-id="5392f-214">A coluna **Keyword** contém uma representação de um único token extraído no momento da indexação.</span><span class="sxs-lookup"><span data-stu-id="5392f-214">The **Keyword** column contains a representation of a single token extracted at indexing time.</span></span> <span data-ttu-id="5392f-215">Os separadores de palavras determinam o que compõe um token.</span><span class="sxs-lookup"><span data-stu-id="5392f-215">Word breakers determine what makes up a token.</span></span>  
  
 <span data-ttu-id="5392f-216">A coluna **ColId** contém um valor que corresponde a uma coluna específica indexada com texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-216">The **ColId** column contains a value that corresponds to a particular column that is full-text indexed.</span></span>  
  
 <span data-ttu-id="5392f-217">A `DocId` coluna contém valores para um inteiro de oito bytes que mapeia para um valor de chave de texto completo específico em uma tabela indexada de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-217">The `DocId` column contains values for an eight-byte integer that maps to a particular full-text key value in a full-text indexed table.</span></span> <span data-ttu-id="5392f-218">Esse mapeamento é necessário quando a chave de texto completo não é um tipo de dados integer.</span><span class="sxs-lookup"><span data-stu-id="5392f-218">This mapping is necessary when the full-text key is not an integer data type.</span></span> <span data-ttu-id="5392f-219">Nesses casos, os mapeamentos entre valores de chave de texto completo e `DocId` valores são mantidos em uma tabela separada chamada de tabela de mapeamento DocId.</span><span class="sxs-lookup"><span data-stu-id="5392f-219">In such cases, mappings between full-text key values and `DocId` values are maintained in a separate table called the DocId Mapping table.</span></span> <span data-ttu-id="5392f-220">Para examinar esses mapeamentos, use o procedimento armazenado do sistema [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="5392f-220">To query for these mappings use the [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) system stored procedure.</span></span> <span data-ttu-id="5392f-221">Para atender a um critério de pesquisa, os valores de DocId da tabela acima precisam ser unidos à tabela de mapeamento DocId para recuperar linhas da tabela base que está sendo consultada.</span><span class="sxs-lookup"><span data-stu-id="5392f-221">To satisfy a search condition, DocId values from the above table need to be joined with the DocId Mapping table to retrieve rows from the base table being queried.</span></span> <span data-ttu-id="5392f-222">Se o valor da chave de texto completo da tabela base for do tipo inteiro, o valor funcionará diretamente como DocId, e nenhum mapeamento será necessário.</span><span class="sxs-lookup"><span data-stu-id="5392f-222">If the full-text key value of the base table is an integer type, the value directly serves as the DocId and no mapping is necessary.</span></span> <span data-ttu-id="5392f-223">Por isso, o uso de valores de chave de texto completo pode ajudar a otimizar consultas de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-223">Therefore, using integer full-text key values can help optimize full-text queries.</span></span>  
  
 <span data-ttu-id="5392f-224">A coluna **Occurrence** contém um valor inteiro.</span><span class="sxs-lookup"><span data-stu-id="5392f-224">The **Occurrence** column contains an integer value.</span></span> <span data-ttu-id="5392f-225">Para cada valor de DocId, há uma lista de valores de ocorrência que correspondem aos deslocamentos relativos de palavras de uma palavra-chave específica dentro de DocId.</span><span class="sxs-lookup"><span data-stu-id="5392f-225">For each DocId value, there is a list of occurrence values that correspond to the relative word offsets of the particular keyword within that DocId.</span></span> <span data-ttu-id="5392f-226">Os valores de ocorrência são úteis para definir as correspondências de frase ou de proximidade, por exemplo, as frases têm valores de ocorrência numericamente adjacentes.</span><span class="sxs-lookup"><span data-stu-id="5392f-226">Occurrence values are useful in determining phrase or proximity matches, for example, phrases have numerically adjacent occurrence values.</span></span> <span data-ttu-id="5392f-227">Eles também são úteis para calcular pontuações de relevância; por exemplo, o número de ocorrências de uma palavra-chave em DocId pode ser usado na pontuação.</span><span class="sxs-lookup"><span data-stu-id="5392f-227">They are also useful in computing relevance scores; for example, the number of occurrences of a keyword in a DocId may be used in scoring.</span></span>  
  
 [<span data-ttu-id="5392f-228">Neste tópico</span><span class="sxs-lookup"><span data-stu-id="5392f-228">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-fragments"></a><a name="fragments"></a><span data-ttu-id="5392f-229">Fragmentos de índice de texto completo</span><span class="sxs-lookup"><span data-stu-id="5392f-229">Full-Text Index Fragments</span></span>  
 <span data-ttu-id="5392f-230">O índice de texto completo lógico normalmente é dividido entre várias tabelas internas.</span><span class="sxs-lookup"><span data-stu-id="5392f-230">The logical full-text index is usually split across multiple internal tables.</span></span> <span data-ttu-id="5392f-231">Cada tabela interna é chamada de fragmento de índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-231">Each internal table is called a full-text index fragment.</span></span> <span data-ttu-id="5392f-232">Alguns desses fragmentos podem conter dados mais novos do que outros.</span><span class="sxs-lookup"><span data-stu-id="5392f-232">Some of these fragments might contain newer data than others.</span></span> <span data-ttu-id="5392f-233">Por exemplo, se um usuário atualiza a linha a seguir cujo DocId é 3 e a tabela tem controle de alterações automático, é criado um novo fragmento.</span><span class="sxs-lookup"><span data-stu-id="5392f-233">For example, if a user updates the following row whose DocId is 3 and the table is auto change-tracked, a new fragment is created.</span></span>  
  
|<span data-ttu-id="5392f-234">DocumentID</span><span class="sxs-lookup"><span data-stu-id="5392f-234">DocumentID</span></span>|<span data-ttu-id="5392f-235">Title</span><span class="sxs-lookup"><span data-stu-id="5392f-235">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="5392f-236">3</span><span class="sxs-lookup"><span data-stu-id="5392f-236">3</span></span>|<span data-ttu-id="5392f-237">Refletor traseiro</span><span class="sxs-lookup"><span data-stu-id="5392f-237">Rear Reflector</span></span>|  
  
 <span data-ttu-id="5392f-238">No exemplo a seguir, que mostra o Fragmento 2, o fragmento contém dados mais recentes sobre DocId 3 em comparação com Fragmento 1.</span><span class="sxs-lookup"><span data-stu-id="5392f-238">In the following example, which shows Fragment 2, the fragment contains newer data about DocId 3 compared to Fragment 1.</span></span> <span data-ttu-id="5392f-239">Portanto, quando o usuário procura por “Refletor Traseiro", os dados de Fragmento 2 são usados para DocId 3.</span><span class="sxs-lookup"><span data-stu-id="5392f-239">Therefore, when the user queries for "Rear Reflector" the data from Fragment 2 is used for DocId 3.</span></span> <span data-ttu-id="5392f-240">Cada fragmento é marcado com um carimbo de data/hora da criação, que pode ser consultado usando a exibição de catálogo [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="5392f-240">Each fragment is marked with a creation timestamp that can be queried by using the [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) catalog view.</span></span>  
  
 <span data-ttu-id="5392f-241">**Fragmento 2**</span><span class="sxs-lookup"><span data-stu-id="5392f-241">**Fragment 2**</span></span>  
  
|<span data-ttu-id="5392f-242">Palavra-chave</span><span class="sxs-lookup"><span data-stu-id="5392f-242">Keyword</span></span>|<span data-ttu-id="5392f-243">ColId</span><span class="sxs-lookup"><span data-stu-id="5392f-243">ColId</span></span>|<span data-ttu-id="5392f-244">DocId</span><span class="sxs-lookup"><span data-stu-id="5392f-244">DocId</span></span>|<span data-ttu-id="5392f-245">Occ</span><span class="sxs-lookup"><span data-stu-id="5392f-245">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="5392f-246">Traseiro</span><span class="sxs-lookup"><span data-stu-id="5392f-246">Rear</span></span>|<span data-ttu-id="5392f-247">1</span><span class="sxs-lookup"><span data-stu-id="5392f-247">1</span></span>|<span data-ttu-id="5392f-248">3</span><span class="sxs-lookup"><span data-stu-id="5392f-248">3</span></span>|<span data-ttu-id="5392f-249">1</span><span class="sxs-lookup"><span data-stu-id="5392f-249">1</span></span>|  
|<span data-ttu-id="5392f-250">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-250">Reflector</span></span>|<span data-ttu-id="5392f-251">1</span><span class="sxs-lookup"><span data-stu-id="5392f-251">1</span></span>|<span data-ttu-id="5392f-252">3</span><span class="sxs-lookup"><span data-stu-id="5392f-252">3</span></span>|<span data-ttu-id="5392f-253">2</span><span class="sxs-lookup"><span data-stu-id="5392f-253">2</span></span>|  
  
 <span data-ttu-id="5392f-254">Como pode ser visto no Fragmento 2, as consultas de texto completo precisam examinar cada fragmento internamente e descartar entradas mais antigas.</span><span class="sxs-lookup"><span data-stu-id="5392f-254">As can be seen from Fragment 2, full-text queries need to query each fragment internally and discard older entries.</span></span> <span data-ttu-id="5392f-255">Por isso, um número excessivo de fragmentos de índice de texto completo no índice de texto completo pode levar a uma diminuição considerável do desempenho de consulta.</span><span class="sxs-lookup"><span data-stu-id="5392f-255">Therefore, too many full-text index fragments in the full-text index can lead to substantial degradation in query performance.</span></span> <span data-ttu-id="5392f-256">Para reduzir o número de fragmentos, reorganize o catálogo de texto completo usando a opção REORGANIZE da instrução [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5392f-256">To reduce the number of fragments, reorganize the fulltext catalog by using the REORGANIZE option of the [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="5392f-257">Essa instrução executa uma *mesclagem mestra*que mescla os fragmentos em um único fragmento maior e remove todas as entradas obsoletas do índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="5392f-257">This statement performs a *master merge*, which merges the fragments into a single larger fragment and removes all obsolete entries from the full-text index.</span></span>  
  
 <span data-ttu-id="5392f-258">Depois de reorganizado, o índice de exemplo conterá as linhas seguintes:</span><span class="sxs-lookup"><span data-stu-id="5392f-258">After being reorganized, the example index would contain the following rows:</span></span>  
  
|<span data-ttu-id="5392f-259">Palavra-chave</span><span class="sxs-lookup"><span data-stu-id="5392f-259">Keyword</span></span>|<span data-ttu-id="5392f-260">ColId</span><span class="sxs-lookup"><span data-stu-id="5392f-260">ColId</span></span>|<span data-ttu-id="5392f-261">DocId</span><span class="sxs-lookup"><span data-stu-id="5392f-261">DocId</span></span>|<span data-ttu-id="5392f-262">Occ</span><span class="sxs-lookup"><span data-stu-id="5392f-262">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="5392f-263">Crank</span><span class="sxs-lookup"><span data-stu-id="5392f-263">Crank</span></span>|<span data-ttu-id="5392f-264">1</span><span class="sxs-lookup"><span data-stu-id="5392f-264">1</span></span>|<span data-ttu-id="5392f-265">1</span><span class="sxs-lookup"><span data-stu-id="5392f-265">1</span></span>|<span data-ttu-id="5392f-266">1</span><span class="sxs-lookup"><span data-stu-id="5392f-266">1</span></span>|  
|<span data-ttu-id="5392f-267">Arm</span><span class="sxs-lookup"><span data-stu-id="5392f-267">Arm</span></span>|<span data-ttu-id="5392f-268">1</span><span class="sxs-lookup"><span data-stu-id="5392f-268">1</span></span>|<span data-ttu-id="5392f-269">1</span><span class="sxs-lookup"><span data-stu-id="5392f-269">1</span></span>|<span data-ttu-id="5392f-270">2</span><span class="sxs-lookup"><span data-stu-id="5392f-270">2</span></span>|  
|<span data-ttu-id="5392f-271">Tire</span><span class="sxs-lookup"><span data-stu-id="5392f-271">Tire</span></span>|<span data-ttu-id="5392f-272">1</span><span class="sxs-lookup"><span data-stu-id="5392f-272">1</span></span>|<span data-ttu-id="5392f-273">1</span><span class="sxs-lookup"><span data-stu-id="5392f-273">1</span></span>|<span data-ttu-id="5392f-274">4</span><span class="sxs-lookup"><span data-stu-id="5392f-274">4</span></span>|  
|<span data-ttu-id="5392f-275">Manutenção</span><span class="sxs-lookup"><span data-stu-id="5392f-275">Maintenance</span></span>|<span data-ttu-id="5392f-276">1</span><span class="sxs-lookup"><span data-stu-id="5392f-276">1</span></span>|<span data-ttu-id="5392f-277">1</span><span class="sxs-lookup"><span data-stu-id="5392f-277">1</span></span>|<span data-ttu-id="5392f-278">5</span><span class="sxs-lookup"><span data-stu-id="5392f-278">5</span></span>|  
|<span data-ttu-id="5392f-279">Front</span><span class="sxs-lookup"><span data-stu-id="5392f-279">Front</span></span>|<span data-ttu-id="5392f-280">1</span><span class="sxs-lookup"><span data-stu-id="5392f-280">1</span></span>|<span data-ttu-id="5392f-281">2</span><span class="sxs-lookup"><span data-stu-id="5392f-281">2</span></span>|<span data-ttu-id="5392f-282">1</span><span class="sxs-lookup"><span data-stu-id="5392f-282">1</span></span>|  
|<span data-ttu-id="5392f-283">Traseiro</span><span class="sxs-lookup"><span data-stu-id="5392f-283">Rear</span></span>|<span data-ttu-id="5392f-284">1</span><span class="sxs-lookup"><span data-stu-id="5392f-284">1</span></span>|<span data-ttu-id="5392f-285">3</span><span class="sxs-lookup"><span data-stu-id="5392f-285">3</span></span>|<span data-ttu-id="5392f-286">1</span><span class="sxs-lookup"><span data-stu-id="5392f-286">1</span></span>|  
|<span data-ttu-id="5392f-287">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-287">Reflector</span></span>|<span data-ttu-id="5392f-288">1</span><span class="sxs-lookup"><span data-stu-id="5392f-288">1</span></span>|<span data-ttu-id="5392f-289">2</span><span class="sxs-lookup"><span data-stu-id="5392f-289">2</span></span>|<span data-ttu-id="5392f-290">2</span><span class="sxs-lookup"><span data-stu-id="5392f-290">2</span></span>|  
|<span data-ttu-id="5392f-291">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-291">Reflector</span></span>|<span data-ttu-id="5392f-292">1</span><span class="sxs-lookup"><span data-stu-id="5392f-292">1</span></span>|<span data-ttu-id="5392f-293">2</span><span class="sxs-lookup"><span data-stu-id="5392f-293">2</span></span>|<span data-ttu-id="5392f-294">5</span><span class="sxs-lookup"><span data-stu-id="5392f-294">5</span></span>|  
|<span data-ttu-id="5392f-295">Reflector</span><span class="sxs-lookup"><span data-stu-id="5392f-295">Reflector</span></span>|<span data-ttu-id="5392f-296">1</span><span class="sxs-lookup"><span data-stu-id="5392f-296">1</span></span>|<span data-ttu-id="5392f-297">3</span><span class="sxs-lookup"><span data-stu-id="5392f-297">3</span></span>|<span data-ttu-id="5392f-298">2</span><span class="sxs-lookup"><span data-stu-id="5392f-298">2</span></span>|  
|<span data-ttu-id="5392f-299">Bracket</span><span class="sxs-lookup"><span data-stu-id="5392f-299">Bracket</span></span>|<span data-ttu-id="5392f-300">1</span><span class="sxs-lookup"><span data-stu-id="5392f-300">1</span></span>|<span data-ttu-id="5392f-301">2</span><span class="sxs-lookup"><span data-stu-id="5392f-301">2</span></span>|<span data-ttu-id="5392f-302">3</span><span class="sxs-lookup"><span data-stu-id="5392f-302">3</span></span>|  
|<span data-ttu-id="5392f-303">Assembly</span><span class="sxs-lookup"><span data-stu-id="5392f-303">Assembly</span></span>|<span data-ttu-id="5392f-304">1</span><span class="sxs-lookup"><span data-stu-id="5392f-304">1</span></span>|<span data-ttu-id="5392f-305">2</span><span class="sxs-lookup"><span data-stu-id="5392f-305">2</span></span>|<span data-ttu-id="5392f-306">6</span><span class="sxs-lookup"><span data-stu-id="5392f-306">6</span></span>|  
|<span data-ttu-id="5392f-307">3</span><span class="sxs-lookup"><span data-stu-id="5392f-307">3</span></span>|<span data-ttu-id="5392f-308">1</span><span class="sxs-lookup"><span data-stu-id="5392f-308">1</span></span>|<span data-ttu-id="5392f-309">2</span><span class="sxs-lookup"><span data-stu-id="5392f-309">2</span></span>|<span data-ttu-id="5392f-310">7</span><span class="sxs-lookup"><span data-stu-id="5392f-310">7</span></span>|  
  
 [<span data-ttu-id="5392f-311">Neste tópico</span><span class="sxs-lookup"><span data-stu-id="5392f-311">In This Topic</span></span>](#top)  
  
  
