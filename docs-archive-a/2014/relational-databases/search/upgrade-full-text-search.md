---
title: Atualizar a pesquisa de texto completo | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text search [SQL Server], installing
- migrating full-text indexes [SQL Server]
- upgrading Full-Text Search
- installing Full-Text Search
- full-text search [SQL Server], upgrading
ms.assetid: 2fee4691-f2b5-472f-8ccc-fa625b654520
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d2bdf0bdee452101bbafb8108426faf6604e7626
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87576262"
---
# <a name="upgrade-full-text-search"></a><span data-ttu-id="d8ebe-102">Atualizar pesquisa de texto completo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-102">Upgrade Full-Text Search</span></span>
  <span data-ttu-id="d8ebe-103">A atualização da pesquisa de texto completo para [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] é feita durante a instalação e quando os arquivos de banco de dados e os catálogos de texto completo da versão anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] são anexados, restaurados ou copiados por meio do Assistente para Copiar Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-103">Upgrading full-text search to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is done during setup and when database files and full-text catalogs from the earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are attached, restored, or copied using the Copy Database Wizard.</span></span>  
  
 <span data-ttu-id="d8ebe-104">Este tópico aborda os seguintes aspectos da atualização de pesquisa de texto completo:</span><span class="sxs-lookup"><span data-stu-id="d8ebe-104">This topic discusses the following aspects of upgrading full-text search:</span></span>  
  
-   [<span data-ttu-id="d8ebe-105">Atualizando uma instância de servidor</span><span class="sxs-lookup"><span data-stu-id="d8ebe-105">Upgrading a Server Instance</span></span>](#Upgrade_Server)  
  
-   [<span data-ttu-id="d8ebe-106">Opções de atualização de texto completo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-106">Full-Text Upgrade Options</span></span>](#FT_Upgrade_Options)  
  
-   [<span data-ttu-id="d8ebe-107">Considerações para escolher uma opção de atualização de texto completo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-107">Considerations for Choosing a Full-Text Upgrade Option</span></span>](#Choosing_Upgade_Option)  
  
-   [<span data-ttu-id="d8ebe-108">Migrando índices de texto completo ao atualizar de um banco de dados para o SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="d8ebe-108">Migrating Full-Text Indexes When Upgrading a Database to SQL Server 2014</span></span>](#Upgrade_Db)  
  
-   [<span data-ttu-id="d8ebe-109">Considerações sobre como restaurar um catálogo de texto completo do SQL Server 2005 para o SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="d8ebe-109">Considerations for Restoring a SQL Server 2005 Full-Text Catalog to SQL Server 2014</span></span>](#Considerations_for_Restore)  
  
-   [<span data-ttu-id="d8ebe-110">Anexando um banco de dados do SQL Server 2005 ao SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="d8ebe-110">Attaching a SQL Server 2005 database to SQL Server 2014</span></span>](#Attaching_2005_ft_catalogs)  
  
##  <a name="upgrading-a-server-instance"></a><a name="Upgrade_Server"></a><span data-ttu-id="d8ebe-111">Atualizando uma instância de servidor</span><span class="sxs-lookup"><span data-stu-id="d8ebe-111">Upgrading a Server Instance</span></span>  
 <span data-ttu-id="d8ebe-112">Em uma atualização no local, uma instância do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] é configurada lado a lado com a versão antiga do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], e os dados são migrados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-112">For an in-place upgrade, an instance of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is set up side-by-side with the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and data is migrated.</span></span> <span data-ttu-id="d8ebe-113">Se a pesquisa de texto completo estava instalada na versão antiga do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , uma versão nova da pesquisa de texto completo será instalada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-113">If the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] had full-text search installed, a new version of full-text search is automatically installed.</span></span> <span data-ttu-id="d8ebe-114">A instalação lado a lado significa que cada um dos componentes a seguir existe no nível de instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-114">Side-by-side install means that each of the following components exists at the instance-level of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="d8ebe-115">Separadores de palavras, lematizadores e filtros</span><span class="sxs-lookup"><span data-stu-id="d8ebe-115">Word breakers, stemmers, and filters</span></span>  
 <span data-ttu-id="d8ebe-116">Agora cada instância usa seu próprio conjunto de separadores de palavras, lematizadores e filtros, em vez de utilizar a versão do sistema operacional desses componentes.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-116">Each instance now uses its own set of word breakers, stemmers, and filters, rather than relying on the operating system version of these components.</span></span> <span data-ttu-id="d8ebe-117">Esses componentes também são mais fáceis de registrar e configurar por instância.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-117">These components are also easier to register and configure at a per-instance level.</span></span> <span data-ttu-id="d8ebe-118">Para obter mais informações, consulte [Configurar e gerenciar separadores de palavras e lematizadores de pesquisa](configure-and-manage-word-breakers-and-stemmers-for-search.md) e [Configurar e gerenciar filtros para pesquisa](configure-and-manage-filters-for-search.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-118">For more information, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) and [Configure and Manage Filters for Search](configure-and-manage-filters-for-search.md).</span></span>  
  
 <span data-ttu-id="d8ebe-119">Host do daemon de filtro</span><span class="sxs-lookup"><span data-stu-id="d8ebe-119">Filter daemon host</span></span>  
 <span data-ttu-id="d8ebe-120">Os hosts do daemon de filtro de texto completo são processos que carregam e orientam com segurança os componentes externos extensíveis usados para índice e consulta, como separadores de palavras, lematizadores e filtros, sem comprometer a integridade do Mecanismo de Texto Completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-120">The full-text filter daemon hosts are processes that safely load and drive extensible external components used for index and query, such as word breakers, stemmers, and filters, without compromising the integrity of the Full-Text Engine.</span></span> <span data-ttu-id="d8ebe-121">Uma instância de servidor usa um processo multi-threaded para todos os filtros multi-threaded e um processo single-threaded para todos os filtros single-threaded.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-121">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] <span data-ttu-id="d8ebe-122">introduziu uma conta de serviço para o serviço Iniciador FDHOST (MSSQLFDLauncher).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-122">introduced a service account for the FDHOST Launcher service (MSSQLFDLauncher).</span></span> <span data-ttu-id="d8ebe-123">Esse serviço propaga as informações da conta de serviço para os processos de host do daemon de filtro de uma dada instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-123">This service propagates the service account information to the filter daemon host processes of a specific instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d8ebe-124">Para obter informações sobre como configurar a conta de serviço, consulte [Definir a conta de serviço do Iniciador do Daemon de Filtro de Texto Completo](set-the-service-account-for-the-full-text-filter-daemon-launcher.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-124">For information about setting the service account, see [Set the Service Account for the Full-text Filter Daemon Launcher](set-the-service-account-for-the-full-text-filter-daemon-launcher.md).</span></span>  
  
 <span data-ttu-id="d8ebe-125">No [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], cada índice de texto completo reside em um catálogo de texto completo que pertence a um grupo de arquivos, tem um caminho físico e é tratado como um arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-125">In [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], each full-text index resides in a full-text catalog that belongs to a filegroup, has a physical path, and is treated as a database file.</span></span> <span data-ttu-id="d8ebe-126">No [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] e versões posteriores, um catálogo de texto completo é um objeto lógico ou virtual que contém um grupo de índices de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-126">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical or virtual object that contains a group of full-text indexes.</span></span> <span data-ttu-id="d8ebe-127">Por isso, um novo catálogo de texto completo não é tratado como um arquivo de banco de dados com um caminho físico.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-127">Therefore, a new full-text catalog is not treated as a database file with a physical path.</span></span> <span data-ttu-id="d8ebe-128">No entanto, durante a atualização de qualquer catálogo de texto completo que contém arquivos de dados, é criado um novo grupo de arquivos no mesmo disco.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-128">However, during upgrade of any full-text catalog that contains data files, a new filegroup is created on same disk.</span></span> <span data-ttu-id="d8ebe-129">Isso mantém o antigo comportamento de E/S do disco após a atualização.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-129">This maintains the old disk I/O behavior after upgrade.</span></span> <span data-ttu-id="d8ebe-130">Qualquer índice de texto completo desse catálogo será colocado no novo grupo de arquivos se existir o caminho raiz.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-130">Any full-text index from that catalog is placed in the new filegroup if the root path exists.</span></span> <span data-ttu-id="d8ebe-131">Se o caminho do antigo catálogo de texto completo for inválido, a atualização manterá o índice de texto completo no mesmo grupo de arquivos que a tabela base ou, no caso de uma tabela particionada, no grupo de arquivos primário.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-131">If the old full-text catalog path is invalid, the upgrade keeps the full-text index in the same filegroup as the base table or, for a partitioned table, in the primary filegroup.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]<span data-ttu-id="d8ebe-132">As [!INCLUDE[tsql](../../includes/tsql-md.md)] instruções DDL que especificam catálogos de texto completo continuam a funcionar corretamente.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-132">[!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements that specify full-text catalogs continue to work correctly.</span></span>  
  
##  <a name="full-text-upgrade-options"></a><a name="FT_Upgrade_Options"></a><span data-ttu-id="d8ebe-133">Opções de atualização de texto completo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-133">Full-Text Upgrade Options</span></span>  
 <span data-ttu-id="d8ebe-134">Na atualização de uma instância de servidor para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], a interface do usuário permite escolher uma das opções de atualização de texto completo a seguir.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-134">When upgrading a server instance to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the user interface allows you to choose one of the following full-text upgrade options.</span></span>  
  
 <span data-ttu-id="d8ebe-135">Importar</span><span class="sxs-lookup"><span data-stu-id="d8ebe-135">Import</span></span>  
 <span data-ttu-id="d8ebe-136">Os catálogos de texto completo são importados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-136">Full-text catalogs are imported.</span></span> <span data-ttu-id="d8ebe-137">A importação costuma ser consideravelmente mais rápida do que a recompilação.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-137">Typically, import is significantly faster than rebuild.</span></span> <span data-ttu-id="d8ebe-138">Por exemplo, quando é usada apenas uma CPU, a importação é executada cerca de 10 vezes mais rápido do que a recompilação.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-138">For example, when using only one CPU, import runs about 10 times faster than rebuild.</span></span> <span data-ttu-id="d8ebe-139">No entanto, um catálogo de texto completo importado não usará os novos separadores de palavras instalados com a versão mais recente do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-139">However, an imported full-text catalog does not use the new word breakers installed with the latest version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d8ebe-140">Para garantir a consistência nos resultados da consulta, os catálogos de texto completo precisam ser recompilados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-140">To ensure consistency in query results, full-text catalogs have to be rebuilt.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d8ebe-141">A recompilação pode ser executada no modo multi-threaded e, se houver mais de 10 CPUs disponíveis, ela poderá ser executada mais rápido do que a importação se você permitir que a recompilação use todas as CPUs.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-141">Rebuild can run in multi-threaded mode, and if more than 10 CPUs are available, rebuild might run faster than import if you allow rebuild to use all of the CPUs.</span></span>  
  
 <span data-ttu-id="d8ebe-142">Se um catálogo de texto completo não estiver disponível, os índices de texto completo associados serão recompilados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-142">If a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="d8ebe-143">Essa opção está disponível apenas para bancos de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-143">This option is available for only [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] databases.</span></span>  
  
 <span data-ttu-id="d8ebe-144">Para obter informações sobre o impacto da importação do índice de texto completo, consulte "Considerações sobre como escolher uma opção de atualização de texto completo", mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-144">For information about the impact of importing full-text index, see "Considerations for Choosing a Full-Text Upgrade Option," later in this topic.</span></span>  
  
 <span data-ttu-id="d8ebe-145">Recompilar</span><span class="sxs-lookup"><span data-stu-id="d8ebe-145">Rebuild</span></span>  
 <span data-ttu-id="d8ebe-146">Os catálogos de texto completo são recompilados usando-se os separadores de palavras novos e aprimorados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-146">Full-text catalogs are rebuilt using the new and enhanced word breakers.</span></span> <span data-ttu-id="d8ebe-147">A recompilação de índices pode demorar um pouco, e uma quantidade significativa de memória e CPU pode ser necessária após a atualização.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-147">Rebuilding indexes can take a while, and a significant amount of CPU and memory might be required after the upgrade.</span></span>  
  
 <span data-ttu-id="d8ebe-148">Redefinir</span><span class="sxs-lookup"><span data-stu-id="d8ebe-148">Reset</span></span>  
 <span data-ttu-id="d8ebe-149">Os catálogos de texto completo são redefinidos.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-149">Full-text catalogs are reset.</span></span> <span data-ttu-id="d8ebe-150">Quando atualizados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], os arquivos de catálogo de texto completo são removidos, mas os metadados dos catálogos e dos índices de texto completo são preservados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-150">When upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], full-text catalog files are removed, but the metadata for full-text catalogs and full-text indexes is retained.</span></span> <span data-ttu-id="d8ebe-151">Depois de serem atualizados, todos os índices de texto completo são desabilitados para o controle de alteração e os rastreamentos não são iniciados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-151">After being upgraded, all full-text indexes are disabled for change tracking and crawls are not started automatically.</span></span> <span data-ttu-id="d8ebe-152">O catálogo permanecerá vazio até você executar uma população completa manualmente, depois que a atualização for concluída.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-152">The catalog will remain empty until you manually issue a full population, after the upgrade completes.</span></span>  
  
##  <a name="considerations-for-choosing-a-full-text-upgrade-option"></a><a name="Choosing_Upgade_Option"></a><span data-ttu-id="d8ebe-153">Considerações para escolher uma opção de atualização de texto completo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-153">Considerations for Choosing a Full-Text Upgrade Option</span></span>  
 <span data-ttu-id="d8ebe-154">Ao escolher a opção de atualização para sua atualização, considere o seguinte:</span><span class="sxs-lookup"><span data-stu-id="d8ebe-154">When choosing the upgrade option for your upgrade, consider the following:</span></span>  
  
-   <span data-ttu-id="d8ebe-155">Você precisa de consistência nos resultados da consulta?</span><span class="sxs-lookup"><span data-stu-id="d8ebe-155">Do you require consistency in query results?</span></span>  
  
     [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="d8ebe-156">instala novos separadores de palavras para uso pela Pesquisa semântica e de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-156">installs new word breakers for use by Full-Text and Semantic Search.</span></span> <span data-ttu-id="d8ebe-157">Os separadores de palavras são usados na indexação e na consulta.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-157">The word breakers are used both at indexing time and at query time.</span></span> <span data-ttu-id="d8ebe-158">Se você não recriar os catálogos de texto completo, seus resultados da pesquisa poderão ser inconsistentes.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-158">If you do not rebuild the full-text catalogs, your search results may be inconsistent.</span></span> <span data-ttu-id="d8ebe-159">Se você emitir uma consulta de texto completo que procura uma frase que é interrompida diferentemente pelo separador de palavras em uma versão anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e o separador de palavras atual, um documento ou linha contendo a frase talvez não seja recuperada.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-159">If you issue a full-text query that looks for a phrase that is broken differently by the word breaker in a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current word breaker, a document or row containing the phrase might not be retrieved.</span></span> <span data-ttu-id="d8ebe-160">Isso ocorre porque as frases indexadas foram quebradas usando uma lógica diferente da usada pela consulta.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-160">This is because the indexed phrases were broken using different logic than the query is using.</span></span> <span data-ttu-id="d8ebe-161">A solução é preencher novamente (recompilar) os catálogos de texto completo com os novos separadores de palavras de forma que os comportamentos de tempo de indexação e de consulta sejam idênticos.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-161">The solution is to repopulate (rebuild) the full-text catalogs with the new word breakers so that index time and query time behavior are identical.</span></span> <span data-ttu-id="d8ebe-162">Você pode escolher a opção Recriar para fazer isso ou executar a recompilação manualmente após escolher a opção Importar.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-162">You can choose the Rebuild option to accomplish this, or you can rebuild manually after choosing the Import option.</span></span>  
  
-   <span data-ttu-id="d8ebe-163">Algum índice de texto completo foi compilado em colunas de chave de texto completo integer?</span><span class="sxs-lookup"><span data-stu-id="d8ebe-163">Were any full-text indexes built on integer full-text key columns?</span></span>  
  
     <span data-ttu-id="d8ebe-164">A recompilação faz otimizações internas que, em alguns casos, melhoram o desempenho de consultas do índice de texto completo atualizado.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-164">Rebuilding performs internal optimizations that improve the query performance of the upgraded full-text index in some cases.</span></span> <span data-ttu-id="d8ebe-165">Especificamente, se você tiver catálogos de texto completo que contêm índices de texto completo para os quais a coluna de chave de texto completo da tabela base é do tipo de dados integer, a recompilação atingirá o desempenho ideal de consultas de texto completo depois da atualização.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-165">Specifically, if you have full-text catalogs that contain full-text indexes for which the full-text key column of the base table is an integer data type, rebuilding achieves ideal performance of full-text queries after upgrade.</span></span> <span data-ttu-id="d8ebe-166">Nesse caso, é altamente recomendável usar a opção **Recriar** .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-166">In this case, we highly recommend you to use the **Rebuild** option.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d8ebe-167">Para os índices de texto completo do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], é recomendável que a coluna que funciona como a chave de texto completo seja um tipo de dados integer.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-167">For full-text indexes in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], we recommend that the column serving as the full-text key be an integer data type.</span></span> <span data-ttu-id="d8ebe-168">Para obter mais informações, consulte [Melhorar o desempenho de índices de texto completo](improve-the-performance-of-full-text-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-168">For more information, see [Improve the Performance of Full-Text Indexes](improve-the-performance-of-full-text-indexes.md).</span></span>  
  
-   <span data-ttu-id="d8ebe-169">Qual é a prioridade para colocar a instância de servidor online?</span><span class="sxs-lookup"><span data-stu-id="d8ebe-169">What is the priority for getting your server instance online?</span></span>  
  
     <span data-ttu-id="d8ebe-170">A importação ou a recompilação durante a atualização usa muitos recursos da CPU, o que faz com que o restante da instância do servidor demore para ser atualizado e ficar online.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-170">Importing or rebuilding during upgrade takes a lot of CPU resources, which delays getting the rest of the server instance upgraded and online.</span></span> <span data-ttu-id="d8ebe-171">Se colocar a instância do servidor online o mais rápido possível é importante para você e se você deseja executar uma população manual depois da atualização, a opção **Redefinir** é a mais adequada.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-171">If getting the server instance online as soon as possible is important and if you are willing to run a manual population after the upgrade, **Reset** is suitable.</span></span>  
  
## <a name="ensuring-consistent-query-results-after-importing-a-sql-server-2005-full-text-index"></a><span data-ttu-id="d8ebe-172">Assegurando resultados de consulta consistentes após a importação de um índice de texto completo do SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="d8ebe-172">Ensuring Consistent Query Results after Importing a SQL Server 2005 Full-Text Index</span></span>  
 <span data-ttu-id="d8ebe-173">Se um catálogo de texto completo foi importado durante a atualização de um banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], podem ocorrer incompatibilidades entre a consulta e o conteúdo do índice de texto completo devido a diferenças no comportamento dos antigos e dos novos separadores de palavras.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-173">If a full-text catalog was imported when upgrading a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], mismatches between the query and the full-text index content might occur because of differences in the behavior of the old and new word breakers.</span></span> <span data-ttu-id="d8ebe-174">Nesse caso, para garantir compatibilidade total entre as consultas e o conteúdo do índice de texto completo, escolha uma das opções a seguir:</span><span class="sxs-lookup"><span data-stu-id="d8ebe-174">In this case, to guarantee a total match between queries and the full-text index content, choose one of the following options:</span></span>  
  
-   <span data-ttu-id="d8ebe-175">Recompilar o catálogo de texto completo que contém o índice de texto completo ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*catalog_name* REBUILD)</span><span class="sxs-lookup"><span data-stu-id="d8ebe-175">Rebuild the full-text catalog that contains the full-text index ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*catalog_name* REBUILD)</span></span>  
  
-   <span data-ttu-id="d8ebe-176">Emitir FULL POPULATION no índice de texto completo ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *table_name* START FULL POPULATION).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-176">Issue a FULL POPULATION on the full-text index ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *table_name* START FULL POPULATION).</span></span>  
  
 <span data-ttu-id="d8ebe-177">Para obter mais informações sobre separadores de palavras, consulte [Configurar e gerenciar separadores de palavras e lematizadores para pesquisa](configure-and-manage-word-breakers-and-stemmers-for-search.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-177">For more information about word breakers, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md).</span></span>  
  
## <a name="upgrading-noise-word-files-to-stoplists"></a><span data-ttu-id="d8ebe-178">Atualizando arquivos de palavras de ruído para listas de palavras irrelevantes (stoplists)</span><span class="sxs-lookup"><span data-stu-id="d8ebe-178">Upgrading Noise-Word Files to Stoplists</span></span>  
 <span data-ttu-id="d8ebe-179">As palavras de ruído do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] foram substituídas por palavras irrelevantes no [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-179">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] noise words have been replaced by stopwords in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions.</span></span> <span data-ttu-id="d8ebe-180">Quando um banco de dados é atualizado do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] para o [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], os arquivos de palavras de ruído não são mais usados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-180">When a database is upgraded to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the noise-word files are no longer used.</span></span> <span data-ttu-id="d8ebe-181">No entanto, os antigos arquivos de palavras de ruído ficam armazenados na pasta FTDATA\ FTNoiseThesaurusBak, e você poderá usá-los posteriormente quando atualizar ou criar as listas de palavras irrelevantes do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-181">However, the old noise-word files are stored in the FTDATA\ FTNoiseThesaurusBak folder, and you can use them later when updating or building the corresponding [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] stoplists.</span></span>  
  
 <span data-ttu-id="d8ebe-182">Depois de atualizar do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="d8ebe-182">After upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="d8ebe-183">Se você nunca adicionou, modificou ou excluiu arquivos de palavras de ruído da sua instalação do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], a lista de palavras irrelevantes do sistema deve atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-183">If you never added, modified, or deleted any noise-word files in your installation of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the system stoplist should meet your needs.</span></span>  
  
-   <span data-ttu-id="d8ebe-184">Se os arquivos da palavra de ruído foram modificados no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], essas modificações serão perdidas durante a atualização.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-184">If your noise-word files were modified in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], those modifications are lost during upgrade.</span></span> <span data-ttu-id="d8ebe-185">Para recriar essas atualizações, recrie manualmente essas modificações na lista de palavras irrelevantes correspondente do [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-185">To re-create those updates, you must manually recreate those modifications in the corresponding [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] stoplist.</span></span> <span data-ttu-id="d8ebe-186">Para obter mais informações, consulte [ALTER FULLTEXT STOPLIST &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-186">For more information, see [ALTER FULLTEXT STOPLIST &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql).</span></span>  
  
-   <span data-ttu-id="d8ebe-187">Caso você não deseje aplicar palavras irrelevantes aos índices de texto completo (por exemplo, se você excluiu ou apagou os arquivos de palavras de ruído da instalação do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]), desative a lista de palavras irrelevantes (stoplist) de cada índice de texto completo atualizado.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-187">If you do not want to apply any stopwords to your full-text indexes (for example, if you deleted or erased your noise-word files in your [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] installation), you must turn off the stoplist for each upgraded full-text index.</span></span> <span data-ttu-id="d8ebe-188">Execute a seguinte instrução [!INCLUDE[tsql](../../includes/tsql-md.md)] (substituindo *database* pelo nome do banco de dados atualizado e *table* pelo nome da *tabela*):</span><span class="sxs-lookup"><span data-stu-id="d8ebe-188">Run the following [!INCLUDE[tsql](../../includes/tsql-md.md)] statement (replacing *database* with the name of the upgraded database and *table* with the name of the *table*):</span></span>  
  
    ```  
    Use database;   
    ALTER FULLTEXT INDEX ON table  
       SET STOPLIST OFF;  
    GO  
    ```  
  
     <span data-ttu-id="d8ebe-189">A cláusula STOPLIST OFF remove a filtragem de palavras irrelevantes e disparará a população da tabela, sem filtrar nenhuma das palavras consideradas palavras de ruído.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-189">The STOPLIST OFF clause removes stop-word filtering, and it will trigger a population of the table, without filtering any words considered to be noise.</span></span>  
  
## <a name="backup-and-imported-full-text-catalogs"></a><span data-ttu-id="d8ebe-190">Backup e catálogos de texto completo importados</span><span class="sxs-lookup"><span data-stu-id="d8ebe-190">Backup and Imported Full-Text Catalogs</span></span>  
 <span data-ttu-id="d8ebe-191">Nos catálogos de texto completo que são recompilados ou redefinidos durante a atualização (e nos novos catálogos de texto completo), o catálogo de texto completo é um conceito lógico e não reside em um grupo de arquivos.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-191">For full-text catalogs that are rebuilt or reset during upgrade (and for new full-text catalogs), the fulltext catalog is a logical concept and does not reside in a filegroup.</span></span> <span data-ttu-id="d8ebe-192">Portanto, para fazer backup de um catálogo de texto completo no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], é necessário identificar cada grupo de arquivos que contém um índice de texto completo do catálogo e fazer backup de cada um deles.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-192">Therefore, to back up a full-text catalog in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must identify every filegroup that contains a full-text index of the catalog and back each of them up, one by one.</span></span> <span data-ttu-id="d8ebe-193">Para obter mais informações, consulte [Fazer backup e restaurar índices e catálogos de texto completo](back-up-and-restore-full-text-catalogs-and-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-193">For more information, see [Back Up and Restore Full-Text Catalogs and Indexes](back-up-and-restore-full-text-catalogs-and-indexes.md).</span></span>  
  
 <span data-ttu-id="d8ebe-194">Nos catálogos de texto completo importados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], o catálogo de texto completo ainda é um arquivo de banco de dados em seu próprio grupo de arquivos.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-194">For full-text catalogs that have been imported from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the full-text catalog is still a database file in its own filegroup.</span></span> <span data-ttu-id="d8ebe-195">O processo de backup do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] para catálogos de texto completo ainda é aplicável, a diferença é que o serviço MSFTESQL não existe no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-195">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] backup process for full-text catalogs still applies except that the MSFTESQL service does not exist in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="d8ebe-196">Para obter informações sobre o processo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , consulte [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=209154) (Backup e restauração de catálogos de texto completo) nos Manuais Online do SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-196">For information about the [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] process, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=209154) in SQL Server 2005 Books Online.</span></span>  
  
##  <a name="migrating-full-text-indexes-when-upgrading-a-database-to-sscurrent"></a><a name="Upgrade_Db"></a><span data-ttu-id="d8ebe-197">Migrando índices de texto completo ao atualizar um banco de dados para o[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="d8ebe-197">Migrating Full-Text Indexes When Upgrading a Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="d8ebe-198">Os arquivos de banco de dados e catálogos de texto completo de uma versão anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] podem ser atualizados para uma instância de servidor do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] por meio de anexação, restauração ou do Assistente para Copiar Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-198">Database files and full-text catalogs from a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can be upgraded to an existing [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance by using attach, restore, or the Copy Database Wizard.</span></span> [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] <span data-ttu-id="d8ebe-199">os índices de texto completo, se houver algum, serão importados, redefinidos ou recompilados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-199">full-text indexes, if any, are either imported, reset, or rebuilt.</span></span> <span data-ttu-id="d8ebe-200">A propriedade de servidor **upgrade_option** controla qual opção de atualização de texto completo é usada pela instância de servidor durante essas atualizações de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-200">The **upgrade_option** server property controls which full-text upgrade option the server instance uses during these database upgrades.</span></span>  
  
 <span data-ttu-id="d8ebe-201">Após anexar, restaurar ou copiar qualquer banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], o banco de dados se torna imediatamente disponível e, em seguida, é atualizado de forma automática.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-201">After you attach, restore, or copy any [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database becomes available immediately and is then automatically upgraded.</span></span> <span data-ttu-id="d8ebe-202">Dependendo da quantidade de dados a serem indexados, a importação pode levar várias horas, e a recriação pode ser até dez vezes mais demorada.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-202">Depending the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="d8ebe-203">Lembre-se também de que, quando a opção de atualização estiver definida como Importar, se não houver um catálogo de texto completo disponível, os índices de texto completo associados serão recompilados.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-203">Note also that when the upgrade option is set to import, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span>  
  
 <span data-ttu-id="d8ebe-204">**Para alterar o comportamento de atualização de texto completo em uma instância de servidor**</span><span class="sxs-lookup"><span data-stu-id="d8ebe-204">**To change full-text upgrade behavior on a server instance**</span></span>  
  
-   [!INCLUDE[tsql](../../includes/tsql-md.md)]<span data-ttu-id="d8ebe-205">: Usar a ação da **opção\_de atualização** do [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="d8ebe-205">: Use the **upgrade\_option** action of [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="d8ebe-206">**:** Use a **Opção de Atualização de Texto Completo** da caixa de diálogo **Propriedades do Servidor** .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-206">**:** Use the **Full-Text Upgrade Option** of the **Server Properties** dialog box.</span></span> <span data-ttu-id="d8ebe-207">Para obter informações, consulte [Gerenciar e monitorar a pesquisa de texto completo em uma instância do servidor](manage-and-monitor-full-text-search-for-a-server-instance.md).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-207">For more information, see [Manage and Monitor Full-Text Search for a Server Instance](manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
##  <a name="considerations-for-restoring-a-ssversion2005-full-text-catalog-to-sscurrent"></a><a name="Considerations_for_Restore"></a> <span data-ttu-id="d8ebe-208">Considerações sobre a restauração de um Catálogo de texto completo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] para [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="d8ebe-208">Considerations for Restoring a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Full-Text Catalog to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="d8ebe-209">Um método de atualização dos dados de texto completo de um banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] consiste em restaurar um backup completo do banco de dados para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-209">One method of upgrading fulltext data from a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is to restore a full database backup to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
 <span data-ttu-id="d8ebe-210">Durante a importação de um catálogo de texto completo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , é possível fazer backup e restaurar o banco de dados e o arquivo de catálogo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-210">While importing a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalog, you can back up and restore the database and the catalog file.</span></span> <span data-ttu-id="d8ebe-211">O comportamento é o mesmo no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-211">The behavior is the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="d8ebe-212">O backup completo do banco de dados incluirá o catálogo de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-212">The full database backup will include the full-text catalog.</span></span> <span data-ttu-id="d8ebe-213">Para consultar o catálogo de texto completo, use o nome de arquivo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , sysft_+*catalog-name*.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-213">To refer to the full-text catalog, use its [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] file name, sysft_+*catalog-name*.</span></span>  
  
-   <span data-ttu-id="d8ebe-214">Se o catálogo de texto completo estiver offline, ocorrerá falha no backup.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-214">If the full-text catalog is offline, the backup will fail.</span></span>  
  
 <span data-ttu-id="d8ebe-215">Para obter mais informações sobre como fazer o backup e a restauração de catálogos de texto completo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , consulte [Fazer backup e restaurar índices e catálogos de texto completo](https://go.microsoft.com/fwlink/?LinkId=121052) e [Restauração por etapas e índices de texto completo](https://go.microsoft.com/fwlink/?LinkId=121053)nos Manuais Online do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-215">For more information about backing up and restoring [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalogs, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121052) and [File Backup and Restore and Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121053)in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="d8ebe-216">Quando o banco de dados for restaurado no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], um novo arquivo de banco de dados será criado para o catálogo de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-216">When the database is restored on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], a new database file will be created for the full-text catalog.</span></span> <span data-ttu-id="d8ebe-217">O nome padrão desse arquivo é ftrow_*catalog-name*.ndf.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-217">The default name of this file is ftrow_*catalog-name*.ndf.</span></span> <span data-ttu-id="d8ebe-218">Por exemplo, se o *catalog-name* for `cat1`, o nome padrão do arquivo de banco de dados do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] será `ftrow_cat1.ndf`.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-218">For example, if you *catalog-name* is `cat1`, the default name of the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database file would be `ftrow_cat1.ndf`.</span></span> <span data-ttu-id="d8ebe-219">Mas se o nome padrão já estiver sendo usado no diretório de destino, o novo arquivo de banco de dados será nomeado `ftrow_` *Catalog-Name* `{` *GUID* `}.ndf` , em que *GUID* é o identificador global exclusivo do novo arquivo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-219">But if the default name is already being used in the target directory, the new database file would be named `ftrow_`*catalog-name*`{`*GUID*`}.ndf`, where *GUID* is the Globally Unique Identifier of the new file.</span></span>  
  
 <span data-ttu-id="d8ebe-220">Depois que os catálogos foram importados, o **sys.database_files** e **sys.master_file**s são atualizadas para remover as entradas do catálogo e a coluna **path** em **sys.fulltext_catalogs** é definida como NULL.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-220">After the catalogs have been imported, the **sys.database_files** and **sys.master_file**s are updated to remove the catalog entries and the **path** column in **sys.fulltext_catalogs** is set to NULL.</span></span>  
  
 <span data-ttu-id="d8ebe-221">**Para fazer o backup de um banco de dados**</span><span class="sxs-lookup"><span data-stu-id="d8ebe-221">**To back up a database**</span></span>  
  
-   [<span data-ttu-id="d8ebe-222">Backups de bancos de dados completos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="d8ebe-222">Full Database Backups &#40;SQL Server&#41;</span></span>](../backup-restore/full-database-backups-sql-server.md)  
  
-   <span data-ttu-id="d8ebe-223">[Backups de log de transações &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md) (apenas no modelo de recuperação completa)</span><span class="sxs-lookup"><span data-stu-id="d8ebe-223">[Transaction Log Backups &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md) (full recovery model only)</span></span>  
  
 <span data-ttu-id="d8ebe-224">**Para restaurar um backup de banco de dados**</span><span class="sxs-lookup"><span data-stu-id="d8ebe-224">**To restore a database backup**</span></span>  
  
-   [<span data-ttu-id="d8ebe-225">Restaurações completas de banco de dados &#40;Modelo de recuperação simples#41;</span><span class="sxs-lookup"><span data-stu-id="d8ebe-225">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="d8ebe-226">Restaurações completas de banco de dados &#40;Modelo de recuperação completa&#41;</span><span class="sxs-lookup"><span data-stu-id="d8ebe-226">Complete Database Restores &#40;Full Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-full-recovery-model.md)  
  
### <a name="example"></a><span data-ttu-id="d8ebe-227">Exemplo</span><span class="sxs-lookup"><span data-stu-id="d8ebe-227">Example</span></span>  
 <span data-ttu-id="d8ebe-228">O exemplo a seguir usa a cláusula MOVE na instrução [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) para restaurar um banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] denominado `ftdb1`.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-228">The following example uses the MOVE clause in the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement, to restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database named `ftdb1`.</span></span> <span data-ttu-id="d8ebe-229">O banco de dados, o log e os arquivos de catálogo do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] são movidos para novos locais da instância de servidor do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , como segue:</span><span class="sxs-lookup"><span data-stu-id="d8ebe-229">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, log, and catalog files are moved to new locations on the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, as follows:</span></span>  
  
-   <span data-ttu-id="d8ebe-230">O arquivo de banco de dados, `ftdb1.mdf`, é movido para `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-230">The database file, `ftdb1.mdf`, is moved to `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`.</span></span>  
  
-   <span data-ttu-id="d8ebe-231">O arquivo de log, `ftdb1_log.ldf` , é movido para um diretório de log na unidade de disco de log, *log_drive* `:\` *log_directory* `\ftdb1_log.ldf` .</span><span class="sxs-lookup"><span data-stu-id="d8ebe-231">The log file, `ftdb1_log.ldf`, is moved to a log directory on your log disk drive, *log_drive*`:\`*log_directory*`\ftdb1_log.ldf`.</span></span>  
  
-   <span data-ttu-id="d8ebe-232">Os arquivos de catálogo que correspondem ao catálogo `sysft_cat90` são movidos para `C:\temp`.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-232">The catalog files that correspond to the `sysft_cat90` catalog are moved to `C:\temp`.</span></span> <span data-ttu-id="d8ebe-233">Depois de importados, os índices de texto completo são colocados automaticamente em um arquivo de banco de dados (C:\ftrow_sysft_cat90.ndf), e o diretório C:\temp é excluído.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-233">After the full-text indexes are imported, they will automatically be placed in a database file, C:\ftrow_sysft_cat90.ndf, and the C:\temp will be deleted.</span></span>  
  
```  
RESTORE DATABASE [ftdb1] FROM  DISK = N'C:\temp\ftdb1.bak' WITH  FILE = 1,  
   MOVE N'ftdb1' TO N'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf',  
    MOVE N'ftdb1_log' TO N'log_drive:\log_directory\ftdb1_log.ldf',  
    MOVE N'sysft_cat90' TO N'C:\temp';  
```  
  
##  <a name="attaching-a-sql-server-2005-database-to-sscurrent"></a><a name="Attaching_2005_ft_catalogs"></a><span data-ttu-id="d8ebe-234">Anexando um banco de dados SQL Server 2005 a[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="d8ebe-234">Attaching a SQL Server 2005 Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="d8ebe-235">No [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] e em versões posteriores, um catálogo de texto completo é um conceito lógico que se refere a um grupo de índices de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-235">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical concept that refers to a group of full-text indexes.</span></span> <span data-ttu-id="d8ebe-236">O catálogo de texto completo é um objeto virtual que não pertence a nenhum grupo de arquivos.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-236">The full-text catalog is a virtual object that does not belong to any filegroup.</span></span> <span data-ttu-id="d8ebe-237">No entanto, quando você anexa um banco de dados do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] que contém arquivos de catálogo de texto completo a uma instância de servidor do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , os arquivos de catálogo são anexados de seus locais anteriores junto com os outros arquivos de banco de dados, assim como ocorre no [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-237">However, when you attach a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database that contains full-text catalog files onto a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span>  
  
 <span data-ttu-id="d8ebe-238">O estado de cada catálogo de texto completo anexado no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] é o mesmo de quando o banco de dados foi desanexado do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8ebe-238">The state of each attached full-text catalog on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is the same as when the database was detached from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="d8ebe-239">Se uma população de índice de texto completo for suspensa pela operação de desanexação, ela será retomada no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], e o índice de texto completo ficará disponível para pesquisa de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-239">If any full-text index population was suspended by the detach operation, the population is resumed on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], and the full-text index becomes available for full-text search.</span></span>  
  
 <span data-ttu-id="d8ebe-240">Se o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] não encontrar um arquivo de catálogo de texto completo ou se o arquivo de texto completo foi movido durante a operação de anexação sem que fosse especificado um novo local, o comportamento dependerá da opção de atualização de texto completo selecionada.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-240">If [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] cannot find a full-text catalog file or if the full-text file was moved during the attach operation without specifying a new location, the behavior depends on the selected full-text upgrade option.</span></span> <span data-ttu-id="d8ebe-241">Se a opção de atualização de texto completo for **Importar** ou **Recriar**, o catálogo de texto completo anexado será recriado.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-241">If the full-text upgrade option is **Import** or **Rebuild**, the attached full-text catalog is rebuilt.</span></span> <span data-ttu-id="d8ebe-242">Se a opção de atualização de texto completo for **Redefinir**, o catálogo de texto completo anexado será redefinido.</span><span class="sxs-lookup"><span data-stu-id="d8ebe-242">If the full-text upgrade option is **Reset**, the attached full-text catalog is reset.</span></span>  
  
 <span data-ttu-id="d8ebe-243">Para obter mais informações sobre desanexar e anexar um banco de dados, consulte [Anexar e desanexar bancos de dados &#40;SQL Server&#41;](../databases/database-detach-and-attach-sql-server.md), [CREATE DATABASE &#40;SQL Server Transact-SQL&#41;](/sql/t-sql/statements/create-database-sql-server-transact-sql), [sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql) e [sp_detach_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8ebe-243">For more information about detaching and attaching a database, see [Database Detach and Attach &#40;SQL Server&#41;](../databases/database-detach-and-attach-sql-server.md), [CREATE DATABASE &#40;SQL Server Transact-SQL&#41;](/sql/t-sql/statements/create-database-sql-server-transact-sql), [sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql), and [sp_detach_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d8ebe-244">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d8ebe-244">See Also</span></span>  
 <span data-ttu-id="d8ebe-245">[Iniciar a pesquisa de texto completo](get-started-with-full-text-search.md) </span><span class="sxs-lookup"><span data-stu-id="d8ebe-245">[Get Started with Full-Text Search](get-started-with-full-text-search.md) </span></span>  
 <span data-ttu-id="d8ebe-246">[Configurar e gerenciar separadores de palavras e lematizadores para pesquisa](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span><span class="sxs-lookup"><span data-stu-id="d8ebe-246">[Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span></span>  
 [<span data-ttu-id="d8ebe-247">Configurar e gerenciar filtros de pesquisa</span><span class="sxs-lookup"><span data-stu-id="d8ebe-247">Configure and Manage Filters for Search</span></span>](configure-and-manage-filters-for-search.md)  
  
  
