---
title: Sessões de eventos estendidos do SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 05/26/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xevents
ms.topic: conceptual
helpviewer_keywords:
- xe
- sessions
- extend events [SQL Server]
ms.assetid: c3c92544-351a-4bce-a06a-1f2a47e494e9
author: rothja
ms.author: jroth
ms.openlocfilehash: 3aab8c57a578ea60829514b575e168bc5a1dd8c7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569458"
---
# <a name="sql-server-extended-events-sessions"></a><span data-ttu-id="ebdfa-102">Sessões de eventos estendidos do SQL Server</span><span class="sxs-lookup"><span data-stu-id="ebdfa-102">SQL Server Extended Events Sessions</span></span>
  <span data-ttu-id="ebdfa-103">Uma sessão de eventos estendidos do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] é criada no processo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que está hospedando o mecanismo de eventos estendidos.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-103">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extended Events session is created in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] process hosting the Extended Events engine.</span></span> <span data-ttu-id="ebdfa-104">Os seguintes aspectos de uma sessão de eventos estendidos fornecem um contexto para entender a infraestrutura de eventos estendidos e o processamento geral que ocorre:</span><span class="sxs-lookup"><span data-stu-id="ebdfa-104">The following aspects of an Extended Events session provide a context for understanding the Extended Events infrastructure and the general processing that takes place:</span></span>  
  
-   <span data-ttu-id="ebdfa-105">Estados de sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-105">Session states.</span></span> <span data-ttu-id="ebdfa-106">Os diferentes estados em que uma sessão de eventos estendidos se encontra quando as instruções CREATE EVENT SESSION e ALTER EVENT SESSION são executadas.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-106">The different states that an Extended Events session is in when CREATE EVENT SESSION and ALTER EVENT SESSION statements are executed.</span></span>  
  
-   <span data-ttu-id="ebdfa-107">Conteúdo de sessão e características.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-107">Session content and characteristics.</span></span> <span data-ttu-id="ebdfa-108">O conteúdo de uma sessão do Extended Events, como destinos e eventos, e o modo como esses objetos estão relacionados em uma sessão ou entre sessões.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-108">The content of an Extended Events session, such as targets and events, and how these objects are related in a session or between sessions.</span></span>  
  
## <a name="session-states"></a><span data-ttu-id="ebdfa-109">Estados da sessão</span><span class="sxs-lookup"><span data-stu-id="ebdfa-109">Session States</span></span>  
 <span data-ttu-id="ebdfa-110">A ilustração a seguir mostra os vários estados de uma sessão de eventos estendidos.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-110">The following illustration shows the various states of an Extended Events session.</span></span>  

<span data-ttu-id="ebdfa-111">![Estado de sessão de eventos estendidos](../../database-engine/media/xesessionstate.png "Estado de sessão de eventos estendidos")</span><span class="sxs-lookup"><span data-stu-id="ebdfa-111">![Extended event session state](../../database-engine/media/xesessionstate.png "Extended event session state")</span></span>

 <span data-ttu-id="ebdfa-112">Mencionando a figura precedente, observe que o estado da sessão é alterado quando os comandos DDL diferentes são emitidos para uma sessão de evento.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-112">Referring to the preceding figure, note that session state changes as the different DDL commands are issued for an event session.</span></span> <span data-ttu-id="ebdfa-113">Essas alterações de estado são descritas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-113">The following table describes these changes in state.</span></span>  
  
|<span data-ttu-id="ebdfa-114">Rótulo de ilustração</span><span class="sxs-lookup"><span data-stu-id="ebdfa-114">Illustration label</span></span>|<span data-ttu-id="ebdfa-115">instrução DDL</span><span class="sxs-lookup"><span data-stu-id="ebdfa-115">DDL statement</span></span>|<span data-ttu-id="ebdfa-116">Descrição</span><span class="sxs-lookup"><span data-stu-id="ebdfa-116">Description</span></span>|  
|------------------------|-------------------|-----------------|  
|<span data-ttu-id="ebdfa-117">Criar</span><span class="sxs-lookup"><span data-stu-id="ebdfa-117">Create</span></span>|<span data-ttu-id="ebdfa-118">CREATE EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="ebdfa-118">CREATE EVENT SESSION</span></span>|<span data-ttu-id="ebdfa-119">O processo do host cria um objeto de sessão que contém os metadados fornecidos pela CREATE EVENT SESSION.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-119">The host process creates a session object that contains the metadata provided by CREATE EVENT SESSION.</span></span> <span data-ttu-id="ebdfa-120">O processo do host valida a definição de sessão, valida o nível de permissão do usuário, e armazena os metadados no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-120">The host process validates the session definition, validates the user permission level, and stores the metadata in the master database.</span></span> <span data-ttu-id="ebdfa-121">Neste momento a sessão não está ativa.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-121">At this point the session is not active.</span></span>|  
|<span data-ttu-id="ebdfa-122">Alterar</span><span class="sxs-lookup"><span data-stu-id="ebdfa-122">Alter</span></span>|<span data-ttu-id="ebdfa-123">ALTER EVENT SESSION, STATE=START</span><span class="sxs-lookup"><span data-stu-id="ebdfa-123">ALTER EVENT SESSION, STATE=START</span></span>|<span data-ttu-id="ebdfa-124">O processo do host inicia a sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-124">The host process starts the session.</span></span> <span data-ttu-id="ebdfa-125">O processo do host lê os metadados armazenados, valida a definição da sessão, verifica o nível de permissão do usuário e cria a sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-125">The host process reads the stored metadata, validates the session definition, verifies the level of user permission level, and creates the session.</span></span> <span data-ttu-id="ebdfa-126">Objetos de sessão, como eventos e destinos, são carregados e a manipulação de eventos está ativa.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-126">Session objects, such as events and targets, are loaded and event handling is active.</span></span>|  
|<span data-ttu-id="ebdfa-127">Alterar</span><span class="sxs-lookup"><span data-stu-id="ebdfa-127">Alter</span></span>|<span data-ttu-id="ebdfa-128">ALTER EVENT SESSION, STATE=STOP</span><span class="sxs-lookup"><span data-stu-id="ebdfa-128">ALTER EVENT SESSION, STATE=STOP</span></span>|<span data-ttu-id="ebdfa-129">O processo do host para a sessão ativa, mas retém os metadados.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-129">The host process stops the active session but retains the metadata.</span></span>|  
|<span data-ttu-id="ebdfa-130">Remover</span><span class="sxs-lookup"><span data-stu-id="ebdfa-130">Drop</span></span>|<span data-ttu-id="ebdfa-131">DROP EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="ebdfa-131">DROP EVENT SESSION</span></span>|<span data-ttu-id="ebdfa-132">Dependendo se a sessão está ativa ou não, Descartar (DROP SESSION) excluirá os metadados e fechará a sessão ativa, ou excluirá os metadados da sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-132">Depending on whether or not the session is active, Drop (DROP SESSION) will delete the metadata and close the active session, or delete the session metadata.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="ebdfa-133">ALTER EVENT SESSION e DROP EVENT SESSION podem ser aplicados aos metadados, ou a uma sessão ativa e aos metadados.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-133">Both ALTER EVENT SESSION and DROP EVENT SESSION can be applied to the metadata or to an active session and the metadata.</span></span>  
  
## <a name="session-content-and-characteristics"></a><span data-ttu-id="ebdfa-134">Conteúdo da sessão e características</span><span class="sxs-lookup"><span data-stu-id="ebdfa-134">Session Content and Characteristics</span></span>  
 <span data-ttu-id="ebdfa-135">Sessões de evento estendidos têm limites implícitos sendo que a configuração de uma sessão não altera a configuração de outra sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-135">Extended Event sessions have implied boundaries in that the configuration of one session does not change the configuration of another session.</span></span> <span data-ttu-id="ebdfa-136">Contudo, esses limites não impedem que um evento ou destino seja usado em mais de uma sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-136">However, these boundaries do not prevent an event or target from being used in more than one session.</span></span>  
  
 <span data-ttu-id="ebdfa-137">A ilustração a seguir mostra o conteúdo da sessão e a relação entre pacotes e sessões.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-137">The following illustration shows session content and the relationship between packages and sessions.</span></span>  
  
 <span data-ttu-id="ebdfa-138">![Coexistência e compartilhamento de objetos em sessões.](../../database-engine/media/xesessions.gif "Coexistência e compartilhamento de objetos em sessões.")</span><span class="sxs-lookup"><span data-stu-id="ebdfa-138">![Object co-existance and sharing in sessions.](../../database-engine/media/xesessions.gif "Object co-existance and sharing in sessions.")</span></span>  
  
 <span data-ttu-id="ebdfa-139">Em relação à ilustração anterior, observe que:</span><span class="sxs-lookup"><span data-stu-id="ebdfa-139">Referring to the preceding illustration, note that:</span></span>  
  
-   <span data-ttu-id="ebdfa-140">O mapeamento entre objetos de pacote e sessões são muitos para muitos, o que significa que um objeto pode aparecer em várias sessões, e uma sessão pode conter vários objetos.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-140">The mapping between package objects and sessions is many to many, which means that an object can appear in several sessions, and a session can contain several objects.</span></span>  
  
-   <span data-ttu-id="ebdfa-141">O mesmo evento (Evento 1) ou destino (Destino 1) pode ser habilitado em mais de uma sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-141">The same event (Event 1) or target (Target 1) can be enabled in more than one session.</span></span>  
  
 <span data-ttu-id="ebdfa-142">As sessões têm as seguintes características:</span><span class="sxs-lookup"><span data-stu-id="ebdfa-142">Sessions have the following characteristics:</span></span>  
  
-   <span data-ttu-id="ebdfa-143">Ações e predicados estão associados a eventos em uma base por sessão.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-143">Actions and predicates are bound to events on a per-session basis.</span></span> <span data-ttu-id="ebdfa-144">Se você tem o Evento 1 na Sessão A com a Ação 1 e o Predicado Z, isso de forma alguma impedirá que você tenha o Evento 1 na Sessão B com a Ação 2 e a Ação 3 sem nenhum predicado.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-144">If you have Event 1 in Session A with Action 1 and Predicate Z, this will not in any way affect having Event 1 in Session B with Action 2 and Action 3 with no predicate.</span></span>  
  
-   <span data-ttu-id="ebdfa-145">As políticas são anexadas a sessões para controlar a utilização de buffer e expedição, e rastreamento de causalidade.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-145">Policies are attached to sessions to handle buffering and dispatch, and causality tracking.</span></span>  
  
 <span data-ttu-id="ebdfa-146">**Utilização de buffer e expedição**</span><span class="sxs-lookup"><span data-stu-id="ebdfa-146">**Buffering and dispatch**</span></span>  
  
 <span data-ttu-id="ebdfa-147">A utilização de buffer se refere a como os dados de evento serão armazenados enquanto uma sessão de evento estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-147">Buffering refers to how event data is stored while an event session is running.</span></span>  <span data-ttu-id="ebdfa-148">As políticas de utilização de buffer especificam o volume de memória a ser usado para dados de evento e a política de perda para os eventos.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-148">Buffering policies specify how much memory to use for event data, and the loss policy for the events.</span></span> <span data-ttu-id="ebdfa-149">A expedição refere-se ao tempo que os eventos permanecerão nos buffers antes de serem entregues aos destinos para processamento.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-149">Dispatch refers to the amount of time events will stay in buffers before being served to targets for processing.</span></span>  
  
 <span data-ttu-id="ebdfa-150">**Rastreamento de causalidade**</span><span class="sxs-lookup"><span data-stu-id="ebdfa-150">**Causality tracking**</span></span>  
  
 <span data-ttu-id="ebdfa-151">O rastreamento de causalidade proporciona capacidade para rastrear trabalho por tarefas múltiplas.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-151">Causality tracking provides the ability to track work across multiple tasks.</span></span> <span data-ttu-id="ebdfa-152">Quando o rastreamento de causalidade é habilitado, cada evento disparado tem uma ID exclusiva de atividade no sistema.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-152">When causality tracking is enabled, each event fired has a unique activity ID across the system.</span></span> <span data-ttu-id="ebdfa-153">A ID de atividade é uma combinação de um valor GUID que permanece constante em todos os eventos de uma tarefa e um número de sequência que é incrementado toda vez que um evento é disparado.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-153">The activity ID is a combination of a GUID value that remains constant across all events for a task, and a sequence number that is incremented each time an event is fired.</span></span> <span data-ttu-id="ebdfa-154">Quando uma tarefa gera trabalho em outra, a ID de atividade da tarefa pai é enviada à tarefa filho.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-154">When one task causes work to be done on another, the activity ID of the parent is sent to the child task.</span></span> <span data-ttu-id="ebdfa-155">A tarefa filho produz a ID de atividade do pai na primeira vez dispara um evento.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-155">The child task outputs the parent's activity ID the first time it fires an event.</span></span>  
  
 <span data-ttu-id="ebdfa-156">A arquitetura de eventos estendidos oferece um sistema flexível que permite a utilização de diversos objetos para serem usados em conjunto na solução de problemas específicos.</span><span class="sxs-lookup"><span data-stu-id="ebdfa-156">The Extended Events architecture provides a flexible system that allows a variety of objects to be used together to solve specific problems.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ebdfa-157">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="ebdfa-157">See Also</span></span>  
 [<span data-ttu-id="ebdfa-158">Eventos estendidos</span><span class="sxs-lookup"><span data-stu-id="ebdfa-158">Extended Events</span></span>](extended-events.md)  
  
  
