---
title: Opção SORT_IN_TEMPDB para índices | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- SORT_IN_TEMPDB option
- disk space [SQL Server], indexes
- space [SQL Server], indexes
- tempdb database [SQL Server], indexes
- indexes [SQL Server], tempdb database
- index creation [SQL Server], tempdb database
ms.assetid: 754a003f-fe51-4d10-975a-f6b8c04ebd35
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8feccc5b1d29617193f481569e10648c6ed77242
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684732"
---
# <a name="sort_in_tempdb-option-for-indexes"></a><span data-ttu-id="c79fa-102">Opção SORT_IN_TEMPDB para índices</span><span class="sxs-lookup"><span data-stu-id="c79fa-102">SORT_IN_TEMPDB Option For Indexes</span></span>
  <span data-ttu-id="c79fa-103">Quando você cria ou recria um índice, definindo a opção SORT_IN_TEMPDB como ON, você pode direcionar [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] para usar **tempdb** para armazenar os resultados intermediários de classificação utilizados para criar o índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-103">When you create or rebuild an index, by setting the SORT_IN_TEMPDB option to ON you can direct the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to use **tempdb** to store the intermediate sort results that are used to build the index.</span></span> <span data-ttu-id="c79fa-104">Embora essa opção aumente a quantidade de espaço temporário em disco usada para criar um índice, a opção pode reduzir o tempo necessário à criação ou recriação de um índice quando **tempdb** estiver em um conjunto de discos diferente do banco de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="c79fa-104">Although this option increases the amount of temporary disk space that is used to create an index, the option could reduce the time that is required to create or rebuild an index when **tempdb** is on a set of disks different from that of the user database.</span></span> <span data-ttu-id="c79fa-105">Para obter mais informações sobre **tempdb**, veja [Configurar a opção index create memory de configuração de servidor](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="c79fa-105">For more information about **tempdb**, see [Configure the index create memory Server Configuration Option](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span></span>  
  
## <a name="phases-of-index-building"></a><span data-ttu-id="c79fa-106">Fases da criação do índice</span><span class="sxs-lookup"><span data-stu-id="c79fa-106">Phases of Index Building</span></span>  
 <span data-ttu-id="c79fa-107">Conforme [!INCLUDE[ssDE](../../includes/ssde-md.md)] constrói um índice, ele passa pelas fases seguintes:</span><span class="sxs-lookup"><span data-stu-id="c79fa-107">As the [!INCLUDE[ssDE](../../includes/ssde-md.md)] builds an index, it goes through the following phases:</span></span>  
  
-   <span data-ttu-id="c79fa-108">O [!INCLUDE[ssDE](../../includes/ssde-md.md)] primeiro verifica as páginas de dados da tabela base para recuperar valores chave e constrói uma linha de folha de índice para cada linha de dados.</span><span class="sxs-lookup"><span data-stu-id="c79fa-108">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] first scans the data pages of the base table to retrieve key values and builds an index leaf row for each data row.</span></span> <span data-ttu-id="c79fa-109">Quando os buffers internos de classificação estiverem preenchidos com entradas de índice de folha, as entradas serão classificadas e serão gravadas no disco como uma execução de classificação intermediária.</span><span class="sxs-lookup"><span data-stu-id="c79fa-109">When the internal sort buffers have been filled with leaf index entries, the entries are sorted and written to disk as an intermediate sort run.</span></span> <span data-ttu-id="c79fa-110">O [!INCLUDE[ssDE](../../includes/ssde-md.md)] , em seguida, retoma a verificação da página de dados até que os buffers de classificação sejam preenchidos novamente.</span><span class="sxs-lookup"><span data-stu-id="c79fa-110">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] then resumes the data page scan until the sort buffers are again filled.</span></span> <span data-ttu-id="c79fa-111">Esse padrão de verificação de várias páginas de dados, seguido pela classificação e gravação de uma execução de classificação, continua até a conclusão do processamento de todas as linhas da tabela base.</span><span class="sxs-lookup"><span data-stu-id="c79fa-111">This pattern of scanning multiple data pages followed by sorting and writing a sort run continues until all the rows of the base table have been processed.</span></span>  
  
     <span data-ttu-id="c79fa-112">Em um índice clusterizado, as linhas de folha do índice são as linhas de dados da tabela; portanto, a execução intermediária de classificação contém todas as linhas de dados.</span><span class="sxs-lookup"><span data-stu-id="c79fa-112">In a clustered index, the leaf rows of the index are the data rows of the table; therefore, the intermediate sort runs contain all the data rows.</span></span> <span data-ttu-id="c79fa-113">Em um índice não clusterizado, as linhas de folha podem conter colunas não chave, mas são geralmente menores do que um índice clusterizado.</span><span class="sxs-lookup"><span data-stu-id="c79fa-113">In a nonclustered index, the leaf rows may contain nonkey columns, but are generally smaller than a clustered index.</span></span> <span data-ttu-id="c79fa-114">Se as chaves do índice forem grandes, ou se houver várias colunas não chave incluídas no índice, uma execução de classificação não clusterizado poderá ser grande.</span><span class="sxs-lookup"><span data-stu-id="c79fa-114">If the index keys are large, or there are several nonkey columns included in the index, a nonclustered sort run can be large.</span></span> <span data-ttu-id="c79fa-115">Para obter mais informações sobre como incluir colunas não chave, veja [Criar índices com colunas incluídas](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="c79fa-115">For more information about including nonkey columns, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
-   <span data-ttu-id="c79fa-116">O [!INCLUDE[ssDE](../../includes/ssde-md.md)] mescla as execuções classificadas de linhas de folha de índice em um único fluxo classificado.</span><span class="sxs-lookup"><span data-stu-id="c79fa-116">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] merges the sorted runs of index leaf rows into a single, sorted stream.</span></span> <span data-ttu-id="c79fa-117">O componente de mescla de classificação do [!INCLUDE[ssDE](../../includes/ssde-md.md)] inicia com a primeira página de cada execução de classificação, encontra a menor chave em todas as páginas, e transmite aquela linha de folha ao componente de criação do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-117">The sort merge component of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] starts with the first page of each sort run, finds the lowest key in all the pages, and passes that leaf row to the index create component.</span></span> <span data-ttu-id="c79fa-118">A próxima chave menor é processada, depois a próxima, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="c79fa-118">The next lowest key is processed, and then the next, and so on.</span></span> <span data-ttu-id="c79fa-119">Quando a última linha de índice de folha é extraída de uma página de execução de classificação, o processo alterna para próxima página daquela execução de classificação.</span><span class="sxs-lookup"><span data-stu-id="c79fa-119">When the last leaf index row is extracted from a sort run page, the process shifts to the next page from that sort run.</span></span> <span data-ttu-id="c79fa-120">Quando forem processadas todas as páginas em uma extensão de execução de classificação, a extensão será liberada.</span><span class="sxs-lookup"><span data-stu-id="c79fa-120">When all the pages in a sort run extent have been processed, the extent is freed.</span></span> <span data-ttu-id="c79fa-121">Conforme cada linha de índice de folha é transmitida ao componente de criação de índice, é incluída em uma página de índice de folha no buffer.</span><span class="sxs-lookup"><span data-stu-id="c79fa-121">As each leaf index row is passed to the index create component, it is included in a leaf index page in the buffer.</span></span> <span data-ttu-id="c79fa-122">Cada página de folha é gravada conforme é preenchida.</span><span class="sxs-lookup"><span data-stu-id="c79fa-122">Each leaf page is written as it is filled.</span></span> <span data-ttu-id="c79fa-123">Conforme as páginas de folha são gravadas, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] também constrói os níveis superiores do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-123">As leaf pages are written, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] also builds the upper levels of the index.</span></span> <span data-ttu-id="c79fa-124">Cada página de índice de nível superior é gravada conforme é preenchida.</span><span class="sxs-lookup"><span data-stu-id="c79fa-124">Each upper level index page is written when it is filled.</span></span>  
  
## <a name="sort_in_tempdb-option"></a><span data-ttu-id="c79fa-125">opção SORT_IN_TEMPDB</span><span class="sxs-lookup"><span data-stu-id="c79fa-125">SORT_IN_TEMPDB Option</span></span>  
 <span data-ttu-id="c79fa-126">Quando SORT_IN_TEMPDB é definido como OFF, o padrão, as execuções da classificação são armazenadas no grupo de arquivos de destino.</span><span class="sxs-lookup"><span data-stu-id="c79fa-126">When SORT_IN_TEMPDB is set to OFF, the default, the sort runs are stored in the destination filegroup.</span></span> <span data-ttu-id="c79fa-127">Durante a primeira fase de criação do índice, as leituras alternadas das páginas da tabela base e gravação das execuções de classificação movem os cabeçalhos de leitura/gravação de disco de uma área do disco para outra.</span><span class="sxs-lookup"><span data-stu-id="c79fa-127">During the first phase of creating the index, the alternating reads of the base table pages and writes of the sort runs move the disk read/write heads from one area of the disk to another.</span></span> <span data-ttu-id="c79fa-128">Os cabeçalhos estão na área da página de dados conforme as páginas de dados são verificadas.</span><span class="sxs-lookup"><span data-stu-id="c79fa-128">The heads are in the data page area as the data pages are scanned.</span></span> <span data-ttu-id="c79fa-129">Eles se mudam para uma área de espaço livre quando os buffers de classificação forem preenchidos e a execução atual de classificação estiver gravada no disco e, em seguida, voltam para a área da página de dados conforme retoma a verificação da página da tabela.</span><span class="sxs-lookup"><span data-stu-id="c79fa-129">They move to an area of free space when the sort buffers fill and the current sort run has to be written to disk, and then move back to the data page area as the table page scan is resumed.</span></span> <span data-ttu-id="c79fa-130">O movimento do cabeçalho de leitura/gravação é maior na segunda fase.</span><span class="sxs-lookup"><span data-stu-id="c79fa-130">The read/write head movement is greater in the second phase.</span></span> <span data-ttu-id="c79fa-131">Neste momento, o processo de classificação está normalmente alternando leituras de cada área de execução de classificação.</span><span class="sxs-lookup"><span data-stu-id="c79fa-131">At that time the sort process is typically alternating reads from each sort run area.</span></span> <span data-ttu-id="c79fa-132">Ambas as execuções de classificação e as novas páginas de índice são criadas no grupo de arquivos de destino.</span><span class="sxs-lookup"><span data-stu-id="c79fa-132">Both the sort runs and the new index pages are built in the destination filegroup.</span></span> <span data-ttu-id="c79fa-133">Isto significa que ao mesmo tempo em que o [!INCLUDE[ssDE](../../includes/ssde-md.md)] está propagando leituras entre as execuções de classificação, ele precisa ir periodicamente até as extensões do índice para gravar novas páginas de índice conforme forem preenchidas.</span><span class="sxs-lookup"><span data-stu-id="c79fa-133">This means that at the same time the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is spreading reads across the sort runs, it has to periodically jump to the index extents to write new index pages as they are filled.</span></span>  
  
 <span data-ttu-id="c79fa-134">Se a opção SORT_IN_TEMPDB for definida como ON e **tempdb** estiver em um conjunto separado de discos do grupo de arquivos de destino, durante a primeira fase, as leituras das páginas de dados ocorrerão em um disco diferente da gravação na área de trabalho de classificação em **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="c79fa-134">If the SORT_IN_TEMPDB option is set to ON and **tempdb** is on a separate set of disks from the destination filegroup, during the first phase, the reads of the data pages occur on a different disk from the writes to the sort work area in **tempdb**.</span></span> <span data-ttu-id="c79fa-135">Isto significa que as leituras de disco das chaves de dados geralmente continuam mais em série pelo disco, e a gravação no disco **tempdb** também é geralmente em série, conforme a gravação faz para criar o índice final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-135">This means the disk reads of the data keys generally continue more serially across the disk, and the writes to the **tempdb** disk also are generally serial, as do the writes to build the final index.</span></span> <span data-ttu-id="c79fa-136">Mesmo se outros usuários estiverem usando o banco de dados e acessando endereços de disco separados, o padrão geral de leituras e gravações é mais eficiente quando SORT_IN_TEMPDB é especificado, do que quando não é.</span><span class="sxs-lookup"><span data-stu-id="c79fa-136">Even if other users are using the database and accessing separate disk addresses, the overall pattern of reads and writes are more efficient when SORT_IN_TEMPDB is specified than when it is not.</span></span>  
  
 <span data-ttu-id="c79fa-137">A opção SORT_IN_TEMPDB pode melhorar a proximidade de extensões de índice, especialmente se a operação CREATE INDEX não estiver sendo processada em paralelo.</span><span class="sxs-lookup"><span data-stu-id="c79fa-137">The SORT_IN_TEMPDB option may improve the contiguity of index extents, especially if the CREATE INDEX operation is not being processed in parallel.</span></span> <span data-ttu-id="c79fa-138">As extensões da área de trabalho de classificação são liberadas um tanto aleatoriamente com respeito à localização no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c79fa-138">The sort work area extents are freed on a somewhat random basis with regard to their location in the database.</span></span> <span data-ttu-id="c79fa-139">Se as áreas de trabalho de classificação estiverem no grupo de arquivos de destino, conforme as extensões de trabalho de classificação são liberadas, elas podem ser adquiridas pelas solicitações de extensões para manterem a estrutura do índice conforme ele for construído.</span><span class="sxs-lookup"><span data-stu-id="c79fa-139">If the sort work areas are contained in the destination filegroup, as the sort work extents are freed, they can be acquired by the requests for extents to hold the index structure as it is built.</span></span> <span data-ttu-id="c79fa-140">Isto pode distribuir aleatoriamente as localizações das extensões de índice até certo ponto.</span><span class="sxs-lookup"><span data-stu-id="c79fa-140">This can randomize the locations of the index extents to a degree.</span></span> <span data-ttu-id="c79fa-141">Se as extensões de classificação forem mantidas separadamente em **tempdb**, a sequência de liberação não afetará a localização das extensões do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-141">If the sort extents are held separately in **tempdb**, the sequence in which they are freed has no effect on the location of the index extents.</span></span> <span data-ttu-id="c79fa-142">Além disso, quando as execuções intermediárias de classificação são armazenadas em **tempdb** em vez do grupo de arquivos de destino, existe mais espaço disponível no grupo de arquivos de destino.</span><span class="sxs-lookup"><span data-stu-id="c79fa-142">Also, when the intermediate sort runs are stored in **tempdb** instead of the destination filegroup, there is more space available in the destination filegroup.</span></span> <span data-ttu-id="c79fa-143">Isto aumenta as chances de as extensões de índice ser contíguas.</span><span class="sxs-lookup"><span data-stu-id="c79fa-143">This increases the chances that index extents will be contiguous.</span></span>  
  
 <span data-ttu-id="c79fa-144">A opção SORT_IN_TEMPDB afeta somente a instrução atual.</span><span class="sxs-lookup"><span data-stu-id="c79fa-144">The SORT_IN_TEMPDB option affects only the current statement.</span></span> <span data-ttu-id="c79fa-145">Nenhum metadado registra se o índice foi ou não classificado em **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="c79fa-145">No metadata records that the index was or was not sorted in **tempdb**.</span></span> <span data-ttu-id="c79fa-146">Por exemplo, se você criar um índice não clusterizado usando a opção SORT_IN_TEMPDB, e mais tarde criar um índice clusterizado sem especificar a opção, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] não usará a opção quando recriar o índice não clusterizado.</span><span class="sxs-lookup"><span data-stu-id="c79fa-146">For example, if you create a nonclustered index using the SORT_IN_TEMPDB option, and at a later time create a clustered index without specifying the option, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not use the option when it re-creates the nonclustered index.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c79fa-147">Se a operação de classificação não for necessária, ou se a classificação puder ser executada na memória, a opção SORT_IN_TEMPDB será ignorada.</span><span class="sxs-lookup"><span data-stu-id="c79fa-147">If a sort operation is not required or if the sort can be performed in memory, the SORT_IN_TEMPDB option is ignored.</span></span>  
  
## <a name="disk-space-requirements"></a><span data-ttu-id="c79fa-148">Requisitos de espaço em disco</span><span class="sxs-lookup"><span data-stu-id="c79fa-148">Disk Space Requirements</span></span>  
 <span data-ttu-id="c79fa-149">Quando você definir a opção SORT_IN_TEMPDB como ON, você deverá ter espaço livre em disco suficiente disponível em **tempdb** para manter as execuções de classificação intermediárias e espaço livre em disco suficiente no grupo de arquivos de destino para manter o novo índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-149">When you set the SORT_IN_TEMPDB option to ON, you must have sufficient free disk space available in **tempdb** to hold the intermediate sort runs, and enough free disk space in the destination filegroup to hold the new index.</span></span> <span data-ttu-id="c79fa-150">A instrução CREATE INDEX falha se houver espaço livre insuficiente e se por alguma razão os bancos de dados não puderem crescer automaticamente para adquirir mais espaço, considerando que nenhum espaço no disco ou se o crescimento automático estiver definido como off.</span><span class="sxs-lookup"><span data-stu-id="c79fa-150">The CREATE INDEX statement fails if there is insufficient free space and there is some reason the databases cannot autogrow to acquire more space, such as no space on the disk or autogrow is set to off.</span></span>  
  
 <span data-ttu-id="c79fa-151">Se SORT_IN_TEMPDB for definido como OFF, o espaço livre em disco disponível no grupo de arquivos de destino deve ser praticamente do tamanho do índice final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-151">If SORT_IN_TEMPDB is set to OFF, the available free disk space in the destination filegroup must be roughly the size of the final index.</span></span> <span data-ttu-id="c79fa-152">Durante a primeira fase, as execuções de classificação são criadas e requerem praticamente a mesma quantidade de espaço do índice final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-152">During the first phase, the sort runs are built and require about the same amount of space as the final index.</span></span> <span data-ttu-id="c79fa-153">Durante a segunda fase, cada extensão de execução de classificação é liberada depois de ser processada.</span><span class="sxs-lookup"><span data-stu-id="c79fa-153">During the second phase, each sort run extent is freed after it has been processed.</span></span> <span data-ttu-id="c79fa-154">Isto significa que as extensões de execução de classificação são liberadas aproximadamente a mesma taxa de aquisição das extensões para manter as páginas do índice final; portanto, os requisitos de espaço geral não excedem muito o tamanho do índice final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-154">This means that sort run extents are freed at about the same rate at which extents are acquired to hold the final index pages; therefore, the overall space requirements do not greatly exceed the size of the final index.</span></span> <span data-ttu-id="c79fa-155">Um efeito colateral disto é que se a quantidade de espaço livre for muito perto do tamanho do índice final, o [!INCLUDE[ssDE](../../includes/ssde-md.md)] geralmente vai reutilizar as extensões de execução de classificação muito depressa depois que forem liberadas.</span><span class="sxs-lookup"><span data-stu-id="c79fa-155">One side effect of this is that if the amount of free space is very close to the size of the final index, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] will generally reuse the sort run extents very quickly after they are freed.</span></span> <span data-ttu-id="c79fa-156">Como as extensões de execução de classificação são liberadas de forma um pouco aleatória, isto reduz a continuidade das extensões do índice neste cenário.</span><span class="sxs-lookup"><span data-stu-id="c79fa-156">Because the sort run extents are freed in a somewhat random manner, this reduces the continuity of the index extents in this scenario.</span></span> <span data-ttu-id="c79fa-157">Se SORT_IN_TEMPDB for definido como OFF, a continuidade das extensões do índice é melhorada se houver espaço livre suficiente disponível no grupo de arquivos de destino, que as extensões do índice podem ser alocadas de um pool contíguo, em vez das extensões de corrida de classificação recentemente desalocadas.</span><span class="sxs-lookup"><span data-stu-id="c79fa-157">If SORT_IN_TEMPDB is set to OFF, the continuity of the index extents is improved if there is sufficient free space available in the destination filegroup that the index extents can be allocated from a contiguous pool instead of from the freshly deallocated sort run extents.</span></span>  
  
 <span data-ttu-id="c79fa-158">Quando você criar um índice não clusterizado, você deve ter disponível, como espaço livre:</span><span class="sxs-lookup"><span data-stu-id="c79fa-158">When you create a nonclustered index, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="c79fa-159">Se SORT_IN_TEMPDB for definido como ON, deve haver espaço livre suficiente em **tempdb** para armazenar as execuções de classificação, e espaço livre suficiente no grupo de arquivos de destino para armazenar a estrutura final do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-159">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs, and sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="c79fa-160">As execuções de classificação contêm as linhas de folha do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-160">The sort runs contain the leaf rows of the index.</span></span>  
  
-   <span data-ttu-id="c79fa-161">Se SORT_IN_TEMPDB for definido como OFF, o espaço livre no grupo de arquivos de destino deve ser grande o suficiente para armazenar a estrutura final do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-161">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final index structure.</span></span> <span data-ttu-id="c79fa-162">A continuidade da extensão do índice pode ser melhorada se houver mais espaço livre disponível.</span><span class="sxs-lookup"><span data-stu-id="c79fa-162">The continuity of the index extends may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="c79fa-163">Quando você criar um índice clusterizado em uma tabela que não tem índices não clusterizado, você deverá ter disponível como espaço livre:</span><span class="sxs-lookup"><span data-stu-id="c79fa-163">When you create a clustered index on a table that does not have nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="c79fa-164">Se SORT_IN_TEMPDB for definido como ON, deverá haver espaço livre suficiente em **tempdb** para armazenar as execuções de classificação.</span><span class="sxs-lookup"><span data-stu-id="c79fa-164">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs.</span></span> <span data-ttu-id="c79fa-165">Isso inclui as linhas de dados da tabela.</span><span class="sxs-lookup"><span data-stu-id="c79fa-165">These include the data rows of the table.</span></span> <span data-ttu-id="c79fa-166">Deve haver espaço livre suficiente no grupo de arquivos de destino para armazenar a estrutura final do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-166">There must be sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="c79fa-167">Isso inclui as linhas de dados da tabela e o índice árvore B.</span><span class="sxs-lookup"><span data-stu-id="c79fa-167">This includes the data rows of the table and the index B-tree.</span></span> <span data-ttu-id="c79fa-168">Você pode precisar ajustar a estimativa de fatores, como ter um tamanho grande de chave ou um fator de preenchimento com um valor baixo.</span><span class="sxs-lookup"><span data-stu-id="c79fa-168">You may have to adjust the estimate for factors such as having a large key size or a fill factor with a low value.</span></span>  
  
-   <span data-ttu-id="c79fa-169">Se SORT_IN_TEMPDB for definido como OFF, o espaço livre no grupo de arquivos de destino deverá ser grande o suficiente para armazenar a tabela final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-169">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="c79fa-170">Isso inclui a estrutura do índice.</span><span class="sxs-lookup"><span data-stu-id="c79fa-170">This includes the index structure.</span></span> <span data-ttu-id="c79fa-171">A continuidade da tabela e da extensão do índice poderá ser melhorada se houver mais espaço livre disponível.</span><span class="sxs-lookup"><span data-stu-id="c79fa-171">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="c79fa-172">Quando você criar um índice clusterizado em uma tabela que tem índices não clusterizado, você deverá ter disponível como espaço livre:</span><span class="sxs-lookup"><span data-stu-id="c79fa-172">When you create a clustered index on a table that has nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="c79fa-173">Se SORT_IN_TEMPDB for definido como ON, deve haver espaço livre suficiente em **tempdb** para armazenar a coleção de execuções de classificação para o maior índice, normalmente o índice clusterizado, e espaço livre suficiente no grupo de arquivos de destino para armazenar as estruturas finais de todos os índices.</span><span class="sxs-lookup"><span data-stu-id="c79fa-173">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the collection of sort runs for the largest index, typically the clustered index, and sufficient free space in the destination filegroup to store the final structures of all the indexes.</span></span> <span data-ttu-id="c79fa-174">Isso inclui o índice clusterizado que contém as linhas de dados da tabela.</span><span class="sxs-lookup"><span data-stu-id="c79fa-174">This includes the clustered index that contains the data rows of the table.</span></span>  
  
-   <span data-ttu-id="c79fa-175">Se SORT_IN_TEMPDB for definido como OFF, o espaço livre no grupo de arquivos de destino deverá ser grande o suficiente para armazenar a tabela final.</span><span class="sxs-lookup"><span data-stu-id="c79fa-175">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="c79fa-176">Isso inclui as estruturas de todos os índices.</span><span class="sxs-lookup"><span data-stu-id="c79fa-176">This includes the structures of all the indexes.</span></span> <span data-ttu-id="c79fa-177">A continuidade da tabela e da extensão do índice poderá ser melhorada se houver mais espaço livre disponível.</span><span class="sxs-lookup"><span data-stu-id="c79fa-177">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="c79fa-178">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="c79fa-178">Related Tasks</span></span>  
 [<span data-ttu-id="c79fa-179">CREATE INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c79fa-179">CREATE INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-index-transact-sql)  
  
 [<span data-ttu-id="c79fa-180">Reorganizar e recompilar índices</span><span class="sxs-lookup"><span data-stu-id="c79fa-180">Reorganize and Rebuild Indexes</span></span>](indexes.md)  
  
## <a name="related-content"></a><span data-ttu-id="c79fa-181">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="c79fa-181">Related Content</span></span>  
 [<span data-ttu-id="c79fa-182">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c79fa-182">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
 [<span data-ttu-id="c79fa-183">Configurar a opção index create memory de configuração de servidor</span><span class="sxs-lookup"><span data-stu-id="c79fa-183">Configure the index create memory Server Configuration Option</span></span>](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md)  
  
 [<span data-ttu-id="c79fa-184">Requisitos de espaço em disco para operações de DDL de índice</span><span class="sxs-lookup"><span data-stu-id="c79fa-184">Disk Space Requirements for Index DDL Operations</span></span>](disk-space-requirements-for-index-ddl-operations.md)  
  
  
