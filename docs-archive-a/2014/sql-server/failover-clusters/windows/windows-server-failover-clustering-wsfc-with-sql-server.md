---
title: WSFC (Clustering de Failover do Windows Server) com o SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], WSFC clusters
- Windows Server Failover Clustering (WSFC), with SQL Server
- WSFC, with SQL Server
- quorum [SQL Server]
- failover clustering [SQL Server], AlwaysOn Availability Groups
ms.assetid: 79d2ea5a-edd8-4b3b-9502-96202057b01a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e1fec03d7eb7a63353fd8eaea8c1e7051a306049
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87573556"
---
# <a name="windows-server-failover-clustering-wsfc-with-sql-server"></a><span data-ttu-id="8c1ad-102">WSFC (Windows Server Failover Clustering) com o SQL Server</span><span class="sxs-lookup"><span data-stu-id="8c1ad-102">Windows Server Failover Clustering (WSFC) with SQL Server</span></span>
  <span data-ttu-id="8c1ad-103">Um *cluster WSFC (Windows Server Failover Clustering)* é um grupo de servidores independentes que funcionam em conjunto para aumentar a disponibilidade de aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-103">A *Windows Server Failover Clustering* (WSFC) cluster is a group of independent servers that work together to increase the availability of applications and services.</span></span> [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="8c1ad-104">tira proveito dos serviços e recursos do WSFC para oferecer suporte às instâncias de cluster de failover do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] e do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="8c1ad-104">takes advantage of WSFC services and capabilities to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instances.</span></span>

 

##  <a name="terms-and-definitions"></a><a name="TermsAndDefs"></a> <span data-ttu-id="8c1ad-105">Termos e definições</span><span class="sxs-lookup"><span data-stu-id="8c1ad-105">Terms and Definitions</span></span>
 <span data-ttu-id="8c1ad-106">Cluster WSFC um Cluster WSFC (Windows Server failover clustering) é um grupo de servidores independentes que trabalham juntos para aumentar a disponibilidade de aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-106">WSFC cluster A Windows Server Failover Clustering (WSFC) cluster is a group of independent servers that work together to increase the availability of applications and services.</span></span>

 <span data-ttu-id="8c1ad-107">Instância de cluster de failover uma instância de um serviço do Windows que gerencia um recurso de endereço IP, um recurso de nome de rede e recursos adicionais que são necessários para executar um ou mais aplicativos ou serviços.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-107">Failover cluster instance An instance of a Windows service that manages an IP address resource, a network name resource, and additional resources that are required to run one or more applications or services.</span></span> <span data-ttu-id="8c1ad-108">Os clientes podem usar o nome de rede para acessar os recursos no grupo, semelhante ao uso de um nome de computador para acessar os serviços em um servidor físico.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-108">Clients can use the network name to access the resources in the group, similar to using a computer name to access the services on a physical server.</span></span> <span data-ttu-id="8c1ad-109">Porém, como uma instância de cluster de failover é um grupo, seu failover pode ser feito em outro nó sem afetar o nome ou o endereço subjacente.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-109">However, because a failover cluster instance is a group, it can be failed over to another node without affecting the underlying name or address.</span></span>

 <span data-ttu-id="8c1ad-110">Nó um sistema Microsoft Windows Server que é um membro ativo ou inativo de um cluster de servidores.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-110">Node A Microsoft Windows Server system that is an active or inactive member of a server cluster.</span></span>

 <span data-ttu-id="8c1ad-111">Recurso de cluster uma entidade física ou lógica que pode ser de propriedade de um nó, colocada online e colocada offline, movida entre os nós e gerenciada como um objeto de cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-111">Cluster resource A physical or logical entity that can be owned by a node, brought online and taken offline, moved between nodes, and managed as a cluster object.</span></span> <span data-ttu-id="8c1ad-112">Um recurso de cluster pode ser de propriedade de apenas um único nó em determinado momento.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-112">A cluster resource can be owned by only a single node at any point in time.</span></span>

 <span data-ttu-id="8c1ad-113">Grupo de recursos uma coleção de recursos de cluster gerenciados como um único objeto de cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-113">Resource group A collection of cluster resources managed as a single cluster object.</span></span> <span data-ttu-id="8c1ad-114">Normalmente, um grupo de recursos contém todos os recursos de cluster que são necessário para a execução de um aplicativo ou serviço específico.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-114">Typically a resource group contains all of the cluster resources that are required to run a specific application or service.</span></span> <span data-ttu-id="8c1ad-115">Failover e failback sempre agem em grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-115">Failover and failback always act on resource groups.</span></span>

 <span data-ttu-id="8c1ad-116">Dependência de recursos um recurso do qual outro recurso depende.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-116">Resource dependency A resource on which another resource depends.</span></span> <span data-ttu-id="8c1ad-117">Se o recurso A depender do recurso B, B será uma dependência de A.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-117">If resource A depends on resource B, then B is a dependency of A.</span></span>

 <span data-ttu-id="8c1ad-118">O nome da rede recurso um nome de servidor lógico que é gerenciado como um recurso de cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-118">Network name resource A logical server name that is managed as a cluster resource.</span></span> <span data-ttu-id="8c1ad-119">Um recurso de nome de rede deve ser usado com um recurso de endereço IP.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-119">A network name resource must be used with an IP address resource.</span></span>

 <span data-ttu-id="8c1ad-120">Proprietário preferencial um nó no qual um grupo de recursos prefere ser executado.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-120">Preferred owner A node on which a resource group prefers to run.</span></span> <span data-ttu-id="8c1ad-121">Cada grupo de recursos é associado a uma lista de proprietários preferidos classificados em ordem de preferência.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-121">Each resource group is associated with a list of preferred owners sorted in order of preference.</span></span> <span data-ttu-id="8c1ad-122">Durante o failover automático, o grupo de recursos é movido para o próximo nó preferido na lista de proprietários preferidos.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-122">During automatic failover, the resource group is moved to the next preferred node in the preferred owner list.</span></span>

 <span data-ttu-id="8c1ad-123">Possível proprietário um nó secundário no qual um recurso pode ser executado.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-123">Possible owner A secondary node on which a resource can run.</span></span> <span data-ttu-id="8c1ad-124">Cada grupo de recursos é associado a uma lista de possíveis proprietários.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-124">Each resource group is associated with a list of possible owners.</span></span> <span data-ttu-id="8c1ad-125">Os grupos de recursos podem fazer failover apenas nos nós listados como possíveis proprietários.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-125">Resource groups can fail over only to nodes that are listed as possible owners.</span></span>

 <span data-ttu-id="8c1ad-126">Modo de quorum a configuração de quorum em um cluster de failover que determina o número de falhas de nó que o cluster pode sustentar.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-126">Quorum mode The quorum configuration in a failover cluster that determines the number of node failures that the cluster can sustain.</span></span>

 <span data-ttu-id="8c1ad-127">Quorum forçado o processo para iniciar o cluster, embora apenas uma minoria dos elementos necessários para o quorum esteja em comunicação.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-127">Forced quorum The process to start the cluster even though only a minority of the elements that are required for quorum are in communication.</span></span>

 <span data-ttu-id="8c1ad-128">Para obter mais informações, consulte: [Glossário de cluster de failover](/previous-versions/windows/desktop/MsCS/server-cluster-glossary)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-128">For more information, see: [Failover Cluster Glossary](/previous-versions/windows/desktop/MsCS/server-cluster-glossary)</span></span>

##  <a name="overview-of-windows-server-failover-clustering"></a><a name="Overview"></a> <span data-ttu-id="8c1ad-129">Visão geral do Windows Server Failover Clustering</span><span class="sxs-lookup"><span data-stu-id="8c1ad-129">Overview of Windows Server Failover Clustering</span></span>
 <span data-ttu-id="8c1ad-130">O Windows Server Failover Clustering fornece recursos de infraestrutura que dão suporte aos cenários de alta disponibilidade e recuperação de desastres dos aplicativos de servidor hospedados, como o Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e o Microsoft Exchange.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-130">Windows Server Failover Clustering provides infrastructure features that support the high-availability and disaster recovery scenarios of hosted server applications such as Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and Microsoft Exchange.</span></span> <span data-ttu-id="8c1ad-131">Se houver falha em um nó de cluster ou serviço, os serviços que foram hospedados naquele nó poderão ser transferidos automática ou manualmente para outro nó disponível em um processo conhecido como *failover*.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-131">If a cluster node or service fails, the services that were hosted on that node can be automatically or manually transferred to another available node in a process known as *failover*.</span></span>

 <span data-ttu-id="8c1ad-132">Os nós do cluster do WSFC funcionam em conjunto para fornecer coletivamente estes tipos de recursos:</span><span class="sxs-lookup"><span data-stu-id="8c1ad-132">The nodes in the WSFC cluster work together to collectively provide these types of capabilities:</span></span>

-   <span data-ttu-id="8c1ad-133">**Metadados distribuídos e notificações.**</span><span class="sxs-lookup"><span data-stu-id="8c1ad-133">**Distributed metadata and notifications.**</span></span> <span data-ttu-id="8c1ad-134">O serviço WSFC e os metadados de aplicativos hospedados são mantidos em cada nó do cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-134">WSFC service and hosted application metadata is maintained on each node in the cluster.</span></span> <span data-ttu-id="8c1ad-135">Esses metadados incluem a configuração e o status do WSFC, além das configurações dos aplicativos hospedados.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-135">This metadata includes WSFC configuration and status in addition to hosted application settings.</span></span> <span data-ttu-id="8c1ad-136">As alterações nos metadados ou no status de um nó são propagadas automaticamente para os outros nós do cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-136">Changes to a node's metadata or status are automatically propagated to the other nodes in the cluster.</span></span>

-   <span data-ttu-id="8c1ad-137">**Gerenciamento de recursos.**</span><span class="sxs-lookup"><span data-stu-id="8c1ad-137">**Resource management.**</span></span> <span data-ttu-id="8c1ad-138">Os nós individuais do cluster podem fornecer recursos físicos, como armazenamento anexado diretamente, interfaces de rede e acesso a armazenamento em disco compartilhado.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-138">Individual nodes in the cluster may provide physical resources such as direct-attached storage, network interfaces, and access to shared disk storage.</span></span> <span data-ttu-id="8c1ad-139">Os aplicativos hospedados se registram como um recurso de cluster e podem configurar dependências de inicialização e de integridade em outros recursos.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-139">Hosted applications register themselves as a cluster resource, and may configure startup and health dependencies upon other resources.</span></span>

-   <span data-ttu-id="8c1ad-140">**Monitoramento de integridade.**</span><span class="sxs-lookup"><span data-stu-id="8c1ad-140">**Health monitoring.**</span></span> <span data-ttu-id="8c1ad-141">A detecção de integridade entre nós e de nó primário é realizada por meio de uma combinação de comunicações de rede de estilo de pulsação e de monitoramento de recursos.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-141">Inter-node and primary node health detection is accomplished through a combination of heartbeat-style network communications and resource monitoring.</span></span> <span data-ttu-id="8c1ad-142">A integridade geral do cluster é determinada pelos votos de um quorum de nós no cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-142">The overall health of the cluster is determined by the votes of a quorum of nodes in the cluster.</span></span>

-   <span data-ttu-id="8c1ad-143">**Coordenação de failover.**</span><span class="sxs-lookup"><span data-stu-id="8c1ad-143">**Failover coordination.**</span></span> <span data-ttu-id="8c1ad-144">Cada recurso é configurado para ser hospedado em um nó primário, e cada um deles pode ser transferido automática ou manualmente para um ou mais nós secundários.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-144">Each resource is configured to be hosted on a primary node, and each can be automatically or manually transferred to one or more secondary nodes.</span></span> <span data-ttu-id="8c1ad-145">Uma política de failover baseado em integridade controla a transferência automática de propriedade de recurso entre nós.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-145">A health-based failover policy controls automatic transfer of resource ownership between nodes.</span></span> <span data-ttu-id="8c1ad-146">Os nós e os aplicativos hospedados são notificados quando ocorre um failover para que possam reagir de maneira apropriada.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-146">Nodes and hosted applications are notified when failover occurs so that they may react appropriately.</span></span>

 <span data-ttu-id="8c1ad-147">Para obter mais informações, consulte: [Clusters de failover no Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-147">For more information, see: [Failover Clusters in Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span></span>

##  <a name="sql-server-alwayson-technologies-and-wsfc"></a><a name="AlwaysOnWsfcTech"></a><span data-ttu-id="8c1ad-148">SQL Server tecnologias AlwaysOn e WSFC</span><span class="sxs-lookup"><span data-stu-id="8c1ad-148">SQL Server AlwaysOn Technologies and WSFC</span></span>
 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="8c1ad-149">O *AlwaysOn* é uma nova solução de alta disponibilidade e recuperação de desastres que aproveita o WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-149">*AlwaysOn* is a new high availability and disaster recovery solution that takes advantage of WSFC.</span></span> <span data-ttu-id="8c1ad-150">AlwaysOn fornece uma solução integrada e flexível, que aumenta a disponibilidade do aplicativo, fornece melhor retorno em investimentos de hardware e simplifica a implantação e o gerenciamento de alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-150">AlwaysOn provides an integrated, flexible solution that increases application availability, provides better returns on hardware investments, and simplifies high availability deployment and management.</span></span>

 <span data-ttu-id="8c1ad-151">As Instâncias de Cluster de Failover [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] e AlwaysOn usam o WSFC como uma tecnologia de plataforma, registrando componentes como recursos de cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-151">Both [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and AlwaysOn Failover Cluster Instances use WSFC as a platform technology, registering components as WSFC cluster resources.</span></span>  <span data-ttu-id="8c1ad-152">Os recursos relacionados são combinados em um *grupo de recursos*, que podem ser tornados dependentes de outros recursos de cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-152">Related resources are combined into a *resource group*, which can be made dependent upon other WSFC cluster resources.</span></span> <span data-ttu-id="8c1ad-153">O serviço de cluster do WSFC pode detectar e sinalizar a necessidade de reiniciar a instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ou fazer failover automaticamente em um nó de servidor diferente no cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-153">The WSFC cluster service can then sense and signal the need to restart the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance or automatically fail it over to a different server node in the WSFC cluster.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="8c1ad-154">Para aproveitar ao máximo as tecnologias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn, você deve aplicar vários pré-requisitos relacionados ao WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-154">To take full advantage of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn technologies, you should apply several WSFC-related prerequisites.</span></span>
> 
>  <span data-ttu-id="8c1ad-155">Para obter mais informações, consulte: [pré-requisitos, restrições e recomendações para Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-155">For more information, see: [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md)</span></span>

### <a name="instance-level-high-availability-with-alwayson-failover-cluster-instances"></a><span data-ttu-id="8c1ad-156">Alta disponibilidade em nível de instância com instâncias de cluster de failover AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="8c1ad-156">Instance-level High Availability with AlwaysOn Failover Cluster Instances</span></span>
 <span data-ttu-id="8c1ad-157">Uma *FCI (Instância de Cluster de Failover)* AlwaysOn é uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instalada em nós em um cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-157">An AlwaysOn *Failover Cluster Instance* (FCI) is a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that is installed across nodes in a WSFC cluster.</span></span> <span data-ttu-id="8c1ad-158">Esse tipo de instância tem dependências de recursos no armazenamento de disco compartilhado (via Fibre Channel ou SAN iSCSI) e em um nome de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-158">This type of instance has resource dependencies on shared disk storage (via Fibre Channel or iSCSI SAN) and on a virtual network name.</span></span> <span data-ttu-id="8c1ad-159">O nome de rede virtual tem uma dependência de recurso em um ou mais endereços IP virtuais, cada um em uma sub-rede diferente.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-159">The virtual network name has a resource dependency on one or more virtual IP addresses, each in a different subnet.</span></span> <span data-ttu-id="8c1ad-160">O serviço do SQL Server e o serviço SQL Server Agent são registrados como recursos; ambos se tornam dependentes do recurso de nome de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-160">The SQL Server service and the SQL Server Agent service are registered as resources, and both are made dependent upon the virtual network name resource.</span></span>

 <span data-ttu-id="8c1ad-161">No caso de um failover, o serviço WSFC transfere a propriedade dos recursos da instância para um nó de failover designado.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-161">In the event of a failover, the WSFC service transfers ownership of instance's resources to a designated failover node.</span></span> <span data-ttu-id="8c1ad-162">A instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] é então reiniciada no nó de failover e os bancos de dados são recuperados da maneira usual.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is then re-started on the failover node, and databases are recovered as usual.</span></span> <span data-ttu-id="8c1ad-163">Em qualquer momento determinado, apenas um único nó do cluster pode hospedar a FCI e os recursos subjacentes.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-163">At any given moment, only a single node in the cluster can host the FCI and underlying resources.</span></span>

> [!NOTE]
>  <span data-ttu-id="8c1ad-164">Uma Instância de Cluster de Failover AlwaysOn exige armazenamento em disco compartilhado simétrico, como uma SAN (rede de área de armazenamento) ou um compartilhamento de arquivos SMB.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-164">An AlwaysOn Failover Cluster Instance requires symmetrical shared disk storage such as a storage area network (SAN) or SMB file share.</span></span>  <span data-ttu-id="8c1ad-165">Os volumes de armazenamento de disco compartilhados devem estar disponíveis a todos os nós de failover potenciais no cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-165">The shared disk storage volumes must be available to all potential failover nodes in the WSFC cluster.</span></span>

 <span data-ttu-id="8c1ad-166">Para obter mais informações, consulte: [instâncias de cluster de failover do AlwaysOn](always-on-failover-cluster-instances-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-166">For more information, see: [AlwaysOn Failover Cluster Instances](always-on-failover-cluster-instances-sql-server.md)</span></span>

### <a name="database-level-high-availability-with-sshadr"></a><span data-ttu-id="8c1ad-167">Alta disponibilidade no nível do banco de dados com o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="8c1ad-167">Database-level High Availability with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span></span>
 <span data-ttu-id="8c1ad-168">Um *grupo de disponibilidade* é um conjunto de bancos de dados de usuário que fazem failover juntos.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-168">An *availability group* is a set of user databases that fail over together.</span></span> <span data-ttu-id="8c1ad-169">Um grupo de disponibilidade consiste em uma *réplica de disponibilidade* primária e em uma a quatro réplicas secundárias que são mantidas pelo movimento de dados baseado em log do SQL Server para proteção de dados, dispensando o armazenamento compartilhado.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-169">An availability group consists of a primary *availability replica* and one to four secondary replicas that are maintained through SQL Server log-based data movement for data protection without the need for shared storage.</span></span> <span data-ttu-id="8c1ad-170">Cada réplica é hospedada por uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] em um nó diferente do cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-170">Each replica is hosted by an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on a different node of the WSFC cluster.</span></span> <span data-ttu-id="8c1ad-171">O grupo de disponibilidade e um nome de rede virtual correspondente são registrados como recursos no cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-171">The availability group and a corresponding virtual network name are registered as resources in the WSFC cluster.</span></span>

 <span data-ttu-id="8c1ad-172">Um *ouvinte de grupo de disponibilidade* no nó de réplica primária responde às solicitações de cliente de entrada para conectar-se ao nome de rede virtual e, com base nos atributos da cadeia de conexão, redireciona cada solicitação à instância apropriada do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="8c1ad-172">An *availability group listener* on the primary replica's node responds to incoming client requests to connect to the virtual network name, and based on attributes in the connection string, it redirects each request to the appropriate [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>

 <span data-ttu-id="8c1ad-173">No caso de um failover, em vez de transferir a propriedade de recursos físicos compartilhados para outro nó, o WSFC é utilizado para reconfigurar uma réplica secundária em outra instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para se tornar a réplica primária do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-173">In the event of a failover, instead of transferring ownership of shared physical resources to another node, WSFC is leveraged to reconfigure a secondary replica on another [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to become the availability group's primary replica.</span></span> <span data-ttu-id="8c1ad-174">O recurso de nome de rede virtual do grupo de disponibilidade é transferido para aquela instância.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-174">The availability group's virtual network name resource is then transferred to that instance.</span></span>

 <span data-ttu-id="8c1ad-175">A qualquer determinado momento, apenas uma única instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] pode hospedar a réplica primária dos bancos de dados de um grupo de disponibilidade. Cada réplica secundária associada deve residir em uma instância separada, e cada instância deve residir em nós físicos separados.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-175">At any given moment, only a single [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance may host the primary replica of an availability group's databases, all associated secondary replicas must each reside on a separate instance, and each instance must reside on separate physical nodes.</span></span>

> [!NOTE]
>  <span data-ttu-id="8c1ad-176">O [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] não exige a implantação de uma Instância de Cluster de Failover ou o uso de armazenamento compartilhado simétrico (SAN ou SMB).</span><span class="sxs-lookup"><span data-stu-id="8c1ad-176">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] do not require deployment of a Failover Cluster Instance or use of symmetric shared storage (SAN or SMB).</span></span>
> 
>  <span data-ttu-id="8c1ad-177">Uma FCI (Instância de Cluster de Failover) pode ser usada junto com um grupo de disponibilidade para aprimorar a disponibilidade de uma réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-177">A Failover Cluster Instance (FCI) may be used together with an availability group to enhance the availability of an availability replica.</span></span> <span data-ttu-id="8c1ad-178">Entretanto, para impedir situações de competição potenciais no cluster do WSFC, o failover automático do grupo de disponibilidade não tem suporte de e para uma réplica de disponibilidade que está hospedada em uma FCI ou vice-versa.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-178">However, to prevent potential race conditions in the WSFC cluster, automatic failover of the availability group is not supported to or from an availability replica that is hosted on a FCI.</span></span>

 <span data-ttu-id="8c1ad-179">Para obter mais informações, confira: [Visão geral dos grupos de disponibilidade AlwaysOn &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-179">For more information, see: [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md)</span></span>

##  <a name="wsfc-health-monitoring-and-failover"></a><a name="AlwaysOnWsfcHealth"></a><span data-ttu-id="8c1ad-180">Failover e monitoramento de integridade do WSFC</span><span class="sxs-lookup"><span data-stu-id="8c1ad-180">WSFC Health Monitoring and Failover</span></span>
 <span data-ttu-id="8c1ad-181">A alta disponibilidade de uma solução de AlwaysOn é realizada por meio do monitoramento proativo da integridade dos recursos físicos e lógicos do cluster do WSFC, junto com failover automático sobre e reconfiguração de hardware redundante.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-181">High availability for an AlwaysOn solution is accomplished though proactive health monitoring of physical and logical WSFC cluster resources, together with automatic failover onto and re-configuration of redundant hardware.</span></span>  <span data-ttu-id="8c1ad-182">Um administrador do sistema também pode iniciar um *failover manual* de um grupo de disponibilidade ou instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] de um nó para outro.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-182">A system administrator can also initiate a *manual failover* of an availability group or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance from one node to another.</span></span>

### <a name="failover-policies-for-nodes-failover-cluster-instances-and-availability-groups"></a><span data-ttu-id="8c1ad-183">Políticas de failover para nós, instâncias de cluster de failover e grupos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="8c1ad-183">Failover Policies for Nodes, Failover Cluster Instances, and Availability Groups</span></span>
 <span data-ttu-id="8c1ad-184">Uma *política de failover* é configurada no nó de cluster WSFC, na FCI (Instância de Cluster de failover) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e nos níveis de grupos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-184">A *failover policy* is configured at the WSFC cluster node, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instance (FCI), and the availability group levels.</span></span>  <span data-ttu-id="8c1ad-185">Essas políticas, baseadas na severidade, duração e frequência do status do recurso do cluster não íntegro e na capacidade de resposta do nó, podem disparar uma reinicialização do serviço ou um *failover automático* de recursos do cluster de um nó para outro ou disparar a movimentação de uma réplica primária de grupo de disponibilidade de uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para outra.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-185">These policies, based on the severity, duration, and frequency of unhealthy cluster resource status and node responsiveness, can trigger a service restart or an *automatic failover* of cluster resources from one node to another, or can trigger the move of an availability group primary replica from one [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to another.</span></span>

 <span data-ttu-id="8c1ad-186">O failover de uma réplica de grupo de disponibilidade não afeta a instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] subjacente.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-186">Failover of an availability group replica does not affect the underlying [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  <span data-ttu-id="8c1ad-187">O failover de uma FCI move as réplicas do grupo de disponibilidade hospedado com a instância.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-187">Failover of a FCI moves the hosted availability group replicas with the instance.</span></span>

 <span data-ttu-id="8c1ad-188">Para obter mais informações, consulte: [política de failover para instâncias de cluster de failover](failover-policy-for-failover-cluster-instances.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-188">For more information, see: [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md)</span></span>

### <a name="wsfc-resource-health-detection"></a><span data-ttu-id="8c1ad-189">Detecção de integridade de recursos do WSFC</span><span class="sxs-lookup"><span data-stu-id="8c1ad-189">WSFC Resource Health Detection</span></span>
 <span data-ttu-id="8c1ad-190">Cada recurso em um nó de cluster do WSFC pode relatar seu status e integridade, periodicamente ou sob demanda.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-190">Each resource in a WSFC cluster node can report its status and health, periodically or on-demand.</span></span> <span data-ttu-id="8c1ad-191">Várias circunstâncias podem indicar falha no recurso; por exemplo, deficiência de energia, erros de disco ou de memória, erros de comunicação de rede ou serviços sem resposta.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-191">A variety of circumstances may indicate resource failure; e.g. power failure, disk or memory errors, network communication errors, or non-responsive services.</span></span>

 <span data-ttu-id="8c1ad-192">Recursos de cluster WSFC como redes, armazenamento ou serviços podem se tornar dependentes uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-192">WSFC cluster resources such as networks, storage, or services can be made dependent upon one another.</span></span> <span data-ttu-id="8c1ad-193">A integridade cumulativa de um recurso é determinada pela acúmulo bem-sucedido de sua integridade com a integridade de cada uma de suas dependências de recurso.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-193">The cumulative health of a resource is determined by successively rolling up its health with the health of each of its resource dependencies.</span></span>

### <a name="wsfc-inter-node-health-detection-and-quorum-voting"></a><span data-ttu-id="8c1ad-194">Detecção de integridade entre nós do WSFC e votação de quorum</span><span class="sxs-lookup"><span data-stu-id="8c1ad-194">WSFC Inter-node Health Detection and Quorum Voting</span></span>
 <span data-ttu-id="8c1ad-195">Cada nó em um cluster do WSFC participa da comunicação de pulsação periódica para compartilhar o status de integridade do nó com os outros nós.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-195">Each node in a WSFC cluster participates in periodic heartbeat communication to share the node's health status with the other nodes.</span></span> <span data-ttu-id="8c1ad-196">Nós sem resposta são considerados como em estado com falha.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-196">Unresponsive nodes are considered to be in a failed state.</span></span>

 <span data-ttu-id="8c1ad-197">Um conjunto de nós de *quorum* é uma maioria dos nós de votação e testemunhas no cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-197">A *quorum* node set is a majority of the voting nodes and witnesses in the WSFC cluster.</span></span> <span data-ttu-id="8c1ad-198">A integridade geral e o status de um cluster WSFC são determinados por um *voto de quorum*periódico.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-198">The overall health and status of a WSFC cluster is determined by a periodic *quorum vote*.</span></span> <span data-ttu-id="8c1ad-199">A presença de um quorum significa que o cluster está íntegro e é capaz de fornecer tolerância a falhas no nível de nó.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-199">The presence of a quorum means that the cluster is healthy and able to provide node-level fault tolerance.</span></span>

 <span data-ttu-id="8c1ad-200">Um *modo de quorum* é configurado no nível de cluster do WSFC que determina a metodologia usada na votação do quorum e quando executar um failover automático ou colocar o cluster offline.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-200">A *quorum mode* is configured at the WSFC cluster level that dictates the methodology used for quorum voting and when to perform an automatic failover or take the cluster offline.</span></span>

> [!TIP]
>  <span data-ttu-id="8c1ad-201">É prática recomendada sempre ter um número ímpar de votos de quorum em um cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-201">It is best practice to always have an odd number of quorum votes in a WSFC cluster.</span></span>  <span data-ttu-id="8c1ad-202">Para a finalidade da votação de quorum, o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] não precisa ser instalado em todos os nós do cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-202">For the purposes of quorum voting, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] does not have to be installed on all nodes in the cluster.</span></span> <span data-ttu-id="8c1ad-203">Um servidor adicional pode agir como um membro do quorum, ou o modelo de quorum do WSFC pode ser configurado para usar um compartilhamento de arquivo remoto como um desempatador.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-203">An additional server can act as a quorum member, or the WSFC quorum model can be configured to use a remote file share as a tie-breaker.</span></span>
> 
>  <span data-ttu-id="8c1ad-204">Para obter mais informações, consulte: [configuração de modos de quorum do WSFC e votação &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-204">For more information, see: [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span></span>

### <a name="disaster-recovery-through-forced-quorum"></a><span data-ttu-id="8c1ad-205">Recuperação de desastres por meio de quorum forçado</span><span class="sxs-lookup"><span data-stu-id="8c1ad-205">Disaster Recovery Through Forced Quorum</span></span>
 <span data-ttu-id="8c1ad-206">Dependendo das práticas operacionais e da configuração do cluster do WSFC, você pode incorrer em failovers automáticos e manuais e ainda manter uma solução do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn robusta e tolerante a falhas.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-206">Depending upon operational practices and WSFC cluster configuration, you can incur both automatic and manual failovers, and still maintain a robust, fault-tolerant [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn solution.</span></span> <span data-ttu-id="8c1ad-207">No entanto, se um quorum dos nós de votação elegíveis no cluster do WSFC não puder se comunicar um com o outro, ou se houver falha na validação de integridade do cluster do WSFC, o cluster do WSFC poderá ser colocado offline.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-207">However, if a quorum of the eligible voting nodes in the WSFC cluster cannot communicate with one another, or if the WSFC cluster otherwise fails health validation, then the WSFC cluster may go offline.</span></span>

 <span data-ttu-id="8c1ad-208">Se o cluster do WSFC for colocado offline por causa de um desastre não planejado ou devido a um hardware persistente ou falha de comunicação, será necessária intervenção administrativa manual para *forçar um quorum* e colocar os nós de cluster sobreviventes online em uma configuração não tolerante a falhas.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-208">If the WSFC cluster goes offline because of an unplanned disaster, or due to a persistent hardware or communications failure, then manual administrative intervention is required to *force a quorum* and bring the surviving cluster nodes back online in a non-fault-tolerant configuration.</span></span>

 <span data-ttu-id="8c1ad-209">Subsequentemente, uma série de etapas também deve ser utilizada para reconfigurar o cluster do WSFC, recuperar as réplicas de banco de dados afetadas e restabelecer um novo quorum.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-209">Afterwards, a series of steps must also be taken to reconfigure the WSFC cluster, recover the affected database replicas, and to re-establish a new quorum.</span></span>

 <span data-ttu-id="8c1ad-210">Para obter mais informações, consulte: [recuperação de desastre do WSFC por meio de quorum forçado &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-210">For more information, see: [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)</span></span>

##  <a name="relationship-of-sql-server-alwayson-components-to-wsfc"></a><a name="AlwaysOnWsfcRelationship"></a> <span data-ttu-id="8c1ad-211">Relação dos componentes do SQL Server AlwaysOn com o WSFC</span><span class="sxs-lookup"><span data-stu-id="8c1ad-211">Relationship of SQL Server AlwaysOn Components to WSFC</span></span>
 <span data-ttu-id="8c1ad-212">Existem várias camadas de relações entre o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn e os recursos e componentes do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-212">Several layers of relationships exist between [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn and WSFC features and components.</span></span>

 <span data-ttu-id="8c1ad-213">Os grupos de disponibilidade do AlwaysOn são hospedados nas instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c1ad-213">AlwaysOn availability groups are hosted on [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances.</span></span>
<span data-ttu-id="8c1ad-214">Uma solicitação de cliente que especifica um nome de rede do ouvinte de grupo de disponibilidade lógico para se conectar a um banco de dados primário ou secundário é redirecionada para o nome de rede de instância apropriado da instância subjacente do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ou da Instância de Cluster de Failover (FCI) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="8c1ad-214">A client request that specifies a logical availability group listener network name to connect to a primary or secondary database is redirected to the appropriate instance network name of the underlying [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instance (FCI).</span></span>

 <span data-ttu-id="8c1ad-215">As instâncias do SQL Server estão hospedadas ativamente em um único nó.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-215">SQL Server instances are actively hosted on a single node.</span></span>
<span data-ttu-id="8c1ad-216">Quando presente, uma instância autônoma do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sempre reside em um único nó com um nome de rede de instância estático.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-216">If present, a stand-alone [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance always resides on a single Node with a static instance network name.</span></span>  <span data-ttu-id="8c1ad-217">Quando presente, uma FCI do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] estará ativa em um entre dois ou mais nós de failover possíveis com um único nome de rede de instância virtual.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-217">If present, a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI is active on one of two or more possible failover nodes with a single virtual Instance Network Name.</span></span>

 <span data-ttu-id="8c1ad-218">Nós são membros de um cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-218">Nodes are members of a WSFC cluster.</span></span>
<span data-ttu-id="8c1ad-219">Os metadados e o status de configuração do WSFC de todos os nós são armazenados em cada nó.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-219">WSFC configuration metadata and status for all nodes is stored on each node.</span></span> <span data-ttu-id="8c1ad-220">Cada servidor pode oferecer volumes de armazenamento assimétrico ou de armazenamento compartilhado (SAN) para bancos de dados do usuário ou do sistema.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-220">Each server may provide asymmetric storage or shared storage (SAN) volumes for user or system databases.</span></span> <span data-ttu-id="8c1ad-221">Cada servidor tem pelo menos uma interface de rede física em uma ou mais sub-redes IP.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-221">Each server has at least one physical network interface on one or more IP subnets.</span></span>

 <span data-ttu-id="8c1ad-222">O serviço WSFC monitora a integridade e gerencia a configuração de um grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-222">The WSFC service monitors health and manages configuration for a group of servers.</span></span>
<span data-ttu-id="8c1ad-223">O serviço WSFC (Windows Server Failover Cluster) propaga alterações nos metadados e no status da Configuração do WSFC para todos os nós do cluster.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-223">The Windows Server Failover Cluster (WSFC) service propagates changes to WSFC Configuration metadata and status to all nodes in the cluster.</span></span> <span data-ttu-id="8c1ad-224">Os metadados parciais e o status podem ser armazenados em um compartilhamento de arquivos remoto com testemunha de quorum do WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-224">Partial metadata and status may be stored on a WSFC quorum-witness remote file share.</span></span> <span data-ttu-id="8c1ad-225">Dois ou mais nós ou testemunhas ativos constituem um quorum para votar na integridade do cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-225">Two or more active nodes or witnesses constitute a quorum to vote on the health of the WSFC cluster.</span></span>

 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="8c1ad-226">são subchaves do cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-226">registry keys are subkeys of the WSFC cluster.</span></span>
<span data-ttu-id="8c1ad-227">Se você excluir e recriar um cluster WSFC, precisará desabilitar e reabilitar o recurso [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] em cada instância de servidor habilitada para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] no cluster WSFC original.</span><span class="sxs-lookup"><span data-stu-id="8c1ad-227">If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that was enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on the original WSFC cluster.</span></span> <span data-ttu-id="8c1ad-228">Para obter mais informações, veja [Habilitar e desabilitar Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8c1ad-228">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="8c1ad-229">![Diagrama de contexto do componente SQL Server AlwaysOn](../../../database-engine/media/alwaysoncomponentcontextdiagram.gif "Diagrama de contexto do componente SQL Server AlwaysOn")</span><span class="sxs-lookup"><span data-stu-id="8c1ad-229">![SQL Server AlwaysOn Component Context Diagram](../../../database-engine/media/alwaysoncomponentcontextdiagram.gif "SQL Server AlwaysOn Component Context Diagram")</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="8c1ad-230">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="8c1ad-230">Related Tasks</span></span>

-   [<span data-ttu-id="8c1ad-231">Exibir configurações de NodeWeight de quorum do cluster</span><span class="sxs-lookup"><span data-stu-id="8c1ad-231">View Cluster Quorum NodeWeight Settings</span></span>](view-cluster-quorum-nodeweight-settings.md)

-   [<span data-ttu-id="8c1ad-232">Definir configurações de NodeWeight de quorum do cluster</span><span class="sxs-lookup"><span data-stu-id="8c1ad-232">Configure Cluster Quorum NodeWeight Settings</span></span>](configure-cluster-quorum-nodeweight-settings.md)

-   [<span data-ttu-id="8c1ad-233">Forçar um cluster WSFC para iniciar sem um quorum</span><span class="sxs-lookup"><span data-stu-id="8c1ad-233">Force a WSFC Cluster to Start Without a Quorum</span></span>](force-a-wsfc-cluster-to-start-without-a-quorum.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="8c1ad-234">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="8c1ad-234">Related Content</span></span>

-   <span data-ttu-id="8c1ad-235">[Tecnologias do Windows Server: clusters de failover](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-235">[Windows Server Technologies:  Failover Clusters](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span></span>

-   <span data-ttu-id="8c1ad-236">[Clusters de failover no Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-236">[Failover Clusters in Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span></span>

-   <span data-ttu-id="8c1ad-237">[Exibir eventos e logs de um cluster de failover](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="8c1ad-237">[View Events and Logs for a Failover Cluster](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span></span>

-   [<span data-ttu-id="8c1ad-238">Cluster de failover Get-ClusterLog do cmdlet</span><span class="sxs-lookup"><span data-stu-id="8c1ad-238">Get-ClusterLog Failover Cluster Cmdlet</span></span>](https://technet.microsoft.com/library/ee461045.aspx)

## <a name="see-also"></a><span data-ttu-id="8c1ad-239">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8c1ad-239">See Also</span></span>
 <span data-ttu-id="8c1ad-240">Visão geral das [instâncias de cluster de failover AlwaysOn (SQL Server)](always-on-failover-cluster-instances-sql-server.md) [do grupos de disponibilidade AlwaysOn &#40;SQL Server](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) os [modos de quorum WSFC e a configuração de votação&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md) &#40;[política de failover para instâncias de cluster de failover](failover-policy-for-failover-cluster-instances.md) , [recuperação de desastre WSFC por meio de quorum forçado SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) &#40;</span><span class="sxs-lookup"><span data-stu-id="8c1ad-240">[AlwaysOn Failover Cluster Instances (SQL Server)](always-on-failover-cluster-instances-sql-server.md) [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md) [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md) [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)</span></span>


