---
title: Adicionar dependências a um recurso do SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- resource dependencies [SQL Server]
- failover clustering [SQL Server], dependencies
- clusters [SQL Server], dependencies
- dependencies [SQL Server], clustering
ms.assetid: 25dbb751-139b-4c8e-ac62-3ec23110611f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8610d3dc847d0d2b8dd6f570aa543d766adf68c0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87573580"
---
# <a name="add-dependencies-to-a-sql-server-resource"></a><span data-ttu-id="55bf7-102">Adicionar dependências a um recurso do SQL Server</span><span class="sxs-lookup"><span data-stu-id="55bf7-102">Add Dependencies to a SQL Server Resource</span></span>
  <span data-ttu-id="55bf7-103">Este tópico descreve como adicionar dependências a um recurso de FCI (instância de cluster de failover) AlwaysOn usando o snap-in Gerenciador de Cluster de Failover.</span><span class="sxs-lookup"><span data-stu-id="55bf7-103">This topic describes how to add dependencies to an AlwaysOn Failover Cluster Instance (FCI) resource by using the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="55bf7-104">O snap-in Gerenciador de Cluster de Failover é o aplicativo de gerenciamento de cluster do serviço WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="55bf7-104">The Failover Cluster Manager snap-in is the cluster management application for the Windows Server Failover Clustering (WSFC) service.</span></span>  
  
-   <span data-ttu-id="55bf7-105">**Antes de começar:**  [Limitações e restrições](#Restrictions), [Pré-requisitos](#Prerequisites)</span><span class="sxs-lookup"><span data-stu-id="55bf7-105">**Before you begin:**  [Limitations and Restrictions](#Restrictions), [Prerequisites](#Prerequisites)</span></span>  
  
-   <span data-ttu-id="55bf7-106">**Para adicionar uma dependência a um recurso do SQL Server, usando:** [Gerenciador de Cluster de Failover do Windows](#WinClusManager)</span><span class="sxs-lookup"><span data-stu-id="55bf7-106">**To add a dependency to a SQL Server resource, using:** [Windows Failover Cluster Manager](#WinClusManager)</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="55bf7-107">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="55bf7-107">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="55bf7-108">Limitações e restrições</span><span class="sxs-lookup"><span data-stu-id="55bf7-108">Limitations and Restrictions</span></span>  
 <span data-ttu-id="55bf7-109">É importante observar que se você adicionar qualquer outro recurso ao grupo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , esses recursos deverão sempre ter seus próprios recursos de nomes de rede do SQL exclusivos e seus próprios recursos de endereço IP do SQL.</span><span class="sxs-lookup"><span data-stu-id="55bf7-109">It is important to note that if you add any other resources to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group, those resources must always have their own unique SQL network name resources and their own SQL IP address resources.</span></span>  
  
 <span data-ttu-id="55bf7-110">Use os recursos de nome de rede do SQL existentes e os recursos de endereço IP do SQL somente para o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="55bf7-110">Do not use the existing SQL network name resources and SQL IP address resources for anything other than [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="55bf7-111">Se os recursos do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] forem compartilhados com outros recursos, os seguintes problemas poderão ocorrer:</span><span class="sxs-lookup"><span data-stu-id="55bf7-111">If [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resources are shared with other resources, the following problems may occur:</span></span>  
  
-   <span data-ttu-id="55bf7-112">Poderão ocorrer falhas inesperadas.</span><span class="sxs-lookup"><span data-stu-id="55bf7-112">Outages that are not expected may occur.</span></span>  
  
-   <span data-ttu-id="55bf7-113">As instalações do service pack poderão não ter êxito.</span><span class="sxs-lookup"><span data-stu-id="55bf7-113">Service pack installations may not be successful.</span></span>  
  
-   <span data-ttu-id="55bf7-114">O programa de Instalação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] poderá não ser bem-sucedido.</span><span class="sxs-lookup"><span data-stu-id="55bf7-114">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup program may not be successful.</span></span> <span data-ttu-id="55bf7-115">Se esse problema ocorrer, você não poderá instalar mais instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] nem executar manutenção rotineira.</span><span class="sxs-lookup"><span data-stu-id="55bf7-115">If this problem occurs, you cannot install additional instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or perform routine maintenance.</span></span>  
  
 <span data-ttu-id="55bf7-116">Considere esses outros problemas:</span><span class="sxs-lookup"><span data-stu-id="55bf7-116">Consider these additional issues:</span></span>  
  
-   <span data-ttu-id="55bf7-117">FTP com replicação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]: para as instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que usam o FTP com replicação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], seu serviço de FTP deverá usar um dos mesmos discos físicos que a instalação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] configurada para usar o serviço FTP.</span><span class="sxs-lookup"><span data-stu-id="55bf7-117">FTP with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication: For instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that use FTP with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication, your FTP service must use one of the same physical disks as the installation of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is set up to use the FTP service.</span></span>  
  
-   <span data-ttu-id="55bf7-118">Dependências de recursos [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]: se você adicionar um recurso a um grupo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e tiver uma dependência no recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para verificar se o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] está disponível, o [!INCLUDE[msCoName](../../../includes/msconame-md.md)] recomendará que você adicione uma dependência no recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="55bf7-118">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource dependencies: If you add a resource to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group and you have a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource to make sure that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is available, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] recommends that you add a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource.</span></span> <span data-ttu-id="55bf7-119">Não adicione uma dependência no recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="55bf7-119">Do not add a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span> <span data-ttu-id="55bf7-120">Para garantir que o computador que está executando o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] permanece altamente disponível, configure o recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent para que ele não afete o grupo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] caso o recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent falhe.</span><span class="sxs-lookup"><span data-stu-id="55bf7-120">To make sure that the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] remains highly available, configure the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource so that it does not affect the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group if the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource fails.</span></span>  
  
-   <span data-ttu-id="55bf7-121">Compartilhamentos de arquivos e recursos da impressora: quando você instala os recursos do Compartilhamento de Arquivo ou os recursos de cluster da Impressora, eles não devem ser colocados nos mesmos recursos de disco físico que o computador que está executando o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="55bf7-121">File shares and printer resources: When you install File Share resources or Printer cluster resources, they should not be put on the same physical disk resources as the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="55bf7-122">Se você for colocado nos mesmos recursos de disco físico, poderá vivenciar degradação de desempenho e perda de serviço para o computador que está executando o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="55bf7-122">If they are put on the same physical disk resources, you may experience performance degradation and loss of service to the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="55bf7-123">Considerações sobre o MS DTC: Depois de instalar o sistema operacional e configurar sua FCI, você deverá configurar o MS DTC (Coordenador de Transações Distribuídas da [!INCLUDE[msCoName](../../../includes/msconame-md.md)]) para funcionar em um cluster usando o snap-in Gerenciador de Cluster de Failover.</span><span class="sxs-lookup"><span data-stu-id="55bf7-123">MS DTC considerations: After you install the operating system and configure your FCI, you must configure [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator (MS DTC) to work in a cluster by using the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="55bf7-124">A falha ao agrupar o MS DTC não bloqueará a Instalação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , mas a funcionalidade do aplicativo [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] poderá ser afetada se o MS DTC não for configurado corretamente.</span><span class="sxs-lookup"><span data-stu-id="55bf7-124">Failure to cluster MS DTC will not block [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] application functionality may be affected if MS DTC is not properly configured.</span></span>  
  
     <span data-ttu-id="55bf7-125">Se você instalar o MS DTC em seu grupo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e tiver outros recursos que sejam dependentes do MS DTC, o MS DTC não estará disponível se esse grupo estiver offline ou durante um failover.</span><span class="sxs-lookup"><span data-stu-id="55bf7-125">If you install MS DTC in your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group and you have other resources that are dependent on MS DTC, MS DTC will not be available if this group is offline or during a failover.</span></span> [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="55bf7-126">recomendará que você coloque o MS DTC em seu próprio grupo com seu próprio recurso de disco físico, se for possível.</span><span class="sxs-lookup"><span data-stu-id="55bf7-126">recommends that you put MS DTC in its own group with its own physical disk resource, if it is possible.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="55bf7-127">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="55bf7-127">Prerequisites</span></span>  
 <span data-ttu-id="55bf7-128">Se você instalar o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] em um grupo de recursos do WSFC com várias unidades de disco em uma das unidades, o recurso [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] será definido para ser dependente somente daquela unidade.</span><span class="sxs-lookup"><span data-stu-id="55bf7-128">If you install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] into a WSFC resource group with multiple disk drives and choose to place your data on one of the drives, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource will be set to be dependent only on that drive.</span></span> <span data-ttu-id="55bf7-129">Para colocar dados ou logs em outro disco, primeiro você deverá adicionar uma dependência ao recurso [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para o disco adicional.</span><span class="sxs-lookup"><span data-stu-id="55bf7-129">To put data or logs on another disk, you must first add a dependency to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource for the additional disk.</span></span>  
  
##  <a name="using-the-failover-cluster-manager-snap-in"></a><a name="WinClusManager"></a> <span data-ttu-id="55bf7-130">Usando o snap-in Gerenciador de Cluster de Failover</span><span class="sxs-lookup"><span data-stu-id="55bf7-130">Using the Failover Cluster Manager Snap-in</span></span>  
 <span data-ttu-id="55bf7-131">**Para adicionar uma dependência a um recurso do SQL Server**</span><span class="sxs-lookup"><span data-stu-id="55bf7-131">**To add a dependency to a SQL Server resource**</span></span>  
  
-   <span data-ttu-id="55bf7-132">Abra o snap-in Gerenciador de Cluster de Failover.</span><span class="sxs-lookup"><span data-stu-id="55bf7-132">Open the Failover Cluster Manager snap-in.</span></span>  
  
-   <span data-ttu-id="55bf7-133">Localize o grupo que contém o recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] aplicável que você gostaria de tornar dependente.</span><span class="sxs-lookup"><span data-stu-id="55bf7-133">Locate the group that contains the applicable [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource that you would like to make dependent.</span></span>  
  
-   <span data-ttu-id="55bf7-134">Se o recurso para o disco já estiver nesse grupo, vá para etapa 4.</span><span class="sxs-lookup"><span data-stu-id="55bf7-134">If the resource for the disk is already in this group, go to step 4.</span></span> <span data-ttu-id="55bf7-135">Caso contrário, localize o grupo que contém o disco.</span><span class="sxs-lookup"><span data-stu-id="55bf7-135">Otherwise, locate the group that contains the disk.</span></span> <span data-ttu-id="55bf7-136">Se esse grupo e o grupo que contém o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] não pertencerem ao mesmo nó, mova o grupo que contém o recurso para o disco para o nó que possui o grupo do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="55bf7-136">If that group and the group that contains [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are not owned by the same node, move the group containing the resource for the disk to the node that owns the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group.</span></span>  
  
-   <span data-ttu-id="55bf7-137">Selecione o recurso do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , abra a caixa de diálogo **Propriedades** e use a guia **Dependências** para adicionar o disco ao conjunto de dependências do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="55bf7-137">Select the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource, open the **Properties** dialog box, and use the **Dependencies** tab to add the disk to the set of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dependencies.</span></span>  
  
  
