---
title: Links em segurança de integração CLR | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: reference
helpviewer_keywords:
- table-access links [CLR integration]
- security [CLR integration]
- invocation links [CLR integration]
- gated links [CLR integration]
ms.assetid: 168efd01-d12e-4bdf-a1b3-0b5c76474eaf
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 52a4f8084a8a90384c8916f2219faaf2c138b11c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685891"
---
# <a name="links-in-clr-integration-security"></a><span data-ttu-id="a8906-102">Links em segurança da integração CLR</span><span class="sxs-lookup"><span data-stu-id="a8906-102">Links in CLR Integration Security</span></span>
  <span data-ttu-id="a8906-103">Esta seção descreve como partes do código do usuário podem chamar uma à outra no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], tanto em [!INCLUDE[tsql](../../includes/tsql-md.md)] quanto em uma das linguagens gerenciadas.</span><span class="sxs-lookup"><span data-stu-id="a8906-103">This section describes how pieces of user code can call each other in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], either in [!INCLUDE[tsql](../../includes/tsql-md.md)] or in one of the managed languages.</span></span> <span data-ttu-id="a8906-104">Essas relações entre objetos são conhecidas como links.</span><span class="sxs-lookup"><span data-stu-id="a8906-104">These relationships between objects are referred to as links.</span></span>  
  
## <a name="invocation-links"></a><span data-ttu-id="a8906-105">Links de invocação</span><span class="sxs-lookup"><span data-stu-id="a8906-105">Invocation Links</span></span>  
 <span data-ttu-id="a8906-106">Os links de invocação correspondem a uma invocação de código, em uma chamada para um objeto feita pelo usuário (como, por exemplo, uma chamada de lote [!INCLUDE[tsql](../../includes/tsql-md.md)] para um procedimento armazenado), ou um procedimento armazenado ou função CLR (Common Language Runtime).</span><span class="sxs-lookup"><span data-stu-id="a8906-106">Invocation links correspond to a code invocation, either from a user calling an object (such as a [!INCLUDE[tsql](../../includes/tsql-md.md)] batch calling a stored procedure), or a common language runtime (CLR) stored procedure or function.</span></span> <span data-ttu-id="a8906-107">Os links de invocação fazem com que uma permissão `EXECUTE` no destinatário seja verificada.</span><span class="sxs-lookup"><span data-stu-id="a8906-107">Invocation links cause an `EXECUTE` permission on the callee to be checked.</span></span>  
  
## <a name="table-access-links"></a><span data-ttu-id="a8906-108">Links de acesso à tabela</span><span class="sxs-lookup"><span data-stu-id="a8906-108">Table-Access Links</span></span>  
 <span data-ttu-id="a8906-109">Os links de acesso à tabela correspondem à recuperação ou à modificação de valores em uma tabela, exibição ou uma função de valor de tabela.</span><span class="sxs-lookup"><span data-stu-id="a8906-109">Table access links correspond to retrieving or modifying values in a table, view, or a table-valued function.</span></span> <span data-ttu-id="a8906-110">Eles são semelhantes aos links de invocação, exceto por apresentarem um controle de acesso mais refinado em termos de permissões SELECT, INSERT, UPDATE e DELETE.</span><span class="sxs-lookup"><span data-stu-id="a8906-110">They are similar to invocation links, except that they have a finer-grained access control in terms of SELECT, INSERT, UPDATE, and DELETE permissions.</span></span>  
  
## <a name="gated-links"></a><span data-ttu-id="a8906-111">Links de entrada</span><span class="sxs-lookup"><span data-stu-id="a8906-111">Gated Links</span></span>  
 <span data-ttu-id="a8906-112">Os links de entrada significam que, durante a execução, as permissões, uma vez estabelecidas, não são verificadas em todas as relações de objeto.</span><span class="sxs-lookup"><span data-stu-id="a8906-112">Gated links mean that during execution, permissions are not checked across the object relationship once it has been established.</span></span> <span data-ttu-id="a8906-113">Quando há um link de entrada entre dois objetos (por exemplo, objetos **x** e **y**), as permissões no objeto **y** e nos demais objetos acessados no objeto **y** só são verificadas no momento da criação do objeto **x**.</span><span class="sxs-lookup"><span data-stu-id="a8906-113">When there is a gated link between two objects (for example, object **x** and object **y**), permissions on object **y** and other objects accessed from object **y** are checked only at the creation time of object **x**.</span></span> <span data-ttu-id="a8906-114">No momento da criação do objeto **x**, `REFERENCE` a permissão é verificada em **y** em relação ao proprietário de **x**.</span><span class="sxs-lookup"><span data-stu-id="a8906-114">At the creation time of object **x**, `REFERENCE` permission is checked on **y** against the owner of **x**.</span></span> <span data-ttu-id="a8906-115">Em tempo de execução, (por exemplo, quando alguém chama o objeto **x**), nenhuma permissão é verificada em relação a **y** ou outros objetos referenciados estatisticamente.</span><span class="sxs-lookup"><span data-stu-id="a8906-115">At execution time, (for example, when someone calls object **x**), there are no permissions checked against **y** or other objects it references statically.</span></span> <span data-ttu-id="a8906-116">Em tempo de execução, uma permissão apropriada será verificada em relação ao próprio objeto **x** .</span><span class="sxs-lookup"><span data-stu-id="a8906-116">At execution time, an appropriate permission will be checked against object **x** itself.</span></span>  
  
 <span data-ttu-id="a8906-117">Os links de entrada são sempre usados em conjunto com uma dependência de metadados entre dois objetos.</span><span class="sxs-lookup"><span data-stu-id="a8906-117">Gated links are always used in conjunction with a metadata dependency between two objects.</span></span> <span data-ttu-id="a8906-118">Essa dependência de metadados é uma relação estabelecida nos catálogos do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que impede um objeto de ser descartado enquanto outro objeto depender dele.</span><span class="sxs-lookup"><span data-stu-id="a8906-118">This metadata dependency is a relationship established in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] catalogs that prevents an object from being dropped as long as another object depends on it.</span></span>  
  
 <span data-ttu-id="a8906-119">Os links de entrada são úteis quando não é apropriado ou gerenciável conceder permissões a muitos objetos dependentes.</span><span class="sxs-lookup"><span data-stu-id="a8906-119">Gated links are useful when it is not appropriate or manageable to give permissions to many dependent objects.</span></span> <span data-ttu-id="a8906-120">Os links de entrada são introduzidos entre objetos que definem pontos de entrada [!INCLUDE[tsql](../../includes/tsql-md.md)] em assemblies do CLR (por exemplo, procedimentos CLR, gatilhos, funções, tipos e agregações) e assemblies nos quais são definidos.</span><span class="sxs-lookup"><span data-stu-id="a8906-120">Gated links are introduced between objects that define [!INCLUDE[tsql](../../includes/tsql-md.md)] entry points into CLR assemblies (for example, CLR procedures, triggers, functions, types, and aggregates) and the assemblies from which they are defined.</span></span> <span data-ttu-id="a8906-121">A segurança de entrada nesses objetos implica que, para invocar um ponto de entrada [!INCLUDE[tsql](../../includes/tsql-md.md)] definido em um assembly do CLR, o chamador só precisa de uma permissão apropriada nesse ponto de entrada [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a8906-121">Gated security against these objects implies that in order to invoke a [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point defined in a CLR assembly, the caller only needs an appropriate permission on that [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point.</span></span> <span data-ttu-id="a8906-122">Não é obrigatório que o chamador tenha permissões nesse assembly ou em qualquer outro referenciado estaticamente.</span><span class="sxs-lookup"><span data-stu-id="a8906-122">The caller is not required to have permissions on that assembly or any other assemblies it statically references.</span></span> <span data-ttu-id="a8906-123">As permissões no assembly são verificadas durante a criação do ponto de entrada [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a8906-123">The permissions on the assembly are checked at creation time of the [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point.</span></span>  
  
## <a name="sql-server-authorization-based-security"></a><span data-ttu-id="a8906-124">Segurança baseada na autorização do SQL Server</span><span class="sxs-lookup"><span data-stu-id="a8906-124">SQL Server Authorization-Based Security</span></span>  
 <span data-ttu-id="a8906-125">Estas são as regras básicas por trás das verificações de segurança do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para invocações de e entre objetos de banco de dados baseados no CLR; as três primeiras regras definem quais permissões são verificadas e em quais objetos; a quarta, o contexto de execução em que a permissão é verificada.</span><span class="sxs-lookup"><span data-stu-id="a8906-125">The following are the basic rules behind the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] security checks for invocations of and between CLR-based database objects; the first three rules define which permissions are checked and against which object; the fourth rule defines which execution context the permission is checked against.</span></span>  
  
1.  <span data-ttu-id="a8906-126">Todas as invocações exigem permissões `EXECUTE`, a menos que essas invocações ocorram no mesmo objeto, ou seja, as chamadas dentro do mesmo assembly não exigem verificações de permissão.</span><span class="sxs-lookup"><span data-stu-id="a8906-126">All invocations require `EXECUTE` permission unless the invocations occur within the same object; this means that calls within the same assembly do not require any permission checks.</span></span> <span data-ttu-id="a8906-127">A permissão é verificada em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="a8906-127">The permission is checked at execution time.</span></span>  
  
2.  <span data-ttu-id="a8906-128">Os links de entrada exigem a permissão `REFERENCE` no destinatário durante a criação do objeto de chamada.</span><span class="sxs-lookup"><span data-stu-id="a8906-128">Gated links require `REFERENCE` permission against the callee when the calling object is created.</span></span> <span data-ttu-id="a8906-129">A permissão é verificada para o proprietário do objeto de chamada quando o objeto é criado.</span><span class="sxs-lookup"><span data-stu-id="a8906-129">The permission is checked for the owner of the calling object when the object is created.</span></span>  
  
3.  <span data-ttu-id="a8906-130">Os links de acesso à tabela exigem as permissões `SELECT`, `INSERT`, `UPDATE` ou `DELETE` correspondentes na tabela ou exibição acessada.</span><span class="sxs-lookup"><span data-stu-id="a8906-130">Table-access links require the corresponding `SELECT`, `INSERT`, `UPDATE`, or `DELETE` permission against the table or view being accessed.</span></span>  
  
4.  <span data-ttu-id="a8906-131">A permissão é verificada no contexto de execução atual.</span><span class="sxs-lookup"><span data-stu-id="a8906-131">The permission is checked against the current execution context.</span></span> <span data-ttu-id="a8906-132">Procedimentos e funções podem ser criados com um contexto de execução diferente do chamador.</span><span class="sxs-lookup"><span data-stu-id="a8906-132">Procedures and functions can be created with an execution context that is different from the caller.</span></span> <span data-ttu-id="a8906-133">Os assemblies sempre são criados com o contexto de execução do procedimento, da função, do disparador definido.</span><span class="sxs-lookup"><span data-stu-id="a8906-133">Assemblies are always created with the execution context of the procedure, function, or trigger that is defined against it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a8906-134">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="a8906-134">See Also</span></span>  
 [<span data-ttu-id="a8906-135">Segurança da integração CLR</span><span class="sxs-lookup"><span data-stu-id="a8906-135">CLR Integration Security</span></span>](../../relational-databases/clr-integration/security/clr-integration-security.md)  
  
  
