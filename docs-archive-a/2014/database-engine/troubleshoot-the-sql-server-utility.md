---
title: Solucionar problemas do Utilitário do SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: f5f47c2a-38ea-40f8-9767-9bc138d14453
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 3c139f9f084374aeb711e905ac0c315acc25c6ac
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87683149"
---
# <a name="troubleshoot-the-sql-server-utility"></a><span data-ttu-id="fe838-102">Solucionar problemas do Utilitário do SQL Server</span><span class="sxs-lookup"><span data-stu-id="fe838-102">Troubleshoot the SQL Server Utility</span></span>
  <span data-ttu-id="fe838-103">A solução de problemas do Utilitário do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] pode incluir a resolução de uma operação malsucedida de inscrição de uma instância do SQL Server com um UCP, a solução de problemas de falha na coleta de dados que resultam em ícones cinzas na exibição da lista de instâncias gerenciadas em um UCP, a redução de gargalos de desempenho ou a resolução de problemas de integridade de recursos.</span><span class="sxs-lookup"><span data-stu-id="fe838-103">Troubleshooting [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility issues might include resolving a failed operation to enroll an instance of SQL Server with a UCP, troubleshooting failed data collection resulting in gray icons in the managed instance list view on a UCP, mitigating performance bottlenecks, or resolving resource health issues.</span></span> <span data-ttu-id="fe838-104">Para obter mais informações sobre como atenuar os problemas de integridade de recursos identificados por um [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP, consulte [solucionar problemas SQL Server Resource Health &#40;utilitário do SQL Server&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="fe838-104">For more information about mitigating resource health issues identified by a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP, see [Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span></span>  
  
## <a name="failed-operation-to-enroll-an-instance-of-sql-server-into-a-sql-server-utility"></a><span data-ttu-id="fe838-105">Falha na operação de inscrição de uma instância do SQL Server em um Utilitário do SQL Server</span><span class="sxs-lookup"><span data-stu-id="fe838-105">Failed Operation to Enroll an Instance of SQL Server into a SQL Server Utility</span></span>  
 <span data-ttu-id="fe838-106">Se você se conectar à instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscrição usando a Autenticação do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] e especificar uma conta proxy pertencente a um domínio do Active Directory diferente do domínio onde o UCP está localizado, a validação de instância terá êxito, mas a operação de inscrição falhará apresentando a seguinte mensagem de erro:</span><span class="sxs-lookup"><span data-stu-id="fe838-106">If you connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication, and you specify a proxy account that belongs to a different Active Directory domain than the domain where the UCP is located, instance validation succeeds, but the enrollment operation fails with the following error message:</span></span>  
  
 <span data-ttu-id="fe838-107">Ocorreu uma exceção ao executar uma instrução ou um lote Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="fe838-107">An exception occurred while executing a Transact-SQL statement or batch.</span></span> <span data-ttu-id="fe838-108">(Microsoft.SqlServer.ConnectionInfo)</span><span class="sxs-lookup"><span data-stu-id="fe838-108">(Microsoft.SqlServer.ConnectionInfo)</span></span>  
  
 <span data-ttu-id="fe838-109">Informações adicionais:  Não foi possível obter informações sobre o grupo/usuário do Windows NT '\<DomainName\AccountName>', código de erro 0x5.</span><span class="sxs-lookup"><span data-stu-id="fe838-109">Additional information:  Could not obtain information about Windows NT group/user '\<DomainName\AccountName>', error code 0x5.</span></span> <span data-ttu-id="fe838-110">(Microsoft SQL Server, Erro: 15404)</span><span class="sxs-lookup"><span data-stu-id="fe838-110">(Microsoft SQL Server, Error: 15404)</span></span>  
  
 <span data-ttu-id="fe838-111">Esse problema pode ocorrer no seguinte exemplo de cenário:</span><span class="sxs-lookup"><span data-stu-id="fe838-111">This issue occurs in the following example scenario:</span></span>  
  
1.  <span data-ttu-id="fe838-112">O UCP é um membro de "Domain_1".</span><span class="sxs-lookup"><span data-stu-id="fe838-112">The UCP is a member of "Domain_1."</span></span>  
  
2.  <span data-ttu-id="fe838-113">Uma relação de confiança de domínio unidirecional está em vigor: ou seja, "Domain_2" não tem a confiança do "Domain_1", mas o "Domain_1" tem a confiança do "Domain_2".</span><span class="sxs-lookup"><span data-stu-id="fe838-113">A one-way domain trust relationship is in place: that is, "Domain_1" is not trusted by "Domain_2" but "Domain_2" is trusted by "Domain_1."</span></span>  
  
3.  <span data-ttu-id="fe838-114">A instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscrição no Utilitário do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] também é membro de "Domain_1".</span><span class="sxs-lookup"><span data-stu-id="fe838-114">The instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility is also a member of "Domain_1."</span></span>  
  
4.  <span data-ttu-id="fe838-115">Durante a operação de registro, conecte-se à instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para se registrar usando "SA".</span><span class="sxs-lookup"><span data-stu-id="fe838-115">During the enroll operation, connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using "sa".</span></span> <span data-ttu-id="fe838-116">Especifique uma conta proxy de "Domain_2".</span><span class="sxs-lookup"><span data-stu-id="fe838-116">Specify a proxy account from "Domain_2."</span></span>  
  
5.  <span data-ttu-id="fe838-117">A validação é bem-sucedida, mas a inscrição falha.</span><span class="sxs-lookup"><span data-stu-id="fe838-117">Validation succeeds but enrollment fails.</span></span>  
  
 <span data-ttu-id="fe838-118">A solução alternativa para esse problema, usando o exemplo acima, é conectar-se à instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para se registrar no [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] utilitário usando "SA" e fornecer uma conta proxy de "Domain_1".</span><span class="sxs-lookup"><span data-stu-id="fe838-118">The workaround for this issue, using the example above, is to connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility using "sa" and provide a proxy account from "Domain_1."</span></span>  
  
## <a name="failed-wmi-validation"></a><span data-ttu-id="fe838-119">Falha na validação de WMI</span><span class="sxs-lookup"><span data-stu-id="fe838-119">Failed WMI Validation</span></span>  
 <span data-ttu-id="fe838-120">Se o WMI não for configurado corretamente em uma instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], as operações Criar UCP e Inscrever Instância Gerenciada exibirão um aviso, mas a operação não será bloqueada.</span><span class="sxs-lookup"><span data-stu-id="fe838-120">If WMI is not properly configured on an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the Create UCP and Enroll Managed Instance operations display a warning, but the operation is not blocked.</span></span> <span data-ttu-id="fe838-121">Além disso, se você alterar a configuração da conta do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent de forma que o [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent não tenha permissão para as classes WMI necessárias, a coleta de dados na instância gerenciada afetada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] não carregará os dados no UCP.</span><span class="sxs-lookup"><span data-stu-id="fe838-121">Additionally, if you change the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent account configuration so that [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent does not have permission to required WMI classes, data collection on the affected managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] fails to upload to the UCP.</span></span> <span data-ttu-id="fe838-122">Isso resulta em ícones cinzas no UCP.</span><span class="sxs-lookup"><span data-stu-id="fe838-122">This results in gray icons in the UCP.</span></span>  
  
 <span data-ttu-id="fe838-123">A falha na coleta de dados resulta em ícones de status cinzas na exibição de lista do UCP para instâncias gerenciadas afetadas do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-123">Failed data collection results in gray status icons in the UCP list view for affected managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="fe838-124">O histórico do trabalho na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] indica que sysutility_mi_collect_and_upload falhou na etapa 2 (Dados de Fase Coletados de Script do PowerShell).</span><span class="sxs-lookup"><span data-stu-id="fe838-124">The job history on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] shows that sysutility_mi_collect_and_upload fails on step 2 (Stage Data Collected from PowerShell Script).</span></span>  
  
 <span data-ttu-id="fe838-125">As mensagens de erro simplificadas são:</span><span class="sxs-lookup"><span data-stu-id="fe838-125">The simplified error messages are:</span></span>  
  
 <span data-ttu-id="fe838-126">A execução do comando parou porque a variável de shell "ErrorActionPreference" está definida para Parar: acesso negado.</span><span class="sxs-lookup"><span data-stu-id="fe838-126">Command execution stopped because the shell variable "ErrorActionPreference" is set to Stop: Access denied.</span></span>  
  
 <span data-ttu-id="fe838-127">ERRO: \<Date-time (MM/DD/YYYY HH:MM:SS)> : exceção detectada ao coletar Propriedades de CPU.</span><span class="sxs-lookup"><span data-stu-id="fe838-127">ERROR: \<Date-time (MM/DD/YYYY HH:MM:SS)>: Caught exception while collecting cpu properties.</span></span>  <span data-ttu-id="fe838-128">Uma consulta de WMI pode ter falhado.</span><span class="sxs-lookup"><span data-stu-id="fe838-128">A WMI query might have failed.</span></span>  <span data-ttu-id="fe838-129">AVISO.</span><span class="sxs-lookup"><span data-stu-id="fe838-129">WARNING.</span></span>  
  
 <span data-ttu-id="fe838-130">Para resolver esse problema, verifique os seguintes parâmetros de configuração:</span><span class="sxs-lookup"><span data-stu-id="fe838-130">To resolve this issue, verify the following configuration settings:</span></span>  
  
-   <span data-ttu-id="fe838-131">No Windows Server 2003, o serviço SQL Server Agent deve fazer parte do grupo Monitoramento de Desempenho do Windows na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-131">On Windows Server 2003, the SQL Server Agent service must be part of the Windows Performance Monitoring group on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="fe838-132">O serviço WMI deve ser habilitado e configurado na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-132">The WMI service must be enabled and configured on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="fe838-133">O repositório WMI pode estar corrompido na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-133">The WMI repository might be corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="fe838-134">A biblioteca de desempenho pode estar faltando ou corrompida na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-134">The performance library might be missing or corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="fe838-135">Para verificar se a instância especificada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] está configurada corretamente para relatar dados ao UCP, verifique se as classes a seguir estão disponíveis na instância especificada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]e se elas são acessíveis à conta de serviço do SQL Server Agent:</span><span class="sxs-lookup"><span data-stu-id="fe838-135">To verify that the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is configured properly to report data to the UCP, verify that the following classes are available on the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and that they are accessible to SQL Server Agent service account:</span></span>  
  
-   <span data-ttu-id="fe838-136">Win32_MountPoint</span><span class="sxs-lookup"><span data-stu-id="fe838-136">Win32_MountPoint</span></span>  
  
-   <span data-ttu-id="fe838-137">Win32_PerfRawData_PerfProc_Process</span><span class="sxs-lookup"><span data-stu-id="fe838-137">Win32_PerfRawData_PerfProc_Process</span></span>  
  
-   <span data-ttu-id="fe838-138">Win32_PerfRawData_PerfOS_Processor</span><span class="sxs-lookup"><span data-stu-id="fe838-138">Win32_PerfRawData_PerfOS_Processor</span></span>  
  
-   <span data-ttu-id="fe838-139">Win32_Processor</span><span class="sxs-lookup"><span data-stu-id="fe838-139">Win32_Processor</span></span>  
  
-   <span data-ttu-id="fe838-140">Win32_Volume</span><span class="sxs-lookup"><span data-stu-id="fe838-140">Win32_Volume</span></span>  
  
-   <span data-ttu-id="fe838-141">Win32_LogicalDisk</span><span class="sxs-lookup"><span data-stu-id="fe838-141">Win32_LogicalDisk</span></span>  
  
 <span data-ttu-id="fe838-142">É possível usar o cmdlet Get-WmiObject PowerShell em cada uma das classes para verificar se cada classe é acessível.</span><span class="sxs-lookup"><span data-stu-id="fe838-142">You can use the Get-WmiObject PowerShell cmdlet on each of the classes to verify that each class is accessible.</span></span> <span data-ttu-id="fe838-143">Execute os seguintes cmdlets na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="fe838-143">Run the following cmdlets on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
```  
Get-WmiObject Win32_MountPoint -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_PerfRawData_PerfProc_Process -ErrorAction Stop| Out-Null  
Get-WmiObject Win32_PerfRawData_PerfOS_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Volume -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_LogicalDisk -ErrorAction Stop | Out-Null  
```  
  
 <span data-ttu-id="fe838-144">Para obter mais informações sobre como solucionar problemas do WMI, consulte [Troubleshooting WMI (Solução de problemas da WMI)](https://go.microsoft.com/fwlink/?LinkId=178250).</span><span class="sxs-lookup"><span data-stu-id="fe838-144">For more information about troubleshooting WMI, see [Troubleshooting WMI](https://go.microsoft.com/fwlink/?LinkId=178250).</span></span> <span data-ttu-id="fe838-145">Observe que as consultas nessas operações do Utilitário do SQL Server são executadas localmente e, portanto, o conteúdo sobre DCOM e solução remota de problemas não se aplica.</span><span class="sxs-lookup"><span data-stu-id="fe838-145">Note that queries in these SQL Server Utility operations are running locally, so the DCOM and remote troubleshooting content does not apply.</span></span>  
  
## <a name="failed-data-collection"></a><span data-ttu-id="fe838-146">Falha na coleta de dados</span><span class="sxs-lookup"><span data-stu-id="fe838-146">Failed Data Collection</span></span>  
 <span data-ttu-id="fe838-147">Se eventos de coleta de dados do Utilitário do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] falharem, considere as seguintes possibilidades:</span><span class="sxs-lookup"><span data-stu-id="fe838-147">If [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility data collection events fail, consider the following possibilities:</span></span>  
  
-   <span data-ttu-id="fe838-148">Não altere nenhuma propriedade do conjunto de coleta “Informações sobre o Utilitário” em uma instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] e não habilite/desabilite a coleta de dados manualmente, pois ela é controlada por um trabalho do agente do utilitário.</span><span class="sxs-lookup"><span data-stu-id="fe838-148">Do not change any properties of the "Utility Information" collection set on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and do not turn data collection on/off manually, as data collection is controlled by a Utility agent job.</span></span>  
  
-   <span data-ttu-id="fe838-149">Validação de WMI com falha ou sem suporte.</span><span class="sxs-lookup"><span data-stu-id="fe838-149">Failed or unsupported WMI validation.</span></span> <span data-ttu-id="fe838-150">Para obter mais informações, consulte a seção Falha na verificação de WMI anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="fe838-150">For more information, see the Failed WMI Validation section earlier in this topic.</span></span>  
  
-   <span data-ttu-id="fe838-151">Atualize os dados na exibição de lista de instância gerenciada, já que os dados em pontos de visualização do Utilitário do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] não são atualizados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fe838-151">Refresh data in the managed instance list view, as data in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility viewpoints does not refresh automatically.</span></span> <span data-ttu-id="fe838-152">Para atualizar os dados, clique com o botão direito do mouse no nó **Instâncias Gerenciadas** , no painel de navegação do **Gerenciador do Utilitário** , e selecione **Atualizar**, ou clique com o botão direito do mouse no nome de instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] na exibição de lista e selecione **Atualizar**.</span><span class="sxs-lookup"><span data-stu-id="fe838-152">To refresh data, right-click the **Managed Instances** node in the **Utility Explorer Navigation** pane, then select **Refresh**, or right-click on the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance name in the list view, then select **Refresh**.</span></span> <span data-ttu-id="fe838-153">Observe que, depois que uma instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] estiver inscrita em um UCP, poderá demorar até 30 minutos para os dados aparecerem pela primeira vez no painel e nos pontos de vista do painel de conteúdo do Gerenciador do Utilitário.</span><span class="sxs-lookup"><span data-stu-id="fe838-153">Note that after an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] has been enrolled with a UCP, it can take up to 30 minutes for data to first appear in the dashboard and viewpoints in the Utility Explorer content pane.</span></span>  
  
-   <span data-ttu-id="fe838-154">Use o SQL Server Configuration Manager para verificar se a instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] está em execução.</span><span class="sxs-lookup"><span data-stu-id="fe838-154">Use SQL Server Configuration Manager to verify that the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span>  
  
-   <span data-ttu-id="fe838-155">Se houver falha na coleta ou no carregamento de dados devido a problemas de tempo limite, atualize a função dbo.fn_sysutility_mi_get_collect_script() no banco de dados MSDB.</span><span class="sxs-lookup"><span data-stu-id="fe838-155">If data collection or data upload fail due to timeout issues, update the function dbo.fn_sysutility_mi_get_collect_script() in the MSDB database.</span></span> <span data-ttu-id="fe838-156">Mais especificamente, na função "Invoca-BulkCopyCommand () " adicione linha:</span><span class="sxs-lookup"><span data-stu-id="fe838-156">Specifically, in the function "Invoke-BulkCopyCommand()" add line:</span></span>  
  
    ```
    $bulkCopy.BulkCopyTimeout=180  
    ```  
  
     <span data-ttu-id="fe838-157">O valor do tempo limite padrão é de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="fe838-157">The default timeout value is 30 seconds.</span></span>  
  
-   <span data-ttu-id="fe838-158">Se a instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] não for clusterizada, verifique se o serviço [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent está em execução e definido para ser iniciado automaticamente no UCP e na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-158">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is not clustered, verify that the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service is running and that the service is set to start automatically on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="fe838-159">Verifique se uma conta válida está sendo usada para executar a coleta de dados na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-159">Verify that a valid account is being used to run data collection on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="fe838-160">Por exemplo, a senha pode ter expirado.</span><span class="sxs-lookup"><span data-stu-id="fe838-160">For example, the password may have expired.</span></span> <span data-ttu-id="fe838-161">Se a senha do proxy tiver expirado, atualize as credenciais de senha no SSMS, como se segue:</span><span class="sxs-lookup"><span data-stu-id="fe838-161">If the proxy password has expired, update password credentials in SSMS, as follows:</span></span>  
  
    1.  <span data-ttu-id="fe838-162">No **Pesquisador de Objetos**do SSMS, expanda o nó **Segurança** e, em seguida, expanda o nó **Credenciais** .</span><span class="sxs-lookup"><span data-stu-id="fe838-162">In SSMS **Object Explorer**, expand the **Security** node, then expand the **Credentials** node.</span></span>  
  
    2.  <span data-ttu-id="fe838-163">Clique com o botão direito do mouse em \*\*UtilityAgentProxyCredential_ \<GUID> \*\* e selecione **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="fe838-163">Right-click on **UtilityAgentProxyCredential_\<GUID>** and select **Properties**.</span></span>  
  
    3.  <span data-ttu-id="fe838-164">Na caixa de diálogo Propriedades da credencial, atualize as credenciais conforme necessário para a credencial de \*\*UtilityAgentProxyCredential_ \<GUID> \*\* .</span><span class="sxs-lookup"><span data-stu-id="fe838-164">On the Credential Properties dialog, update credentials as necessary for the **UtilityAgentProxyCredential_\<GUID>** credential.</span></span>  
  
    4.  <span data-ttu-id="fe838-165">Clique em **OK** para confirmar a alteração.</span><span class="sxs-lookup"><span data-stu-id="fe838-165">Click **OK** to confirm the change.</span></span>  
  
-   <span data-ttu-id="fe838-166">O protocolo TCP/IP deve estar habilitado no UCP e na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe838-166">TCP/IP should be enabled on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="fe838-167">Habilite o TCP/IP usando o [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="fe838-167">Enable TCP/IP through [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
-   <span data-ttu-id="fe838-168">O serviço Navegador do SQL Server no UCP deve ser iniciado e configurado para iniciar automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fe838-168">The SQL Server Browser service on the UCP should be started and configured to start automatically.</span></span> <span data-ttu-id="fe838-169">Se sua organização impedir o uso do serviço Navegador do SQL Server, use as seguintes etapas para permitir que uma instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] se conecte ao UCP:</span><span class="sxs-lookup"><span data-stu-id="fe838-169">If your organization prevents use of the SQL Server Browser service, use the following steps to allow a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to connect to the UCP:</span></span>  
  
    1.  <span data-ttu-id="fe838-170">Na barra de tarefas do Windows na instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , clique em **Iniciar**e em **executar...**.</span><span class="sxs-lookup"><span data-stu-id="fe838-170">On the Windows taskbar on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], click **Start**, then click **Run...**.</span></span>  
  
    2.  <span data-ttu-id="fe838-171">Digite "cliconfg.exe" no espaço fornecido e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="fe838-171">Type "cliconfg.exe" in the space provided, then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="fe838-172">Se for solicitado a permitir que o utilitário de configuração do cliente SQL ("SQL Client Configuration Utility EXE") seja iniciado, clique em "**Continuar**".</span><span class="sxs-lookup"><span data-stu-id="fe838-172">If prompted to allow "SQL Client Configuration Utility EXE" to start, click "**Continue**."</span></span>  
  
    4.  <span data-ttu-id="fe838-173">Na caixa de diálogo **SQL Server utilitário de rede do cliente** , selecione a guia **alias** e clique em **Adicionar...**.</span><span class="sxs-lookup"><span data-stu-id="fe838-173">On the **SQL Server Client Network Utility** dialog box, select the **Alias** tab, then click **Add...**.</span></span>  
  
    5.  <span data-ttu-id="fe838-174">Na caixa de diálogo **Adicionar Configuração da Biblioteca de Rede** :</span><span class="sxs-lookup"><span data-stu-id="fe838-174">On the **Add Network Library Configuration** dialog box:</span></span>  
  
    6.  <span data-ttu-id="fe838-175">Especifique TCP/IP na lista de bibliotecas de rede.</span><span class="sxs-lookup"><span data-stu-id="fe838-175">Specify TCP/IP from the list of network libraries.</span></span>  
  
    7.  <span data-ttu-id="fe838-176">Especifique o ComputerName\InstanceName do UCP na caixa de texto **Alias do Servidor** .</span><span class="sxs-lookup"><span data-stu-id="fe838-176">Specify the ComputerName\InstanceName of the UCP in the **Server Alias** text box.</span></span>  
  
    8.  <span data-ttu-id="fe838-177">Especifique o ComputerName do UCP na caixa de texto **Nome do Servidor** .</span><span class="sxs-lookup"><span data-stu-id="fe838-177">Specify the ComputerName of the UCP in the **Server Name** text box.</span></span>  
  
    9. <span data-ttu-id="fe838-178">Desmarque a caixa de seleção **Determinar porta dinamicamente** .</span><span class="sxs-lookup"><span data-stu-id="fe838-178">Uncheck the **Dynamically determine port** checkbox.</span></span>  
  
    10. <span data-ttu-id="fe838-179">Especifique o número da porta em que o UCP está escutando na caixa de texto **Número da porta** .</span><span class="sxs-lookup"><span data-stu-id="fe838-179">Specify the port number that the UCP is listening on in the **Port number** text box.</span></span>  
  
    11. <span data-ttu-id="fe838-180">Clique em **OK** para salvar suas alterações.</span><span class="sxs-lookup"><span data-stu-id="fe838-180">Click **OK** to save your changes.</span></span>  
  
    12. <span data-ttu-id="fe838-181">Repita essas etapas para cada instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] que se conectar a um UCP em que o serviço Navegador do SQL Server não está habilitado.</span><span class="sxs-lookup"><span data-stu-id="fe838-181">Repeat these steps for each managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that connects to a UCP where the SQL Server Browser service is not enabled.</span></span>  
  
-   <span data-ttu-id="fe838-182">Assegure-se de que as instâncias gerenciadas do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] estejam conectadas à rede.</span><span class="sxs-lookup"><span data-stu-id="fe838-182">Ensure that managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are connected to the network.</span></span>  
  
-   <span data-ttu-id="fe838-183">Se houver bancos de dados com o mesmo nome, mas configurações distintas para diferenciação de maiúsculas e minúsculas em uma instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], a identificação entre o banco de dados e seus pontos de vista poderá estar incorreta, o que resulta em falha na coleta de dados.</span><span class="sxs-lookup"><span data-stu-id="fe838-183">If there are databases with the same name but different case-sensitivity settings on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the identification between the database and its viewpoints can be incorrect, resulting in failed data collection.</span></span> <span data-ttu-id="fe838-184">Por exemplo, um banco de dados denominado "MYDATABASE" poderia mostrar estados de integridade para um banco de dados denominado "MyDatabase".</span><span class="sxs-lookup"><span data-stu-id="fe838-184">For example, a database named "MYDATABASE" might show health states for a database named "MyDatabase".</span></span> <span data-ttu-id="fe838-185">Nenhum erro é gerado nesse cenário.</span><span class="sxs-lookup"><span data-stu-id="fe838-185">No error is generated in this scenario.</span></span> <span data-ttu-id="fe838-186">A falha na coleta de dados também pode ser o resultado de discrepâncias entre maiúsculas e minúsculas em outros objetos exibidos no UCP, como nomes de arquivos de banco de dados e de grupos de arquivos.</span><span class="sxs-lookup"><span data-stu-id="fe838-186">Failed data collection can also result from case-sensitivity mismatches in other objects displayed in the UCP, like database file and file group names.</span></span>  
  
-   <span data-ttu-id="fe838-187">Se uma instância gerenciada do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] estiver hospedada em um computador com Windows Server 2003, a conta de serviço do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent deverá pertencer ao grupo de segurança Usuários de Monitor de Desempenho ou ao grupo Administradores local.</span><span class="sxs-lookup"><span data-stu-id="fe838-187">If a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is hosted on a Windows Server 2003 computer, then the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account must belong to the Performance Monitor Users security group or the local Administrators group.</span></span> <span data-ttu-id="fe838-188">Caso contrário, a coleta de dados falhará com um erro de acesso negado.</span><span class="sxs-lookup"><span data-stu-id="fe838-188">Otherwise, data collection will fail with an access denied error.</span></span> <span data-ttu-id="fe838-189">Para adicionar uma conta do serviço [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent ao grupo de segurança Usuários de Monitor de Desempenho, use as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="fe838-189">To add a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account to the Performance Monitor Users security group, use the following steps:</span></span>  
  
    1.  <span data-ttu-id="fe838-190">Abra **Gerenciamento do Computador**, **Usuários e Grupos Locais**e, em seguida, **Grupos**.</span><span class="sxs-lookup"><span data-stu-id="fe838-190">Open **Computer Management**, then **Local Users and Groups**, then **Groups**.</span></span>  
  
    2.  <span data-ttu-id="fe838-191">Clique com o botão direito do mouse em **Usuários de Monitor de Desempenho** e selecione **Adicionar ao grupo**.</span><span class="sxs-lookup"><span data-stu-id="fe838-191">Right-click **Performance Monitor Users** and select **Add to Group**.</span></span>  
  
    3.  <span data-ttu-id="fe838-192">Clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="fe838-192">Click **Add**.</span></span>  
  
    4.  <span data-ttu-id="fe838-193">Insira a conta na qual o serviço SQL Server Agent está sendo executado e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="fe838-193">Enter the account that the SQL Server Agent service is running under, then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="fe838-194">Se a instância do [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] já estiver inscrita no UCP antes de o usuário ser adicionado a esse grupo, reinicie o serviço [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="fe838-194">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] was already enrolled with the UCP before adding the user to this group, restart the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fe838-195">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="fe838-195">See Also</span></span>  
 <span data-ttu-id="fe838-196">[Recursos e tarefas do Utilitário do SQL Server](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span><span class="sxs-lookup"><span data-stu-id="fe838-196">[SQL Server Utility Features and Tasks](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span></span>  
 [<span data-ttu-id="fe838-197">Solucionar problemas de integridade de recursos do SQL Server &#40;Utilitário do SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fe838-197">Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;</span></span>](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md)
