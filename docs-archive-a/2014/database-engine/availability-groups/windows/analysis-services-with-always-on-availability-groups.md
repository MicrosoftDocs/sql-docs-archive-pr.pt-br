---
title: Analysis Services com Grupos de Disponibilidade AlwaysOn | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
ms.assetid: 14d16bfd-228c-4870-b463-a283facda965
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 9ea0c7f30fd8f431f70284122df7e2a036658f4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87569680"
---
# <a name="analysis-services-with-always-on-availability-groups"></a><span data-ttu-id="8ea9d-102">Analysis Services com grupos de disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="8ea9d-102">Analysis Services with Always On Availability Groups</span></span>
  <span data-ttu-id="8ea9d-103">Um grupo de disponibilidade AlwaysOn é uma coleção predefinida de bancos de dados relacionais do SQL Server que faz failover junto quando condições disparam um failover em qualquer um dos bancos de dados, redirecionando solicitações para um banco de dados espelhado em outra instância no mesmo grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-103">An AlwaysOn availability group is a predefined collection of SQL Server relational databases that failover together when conditions trigger a failover in any one database, redirecting requests to a mirrored database on another instance in the same availability group.</span></span> <span data-ttu-id="8ea9d-104">Se você estiver usando grupos de disponibilidade como sua solução de alta disponibilidade, poderá usar um banco de dados nesse grupo como uma fonte de dados em uma solução de tabela do Analysis Services ou multidimensional.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-104">If you are using availability groups as your high availability solution, you can use a database in that group as a data source in an Analysis Services tabular or multidimensional solution.</span></span> <span data-ttu-id="8ea9d-105">Todas as operações do Analysis Services a seguir funcionam como esperado ao usar um banco de dados de disponibilidade: processando ou importando dados, consultando dados relacionais diretamente (usando o armazenamento de ROLAP ou o modo DirectQuery), e writeback.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-105">All of the following Analysis Services operations work as expected when using an availability database: processing or importing data, querying relational data directly (using ROLAP storage or DirectQuery mode), and writeback.</span></span>  
  
 <span data-ttu-id="8ea9d-106">O processamento e a consulta são cargas de trabalho somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-106">Processing and querying are read-only workloads.</span></span> <span data-ttu-id="8ea9d-107">Você pode melhorar o desempenho descarregando essas cargas de trabalho em uma réplica secundária legível.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-107">You can improve performance by offloading these workloads to a readable secondary replica.</span></span> <span data-ttu-id="8ea9d-108">Este cenário exige configuração adicional.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-108">Additional configuration is required for this scenario.</span></span> <span data-ttu-id="8ea9d-109">Use a lista de verificação neste tópico para garantir que você siga todas as etapas.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-109">Use the checklist in this topic to ensure you follow all the steps.</span></span>  
  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="8ea9d-110">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="8ea9d-110">Prerequisites</span></span>  
 <span data-ttu-id="8ea9d-111">Você deve ter um logon do SQL Server em todas as réplicas.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-111">You must have a SQL Server login on all replicas.</span></span> <span data-ttu-id="8ea9d-112">Você deve ser um **sysadmin** para configurar grupos de disponibilidade, ouvintes e bancos de dados, mas os usuários só precisam de permissões **db_datareader** para acessar o banco de dados de um cliente do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-112">You must be a **sysadmin** to configure availability groups, listeners, and databases, but users only need **db_datareader** permissions to access the database from an Analysis Services client.</span></span>  
  
 <span data-ttu-id="8ea9d-113">Use um provedor de dados que oferece suporte ao protocolo TDS versão 7.4 ou mais recente, como o SQL Server Native Client 11.0 ou o Provedor de Dados para o SQL Server no .NET Framework 4.02.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-113">Use a data provider that supports the tabular data stream (TDS) protocol version 7.4 or newer, such as the SQL Server Native Client 11.0 or the Data Provider for SQL Server in .NET Framework 4.02.</span></span>  
  
 <span data-ttu-id="8ea9d-114">**(Para cargas de trabalho somente leitura)**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-114">**(For read-only workloads)**.</span></span> <span data-ttu-id="8ea9d-115">A função de réplica secundária deve ser configurada para conexões somente leitura; o grupo de disponibilidade deve ter uma lista de roteamento e a conexão na fonte de dados do Analysis Services deve especificar o ouvinte de grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-115">The secondary replica role must be configured for read-only connections, the availability group must have a routing list, and the connection in the Analysis Services data source must specify the availability group listener.</span></span> <span data-ttu-id="8ea9d-116">As instruções são fornecidas neste tópico.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-116">Instructions are provided in this topic.</span></span>  
  
##  <a name="checklist-use-a-secondary-replica-for-read-only-operations"></a><a name="bkmk_UseSecondary"></a> <span data-ttu-id="8ea9d-117">Lista de verificação: use uma réplica secundária para operações somente leitura</span><span class="sxs-lookup"><span data-stu-id="8ea9d-117">Checklist: Use a secondary replica for read-only operations</span></span>  
 <span data-ttu-id="8ea9d-118">A menos que a solução Analysis Services inclua writeback, você pode configurar uma conexão da fonte de dados para usar uma réplica secundária legível.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-118">Unless your Analysis Services solution includes writeback, you can configure a data source connection to use a readable secondary replica.</span></span> <span data-ttu-id="8ea9d-119">Se você tiver uma conexão de rede rápida, a réplica secundária terá latência de dados muito baixa, fornecendo dados quase idênticos aos da réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-119">If you have a fast network connection, the secondary replica has very low data latency, providing nearly identical data as the primary replica.</span></span> <span data-ttu-id="8ea9d-120">Usando a réplica secundária em operações do Analysis Services, você pode reduzir a contenção de leitura/gravação na réplica primária e obter uma melhor utilização de réplicas secundárias em seu grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-120">By using the secondary replica for Analysis Services operations, you can reduce read-write contention on the primary replica and get better utilization of secondary replicas in your availability group.</span></span>  
  
 <span data-ttu-id="8ea9d-121">Por padrão, tanto o acesso de leitura-gravação quanto o acesso de intenção de leitura são permitidos para a réplica primária e nenhuma conexão é permitida para as réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-121">By default, both read-write and read-intent access are allowed to the primary replica and no connections are allowed to secondary replicas.</span></span> <span data-ttu-id="8ea9d-122">Uma configuração adicional é exigida para definir uma conexão de cliente somente leitura com uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-122">Additional configuration is required to set up a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="8ea9d-123">A configuração requer a definição de propriedades na réplica secundária e a execução de um script T-SQL que define uma lista de roteamento somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-123">Configuration requires setting properties on the secondary replica and running a T-SQL script that defines a read-only routing list.</span></span> <span data-ttu-id="8ea9d-124">Use os procedimentos a seguir para garantir que você executou ambas as etapas.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-124">Use the following procedures to ensure you have performed both steps.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8ea9d-125">As etapas a seguir pressupõem a existência de um grupo de disponibilidade AlwaysOn e de bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-125">The following steps assume an existing AlwaysOn availability group and databases.</span></span> <span data-ttu-id="8ea9d-126">Se você estiver configurando um novo grupo, use o Assistente Novo Grupo de Disponibilidade para criar o grupo e unir os bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-126">If you are configuring a new group, use the New Availability Group Wizard to create the group and join the databases.</span></span> <span data-ttu-id="8ea9d-127">O assistente verifica pré-requisitos, fornece orientação para cada etapa e executa a sincronização inicial.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-127">The wizard checks for prerequisites, provides guidance for each step, and performs the initial synchronization.</span></span> <span data-ttu-id="8ea9d-128">Para obter mais informações, consulte [Usar a caixa de diálogo Assistente de Grupo de Disponibilidade &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="8ea9d-128">For more information, see [Use the Availability Group Wizard &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span></span>  
  
#### <a name="step-1-configure-access-on-an-availability-replica"></a><span data-ttu-id="8ea9d-129">Etapa 1: configurar o acesso em uma réplica de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="8ea9d-129">Step 1: Configure access on an availability replica</span></span>  
  
1.  <span data-ttu-id="8ea9d-130">No Pesquisador de Objetos, conecte-se à instância de servidor que hospeda a réplica primária e expanda a árvore de servidores.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-130">In Object Explorer, connect to the server instance that hosts the primary replica, and expand the server tree.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8ea9d-131">Estas etapas são obtidas de [Configurar o acesso somente leitura em uma réplica de disponibilidade &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), que fornece informações adicionais e instruções alternativas para executar esta tarefa.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-131">These steps are taken from [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="8ea9d-132">Expanda os nós **Alta Disponibilidade AlwaysOn** e **Grupos de Disponibilidade** .</span><span class="sxs-lookup"><span data-stu-id="8ea9d-132">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="8ea9d-133">Clique no grupo de disponibilidade cuja réplica você deseja alterar.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-133">Click the availability group whose replica you want to change.</span></span> <span data-ttu-id="8ea9d-134">Expanda **Réplicas de Disponibilidade**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-134">Expand **Availability Replicas**.</span></span>  
  
4.  <span data-ttu-id="8ea9d-135">Clique com o botão direito do mouse na réplica secundária e clique em **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-135">Right-click the secondary replica, and click **Properties**.</span></span>  
  
5.  <span data-ttu-id="8ea9d-136">Na caixa de diálogo **Propriedades da Réplica de Disponibilidade** , altere o acesso de conexão para a função secundária, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="8ea9d-136">In the **Availability Replica Properties** dialog box, change the connection access for the secondary role, as follows:</span></span>  
  
    -   <span data-ttu-id="8ea9d-137">Na lista suspensa **Secundária legível** , selecione **Somente intenção de leitura**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-137">In the **Readable secondary** drop list, select **Read-intent only**.</span></span>  
  
    -   <span data-ttu-id="8ea9d-138">Na lista suspensa **Conexões na função primária** , selecione **Permitir todas as conexões**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-138">In the **Connections in primary role** drop list, select **Allow all connections**.</span></span> <span data-ttu-id="8ea9d-139">Esse é o padrão.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-139">This is the default.</span></span>  
  
    -   <span data-ttu-id="8ea9d-140">Opcionalmente, na lista suspensa **Modo de disponibilidade** , selecione **Confirmação síncrona**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-140">Optionally, in **Availability mode** drop list, select **Synchronous commit**.</span></span> <span data-ttu-id="8ea9d-141">Esta etapa não é necessária, mas sua definição garante que exista a paridade de dados entre as réplicas primária e secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-141">This step is not required, but setting it ensures that there is data parity between the primary and secondary replica.</span></span>  
  
         <span data-ttu-id="8ea9d-142">Esta propriedade também é um requisito para failover planejado.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-142">This property is also a requirement for planned failover.</span></span> <span data-ttu-id="8ea9d-143">Se você desejar executar um failover manual planejado para fins de testes, defina **Modo de disponibilidade** como **Confirmação síncrona** para as réplicas primária e secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-143">If you want to perform a planned manual failover for testing purposes, set **Availability mode** to **Synchronous commit** for both the primary and secondary replica.</span></span>  
  
#### <a name="step-2-configure-read-only-routing"></a><span data-ttu-id="8ea9d-144">Etapa 2: configurar o roteamento somente leitura</span><span class="sxs-lookup"><span data-stu-id="8ea9d-144">Step 2: Configure read-only routing</span></span>  
  
1.  <span data-ttu-id="8ea9d-145">Conecte-se à réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-145">Connect to the primary replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8ea9d-146">Estas etapas são obtidas de [Configurar o roteamento somente leitura para um grupo de disponibilidade &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), que contém informações adicionais e instruções alternativas para executar esta tarefa.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-146">These steps are taken from [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="8ea9d-147">Abra uma janela de consulta e cole o script a seguir.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-147">Open a query window and paste in the following script.</span></span> <span data-ttu-id="8ea9d-148">Este script executa três ações: habilita conexões legíveis com uma réplica secundária (que está desabilitada por padrão), define a URL do roteamento somente leitura e cria a lista de roteamento que prioriza a forma de direcionamento de solicitações de conexão.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-148">This script does three things: enables readable connections to a secondary replica (which is off by default), sets the read-only routing URL, and creates the routing list that prioritizes how connection requests are directed.</span></span>  <span data-ttu-id="8ea9d-149">A primeira instrução, que permite conexões legíveis, será redundante se você já tiver definido as propriedades no [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], mas será incluída para manter a integridade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-149">The first statement, allowing readable connections, is redundant if you already set the properties in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], but are included for completeness.</span></span>  
  
    ```  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER01.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER02.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER02','COMPUTER01')));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER01','COMPUTER02')));  
    GO  
    ```  
  
3.  <span data-ttu-id="8ea9d-150">Modifique o script, substituindo espaços reservados por valores que são válidos para sua implantação:</span><span class="sxs-lookup"><span data-stu-id="8ea9d-150">Modify the script, replacing placeholders with values that are valid for your deployment:</span></span>  
  
    -   <span data-ttu-id="8ea9d-151">Substitua 'Computer01' pelo nome da instância do servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-151">Replace 'Computer01' with the name of the server instance that hosts the primary replica.</span></span>  
  
    -   <span data-ttu-id="8ea9d-152">Substitua 'Computer02' pelo nome da instância do servidor que hospeda a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-152">Replace 'Computer02' with the name of the server instance that hosts the secondary replica.</span></span>  
  
    -   <span data-ttu-id="8ea9d-153">Substitua 'contoso.com' pelo nome de seu domínio ou omita-o do script se todos os computadores estiverem no mesmo domínio.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-153">Replace 'contoso.com' with the name of your domain, or omit it from the script if all computers are in the same domain.</span></span> <span data-ttu-id="8ea9d-154">Mantenha o número da porta se o ouvinte estiver usando a porta padrão.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-154">Keep the port number if the listener is using the default port.</span></span> <span data-ttu-id="8ea9d-155">A porta que é usada de fato pelo ouvinte é listada na página de propriedades no [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8ea9d-155">The port that is actually used by the listener is listed in the properties page in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span></span>  
  
4.  <span data-ttu-id="8ea9d-156">Execute o script.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-156">Execute the script.</span></span>  
  
     <span data-ttu-id="8ea9d-157">Em seguida, crie uma fonte de dados em um modelo do Analysis Services que usa um banco de dados do grupo recém-configurado.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-157">Next, create a data source in an Analysis Services model that uses a database from the group you just configured.</span></span>  
  
##  <a name="create-an-analysis-services-data-source-using-an-alwayson-availability-database"></a><a name="bkmk_ssasAODB"></a><span data-ttu-id="8ea9d-158">Criar uma fonte de dados de Analysis Services usando um banco de dado de disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="8ea9d-158">Create an Analysis Services data source using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="8ea9d-159">Esta seção explica como criar uma fonte de dados do Analysis Services que conecta a um banco de dados em um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-159">This section explains how to create an Analysis Services data source that connects to a database in an availability group.</span></span> <span data-ttu-id="8ea9d-160">Você pode usar estas instruções para configurar uma conexão a uma réplica primária (padrão) ou a uma réplica secundária legível configurada com base em etapas de uma seção anterior.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-160">You can use these instructions to configure a connection to either a primary replica (default) or a readable secondary replica that you configured based on steps in a previous section.</span></span> <span data-ttu-id="8ea9d-161">Parâmetros de configuração de AlwaysOn, mais as propriedades de conexão definidas no cliente, determinarão se uma réplica primária ou secundária é usada.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-161">AlwaysOn configuration settings, plus the connection properties set in the client, will determine whether a primary or secondary replica is used.</span></span>  
  
1.  <span data-ttu-id="8ea9d-162">No [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], em um projeto de Modelo de mineração de dados e multidimensional do Analysis Services, clique com o botão direito do mouse em **Fontes de Dados** e selecione **Nova Fonte de Dados**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-162">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], in an Analysis Services Multidimensional and Data Mining Model project, right-click **Data Sources** and select **New Data Source**.</span></span> <span data-ttu-id="8ea9d-163">Clique em **Novo** para criar uma nova fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-163">Click **New** to create a new data source.</span></span>  
  
     <span data-ttu-id="8ea9d-164">Outra alternativa para um projeto de modelo de tabela é clicar no menu Modelo e em **Importar de Fonte de Dados**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-164">Alternatively, for a tabular model project, click the Model menu, and then click **Import from Data Source**.</span></span>  
  
2.  <span data-ttu-id="8ea9d-165">Em Gerenciador de Conexões, em Provedor, escolha um provedor que ofereça suporte ao protocolo TDS.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-165">In Connection Manager, in Provider, choose a provider that supports the Tabular Data Stream (TDS) protocol.</span></span> <span data-ttu-id="8ea9d-166">O SQL Server Native Client 11.0 oferece suporte a esse protocolo.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-166">The SQL Server Native Client 11.0 supports this protocol.</span></span>  
  
3.  <span data-ttu-id="8ea9d-167">Em Gerenciador de Conexões, em Nome do Servidor, insira o nome do *ouvinte de grupo de disponibilidade*e escolha um banco de dados que esteja disponível no grupo.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-167">In Connection Manager, in Server Name, enter the name of the *availability group listener*, and then choose a database that is available in the group.</span></span>  
  
     <span data-ttu-id="8ea9d-168">O ouvinte de grupo de disponibilidade redireciona uma conexão de cliente a uma réplica primária para solicitações de leitura/gravação ou para uma réplica secundária quando você especifica a intenção de leitura na cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-168">The availability group listener redirects a client connection to a primary replica for read-write requests or to a secondary replica if you specify read-intent in the connection string.</span></span> <span data-ttu-id="8ea9d-169">Como funções de réplica serão alteradas durante um failover (em que a primária se torna a secundária e uma secundária se torna primária), você sempre deve especificar o ouvinte de forma que a conexão de cliente seja redirecionada conformemente.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-169">Because replica roles will change during a failover (where the primary becomes the secondary and a secondary becomes a primary), you should always specify the listener so that the client connection is redirected accordingly.</span></span>  
  
     <span data-ttu-id="8ea9d-170">Para determinar o nome do ouvinte do grupo de disponibilidade, você pode solicitar a um administrador de banco de dados ou se conectar a uma instância no grupo de disponibilidade e exibir sua configuração de disponibilidade de AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-170">To determine the name of the availability group listener, you can either ask a database administrator or connect to an instance in the availability group and view its AlwaysOn availability configuration.</span></span> <span data-ttu-id="8ea9d-171">Na captura de tela a seguir, o ouvinte do grupo de disponibilidade é o **AdventureWorks2**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-171">In the screenshot below, the availability group listener is **AdventureWorks2**.</span></span>  
  
     <span data-ttu-id="8ea9d-172">![pasta AlwaysOn Availability no Management Studio](../../media/ssas-alwaysoninfoinssms.png "pasta AlwaysOn Availability no Management Studio")</span><span class="sxs-lookup"><span data-stu-id="8ea9d-172">![AlwaysOn Availability folder in Management Studio](../../media/ssas-alwaysoninfoinssms.png "AlwaysOn Availability folder in Management Studio")</span></span>  
  
4.  <span data-ttu-id="8ea9d-173">Ainda no Gerenciador de Conexões, clique em **Tudo** no painel de navegação esquerdo para exibir a grade de propriedades do provedor de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-173">Still in Connection Manager, click **All** in the left navigation pane to view the property grid of data provider.</span></span>  
  
     <span data-ttu-id="8ea9d-174">Defina **Intenção de Aplicativo** como **READONLY** se você estiver configurando uma conexão de cliente somente leitura para uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-174">Set **Application Intent** to **READONLY** if you are configuring a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="8ea9d-175">Caso contrário, mantenha o **READWRITE** padrão para redirecionar a conexão para a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-175">Otherwise, keep the **READWRITE** default to redirect the connection to the primary replica.</span></span>  
  
5.  <span data-ttu-id="8ea9d-176">Em Informações da Representação, selecione **Usar um nome de usuário e uma senha específicos do Windows**e insira uma conta de usuário de domínio do Windows que tenha um mínimo de permissões **db_datareader** no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-176">In Impersonation Information, select **Use a specific Windows user name and password**, and then enter a Windows domain user account that has a minimum of **db_datareader** permissions on the database.</span></span>  
  
     <span data-ttu-id="8ea9d-177">Não escolha **Usar as credenciais do usuário atual** ou **Herdar**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-177">Do not choose **Use the credentials of the current user** or **Inherit**.</span></span> <span data-ttu-id="8ea9d-178">Você pode escolher **Usar a conta de serviço**, mas apenas se essa conta tiver permissões de leitura no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-178">You can choose **Use the service account**, but only if that account has read permissions on the database.</span></span>  
  
     <span data-ttu-id="8ea9d-179">Conclua a fonte de dados e feche o Assistente de Fonte de Dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-179">Finish the data source and close the Data Source Wizard.</span></span>  
  
6.  <span data-ttu-id="8ea9d-180">Adicione **MultiSubnetFailover=Yes** à cadeia de conexão para fornecer detecção mais rápida e conexão ao servidor ativo.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-180">Add **MultiSubnetFailover=Yes** to the connection string to provide faster detection and connection to the active server.</span></span> <span data-ttu-id="8ea9d-181">Para obter mais informações sobre essa propriedade, consulte [Suporte do SQL Server Native Client à alta disponibilidade e recuperação de desastre](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="8ea9d-181">For more information about this property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
     <span data-ttu-id="8ea9d-182">Esta propriedade não está visível na grade de propriedades.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-182">This property is not visible in the property grid.</span></span> <span data-ttu-id="8ea9d-183">Para adicionar a propriedade, clique com o botão direito do mouse na fonte de dados e escolha **Exibir Código**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-183">To add the property, right-click the data source and choose **View Code**.</span></span> <span data-ttu-id="8ea9d-184">Adicione `MultiSubnetFailover=Yes` à cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-184">Add `MultiSubnetFailover=Yes` to the connection string.</span></span>  
  
 <span data-ttu-id="8ea9d-185">A fonte de dados é definida agora.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-185">The data source is now defined.</span></span> <span data-ttu-id="8ea9d-186">Você pode continuar a criar um modelo, começando pela exibição da fonte de dados ou, no caso de modelos de tabela, criando relações.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-186">You can now proceed to build a model, starting with the data source view, or in the case of tabular models, creating relationships.</span></span> <span data-ttu-id="8ea9d-187">Quando você chega a tal ponto em que dados precisam ser recuperados do banco de dados de disponibilidade (por exemplo, quando você está pronto para processar ou implantar a solução), pode testar a configuração para verificar se dados são acessados da réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-187">When you are at a point where data must be retrieved from the availability database (for example when you are ready to process or deploy the solution), you can test the configuration to verify data is accessed from the secondary replica.</span></span>  
  
##  <a name="test-the-configuration"></a><a name="bkmk_test"></a><span data-ttu-id="8ea9d-188">Testar a configuração</span><span class="sxs-lookup"><span data-stu-id="8ea9d-188">Test the configuration</span></span>  
 <span data-ttu-id="8ea9d-189">Depois que você configurar a réplica secundária e criar uma conexão da fonte de dados no Analysis Services, poderá confirmar esse processamento e comandos de consulta serão redirecionados para a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-189">After you configure the secondary replica and create a data source connection in Analysis Services, you can confirm that processing and query commands are redirected to the secondary replica.</span></span> <span data-ttu-id="8ea9d-190">Você também pode executar um failover manual planejado para verificar seu plano de recuperação para este cenário.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-190">You can also perform a planned manual failover to verify your recovery plan for this scenario.</span></span>  
  
#### <a name="step-1-confirm-the-data-source-connection-is-redirected-to-the-secondary-replica"></a><span data-ttu-id="8ea9d-191">Etapa 1: confirmar que a conexão da fonte de dados é redirecionada para a réplica secundária</span><span class="sxs-lookup"><span data-stu-id="8ea9d-191">Step 1: Confirm the data source connection is redirected to the secondary replica</span></span>  
  
1.  <span data-ttu-id="8ea9d-192">Inicie o SQL Server Profiler e conecte à instância do SQL Server que hospeda a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-192">Start SQL Server Profiler and connect to the SQL Server instance hosting the secondary replica.</span></span>  
  
     <span data-ttu-id="8ea9d-193">Quando o rastreamento for executado, os eventos `SQL:BatchStarting` e `SQL:BatchCompleting` mostrarão as consultas emitidas do Analysis Services que são executadas na instância do mecanismo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-193">As the trace runs, the `SQL:BatchStarting` and `SQL:BatchCompleting` events will show the queries issued from Analysis Services that are executing on the database engine instance.</span></span> <span data-ttu-id="8ea9d-194">Estes eventos são selecionados por padrão; portanto, você só precisa iniciar o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-194">These events are selected by default so all you need to do is start the trace.</span></span>  
  
2.  <span data-ttu-id="8ea9d-195">No [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], abra o projeto ou a solução do Analysis Services que contém uma conexão da fonte de dados a ser testada.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-195">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], open the Analysis Services project or solution containing a data source connection you want to test.</span></span> <span data-ttu-id="8ea9d-196">Verifique se a fonte de dados especificou o ouvinte de grupo de disponibilidade e não uma instância no grupo.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-196">Be sure that the data source specifies the availability group listener and not an instance in the group.</span></span>  
  
     <span data-ttu-id="8ea9d-197">Essa etapa é importante.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-197">This step is important.</span></span> <span data-ttu-id="8ea9d-198">O roteando para a réplica secundária não ocorrerá se você especificar um nome de instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-198">Routing to the secondary replica will not occur if you specify a server instance name.</span></span>  
  
3.  <span data-ttu-id="8ea9d-199">Organize as janelas de aplicativo de forma que possa exibir o SQL Server Profiler e o [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] lado a lado.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-199">Arrange the application windows so that you can view SQL Server Profiler and [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] side by side.</span></span>  
  
4.  <span data-ttu-id="8ea9d-200">Implante a solução e quando concluir, pare o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-200">Deploy the solution, and when it completes, stop the trace.</span></span>  
  
     <span data-ttu-id="8ea9d-201">Na janela de rastreamento, você deve consultar eventos do aplicativo **Microsoft SQL Server Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-201">In the trace window, you should see events from the application **Microsoft SQL Server Analysis Services**.</span></span> <span data-ttu-id="8ea9d-202">Você deve consultar instruções `SELECT` que recuperam dados de um banco de dados na instância do servidor que hospeda a réplica secundária, provando que a conexão foi feita através do ouvinte para a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-202">You should see `SELECT` statements that retrieve data from a database on the server instance that hosts the secondary replica, proving that the connection was made via the listener to the secondary replica.</span></span>  
  
#### <a name="step-2-perform-a-planned-failover-to-test-the-configuration"></a><span data-ttu-id="8ea9d-203">Etapa 2: executar um failover planejado para testar a configuração</span><span class="sxs-lookup"><span data-stu-id="8ea9d-203">Step 2: Perform a planned failover to test the configuration</span></span>  
  
1.  <span data-ttu-id="8ea9d-204">No [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] , verifique as réplicas primária e secundária para garantir que ambas estão configuradas para o modo de confirmação síncrona e estão sincronizadas no momento.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-204">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] check the primary and secondary replicas to ensure that both are configured for synchronous-commit mode and are currently synchronized.</span></span>  
  
     <span data-ttu-id="8ea9d-205">As etapas a seguir assumem que uma réplica secundária é configurada para a confirmação síncrona.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-205">The following steps assume a secondary replica is configured for synchronous commit.</span></span>  
  
     <span data-ttu-id="8ea9d-206">Para verificar a sincronização, abra uma conexão com cada instância que hospeda as réplicas primária e secundária, expanda a pasta Bancos de Dados e verifique se o banco de dados tem **(Sincronizado)** e **(Sincronizando)** anexados a seu nome em cada réplica.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-206">To verify synchronization, open a connection to each instance that hosts the primary and secondary replicas, expand the Databases folder, and ensure that the database has **(Synchronized)** and **(Synchronizing)** appended to its name in each replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8ea9d-207">Estas etapas são obtidas de [Executar um failover manual planejado de um grupo de disponibilidade&#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), que contém informações adicionais e instruções alternativas para executar esta tarefa.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-207">These steps are taken from [Perform a Planned Manual Failover of an Availability Group &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="8ea9d-208">No SQL Server Profiler, inicie os rastreamentos para cada réplica e exiba os rastreamentos lado a lado.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-208">In SQL Server Profiler, start traces for each replica and view the traces side-by-side.</span></span> <span data-ttu-id="8ea9d-209">Nas etapas a seguir, você comparará rastreamentos, confirmando que as consultas SQL usadas para processar ou consultar do Analysis Services alternam de uma réplica para a outra.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-209">In the following steps, you will compare traces, confirming that the SQL queries used for processing or querying from Analysis Services switch from one replica to the other.</span></span>  
  
3.  <span data-ttu-id="8ea9d-210">Execute um comando de processamento ou de consulta do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-210">Execute a processing or query command from within Analysis Services.</span></span> <span data-ttu-id="8ea9d-211">Como você configurou a fonte de dados para uma conexão somente leitura, deve ver a execução do comando na réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-211">Because you configured the data source for a read-only connection, you should see the command execute on the secondary replica.</span></span>  
  
4.  <span data-ttu-id="8ea9d-212">No [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], conecte-se à réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-212">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], connect to the secondary replica.</span></span>  
  
5.  <span data-ttu-id="8ea9d-213">Expanda os nós **Alta Disponibilidade AlwaysOn** e **Grupos de Disponibilidade** .</span><span class="sxs-lookup"><span data-stu-id="8ea9d-213">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
6.  <span data-ttu-id="8ea9d-214">Clique com o botão direito do mouse no grupo de disponibilidade do qual fazer failover e selecione o comando **Failover** .</span><span class="sxs-lookup"><span data-stu-id="8ea9d-214">Right-click the availability group to be failed over, and select the **Failover** command.</span></span> <span data-ttu-id="8ea9d-215">Isso inicia o Assistente de Grupo de Disponibilidade de Failover.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-215">This starts the Fail Over Availability Group Wizard.</span></span> <span data-ttu-id="8ea9d-216">Use o assistente para escolher a réplica da qual será criada a nova réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-216">Use the wizard to choose which replica to make the new primary replica.</span></span>  
  
7.  <span data-ttu-id="8ea9d-217">Confirme que o failover teve êxito:</span><span class="sxs-lookup"><span data-stu-id="8ea9d-217">Confirm that failover succeeded:</span></span>  
  
    -   <span data-ttu-id="8ea9d-218">No [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expanda os grupos de disponibilidade para exibir as designações (primária) e (secundária).</span><span class="sxs-lookup"><span data-stu-id="8ea9d-218">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expand the availability groups to view the (primary) and (secondary) designations.</span></span> <span data-ttu-id="8ea9d-219">A instância que antes era uma réplica primária agora deve ser uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-219">The instance that was previously a primary replica should now be a secondary replica.</span></span>  
  
    -   <span data-ttu-id="8ea9d-220">Exiba o painel para determinar se foram detectados problemas de integridade.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-220">View the dashboard to determine if any health issues were detected.</span></span> <span data-ttu-id="8ea9d-221">Clique com o botão direito do mouse no grupo de disponibilidade e selecione **Mostrar Painel**.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-221">Right-click the availability group and select **Show Dashboard**.</span></span>  
  
8.  <span data-ttu-id="8ea9d-222">Espere um ou dois minutos pela conclusão do failover no backend.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-222">Wait one or two minutes for the failover to complete on the backend.</span></span>  
  
9. <span data-ttu-id="8ea9d-223">Repita o comando de processamento ou de consulta na solução do Analysis Services e observe os rastreamentos lado a lado no SQL Server Profiler.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-223">Repeat the processing or query command in the Analysis Services solution, and then watch the traces side by side in SQL Server Profiler.</span></span> <span data-ttu-id="8ea9d-224">Você deve encontrar evidência de processamento na outra instância, que agora é a nova réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-224">You should see evidence of processing on the other instance, which is now the new secondary replica.</span></span>  
  
##  <a name="what-happens-after-a-failover-occurs"></a><a name="bkmk_whathappens"></a><span data-ttu-id="8ea9d-225">O que acontece depois que um failover ocorre</span><span class="sxs-lookup"><span data-stu-id="8ea9d-225">What happens after a failover occurs</span></span>  
 <span data-ttu-id="8ea9d-226">Durante um failover, uma réplica secundária faz a transição para a função primária e a réplica primária antiga faz a transição para a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-226">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="8ea9d-227">Todas as conexões de cliente são finalizadas, a propriedade do ouvinte de grupo de disponibilidade é movida com a função de réplica primária para uma nova instância do SQL Server e o ponto de extremidade do ouvinte é associado aos endereços IP virtuais da nova instância e a portas TCP.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-227">All client connections are terminated, ownership of the availability group listener moves with the primary replica role to a new SQL Server instance, and the listener endpoint is bound to the new instance's virtual IP addresses and TCP ports.</span></span> <span data-ttu-id="8ea9d-228">Para obter mais informações, consulte [Sobre Acesso de conexão de cliente a réplicas de disponibilidade &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8ea9d-228">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
 <span data-ttu-id="8ea9d-229">Se o failover ocorrer durante o processamento, o seguinte erro ocorrerá no Analysis Services no arquivo de log ou na janela de Saída: "erro de OLE DB ou de ODBC: falha de link de comunicação; 08S01; Provedor de TPC: uma conexão existente foi fechada forçosamente pelo host remoto.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-229">If failover occurs during processing, the following error occurs in Analysis Services in the log file or output window: "OLE DB error: OLE DB or ODBC error: Communication link failure; 08S01; TPC Provider: An existing connection was forcibly closed by the remote host.</span></span> <span data-ttu-id="8ea9d-230">; 08S01."</span><span class="sxs-lookup"><span data-stu-id="8ea9d-230">; 08S01."</span></span>  
  
 <span data-ttu-id="8ea9d-231">Este erro deverá ser resolvido se você aguardar um minuto e tentar novamente.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-231">This error should resolve if you wait a minute and try again.</span></span> <span data-ttu-id="8ea9d-232">Se o grupo de disponibilidade for configurado corretamente para a réplica secundária legível, o processando será retomado na nova réplica secundária quando você tentar novamente processar.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-232">If the availability group is configured correctly for readable secondary replica, processing will resume on the new secondary replica when you retry processing.</span></span>  
  
 <span data-ttu-id="8ea9d-233">A causa mais provável de erros persistentes é um problema de configuração.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-233">Persistent errors are most likely due to a configuration problem.</span></span> <span data-ttu-id="8ea9d-234">Você pode tentar reexecutar o script T-SQL para resolver problemas na lista de roteamento, em URLs de roteamento somente leitura e a intenção de leitura na réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-234">You can try re-running the T-SQL script to resolve problems with the routing list, read-only routing URLs, and read-intent on the secondary replica.</span></span> <span data-ttu-id="8ea9d-235">Você também deve verificar se a réplica primária permite todas as conexões.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-235">You should also verify that the primary replica allows all connections.</span></span>  
  
##  <a name="writeback-when-using-an-alwayson-availability-database"></a><a name="bkmk_writeback"></a><span data-ttu-id="8ea9d-236">Write-back ao usar um banco de dados de disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="8ea9d-236">Writeback when using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="8ea9d-237">Writeback é um recurso do Analysis Services que oferece suporte à análise E-Se no Excel.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-237">Writeback is an Analysis Services feature that supports What If analysis in Excel.</span></span> <span data-ttu-id="8ea9d-238">Ele também costuma ser usado para orçar e prever tarefas em aplicativos personalizados.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-238">It is also commonly used for budgeting and forecasting tasks in custom applications.</span></span>  
  
 <span data-ttu-id="8ea9d-239">O suporte ao writeback exige uma conexão de cliente READWRITE.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-239">Support for writeback requires a READWRITE client connection.</span></span> <span data-ttu-id="8ea9d-240">No Excel, se você tentar fazer o write-back em uma conexão somente leitura, o seguinte erro ocorrerá: "Não foi possível recuperar dados da fonte de dados externa".</span><span class="sxs-lookup"><span data-stu-id="8ea9d-240">In Excel, if you attempt to write back on a read-only connection, the following error will occur: "Data could not be retrieved from the external data source."</span></span> <span data-ttu-id="8ea9d-241">"Não foi possível recuperar dados da fonte de dados externa."</span><span class="sxs-lookup"><span data-stu-id="8ea9d-241">"Data could not be retrieved from the external data source."</span></span>  
  
 <span data-ttu-id="8ea9d-242">Se você configurou uma conexão para sempre acessar uma réplica secundária legível, configure uma nova conexão que usa uma conexão READWRITE para a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-242">If you configured a connection to always access a readable secondary replica, you must now configure a new connection that uses a READWRITE connection to the primary replica.</span></span>  
  
 <span data-ttu-id="8ea9d-243">Para fazer isso, crie uma fonte de dados adicional em um modelo do Analysis Services para oferece suporte à conexão de leitura/gravação.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-243">To do this, create an additional data source in an Analysis Services model to support the read-write connection.</span></span> <span data-ttu-id="8ea9d-244">Ao criar a fonte de dados adicional, use o mesmo nome de ouvinte e banco de dados especificados na conexão somente leitura, mas, em vez de modificar a **Intenção de Aplicativo**, mantenha o padrão que dá suporte a conexões READWRITE.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-244">When creating the additional data source, use the same listener name and database that you specified in the read-only connection, but instead of modifying **Application Intent**, keep the default that supports READWRITE connections.</span></span> <span data-ttu-id="8ea9d-245">Você pode adicionar um novo fato ou tabelas de dimensão à sua exibição de fonte de dados com base na fonte de dados de leitura/gravação e, depois, habilitar o write-back nas novas tabelas.</span><span class="sxs-lookup"><span data-stu-id="8ea9d-245">You can now add new fact or dimension tables to your data source view that are based on the read-write data source, and then enable writeback on the new tables.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ea9d-246">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8ea9d-246">See Also</span></span>  
 <span data-ttu-id="8ea9d-247">[Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="8ea9d-247">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 <span data-ttu-id="8ea9d-248">[Secundárias ativas: réplicas secundárias legíveis &#40;Grupos de Disponibilidade AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="8ea9d-248">[Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="8ea9d-249">[Políticas AlwaysOn para problemas operacionais com o Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span><span class="sxs-lookup"><span data-stu-id="8ea9d-249">[AlwaysOn Policies for Operational Issues with AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span></span>  
 <span data-ttu-id="8ea9d-250">[Criar uma fonte de dados &#40;SSAS multidimensional&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span><span class="sxs-lookup"><span data-stu-id="8ea9d-250">[Create a Data Source &#40;SSAS Multidimensional&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span></span>  
 [<span data-ttu-id="8ea9d-251">Habilitar Write-back de Dimensão</span><span class="sxs-lookup"><span data-stu-id="8ea9d-251">Enable Dimension Writeback</span></span>](https://docs.microsoft.com/analysis-services/multidimensional-models/bi-wizard-enable-dimension-writeback)  
  
  
