---
title: Configurar a política de failover flexível para controlar condições para failover automático (Always On grupos de disponibilidade) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], flexible failover policy
- Availability Groups [SQL Server], failover
- failover [SQL Server], AlwaysOn Availability Groups
ms.assetid: 1ed564b4-9835-4245-ae35-9ba67419a4ce
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c938624a3ed39fe2d41f21a21af5231aa76a8c17
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684922"
---
# <a name="configure-the-flexible-failover-policy-to-control-conditions-for-automatic-failover-always-on-availability-groups"></a><span data-ttu-id="18f87-102">Configurar a política de failover flexível para controlar condições de failover automático (grupos de disponibilidade AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="18f87-102">Configure the Flexible Failover Policy to Control Conditions for Automatic Failover (Always On Availability Groups)</span></span>
  <span data-ttu-id="18f87-103">Este tópico descreve como configurar a política de failover flexível para um grupo de disponibilidade AlwaysOn usando o [!INCLUDE[tsql](../../../includes/tsql-md.md)] ou o PowerShell no [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="18f87-103">This topic describes how to configure the flexible failover policy for an AlwaysOn availability group by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="18f87-104">Uma política de failover flexível fornece o controle granular das condições que causam um failover automático para um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="18f87-104">A flexible failover policy provides granular control over the conditions that cause automatic failover for an availability group.</span></span> <span data-ttu-id="18f87-105">Ao alterar as condições de falha que disparam um failover automático e a frequência de verificações de integridade, você pode aumentar ou diminuir a probabilidade de um failover automático para oferecer suporte ao seu SLA para alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="18f87-105">By changing the failure conditions that trigger an automatic failover and the frequency of health checks, you can increase or decrease the likelihood of an automatic failover to support your SLA for high availability.</span></span>  
  
  
  
    > [!NOTE]  
    >  The flexible failover policy of an availability group cannot be configured by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="18f87-106">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="18f87-106">Before You Begin</span></span>  
  
###  <a name="limitations-on-automatic-failovers"></a><a name="Limitations"></a><span data-ttu-id="18f87-107">Limitações em failovers automáticos</span><span class="sxs-lookup"><span data-stu-id="18f87-107">Limitations on Automatic Failovers</span></span>  
  
-   <span data-ttu-id="18f87-108">Para que um failover automático ocorra, a réplica primária e uma réplica secundária deverão ser configuradas para o modo de disponibilidade de confirmação síncrona com failover automático e a réplica secundária deverá ser sincronizada com a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="18f87-108">For an automatic failover to occur, the current primary replica and one secondary replica must be configured for synchronous-commit availability mode with automatic failover and the secondary replica must be synchronized with the primary replica.</span></span>  
  
-   <span data-ttu-id="18f87-109">Se um grupo de disponibilidade exceder seu limite de falha do WSFC, o cluster do WSFC não tentará um failover automático para o grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="18f87-109">If an availability group exceeds its WSFC failure threshold, the WSFC cluster will not attempt an automatic failover for the availability group.</span></span> <span data-ttu-id="18f87-110">Além disso, o grupo de recursos do WSFC do grupo de disponibilidade permanece em um estado com falha até o administrador de cluster manualmente colocar online o grupo de recursos com falha ou o administrador de banco de dados executar um failover manual do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="18f87-110">Furthermore, the WSFC resource group of the availability group remains in a failed state until either the cluster administrator manually brings the failed resource group online or the database administrator performs a manual failover of the availability group.</span></span> <span data-ttu-id="18f87-111">O *limite de falha do WSFC* é definido como o número máximo de falhas com suporte para o grupo de disponibilidade durante um determinado período de tempo.</span><span class="sxs-lookup"><span data-stu-id="18f87-111">The *WSFC failure threshold* is defined as the maximum number of failures supported for the availability group during a given time period.</span></span> <span data-ttu-id="18f87-112">O período padrão é de seis horas e o valor padrão para o número máximo de falhas durante este período é *n*-1, em que *n* é o número de nós do WSFC.</span><span class="sxs-lookup"><span data-stu-id="18f87-112">The default time period is six hours, and the default value for the maximum number of failures during this period is *n*-1, where *n* is the number of WSFC nodes.</span></span> <span data-ttu-id="18f87-113">Para alterar os valores do limite de failover para um determinado grupo de disponibilidade, use o Console de Gerenciador de Failover WSFC.</span><span class="sxs-lookup"><span data-stu-id="18f87-113">To change the failure-threshold values for a given availability group, use the WSFC Failover Manager Console.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="18f87-114">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="18f87-114">Prerequisites</span></span>  
  
-   <span data-ttu-id="18f87-115">Você deve estar conectado à instância do servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="18f87-115">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="18f87-116">Segurança</span><span class="sxs-lookup"><span data-stu-id="18f87-116">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="18f87-117">Permissões</span><span class="sxs-lookup"><span data-stu-id="18f87-117">Permissions</span></span>  
  
|<span data-ttu-id="18f87-118">Tarefa</span><span class="sxs-lookup"><span data-stu-id="18f87-118">Task</span></span>|<span data-ttu-id="18f87-119">Permissões</span><span class="sxs-lookup"><span data-stu-id="18f87-119">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="18f87-120">Para configurar a política de failover flexível para um novo grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="18f87-120">To configure the flexible failover policy for a new availability group</span></span>|<span data-ttu-id="18f87-121">Requer a associação na função de servidor fixa **sysadmin** e a permissão de servidor CREATE AVAILABILITY GROUP, a permissão ALTER ANY AVAILABILITY GROUP ou a permissão CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="18f87-121">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="18f87-122">Para modificar a política de um grupo de disponibilidade existente</span><span class="sxs-lookup"><span data-stu-id="18f87-122">To modify the policy of an existing availability group</span></span>|<span data-ttu-id="18f87-123">Requer a permissão ALTER AVAILABILITY GROUP no grupo de disponibilidade, a permissão CONTROL AVAILABILITY GROUP, a permissão ALTER ANY AVAILABILITY GROUP ou a permissão CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="18f87-123">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="18f87-124">Usando o Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="18f87-124">Using Transact-SQL</span></span>  
 <span data-ttu-id="18f87-125">**Para configurar a política de failover flexível**</span><span class="sxs-lookup"><span data-stu-id="18f87-125">**To configure the flexible failover policy**</span></span>  
  
1.  <span data-ttu-id="18f87-126">Conecte-se à instância de servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="18f87-126">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="18f87-127">Para um novo grupo de disponibilidade, use a instrução [Criar grupo de disponibilidade](/sql/t-sql/statements/create-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="18f87-127">For a new availability group, use the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="18f87-128">Se você estiver modificando um grupo de disponibilidade existente, use a instrução [ALTER Availability Group](/sql/t-sql/statements/alter-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="18f87-128">If you are modifying an existing availability group, use the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
    -   <span data-ttu-id="18f87-129">Para definir o nível de condição de failover, use a opção FAILURE_CONDITION_LEVEL = *n* , em que *n* é um número inteiro de 1 a 5.</span><span class="sxs-lookup"><span data-stu-id="18f87-129">To set the failover condition level, use the FAILURE_CONDITION_LEVEL = *n* option, where, *n* is an integer from 1 to 5.</span></span>  
  
         <span data-ttu-id="18f87-130">Por exemplo, a instrução [!INCLUDE[tsql](../../../includes/tsql-md.md)] a seguir altera o nível da condição de falha de um grupo de disponibilidade existente, `AG1`, para o nível um:</span><span class="sxs-lookup"><span data-stu-id="18f87-130">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the failure-condition level of an existing availability group, `AG1`, to level one:</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (FAILURE_CONDITION_LEVEL = 1);  
        ```  
  
         <span data-ttu-id="18f87-131">A relação destes valores inteiros para os níveis de condição de falha é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="18f87-131">The relationship of these integer values to the failure condition levels is as follows:</span></span>  
  
        |[!INCLUDE[tsql](../../../includes/tsql-md.md)] <span data-ttu-id="18f87-132">Valor</span><span class="sxs-lookup"><span data-stu-id="18f87-132">Value</span></span>|<span data-ttu-id="18f87-133">Nível</span><span class="sxs-lookup"><span data-stu-id="18f87-133">Level</span></span>|<span data-ttu-id="18f87-134">Automático é o failover iniciado em caso de...</span><span class="sxs-lookup"><span data-stu-id="18f87-134">Automatic Is Failover Initiated When...</span></span>|  
        |------------------------------|-----------|-------------------------------------------|  
        |<span data-ttu-id="18f87-135">1</span><span class="sxs-lookup"><span data-stu-id="18f87-135">1</span></span>|<span data-ttu-id="18f87-136">Um</span><span class="sxs-lookup"><span data-stu-id="18f87-136">One</span></span>|<span data-ttu-id="18f87-137">Em servidor inativo.</span><span class="sxs-lookup"><span data-stu-id="18f87-137">On server down.</span></span> <span data-ttu-id="18f87-138">O serviço SQL Server é interrompido devido a um failover ou a uma reinicialização.</span><span class="sxs-lookup"><span data-stu-id="18f87-138">The SQL Server service stops because of a failover or restart.</span></span>|  
        |<span data-ttu-id="18f87-139">2</span><span class="sxs-lookup"><span data-stu-id="18f87-139">2</span></span>|<span data-ttu-id="18f87-140">Dois</span><span class="sxs-lookup"><span data-stu-id="18f87-140">Two</span></span>|<span data-ttu-id="18f87-141">Em servidor sem resposta.</span><span class="sxs-lookup"><span data-stu-id="18f87-141">On server unresponsive.</span></span> <span data-ttu-id="18f87-142">Qualquer condição de valor inferior é atendida, o serviço SQL Server está conectado ao cluster e o tempo limite de verificação de integridade é excedido, ou a réplica primária atual está em um estado de falha.</span><span class="sxs-lookup"><span data-stu-id="18f87-142">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |<span data-ttu-id="18f87-143">3</span><span class="sxs-lookup"><span data-stu-id="18f87-143">3</span></span>|<span data-ttu-id="18f87-144">Três</span><span class="sxs-lookup"><span data-stu-id="18f87-144">Three</span></span>|<span data-ttu-id="18f87-145">Em erros críticos do servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-145">On critical server error.</span></span> <span data-ttu-id="18f87-146">Qualquer condição de valor inferior é atendida ou há um erro crítico de servidor interno.</span><span class="sxs-lookup"><span data-stu-id="18f87-146">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="18f87-147">Este é o nível padrão.</span><span class="sxs-lookup"><span data-stu-id="18f87-147">This is the default level.</span></span>|  
        |<span data-ttu-id="18f87-148">4</span><span class="sxs-lookup"><span data-stu-id="18f87-148">4</span></span>|<span data-ttu-id="18f87-149">Quatro</span><span class="sxs-lookup"><span data-stu-id="18f87-149">Four</span></span>|<span data-ttu-id="18f87-150">Em erros moderados do servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-150">On moderate server error.</span></span> <span data-ttu-id="18f87-151">Qualquer condição de valor inferior é atendida ou há um erro moderado de servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-151">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |<span data-ttu-id="18f87-152">5</span><span class="sxs-lookup"><span data-stu-id="18f87-152">5</span></span>|<span data-ttu-id="18f87-153">Cinco</span><span class="sxs-lookup"><span data-stu-id="18f87-153">Five</span></span>|<span data-ttu-id="18f87-154">Em qualquer condição de falha qualificada.</span><span class="sxs-lookup"><span data-stu-id="18f87-154">On any qualified failure conditions.</span></span> <span data-ttu-id="18f87-155">Qualquer condição de valor inferior é atendida ou há uma condição de falha qualificada.</span><span class="sxs-lookup"><span data-stu-id="18f87-155">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="18f87-156">Para obter mais informações sobre os níveis de condição de failover, consulte [Política de failover flexível para failover automático de um grupo de disponibilidade &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="18f87-156">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
    -   <span data-ttu-id="18f87-157">Para configurar o tempo limite de verificação de integridade, use a opção HEALTH_CHECK_TIMEOUT = *n* , em que *n* é um número inteiro de 15000 milissegundos (15 segundos) a 4294967295 milissegundos.</span><span class="sxs-lookup"><span data-stu-id="18f87-157">To configure the health check timeout threshold, use the HEALTH_CHECK_TIMEOUT = *n* option, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="18f87-158">O valor padrão é 30000 milissegundos (30 segundos).</span><span class="sxs-lookup"><span data-stu-id="18f87-158">The default value is 30000 milliseconds (30 seconds)</span></span>  
  
         <span data-ttu-id="18f87-159">Por exemplo, a instrução [!INCLUDE[tsql](../../../includes/tsql-md.md)] a seguir altera o limite de tempo limite de verificação de integridade de um grupo de disponibilidade existente, `AG1`, para 60.000 milissegundos (um minuto).</span><span class="sxs-lookup"><span data-stu-id="18f87-159">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the health-check timeout threshold of an existing availability group, `AG1`, to 60,000 milliseconds (one minute).</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (HEALTH_CHECK_TIMEOUT = 60000);  
        ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="18f87-160">Uso do PowerShell</span><span class="sxs-lookup"><span data-stu-id="18f87-160">Using PowerShell</span></span>  

### <a name="to-configure-the-flexible-failover-policy"></a><span data-ttu-id="18f87-161">Para configurar a política de failover flexível \* \*</span><span class="sxs-lookup"><span data-stu-id="18f87-161">To configure the flexible failover policy\*\*</span></span>  
  
1.  <span data-ttu-id="18f87-162">Defina o padrão (`cd`) para a instância de servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="18f87-162">Set default (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="18f87-163">Ao adicionar uma réplica de disponibilidade a um grupo de disponibilidade, use o cmdlet `New-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="18f87-163">When adding an availability replica to an availability group, use the `New-SqlAvailabilityGroup` cmdlet.</span></span> <span data-ttu-id="18f87-164">Ao modificar uma réplica de disponibilidade existente, use o cmdlet `Set-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="18f87-164">When modifying an existing availability replica, use the `Set-SqlAvailabilityGroup` cmdlet.</span></span>  
  
    -   <span data-ttu-id="18f87-165">Para definir o nível de condição de failover, use o `FailureConditionLevel` parâmetro *Level* , em que, *Level* é um dos seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="18f87-165">To set the failover condition level, use the `FailureConditionLevel`*level* parameter, where, *level* is one of the following values:</span></span>  
  
        |<span data-ttu-id="18f87-166">Valor</span><span class="sxs-lookup"><span data-stu-id="18f87-166">Value</span></span>|<span data-ttu-id="18f87-167">Nível</span><span class="sxs-lookup"><span data-stu-id="18f87-167">Level</span></span>|<span data-ttu-id="18f87-168">Automático é o failover iniciado em caso de...</span><span class="sxs-lookup"><span data-stu-id="18f87-168">Automatic Is Failover Initiated When...</span></span>|  
        |-----------|-----------|-------------------------------------------|  
        |`OnServerDown`|<span data-ttu-id="18f87-169">Um</span><span class="sxs-lookup"><span data-stu-id="18f87-169">One</span></span>|<span data-ttu-id="18f87-170">Em servidor inativo.</span><span class="sxs-lookup"><span data-stu-id="18f87-170">On server down.</span></span> <span data-ttu-id="18f87-171">O serviço SQL Server é interrompido devido a um failover ou a uma reinicialização.</span><span class="sxs-lookup"><span data-stu-id="18f87-171">The SQL Server service stops because of a failover or restart.</span></span>|  
        |`OnServerUnresponsive`|<span data-ttu-id="18f87-172">Dois</span><span class="sxs-lookup"><span data-stu-id="18f87-172">Two</span></span>|<span data-ttu-id="18f87-173">Em servidor sem resposta.</span><span class="sxs-lookup"><span data-stu-id="18f87-173">On server unresponsive.</span></span> <span data-ttu-id="18f87-174">Qualquer condição de valor inferior é atendida, o serviço SQL Server está conectado ao cluster e o tempo limite de verificação de integridade é excedido, ou a réplica primária atual está em um estado de falha.</span><span class="sxs-lookup"><span data-stu-id="18f87-174">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |`OnCriticalServerError`|<span data-ttu-id="18f87-175">Três</span><span class="sxs-lookup"><span data-stu-id="18f87-175">Three</span></span>|<span data-ttu-id="18f87-176">Em erros críticos do servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-176">On critical server error.</span></span> <span data-ttu-id="18f87-177">Qualquer condição de valor inferior é atendida ou há um erro crítico de servidor interno.</span><span class="sxs-lookup"><span data-stu-id="18f87-177">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="18f87-178">Este é o nível padrão.</span><span class="sxs-lookup"><span data-stu-id="18f87-178">This is the default level.</span></span>|  
        |`OnModerateServerError`|<span data-ttu-id="18f87-179">Quatro</span><span class="sxs-lookup"><span data-stu-id="18f87-179">Four</span></span>|<span data-ttu-id="18f87-180">Em erros moderados do servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-180">On moderate server error.</span></span> <span data-ttu-id="18f87-181">Qualquer condição de valor inferior é atendida ou há um erro moderado de servidor.</span><span class="sxs-lookup"><span data-stu-id="18f87-181">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |`OnAnyQualifiedFailureConditions`|<span data-ttu-id="18f87-182">Cinco</span><span class="sxs-lookup"><span data-stu-id="18f87-182">Five</span></span>|<span data-ttu-id="18f87-183">Em qualquer condição de falha qualificada.</span><span class="sxs-lookup"><span data-stu-id="18f87-183">On any qualified failure conditions.</span></span> <span data-ttu-id="18f87-184">Qualquer condição de valor inferior é atendida ou há uma condição de falha qualificada.</span><span class="sxs-lookup"><span data-stu-id="18f87-184">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="18f87-185">Para obter mais informações sobre os níveis de condição de failover, consulte [Política de failover flexível para failover automático de um grupo de disponibilidade &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="18f87-185">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
         <span data-ttu-id="18f87-186">Por exemplo, o comando a seguir altera o nível da condição de falha de um grupo de disponibilidade existente, `AG1`, para o nível um.</span><span class="sxs-lookup"><span data-stu-id="18f87-186">For example, the following command changes the failure-condition level of an existing availability group, `AG1`, to level one.</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg `
         -FailureConditionLevel OnServerDown  
        ```  
  
    -   <span data-ttu-id="18f87-187">Para definir o limite de tempo limite da verificação de integridade, use o `HealthCheckTimeout` parâmetro *n* , em que *n* é um inteiro de 15000 milissegundos (15 segundos) a 4294967295 milissegundos.</span><span class="sxs-lookup"><span data-stu-id="18f87-187">To set the health check timeout threshold, use the `HealthCheckTimeout`*n* parameter, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="18f87-188">O valor padrão é 30000 milissegundos (30 segundos).</span><span class="sxs-lookup"><span data-stu-id="18f87-188">The default value is 30000 milliseconds (30 seconds).</span></span>  
  
         <span data-ttu-id="18f87-189">Por exemplo, o comando a seguir altera o tempo limite de verificação de integridade de um grupo de disponibilidade existente, `AG1`, para 120.000 milissegundos (dois minutos).</span><span class="sxs-lookup"><span data-stu-id="18f87-189">For example, the following command changes the health-check timeout threshold of an existing availability group, `AG1`, to 120,000 milliseconds (two minutes).</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAG `
         -HealthCheckTimeout 120000  
        ```  
  
> [!NOTE]  
>  <span data-ttu-id="18f87-190">Para exibir a sintaxe de um cmdlet, use o cmdlet `Get-Help` no ambiente do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="18f87-190">To view the syntax of a cmdlet, use the `Get-Help` cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="18f87-191">Para obter mais informações, consulte [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="18f87-191">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
 <span data-ttu-id="18f87-192">**Para configurar e usar o provedor do SQL Server PowerShell**</span><span class="sxs-lookup"><span data-stu-id="18f87-192">**To set up and use the SQL Server PowerShell provider**</span></span>  
  
-   [<span data-ttu-id="18f87-193">Provedor do SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="18f87-193">SQL Server PowerShell Provider</span></span>](../../../powershell/sql-server-powershell-provider.md)  
  
-   [<span data-ttu-id="18f87-194">Get Help SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="18f87-194">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
## <a name="see-also"></a><span data-ttu-id="18f87-195">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="18f87-195">See Also</span></span>  
 <span data-ttu-id="18f87-196">[Visão geral do Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="18f87-196">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="18f87-197">[Modos de disponibilidade (Grupos de Disponibilidade AlwaysOn)](availability-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="18f87-197">[Availability Modes (AlwaysOn Availability Groups)](availability-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="18f87-198">[Failover e modos de failover &#40;Grupos de Disponibilidade AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="18f87-198">[Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="18f87-199">[WSFC &#40;Windows Server Failover Clustering&#41; com o SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="18f87-199">[Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span></span>  
 <span data-ttu-id="18f87-200">[Política de failover para instâncias de cluster de failover](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span><span class="sxs-lookup"><span data-stu-id="18f87-200">[Failover Policy for Failover Cluster Instances](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span></span>  
 [<span data-ttu-id="18f87-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="18f87-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)  
