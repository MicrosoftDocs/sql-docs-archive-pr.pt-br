---
title: Visão geral dos cmdlets do PowerShell para Grupos de Disponibilidade AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], PowerShell cmdlets
- Availability Groups [SQL Server], about
- PowerShell [SQL Server], cmdlets
ms.assetid: b3fef0d5-b6d7-4386-a0f0-d06c165ad4de
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b6861abb3358df5e8c223d387b82e22de0f2a9d5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87570841"
---
# <a name="overview-of-powershell-cmdlets-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="06a2b-102">Visão geral de cmdlets do PowerShell para grupos de disponibilidade AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="06a2b-102">Overview of PowerShell Cmdlets for AlwaysOn Availability Groups (SQL Server)</span></span>
  [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="06a2b-103">O PowerShell é um shell de linha de comando baseado em tarefa e linguagem de script criado especialmente para a administração do sistema.</span><span class="sxs-lookup"><span data-stu-id="06a2b-103">PowerShell is a task-based command-line shell and scripting language designed especially for system administration.</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="06a2b-104">fornece um conjunto de cmdlets do PowerShell no [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] que permitem implantar, gerenciar e monitorar grupos de disponibilidade, réplicas de disponibilidade e bancos de dados de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-104">provides a set of PowerShell cmdlets in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that enable you to deploy, manage, and monitor availability groups, availability replicas, and availability databases.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="06a2b-105">Um cmdlet do PowerShell pode ser executado com o início bem-sucedido de uma ação.</span><span class="sxs-lookup"><span data-stu-id="06a2b-105">A PowerShell cmdlet can complete by successfully initiating an action.</span></span> <span data-ttu-id="06a2b-106">Isso não indica que o trabalho planejado, como o failover de um grupo de disponibilidade, foi concluído.</span><span class="sxs-lookup"><span data-stu-id="06a2b-106">This does not indicate that the intended work, such as the fail over of an availability group, has completed.</span></span> <span data-ttu-id="06a2b-107">Ao gerar o script de uma sequência de ações, talvez seja necessário verificar o status das ações e esperar que elas sejam concluídas.</span><span class="sxs-lookup"><span data-stu-id="06a2b-107">When scripting a sequence of actions, you might have to check the status of actions, and wait for them to complete.</span></span>  
  
 <span data-ttu-id="06a2b-108">Este tópico introduz os cmdlets para os seguintes conjuntos de tarefas:</span><span class="sxs-lookup"><span data-stu-id="06a2b-108">This topic introduces the cmdlets for the following sets of tasks:</span></span>  
  
-   [<span data-ttu-id="06a2b-109">Configurando uma instância de servidor para Grupos de Disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="06a2b-109">Configuring a server instance for AlwaysOn Availability Groups</span></span>](#ConfiguringServerInstance)  
  
-   [<span data-ttu-id="06a2b-110">Fazendo backup e restaurando bancos de dados e logs de transações</span><span class="sxs-lookup"><span data-stu-id="06a2b-110">Backing up and restoring databases and transaction logs</span></span>](#BnRcmdlets)  
  
-   [<span data-ttu-id="06a2b-111">Criando e gerenciando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-111">Creating and managing an availability group</span></span>](#DeployManageAGs)  
  
-   [<span data-ttu-id="06a2b-112">Criando e gerenciando um ouvinte de grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-112">Creating and managing an availability group listener</span></span>](#AGlisteners)  
  
-   [<span data-ttu-id="06a2b-113">Criando e gerenciando uma réplica de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-113">Creating and managing an availability replica</span></span>](#DeployManageARs)  
  
-   [<span data-ttu-id="06a2b-114">Adicionando e gerenciando um banco de dados de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-114">Adding and managing an availability database</span></span>](#DeployManageDbs)  
  
-   [<span data-ttu-id="06a2b-115">Monitorando a integridade de grupos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-115">Monitoring availability group health</span></span>](#MonitorTblshtAGs)  
  
> [!NOTE]  
>  <span data-ttu-id="06a2b-116">Para obter uma lista de tópicos nos [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] manuais online do que descrevem como usar cmdlets para executar [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] tarefas, consulte a seção "tarefas relacionadas" de [visão geral do Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="06a2b-116">For a list of topics in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] Books Online that describe how to use cmdlets to perform [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] tasks, see the "Related Tasks" section of [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>  
  
##  <a name="configuring-a-server-instance-for-alwayson-availability-groups"></a><a name="ConfiguringServerInstance"></a><span data-ttu-id="06a2b-117">Configurando uma instância de servidor para Grupos de Disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="06a2b-117">Configuring a Server Instance for AlwaysOn Availability Groups</span></span>  
  
|<span data-ttu-id="06a2b-118">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="06a2b-118">Cmdlets</span></span>|<span data-ttu-id="06a2b-119">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-119">Description</span></span>|<span data-ttu-id="06a2b-120">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-120">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Disable-SqlAlwaysOn`|<span data-ttu-id="06a2b-121">Desabilita o recurso [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] em uma instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="06a2b-121">Disables the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on a server instance.</span></span>|<span data-ttu-id="06a2b-122">A instância de servidor que é especificada pelo parâmetro `Path`, `InputObject` ou `Name`.</span><span class="sxs-lookup"><span data-stu-id="06a2b-122">The server instance that is specified by the `Path`, `InputObject`, or `Name` parameter.</span></span> <span data-ttu-id="06a2b-123">(Deve ser uma edição do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que dê suporte ao [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="06a2b-123">(Must be an edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].)</span></span>|  
|`Enable-SqlAlwaysOn`|<span data-ttu-id="06a2b-124">Habilita o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] em uma instância do [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] que dá suporte ao recurso [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="06a2b-124">Enables [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that supports the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature.</span></span> <span data-ttu-id="06a2b-125">Para obter informações sobre o suporte para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , consulte [pré-requisitos, restrições e recomendações para Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="06a2b-125">For information about support for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>|<span data-ttu-id="06a2b-126">Qualquer edição do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que dê suporte ao [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="06a2b-126">Any edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|`New-SqlHadrEndPoint`|<span data-ttu-id="06a2b-127">Cria um novo ponto de extremidade de espelhamento de banco de dados em uma instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="06a2b-127">Creates a new database mirroring endpoint on a server instance.</span></span> <span data-ttu-id="06a2b-128">Esse ponto de extremidade é necessário para a movimentação de dados entre os bancos de dados primário e secundário.</span><span class="sxs-lookup"><span data-stu-id="06a2b-128">This endpoint is required for data movement between primary and secondary databases.</span></span>|<span data-ttu-id="06a2b-129">Qualquer instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="06a2b-129">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span></span>|  
|`Set-SqlHadrEndpoint`|<span data-ttu-id="06a2b-130">Altera as propriedades de um ponto de extremidade de espelhamento de banco de dados existente, como o nome, o estado ou as propriedades de autenticação.</span><span class="sxs-lookup"><span data-stu-id="06a2b-130">Changes the properties of an existing database mirroring endpoint, such as the name, state, or authentication properties.</span></span>|<span data-ttu-id="06a2b-131">Uma instância de servidor que dá suporte ao [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] e não tem um ponto de extremidade de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="06a2b-131">A server instance that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and lacks a database mirroring endpoint</span></span>|  
  
##  <a name="backing-up-and-restoring-databases-and-transaction-logs"></a><a name="BnRcmdlets"></a><span data-ttu-id="06a2b-132">Fazendo backup e restaurando bancos de dados e logs de transações</span><span class="sxs-lookup"><span data-stu-id="06a2b-132">Backing Up and Restoring Databases and Transaction Logs</span></span>  
  
|<span data-ttu-id="06a2b-133">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="06a2b-133">Cmdlets</span></span>|<span data-ttu-id="06a2b-134">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-134">Description</span></span>|<span data-ttu-id="06a2b-135">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-135">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Backup-SqlDatabase`|<span data-ttu-id="06a2b-136">Cria um backup de dados ou de log.</span><span class="sxs-lookup"><span data-stu-id="06a2b-136">Creates a data or log backup.</span></span>|<span data-ttu-id="06a2b-137">Qualquer banco de dados online (para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], um banco de dados na instância do servidor que hospeda a réplica primária).</span><span class="sxs-lookup"><span data-stu-id="06a2b-137">Any online database (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a database on the server instance that hosts the primary replica)</span></span>|  
|`Restore-SqlDatabase`|<span data-ttu-id="06a2b-138">Restaura um backup.</span><span class="sxs-lookup"><span data-stu-id="06a2b-138">Restores a backup.</span></span>|<span data-ttu-id="06a2b-139">Qualquer instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], uma instância de servidor que hospeda uma réplica secundária)</span><span class="sxs-lookup"><span data-stu-id="06a2b-139">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a server instance that hosts a secondary replica)</span></span><br /><br /> <span data-ttu-id="06a2b-140">**&#42;&#42; importantes &#42;&#42;** Ao preparar um banco de dados secundário, você deve usar o `-NoRecovery` parâmetro em cada `Restore-SqlDatabase` comando.</span><span class="sxs-lookup"><span data-stu-id="06a2b-140">**&#42;&#42; Important &#42;&#42;** When preparing a secondary database, you must use the `-NoRecovery` parameter in every `Restore-SqlDatabase` command.</span></span>|  
  
 <span data-ttu-id="06a2b-141">Para obter informações sobre como usar esses cmdlets para preparar um banco de dados secundário, veja [Preparar um banco de dados secundário manualmente para um grupo de disponibilidade &#40;SQL Server&#41;](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="06a2b-141">For information about using these cmdlets to prepare a secondary database, see [Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md).</span></span>  
  
##  <a name="creating-and-managing-an-availability-group"></a><a name="DeployManageAGs"></a><span data-ttu-id="06a2b-142">Criando e gerenciando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-142">Creating and Managing an Availability Group</span></span>  
  
|<span data-ttu-id="06a2b-143">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="06a2b-143">Cmdlets</span></span>|<span data-ttu-id="06a2b-144">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-144">Description</span></span>|<span data-ttu-id="06a2b-145">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-145">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`New-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-146">Cria um novo grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-146">Creates a new availability group.</span></span>|<span data-ttu-id="06a2b-147">Instância de servidor para hospedar a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-147">Server instance to host primary replica</span></span>|  
|`Remove-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-148">Exclui um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-148">Deletes availability group.</span></span>|<span data-ttu-id="06a2b-149">Instância de servidor habilitada para HADR</span><span class="sxs-lookup"><span data-stu-id="06a2b-149">HADR-enabled server instance</span></span>|  
|`Set-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-150">Define as propriedades de um grupo de disponibilidade; coloca um grupo de disponibilidade online/offline</span><span class="sxs-lookup"><span data-stu-id="06a2b-150">Sets the properties of an availability group; take an availability group online/offline</span></span>|<span data-ttu-id="06a2b-151">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-151">Server instance that hosts primary replica</span></span>|  
|`Switch-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-152">Inicia um dos seguintes formulários de failover:</span><span class="sxs-lookup"><span data-stu-id="06a2b-152">Initiates one of the following forms of failover:</span></span><br /><br /> <span data-ttu-id="06a2b-153">Um failover forçado de um grupo de disponibilidade (com possível perda de dados).</span><span class="sxs-lookup"><span data-stu-id="06a2b-153">A forced failover of an availability group (with possible data loss).</span></span><br /><br /> <span data-ttu-id="06a2b-154">Um failover manual de um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-154">A manual failover of an availability group.</span></span>|<span data-ttu-id="06a2b-155">Instância de servidor que hospeda a réplica secundária de destino</span><span class="sxs-lookup"><span data-stu-id="06a2b-155">Server instance that hosts target secondary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-group-listener"></a><a name="AGlisteners"></a><span data-ttu-id="06a2b-156">Criando e gerenciando um ouvinte de grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-156">Creating and Managing an Availability Group Listener</span></span>  
  
|<span data-ttu-id="06a2b-157">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="06a2b-157">Cmdlet</span></span>|<span data-ttu-id="06a2b-158">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-158">Description</span></span>|<span data-ttu-id="06a2b-159">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-159">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`New-SqlAvailabilityGroupListener`|<span data-ttu-id="06a2b-160">Cria um novo ouvinte de grupo de disponibilidade e conecta-o a um grupo de disponibilidade existente.</span><span class="sxs-lookup"><span data-stu-id="06a2b-160">Creates a new availability group listener and attaches it to an existing availability group.</span></span>|<span data-ttu-id="06a2b-161">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-161">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityGroupListener`|<span data-ttu-id="06a2b-162">Modifica a configuração de porta em um ouvinte de grupo de disponibilidade existente.</span><span class="sxs-lookup"><span data-stu-id="06a2b-162">Modifies the port setting on an existing availability group listener.</span></span>|<span data-ttu-id="06a2b-163">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-163">Server instance that hosts primary replica</span></span>|  
|`Add-SqlAvailabilityGroupListenerStaticIp`|<span data-ttu-id="06a2b-164">Adiciona um endereço IP estático à configuração de um ouvinte de grupo de disponibilidade existente.</span><span class="sxs-lookup"><span data-stu-id="06a2b-164">Adds a static IP address to an existing availability group listener configuration.</span></span> <span data-ttu-id="06a2b-165">O endereço IP poderá ser um endereço IPv4 com sub-rede ou um endereço IPv6.</span><span class="sxs-lookup"><span data-stu-id="06a2b-165">The IP address can be an IPv4 address with subnet, or an IPv6 address.</span></span>|<span data-ttu-id="06a2b-166">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-166">Server instance that hosts primary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-replica"></a><a name="DeployManageARs"></a><span data-ttu-id="06a2b-167">Criando e gerenciando uma réplica de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-167">Creating and Managing an Availability Replica</span></span>  
  
|<span data-ttu-id="06a2b-168">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="06a2b-168">Cmdlets</span></span>|<span data-ttu-id="06a2b-169">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-169">Description</span></span>|<span data-ttu-id="06a2b-170">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-170">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="06a2b-171">**New-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="06a2b-171">**New-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="06a2b-172">Cria uma nova réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-172">Creates a new availability replica.</span></span> <span data-ttu-id="06a2b-173">Você pode usar o parâmetro `-AsTemplate` para criar um objeto de réplica de disponibilidade de memória para cada nova réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-173">You can Use the `-AsTemplate` parameter to create an in-memory availability-replica object for each new availability replica.</span></span>|<span data-ttu-id="06a2b-174">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-174">Server instance that hosts primary replica</span></span>|  
|`Join-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-175">Une uma réplica secundária ao grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-175">Joins a secondary replica to the availability group.</span></span>|<span data-ttu-id="06a2b-176">Instância de servidor que hospeda a réplica secundária</span><span class="sxs-lookup"><span data-stu-id="06a2b-176">Server instance that hosts secondary replica</span></span>|  
|<span data-ttu-id="06a2b-177">**Remove-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="06a2b-177">**Remove-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="06a2b-178">Exclui uma réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-178">Deletes an availability replica.</span></span>|<span data-ttu-id="06a2b-179">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-179">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityReplica`|<span data-ttu-id="06a2b-180">Define as propriedades de uma réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-180">Sets the properties of an availability replica.</span></span>|<span data-ttu-id="06a2b-181">Instância de servidor que hospeda a réplica primária</span><span class="sxs-lookup"><span data-stu-id="06a2b-181">Server instance that hosts primary replica</span></span>|  
  
##  <a name="adding-and-managing-an-availability-database"></a><a name="DeployManageDbs"></a><span data-ttu-id="06a2b-182">Adicionando e gerenciando um banco de dados de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="06a2b-182">Adding and Managing an Availability Database</span></span>  
  
|<span data-ttu-id="06a2b-183">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="06a2b-183">Cmdlets</span></span>|<span data-ttu-id="06a2b-184">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-184">Description</span></span>|<span data-ttu-id="06a2b-185">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-185">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="06a2b-186">**Add-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="06a2b-186">**Add-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="06a2b-187">Na réplica primária, adiciona um banco de dados a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-187">On the primary replica, adds a database to an availability group.</span></span><br /><br /> <span data-ttu-id="06a2b-188">Em uma réplica secundária, une um banco de dados secundário a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-188">On a secondary replica, joins a secondary database to an availability group.</span></span>|<span data-ttu-id="06a2b-189">Qualquer instância de servidor que hospeda uma réplica de disponibilidade (o comportamento difere para réplicas primárias e secundárias)</span><span class="sxs-lookup"><span data-stu-id="06a2b-189">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|<span data-ttu-id="06a2b-190">**Remove-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="06a2b-190">**Remove-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="06a2b-191">Na réplica primária, remove o banco de dados do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-191">On the primary replica, removes the database from the availability group.</span></span><br /><br /> <span data-ttu-id="06a2b-192">Em uma réplica secundária, remove o banco de dados secundário da réplica secundária local.</span><span class="sxs-lookup"><span data-stu-id="06a2b-192">On a secondary replica, removes the local secondary database from the local secondary replica.</span></span>|<span data-ttu-id="06a2b-193">Qualquer instância de servidor que hospeda uma réplica de disponibilidade (o comportamento difere para réplicas primárias e secundárias)</span><span class="sxs-lookup"><span data-stu-id="06a2b-193">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|`Resume-SqlAvailabilityDatabase`|<span data-ttu-id="06a2b-194">Retoma a movimentação de dados para um banco de dados de disponibilidade suspenso.</span><span class="sxs-lookup"><span data-stu-id="06a2b-194">Resumes the data movement for a suspended availability database.</span></span>|<span data-ttu-id="06a2b-195">As instância do servidor na qual o banco de dados é suspenso.</span><span class="sxs-lookup"><span data-stu-id="06a2b-195">The server instance on which the database was suspended.</span></span>|  
|`Suspend-SqlAvailabilityDatabase`|<span data-ttu-id="06a2b-196">Suspende a movimentação de dados para um banco de dados de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-196">Suspends the data movement for an availability database.</span></span>|<span data-ttu-id="06a2b-197">Qualquer instância de servidor que hospeda uma réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="06a2b-197">Any server instance that hosts an availability replica.</span></span>|  
  
##  <a name="monitoring-availability-group-health"></a><a name="MonitorTblshtAGs"></a><span data-ttu-id="06a2b-198">Integridade do Grupo de Disponibilidade de monitoramento</span><span class="sxs-lookup"><span data-stu-id="06a2b-198">Monitoring Availability Group Health</span></span>  
 <span data-ttu-id="06a2b-199">Os cmdlets [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] a seguir permitem monitorar a integridade de um grupo de disponibilidade e de suas réplicas e bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="06a2b-199">The following [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cmdlets enable you to monitor the health of an availability group and its replicas and databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="06a2b-200">Você deve ter as permissões CONNECT, VIEW SERVER STATE e VIEW ANY DEFINITION para executar esses cmdlets.</span><span class="sxs-lookup"><span data-stu-id="06a2b-200">You must have CONNECT, VIEW SERVER STATE, and VIEW ANY DEFINITION permissions to execute these cmdlets.</span></span>  
  
|<span data-ttu-id="06a2b-201">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="06a2b-201">Cmdlet</span></span>|<span data-ttu-id="06a2b-202">Descrição</span><span class="sxs-lookup"><span data-stu-id="06a2b-202">Description</span></span>|<span data-ttu-id="06a2b-203">Com suporte em</span><span class="sxs-lookup"><span data-stu-id="06a2b-203">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`Test-SqlAvailabilityGroup`|<span data-ttu-id="06a2b-204">Avalia a integridade de um grupo de disponibilidade avaliando as políticas do PBM (gerenciamento baseado em políticas) do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="06a2b-204">Assesses the health of an availability group by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="06a2b-205">Qualquer instância de servidor que hospede uma réplica de disponibilidade.\*</span><span class="sxs-lookup"><span data-stu-id="06a2b-205">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlAvailabilityReplica`|<span data-ttu-id="06a2b-206">Avalia a integridade de réplicas de disponibilidade avaliando as políticas do PBM (gerenciamento baseado em políticas) do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="06a2b-206">Assesses the health of availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="06a2b-207">Qualquer instância de servidor que hospede uma réplica de disponibilidade.\*</span><span class="sxs-lookup"><span data-stu-id="06a2b-207">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlDatabaseReplicaState`|<span data-ttu-id="06a2b-208">Avalia a integridade de um banco de dados de disponibilidade em todas as réplicas de disponibilidade unidas avaliando as políticas do PBM (gerenciamento baseado em políticas) do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="06a2b-208">Assesses the health of an availability database on all joined availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="06a2b-209">Qualquer instância de servidor que hospede uma réplica de disponibilidade.\*</span><span class="sxs-lookup"><span data-stu-id="06a2b-209">Any server instance that hosts an availability replica.\*</span></span>|  
  
 <span data-ttu-id="06a2b-210">\*Para exibir informações sobre todas as réplicas de disponibilidade em um grupo de disponibilidade, use a instância do servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="06a2b-210">\*To view information about all of the availability replicas in an availability group, use to the server instance that hosts the primary replica.</span></span>  
  
 <span data-ttu-id="06a2b-211">Para obter mais informações, consulte [usar políticas AlwaysOn para exibir a integridade de um grupo de disponibilidade &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="06a2b-211">For more information, see [Use AlwaysOn Policies to View the Health of an Availability Group &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="06a2b-212">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="06a2b-212">See Also</span></span>  
 <span data-ttu-id="06a2b-213">[Visão geral do Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="06a2b-213">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="06a2b-214">Get Help SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="06a2b-214">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
  
