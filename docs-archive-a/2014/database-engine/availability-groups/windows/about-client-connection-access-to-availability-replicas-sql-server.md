---
title: Sobre o acesso de conexão de cliente a réplicas de disponibilidade (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], client connectivity
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 29027e46-43e4-4b45-b650-c4cdeacdf552
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 79e61f29957d90a429d8a0c66782ca7cf2e7bd4c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87681202"
---
# <a name="about-client-connection-access-to-availability-replicas-sql-server"></a><span data-ttu-id="12fc9-102">Sobre Acesso de conexão de cliente a réplicas de disponibilidade (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="12fc9-102">About Client Connection Access to Availability Replicas (SQL Server)</span></span>
  <span data-ttu-id="12fc9-103">Em um grupo de disponibilidade AlwaysOn, você pode configurar uma ou mais réplicas de disponibilidade para permitir conexões somente leitura quando elas estiverem sendo executadas na função secundária (ou seja, executando como uma réplica secundária).</span><span class="sxs-lookup"><span data-stu-id="12fc9-103">In an AlwaysOn availability group, you can configure one or more availability replicas to allow read-only connections when running under the secondary role (that is, when running as a secondary replica).</span></span> <span data-ttu-id="12fc9-104">Você também pode configurar cada réplica de disponibilidade para permitir ou excluir conexões somente leitura quando ela estiver sendo executada na função primária (ou seja, em execução como uma réplica primária).</span><span class="sxs-lookup"><span data-stu-id="12fc9-104">You can also configure each availability replica to allow or exclude read-only connections when running under the primary role (that is, when running as the primary replica).</span></span>  
  
 <span data-ttu-id="12fc9-105">Para facilitar o acesso de clientes aos bancos de dados primário ou secundário de um determinado grupo de disponibilidade, você deve definir um ouvinte de grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="12fc9-105">To facilitate client access to primary or secondary databases of a given availability group, you should define an availability group listener.</span></span> <span data-ttu-id="12fc9-106">Por padrão, o ouvinte do grupo de disponibilidade direciona as conexões de entrada para a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-106">By default, the availability group listener directs incoming connections to the primary replica.</span></span> <span data-ttu-id="12fc9-107">No entanto, você pode configurar um grupo de disponibilidade para suportar o roteamento somente leitura que permite que seu ouvinte de grupo de disponibilidade redirecione as solicitações de conexão de aplicativos de tentativa de leitura a uma réplica secundária legível.</span><span class="sxs-lookup"><span data-stu-id="12fc9-107">However, you can configure an availability group to support read-only routing, which enables its availability group listener to redirect the connection requests of read-intent applications to a readable secondary replica.</span></span> <span data-ttu-id="12fc9-108">Para obter informações, veja [Configurar o roteamento somente leitura para um grupo de disponibilidade &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-108">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
 <span data-ttu-id="12fc9-109">Durante um failover, uma réplica secundária faz a transição para a função primária e a réplica primária antiga faz a transição para a réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-109">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="12fc9-110">Durante o processo de failover, todas as conexões de cliente com a réplica primária e as réplicas secundárias são terminadas.</span><span class="sxs-lookup"><span data-stu-id="12fc9-110">During the failover process, all client connections to both the primary replica and secondary replicas are terminated.</span></span> <span data-ttu-id="12fc9-111">Após o failover, quando um cliente se reconecta ao ouvinte de grupo de disponibilidade, o ouvinte reconecta o cliente à nova réplica primária, com exceção de uma solicitação conexão de tentativa de leitura.</span><span class="sxs-lookup"><span data-stu-id="12fc9-111">After the failover, when a client reconnects to the availability group listener, the listener reconnects the client to the new primary replica, except for a read-intent connect request.</span></span> <span data-ttu-id="12fc9-112">Se o roteamento somente leitura estiver configurado nas instâncias de cliente e de servidor que hospedam a nova réplica primária e pelo menos em uma réplica secundária legível, as solicitações de conexão de tentativa de leitura serão redirecionadas a uma réplica secundária com suporte para o tipo de acesso de conexão exigido pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="12fc9-112">If read-only routing is configured on the client and on the server instances that hosts the new primary replica and on at least one readable secondary replica, read-intent connection requests are re-routed to a secondary replica that supports the type of connection access that the client requires.</span></span> <span data-ttu-id="12fc9-113">Para garantir uma experiência de cliente amigável depois de um failover, é importante configurar o acesso de conexão para as funções secundárias e primária de cada réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="12fc9-113">To ensure a graceful client experience after a failover, it is important to configure connection access for both the secondary and primary roles of every availability replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="12fc9-114">Para obter informações sobre o ouvinte do grupo de disponibilidade, que manipula as solicitações de conexão do cliente, consulte [Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-114">For information about the availability group listener, which handles client connection requests, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
 <span data-ttu-id="12fc9-115">**Neste tópico:**</span><span class="sxs-lookup"><span data-stu-id="12fc9-115">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="12fc9-116">Tipos de acesso de conexão com suporte da função secundária</span><span class="sxs-lookup"><span data-stu-id="12fc9-116">Types of Connection Access Supported by the Secondary Role</span></span>](#ConnectAccessForSecondary)  
  
-   [<span data-ttu-id="12fc9-117">Tipos de acesso de conexão com suporte da função primária</span><span class="sxs-lookup"><span data-stu-id="12fc9-117">Types of Connection Access Supported by the Primary Role</span></span>](#ConnectAccessForPrimary)  
  
-   [<span data-ttu-id="12fc9-118">Como a configuração de acesso de conectividade afeta a conectividade de clientes</span><span class="sxs-lookup"><span data-stu-id="12fc9-118">How the Connection Access Configuration Affects Client Connectivity</span></span>](#HowConnectionAccessAffectsConnectivity)  
  
-   [<span data-ttu-id="12fc9-119">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="12fc9-119">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="12fc9-120">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="12fc9-120">Related Content</span></span>](#RelatedContent)  
  
##  <a name="types-of-connection-access-supported-by-the-secondary-role"></a><a name="ConnectAccessForSecondary"></a><span data-ttu-id="12fc9-121">Tipos de acesso de conexão com suporte da função secundária</span><span class="sxs-lookup"><span data-stu-id="12fc9-121">Types of Connection Access Supported by the Secondary Role</span></span>  
 <span data-ttu-id="12fc9-122">A função secundária dá suporte a três alternativas para conexões de cliente, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="12fc9-122">The secondary role supports three alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="12fc9-123">Nenhuma conexão</span><span class="sxs-lookup"><span data-stu-id="12fc9-123">No connections</span></span>  
 <span data-ttu-id="12fc9-124">Nenhuma conexão de usuário é permitida.</span><span class="sxs-lookup"><span data-stu-id="12fc9-124">No user connections are allowed.</span></span> <span data-ttu-id="12fc9-125">Os bancos de dados secundários não estão disponíveis para acesso de leitura.</span><span class="sxs-lookup"><span data-stu-id="12fc9-125">Secondary databases are not available for read access.</span></span> <span data-ttu-id="12fc9-126">Esse é o comportamento padrão na função secundária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-126">This is the default behavior in the secondary role.</span></span>  
  
 <span data-ttu-id="12fc9-127">Conexões somente de intenção de leitura</span><span class="sxs-lookup"><span data-stu-id="12fc9-127">Only read-intent connections</span></span>  
 <span data-ttu-id="12fc9-128">Os bancos de dados secundários estão disponíveis somente para conexão para a qual a `Application Intent` propriedade de conexão está definida como `ReadOnly` (conexões de*intenção de leitura*).</span><span class="sxs-lookup"><span data-stu-id="12fc9-128">The secondary database(s) are available only for connection for which the `Application Intent` connection property is set to `ReadOnly` (*read-intent connections*).</span></span>  
  
 <span data-ttu-id="12fc9-129">Para obter mais informações sobre essa propriedade de conexão, consulte [Suporte do SQL Server Native Client à alta disponibilidade e recuperação de desastre](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-129">For information about this connection property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
 <span data-ttu-id="12fc9-130">Permitir qualquer conexão somente leitura</span><span class="sxs-lookup"><span data-stu-id="12fc9-130">Allow any read-only connection</span></span>  
 <span data-ttu-id="12fc9-131">Todos os bancos de dados secundários estão disponíveis para conexões de acesso de leitura.</span><span class="sxs-lookup"><span data-stu-id="12fc9-131">The secondary database(s) are all available for read access connections.</span></span> <span data-ttu-id="12fc9-132">Essa opção permite a conexão de clientes com versão inferior.</span><span class="sxs-lookup"><span data-stu-id="12fc9-132">This option allows lower versioned clients to connect.</span></span>  
  
 <span data-ttu-id="12fc9-133">Para obter mais informações, consulte [Configurar o acesso somente leitura em uma réplica de disponibilidade &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-133">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="types-of-connection-access-supported-by-the-primary-role"></a><a name="ConnectAccessForPrimary"></a><span data-ttu-id="12fc9-134">Tipos de acesso de conexão com suporte da função primária</span><span class="sxs-lookup"><span data-stu-id="12fc9-134">Types of Connection Access Supported by the Primary Role</span></span>  
 <span data-ttu-id="12fc9-135">A função primária dá suporte a duas alternativas para conexões de cliente, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="12fc9-135">The primary role supports two alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="12fc9-136">Todas as conexões são permitidas</span><span class="sxs-lookup"><span data-stu-id="12fc9-136">All connections are allowed</span></span>  
 <span data-ttu-id="12fc9-137">As conexões de leitura/gravação e somente leitura são permitidas nos bancos de dados primários.</span><span class="sxs-lookup"><span data-stu-id="12fc9-137">Both read-write and read-only connections are allowed to primary databases.</span></span> <span data-ttu-id="12fc9-138">Esse é o comportamento padrão para a função primária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-138">This is the default behavior for the primary role.</span></span>  
  
 <span data-ttu-id="12fc9-139">Permitir apenas conexões de leitura/gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-139">Allow only read-write connections</span></span>  
 <span data-ttu-id="12fc9-140">Quando a `Application Intent` propriedade de conexão é definida como **ReadWrite** ou não está definida, a conexão é permitida.</span><span class="sxs-lookup"><span data-stu-id="12fc9-140">When the `Application Intent` connection property is set to **ReadWrite** or is not set, the connection is allowed.</span></span> <span data-ttu-id="12fc9-141">Conexões para as quais a `Application Intent` palavra-chave da cadeia de conexão está definida `ReadOnly` não são permitidas.</span><span class="sxs-lookup"><span data-stu-id="12fc9-141">Connections for which the `Application Intent` connection string keyword is set to `ReadOnly` are not allowed.</span></span> <span data-ttu-id="12fc9-142">Permitir apenas conexões de leitura/gravação pode ajudar a impedir que os clientes conectem uma carga de trabalho de intenção de leitura à réplica primária por engano.</span><span class="sxs-lookup"><span data-stu-id="12fc9-142">Allowing only read-write connections can help prevent your customers from connecting a read-intent work load to the primary replica by mistake.</span></span>  
  
 <span data-ttu-id="12fc9-143">Para obter mais informações sobre essa propriedade de conexão, consulte [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-143">For information about this connection property, see [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="12fc9-144">Para obter mais informações, consulte [Configurar o acesso somente leitura em uma réplica de disponibilidade &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-144">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="how-the-connection-access-configuration-affects-client-connectivity"></a><a name="HowConnectionAccessAffectsConnectivity"></a><span data-ttu-id="12fc9-145">Como a configuração de acesso de conexão afeta a conectividade do cliente</span><span class="sxs-lookup"><span data-stu-id="12fc9-145">How the Connection Access Configuration Affects Client Connectivity</span></span>  
 <span data-ttu-id="12fc9-146">As configurações de acesso de conexão de uma réplica determinam se uma tentativa de conexão é reprovada ou tem êxito.</span><span class="sxs-lookup"><span data-stu-id="12fc9-146">The connection access settings of a replica determine whether a connection attempt fails or succeeds.</span></span> <span data-ttu-id="12fc9-147">A tabela a seguir resume quando uma determinada tentativa de conexão é reprovada ou tem êxito para cada configuração de acesso de conexão.</span><span class="sxs-lookup"><span data-stu-id="12fc9-147">The following table summarizes whether a given connection attempt succeeds or fails for each the connection-access setting.</span></span>  
  
|<span data-ttu-id="12fc9-148">Função da Réplica</span><span class="sxs-lookup"><span data-stu-id="12fc9-148">Replica Role</span></span>|<span data-ttu-id="12fc9-149">Acesso de conexão com suporte na réplica</span><span class="sxs-lookup"><span data-stu-id="12fc9-149">Connection Access Supported on Replica</span></span>|<span data-ttu-id="12fc9-150">Tentativa de conexão</span><span class="sxs-lookup"><span data-stu-id="12fc9-150">Connection Intent</span></span>|<span data-ttu-id="12fc9-151">Resultado da tentativa de conexão</span><span class="sxs-lookup"><span data-stu-id="12fc9-151">Connection-Attempt Result</span></span>|  
|------------------|--------------------------------------------|-----------------------|--------------------------------|  
|<span data-ttu-id="12fc9-152">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-152">Secondary</span></span>|<span data-ttu-id="12fc9-153">Tudo</span><span class="sxs-lookup"><span data-stu-id="12fc9-153">All</span></span>|<span data-ttu-id="12fc9-154">Intenção de leitura, leitura/gravação ou nenhuma intenção de conexão especificada</span><span class="sxs-lookup"><span data-stu-id="12fc9-154">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="12fc9-155">Sucesso</span><span class="sxs-lookup"><span data-stu-id="12fc9-155">Success</span></span>|  
|<span data-ttu-id="12fc9-156">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-156">Secondary</span></span>|<span data-ttu-id="12fc9-157">Nenhum (este é o comportamento padrão da função secundária).</span><span class="sxs-lookup"><span data-stu-id="12fc9-157">None (This is the default secondary behavior.)</span></span>|<span data-ttu-id="12fc9-158">Intenção de leitura, leitura/gravação ou nenhuma intenção de conexão especificada</span><span class="sxs-lookup"><span data-stu-id="12fc9-158">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="12fc9-159">Falha</span><span class="sxs-lookup"><span data-stu-id="12fc9-159">Failure</span></span>|  
|<span data-ttu-id="12fc9-160">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-160">Secondary</span></span>|<span data-ttu-id="12fc9-161">Tentativa de leitura somente</span><span class="sxs-lookup"><span data-stu-id="12fc9-161">Read-intent only</span></span>|<span data-ttu-id="12fc9-162">Intenção de leitura</span><span class="sxs-lookup"><span data-stu-id="12fc9-162">Read-intent</span></span>|<span data-ttu-id="12fc9-163">Sucesso</span><span class="sxs-lookup"><span data-stu-id="12fc9-163">Success</span></span>|  
|<span data-ttu-id="12fc9-164">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-164">Secondary</span></span>|<span data-ttu-id="12fc9-165">Tentativa de leitura somente</span><span class="sxs-lookup"><span data-stu-id="12fc9-165">Read-intent only</span></span>|<span data-ttu-id="12fc9-166">Intenção de leitura/gravação ou nenhuma intenção de conexão especificada</span><span class="sxs-lookup"><span data-stu-id="12fc9-166">Read-write or no connection intent specified</span></span>|<span data-ttu-id="12fc9-167">Falha</span><span class="sxs-lookup"><span data-stu-id="12fc9-167">Failure</span></span>|  
|<span data-ttu-id="12fc9-168">Primário</span><span class="sxs-lookup"><span data-stu-id="12fc9-168">Primary</span></span>|<span data-ttu-id="12fc9-169">Tudo (esse é o comportamento padrão da função primária).</span><span class="sxs-lookup"><span data-stu-id="12fc9-169">All (This is the default primary behavior.)</span></span>|<span data-ttu-id="12fc9-170">Intenção de somente leitura, leitura/gravação ou nenhuma intenção de conexão especificada</span><span class="sxs-lookup"><span data-stu-id="12fc9-170">Read-only, read-write, or no connection intent specified</span></span>|<span data-ttu-id="12fc9-171">Sucesso</span><span class="sxs-lookup"><span data-stu-id="12fc9-171">Success</span></span>|  
|<span data-ttu-id="12fc9-172">Primário</span><span class="sxs-lookup"><span data-stu-id="12fc9-172">Primary</span></span>|<span data-ttu-id="12fc9-173">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-173">Read-write</span></span>|<span data-ttu-id="12fc9-174">Tentativa de leitura somente</span><span class="sxs-lookup"><span data-stu-id="12fc9-174">Read-intent only</span></span>|<span data-ttu-id="12fc9-175">Falha</span><span class="sxs-lookup"><span data-stu-id="12fc9-175">Failure</span></span>|  
|<span data-ttu-id="12fc9-176">Primário</span><span class="sxs-lookup"><span data-stu-id="12fc9-176">Primary</span></span>|<span data-ttu-id="12fc9-177">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-177">Read-write</span></span>|<span data-ttu-id="12fc9-178">Intenção de leitura/gravação ou nenhuma intenção de conexão especificada</span><span class="sxs-lookup"><span data-stu-id="12fc9-178">Read-write or no connection intent specified</span></span>|<span data-ttu-id="12fc9-179">Sucesso</span><span class="sxs-lookup"><span data-stu-id="12fc9-179">Success</span></span>|  
  
 <span data-ttu-id="12fc9-180">Para obter informações sobre como configurar um grupo de disponibilidade para aceitar conexões de cliente às suas réplicas, consulte [Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="12fc9-180">For information about configuring an availability group to accept client connections to its replicas, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
### <a name="example-connection-access-configuration"></a><span data-ttu-id="12fc9-181">Exemplo de configuração de acesso de conexão</span><span class="sxs-lookup"><span data-stu-id="12fc9-181">Example Connection-Access Configuration</span></span>  
 <span data-ttu-id="12fc9-182">Dependendo de como as diferentes réplicas de disponibilidade são configuradas para acesso de conexão, o suporte para conexões de clientes pode ser alterado depois que um grupo de disponibilidade sofre failover.</span><span class="sxs-lookup"><span data-stu-id="12fc9-182">Depending on how different availability replicas are configured for connection access, support for client connections might change after an availability group fails over.</span></span> <span data-ttu-id="12fc9-183">Por exemplo, considere um grupo de disponibilidade para o qual o relatório é executado em réplicas secundárias de confirmação assíncrona remotas.</span><span class="sxs-lookup"><span data-stu-id="12fc9-183">For example, consider an availability group for which reporting is performed on remote asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="12fc9-184">Todos os aplicativos somente leitura dos bancos de dados deste grupo de disponibilidade definem a propriedade de conexão `Application Intent` como `ReadOnly`, de forma que todas as conexões somente leitura são conexões de intenção de leitura.</span><span class="sxs-lookup"><span data-stu-id="12fc9-184">All of the read-only applications for the databases in this availability group set their `Application Intent` connection property to `ReadOnly`, so that all read-only connections are read-intent connections.</span></span>  
  
 <span data-ttu-id="12fc9-185">Este grupo de disponibilidade de exemplo possui duas réplicas da confirmação síncrona no centro de computação principal e duas réplicas da confirmação assíncrona em um site de satélite.</span><span class="sxs-lookup"><span data-stu-id="12fc9-185">This example availability group possesses two synchronous-commit replicas at the main computing center and two asynchronous-commit replicas at a satellite site.</span></span> <span data-ttu-id="12fc9-186">Para a função primária, todas as réplicas são configuradas para acesso de leitura/gravação, o que impede conexões de intenção de leitura com a réplica primária em todas as situações.</span><span class="sxs-lookup"><span data-stu-id="12fc9-186">For the primary role, all the replicas are configured for read-write access, which prevents read-intent connections to the primary replica in all situations.</span></span> <span data-ttu-id="12fc9-187">A função secundária de confirmação síncrona usa a configuração de acesso de conexão padrão ("nenhuma"), que impede todas as conexões de cliente sob a função secundária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-187">The synchronous commit secondary role uses the default connection-access configuration ("none"), which prevents all client connections under the secondary role.</span></span>  <span data-ttu-id="12fc9-188">Em comparação, as réplicas de confirmação assíncronas são configuradas para permitir conexões de intenção de leitura sob a função secundária.</span><span class="sxs-lookup"><span data-stu-id="12fc9-188">In contrast, the asynchronous commit replicas are configured to permit read-intent connections under the secondary role.</span></span> <span data-ttu-id="12fc9-189">A tabela a seguir resume essa configuração de exemplo:</span><span class="sxs-lookup"><span data-stu-id="12fc9-189">The following table summarize this example configuration:</span></span>  
  
|<span data-ttu-id="12fc9-190">Réplica</span><span class="sxs-lookup"><span data-stu-id="12fc9-190">Replica</span></span>|<span data-ttu-id="12fc9-191">Modo de confirmação</span><span class="sxs-lookup"><span data-stu-id="12fc9-191">Commit Mode</span></span>|<span data-ttu-id="12fc9-192">Função inicial</span><span class="sxs-lookup"><span data-stu-id="12fc9-192">Initial Role</span></span>|<span data-ttu-id="12fc9-193">Acesso de conexão para a função secundária</span><span class="sxs-lookup"><span data-stu-id="12fc9-193">Connection Access for Secondary Role</span></span>|<span data-ttu-id="12fc9-194">Acesso de conexão para a função primária</span><span class="sxs-lookup"><span data-stu-id="12fc9-194">Connection Access for Primary Role</span></span>|  
|-------------|-----------------|------------------|------------------------------------------|----------------------------------------|  
|<span data-ttu-id="12fc9-195">Replica1</span><span class="sxs-lookup"><span data-stu-id="12fc9-195">Replica1</span></span>|<span data-ttu-id="12fc9-196">Síncrona</span><span class="sxs-lookup"><span data-stu-id="12fc9-196">Synchronous</span></span>|<span data-ttu-id="12fc9-197">Primário</span><span class="sxs-lookup"><span data-stu-id="12fc9-197">Primary</span></span>|<span data-ttu-id="12fc9-198">Nenhum</span><span class="sxs-lookup"><span data-stu-id="12fc9-198">None</span></span>|<span data-ttu-id="12fc9-199">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-199">Read-write</span></span>|  
|<span data-ttu-id="12fc9-200">Replica2</span><span class="sxs-lookup"><span data-stu-id="12fc9-200">Replica2</span></span>|<span data-ttu-id="12fc9-201">Síncrono</span><span class="sxs-lookup"><span data-stu-id="12fc9-201">Synchronous</span></span>|<span data-ttu-id="12fc9-202">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-202">Secondary</span></span>|<span data-ttu-id="12fc9-203">Nenhum</span><span class="sxs-lookup"><span data-stu-id="12fc9-203">None</span></span>|<span data-ttu-id="12fc9-204">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-204">Read-write</span></span>|  
|<span data-ttu-id="12fc9-205">Replica3</span><span class="sxs-lookup"><span data-stu-id="12fc9-205">Replica3</span></span>|<span data-ttu-id="12fc9-206">Assíncrona</span><span class="sxs-lookup"><span data-stu-id="12fc9-206">Asynchronous</span></span>|<span data-ttu-id="12fc9-207">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-207">Secondary</span></span>|<span data-ttu-id="12fc9-208">Somente tentativa de leitura</span><span class="sxs-lookup"><span data-stu-id="12fc9-208">Read-intentonly</span></span>|<span data-ttu-id="12fc9-209">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-209">Read-write</span></span>|  
|<span data-ttu-id="12fc9-210">Replica4</span><span class="sxs-lookup"><span data-stu-id="12fc9-210">Replica4</span></span>|<span data-ttu-id="12fc9-211">Assíncronos</span><span class="sxs-lookup"><span data-stu-id="12fc9-211">Asynchronous</span></span>|<span data-ttu-id="12fc9-212">Secundário</span><span class="sxs-lookup"><span data-stu-id="12fc9-212">Secondary</span></span>|<span data-ttu-id="12fc9-213">Tentativa de leitura somente</span><span class="sxs-lookup"><span data-stu-id="12fc9-213">Read-intent only</span></span>|<span data-ttu-id="12fc9-214">Leitura-gravação</span><span class="sxs-lookup"><span data-stu-id="12fc9-214">Read-write</span></span>|  
  
 <span data-ttu-id="12fc9-215">Normalmente, neste cenário de exemplo, os failovers ocorrem apenas entre as réplicas de confirmação síncrona e imediatamente após o failover, os aplicativos de tentativa de leitura podem se reconectar a uma das réplicas secundárias de confirmação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="12fc9-215">Typically, in this example scenario, failovers occur only between the synchronous-commit replicas, and  immediately after the failover, read-intent applications are able to reconnect to one of the asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="12fc9-216">No entanto, quando ocorre um desastre no centro de computação principal, as duas réplicas de confirmação síncrona são perdidas.</span><span class="sxs-lookup"><span data-stu-id="12fc9-216">However, when a disaster occurs at the main computing center both synchronous-commit replicas are lost.</span></span> <span data-ttu-id="12fc9-217">O administrador de banco de dados no site de satélite responde executando um failover manual forçado em uma réplica secundária da confirmação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="12fc9-217">The database administrator at the satellite site responds by performing a forced manual failover to an asynchronous-commit secondary replica.</span></span> <span data-ttu-id="12fc9-218">Os bancos de dados secundários na réplica secundária restante são suspensos pelo failover forçado, tornando-os indisponíveis para cargas de trabalho somente leitura.</span><span class="sxs-lookup"><span data-stu-id="12fc9-218">The secondary databases on the remaining secondary replica are suspended by the forced failover, making them unavailable for read-only workloads.</span></span> <span data-ttu-id="12fc9-219">A nova réplica primária, que está configurada para conexões de leitura/gravação, impede que a carga de trabalho de intenção de leitura erudita compita com a carga de trabalho de leitura/gravação.</span><span class="sxs-lookup"><span data-stu-id="12fc9-219">The new primary replica, which is configured for read-write connections, prevents the read-intent workload from competing with the read-write workload.</span></span> <span data-ttu-id="12fc9-220">Isso significa que, até que o administrador de banco de dados retome os bancos de dados secundários na réplica secundária restante de confirmação assíncrona, os clientes com intenção de leitura não podem se conectar a qualquer réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="12fc9-220">This means that until the database administrator resumes the secondary databases on the remaining asynchronous-commit secondary replica, read-intent clients cannot connect to any availability replica.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="12fc9-221">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="12fc9-221">Related Tasks</span></span>  
  
-   [<span data-ttu-id="12fc9-222">Configurar o acesso somente leitura em uma réplica de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="12fc9-222">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="12fc9-223">Configurar o roteamento somente leitura para um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="12fc9-223">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="12fc9-224">Monitorar grupos de disponibilidade &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="12fc9-224">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="12fc9-225">Exibir as propriedades da réplica de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="12fc9-225">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   [<span data-ttu-id="12fc9-226">Usar a caixa de diálogo Novo Grupo de Disponibilidade &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="12fc9-226">Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;</span></span>](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="12fc9-227">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="12fc9-227">Related Content</span></span>  
  
-   [<span data-ttu-id="12fc9-228">Guia de soluções AlwaysOn do Microsoft SQL Server para alta disponibilidade e recuperação de desastre</span><span class="sxs-lookup"><span data-stu-id="12fc9-228">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="12fc9-229">Blog da equipe do AlwaysOn do SQL Server: blog oficial da equipe do SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="12fc9-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="12fc9-230">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="12fc9-230">See Also</span></span>  
 <span data-ttu-id="12fc9-231">[Visão geral do Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="12fc9-231">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="12fc9-232">[Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="12fc9-232">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="12fc9-233">Estatísticas</span><span class="sxs-lookup"><span data-stu-id="12fc9-233">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
