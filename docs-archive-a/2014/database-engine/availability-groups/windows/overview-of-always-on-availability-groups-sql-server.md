---
title: Visão geral de Grupos de Disponibilidade AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- secondary databases [SQL Server], in availability group
- primary databases [SQL Server], in availability group
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], data movement
- Availability Groups [SQL Server]
ms.assetid: 04fd9d95-4624-420f-a3be-1794309b3a47
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: bc49a841daaeb0f7bda6f793890433f26c6b5c1f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87570850"
---
# <a name="overview-of-alwayson-availability-groups-sql-server"></a><span data-ttu-id="313a4-102">Visão geral de grupos de disponibilidade AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="313a4-102">Overview of AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="313a4-103">Este tópico apresenta os conceitos do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] que são centrais para configurar e gerenciar um ou mais grupos de disponibilidade no [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="313a4-103">This topic introduces the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] concepts that are central for configuring and managing one or more availability groups in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="313a4-104">Para obter um resumo dos benefícios oferecidos pelos grupos de disponibilidade e uma visão geral da terminologia do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], consulte [Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-104">For a summary of the benefits offered by availability groups and an overview of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] terminology, see [AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="313a4-105">Um *grupo de disponibilidade* dá suporte a um ambiente de failover para um conjunto discreto de bancos de dados de usuário, conhecidos como *bancos de dados de disponibilidade*, que fazem failover juntos.</span><span class="sxs-lookup"><span data-stu-id="313a4-105">An *availability group* supports a failover environment for a discrete set of user databases, known as *availability databases*, that fail over together.</span></span> <span data-ttu-id="313a4-106">Um grupo de disponibilidade dá suporte a um conjunto de bancos de dados primários e a um dos oito conjuntos de bancos de dados secundários correspondentes.</span><span class="sxs-lookup"><span data-stu-id="313a4-106">An availability group supports a set of primary databases and one to eight sets of corresponding secondary databases.</span></span> <span data-ttu-id="313a4-107">Os bancos de dados secundários *não* são backups.</span><span class="sxs-lookup"><span data-stu-id="313a4-107">Secondary databases are *not* backups.</span></span> <span data-ttu-id="313a4-108">Continue para fazer backup dos bancos de dados e de seus logs de transações regularmente.</span><span class="sxs-lookup"><span data-stu-id="313a4-108">Continue to back up your databases and their transaction logs on a regular basis.</span></span>

> [!TIP]
>  <span data-ttu-id="313a4-109">Você pode criar qualquer tipo de backup de um banco de dados primário.</span><span class="sxs-lookup"><span data-stu-id="313a4-109">You can create any type of backup of a primary database.</span></span> <span data-ttu-id="313a4-110">Como alternativa, você pode criar backups de log e backups completos somente cópia dos bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="313a4-110">Alternatively, you can create log backups and copy-only full backups of secondary databases.</span></span> <span data-ttu-id="313a4-111">Para obter mais informações, consulte [Secundárias ativas: backup em réplicas secundárias &#40;Grupos de Disponibilidade AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-111">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

 <span data-ttu-id="313a4-112">Cada conjunto de bancos de dados de disponibilidade é hospedado por uma *réplica de disponibilidade*.</span><span class="sxs-lookup"><span data-stu-id="313a4-112">Each set of availability database is hosted by an *availability replica*.</span></span> <span data-ttu-id="313a4-113">Existem dois tipos de réplicas de disponibilidade: uma *réplica primária*única.</span><span class="sxs-lookup"><span data-stu-id="313a4-113">Two types of availability replicas exist: a single *primary replica*.</span></span> <span data-ttu-id="313a4-114">que hospeda os bancos de dados primários, e de uma a oito *réplicas secundárias*, cada uma hospedando um conjunto de bancos de dados secundários e atuando como destinos de failover em potencial para o grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-114">which hosts the primary databases, and one to eight *secondary replicas*, each of which hosts a set of secondary databases and serves as a potential failover targets for the availability group.</span></span> <span data-ttu-id="313a4-115">Um grupo de disponibilidade faz failover no nível de uma réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-115">An availability group fails over at the level of an availability replica.</span></span> <span data-ttu-id="313a4-116">Uma réplica de disponibilidade fornece redundância apenas no nível do banco de dados para o conjunto de bancos de dados em um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-116">An availability replica provides redundancy only at the database level-for the set of databases in one availability group.</span></span> <span data-ttu-id="313a4-117">Os failovers não são provocados por problemas de banco de dados, como um banco de dados que se torna suspeito devido à perda de um arquivo de dados ou à corrupção de um log de transações.</span><span class="sxs-lookup"><span data-stu-id="313a4-117">Failovers are not caused by database issues such as a database becoming suspect due to a loss of a data file or corruption of a transaction log.</span></span>

 <span data-ttu-id="313a4-118">A réplica primária torna os bancos de dados primários disponíveis para conexões de leitura-gravação de clientes.</span><span class="sxs-lookup"><span data-stu-id="313a4-118">The primary replica makes the primary databases available for read-write connections from clients.</span></span> <span data-ttu-id="313a4-119">E também em um processo conhecido como *sincronização de dados*, que ocorre no nível de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="313a4-119">Also, in a process known as *data synchronization*, which occurs at the database level.</span></span> <span data-ttu-id="313a4-120">A réplica primária envia registros de log de transações de cada banco de dados primário para todos os bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="313a4-120">The primary replica sends transaction log records of each primary database to every secondary database.</span></span> <span data-ttu-id="313a4-121">Cada réplica secundária armazena em cache os registros do log de transações (*intensifica* o log) e os aplica a seu banco de dados secundário correspondente.</span><span class="sxs-lookup"><span data-stu-id="313a4-121">Every secondary replica caches the transaction log records (*hardens* the log) and then applies them to its corresponding secondary database.</span></span> <span data-ttu-id="313a4-122">A sincronização de dados ocorre entre o banco de dados primário e cada banco de dados secundário conectado, independentemente de outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="313a4-122">Data synchronization occurs between the primary database and each connected secondary database, independently of the other databases.</span></span> <span data-ttu-id="313a4-123">Assim, um banco de dados secundário pode ser suspenso ou falhar sem que isso afete outros bancos de dados secundários, e um banco de dados primário pode ser suspenso ou falhar sem que isso afete outros bancos de dados primários.</span><span class="sxs-lookup"><span data-stu-id="313a4-123">Therefore, a secondary database can be suspended or fail without affecting other secondary databases, and a primary database can be suspended or fail without affecting other primary databases.</span></span>

 <span data-ttu-id="313a4-124">Opcionalmente, você pode configurar uma ou mais réplicas secundárias para dar suporte a acesso somente leitura a bancos de dados secundários, e pode configurar qualquer réplica secundária para permitir backups em bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="313a4-124">Optionally, you can configure one or more secondary replicas to support read-only access to secondary databases, and you can configure any secondary replica to permit backups on secondary databases.</span></span>

 <span data-ttu-id="313a4-125">A implantação do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] exige um cluster do WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="313a4-125">Deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requires a Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="313a4-126">Cada réplica de disponibilidade de um determinado grupo de disponibilidade deve residir em um nó diferente do mesmo cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="313a4-126">Each availability replica of a given availability group must reside on a different node of the same WSFC cluster.</span></span> <span data-ttu-id="313a4-127">A única exceção é que, embora tenha sido migrado para outro cluster WSFC, um grupo de disponibilidade pode temporariamente abranger dois clusters.</span><span class="sxs-lookup"><span data-stu-id="313a4-127">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>

 <span data-ttu-id="313a4-128">Um grupo de recursos do WSFC é criado para cada grupo de disponibilidade que você cria.</span><span class="sxs-lookup"><span data-stu-id="313a4-128">A WSFC resource group is created for every availability group that you create.</span></span> <span data-ttu-id="313a4-129">O cluster WSFC monitora este grupo de recursos para avaliar a integridade da réplica primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-129">The WSFC cluster monitors this resource group to evaluate the health of the primary replica.</span></span> <span data-ttu-id="313a4-130">O quorum para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] é baseado em todos os nós no cluster WSFC independentemente de se um determinado nó de cluster hospeda qualquer réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-130">The quorum for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is based on all nodes in the WSFC cluster regardless of whether a given cluster node hosts any availability replicas.</span></span> <span data-ttu-id="313a4-131">Ao contrário do espelhamento do banco de dados, não há nenhuma função de testemunha no [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="313a4-131">In contrast to database mirroring, there is no witness role in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>

> [!NOTE]
>  <span data-ttu-id="313a4-132">Para obter informações sobre a relação dos componentes do SQL Server AlwaysOn com o cluster WSFC, consulte [Clustering de Failover do Windows Server &#40;WSFC&#41; com SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-132">For information about the relationship of SQL Server AlwaysOn components to the WSFC cluster, see [Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span></span>

 <span data-ttu-id="313a4-133">A ilustração a seguir mostra um grupo de disponibilidade que contém uma réplica primária e quatro réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="313a4-133">The following illustration shows an availability group that contains one primary replica and four secondary replicas.</span></span> <span data-ttu-id="313a4-134">Até oito réplicas secundárias têm suporte, incluindo uma réplica primária e duas réplicas secundárias de confirmação síncrona.</span><span class="sxs-lookup"><span data-stu-id="313a4-134">Up to eight secondary replicas are supported, including one primary replica and two synchronous-commit secondary replicas.</span></span>

 <span data-ttu-id="313a4-135">![Grupo de disponibilidade com cinco réplicas](../../media/aoag-agintrofigure.gif "Grupo de disponibilidade com cinco réplicas")</span><span class="sxs-lookup"><span data-stu-id="313a4-135">![Availability group with five replicas](../../media/aoag-agintrofigure.gif "Availability group with five replicas")</span></span>


##  <a name="availability-databases"></a><a name="AvDbs"></a><span data-ttu-id="313a4-136">Bancos de dados de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="313a4-136">Availability Databases</span></span>
 <span data-ttu-id="313a4-137">Para adicionar um banco de dados a um grupo de disponibilidade, o banco de dados deve estar online, banco de dados de leitura/gravação que existe na instância do servidor que hospeda a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-137">To add a database to an availability group, the database must be an online, read-write database that exists on the server instance that hosts the primary replica.</span></span> <span data-ttu-id="313a4-138">Quando você adiciona um banco de dados, ele se une ao grupo de disponibilidade como um banco de dados primário, permanecendo disponível a clientes.</span><span class="sxs-lookup"><span data-stu-id="313a4-138">When you add a database, it joins the availability group as a primary database, while remaining available to clients.</span></span> <span data-ttu-id="313a4-139">Não existe nenhum banco de dados secundário correspondente até que os backups do novo banco de dados primário sejam restaurados na instância do servidor que hospeda a réplica secundária (usando RESTORE WITH NORECOVERY).</span><span class="sxs-lookup"><span data-stu-id="313a4-139">No corresponding secondary database exists until backups of the new primary database are restored to the server instance that hosts the secondary replica (using RESTORE WITH NORECOVERY).</span></span> <span data-ttu-id="313a4-140">O novo banco de dados secundário estará no estado RESTORING até que seja unido ao grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-140">The new secondary database is in the RESTORING state until it is joined to the availability group.</span></span> <span data-ttu-id="313a4-141">Para obter mais informações, consulte [Iniciar movimentação de dados em um banco de dados secundário AlwaysOn &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-141">For more information, see [Start Data Movement on an AlwaysOn Secondary Database &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span></span>

 <span data-ttu-id="313a4-142">A junção coloca o banco de dados secundário no estado ONLINE e inicia sincronização de dados com o banco de dados primário correspondente.</span><span class="sxs-lookup"><span data-stu-id="313a4-142">Joining places the secondary database into the ONLINE state and initiates data synchronization with the corresponding primary database.</span></span> <span data-ttu-id="313a4-143">*Sincronização de dados* é o processo pelo qual as alterações em um banco de dados primário são reproduzidas em um banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="313a4-143">*Data synchronization* is the process by which changes to a primary database are reproduced on a secondary database.</span></span> <span data-ttu-id="313a4-144">A sincronização de dados envolve o envio pelo banco de dados primário dos registros do log de transações ao banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="313a4-144">Data synchronization involves the primary database sending transaction log records to the secondary database.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="313a4-145">Um banco de dados de disponibilidade muitas vezes é chamado de *réplica de banco de dados* no [!INCLUDE[tsql](../../../includes/tsql-md.md)], no PowerShell e em nomes do SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="313a4-145">An availability database is sometimes called a *database replica* in [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell, and SQL Server Management Objects (SMO) names.</span></span> <span data-ttu-id="313a4-146">Por exemplo, o termo "réplica de banco de dados" é usado nos nomes das exibições de gerenciamento dinâmico AlwaysOn que retornam informações sobre bancos de dados de disponibilidade: **sys.dm_hadr_database_replica_states** and **sys.dm_hadr_database_replica_cluster_states**.</span><span class="sxs-lookup"><span data-stu-id="313a4-146">For example, the term "database replica" is used in the names of the AlwaysOn dynamic management views that return information about availability databases:  **sys.dm_hadr_database_replica_states** and **sys.dm_hadr_database_replica_cluster_states**.</span></span> <span data-ttu-id="313a4-147">Porém, nos Manuais Online do SQL Server, o termo "réplica" normalmente refere-se a réplicas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-147">However, in SQL Server Books Online, the term "replica" typically refers to availability replicas.</span></span> <span data-ttu-id="313a4-148">Por exemplo, "réplica primária" e "réplica secundária" sempre referem-se a réplicas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-148">For example, "primary replica" and "secondary replica" always refer to availability replicas.</span></span>

##  <a name="availability-replicas"></a><a name="AGsARsADBs"></a><span data-ttu-id="313a4-149">Réplicas de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="313a4-149">Availability Replicas</span></span>
 <span data-ttu-id="313a4-150">Cada grupo de disponibilidade define um conjunto de dois ou mais parceiros de failover conhecidos como réplicas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-150">Each availability group defines a set of two or more failover partners known as availability replicas.</span></span> <span data-ttu-id="313a4-151">As*réplicas de disponibilidade* são componentes do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-151">*Availability replicas* are components of the availability group.</span></span> <span data-ttu-id="313a4-152">Cada réplica de disponibilidade hospeda uma cópia dos bancos de dados de disponibilidade no grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-152">Each availability replica hosts a copy of the availability databases in the availability group.</span></span> <span data-ttu-id="313a4-153">Para um determinado grupo de disponibilidade, as réplicas de disponibilidade devem ser hospedadas por instâncias separadas do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que residem em nós diferentes de um cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="313a4-153">For a given availability group, the availability replicas must be hosted by separate instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] residing on different nodes of a WSFC cluster.</span></span> <span data-ttu-id="313a4-154">Cada instância de servidor deve estar habilitada para AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="313a4-154">Each of these server instances must be enabled for AlwaysOn.</span></span>

 <span data-ttu-id="313a4-155">Uma determinada instância pode hospedar apenas uma réplica de disponibilidade por grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-155">A given instance can host only one availability replica per availability group.</span></span> <span data-ttu-id="313a4-156">No entanto, cada instância pode ser usada para muitos grupos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-156">However, each instance can be used for many availability groups.</span></span> <span data-ttu-id="313a4-157">Uma determinada instância pode ser uma instância autônoma ou uma FCI (instância de cluster de failover) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="313a4-157">A given instance can be either a stand-alone instance or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI).</span></span> <span data-ttu-id="313a4-158">Se você precisar de redundância em nível de servidor, use instâncias de cluster de failover.</span><span class="sxs-lookup"><span data-stu-id="313a4-158">If you require server-level redundancy, use Failover Cluster Instances.</span></span>

 <span data-ttu-id="313a4-159">Cada réplica de disponibilidade recebe uma função inicial, a *função primária* ou a *função secundária*, que é herdada pelos bancos de dados de disponibilidade daquela réplica.</span><span class="sxs-lookup"><span data-stu-id="313a4-159">Every availability replica is assigned an initial role-either the *primary role* or the *secondary role*, which is inherited by the availability databases of that replica.</span></span> <span data-ttu-id="313a4-160">A função de uma determinada réplica determina se ela hospeda bancos de dados de leitura/gravação ou bancos de dados somente leitura.</span><span class="sxs-lookup"><span data-stu-id="313a4-160">The role of a given replica determines whether it hosts read-write databases or read-only databases.</span></span> <span data-ttu-id="313a4-161">Uma réplica, conhecida como a *réplica primária*, recebe a função primária e hospeda bancos de dados de leitura/gravação, que são conhecidos como *bancos de dados primários*.</span><span class="sxs-lookup"><span data-stu-id="313a4-161">One replica, known as the *primary replica*, is assigned the primary role and hosts read-write databases, which are known as *primary databases*.</span></span> <span data-ttu-id="313a4-162">Pelo menos uma outra réplica, conhecida como uma *réplica secundária*, recebe a função secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-162">At least one other replica, known as a *secondary replica*, is assigned the secondary role.</span></span> <span data-ttu-id="313a4-163">Uma réplica secundária hospeda bancos de dados somente leitura, conhecidos como bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="313a4-163">A secondary replica hosts read-only databases, known as secondary databases.</span></span>

> [!NOTE]
>  <span data-ttu-id="313a4-164">Quando a função de uma réplica de disponibilidade está indeterminada, como durante um failover, seus bancos de dados estão temporariamente em um estado NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="313a4-164">When the role of an availability replica is indeterminate, such as during a failover, its databases are temporarily in a NOT SYNCHRONIZING state.</span></span> <span data-ttu-id="313a4-165">A função dos bancos de dados é definida como RESOLVING até que a função da réplica de disponibilidade tenha sido resolvida.</span><span class="sxs-lookup"><span data-stu-id="313a4-165">Their role is set to RESOLVING until the role of the availability replica has resolved.</span></span> <span data-ttu-id="313a4-166">Se uma réplica de disponibilidade for resolvida para a função primária, seus bancos de dados se tornarão os bancos de dados primários.</span><span class="sxs-lookup"><span data-stu-id="313a4-166">If an availability replica resolves to the primary role, its databases become the primary databases.</span></span> <span data-ttu-id="313a4-167">Se uma réplica de disponibilidade for resolvida para a função secundária, seus bancos de dados se tornarão os bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="313a4-167">If an availability replica resolves to the secondary role, its databases become secondary databases.</span></span>

##  <a name="availability-modes"></a><a name="AvailabilityModes"></a><span data-ttu-id="313a4-168">Modos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="313a4-168">Availability Modes</span></span>
 <span data-ttu-id="313a4-169">O modo de disponibilidade é uma propriedade de cada réplica de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-169">The availability mode is a property of each availability replica.</span></span> <span data-ttu-id="313a4-170">O modo de disponibilidade determina se a réplica primária espera para confirmar transações em um banco de dados até que uma determinada réplica secundária tenha gravado os registros do log de transações em disco (protegido o log).</span><span class="sxs-lookup"><span data-stu-id="313a4-170">The availability mode determines whether the primary replica waits to commit transactions on a database until a given secondary replica has written the transaction log records to disk (hardened the log).</span></span> <span data-ttu-id="313a4-171">O [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] permite dois modos de disponibilidade: o *modo de confirmação assíncrona* e o *modo de confirmação síncrona*.</span><span class="sxs-lookup"><span data-stu-id="313a4-171">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] supports two availability modes-*asynchronous-commit mode* and *synchronous-commit mode*.</span></span>

-   <span data-ttu-id="313a4-172">**Asynchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="313a4-172">**Asynchronous-commit mode**</span></span>

     <span data-ttu-id="313a4-173">Uma réplica de disponibilidade que usa esse modo de disponibilidade é conhecida como uma*réplica da confirmação assíncrona*.</span><span class="sxs-lookup"><span data-stu-id="313a4-173">An availability replica that uses this availability mode is known as an*asynchronous-commit replica*.</span></span> <span data-ttu-id="313a4-174">No modo de confirmação assíncrona, a réplica primária confirma as transações sem esperar a confirmação de que uma réplica secundária de confirmação assíncrona protegeu o log.</span><span class="sxs-lookup"><span data-stu-id="313a4-174">Under asynchronous-commit mode, the primary replica commits transactions without waiting for acknowledgement that an asynchronous-commit secondary replica has hardened the log.</span></span> <span data-ttu-id="313a4-175">O modo de confirmação assíncrona minimiza a latência de transações nos bancos de dados secundários, mas permite que elas atrasem os bancos de dados primários, possibilitando a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="313a4-175">Asynchronous-commit mode minimizes transaction latency on the secondary databases but allows them to lag behind the primary databases, making some data loss possible.</span></span>

-   <span data-ttu-id="313a4-176">**Synchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="313a4-176">**Synchronous-commit mode**</span></span>

     <span data-ttu-id="313a4-177">Uma réplica de disponibilidade que usa esse modo de disponibilidade é conhecida como uma *réplica de confirmação síncrona*.</span><span class="sxs-lookup"><span data-stu-id="313a4-177">An availability replica that uses this availability mode is known as a *synchronous-commit replica*.</span></span> <span data-ttu-id="313a4-178">No modo de confirmação síncrona, antes de confirmar transações, uma réplica primária de confirmação síncrona espera que uma réplica secundária de confirmação síncrona confirme que concluiu a proteção do log.</span><span class="sxs-lookup"><span data-stu-id="313a4-178">Under synchronous-commit mode, before committing transactions, a synchronous-commit primary replica waits for a synchronous-commit secondary replica to acknowledge that it has finished hardening the log.</span></span> <span data-ttu-id="313a4-179">O modo de confirmação síncrona garante que, quando um determinado banco de dados secundário é sincronizado com o banco de dados primário, as transações confirmadas sejam totalmente protegidas.</span><span class="sxs-lookup"><span data-stu-id="313a4-179">Synchronous-commit mode ensures that once a given secondary database is synchronized with the primary database, committed transactions are fully protected.</span></span> <span data-ttu-id="313a4-180">Essa proteção ocorre às custas de latência de transação aumentada.</span><span class="sxs-lookup"><span data-stu-id="313a4-180">This protection comes at the cost of increased transaction latency.</span></span>

 <span data-ttu-id="313a4-181">Para obter mais informações, consulte [Modos de disponibilidade &#40;Grupos de Disponibilidade AlwaysOn&#41;](availability-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-181">For more information, see [Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md).</span></span>

##  <a name="types-of-failover"></a><a name="FormsOfFailover"></a><span data-ttu-id="313a4-182">Tipos de failover</span><span class="sxs-lookup"><span data-stu-id="313a4-182">Types of Failover</span></span>
 <span data-ttu-id="313a4-183">Dentro do contexto de uma sessão entre a réplica primária e uma réplica secundária, as funções primárias e secundárias são potencialmente permutáveis em um processo conhecido como *failover*.</span><span class="sxs-lookup"><span data-stu-id="313a4-183">Within the context of a session between the primary replica and a secondary replica, the primary and secondary roles are potentially interchangeable in a process known as *failover*.</span></span> <span data-ttu-id="313a4-184">Durante um failover, a réplica secundária de destino faz a transição para a função primária, tornando-se a nova réplica primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-184">During a failover the target secondary replica transitions to the primary role, becoming the new primary replica.</span></span> <span data-ttu-id="313a4-185">A nova réplica primária coloca seus bancos de dados online como os bancos de dados primários, e os aplicativos cliente podem conectar-se a eles.</span><span class="sxs-lookup"><span data-stu-id="313a4-185">The new primary replica brings its databases online as the primary databases, and client applications can connect to them.</span></span> <span data-ttu-id="313a4-186">Quando a réplica primária antiga está disponível, ela faz a transição para a função secundária, tornando-se uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-186">When the former primary replica is available, it transitions to the secondary role, becoming a secondary replica.</span></span> <span data-ttu-id="313a4-187">Os bancos de dados primários anteriores se tornam bancos de dados secundários e a sincronização de dados é retomada.</span><span class="sxs-lookup"><span data-stu-id="313a4-187">The former primary databases become secondary databases and data synchronization resumes.</span></span>

 <span data-ttu-id="313a4-188">Existem três formulários de failover: automático, manual e forçado (com possível perda de dados).</span><span class="sxs-lookup"><span data-stu-id="313a4-188">Three forms of failover exist-automatic, manual, and forced (with possible data loss).</span></span> <span data-ttu-id="313a4-189">O formulário ou formulários de failover com suporte de uma determinada réplica secundária dependem de seu modo de disponibilidade, e, para o modo de confirmação síncrona, no modo de failover na réplica primária e na réplica secundária de destino, da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="313a4-189">The form or forms of failover supported by a given secondary replica depends on its availability mode, and, for synchronous-commit mode, on the failover mode on the primary replica and target secondary replica, as follows.</span></span>

-   <span data-ttu-id="313a4-190">O modo de confirmação síncrona dá suporte a duas formas de failover*manual planejado* para failover e *failover automático*, se a réplica secundária de destino estiver sincronizada no momento com o avt1.</span><span class="sxs-lookup"><span data-stu-id="313a4-190">Synchronous-commit mode supports two forms of failover-*planned manual failover* and *automatic failover*, if the target secondary replica is currently synchronized with the avt1.</span></span> <span data-ttu-id="313a4-191">O suporte para esses formulários de failover depende da configuração da *propriedade de modo de failover* nos parceiros de failover.</span><span class="sxs-lookup"><span data-stu-id="313a4-191">The support for these forms of failover depends on the setting of the *failover mode property* on the failover partners.</span></span> <span data-ttu-id="313a4-192">Se o modo de failover for definido como "manual" na réplica primária ou secundária, apenas o failover manual terá suporte para aquela réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-192">If failover mode is set to "manual" on either the primary or secondary replica, only manual failover is supported for that secondary replica.</span></span> <span data-ttu-id="313a4-193">Se o modo de failover for definido como "automático" nas réplicas primária e secundária, failover automático e manual terão suporte naquela réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-193">If failover mode is set to "automatic" on both the primary and secondary replicas, both automatic and manual failover are supported on that secondary replica.</span></span>

    -   <span data-ttu-id="313a4-194">**Failover manual planejado** (sem perda de dados)</span><span class="sxs-lookup"><span data-stu-id="313a4-194">**Planned manual failover** (without data loss)</span></span>

         <span data-ttu-id="313a4-195">Um failover manual ocorre depois que um administrador de banco de dados emite um comando de failover e faz com que uma réplica secundária sincronizada faça a transição para a função primária (com proteção de dados garantida) e a réplica primária faça a transição para a função secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-195">A manual failover occurs after a database administrator issues a failover command and causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection) and the primary replica to transition to the secondary role.</span></span> <span data-ttu-id="313a4-196">Um failover manual exige que a réplica primária e a réplica secundária de destino estejam executando sob o modo de confirmação síncrona, e a réplica secundária já deve estar sincronizada.</span><span class="sxs-lookup"><span data-stu-id="313a4-196">A manual failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode, and the secondary replica must already be synchronized.</span></span>

    -   <span data-ttu-id="313a4-197">**Failover automático** (sem perda de dados)</span><span class="sxs-lookup"><span data-stu-id="313a4-197">**Automatic failover** (without data loss)</span></span>

         <span data-ttu-id="313a4-198">Um failover automático ocorre em resposta a uma falha que faz com que uma réplica secundária sincronizada faça a transição para a função primária (com proteção de dados garantida).</span><span class="sxs-lookup"><span data-stu-id="313a4-198">An automatic failover occurs in response to a failure that causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection).</span></span> <span data-ttu-id="313a4-199">Quando a réplica primária antiga se torna disponível, ela faz a transição para a função secundária.</span><span class="sxs-lookup"><span data-stu-id="313a4-199">When the former primary replica becomes available, it transitions to the secondary role.</span></span> <span data-ttu-id="313a4-200">O failover automático exige que a réplica primária e a réplica secundária de destino estejam executando sob o modo de confirmação síncrona com o modo de failover definido como "Automático".</span><span class="sxs-lookup"><span data-stu-id="313a4-200">Automatic failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode with the failover mode set to "Automatic".</span></span> <span data-ttu-id="313a4-201">Além disso, a réplica secundária já deve estar sincronizada, ter quorum de WSFC e atender às condições especificadas pela [política de failover flexível](flexible-automatic-failover-policy-availability-group.md)do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-201">In addition, the secondary replica must already be synchronized, have WSFC quorum, and meet the conditions specified by the [flexible failover policy](flexible-automatic-failover-policy-availability-group.md)of the availability group.</span></span>

        > [!IMPORTANT]
        >  <span data-ttu-id="313a4-202">As FCIs (Instâncias de cluster de failover) do SQL Server não dão suporte ao failover automático por grupos de disponibilidade, de modo que qualquer réplica de disponibilidade que esteja hospedado por um FCI só pode ser configurada para failover manual.</span><span class="sxs-lookup"><span data-stu-id="313a4-202">SQL Server Failover Cluster Instances (FCIs) do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can only be configured for manual failover.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="313a4-203">Observe que, se você emitir um comando de failover forçado em uma réplica secundária sincronizada, a réplica secundária se comportará da mesma maneira que um failover manual planejado.</span><span class="sxs-lookup"><span data-stu-id="313a4-203">Note that if you issue a forced failover command on a synchronized secondary replica, the secondary replica behaves the same as for a planned manual failover.</span></span>

-   <span data-ttu-id="313a4-204">No modo de confirmação assíncrona, a única forma de failover é o failover manual forçado (com possível perda de dados), geralmente conhecido como *failover forçado*.</span><span class="sxs-lookup"><span data-stu-id="313a4-204">Under asynchronous-commit mode, the only form of failover is forced manual failover (with possible data loss), typically called *forced failover*.</span></span> <span data-ttu-id="313a4-205">O failover forçado é considerado uma forma de failover manual porque ele só pode ser iniciado manualmente.</span><span class="sxs-lookup"><span data-stu-id="313a4-205">Forced failover is considered a form of manual failover because it can only be initiated manually.</span></span> <span data-ttu-id="313a4-206">O failover forçado é uma opção de recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="313a4-206">Forced failover is a disaster recovery option.</span></span> <span data-ttu-id="313a4-207">Trata-se da única forma de failover possível quando a réplica secundária de destino não está sincronizada com a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-207">It is the only form of failover that is possible when the target secondary replica is not synchronized with the primary replica.</span></span>

 <span data-ttu-id="313a4-208">Para obter mais informações, consulte [Failover e modos de failover &#40;Grupos de Disponibilidade AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-208">For more information, see [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span></span>

##  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="313a4-209">Conexões cliente</span><span class="sxs-lookup"><span data-stu-id="313a4-209">Client Connections</span></span>
 <span data-ttu-id="313a4-210">Você pode fornecer conectividade de cliente à réplica primária de um determinado grupo de disponibilidade criando um ouvinte de grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-210">You can provide client connectivity to the primary replica of a given availability group by creating an availability group listener.</span></span> <span data-ttu-id="313a4-211">Um *ouvinte de grupo de disponibilidade* fornece um conjunto de recursos que é conectado a um determinado grupo de disponibilidade para direcionar conexões de cliente à réplica de disponibilidade apropriada.</span><span class="sxs-lookup"><span data-stu-id="313a4-211">An *availability group listener* provides a set of resources that is attached to a given availability group to direct client connections to the appropriate availability replica.</span></span>

 <span data-ttu-id="313a4-212">Um ouvinte de grupo de disponibilidade é associado a um nome DNS exclusivo, que serve como um VNN (nome de rede virtual), um ou mais VIPs (endereços IP virtuais) e um número de porta TCP.</span><span class="sxs-lookup"><span data-stu-id="313a4-212">An availability group listener is associated with a unique DNS name that serves as a virtual network name (VNN), one or more virtual IP addresses (VIPs), and a TCP port number.</span></span> <span data-ttu-id="313a4-213">Para obter mais informações, consulte [Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-213">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

> [!TIP]
>  <span data-ttu-id="313a4-214">Se um grupo de disponibilidade possuir apenas duas réplicas de disponibilidade e não estiver configurado para permitir acesso de leitura à réplica secundária, os clientes poderão se conectar à réplica usando uma [cadeia de conexão do espelhamento do banco de dados](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-214">If an availability group possesses only two availability replicas and is not configured to allow read-access to the secondary replica, clients can connect to the primary replica by using a [database mirroring connection string](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span> <span data-ttu-id="313a4-215">Essa abordagem pode ser temporariamente útil depois que você migrar um banco de dados do espelhamento de banco de dados para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="313a4-215">This approach can be useful temporarily after you migrate a database from database mirroring to [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="313a4-216">Antes de adicionar mais réplicas secundárias, você precisará criar um ouvinte de grupo de disponibilidade para o grupo de disponibilidade e atualizar seus aplicativos para usarem o nome da rede do ouvinte.</span><span class="sxs-lookup"><span data-stu-id="313a4-216">Before you add additional secondary replicas, you will need to create an availability group listener the availability group and update your applications to use the network name of the listener.</span></span>

##  <a name="active-secondary-replicas"></a><a name="ActiveSecondaries"></a><span data-ttu-id="313a4-217">Réplicas secundárias ativas</span><span class="sxs-lookup"><span data-stu-id="313a4-217">Active Secondary Replicas</span></span>
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="313a4-218">oferece suporte a réplicas secundárias ativas.</span><span class="sxs-lookup"><span data-stu-id="313a4-218">supports active secondary replicas.</span></span> <span data-ttu-id="313a4-219">Os recursos secundários ativos incluem suporte para:</span><span class="sxs-lookup"><span data-stu-id="313a4-219">Active secondary capabilities include support for:</span></span>

-   <span data-ttu-id="313a4-220">**Executando operações de backup em réplicas secundárias**</span><span class="sxs-lookup"><span data-stu-id="313a4-220">**Performing backup operations on secondary replicas**</span></span>

     <span data-ttu-id="313a4-221">As réplicas secundárias dão suporte à execução de backups de log e [somente cópia](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) de um banco de dados completo, arquivo ou grupo de arquivos.</span><span class="sxs-lookup"><span data-stu-id="313a4-221">The secondary replicas support performing log backups and [copy-only](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) backups of a full database, file, or filegroup.</span></span> <span data-ttu-id="313a4-222">Você pode configurar o grupo de disponibilidade para especificar a preferência de onde os backups devem ser executados.</span><span class="sxs-lookup"><span data-stu-id="313a4-222">You can configure the availability group to specify a preference for where backups should be performed.</span></span> <span data-ttu-id="313a4-223">É importante compreender que a preferência não é imposta pelo SQL Server e, portanto, não tem nenhum impacto em backups ad hoc.</span><span class="sxs-lookup"><span data-stu-id="313a4-223">It is important to understand that the preference is not enforced by SQL Server, so it has no impact on ad-hoc backups.</span></span> <span data-ttu-id="313a4-224">A interpretação dessa preferência depende da lógica, se houver, que você usa para o script de seus trabalhos de backup para cada um dos bancos de dados em um determinado grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-224">The interpretation of this preference depends on the logic, if any, that you script into your back jobs for each of the databases in a given availability group.</span></span> <span data-ttu-id="313a4-225">Para uma réplica de disponibilidade individual, você pode especificar suas prioridades para executar backups nesta réplica em relação às outras réplicas no mesmo grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="313a4-225">For an individual availability replica, you can specify your priority for performing backups on this replica relative to the other replicas in the same availability group.</span></span> <span data-ttu-id="313a4-226">Para obter mais informações, consulte [Secundárias ativas: backup em réplicas secundárias &#40;Grupos de Disponibilidade AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-226">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

-   <span data-ttu-id="313a4-227">**O acesso somente leitura a uma ou mais réplicas secundárias (réplicas secundárias legíveis)**</span><span class="sxs-lookup"><span data-stu-id="313a4-227">**Read-only access to one or more secondary replicas (readable secondary replicas)**</span></span>

     <span data-ttu-id="313a4-228">Todas as réplicas de disponibilidade podem ser configuradas para permitir acesso somente leitura a seus bancos de dados locais ao executar a função secundária embora algumas operações não tenham suporte completo.</span><span class="sxs-lookup"><span data-stu-id="313a4-228">Any availability replica can be configured to allow read-only access to its local databases when performing the secondary role, though some operations are not fully supported.</span></span> <span data-ttu-id="313a4-229">Além disso, se você quiser impedir que cargas de trabalho somente leitura sejam executadas na réplica primária, poderá configurar as réplicas para permitir acesso somente de leitura/gravação ao serem executados sob a função primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-229">Also, if you would like to prevent read-only workloads from running on the primary replica, you can configure the replicas to allow only read-write access when running under the primary role.</span></span> <span data-ttu-id="313a4-230">Para obter mais informações, consulte [Secundárias Ativas: Réplicas Secundárias Legíveis &#40;Grupos de Disponibilidade AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-230">For more information, see [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>

     <span data-ttu-id="313a4-231">Se um grupo de disponibilidade tiver um ouvinte de grupo de disponibilidade e uma ou mais réplicas secundárias legíveis no momento, o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] poderá rotear solicitações de conexão da intenção de leitura para um deles (*roteamento somente leitura*).</span><span class="sxs-lookup"><span data-stu-id="313a4-231">If an availability group currently possesses an availability group listener and one or more readable secondary replicas, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can route read-intent connection requests to one of them (*read-only routing*).</span></span> <span data-ttu-id="313a4-232">Para obter mais informações, consulte [Ouvintes do grupo de disponibilidade, conectividade de cliente e failover de aplicativo &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-232">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

##  <a name="session-timeout-period"></a><a name="SessionTimeoutPerios"></a><span data-ttu-id="313a4-233">Período de tempo limite da sessão</span><span class="sxs-lookup"><span data-stu-id="313a4-233">Session-Timeout Period</span></span>
 <span data-ttu-id="313a4-234">O período de tempo limite da sessão é uma propriedade de réplica de disponibilidade que determina por quanto tempo a conexão com outra réplica de disponibilidade poderá permanecer inativa antes do fechamento da conexão.</span><span class="sxs-lookup"><span data-stu-id="313a4-234">The session-timeout period is an availability-replica property that determines how long connection with another availability replica can remain inactive before the connection is closed.</span></span> <span data-ttu-id="313a4-235">As réplicas primárias e secundárias executam ping uma da outra para sinalizar que ainda estão ativas.</span><span class="sxs-lookup"><span data-stu-id="313a4-235">The primary and secondary replicas ping each other to signal that they are still active.</span></span> <span data-ttu-id="313a4-236">A recepção de um ping de outra réplica durante o período de tempo limite indica que a conexão ainda está aberta e que as instâncias do servidor estão se comunicando.</span><span class="sxs-lookup"><span data-stu-id="313a4-236">Receiving a ping from the other replica during the timeout period indicates that the connection is still open and that the server instances are communicating.</span></span> <span data-ttu-id="313a4-237">Durante o recebimento de um ping, uma réplica de disponibilidade redefine seu contador de tempo limite de sessão nessa conexão.</span><span class="sxs-lookup"><span data-stu-id="313a4-237">On receiving a ping, an availability replica resets its session-timeout counter on that connection.</span></span>

 <span data-ttu-id="313a4-238">O período de tempo limite da sessão impede qualquer réplica de esperar indefinidamente para receber um ping de outra réplica.</span><span class="sxs-lookup"><span data-stu-id="313a4-238">The session-timeout period prevents either replica from waiting indefinitely to receive a ping from the other replica.</span></span> <span data-ttu-id="313a4-239">Se nenhum ping for recebido da outra réplica dentro do período de tempo limite da sessão, ocorrerá o tempo limite da réplica. Sua conexão é fechada e a réplica de tempo limite entra no estado DISCONNECTED.</span><span class="sxs-lookup"><span data-stu-id="313a4-239">If no ping is received from the other replica within the session-timeout period, the replica times out. Its connection is closed, and the timed-out replica enters the DISCONNECTED state.</span></span> <span data-ttu-id="313a4-240">Até mesmo se uma réplica desconectada estiver configurada para o modo de confirmação assíncrona, as transações não esperarão que a réplica se reconecte e seja sincronizada novamente.</span><span class="sxs-lookup"><span data-stu-id="313a4-240">Even if a disconnected replica is configured for synchronous-commit mode, transactions will not wait for that replica to reconnect and resynchronize.</span></span>

 <span data-ttu-id="313a4-241">O período de tempo limite da sessão padrão para cada réplica de disponibilidade é 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="313a4-241">The default session-timeout period for each availability replica is 10 seconds.</span></span> <span data-ttu-id="313a4-242">Esse valor pode ser configurado pelo usuário com um mínimo de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="313a4-242">This value is user-configurable, with a minimum of 5 seconds.</span></span> <span data-ttu-id="313a4-243">Em geral, recomendamos que você mantenha o tempo limite em 10 segundos ou mais.</span><span class="sxs-lookup"><span data-stu-id="313a4-243">Generally, we recommend that you keep the time-out period at 10 seconds or greater.</span></span> <span data-ttu-id="313a4-244">Definir o valor como menos de 10 segundos cria a possibilidade de um sistema extremamente carregado declarando uma falsa falha.</span><span class="sxs-lookup"><span data-stu-id="313a4-244">Setting the value to less than 10 seconds creates the possibility of a heavily loaded system declaring a false failure.</span></span>

> [!NOTE]
>  <span data-ttu-id="313a4-245">Na resolução da função, o período de tempo limite da sessão não se aplica, pois o ping não ocorre.</span><span class="sxs-lookup"><span data-stu-id="313a4-245">In the resolving role, the session-timeout period does not apply because pinging does not occur.</span></span>

##  <a name="automatic-page-repair"></a><a name="APR"></a><span data-ttu-id="313a4-246">Reparo automático de página</span><span class="sxs-lookup"><span data-stu-id="313a4-246">Automatic Page Repair</span></span>
 <span data-ttu-id="313a4-247">Cada réplica de disponibilidade tenta recuperar-se automaticamente de páginas corrompidas em um banco de dados local resolvendo determinados tipos de erros que impedem a leitura de uma página de dados.</span><span class="sxs-lookup"><span data-stu-id="313a4-247">Each availability replica tries to automatically recover from corrupted pages on a local database by resolving certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="313a4-248">Se uma réplica secundária não puder ler uma página, a réplica solicitará uma cópia atualizada da página da réplica primária.</span><span class="sxs-lookup"><span data-stu-id="313a4-248">If a secondary replica cannot read a page, the replica requests a fresh copy of the page from the primary replica.</span></span> <span data-ttu-id="313a4-249">Se a réplica primária não puder ler uma página, a réplica transmitirá uma solicitação de uma cópia atualizada para todas as réplicas secundárias e obterá a página da primeira a responder.</span><span class="sxs-lookup"><span data-stu-id="313a4-249">If the primary replica cannot read a page, the replica broadcasts a request for a fresh copy to all the secondary replicas and gets the page from the first to respond.</span></span> <span data-ttu-id="313a4-250">Se essa solicitação tiver êxito, a página ilegível será substituída pela cópia. Isso normalmente resolve o erro.</span><span class="sxs-lookup"><span data-stu-id="313a4-250">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span>

 <span data-ttu-id="313a4-251">Para obter mais informações, consulte [Reparo automático de página &#40;Para Grupos de Disponibilidade e Espelhamento de Banco de Dados&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="313a4-251">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="313a4-252">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="313a4-252">Related Tasks</span></span>

-   [<span data-ttu-id="313a4-253">Introdução com Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="313a4-253">Getting Started with AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](getting-started-with-always-on-availability-groups-sql-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="313a4-254">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="313a4-254">Related Content</span></span>

-   <span data-ttu-id="313a4-255">**Blogs:**</span><span class="sxs-lookup"><span data-stu-id="313a4-255">**Blogs:**</span></span>

     [<span data-ttu-id="313a4-256">Série de aprendizado do AlwaysON - HADRON: uso de trabalho do pool para bancos de dados habilitados do HADRON</span><span class="sxs-lookup"><span data-stu-id="313a4-256">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)

     [<span data-ttu-id="313a4-257">Blogs da equipe do SQL Server AlwaysOn: o blog oficial da equipe do SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="313a4-257">SQL Server AlwaysOn Team Blogs: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

     [<span data-ttu-id="313a4-258">Blogs dos engenheiros do CSS SQL Server</span><span class="sxs-lookup"><span data-stu-id="313a4-258">CSS SQL Server Engineers Blogs</span></span>](https://blogs.msdn.com/b/psssql/)

-   <span data-ttu-id="313a4-259">**Vídeos:**</span><span class="sxs-lookup"><span data-stu-id="313a4-259">**Videos:**</span></span>

     [<span data-ttu-id="313a4-260">Microsoft SQL Server codinome "Denali" Série AlwaysOn, Parte 1: Introduzindo a próxima geração de solução de alta disponibilidade</span><span class="sxs-lookup"><span data-stu-id="313a4-260">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 1: Introducing the Next Generation High Availability Solution</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI302)

     [<span data-ttu-id="313a4-261">Microsoft SQL Server codinome "Denali" Série AlwaysOn, Parte 2: Criando uma solução de disponibilidade de missão crítica usando AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="313a4-261">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 2: Building a Mission-Critical High Availability Solution Using AlwaysOn</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI404)

-   <span data-ttu-id="313a4-262">**Whitepapers:**</span><span class="sxs-lookup"><span data-stu-id="313a4-262">**Whitepapers:**</span></span>

     [<span data-ttu-id="313a4-263">Guia de soluções AlwaysOn do Microsoft SQL Server para alta disponibilidade e recuperação de desastre</span><span class="sxs-lookup"><span data-stu-id="313a4-263">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)

     [<span data-ttu-id="313a4-264">White papers da Microsoft para SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="313a4-264">Microsoft White Papers for SQL Server 2012</span></span>](https://msdn.microsoft.com/library/hh403491.aspx)

     [<span data-ttu-id="313a4-265">White papers da equipe de consultoria do cliente do SQL Server</span><span class="sxs-lookup"><span data-stu-id="313a4-265">SQL Server Customer Advisory Team Whitepapers</span></span>](http://sqlcat.com/)

## <a name="see-also"></a><span data-ttu-id="313a4-266">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="313a4-266">See Also</span></span>
 <span data-ttu-id="313a4-267">[Modos de disponibilidade &#40;Grupos de Disponibilidade AlwaysOn&#41;](availability-modes-always-on-availability-groups.md) [failover e modos de failover &#40;grupos de disponibilidade AlwaysOn](failover-and-failover-modes-always-on-availability-groups.md)&#41;[visão geral das instruções Transact-SQL para grupos de disponibilidade AlwaysOn &#40;](transact-sql-statements-for-always-on-availability-groups.md) SQL Server&#41;[visão geral dos cmdlets do PowerShell para grupos de disponibilidade AlwaysOn &#40;](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) SQL Server&#41;[suporte de alta disponibilidade para pré-requisitos na memória bancos de dados OLTP](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [, as restrições e as recomendações para grupos de disponibilidade AlwaysOn &#40;SQL Server](prereqs-restrictions-recommendations-always-on-availability.md) [criação de&#41;e configuração de grupos de disponibilidade &#40;](creation-and-configuration-of-availability-groups-sql-server.md) SQL Server de&#41;secundários [: réplicas secundárias legíveis &#40;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) grupos de disponibilidade AlwaysOns&#41;[secundárias ativas: backup em réplicas secundárias &#40;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) grupos de disponibilidade AlwaysOn [ouvintes de grupo de disponibilidade, conectividade de cliente e failover de aplicativo&#41;](../../listeners-client-connectivity-application-failover.md) &#40;SQL Server</span><span class="sxs-lookup"><span data-stu-id="313a4-267">[Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md) [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) [Overview of Transact-SQL Statements for AlwaysOn Availability Groups &#40;SQL Server&#41;](transact-sql-statements-for-always-on-availability-groups.md) [Overview of PowerShell Cmdlets for AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) [High Availability Support for In-Memory OLTP databases](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](creation-and-configuration-of-availability-groups-sql-server.md) [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)</span></span>

