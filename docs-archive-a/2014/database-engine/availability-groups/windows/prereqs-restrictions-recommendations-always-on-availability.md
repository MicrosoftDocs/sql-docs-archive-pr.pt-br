---
title: Pré-requisitos, restrições e recomendações para Grupos de Disponibilidade AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], server instance
- Availability Groups [SQL Server], deploying
- Availability Groups [SQL Server], WSFC clusters
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], prerequisites and restrictions
- Availability Groups [SQL Server], Failover Cluster Instances
- Availability Groups [SQL Server], databases
- Availability Groups [SQL Server]
ms.assetid: edbab896-42bb-4d17-8d75-e92ca11f7abb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 078f38058c612037a8013f7955349e94d6db610e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87684921"
---
# <a name="prerequisites-restrictions-and-recommendations-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="dc7a8-102">Pré-requisitos, restrições e recomendações para grupos de disponibilidade AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-102">Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="dc7a8-103">Este tópico descreve considerações sobre a implantação do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], inclusive pré-requisitos, restrições e recomendações para computadores host, clusters WSFC (Windows Server Failover Clustering), instâncias de servidor e grupos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-103">This topic describes considerations for deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], including prerequisites, restrictions, and recommendations for host computers, Windows Server Failover Clustering (WSFC) clusters, server instances, and availability groups.</span></span> <span data-ttu-id="dc7a8-104">Para cada um desses componentes, são indicadas considerações sobre segurança e as permissões exigidas, se houver.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-104">For each of these components security considerations and required permissions, if any, are indicated.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dc7a8-105">Antes de implantar o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], é altamente recomendável que você leia cada seção deste tópico.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-105">Before you deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], we strongly recommend that you read every section of this topic.</span></span>  
  
 
  
##  <a name="net-hotfixes-that-support-alwayson-availability-groups"></a><a name="DotNetHotfixes"></a><span data-ttu-id="dc7a8-106">Hotfixes do .NET que dão suporte ao Grupos de Disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="dc7a8-106">.NET Hotfixes that Support AlwaysOn Availability Groups</span></span>  
 <span data-ttu-id="dc7a8-107">Dependendo dos [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] componentes e recursos que você usará com o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , talvez seja necessário instalar hotfixes adicionais do .net identificados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-107">Depending on the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] components and features you will use with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], you may need to install additional .NET hotfixes identified in the following table.</span></span> <span data-ttu-id="dc7a8-108">Os hotfixes podem ser instalados em qualquer ordem.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-108">The hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="dc7a8-109">Recurso dependente</span><span class="sxs-lookup"><span data-stu-id="dc7a8-109">Dependent Feature</span></span>|<span data-ttu-id="dc7a8-110">Hotfix</span><span class="sxs-lookup"><span data-stu-id="dc7a8-110">Hotfix</span></span>|<span data-ttu-id="dc7a8-111">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-111">Link</span></span>|  
|------|-----------------------|------------|----------|  
|<span data-ttu-id="dc7a8-112">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-112">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]|<span data-ttu-id="dc7a8-113">O hotfix para .NET 3,5 SP1 adiciona suporte ao cliente SQL para recursos AlwaysOn de intenção de leitura, ReadOnly e multisubnetfailover.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-113">Hotfix for .NET 3.5 SP1 adds support to SQL Client for AlwaysOn features of Read-intent, readonly, and multisubnetfailover.</span></span> <span data-ttu-id="dc7a8-114">O hotfix precisa ser instalado em cada servidor de relatório do [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-114">The hotfix needs to be installed on each [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] report server.</span></span>|<span data-ttu-id="dc7a8-115">KB 2654347: [hotfix para .net 3,5 SP1 para adicionar suporte para recursos AlwaysOn](https://go.microsoft.com/fwlink/?LinkId=242896)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-115">KB 2654347: [Hotfix for .NET 3.5 SP1 to add support for AlwaysOn features](https://go.microsoft.com/fwlink/?LinkId=242896)</span></span>|  
  
##  <a name="windows-system-requirements-and-recommendations"></a><a name="SystemReqsForAOAG"></a><span data-ttu-id="dc7a8-116">Recomendações e requisitos de sistema do Windows</span><span class="sxs-lookup"><span data-stu-id="dc7a8-116">Windows System Requirements and Recommendations</span></span>  
  
  
###  <a name="checklist-requirements-windows-system"></a><a name="SystemRequirements"></a> <span data-ttu-id="dc7a8-117">Lista de verificação: requisitos (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-117">Checklist: Requirements (Windows System)</span></span>  
 <span data-ttu-id="dc7a8-118">Para oferecer suporte ao recurso [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , verifique se cada computador que participará de um ou mais grupos de disponibilidade atende aos seguintes requisitos básicos:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-118">To support the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature, ensure that every computer that is to participate in one or more availability groups meets the following fundamental requirements:</span></span>  
  
||<span data-ttu-id="dc7a8-119">Requisito</span><span class="sxs-lookup"><span data-stu-id="dc7a8-119">Requirement</span></span>|<span data-ttu-id="dc7a8-120">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-120">Link</span></span>|  
|------|-----------------|----------|  
|<span data-ttu-id="dc7a8-121">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-121">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-122">Verifique se o sistema não é um controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-122">Ensure that the system is not a domain controller.</span></span>|<span data-ttu-id="dc7a8-123">Os grupos de disponibilidade não têm suporte em controladores de domínio.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-123">Availability groups are not supported on domain controllers.</span></span>|  
|<span data-ttu-id="dc7a8-124">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-124">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-125">Verifique se cada computador está executando o Windows Server 2008 (não WOW64) na versão x86, x64 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-125">Ensure that each computer is running either x86 (non-WOW64) or x64 Windows Server 2008 or later versions.</span></span>|<span data-ttu-id="dc7a8-126">O WOW64 (Windows de 32 bits no Windows de 64 bits) não oferece suporte ao [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-126">WOW64 (Windows 32-bit on Windows 64-bit) does not support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|<span data-ttu-id="dc7a8-127">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-127">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-128">Verifique se cada computador é um nó em um cluster WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-128">Ensure that each computer is a node in a Windows Server Failover Clustering (WSFC) cluster.</span></span>|[<span data-ttu-id="dc7a8-129">WSFC &#40;Windows Server Failover Clustering&#41; com o SQL Server</span><span class="sxs-lookup"><span data-stu-id="dc7a8-129">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)|  
|<span data-ttu-id="dc7a8-130">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-130">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-131">Verifique se o cluster WSFC contém nós suficientes para oferecer suporte às suas configurações de grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-131">Ensure that the WSFC cluster contains sufficient nodes to support your availability group configurations.</span></span>|<span data-ttu-id="dc7a8-132">Um nó WSFC pode hospedar apenas uma réplica de disponibilidade para determinado grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-132">A WSFC node can host only one availability replica for a given availability group.</span></span> <span data-ttu-id="dc7a8-133">Em um nó WSFC específico, uma ou mais instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] podem hospedar réplicas de disponibilidade para muitos grupos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-133">On a given WSFC node, one or more instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can host availability replicas for many availability groups.</span></span><br /><br /> <span data-ttu-id="dc7a8-134">Pergunte aos administradores do banco de dados quantos nós WSFC são necessários para oferecer suporte às réplicas de disponibilidade dos grupos de disponibilidade planejados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-134">Ask your database administrators how many WSFC nodes are required for to support the availability replicas of the planned availability groups.</span></span><br /><br /> <span data-ttu-id="dc7a8-135">[Visão geral de grupos de disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-135">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>|  
|<span data-ttu-id="dc7a8-136">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-136">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-137">Verifique se todos os hotfixes do Windows aplicáveis foram instalados em todos os nós do cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-137">Ensure that all applicable Window hotfixes have been installed on every node in the WSFC cluster.</span></span>|<span data-ttu-id="dc7a8-138">Importante um número de hotfixes é necessário ou recomendado para os nós de um Cluster WSFC no qual o está sendo implantado. \*\* \* \* \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="dc7a8-138">**\*\* Important \*\*** A number of hotfixes are required or recommended for the nodes of a WSFC cluster on which [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is being deployed.</span></span> <span data-ttu-id="dc7a8-139">Para obter mais informações, consulte [Hotfixes do Windows que dão suporte a grupos de disponibilidade AlwaysOn (Sistema do Windows)](#WinHotfixes), posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-139">For more information, see [Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)](#WinHotfixes), later in this section.</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dc7a8-140">Verifique também se seu ambiente está corretamente configurado para a conexão a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-140">Also ensure that your environment is correctly configured for connecting to an availability group.</span></span> <span data-ttu-id="dc7a8-141">Para obter mais informações, consulte [conectividade de cliente AlwaysOn (SQL Server)](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-141">For more information, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
####  <a name="windows-hotfixes-that-support-alwayson-availability-groups-windows-system"></a><a name="WinHotfixes"></a><span data-ttu-id="dc7a8-142">Hotfixes do Windows que dão suporte a Grupos de Disponibilidade AlwaysOn (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-142">Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)</span></span>  
 <span data-ttu-id="dc7a8-143">Dependendo da sua topologia de cluster, diversos hotfixes adicionais do Windows Server 2008 Service Pack (SP2) ou Windows Server 2008 R2 podem ser aplicáveis para dar suporte ao [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-143">Depending on your cluster topology, several additional Windows Server 2008 Service Pack 2 (SP2) or Windows Server 2008 R2 hotfixes might be applicable for supporting [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="dc7a8-144">A tabela a seguir identifica esses hotfixes.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-144">The following table identifies these hotfixes.</span></span> <span data-ttu-id="dc7a8-145">Esses hotfixes podem ser instalados em qualquer ordem.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-145">They hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="dc7a8-146">Aplica-se ao Windows 2008 SP2</span><span class="sxs-lookup"><span data-stu-id="dc7a8-146">Applies to Windows 2008 SP2</span></span>|<span data-ttu-id="dc7a8-147">Aplica-se ao Windows 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="dc7a8-147">Applies to Windows 2008 R2 SP1</span></span>|<span data-ttu-id="dc7a8-148">Incluído no Windows 2012</span><span class="sxs-lookup"><span data-stu-id="dc7a8-148">Included in Windows 2012</span></span>|<span data-ttu-id="dc7a8-149">Para dar suporte a...</span><span class="sxs-lookup"><span data-stu-id="dc7a8-149">To Support...</span></span>|<span data-ttu-id="dc7a8-150">Hotfix</span><span class="sxs-lookup"><span data-stu-id="dc7a8-150">Hotfix</span></span>|<span data-ttu-id="dc7a8-151">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-151">Link</span></span>|  
|------|---------------------------------|------------------------------------|------------------------------|-----------------|------------|----------|  
|<span data-ttu-id="dc7a8-152">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-152">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-153">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-153">Yes</span></span>|<span data-ttu-id="dc7a8-154">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-154">Yes</span></span>|<span data-ttu-id="dc7a8-155">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-155">Yes</span></span>|<span data-ttu-id="dc7a8-156">**Configurando o quorum ideal de WSFC**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-156">**Configuring optimal WSFC quorum**</span></span>|<span data-ttu-id="dc7a8-157">Em cada nó WSFC, verifique se o hotfix descrito no artigo 2494036 da Base de Dados de Conhecimento foi instalado.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-157">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2494036 is installed.</span></span><br /><br /> <span data-ttu-id="dc7a8-158">Este hotfix oferece suporte à configuração de quorum ideal com destinos de failover não automático.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-158">This hotfix supports configuring optimal quorum with non-automatic failover targets.</span></span> <span data-ttu-id="dc7a8-159">Essa funcionalidade aprimora os clusters multissite, permitindo que você selecione os nós que votam.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-159">This functionality improves multi-site clusters by enabling you to select which nodes vote.</span></span>|<span data-ttu-id="dc7a8-160">KB 2494036:  [Um hotfix está disponível para permitir que você configure um nó de cluster que não tenha votos de quorum no Windows Server 2008 e no Windows Server 2008 R2](https://support.microsoft.com/kb/2494036)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-160">KB 2494036:  [A hotfix is available to let you configure a cluster node that does not have quorum votes in Windows Server 2008 and in Windows Server 2008 R2](https://support.microsoft.com/kb/2494036)</span></span><br /><br /> <span data-ttu-id="dc7a8-161">Para obter informações sobre votação de quorum, consulte [Configuração de modos de quorum WSFC e votação &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-161">For information about quorum voting, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span></span>|  
|<span data-ttu-id="dc7a8-162">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-162">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-163">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-163">Yes</span></span>|<span data-ttu-id="dc7a8-164">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-164">Yes</span></span>|<span data-ttu-id="dc7a8-165">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-165">Yes</span></span>|<span data-ttu-id="dc7a8-166">**Uso mais eficiente da largura de banda de rede**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-166">**More efficient use of network bandwidth**</span></span>|<span data-ttu-id="dc7a8-167">Em cada nó WSFC, verifique se o hotfix descrito no artigo 2616514 da Base de Dados de Conhecimento foi instalado.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-167">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2616514 is installed.</span></span><br /><br /> <span data-ttu-id="dc7a8-168">Sem este hotfix, o serviço de Cluster envia notificações do Registro desnecessárias entre nós de cluster.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-168">Without this hotfix, the Cluster service sends unnecessary registry notifications among cluster nodes.</span></span> <span data-ttu-id="dc7a8-169">Este comportamento limite a largura de banda de rede, que é um problema sério para [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-169">This behavior limits network bandwidth, which is a serious issue for [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)].</span></span>|<span data-ttu-id="dc7a8-170">KB 2616514:  [O serviço de cluster envia notificações de alteração da chave do Registro desnecessárias entre nós de cluster no Windows Server 2008 ou no Windows Server 2008 R2](https://support.microsoft.com/kb/2616514)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-170">KB 2616514:  [Cluster service sends unnecessary registry key change notifications among cluster nodes in Windows Server 2008 or in Windows Server 2008 R2](https://support.microsoft.com/kb/2616514)</span></span>|  
|<span data-ttu-id="dc7a8-171">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-171">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="dc7a8-172">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-172">Yes</span></span>|<span data-ttu-id="dc7a8-173">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="dc7a8-173">Not applicable</span></span>|<span data-ttu-id="dc7a8-174">**O teste de armazenamento de VPD em discos que não estão disponíveis a todos os nós WSFC**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-174">**VPD storage testing on disks that are not available to all WSFC nodes**</span></span>|<span data-ttu-id="dc7a8-175">Se um nó WSFC estiver executando o Windows Server 2008 R2 Service Pack 1 (SP1) e o teste de armazenamento Validar VPD (Vital Product Data) do dispositivo SCSI falhar depois de execução incorreta em discos online e não disponíveis a todos os nós no cluster WSFC, instale o hotfix descrito no artigo 2531907 da Base de Dados de Conhecimento.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-175">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1) and the Validate SCSI Device Vital Product Data (VPD) storage test fails after incorrectly running on disks that are online and not available to all nodes in the WSFC cluster, install the hotfix described in Knowledge Base article 2531907.</span></span><br /><br /> <span data-ttu-id="dc7a8-176">Este hotfix elimina avisos incorretos ou erros no relatório de validação quando há discos online.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-176">This hotfix eliminates incorrect warnings or errors in the validation report when disks are online.</span></span>|<span data-ttu-id="dc7a8-177">KB 2531907: [Validar VPD (Vital Product Data) do dispositivo SCSI falha depois que você instala o Windows Server 2008 R2 SP1](https://support.microsoft.com/kb/2531907)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-177">KB 2531907:  [Validate SCSI Device Vital Product Data (VPD) test fails after you install Windows Server 2008 R2 SP1](https://support.microsoft.com/kb/2531907)</span></span>|  
|<span data-ttu-id="dc7a8-178">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-178">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="dc7a8-179">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-179">Yes</span></span>|<span data-ttu-id="dc7a8-180">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-180">Yes</span></span>|<span data-ttu-id="dc7a8-181">**Failover mais rápido para réplicas locais**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-181">**Faster failover to local replicas**</span></span>|<span data-ttu-id="dc7a8-182">Se um nó WSFC estiver sendo executado no Windows Server 2008 R2 Service Pack 1 (SP1), verifique se o hotfix descrito no artigo 2687741 da Base de Dados de Conhecimento foi instalado.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-182">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1), ensure that the hotfix described in Knowledge Base article 2687741 is installed.</span></span><br /><br /> <span data-ttu-id="dc7a8-183">Este hotfix melhora o desempenho do failover do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] para réplicas locais.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-183">This hotfix improves the performance of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] failover to local replicas.</span></span>|<span data-ttu-id="dc7a8-184">KB 2687741:  [Um hotfix que melhora o desempenho do recurso "Grupo de disponibilidade AlwaysOn" no SQL Server 2012 está disponível para o Windows Server 2008 R2](https://support.microsoft.com/KB/2687741)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-184">KB 2687741:  [A hotfix that improves the performance of the "AlwaysOn Availability Group" feature in SQL Server 2012 is available for Windows Server 2008 R2](https://support.microsoft.com/KB/2687741)</span></span>|  
|<span data-ttu-id="dc7a8-185">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-185">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-186">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-186">Yes</span></span>|<span data-ttu-id="dc7a8-187">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-187">Yes</span></span>|<span data-ttu-id="dc7a8-188">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-188">Yes</span></span>|<span data-ttu-id="dc7a8-189">**Armazenamento assimétrico-para FCIs (instâncias de cluster de failover)**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-189">**Asymmetric storage-for Failover Cluster Instances (FCIs)**</span></span>|<span data-ttu-id="dc7a8-190">Se alguma FCI (Instância de Cluster de Failover) estiver habilitada para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], instale o hotfix 976097 do Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-190">If any Failover Cluster Instance (FCI) will be enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], install the Windows Server 2008 hotfix 976097.</span></span><br /><br /> <span data-ttu-id="dc7a8-191">Esse hotfix habilita o snap-in MMC (console de gerenciamento Microsoft) de gerenciamento de cluster de failover para dar suporte a discos compartilhados de armazenamento assimétrico que estão disponíveis somente em alguns dos nós WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-191">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="dc7a8-192">KB 976097: [hotfix para adicionar suporte para armazenamentos assimétricos no snap-in MMC de Gerenciamento de Cluster de Failover para um cluster de failover que está executando o Windows Server 2008 ou o Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-192">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span><br /><br /> [<span data-ttu-id="dc7a8-193">Guia da arquitetura do AlwaysOn: Criando uma solução de alta disponibilidade e recuperação de desastres usando instâncias de cluster de failover e grupos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-193">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)|  
|<span data-ttu-id="dc7a8-194">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-194">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-195">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-195">Yes</span></span>|<span data-ttu-id="dc7a8-196">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-196">Yes</span></span>|<span data-ttu-id="dc7a8-197">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="dc7a8-197">Not applicable</span></span>|<span data-ttu-id="dc7a8-198">**IPsec (Internet Protocol Security)**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-198">**Internet Protocol Security (IPsec)**</span></span>|<span data-ttu-id="dc7a8-199">Se seu ambiente usar conexões IPsec, você poderá experimentar um longo atraso (cerca de dois ou três minutos) quando o computador cliente restabelece a conexão IPsec com um nome de rede virtual (e, neste contexto, para conectar-se ao ouvinte do grupo de disponibilidade).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-199">If your environment uses IPsec connections, you could experience a long time delay (about two or three minutes) when a client computer reestablishes the IPsec connection to a virtual network name (in this context, to connect to the availability group listener).</span></span> <span data-ttu-id="dc7a8-200">Se você utilizar conexões IPsec, será recomendável rever os cenários específicos detalhados no seguinte artigo da Base de Dados de Conhecimento (KB 980915).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-200">If you use IPsec connections, we recommend that you review the specific scenarios detailed in Knowledge Base article (KB 980915).</span></span>|<span data-ttu-id="dc7a8-201">KB 980915:  [Ocorre um atraso muito longo ao reconectar uma conexão IPSec de um computador que está executando o Windows Server 2003, o Windows Vista, o Windows Server 2008, o Windows 7 ou o Windows Server 2008 R2](https://support.microsoft.com/kb/980915)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-201">KB 980915:  [A long time delay occurs when you reconnect an IPSec connection from a computer that is running Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7, or Windows Server 2008 R2](https://support.microsoft.com/kb/980915)</span></span>|  
|<span data-ttu-id="dc7a8-202">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-202">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-203">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-203">Yes</span></span>|<span data-ttu-id="dc7a8-204">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-204">Yes</span></span>|<span data-ttu-id="dc7a8-205">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-205">Yes</span></span>|<span data-ttu-id="dc7a8-206">**Protocolo**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-206">**IPv6**</span></span>|<span data-ttu-id="dc7a8-207">Se você utilizar conexões IPv6, será recomendável rever os cenários específicos detalhados no artigo 2578103 ou 2578113 da Base de Dados de Conhecimento, dependendo do sistema operacional do seu Windows Server.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-207">If you use IPv6, we recommend that you review the specific scenarios detailed in Knowledge Base article 2578103 or 2578113, depending on your Windows Server operating system.</span></span><br /><br /> <span data-ttu-id="dc7a8-208">Se sua topologia do Windows Server usar o IP versão 6 (IPv6), o serviço de Cluster WSFC precisará de cerca de 30 segundos para realizar o failover do endereço IP IPv6.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-208">If your Windows Server topology uses IP version 6 (IPv6), the WSFC Cluster service requires about 30 seconds to fail over the IPv6 IP address.</span></span> <span data-ttu-id="dc7a8-209">Isso faz com que os clientes esperem cerca de 30 segundos para reconectar-se com o endereço IP IPv6.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-209">This causes clients to wait for about 30 seconds to reconnect to the IPv6 IP address.</span></span>|<span data-ttu-id="dc7a8-210">KB 2578103 (Windows Server 2008): [o serviço de cluster leva aproximadamente 30 segundos para fazer failover de endereços IP IPv6 no Windows Server 2008](https://support.microsoft.com/kb/2578103)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-210">KB 2578103 (Windows Server 2008):  [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008](https://support.microsoft.com/kb/2578103)</span></span><br /><br /> <span data-ttu-id="dc7a8-211">KB 2578113 (Windows Server 2008 R2): **Windows Server 2008 R2:** [O serviço de cluster leva aproximadamente 30 segundos para fazer failover de endereços IP IPv6 no Windows Server 2008 R2](https://support.microsoft.com/kb/2578113)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-211">KB 2578113 (Windows Server 2008 R2):  **Windows Server 2008 R2:** [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008 R2](https://support.microsoft.com/kb/2578113)</span></span>|  
|<span data-ttu-id="dc7a8-212">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-212">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-213">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-213">Yes</span></span>|<span data-ttu-id="dc7a8-214">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-214">Yes</span></span>|<span data-ttu-id="dc7a8-215">Sim</span><span class="sxs-lookup"><span data-stu-id="dc7a8-215">Yes</span></span>|<span data-ttu-id="dc7a8-216">**Nenhum roteador entre o cluster e o servidor de aplicativo**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-216">**No Router Between cluster and application server**</span></span>|<span data-ttu-id="dc7a8-217">Se não existir nenhum roteador entre o cluster de failover e o servidor de aplicativos, o serviço de cluster lentamente fará o failover dos recursos relacionados à rede.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-217">If no router exists between the failover cluster and the application server, the Cluster service fails over network-related resources slowly.</span></span> <span data-ttu-id="dc7a8-218">Isso atrasa as reconexões do cliente depois que um grupo de disponibilidade faz failover.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-218">This delays client reconnections after an availability group fails over.</span></span> <span data-ttu-id="dc7a8-219">Na ausência de um roteador, será recomendável rever os cenários específicos detalhados no seguinte artigo da Base de Dados de Conhecimento 2582281 e instalar o hotfix, se isso for aplicável a seu ambiente:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-219">In the absence of a router, we recommend that you review the specific scenarios detailed in Knowledge Base article 2582281 and install the hotfix, if applicable to your environment.</span></span>|<span data-ttu-id="dc7a8-220">KB 2582281:  [Operação de failover lenta se não existir nenhum roteador entre o cluster e um servidor de aplicativos](https://support.microsoft.com/kb/2582281)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-220">KB 2582281:  [Slow failover operation if no router exists between the cluster and an application server](https://support.microsoft.com/kb/2582281)</span></span>|  
  
###  <a name="recommendations-for-computers-that-host-availability-replicas-windows-system"></a><a name="ComputerRecommendations"></a> <span data-ttu-id="dc7a8-221">Recomendações para computadores que hospedam réplicas de disponibilidade (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-221">Recommendations for Computers That Host Availability Replicas (Windows System)</span></span>  
  
-   <span data-ttu-id="dc7a8-222">**Sistemas comparáveis:**  Para um grupo de disponibilidade especificado, todas as réplicas de disponibilidade devem ser executadas em sistemas comparáveis que possam manipular cargas de trabalho idênticas.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-222">**Comparable systems:**  For a given availability group, all the availability replicas should run on comparable systems that can handle identical workloads.</span></span>  
  
-   <span data-ttu-id="dc7a8-223">**Adaptadores de rede dedicados:**  Para obter um melhor desempenho, use um adaptador de rede dedicado (placa de interface de rede) para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-223">**Dedicated network adapters:**  For best performance, use a dedicated network adapter (network interface card) for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>  
  
-   <span data-ttu-id="dc7a8-224">**Espaço em disco suficiente:**  Cada computador no qual uma instância de servidor hospeda uma réplica de disponibilidade precisa ter espaço em disco suficiente para todos os bancos de dados do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-224">**Sufficient disk space:**  Every computer on which a server instance hosts an availability replica must possess sufficient disk space for all the databases in the availability group.</span></span> <span data-ttu-id="dc7a8-225">Lembre-se de que à medida que os bancos de dados primários crescem, seus bancos de dados secundários correspondentes crescem na mesma proporção.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-225">Keep in mind that as primary databases grow, their corresponding secondary databases grow the same amount.</span></span>  
  
###  <a name="permissions-windows-system"></a><a name="PermissionsWindows"></a> <span data-ttu-id="dc7a8-226">Permissões (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-226">Permissions (Windows System)</span></span>  
 <span data-ttu-id="dc7a8-227">Para administrar um cluster WSFC, o usuário deve ser um administrador do sistema em todo nó de cluster.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-227">To administer a WSFC cluster, the user must be a system administrator on every cluster node.</span></span>  
  
 <span data-ttu-id="dc7a8-228">Para obter mais informações sobre a conta usada para administrar o cluster, confira [Apêndice A: Requisitos do cluster de failover](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-228">For more information about the account for administering the cluster, see [Appendix A: Failover Cluster Requirements](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx).</span></span>  
  
###  <a name="related-tasks-windows-system"></a><a name="RelatedTasksWindows"></a> <span data-ttu-id="dc7a8-229">Tarefas relacionadas (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-229">Related Tasks (Windows System)</span></span>  
  
|<span data-ttu-id="dc7a8-230">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-230">Task</span></span>|<span data-ttu-id="dc7a8-231">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-231">Link</span></span>|  
|----------|----------|  
|<span data-ttu-id="dc7a8-232">Defina o valor de HostRecordTTL.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-232">Set the HostRecordTTL value.</span></span>|[<span data-ttu-id="dc7a8-233">Alterar o HostRecordTTL (usando o Windows PowerShell)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-233">Change the HostRecordTTL (Using Windows PowerShell)</span></span>](#ChangeHostRecordTTLps)|  
  
####  <a name="change-the-hostrecordttl-using-windows-powershell"></a><a name="ChangeHostRecordTTLps"></a> <span data-ttu-id="dc7a8-234">Alterar o HostRecordTTL (usando o Windows PowerShell)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-234">Change the HostRecordTTL (Using Windows PowerShell)</span></span>  
  
1.  <span data-ttu-id="dc7a8-235">Abra a janela do PowerShell por meio da opção **Executar como Administrador**.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-235">Open PowerShell window via **Run as Administrator**.</span></span>  
  
2.  <span data-ttu-id="dc7a8-236">Importe o módulo FailoverClusters.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-236">Import the FailoverClusters module.</span></span>  
  
3.  <span data-ttu-id="dc7a8-237">Use o cmdlet `Get-ClusterResource` para localizar o recurso Nome da Rede e use o cmdlet `Set-ClusterParameter` para definir o valor de `HostRecordTTL`, como segue:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-237">Use the `Get-ClusterResource` cmdlet to find the Network Name resource, then use `Set-ClusterParameter` cmdlet to set the `HostRecordTTL` value, as follows:</span></span>  
  
     <span data-ttu-id="dc7a8-238">Get-ClusterResource " *\<NetworkResourceName>* " | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span><span class="sxs-lookup"><span data-stu-id="dc7a8-238">Get-ClusterResource "*\<NetworkResourceName>*" | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span></span>  
  
     <span data-ttu-id="dc7a8-239">O exemplo do PowerShell a seguir define o HostRecordTTL como 300 segundos para um recurso Nome da Rede nomeado “`SQL Network Name (SQL35)`”.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-239">The following PowerShell example sets the HostRecordTTL to 300 seconds for a Network Name resource named "`SQL Network Name (SQL35)`".</span></span>  
  
    ```powershell
    Import-Module FailoverClusters  
  
    $nameResource = "SQL Network Name (SQL35)"  
    Get-ClusterResource $nameResource | Set-ClusterParameter ClusterParameter HostRecordTTL 300  
    ```  
  
    > [!TIP]  
    >  <span data-ttu-id="dc7a8-240">Sempre que você abrir uma nova janela do PowerShell, deverá importar o módulo `FailoverClusters`.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-240">Every time you open a new PowerShell window, you need to import the `FailoverClusters` module.</span></span>  
  
##### <a name="related-content-powershell"></a><span data-ttu-id="dc7a8-241">Conteúdo relacionado (PowerShell)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-241">Related Content (PowerShell)</span></span>  
  
-   <span data-ttu-id="dc7a8-242">[Clustering e alta disponibilidade](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (Blog da equipe de Clustering de Failover e Balanceamento de Carga de Rede)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-242">[Clustering and High-Availability](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (Failover Clustering and Network Load Balancing Team Blog)</span></span>  
  
-   <span data-ttu-id="dc7a8-243">[Guia de Introdução ao Windows PowerShell em um cluster de failover](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-243">[Getting Started with Windows PowerShell on a Failover Cluster](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="dc7a8-244">Comandos de recursos de cluster e cmdlets equivalentes no Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="dc7a8-244">Cluster resource commands and equivalent Windows PowerShell cmdlets</span></span>](https://msdn.microsoft.com/library/ee619744.aspx#BKMK_resource)  
  
###  <a name="related-content-windows-system"></a><a name="RelatedContentWS"></a> <span data-ttu-id="dc7a8-245">Conteúdo relacionado (Windows System)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-245">Related Content (Windows System)</span></span>  
  
-   <span data-ttu-id="dc7a8-246">[Definir configurações DNS em um cluster de failover multissite](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-246">[Configure DNS settings in a Multi-Site Failover Cluster](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="dc7a8-247">Registro de DNS com recurso de nome de rede</span><span class="sxs-lookup"><span data-stu-id="dc7a8-247">DNS Registration with Network Name Resource</span></span>](https://techcommunity.microsoft.com/t5/failover-clustering/dns-registration-with-the-network-name-resource/ba-p/371482)  
  
-   [<span data-ttu-id="dc7a8-248">Clustering de failover de vários locais do Windows 2008 R2</span><span class="sxs-lookup"><span data-stu-id="dc7a8-248">Windows 2008 R2 Failover Multi-Site Clustering</span></span>](https://kiruba4u.blogspot.com/2012/03/failover-clustering-in-windows-server.html)  
  
##  <a name="sql-server-instance-prerequisites-and-restrictions"></a><a name="ServerInstance"></a> <span data-ttu-id="dc7a8-249">Pré-requisitos e restrições da instância de SQL Server</span><span class="sxs-lookup"><span data-stu-id="dc7a8-249">SQL Server Instance Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="dc7a8-250">Cada grupo de disponibilidade requer um conjunto de parceiros de failover, conhecidos como *réplicas de disponibilidade*, que são hospedados por instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-250">Each availability group requires a set of failover partners, known as *availability replicas*, which are hosted by instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="dc7a8-251">Uma instância específica pode ser uma *instância autônomo* ou uma FCI (*instância de cluster de failover*) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-251">A given server instance can be a *stand-alone instance* or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]*failover cluster instance* (FCI).</span></span>  
  
 
  
###  <a name="checklist-prerequisites-server-instance"></a><a name="PrerequisitesSI"></a> <span data-ttu-id="dc7a8-252">Lista de verificação: pré-requisitos (instância de servidor)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-252">Checklist: Prerequisites (Server Instance)</span></span>  
  
||<span data-ttu-id="dc7a8-253">Pré-requisito</span><span class="sxs-lookup"><span data-stu-id="dc7a8-253">Prerequisite</span></span>|<span data-ttu-id="dc7a8-254">Links</span><span class="sxs-lookup"><span data-stu-id="dc7a8-254">Links</span></span>|  
|-|------------------|-----------|  
|<span data-ttu-id="dc7a8-255">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-255">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-256">O computador host deve ser um nó WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-256">The host computer must be a Windows Server Failover Clustering (WSFC) node.</span></span> <span data-ttu-id="dc7a8-257">As instâncias do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que hospedam as réplicas de disponibilidade para um determinado grupo de disponibilidade residem em nós separados de um único cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-257">The instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that host availability replicas for a given availability group must reside on separate nodes of a single WSFC cluster.</span></span> <span data-ttu-id="dc7a8-258">A única exceção é que, embora tenha sido migrado para outro cluster WSFC, um grupo de disponibilidade pode temporariamente abranger dois clusters.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-258">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>|[<span data-ttu-id="dc7a8-259">WSFC &#40;Windows Server Failover Clustering&#41; com o SQL Server</span><span class="sxs-lookup"><span data-stu-id="dc7a8-259">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)<br /><br /> [<span data-ttu-id="dc7a8-260">Clustering de failover e Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-260">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)|  
|<span data-ttu-id="dc7a8-261">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-261">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-262">Se você desejar um grupo de disponibilidade para funcionar com o Kerberos:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-262">If you want an availability group to work with Kerberos:</span></span><br /><br /> <span data-ttu-id="dc7a8-263">Todas as instâncias de servidor que hospedam uma réplica de disponibilidade para o grupo de disponibilidade deve usar a mesma conta de serviço do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-263">All server instances that host an availability replica for the availability group must use the same SQL Server service account.</span></span><br /><br /> <span data-ttu-id="dc7a8-264">O administrador de domínio precisa registrar um Nome de entidade de serviço (SPN) manualmente com Active Directory na conta de serviço do SQL Server para o nome de rede virtual (VNN) do ouvinte de grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-264">The domain administrator needs to manually register a Service Principal Name (SPN) with Active Directory on the SQL Server service account for the virtual network name (VNN) of the availability group listener.</span></span> <span data-ttu-id="dc7a8-265">Se o SPN for registrado em uma conta diferente da conta de serviço do SQL Server, a autenticação falhará.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-265">If the SPN is registered on an account other than the SQL Server service account, authentication will fail.</span></span><br /><br /> <span data-ttu-id="dc7a8-266">**\*\* Importante \*\*** Se você alterar a conta de serviço do SQL Server, o administrador de domínio precisará registrar de novo o SPN manualmente.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-266">**\*\* Important \*\*** If you change the SQL Server service account, the domain administrator will need to manually re-register the SPN.</span></span>|[<span data-ttu-id="dc7a8-267">Registrar um nome de entidade de serviço para conexões de Kerberos</span><span class="sxs-lookup"><span data-stu-id="dc7a8-267">Register a Service Principal Name for Kerberos Connections</span></span>](../../configure-windows/register-a-service-principal-name-for-kerberos-connections.md)<br /><br /> <span data-ttu-id="dc7a8-268">**Breve explicação:**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-268">**Brief explanation:**</span></span><br /><br /> <span data-ttu-id="dc7a8-269">O Kerberos e os SPNs impõem a autenticação mútua.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-269">Kerberos and SPNs enforce mutual authentication.</span></span> <span data-ttu-id="dc7a8-270">O SPN é mapeado para a conta do Windows que inicia os serviços do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-270">The SPN maps to the Windows account that starts the SQL Server services.</span></span> <span data-ttu-id="dc7a8-271">Se o SPN não estiver registrado corretamente ou se ele falhar, a camada de segurança do Windows não poderá determinar a conta associada ao SPN e a autenticação Kerberos não será utilizada.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-271">If the SPN is not registered correctly or if it fails, the Windows security layer cannot determine the account associated with the SPN, and Kerberos authentication cannot be used.</span></span><br /><br /> <span data-ttu-id="dc7a8-272">Observação: O NTLM não tem este requisito.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-272">Note: NTLM does not have this requirement.</span></span>|  
|<span data-ttu-id="dc7a8-273">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-273">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-274">Se você pretende usar uma instância de cluster de failover (FCI) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para hospedar uma réplica de disponibilidade, verifique se compreende as restrições de FCI e se os requisitos de FCI são atendidos.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-274">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="dc7a8-275">[Pré-requisitos e requisitos para usar uma FCI (Instância de Cluster de Failover) do SQL Server para hospedar uma réplica de disponibilidade](#FciArLimitations) (mais adiante neste tópico)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-275">[Prerequisites and Requirements on Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (later in this topic)</span></span>|  
|<span data-ttu-id="dc7a8-276">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-276">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-277">Cada instância de servidor deve estar executando a Enterprise Edition do [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-277">Each server instance must be running the Enterprise Edition of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>|[<span data-ttu-id="dc7a8-278">Recursos com suporte nas edições do SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="dc7a8-278">Features Supported by the Editions of SQL Server 2014</span></span>](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)|  
|<span data-ttu-id="dc7a8-279">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-279">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-280">Todas as instâncias de servidor que hospedam réplicas de disponibilidade para um grupo de disponibilidade devem usar a mesma ordenação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-280">All the server instances that host availability replicas for an availability group must use the same [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] collation.</span></span>|[<span data-ttu-id="dc7a8-281">Definir ou alterar a ordenação do servidor</span><span class="sxs-lookup"><span data-stu-id="dc7a8-281">Set or Change the Server Collation</span></span>](../../../relational-databases/collations/set-or-change-the-server-collation.md)|  
|<span data-ttu-id="dc7a8-282">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-282">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-283">Habilite o recurso [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] em cada instância de servidor que hospedará uma réplica de disponibilidade para qualquer grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-283">Enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that will host an availability replica for any availability group.</span></span> <span data-ttu-id="dc7a8-284">Em determinado computador, você pode habilitar quantas instâncias de servidor desejar para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , desde que tenham suporte da instalação do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-284">On a given computer, you can enable as many server instances for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] as your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation supports.</span></span>|[<span data-ttu-id="dc7a8-285">Habilitar e desabilitar grupos de disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-285">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)<br /><br /> <span data-ttu-id="dc7a8-286">Importante se você excluir e recriar um Cluster WSFC, deverá desabilitar e reabilitar o recurso em cada instância de servidor habilitada para o \*\* \* no Cluster WSFC original \* . \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="dc7a8-286">**\*\* Important \*\*** If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that was enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on the original WSFC cluster.</span></span>|  
|<span data-ttu-id="dc7a8-287">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-287">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-288">Cada instância de servidor exige um ponto de extremidade de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-288">Each server instance requires a database mirroring endpoint.</span></span> <span data-ttu-id="dc7a8-289">Note que esse ponto de extremidade é compartilhado por todas as réplicas de disponibilidade e parceiros de espelhamento de banco de dados e testemunhas na instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-289">Note that this endpoint is shared by all the availability replicas and database mirroring partners and witnesses on the server instance.</span></span><br /><br /> <span data-ttu-id="dc7a8-290">Se uma instância de servidor selecionada para hospedar uma réplica de disponibilidade estiver sendo executada em uma conta de usuário de domínio e ainda não tiver um ponto de extremidade de espelhamento de banco de dados, o [Assistente de Novo Grupo de Disponibilidade](use-the-availability-group-wizard-sql-server-management-studio.md) (ou o [Assistente para Adicionar Réplica ao Grupo de Disponibilidade](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) poderá criar o ponto de extremidade e conceder a permissão CONNECT à conta de serviço da instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-290">If a server instance that you select to host an availability replica is running under a domain user account and does not yet have a database mirroring endpoint, the [New Availability Group Wizard](use-the-availability-group-wizard-sql-server-management-studio.md) (or [Add Replica to Availability Group Wizard](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) can create the endpoint and grant CONNECT permission to the server instance service account.</span></span> <span data-ttu-id="dc7a8-291">No entanto, se o serviço [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] estiver sendo executado como uma conta interna, como Sistema Local, Serviço Local ou Serviço de Rede, ou como uma conta que não pertença a um domínio, você deverá usar certificados para autenticação de ponto de extremidade, e o assistente não poderá criar um ponto de extremidade de espelhamento de banco de dados na instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-291">However, if the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running as a built-in account, such as Local System, Local Service, or Network Service, or a nondomain account, you must use certificates for endpoint authentication, and the wizard will be unable to create a database mirroring endpoint on the server instance.</span></span> <span data-ttu-id="dc7a8-292">Nesse caso, é recomendável criar manualmente os pontos de extremidade de espelhamento de banco de dados antes de iniciar o assistente.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-292">In this case, we recommend that you create the database mirroring endpoints manually before you launch the wizard.</span></span><br /><br /> <span data-ttu-id="dc7a8-293">**\*\* Observação de Segurança \*\*** A segurança de transporte para o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] é a mesma do espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-293">**\*\* Security Note \*\*** Transport security for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is the same as for database mirroring.</span></span>|[<span data-ttu-id="dc7a8-294">O ponto de extremidade de espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-294">The Database Mirroring Endpoint &#40;SQL Server&#41;</span></span>](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md)<br /><br /> [<span data-ttu-id="dc7a8-295">Segurança de transporte para espelhamento de banco de dados e Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-295">Transport Security for Database Mirroring and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md)|  
|<span data-ttu-id="dc7a8-296">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-296">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-297">Se algum banco de dados que utilize o FILESTREAM for adicionado a um grupo de disponibilidade, verifique se o FILESTREAM está habilitado em cada instância de servidor que hospedará uma réplica de disponibilidade do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-297">If any databases that use FILESTREAM will be added to an availability group, ensure that FILESTREAM is enabled on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="dc7a8-298">Habilitar e configurar o FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="dc7a8-298">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="dc7a8-299">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-299">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-300">Se algum banco de dados independente for adicionado a um grupo de disponibilidade, verifique se a opção de servidor `contained database authentication` está definida como `1` em cada instância de servidor que hospedará uma réplica de disponibilidade do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-300">If any contained databases will be added to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="dc7a8-301">Opção de configuração do servidor contained database authentication</span><span class="sxs-lookup"><span data-stu-id="dc7a8-301">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="dc7a8-302">Opções de configuração do servidor &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-302">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
###  <a name="thread-usage-by-availability-groups"></a><a name="ThreadUsage"></a> <span data-ttu-id="dc7a8-303">Uso de thread por grupos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-303">Thread Usage by Availability Groups</span></span>  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="dc7a8-304">tem os seguintes requisitos para threads de trabalho:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-304">has the following requirements for worker threads:</span></span>  
  
-   <span data-ttu-id="dc7a8-305">Em uma instância ociosa do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] não usa nenhum thread.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-305">On an idle instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] uses 0 threads.</span></span>  
  
-   <span data-ttu-id="dc7a8-306">O número máximo de threads usados por grupos de disponibilidade é a configuração definida para o número máximo de threads de servidor ('`max worker threads`') menos 40.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-306">The maximum number of threads used by availability groups is the configured setting for the maximum number of server threads ('`max worker threads`') minus 40.</span></span>  
  
-   <span data-ttu-id="dc7a8-307">As réplicas de disponibilidade hospedadas em uma instância de servidor específica compartilham um único pool de threads.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-307">The availability replicas hosted on a given server instance share a single thread pool.</span></span>  
  
     <span data-ttu-id="dc7a8-308">Os threads são compartilhados sob demanda, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-308">Threads are shared on an on-demand basis, as follows:</span></span>  
  
    -   <span data-ttu-id="dc7a8-309">Normalmente, há 3 a 10 threads compartilhados, mas esse número pode aumentar dependendo da carga de trabalho da réplica primária.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-309">Typically, there are 3-10 shared threads, but this number can increase depending on the primary replica workload.</span></span>  
  
    -   <span data-ttu-id="dc7a8-310">Se um determinado thread ficar ocioso por um tempo, ele será liberado novamente no pool de threads geral do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-310">If a given thread is idle for a while, it is released back into the general [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] thread pool.</span></span> <span data-ttu-id="dc7a8-311">Normalmente, um thread inativa é liberado após ~15 segundos de inatividade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-311">Normally, an inactive thread is released after ~15 seconds of inactivity.</span></span> <span data-ttu-id="dc7a8-312">No entanto, dependendo da última atividade, um thread ocioso pode ser retido por mais tempo.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-312">However, depending on the last activity, an idle thread might be retained longer.</span></span>  
  
-   <span data-ttu-id="dc7a8-313">Além disso, os grupos de disponibilidade usam threads não compartilhados, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-313">In addition, availability groups use unshared threads, as follows:</span></span>  
  
    -   <span data-ttu-id="dc7a8-314">Cada réplica primária usa 1 thread de captura de log para cada banco de dados primário.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-314">Each primary replica uses 1 Log Capture thread for each primary database.</span></span> <span data-ttu-id="dc7a8-315">Além de isso, ela usa 1 thread de envio de log para cada banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-315">In addition, it uses 1 Log Send thread for each secondary database.</span></span> <span data-ttu-id="dc7a8-316">Os threads de envio de log são liberados após ~15 segundos de inatividade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-316">Log send threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="dc7a8-317">Cada réplica secundária usa 1 thread de restauração para cada banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-317">Each secondary replica uses 1 redo thread for each secondary database.</span></span> <span data-ttu-id="dc7a8-318">Os threads de restauração são liberados após ~15 segundos de inatividade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-318">Redo threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="dc7a8-319">Um backup em uma réplica secundária mantém um thread na réplica primária durante a operação de backup.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-319">A backup on a secondary replica holds a thread on the primary replica for the duration of the backup operation.</span></span>  
  
 <span data-ttu-id="dc7a8-320">Para obter mais informações, consulte [AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx) (Série de aprendizado do AlwaysON – HADRON: uso do pool de trabalho para bancos de dados habilitados para HADRON) (um blog dos engenheiros do CSS [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-320">For more information, see [AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx) (a CSS [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Engineers Blog).</span></span>  
  
###  <a name="permissions-server-instance"></a><a name="PermissionsSI"></a> <span data-ttu-id="dc7a8-321">Permissões (instância de servidor)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-321">Permissions (Server Instance)</span></span>  
  
|<span data-ttu-id="dc7a8-322">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-322">Task</span></span>|<span data-ttu-id="dc7a8-323">Permissões necessárias</span><span class="sxs-lookup"><span data-stu-id="dc7a8-323">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="dc7a8-324">Criando o ponto de extremidade de espelhamento de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dc7a8-324">Creating the database mirroring endpoint</span></span>|<span data-ttu-id="dc7a8-325">Requer permissão CREATE ENDPOINT ou associação na função de servidor fixa **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-325">Requires CREATE ENDPOINT permission, or membership in the **sysadmin** fixed server role.</span></span>  <span data-ttu-id="dc7a8-326">Também requer a permissão CONTROL ON ENDPOINT.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-326">Also requires CONTROL ON ENDPOINT permission.</span></span> <span data-ttu-id="dc7a8-327">Para obter mais informações, consulte [Permissões GRANT do ponto de extremidade &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-327">For more information, see [GRANT Endpoint Permissions &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql).</span></span>|  
|<span data-ttu-id="dc7a8-328">Habilitando o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="dc7a8-328">Enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span></span>|<span data-ttu-id="dc7a8-329">Requer a associação ao grupo **Administrador** no computador local e o controle total no cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-329">Requires membership in the **Administrator** group on the local computer and full control on the WSFC cluster.</span></span>|  
  
###  <a name="related-tasks-server-instance"></a><a name="RelatedTasksSI"></a> <span data-ttu-id="dc7a8-330">Tarefas relacionadas (instância de servidor)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-330">Related Tasks (Server Instance)</span></span>  
  
|<span data-ttu-id="dc7a8-331">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-331">Task</span></span>|<span data-ttu-id="dc7a8-332">Tópico</span><span class="sxs-lookup"><span data-stu-id="dc7a8-332">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="dc7a8-333">Determinando se existe um ponto de extremidade de espelhamento de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dc7a8-333">Determining whether database mirroring endpoint exists</span></span>|[<span data-ttu-id="dc7a8-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql)|  
|<span data-ttu-id="dc7a8-335">Criando o ponto de extremidade de espelhamento de banco de dados (caso ainda não exista)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-335">Creating the database mirroring endpoint (if it does not yet exist)</span></span>|[<span data-ttu-id="dc7a8-336">Criar um ponto de extremidade de espelhamento de banco de dados para a Autenticação do Windows &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-336">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)<br /><br /> [<span data-ttu-id="dc7a8-337">Usar certificados para um ponto de extremidade de espelhamento de banco de dados &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-337">Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)<br /><br /> [<span data-ttu-id="dc7a8-338">Criar um ponto de extremidade de espelhamento de banco de dados para Grupos de Disponibilidade AlwaysOn &#40;SQL Server PowerShell&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-338">Create a Database Mirroring Endpoint for AlwaysOn Availability Groups &#40;SQL Server PowerShell&#41;</span></span>](database-mirroring-always-on-availability-groups-powershell.md)|  
|<span data-ttu-id="dc7a8-339">Habilitando grupos de disponibilidade AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="dc7a8-339">Enabling AlwaysOn Availability Groups</span></span>|[<span data-ttu-id="dc7a8-340">Habilitar e desabilitar grupos de disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-340">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)|  
  
###  <a name="related-content-server-instance"></a><a name="RelatedContentSI"></a> <span data-ttu-id="dc7a8-341">Conteúdo relacionado (instância de servidor)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-341">Related Content (Server Instance)</span></span>  
  
-   [<span data-ttu-id="dc7a8-342">Série de aprendizado do AlwaysON - HADRON: uso de trabalho do pool para bancos de dados habilitados do HADRON</span><span class="sxs-lookup"><span data-stu-id="dc7a8-342">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
##  <a name="network-connectivity-recommendations"></a><a name="NetworkConnect"></a> <span data-ttu-id="dc7a8-343">Recomendações de conectividade de rede</span><span class="sxs-lookup"><span data-stu-id="dc7a8-343">Network Connectivity Recommendations</span></span>  
 <span data-ttu-id="dc7a8-344">Nós recomendamos fortemente que você use os mesmos links de rede para comunicações entre os membros de cluster do WSFC e as comunicações entre réplicas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-344">We strongly recommend that you use the same network links for communications between WSFC cluster members and communications between availability replicas.</span></span>  <span data-ttu-id="dc7a8-345">Usar links de rede separados pode causar comportamentos inesperados se algum dos links falhar (até mesmo com intermitência).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-345">Using separate network links can cause unexpected behaviors if some of links fail (even intermittently).</span></span>  
  
 <span data-ttu-id="dc7a8-346">Por exemplo, para que um grupo de disponibilidade dê suporte a failover automático, a réplica secundária que é o parceiro de failover automático deverá estar no estado SYNCHRONIZED.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-346">For example, for an availability group to support automatic failover, the secondary replica that is the automatic-failover partner must be in the SYNCHRONIZED state.</span></span> <span data-ttu-id="dc7a8-347">Se o link de rede para esta réplica secundária falhar (até mesmo com intermitência), a réplica entrará no estado UNSYNCHRONIZED e não poderá começar a ressincronizar até que o link seja restaurado.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-347">If the network link to this secondary replica fails (even intermittently), the replica enters the UNSYNCHRONIZED state and cannot begin to resynchronize until the link is restored.</span></span> <span data-ttu-id="dc7a8-348">Se o cluster do WSFC solicitar um failover automático enquanto a réplica secundária estiver não sincronizada, o failover automático não ocorrerá.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-348">If the WSFC cluster requests an automatic failover while the secondary replica is unsynchronized, automatic failover will not occur.</span></span>  
  
##  <a name="client-connectivity-support"></a><a name="ClientConnSupport"></a> <span data-ttu-id="dc7a8-349">Suporte à conectividade de cliente</span><span class="sxs-lookup"><span data-stu-id="dc7a8-349">Client Connectivity Support</span></span>  
 <span data-ttu-id="dc7a8-350">Para obter informações sobre o [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] suporte para conectividade de cliente, consulte [conectividade de cliente AlwaysOn (SQL Server)](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-350">For information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] support for client connectivity, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
##  <a name="prerequisites-and-restrictions-for-using-a-sql-server-failover-cluster-instance-fci-to-host-an-availability-replica"></a><a name="FciArLimitations"></a> <span data-ttu-id="dc7a8-351">Pré-requisitos e restrições para usar uma FCI (instância de cluster de failover) do SQL Server para hospedar uma réplica de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-351">Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica</span></span>  
 
  
###  <a name="restrictions-fcis"></a><a name="RestrictionsFCI"></a> <span data-ttu-id="dc7a8-352">Restrições (FCIs)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-352">Restrictions (FCIs)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dc7a8-353">No [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], as instâncias de cluster de failover do AlwaysOn dão suporte a CSV (volumes compartilhados clusterizados) no [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] e no [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-353">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], AlwaysOn Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="dc7a8-354">Para obter mais informações sobre CSV, consulte [Noções básicas sobre volumes compartilhados clusterizados em um cluster de failover](https://technet.microsoft.com/library/dd759255.aspx).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-354">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
-   <span data-ttu-id="dc7a8-355">**Os nós de cluster de uma FCI podem hospedar somente uma réplica para um determinado grupo de disponibilidade:**  se você adicionar uma réplica de disponibilidade a uma FCI, os nós de cluster do WSFC que são possíveis proprietários da FCI não poderão hospedar outra réplica para o mesmo grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-355">**The cluster nodes of an FCI can host only one replica for a given availability group:**  If you add an availability replica on an FCI, the WSFC cluster nodes that are possible FCI owners cannot host another replica for the same availability group.</span></span>  
  
     <span data-ttu-id="dc7a8-356">Além disso, cada uma das outras réplicas deve ser hospedada por uma instância do SQL Server 2012 que reside em um nó diferente do WSFC no mesmo cluster do WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-356">Furthermore, every other replica must be hosted by an instance of SQL Server 2012 that resides on a different WSFC node in the same WSFC cluster.</span></span> <span data-ttu-id="dc7a8-357">A única exceção é que, embora tenha sido migrado para outro cluster WSFC, um grupo de disponibilidade pode temporariamente abranger dois clusters.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-357">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
-   <span data-ttu-id="dc7a8-358">**As FCIs não dão suporte ao failover automático por grupos de disponibilidade:**  As FCIs não dão suporte ao failover automático por grupos de disponibilidade e, portanto, qualquer réplica de disponibilidade hospedada por uma FCI pode ser configurada somente para failover manual.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-358">**FCIs do not support automatic failover by availability groups:**  FCIs do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can be configured for manual failover only.</span></span>  
  
-   <span data-ttu-id="dc7a8-359">**Alterando o nome da rede da FCI:**  Caso você precise alterar o nome da rede de uma FCI que hospeda uma réplica de disponibilidade, precisará remover a réplica do grupo de disponibilidade e, em seguida, adicionar a réplica novamente ao grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-359">**Changing FCI network name:**  If you need to change the network name of an FCI that hosts an availability replica, you will need to remove the replica from its availability group and then add the replica back into the availability group.</span></span> <span data-ttu-id="dc7a8-360">Você não pode remover a réplica primária; então, se você estiver renomeando um FCI que está hospedando a réplica primária, realize failover em uma réplica secundária e, depois, remova a réplica primária anterior e adicione-a novamente.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-360">You cannot remove the primary replica, so if you are renaming an FCI that is hosting the primary replica, you should fail over to a secondary replica and then remove the former primary replica and add it back.</span></span> <span data-ttu-id="dc7a8-361">Note que a renomeação de um FCI pode alterar a URL de seu ponto de extremidade de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-361">Note that renaming an FCI might alter the URL of its database mirroring endpoint.</span></span> <span data-ttu-id="dc7a8-362">Ao adicionar a réplica, especifique a URL do ponto de extremidade atual.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-362">When you add the replica ensure that you specify the current endpoint URL.</span></span>  
  
###  <a name="checklist-prerequisites-fcis"></a><a name="PrerequisitesFCI"></a> <span data-ttu-id="dc7a8-363">Lista de verificação: pré-requisitos (FCIs)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-363">Checklist: Prerequisites (FCIs)</span></span>  
  
||<span data-ttu-id="dc7a8-364">Pré-requisito</span><span class="sxs-lookup"><span data-stu-id="dc7a8-364">Prerequisite</span></span>|<span data-ttu-id="dc7a8-365">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-365">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="dc7a8-366">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-366">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-367">Antes de usar um FCI para hospedar uma réplica de disponibilidade, verifique se o administrador do sistema instalou o hotfix do Windows Server 2008 descrito no artigo KB 976097 da Base de Dados de Conhecimento.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-367">Before you use an FCI to host an availability replica, ensure that your system administrator has installed the Windows Server 2008 hotfix described in Knowledge Base article KB 976097.</span></span> <span data-ttu-id="dc7a8-368">Esse hotfix habilita o snap-in MMC (console de gerenciamento Microsoft) de gerenciamento de cluster de failover para dar suporte a discos compartilhados de armazenamento assimétrico que estão disponíveis somente em alguns dos nós WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-368">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="dc7a8-369">KB 976097: [hotfix para adicionar suporte para armazenamentos assimétricos no snap-in MMC de Gerenciamento de Cluster de Failover para um cluster de failover que está executando o Windows Server 2008 ou o Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-369">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span>|  
|<span data-ttu-id="dc7a8-370">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-370">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-371">Verifique se cada instância de cluster de failover do SQL Server (FCI) possui o armazenamento compartilhado exigido pela instalação de instância de cluster de failover do SQL Server padrão.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-371">Ensure that each SQL Server failover cluster instance (FCI) possesses the required shared storage as per standard SQL Server failover cluster instance installation.</span></span>||  
  
###  <a name="related-tasks-fcis"></a><a name="RelatedTasksFCIs"></a> <span data-ttu-id="dc7a8-372">Tarefas relacionadas (FCIs)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-372">Related Tasks (FCIs)</span></span>  
  
|<span data-ttu-id="dc7a8-373">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-373">Task</span></span>|<span data-ttu-id="dc7a8-374">Tópico</span><span class="sxs-lookup"><span data-stu-id="dc7a8-374">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="dc7a8-375">Instalando um cluster de failover do SQL Server</span><span class="sxs-lookup"><span data-stu-id="dc7a8-375">Installing a SQL Server Failover Cluster</span></span>|[<span data-ttu-id="dc7a8-376">Criar um novo cluster de failover do SQL Server &#40;Instalação&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-376">Create a New SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="dc7a8-377">Atualização in-loco de seu cluster de failover do SQL Server existente</span><span class="sxs-lookup"><span data-stu-id="dc7a8-377">In-place upgrade of your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="dc7a8-378">Atualizar uma instância de cluster de failover do SQL Server &#40;instalação&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-378">Upgrade a SQL Server Failover Cluster Instance &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/windows/upgrade-a-sql-server-failover-cluster-instance-setup.md)|  
|<span data-ttu-id="dc7a8-379">Manutenção do seu cluster de failover existente do SQL Server</span><span class="sxs-lookup"><span data-stu-id="dc7a8-379">Maintaining your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="dc7a8-380">Adicionar ou remover nós em um cluster de failover do SQL Server &#40;Instalação&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-380">Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)|  
  
###  <a name="related-content-fcis"></a><a name="RelatedContentFCIs"></a> <span data-ttu-id="dc7a8-381">Conteúdo relacionado (FCIs)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-381">Related Content (FCIs)</span></span>  
  
-   [<span data-ttu-id="dc7a8-382">Clustering de failover e Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-382">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)  
  
-   [<span data-ttu-id="dc7a8-383">Guia da arquitetura do AlwaysOn: Criando uma solução de alta disponibilidade e recuperação de desastres usando instâncias de cluster de failover e grupos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-383">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)  
  
##  <a name="availability-group-prerequisites-and-restrictions"></a><a name="PrerequisitesForAGs"></a> <span data-ttu-id="dc7a8-384">Pré-requisitos e restrições do grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-384">Availability Group Prerequisites and Restrictions</span></span>  

  
###  <a name="restrictions-availability-groups"></a><a name="RestrictionsAG"></a> <span data-ttu-id="dc7a8-385">Restrições (grupos de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-385">Restrictions (Availability Groups)</span></span>  
  
-   <span data-ttu-id="dc7a8-386">**As réplicas de disponibilidade devem ser hospedadas por nós diferentes de um cluster WSFC:**  para um grupo de disponibilidade específico, as réplicas de disponibilidade devem ser hospedadas por instâncias de servidor executadas em diferentes nós do mesmo cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-386">**Availability replicas must be hosted by different nodes of one WSFC cluster:**  For a given availability group, availability replicas must be hosted by server instances running on different nodes of the same WSFC cluster.</span></span> <span data-ttu-id="dc7a8-387">A única exceção é que, embora tenha sido migrado para outro cluster WSFC, um grupo de disponibilidade pode temporariamente abranger dois clusters.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-387">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="dc7a8-388">Cada uma das máquinas virtuais no mesmo computador físico pode hospedar uma réplica de disponibilidade para o mesmo grupo de disponibilidade, pois cada uma delas funciona como um computador separado.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-388">Virtual machines on the same physical computer can each host an availability replica for the same availability group because each virtual machine acts as a separate computer.</span></span>  
  
-   <span data-ttu-id="dc7a8-389">**Nome do grupo de disponibilidade exclusivo:**  cada nome de grupo de disponibilidade deve ser exclusivo no cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-389">**Unique availability group name:**  Each availability group name must be unique on the WSFC cluster.</span></span> <span data-ttu-id="dc7a8-390">O tamanho máximo de um nome de grupo de disponibilidade é 128 caracteres.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-390">The maximum length for an availability group name is 128 characters.</span></span>  
  
-   <span data-ttu-id="dc7a8-391">**Réplicas de disponibilidade:**  Cada grupo de disponibilidade suporta uma réplica primária e até oito réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-391">**Availability replicas:**  Each availability group supports one primary replica and up to eight secondary replicas.</span></span> <span data-ttu-id="dc7a8-392">Todas as réplicas podem ser executadas no modo de confirmação assíncrona ou até três delas podem ser executadas no modo de confirmação síncrona (uma réplica primária com duas réplicas secundárias síncronas).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-392">All of the replicas can run under asynchronous-commit mode, or up to three of them can run under synchronous-commit mode (one primary replica with two synchronous secondary replicas).</span></span>  
  
-   <span data-ttu-id="dc7a8-393">**Número máximo de grupos de disponibilidade e bancos de dados de disponibilidade por computador:** o número real de bancos de dados e grupos de disponibilidade que você pode colocar em um computador (VM ou físico) depende do hardware e da carga de trabalho, mas nenhum limite é imposto.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-393">**Maximum number of availability groups and availability databases per computer:** The actual number of databases and availability groups you can put on a computer (VM or physical) depends on the hardware and workload, but there is no enforced limit.</span></span> <span data-ttu-id="dc7a8-394">A Microsoft testou amplamente 10 grupos de disponibilidade e 100 bancos de dados por computador físico.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-394">Microsoft has extensively tested with 10 AGs and 100 DBs per physical machine.</span></span> <span data-ttu-id="dc7a8-395">Os sinais de sistemas sobrecarregados podem incluir, sem limitação, esgotamento de thread de trabalho, tempos de resposta lentos para exibições de sistema AlwaysOn e DMVs e/ou despejos de sistema do dispatcher parados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-395">Signs of overloaded systems can include, but are not limited to, worker thread exhaustion, slow response times for AlwaysOn system views and DMVs, and/or stalled dispatcher system dumps.</span></span> <span data-ttu-id="dc7a8-396">Não se esqueça de testar completamente seu ambiente com uma carga de trabalho semelhante à de produção para assegurar que ele possa manipular a capacidade da carga de trabalho de pico nos SLAs do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-396">Please make sure to thoroughly test your environment with a production-like workload to ensure it can handle peak workload capacity within your application SLAs.</span></span> <span data-ttu-id="dc7a8-397">Ao considerar SLAs, não se esqueça de considerar a carga sob condições de falha, bem como os tempos de resposta esperados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-397">When considering SLAs be sure to consider load under failure conditions as well as expected response times.</span></span>  
  
-   <span data-ttu-id="dc7a8-398">**Não use o Gerenciador de Cluster de Failover para manipular grupos de disponibilidade:**</span><span class="sxs-lookup"><span data-stu-id="dc7a8-398">**Do not use the Failover Cluster Manager to manipulate availability groups:**</span></span>  
  
     <span data-ttu-id="dc7a8-399">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-399">For example:</span></span>  
  
    -   <span data-ttu-id="dc7a8-400">Não altere nenhuma propriedade de grupo de disponibilidade, como os proprietários possíveis.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-400">Do not change any availability group properties, such as the possible owners.</span></span>  
  
    -   <span data-ttu-id="dc7a8-401">Não use o Gerenciador de Cluster de Failover para executar failover de grupos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-401">Do not use the Failover Cluster Manager to fail over availability groups.</span></span> <span data-ttu-id="dc7a8-402">Você deve usar [!INCLUDE[tsql](../../../includes/tsql-md.md)] ou [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-402">You must use [!INCLUDE[tsql](../../../includes/tsql-md.md)] or [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
  
###  <a name="prerequisites-availability-groups"></a><a name="RequirementsAG"></a> <span data-ttu-id="dc7a8-403">Pré-requisitos (grupos de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-403">Prerequisites (Availability Groups)</span></span>  
 <span data-ttu-id="dc7a8-404">Ao criar ou reconfigurar uma configuração de grupo de disponibilidade, cumpra os requisitos a seguir.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-404">When creating or reconfiguring an availability group configuration, ensure that you adhere to the following requirements.</span></span>  
  
||<span data-ttu-id="dc7a8-405">Pré-requisito</span><span class="sxs-lookup"><span data-stu-id="dc7a8-405">Prerequisite</span></span>|<span data-ttu-id="dc7a8-406">Descrição</span><span class="sxs-lookup"><span data-stu-id="dc7a8-406">Description</span></span>|  
|-|------------------|-----------------|  
|<span data-ttu-id="dc7a8-407">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-407">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-408">Se você pretende usar uma instância de cluster de failover (FCI) do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para hospedar uma réplica de disponibilidade, verifique se compreende as restrições de FCI e se os requisitos de FCI são atendidos.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-408">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="dc7a8-409">[Pré-requisitos e restrições do uso de uma FCI (instância de cluster de failover) do SQL Server para hospedar uma réplica de disponibilidade](#FciArLimitations) (anteriormente neste tópico)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-409">[Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (earlier in this topic)</span></span>|  
  
###  <a name="security-availability-groups"></a><a name="SecurityAG"></a> <span data-ttu-id="dc7a8-410">Segurança (grupos de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-410">Security (Availability Groups)</span></span>  
  
-   <span data-ttu-id="dc7a8-411">A segurança é herdada do cluster WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-411">Security is inherited from the Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="dc7a8-412">O WSFC fornece dois níveis de segurança de usuário na granularidade de APIs inteiras de cluster WSFC:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-412">WSFC provides two levels of user security at granularity of entire WSFC cluster APIs:</span></span>  
  
    -   <span data-ttu-id="dc7a8-413">Acesso somente leitura</span><span class="sxs-lookup"><span data-stu-id="dc7a8-413">Read-only access</span></span>  
  
    -   <span data-ttu-id="dc7a8-414">Controle total</span><span class="sxs-lookup"><span data-stu-id="dc7a8-414">Full control</span></span>  
  
         [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="dc7a8-415">precisa de controle total; a habilitação do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] em uma instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] concede controle total do cluster WSFC (por SID de serviço).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-415">needs full control, and enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] gives it full control of the WSFC cluster (through Service SID).</span></span>  
  
         <span data-ttu-id="dc7a8-416">Você não pode adicionar ou remover diretamente a segurança de uma instância de servidor no Gerenciador de Cluster de Failover WSFC.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-416">You cannot directly add or remove security for a server instance in the WSFC Failover Cluster Manager.</span></span> <span data-ttu-id="dc7a8-417">Para gerenciar sessões de segurança WSFC, use o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Gerenciador de Configuração ou o equivalente WMI do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc7a8-417">To manage WSFC security sessions, use the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager or the WMI equivalent from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="dc7a8-418">Cada instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] deve ter permissões para acessar o Registro, o cluster e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-418">Each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] must have permissions to access the registry, cluster, and soforth.</span></span>  
  
-   <span data-ttu-id="dc7a8-419">É recomendável que você use a criptografia para conexões entre instâncias de servidor que hospedam réplicas de disponibilidade do [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-419">We recommend that you use encryption for connections between server instances that host [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] availability replicas.</span></span>  
  
#### <a name="permissions-availability-groups"></a><span data-ttu-id="dc7a8-420">Permissões (grupos de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-420">Permissions (Availability Groups)</span></span>  
  
|<span data-ttu-id="dc7a8-421">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-421">Task</span></span>|<span data-ttu-id="dc7a8-422">Permissões necessárias</span><span class="sxs-lookup"><span data-stu-id="dc7a8-422">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="dc7a8-423">Criando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-423">Creating an availability group</span></span>|<span data-ttu-id="dc7a8-424">Requer a associação na função de servidor fixa **sysadmin** e a permissão de servidor CREATE AVAILABILITY GROUP, a permissão ALTER ANY AVAILABILITY GROUP ou a permissão CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-424">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="dc7a8-425">Alterando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-425">Altering an  availability group</span></span>|<span data-ttu-id="dc7a8-426">Requer a permissão ALTER AVAILABILITY GROUP no grupo de disponibilidade, a permissão CONTROL AVAILABILITY GROUP, a permissão ALTER ANY AVAILABILITY GROUP ou a permissão CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-426">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span><br /><br /> <span data-ttu-id="dc7a8-427">Além disso, unir um banco de dados a um grupo de disponibilidade exige a associação na função de banco de dados fixa **db_owner** .</span><span class="sxs-lookup"><span data-stu-id="dc7a8-427">In addition, joining a database to an availability group requires membership in the **db_owner** fixed database role.</span></span>|  
|<span data-ttu-id="dc7a8-428">Descartando/excluindo um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-428">Dropping/deleting an availability group</span></span>|<span data-ttu-id="dc7a8-429">Requer a permissão ALTER AVAILABILITY GROUP no grupo de disponibilidade, a permissão CONTROL AVAILABILITY GROUP, a permissão ALTER ANY AVAILABILITY GROUP ou a permissão CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-429">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span> <span data-ttu-id="dc7a8-430">Para descartar um grupo de disponibilidade não hospedado na localização de réplica local, você precisará da permissão CONTROL SERVER ou CONTROL nesse grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-430">To drop an availability group that is not hosted on the local replica location you need CONTROL SERVER permission or CONTROL permission on that Availability Group.</span></span>|  
  
###  <a name="related-tasks-availability-groups"></a><a name="RelatedTasksAGs"></a> <span data-ttu-id="dc7a8-431">Tarefas relacionadas (grupos de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-431">Related Tasks (Availability Groups)</span></span>  
  
|<span data-ttu-id="dc7a8-432">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-432">Task</span></span>|<span data-ttu-id="dc7a8-433">Tópico</span><span class="sxs-lookup"><span data-stu-id="dc7a8-433">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="dc7a8-434">Criando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-434">Creating an availability group</span></span>|[<span data-ttu-id="dc7a8-435">Usar o grupo de disponibilidade (Novo assistente de grupo de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-435">Use the Availability Group (New Availability Group Wizard)</span></span>](use-the-availability-group-wizard-sql-server-management-studio.md)<br /><br /> [<span data-ttu-id="dc7a8-436">Criar um grupo de disponibilidade (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-436">Create an Availability Group (Transact-SQL)</span></span>](create-an-availability-group-transact-sql.md)<br /><br /> [<span data-ttu-id="dc7a8-437">Criar um Grupo de disponibilidade (SQL Server PowerShell)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-437">Create an Availability Group (SQL Server PowerShell)</span></span>](../../../powershell/sql-server-powershell.md)<br /><br /> [<span data-ttu-id="dc7a8-438">Especificar a URL do ponto de extremidade ao adicionar ou modificar uma réplica de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-438">Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;</span></span>](specify-endpoint-url-adding-or-modifying-availability-replica.md)|  
|<span data-ttu-id="dc7a8-439">Modificando o número de réplicas de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-439">Modifying the number of availability replicas</span></span>|[<span data-ttu-id="dc7a8-440">Adicionar uma réplica secundária a um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-440">Add a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](add-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="dc7a8-441">Unir uma réplica secundária a um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-441">Join a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="dc7a8-442">Remover uma réplica secundária de um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-442">Remove a Secondary Replica from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-replica-from-an-availability-group-sql-server.md)|  
|<span data-ttu-id="dc7a8-443">Criando um ouvinte de grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-443">Creating an  availability group listener</span></span>|[<span data-ttu-id="dc7a8-444">Criar ou configurar um ouvinte do grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-444">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](create-or-configure-an-availability-group-listener-sql-server.md)|  
|<span data-ttu-id="dc7a8-445">Descartando um grupo de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-445">Dropping an  availability group</span></span>|[<span data-ttu-id="dc7a8-446">Remover um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-446">Remove an Availability Group &#40;SQL Server&#41;</span></span>](remove-an-availability-group-sql-server.md)|  
  
##  <a name="availability-database-prerequisites-and-restrictions"></a><a name="PrerequisitesForDbs"></a> <span data-ttu-id="dc7a8-447">Pré-requisitos e restrições do banco de dados de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-447">Availability Database Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="dc7a8-448">Para ser qualificado para ser adicionado a um grupo de disponibilidade, um banco de dados precisa atender aos pré-requisitos e restrições a seguir.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-448">To be eligible to be added to an availability group, a database must meet the following prerequisites and restrictions.</span></span>  
  
 
  
###  <a name="checklist-requirements-availability-databases"></a><a name="RequirementsDb"></a> <span data-ttu-id="dc7a8-449">Lista de verificação: requisitos (bancos de dados de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-449">Checklist: Requirements (Availability Databases)</span></span>  
 <span data-ttu-id="dc7a8-450">Para estar qualificado para ser adicionado a um grupo de disponibilidade, um banco de dados deve ter as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-450">To be eligible to be added to an availability group, a database must:</span></span>  
  
||<span data-ttu-id="dc7a8-451">Requisitos</span><span class="sxs-lookup"><span data-stu-id="dc7a8-451">Requirements</span></span>|<span data-ttu-id="dc7a8-452">Link</span><span class="sxs-lookup"><span data-stu-id="dc7a8-452">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="dc7a8-453">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-453">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-454">Ser um banco de dados de usuário.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-454">Be a user database.</span></span> <span data-ttu-id="dc7a8-455">Os bancos de dados do sistema não podem pertencer a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-455">System databases cannot belong to an availability group.</span></span>||  
|<span data-ttu-id="dc7a8-456">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-456">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-457">Residir na instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] em que você cria o grupo de disponibilidade e ser acessível à instância de servidor.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-457">Reside on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where you create the availability group and be accessible to the server instance.</span></span>||  
|<span data-ttu-id="dc7a8-458">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-458">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-459">Ser um banco de dados de leitura/gravação.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-459">Be a read-write database.</span></span> <span data-ttu-id="dc7a8-460">Os bancos de dados somente leitura não podem ser adicionados a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-460">Read-only databases cannot be added to an availability group.</span></span>|<span data-ttu-id="dc7a8-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span></span>|  
|<span data-ttu-id="dc7a8-462">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-462">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-463">Ser um banco de dados de vários usuários.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-463">Be a multi-user database.</span></span>|<span data-ttu-id="dc7a8-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span></span>|  
|<span data-ttu-id="dc7a8-465">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-465">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-466">Não usar AUTO_CLOSE.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-466">Not use AUTO_CLOSE.</span></span>|<span data-ttu-id="dc7a8-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span></span>|  
|<span data-ttu-id="dc7a8-468">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-468">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-469">Use o modelo de recuperação completa (também conhecido como modo de recuperação completa).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-469">Use the full recovery model (also known as, full recovery mode).</span></span>|<span data-ttu-id="dc7a8-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span></span>|  
|<span data-ttu-id="dc7a8-471">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-471">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-472">Ter pelo menos um backup de banco de dados completo.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-472">Possess at least one full database backup.</span></span><br /><br /> <span data-ttu-id="dc7a8-473">Observação: Após a definição de uma banco de dados para um modo de recuperação completa, um backup completo será necessário para iniciar a cadeia de log de recuperação completa.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-473">Note: After setting a database to full recovery mode, a full backup is required to initiate the full-recovery log chain.</span></span>|[<span data-ttu-id="dc7a8-474">Criar um backup completo de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-474">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](../../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md)|  
|<span data-ttu-id="dc7a8-475">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-475">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-476">Não pertencer a um grupo de disponibilidade existente.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-476">Not belong to any existing availability group.</span></span>|<span data-ttu-id="dc7a8-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span></span>|  
|<span data-ttu-id="dc7a8-478">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-478">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-479">Não ser configurado para espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-479">Not be configured for database mirroring.</span></span>|<span data-ttu-id="dc7a8-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) (Se o banco de dados não participar do espelhamento, todas as colunas prefixadas com “mirroring_” serão NULL.)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) (If the database does not participate in mirroring, all columns prefixed with "mirroring_" are NULL.)</span></span>|  
|<span data-ttu-id="dc7a8-481">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-481">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-482">Antes de adicionar um banco de dados que usa o FILESTREAM a um grupo de disponibilidade, verifique se o FILESTREAM está habilitado em cada instância de servidor que hospeda ou hospedará uma réplica de disponibilidade do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-482">Before adding a database that uses FILESTREAM to an availability group, ensure that FILESTREAM is enabled on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="dc7a8-483">Habilitar e configurar o FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="dc7a8-483">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="dc7a8-484">![Caixa de seleção](../../media/checkboxemptycenterxtraspacetopandright.gif "Caixa de seleção")</span><span class="sxs-lookup"><span data-stu-id="dc7a8-484">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="dc7a8-485">Antes de adicionar um banco de dados independente a um grupo de disponibilidade, verifique se a opção de servidor `contained database authentication` está definida como `1` em cada instância de servidor que hospeda ou hospedará uma réplica de disponibilidade do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-485">Before adding a contained database to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="dc7a8-486">Opção de configuração do servidor contained database authentication</span><span class="sxs-lookup"><span data-stu-id="dc7a8-486">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="dc7a8-487">Opções de configuração do servidor &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-487">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
> [!NOTE]  
>  <span data-ttu-id="dc7a8-488">O [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] funciona com qualquer nível de compatibilidade de banco de dados com suporte.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-488">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] works with any supported database compatibility level.</span></span>  
  
###  <a name="restrictions-availability-databases"></a><a name="RestrictionsDb"></a> <span data-ttu-id="dc7a8-489">Restrições (bancos de dados de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-489">Restrictions (Availability Databases)</span></span>  
  
-   <span data-ttu-id="dc7a8-490">Se o caminho do arquivo (incluindo a letra da unidade) de um banco de dados secundário diferir do caminho do banco de dados primário correspondente, as seguintes restrições se aplicarão:</span><span class="sxs-lookup"><span data-stu-id="dc7a8-490">If the file path (including the drive letter) of a secondary database differs from the path of the corresponding primary database, the following restrictions apply:</span></span>  
  
    -   <span data-ttu-id="dc7a8-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:**  Não há suporte para a opção **Completa** (na página [Selecionar Página Inicial de Sincronização de Dados](select-initial-data-synchronization-page-always-on-availability-group-wizards.md)),</span><span class="sxs-lookup"><span data-stu-id="dc7a8-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:**  The **Full** option is not supported (on the[Select Initial Data Synchronization Page](select-initial-data-synchronization-page-always-on-availability-group-wizards.md) page),</span></span>  
  
    -   <span data-ttu-id="dc7a8-492">**RESTORE WITH MOVE:**  Para criar os bancos de dados secundários, os arquivos de banco de dados precisam ser executados com RESTORE WITH MOVE em cada instância do [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que hospeda uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-492">**RESTORE WITH MOVE:**  To create the secondary databases, the database files must be RESTORED WITH MOVE on each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts a secondary replica.</span></span>  
  
    -   <span data-ttu-id="dc7a8-493">**Impacto em operações de adição de arquivo:**  Uma operação posterior de adição de arquivo na réplica primária poderá falhar nos bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-493">**Impact on add-file operations:**  A later add-file operation on the primary replica might fail on the secondary databases.</span></span> <span data-ttu-id="dc7a8-494">Esta falha pode levar à suspensão de bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-494">This failure could cause the secondary databases to be suspended.</span></span> <span data-ttu-id="dc7a8-495">Isso, por sua vez, leva as réplicas secundárias a entrarem no estado NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-495">This, in turn, causes the secondary replicas to enter the NOT SYNCHRONIZING state.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="dc7a8-496">Para obter informações sobre como responder a uma operação de adicionar arquivo com falha, consulte [Solução de problemas de uma operação de adição de arquivos com falha &#40;Grupos de disponibilidade AlwaysOn&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-496">For information about responding to a failed ad-file operation, see [Troubleshoot a Failed Add-File Operation &#40;AlwaysOn Availability Groups&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md).</span></span>  
  
-   <span data-ttu-id="dc7a8-497">Você não pode remover um banco de dados que pertence atualmente a um grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-497">You cannot drop a database that currently belongs to an availability group.</span></span>  
  
###  <a name="follow-up-for-tde-protected-databases"></a><a name="TDEdbs"></a> <span data-ttu-id="dc7a8-498">Acompanhamento para bancos de dados TDE protegidos</span><span class="sxs-lookup"><span data-stu-id="dc7a8-498">Follow Up for TDE Protected Databases</span></span>  
 <span data-ttu-id="dc7a8-499">Se você usar criptografia de dados transparente (TDE), o certificado ou a chave assimétrica para criação e descriptografia de outras chaves deverá ser igual em todas as instância de servidor que hospedam uma réplica de disponibilidade para o grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-499">If you use transparent data encryption (TDE), the certificate or asymmetric key for creating and decrypting other keys must be the same on every server instance that hosts an availability replica for the availability group.</span></span> <span data-ttu-id="dc7a8-500">Para obter mais informações, veja [Mover um banco de dados protegido por TDE para outro SQL Server](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="dc7a8-500">For more information, see [Move a TDE Protected Database to Another SQL Server](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md).</span></span>  
  
###  <a name="permissions-availability-databases"></a><a name="PermissionsDbs"></a> <span data-ttu-id="dc7a8-501">Permissões (bancos de dados de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-501">Permissions (Availability Databases)</span></span>  
 <span data-ttu-id="dc7a8-502">Requer a permissão ALTER no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dc7a8-502">Requires ALTER permission on the database.</span></span>  
  
###  <a name="related-tasks-availability-databases"></a><a name="RelatedTasksADb"></a> <span data-ttu-id="dc7a8-503">Tarefas relacionadas (bancos de dados de disponibilidade)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-503">Related Tasks (Availability Databases)</span></span>  
  
|<span data-ttu-id="dc7a8-504">Tarefa</span><span class="sxs-lookup"><span data-stu-id="dc7a8-504">Task</span></span>|<span data-ttu-id="dc7a8-505">Tópico</span><span class="sxs-lookup"><span data-stu-id="dc7a8-505">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="dc7a8-506">Preparando um banco de dados secundário (manualmente)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-506">Preparing a secondary database (manually)</span></span>|[<span data-ttu-id="dc7a8-507">Preparar um banco de dados secundário manualmente para um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-507">Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;</span></span>](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)|  
|<span data-ttu-id="dc7a8-508">Unindo um banco de dados secundário ao grupo de disponibilidade (manualmente)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-508">Joining a secondary database to availability group (manually)</span></span>|[<span data-ttu-id="dc7a8-509">Unir um banco de dados secundário a um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-509">Join a Secondary Database to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-database-to-an-availability-group-sql-server.md)|  
|<span data-ttu-id="dc7a8-510">Modificando o número de bancos de dados de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="dc7a8-510">Modifying the number of availability databases</span></span>|[<span data-ttu-id="dc7a8-511">Adicionar um banco de dados a um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-511">Add a Database to an Availability Group &#40;SQL Server&#41;</span></span>](availability-group-add-a-database.md)<br /><br /> [<span data-ttu-id="dc7a8-512">Remover um banco de dados secundário de um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-512">Remove a Secondary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-database-from-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="dc7a8-513">Remover um banco de dados primário de um grupo de disponibilidade &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="dc7a8-513">Remove a Primary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-primary-database-from-an-availability-group-sql-server.md)|  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="dc7a8-514">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="dc7a8-514">Related Content</span></span>  
  
-   [<span data-ttu-id="dc7a8-515">Guia de soluções AlwaysOn do Microsoft SQL Server para alta disponibilidade e recuperação de desastre</span><span class="sxs-lookup"><span data-stu-id="dc7a8-515">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="dc7a8-516">Blog da equipe do AlwaysOn do SQL Server: blog oficial da equipe do SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="dc7a8-516">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
-   [<span data-ttu-id="dc7a8-517">Série de aprendizado do AlwaysON - HADRON: uso de trabalho do pool para bancos de dados habilitados do HADRON</span><span class="sxs-lookup"><span data-stu-id="dc7a8-517">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
## <a name="see-also"></a><span data-ttu-id="dc7a8-518">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="dc7a8-518">See Also</span></span>  
 <span data-ttu-id="dc7a8-519">[Visão geral do Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="dc7a8-519">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="dc7a8-520">[Clustering de failover e Grupos de Disponibilidade AlwaysOn &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="dc7a8-520">[Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="dc7a8-521">Conectividade de Cliente AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="dc7a8-521">AlwaysOn Client Connectivity (SQL Server)</span></span>](always-on-client-connectivity-sql-server.md)  
  
  
