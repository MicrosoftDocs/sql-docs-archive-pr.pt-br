---
title: Instalar um Service Pack em um sistema com tempo de inatividade mínimo para bancos de dados espelhados | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- hotfixes [SQL Server]
- database mirroring [SQL Server], upgrading system
- rolling upgrades [SQL Server]
- service packs [SQL Server]
- upgrading mirrored database systems
- upgrading SQL Server, mirrored databases
ms.assetid: bdc63142-027d-4ead-9d3e-147331387ef5
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: e878d31ec926f8b2cc460854f422b4d01d32d414
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87681835"
---
# <a name="install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases"></a><span data-ttu-id="8a9d8-102">Instalar um service pack em um sistema com tempo de inatividade mínimo para bancos de dados espelhados</span><span class="sxs-lookup"><span data-stu-id="8a9d8-102">Install a Service Pack on a System with Minimal Downtime for Mirrored Databases</span></span>
  <span data-ttu-id="8a9d8-103">Este tópico descreve como minimizar o tempo de inatividade para bancos de dados espelhados ao instalar service packs e hotfixes.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-103">This topic describes how to minimize downtime for mirrored databases when you install service packs and hotfixes.</span></span> <span data-ttu-id="8a9d8-104">Esse processo envolve atualizar sequencialmente as instâncias do [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] que estão participando do espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-104">This process involves sequentially upgrading the instances of [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] that are participating in database mirroring.</span></span> <span data-ttu-id="8a9d8-105">Essa forma de atualização, que é conhecida como *atualização sem interrupção*, reduz o tempo de inatividade para apenas um único failover.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-105">This form of update, which is known as a *rolling update*, reduces downtime to only a single failover.</span></span> <span data-ttu-id="8a9d8-106">Observe que, para sessões em modo de alto desempenho, nas quais o servidor espelho está geograficamente distante do servidor principal, uma atualização sem interrupção pode ser inadequada.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-106">Note that for high-performance mode sessions in which the mirror server is geographically distant from the principal server, a rolling update might be inappropriate.</span></span>  
  
 <span data-ttu-id="8a9d8-107">A atualização sem interrupção é um processo de vários estágios que consiste no seguinte:</span><span class="sxs-lookup"><span data-stu-id="8a9d8-107">A rolling update is a multi-stage process that consists of the following stages:</span></span>  
  
-   <span data-ttu-id="8a9d8-108">Proteção de seus dados.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-108">Protect your data.</span></span>  
  
-   <span data-ttu-id="8a9d8-109">Se a sessão incluir uma testemunha, recomendamos a remoção da testemunha.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-109">If the session includes a witness, we recommend that you remove the witness.</span></span> <span data-ttu-id="8a9d8-110">Caso contrário, quando a instância do servidor espelho estiver sendo atualizada, a disponibilidade do banco de dados dependerá da testemunha que permanece conectada à instância do servidor principal.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-110">Otherwise, when the mirror server instance is being updated, database availability depends on the witness that remains connected to the principal server instance.</span></span> <span data-ttu-id="8a9d8-111">Depois que você remover uma testemunha, poderá atualizá-la a qualquer momento durante o processo de atualização sem interrupção sem arriscar o tempo de inatividade do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-111">After you remove a witness, you can update it at any time during the rolling update process without risking database downtime.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a9d8-112">Para obter mais informações, confira [Quorum: Como uma testemunha afeta a disponibilidade do banco de dados &#40;Espelhamento de Banco de Dados&#41;](database-mirroring/quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-112">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](database-mirroring/quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="8a9d8-113">Se uma sessão estiver sendo executada em modo de alto desempenho, altere o modo operacional para o modo de segurança alta.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-113">If a session is running in high-performance mode, change the operating mode to high-safety mode.</span></span>  
  
-   <span data-ttu-id="8a9d8-114">Atualize cada instância de servidor que esteja envolvida no espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-114">Update each server instance that is involved in database mirroring.</span></span> <span data-ttu-id="8a9d8-115">Uma atualização sem interrupção envolve a atualização da instância do servidor, que é atualmente o servidor espelho, executando o failover manual de cada um de seus bancos de dados espelhados e atualizando a instância do servidor que era o servidor principal (e é agora o novo servidor espelho).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-115">A rolling update involves upgrading the server instance that is currently the mirror server, manually failing over each of its mirrored databases, and upgrading the server instance that was first the principal server (and is now the new mirror server).</span></span> <span data-ttu-id="8a9d8-116">Neste momento, é necessário retomar o espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-116">At this point, you will have to resume mirroring.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a9d8-117">Antes de iniciar uma atualização sem interrupção, é recomendável a execução de um failover manual em, pelo menos, uma das sessões de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-117">Before starting a rolling update, we recommend that you perform a practice manual failover on at least one of your mirroring sessions.</span></span>  
  
-   <span data-ttu-id="8a9d8-118">Reverta para o modo de alto desempenho, se for necessário.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-118">Revert to high-performance mode, if it is required.</span></span>  
  
-   <span data-ttu-id="8a9d8-119">Retorne a testemunha para a sessão de espelhamento, se for necessário.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-119">Return the witness to the mirroring session, if it is required.</span></span>  
  
 <span data-ttu-id="8a9d8-120">Os procedimentos para esses estágios são descritos aqui.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-120">The procedures for these stages are described here.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8a9d8-121">Uma instância do servidor pode estar executando diferentes funções de espelhamento (servidor principal, servidor espelho ou testemunha) nas sessões de espelhamento simultâneas.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-121">A server instance might be performing different mirroring roles (principal server, mirror server, or witness) in concurrent mirroring sessions.</span></span> <span data-ttu-id="8a9d8-122">Nesse caso, é preciso adaptar o processo básico de atualização sem interrupção na mesma proporção.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-122">In this case, you will have to adapt the basic rolling update process accordingly.</span></span>  
  
### <a name="to-protect-your-data-before-an-update-a-best-practice"></a><span data-ttu-id="8a9d8-123">Para proteger os dados antes de uma atualização (uma prática recomendada)</span><span class="sxs-lookup"><span data-stu-id="8a9d8-123">To protect your data before an update (a best practice)</span></span>  
  
1.  <span data-ttu-id="8a9d8-124">Execute um backup de banco de dados completo em todos os bancos de dados principais.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-124">Perform a full database backup on every principal database.</span></span>  
  
     <span data-ttu-id="8a9d8-125">**Para fazer o backup de um banco de dados**</span><span class="sxs-lookup"><span data-stu-id="8a9d8-125">**To back up a database**</span></span>  
  
    -   <span data-ttu-id="8a9d8-126">[Criar um backup completo de banco de dados &#40;SQL Server&#41;](../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-126">[Create a Full Database Backup &#40;SQL Server&#41;](../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="8a9d8-127">Execute o comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) em todos os bancos de dados principais.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-127">Run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on every principal database.</span></span>  
  
### <a name="to-remove-a-witness-from-a-session"></a><span data-ttu-id="8a9d8-128">Para remover uma testemunha de uma sessão</span><span class="sxs-lookup"><span data-stu-id="8a9d8-128">To remove a witness from a session</span></span>  
  
1.  <span data-ttu-id="8a9d8-129">Se a sessão de espelhamento envolver uma testemunha, é recomendável a remoção da testemunha antes de executar uma atualização sem interrupção.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-129">If a mirroring session involves a witness, we recommend that you remove the witness before you perform a rolling update.</span></span>  
  
     <span data-ttu-id="8a9d8-130">**Para remover a testemunha**</span><span class="sxs-lookup"><span data-stu-id="8a9d8-130">**To remove the witness**</span></span>  
  
    -   [<span data-ttu-id="8a9d8-131">Remover a testemunha de uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="8a9d8-131">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](database-mirroring/remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
### <a name="to-change-a-session-from-high-performance-mode-to-high-safety-mode"></a><span data-ttu-id="8a9d8-132">Para alterar uma sessão em modo de alto desempenho para modo de segurança alta</span><span class="sxs-lookup"><span data-stu-id="8a9d8-132">To change a session from high-performance mode to high-safety mode</span></span>  
  
1.  <span data-ttu-id="8a9d8-133">Se a sessão de espelhamento estiver sendo executada em modo de alto desempenho, antes de executar uma atualização sem interrupção, altere o modo operacional para segurança alta sem failover automático.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-133">If a mirroring session is running in high-performance mode, before you perform a rolling update, change the operating mode to high safety without automatic failover.</span></span> <span data-ttu-id="8a9d8-134">Use um dos métodos a seguir:</span><span class="sxs-lookup"><span data-stu-id="8a9d8-134">Use one of the following methods:</span></span>  
  
    -   <span data-ttu-id="8a9d8-135">Em [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: altere a opção **Modo de operação** para **Segurança alta sem failover automático (síncrono)** usando a [página Espelhamento](../relational-databases/databases/database-properties-mirroring-page.md) da caixa de diálogo **Propriedades do Banco de Dados**.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-135">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High safety without automatic failover (synchronous)** by using the [Mirroring Page](../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span> <span data-ttu-id="8a9d8-136">Para obter informações sobre como acessar essa página, consulte [Iniciar o Assistente para Configurar Segurança de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;](database-mirroring/start-the-configuring-database-mirroring-security-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-136">For information about how to access this page, see [Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;](database-mirroring/start-the-configuring-database-mirroring-security-wizard.md).</span></span>  
  
    -   <span data-ttu-id="8a9d8-137">Em [!INCLUDE[tsql](../includes/tsql-md.md)]: defina a segurança de transações para FULL.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-137">In [!INCLUDE[tsql](../includes/tsql-md.md)]: Set transaction safety to FULL.</span></span> <span data-ttu-id="8a9d8-138">Para obter mais informações, consulte [Alterar a segurança da transação em uma sessão de espelhamento de banco de dados &#40;Transact-SQL&#41;](database-mirroring/change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-138">For more information, see [Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;](database-mirroring/change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span></span>  
  
### <a name="to-perform-the-rolling-update"></a><span data-ttu-id="8a9d8-139">Para executar a atualização sem interrupção</span><span class="sxs-lookup"><span data-stu-id="8a9d8-139">To perform the rolling update</span></span>  
  
1.  <span data-ttu-id="8a9d8-140">Para minimizar o tempo de inatividade, é recomendável o seguinte: inicie a atualização sem interrupção atualizando qualquer parceiro de espelhamento que, no momento, seja o servidor espelho em todas as sessões de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-140">To minimize downtime, we recommend the following: Start the rolling update by updating any mirroring partner that is currently the mirror server in all its mirroring sessions.</span></span> <span data-ttu-id="8a9d8-141">Pode ser necessário atualizar várias instâncias do servidor neste momento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-141">You might have to update multiple server instances at this point.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a9d8-142">Uma testemunha pode ser atualizada em qualquer ponto do processo de atualização sem interrupção.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-142">A witness can be updated at any point in the rolling update process.</span></span> <span data-ttu-id="8a9d8-143">Por exemplo, se uma instância de servidor for um servidor espelho na sessão 1 e for uma testemunha na sessão 2, você poderá atualizar a instância do servidor agora.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-143">For example, if a server instance is a mirror server in Session 1 and is a witness in Session 2, you can update the server instance now.</span></span>  
  
     <span data-ttu-id="8a9d8-144">A instância do servidor a ser atualizada primeiro depende da configuração atual de suas sessões de espelhamento, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8a9d8-144">The server instance to update first depends on the current configuration of your mirroring sessions, as follows:</span></span>  
  
    -   <span data-ttu-id="8a9d8-145">Se qualquer instância do servidor já for o servidor espelho em todas as suas sessões de espelhamento, instale o service pack ou o hotfix nessa instância do servidor.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-145">If any server instance is already the mirror server in all of its mirroring sessions, install the service pack or the hotfix on that server instance.</span></span>  
  
    -   <span data-ttu-id="8a9d8-146">Se todas as instâncias de servidor forem atualmente o servidor principal em todas as sessões de espelhamento, selecione uma instância de servidor para atualizar primeiro.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-146">If all of your server instances are currently the principal server in any mirroring sessions, select one server instance to update first.</span></span> <span data-ttu-id="8a9d8-147">Em seguida, execute manualmente um failover em cada um dos bancos de dados principais e atualize essa instância instalando o service pack ou hotfix.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-147">Then, manually fail over each of its principal databases and update that server instance by installing the service pack or the hotfix.</span></span>  
  
     <span data-ttu-id="8a9d8-148">Depois de atualizada, a instância do servidor reingressa automaticamente em cada uma das sessões de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-148">After being updated, a server instance automatically rejoins each of its mirroring sessions.</span></span>  
  
     <span data-ttu-id="8a9d8-149">**Para executar um failover manual**</span><span class="sxs-lookup"><span data-stu-id="8a9d8-149">**To perform a manual failover**</span></span>  
  
    -   [<span data-ttu-id="8a9d8-150">Executar failover manualmente de uma sessão de espelhamento de banco de dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="8a9d8-150">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
    -   <span data-ttu-id="8a9d8-151">[Executar failover manualmente em uma sessão de espelhamento de banco de dados &#40;Transact-SQL&#41;](database-mirroring/manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-151">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](database-mirroring/manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
     <span data-ttu-id="8a9d8-152">Para obter informações sobre como funciona o failover manual, veja [Troca de função durante uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8a9d8-152">For information about how manual failover works, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="8a9d8-153">Em cada sessão de espelhamento cuja instância do servidor espelho acabou de ser atualizada, aguarde a sessão ser sincronizada.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-153">For each mirroring session whose mirror server instance has just been updated, wait for the session to synchronize.</span></span> <span data-ttu-id="8a9d8-154">Depois, conecte-se à instância do servidor principal e execute o failover manual na sessão.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-154">Then, connect to the principal server instance, and manually fail over the session.</span></span> <span data-ttu-id="8a9d8-155">No failover, a instância do servidor atualizada torna-se o servidor principal dessa sessão, e o servidor principal antigo torna-se o servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-155">On failover, the updated server instance becomes the principal server for that session, and the former principal server becomes the mirror server.</span></span>  
  
     <span data-ttu-id="8a9d8-156">O objetivo dessa etapa é que outra instância do servidor torne-se o servidor espelho em cada sessão de espelhamento na qual é um parceiro.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-156">The goal of this step is for another server instance to become the mirror server in every mirroring session in which it is a partner.</span></span>  
  
3.  <span data-ttu-id="8a9d8-157">Depois de executar o failover, recomendamos a execução do comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) no banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-157">After you fail over, we recommend that you run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on the principal database.</span></span>  
  
4.  <span data-ttu-id="8a9d8-158">Instale o service pack ou o hotfix em cada instância do servidor que seja agora o servidor espelho, em todas as sessões de espelhamento na qual seja um parceiro.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-158">Install the service pack or the hotfix on each server instance that is now the mirror server in all mirroring sessions in which it is a partner.</span></span> <span data-ttu-id="8a9d8-159">Pode necessário atualizar vários servidores nesse momento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-159">You might have to update multiple servers at this point.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="8a9d8-160">Em uma configuração de espelhamento complexa, algumas instâncias do servidor podem ainda ser o servidor principal original em uma ou mais sessões de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-160">In a complex mirroring configuration, some server instance might still be the original principal server in one or more mirroring sessions.</span></span> <span data-ttu-id="8a9d8-161">Repita as etapas 2-4 para essas instâncias de servidor até que todas as instâncias envolvidas sejam atualizadas.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-161">Repeat steps 2-4 for those server instances until all instances involved are updated.</span></span>  
  
5.  <span data-ttu-id="8a9d8-162">Continue a sessão de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-162">Resume the mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a9d8-163">O failover automático não funcionará até que a testemunha seja atualizada.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-163">Automatic failover will not work until the witness has been updated.</span></span>  
  
6.  <span data-ttu-id="8a9d8-164">Instale os service packs ou hotfixes nas instâncias do servidor restantes que sejam a testemunha em todas as suas sessões de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-164">Install the service packs or hotfixes on any remaining server instance that is the witness in all its mirroring sessions.</span></span> <span data-ttu-id="8a9d8-165">Depois que uma testemunha atualizada reingressar em uma sessão de espelhamento, o failover automático será possível novamente.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-165">After an updated witness rejoins a mirroring session, automatic failover becomes possible again.</span></span> <span data-ttu-id="8a9d8-166">Pode necessário atualizar vários servidores nesse momento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-166">You might have to update multiple servers at this point.</span></span>  
  
### <a name="to-return-a-session-to-high-performance-mode"></a><span data-ttu-id="8a9d8-167">Para retornar a uma sessão em modo de alto desempenho</span><span class="sxs-lookup"><span data-stu-id="8a9d8-167">To return a session to high-performance mode</span></span>  
  
1.  <span data-ttu-id="8a9d8-168">Opcionalmente, retorne ao modo de alto desempenho usando um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="8a9d8-168">Optionally, return to high-performance mode by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="8a9d8-169">Em [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: altere a opção **Modo de operação** para **Alto desempenho (assíncrono)** usando a [página Espelhamento](../relational-databases/databases/database-properties-mirroring-page.md) da caixa de diálogo **Propriedades do Banco de Dados** .</span><span class="sxs-lookup"><span data-stu-id="8a9d8-169">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High performance (asynchronous)** by using the [Mirroring Page](../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span>  
  
    -   <span data-ttu-id="8a9d8-170">Em [!INCLUDE[tsql](../includes/tsql-md.md)] : use [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) para definir a segurança da transação como off.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-170">In [!INCLUDE[tsql](../includes/tsql-md.md)]: Use [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) to set transaction safety to OFF.</span></span>  
  
### <a name="to-return-a-witness-to-a-mirroring-session"></a><span data-ttu-id="8a9d8-171">Para retornar a testemunha a uma sessão de espelhamento</span><span class="sxs-lookup"><span data-stu-id="8a9d8-171">To return a witness to a mirroring session</span></span>  
  
1.  <span data-ttu-id="8a9d8-172">Opcionalmente, em modo de segurança alta, restabeleça a testemunha para cada sessão de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="8a9d8-172">Optionally, in high-safety mode, reestablish the witness to each mirroring session.</span></span>  
  
     <span data-ttu-id="8a9d8-173">**Para restabelecer a testemunha**</span><span class="sxs-lookup"><span data-stu-id="8a9d8-173">**To reestablish the witness**</span></span>  
  
    -   [<span data-ttu-id="8a9d8-174">Adicionar ou substituir uma testemunha de espelhamento de banco de dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="8a9d8-174">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
    -   [<span data-ttu-id="8a9d8-175">Adicionar uma testemunha de espelhamento de banco de dados usando a Autenticação do Windows &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a9d8-175">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](database-mirroring/add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="8a9d8-176">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="8a9d8-176">See Also</span></span>  
 <span data-ttu-id="8a9d8-177">[Espelhamento de banco de dados ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-177">[ALTER DATABASE Database Mirroring &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span></span>  
 <span data-ttu-id="8a9d8-178">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-178">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="8a9d8-179">[Espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring/database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-179">[Database Mirroring &#40;SQL Server&#41;](database-mirroring/database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="8a9d8-180">[Modos de operação de espelhamento de banco de dados](database-mirroring/database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-180">[Database Mirroring Operating Modes](database-mirroring/database-mirroring-operating-modes.md) </span></span>  
 <span data-ttu-id="8a9d8-181">[Troca de função durante uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-181">[Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="8a9d8-182">[Iniciar o Monitor de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;](database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="8a9d8-182">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 [<span data-ttu-id="8a9d8-183">Exibir o estado de um banco de dados espelhado &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="8a9d8-183">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
  
