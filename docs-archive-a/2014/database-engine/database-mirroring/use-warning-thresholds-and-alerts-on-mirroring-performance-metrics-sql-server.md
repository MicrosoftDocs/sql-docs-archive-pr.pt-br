---
title: Usar limites de aviso e alertas em métricas de desempenho de espelhamento (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring database mirroring [SQL Server]
- thresholds [SQL Server]
- database mirroring [SQL Server], managing in SQL Server Management Studio
- alerts [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
- warnings [database mirroring]
ms.assetid: 8cdd1515-0bd7-4f8c-a7fc-a33b575e20f6
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 908b234143bc7e2140fe1c98d85ba150ea69b28d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87572677"
---
# <a name="use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server"></a><span data-ttu-id="ec0a2-102">Use os limites de aviso e alertas em métricas de desempenho de espelhamento (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="ec0a2-102">Use Warning Thresholds and Alerts on Mirroring Performance Metrics (SQL Server)</span></span>
  <span data-ttu-id="ec0a2-103">Este tópico contém informações sobre os eventos do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para os quais os limites de avisos podem ser configurados e gerenciados para espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-103">This topic contains information about the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events for which warning thresholds can be configured and managed for database mirroring.</span></span> <span data-ttu-id="ec0a2-104">Você pode usar o Monitor de Espelhamento de Banco de Dados ou os procedimentos armazenados **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**e **sp_dbmmonitordropalert** .</span><span class="sxs-lookup"><span data-stu-id="ec0a2-104">You can use the  Database Mirroring Monitor or the **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**, and **sp_dbmmonitordropalert** stored procedures.</span></span> <span data-ttu-id="ec0a2-105">Este tópico também contém informações sobre como configurar alertas em eventos de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-105">This topic also contains information about configuring alerts on database mirroring events.</span></span>  
  
 <span data-ttu-id="ec0a2-106">Depois que o monitoramento é definido para um banco de dados espelho, um administrador de sistema pode configurar limites de aviso em várias métricas chave de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-106">After monitoring is established for a mirrored database, a system administrator can configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="ec0a2-107">Além disso, um administrador pode configurar alertas nesses e em outros eventos de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-107">Also, an administrator can configure alerts on these and other database mirroring events.</span></span>  
  
 <span data-ttu-id="ec0a2-108">**Neste tópico:**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-108">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="ec0a2-109">Métricas de desempenho e limites de aviso</span><span class="sxs-lookup"><span data-stu-id="ec0a2-109">Performance Metrics and Warning Thresholds</span></span>](#PerfMetricsAndWarningThresholds)  
  
-   [<span data-ttu-id="ec0a2-110">Configurando e gerenciando limites de aviso</span><span class="sxs-lookup"><span data-stu-id="ec0a2-110">Setting Up and Managing Warning Thresholds</span></span>](#SetUpManageWarningThresholds)  
  
-   [<span data-ttu-id="ec0a2-111">Usando alertas para um banco de dados espelho</span><span class="sxs-lookup"><span data-stu-id="ec0a2-111">Using Alerts for a Mirrored Database</span></span>](#UseAlerts)  
  
-   [<span data-ttu-id="ec0a2-112">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="ec0a2-112">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="performance-metrics-and-warning-thresholds"></a><a name="PerfMetricsAndWarningThresholds"></a><span data-ttu-id="ec0a2-113">Métricas de desempenho e limites de aviso</span><span class="sxs-lookup"><span data-stu-id="ec0a2-113">Performance Metrics and Warning Thresholds</span></span>  
 <span data-ttu-id="ec0a2-114">A tabela a seguir lista as métricas de desempenho para as quais os avisos podem ser configurados, descreve o limite de aviso correspondente e lista os rótulos correspondentes do Monitor de Espelhamento de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-114">The following table lists the performance metrics for which warnings can be configured, describes the corresponding warning threshold, and lists the corresponding Database Mirroring Monitor label.</span></span>  
  
|<span data-ttu-id="ec0a2-115">Métrica de desempenho</span><span class="sxs-lookup"><span data-stu-id="ec0a2-115">Performance metric</span></span>|<span data-ttu-id="ec0a2-116">Limite de aviso</span><span class="sxs-lookup"><span data-stu-id="ec0a2-116">Warning threshold</span></span>|<span data-ttu-id="ec0a2-117">Rótulo do monitor de espelhamento de banco de dados</span><span class="sxs-lookup"><span data-stu-id="ec0a2-117">Database Mirroring Monitor label</span></span>|  
|------------------------|-----------------------|--------------------------------------|  
|<span data-ttu-id="ec0a2-118">Log não enviado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-118">Unsent log</span></span>|<span data-ttu-id="ec0a2-119">Especifica quantos quilobytes (KB) de log não enviado geram um aviso na instância do servidor principal.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-119">Specifies how many kilobytes (KB) of unsent log generate a warning on the principal server instance.</span></span> <span data-ttu-id="ec0a2-120">Essa advertência ajuda a medir o potencial para perda de dados em termos de KB e é especialmente relevante para o modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-120">This warning helps measure the potential for data loss in terms of KB and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="ec0a2-121">No entanto, o aviso também é relevante para o modo de segurança alta, quando o espelhamento é pausado ou suspenso devido à desconexão dos parceiros.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-121">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="ec0a2-122">**Avisar se o log não enviado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-122">**Warn if the unsent log exceeds the threshold**</span></span>|  
|<span data-ttu-id="ec0a2-123">Log não restaurado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-123">Unrestored log</span></span>|<span data-ttu-id="ec0a2-124">Especifica quantos KB de log não restaurado geram um aviso na instância do servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-124">Specifies how many KB of unrestored log generate a warning on the mirror server instance.</span></span> <span data-ttu-id="ec0a2-125">Esse aviso ajuda a medir o tempo de failover.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-125">This warning helps measure failover time.</span></span> <span data-ttu-id="ec0a2-126">*Tempo de failover* consiste, essencialmente, no tempo necessário para que o servidor espelho anterior efetue o roll-forward de quaisquer logs restantes em sua fila de restauração, mais um pequeno tempo adicional.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-126">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="ec0a2-127">Observação: Em um failover automático, o tempo necessário para que o sistema observe o erro é independente do período do failover.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-127">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="ec0a2-128">Para obter mais informações, veja [Estime a interrupção do serviço durante troca de função &#40;Espelhamento de Banco de Dados&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="ec0a2-128">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|<span data-ttu-id="ec0a2-129">**Avisar se o log não restaurado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-129">**Warn if the unrestored log exceeds the threshold**</span></span>|  
|<span data-ttu-id="ec0a2-130">Transação não enviada mais antiga</span><span class="sxs-lookup"><span data-stu-id="ec0a2-130">Oldest unsent transaction</span></span>|<span data-ttu-id="ec0a2-131">Especifica o número de minutos de transações que podem ser acumuladas na fila de envio, antes da geração de um aviso na instância do servidor principal.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-131">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="ec0a2-132">Essa advertência ajuda a medir o potencial para perda de dados em termos de tempo e é especialmente relevante no modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-132">This warning helps measure the potential for data loss in terms of time and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="ec0a2-133">No entanto, o aviso também é relevante para o modo de segurança alta, quando o espelhamento é pausado ou suspenso devido à desconexão dos parceiros.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-133">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="ec0a2-134">**Avisar se a idade da transação não enviada mais antiga exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-134">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|  
|<span data-ttu-id="ec0a2-135">Sobrecarga espelhada confirmada</span><span class="sxs-lookup"><span data-stu-id="ec0a2-135">Mirror commit overhead</span></span>|<span data-ttu-id="ec0a2-136">Especifica o número de milissegundos de atraso médio por transação tolerado, antes que um aviso seja gerado no servidor principal.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-136">Specifies the number of milliseconds of average delay per transaction that are tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="ec0a2-137">Esse atraso consiste na quantidade de sobrecarga incidente enquanto a instância do servidor principal aguarda que a instância do servidor espelho grave o registro do log da transação na fila de restauração.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-137">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="ec0a2-138">Esse valor é relevante somente no modo de alta segurança.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-138">This value is relevant only in high-safety mode.</span></span>|<span data-ttu-id="ec0a2-139">**Avisar se a sobrecarga espelhada confirmada exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-139">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|  
  
 <span data-ttu-id="ec0a2-140">Para qualquer uma dessas métrica de desempenho, um administrador de sistema pode especificar um limite em um banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-140">For any one of these performance metrics, a system administrator can specify a threshold on a mirrored database.</span></span> <span data-ttu-id="ec0a2-141">Para obter mais informações, consulte [Configurando e gerenciando limites de aviso](#SetUpManageWarningThresholds), posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-141">For more information, see [Setting Up and Managing Warning Thresholds](#SetUpManageWarningThresholds), later in this topic.</span></span>  
  
##  <a name="setting-up-and-managing-warning-thresholds"></a><a name="SetUpManageWarningThresholds"></a><span data-ttu-id="ec0a2-142">Configurando e gerenciando limites de aviso</span><span class="sxs-lookup"><span data-stu-id="ec0a2-142">Setting Up and Managing Warning Thresholds</span></span>  
 <span data-ttu-id="ec0a2-143">Um administrador de sistema pode configurar um ou mais limites de aviso para as métricas de desempenho chave de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-143">A system administrator can configure one or more warning thresholds for the key mirroring performance metrics.</span></span> <span data-ttu-id="ec0a2-144">Recomendamos a definição de um limite para um determinado aviso em ambos os parceiros para garantir que o aviso persista se o banco de dados cair.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-144">We recommend setting a threshold for a given warning on both partners to make sure that the warning persists if the database fails over.</span></span> <span data-ttu-id="ec0a2-145">O limite apropriado de cada parceiro depende dos recursos de desempenho do sistema daquele parceiro.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-145">The appropriate threshold on each partner depends on the performance capabilities of that partner's system.</span></span>  
  
 <span data-ttu-id="ec0a2-146">Limites de aviso também podem ser configurados e gerenciados com uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="ec0a2-146">Warning thresholds can be configured and managed by using either of the following:</span></span>  
  
-   <span data-ttu-id="ec0a2-147">Monitor de Espelhamento de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="ec0a2-147">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="ec0a2-148">No Monitor de Espelhamento de Banco de Dados, o administrador pode exibir a configuração atual de avisos para um banco de dados selecionado nas instâncias do servidor principal e espelho ao mesmo tempo, selecionando a página com guias **Avisos** .</span><span class="sxs-lookup"><span data-stu-id="ec0a2-148">In Database Mirroring Monitor, the administrator can view the current configuration of warnings for a selected database at both the principal and mirror server instances at the same time by selecting the **Warnings** tabbed page.</span></span> <span data-ttu-id="ec0a2-149">Dessa página, o administrador pode abrir a caixa de diálogo **Definir Limites de Aviso** para habilitar e configurar um ou mais limites de aviso.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-149">From there, the administrator can open the **Set Warning Thresholds** dialog box to enable and configure one or more warning thresholds.</span></span>  
  
     <span data-ttu-id="ec0a2-150">Para uma introdução à interface do Monitor de Espelhamento de Banco de Dados, consulte [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ec0a2-150">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="ec0a2-151">Para obter informações sobre como iniciar o Monitor de Espelhamento de Banco de Dados, veja [Iniciar o Monitor de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ec0a2-151">For information about launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="ec0a2-152">Procedimentos armazenados do sistema</span><span class="sxs-lookup"><span data-stu-id="ec0a2-152">System stored procedures</span></span>  
  
     <span data-ttu-id="ec0a2-153">O conjunto a seguir de procedimentos armazenados do sistema permite que um administrador configure e gerencie limites de aviso em bancos de dados espelhados, um parceiro por vez.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-153">The following set of system stored procedures enable an administrator to set up and manage warning thresholds on mirrored databases of one partner at a time.</span></span>  
  
    |<span data-ttu-id="ec0a2-154">Procedimento</span><span class="sxs-lookup"><span data-stu-id="ec0a2-154">Procedure</span></span>|<span data-ttu-id="ec0a2-155">Descrição</span><span class="sxs-lookup"><span data-stu-id="ec0a2-155">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="ec0a2-156">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-156">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)|<span data-ttu-id="ec0a2-157">Adiciona ou altera limites de aviso para uma métrica especificada de desempenho de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-157">Adds or changes warning threshold for a specified mirroring performance metric.</span></span>|  
    |[<span data-ttu-id="ec0a2-158">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-158">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)|<span data-ttu-id="ec0a2-159">Retorna informações sobre limites de aviso em uma ou todas as várias métricas de desempenho do monitor de espelhamento de banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-159">Returns information about warning thresholds on one or all of several key database mirroring monitor performance metrics.</span></span>|  
    |[<span data-ttu-id="ec0a2-160">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-160">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)|<span data-ttu-id="ec0a2-161">Descarta o aviso de uma métrica de desempenho especificada.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-161">Drops the warning for a specified performance metric.</span></span>|  
  
## <a name="performance-threshold-events-sent-to-the-windows-event-log"></a><span data-ttu-id="ec0a2-162">Eventos de limite de desempenho enviados para o log de eventos do Windows</span><span class="sxs-lookup"><span data-stu-id="ec0a2-162">Performance-Threshold Events Sent to the Windows Event Log</span></span>  
 <span data-ttu-id="ec0a2-163">Se o limite de aviso for definido para uma métrica de desempenho, quando a tabela de status for atualizada, o valor mais recente será avaliado com relação ao limite.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-163">If warning thresholdis defined for a performance metric, when the status table is updated, the latest value is evaluated against the threshold.</span></span> <span data-ttu-id="ec0a2-164">Se o limite tiver sido atingido, o procedimento de atualização, **sp_dbmmonitorupdate**, gerará um evento informativo – um *evento de limite de desempenho*-para a métrica e gravará o evento no log de eventos do [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-164">If the threshold has been reached, the update procedure, **sp_dbmmonitorupdate**, generates an informational event-a *performance-threshold event*- for the metric and writes the event to the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows event log.</span></span> <span data-ttu-id="ec0a2-165">A tabela a seguir lista as IDs de evento dos eventos de limite de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-165">The following table lists the event IDs of the performance-threshold events.</span></span>  
  
|<span data-ttu-id="ec0a2-166">Métrica de desempenho</span><span class="sxs-lookup"><span data-stu-id="ec0a2-166">Performance metric</span></span>|<span data-ttu-id="ec0a2-167">ID do evento</span><span class="sxs-lookup"><span data-stu-id="ec0a2-167">Event ID</span></span>|  
|------------------------|--------------|  
|<span data-ttu-id="ec0a2-168">Log não enviado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-168">Unsent log</span></span>|<span data-ttu-id="ec0a2-169">32042</span><span class="sxs-lookup"><span data-stu-id="ec0a2-169">32042</span></span>|  
|<span data-ttu-id="ec0a2-170">Log não restaurado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-170">Unrestored log</span></span>|<span data-ttu-id="ec0a2-171">32043</span><span class="sxs-lookup"><span data-stu-id="ec0a2-171">32043</span></span>|  
|<span data-ttu-id="ec0a2-172">Transação não enviada mais antiga</span><span class="sxs-lookup"><span data-stu-id="ec0a2-172">Oldest unsent transaction</span></span>|<span data-ttu-id="ec0a2-173">32040</span><span class="sxs-lookup"><span data-stu-id="ec0a2-173">32040</span></span>|  
|<span data-ttu-id="ec0a2-174">Sobrecarga espelhada confirmada</span><span class="sxs-lookup"><span data-stu-id="ec0a2-174">Mirror commit overhead</span></span>|<span data-ttu-id="ec0a2-175">32044</span><span class="sxs-lookup"><span data-stu-id="ec0a2-175">32044</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="ec0a2-176">Um administrador pode definir alertas em qualquer um ou mais desses eventos.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-176">An administrator can define alerts on any one or more of these events.</span></span> <span data-ttu-id="ec0a2-177">Para obter mais informações, consulte [Usando alertas para um banco de dados espelhado](#UseAlerts), mais adiante neste</span><span class="sxs-lookup"><span data-stu-id="ec0a2-177">For more information, see [Using Alerts for a Mirrored Database](#UseAlerts), later in this</span></span>  
>   
>  <span data-ttu-id="ec0a2-178">tópico.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-178">topic.</span></span>  
  
##  <a name="using-alerts-for-a-mirrored-database"></a><a name="UseAlerts"></a><span data-ttu-id="ec0a2-179">Usando alertas para um banco de dados espelhado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-179">Using Alerts for a Mirrored Database</span></span>  
 <span data-ttu-id="ec0a2-180">Uma parte importante do monitoramento de um banco de dados espelhado é a configuração de alertas sobre eventos importantes de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-180">An important part of monitoring a mirrored database is configuring alerts on significant database mirro events.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ec0a2-181">gera os seguintes tipos de eventos de espelhamento de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="ec0a2-181">generates the following types of database mirroring events:</span></span>  
  
-   <span data-ttu-id="ec0a2-182">Eventos de limite de desempenho</span><span class="sxs-lookup"><span data-stu-id="ec0a2-182">Performance threshold events</span></span>  
  
     <span data-ttu-id="ec0a2-183">Para obter mais informações, consulte "Eventos de limite de desempenho enviados para o log de eventos do Windows", anteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-183">For more information, see "Performance-Threshold Events Sent to the Windows Event Log" earlier in this topic.</span></span>  
  
-   <span data-ttu-id="ec0a2-184">Eventos de alteração de estado</span><span class="sxs-lookup"><span data-stu-id="ec0a2-184">State-change events</span></span>  
  
     <span data-ttu-id="ec0a2-185">Esses são eventos WMI (Windows Management Instrumentation) gerados quando ocorrem alterações no estado interno de uma sessão de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-185">These are Windows Management Instrumentation (WMI) events that are generated when changes occur in the internal state of a database mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ec0a2-186">Para obter mais informações, veja [Provedor WMI para conceitos de eventos de servidor](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="ec0a2-186">For more information, see [WMI Provider for Server Events Concepts](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span></span>  
  
 <span data-ttu-id="ec0a2-187">Um administrador de sistema pode configurar alertas nesses eventos com o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent ou outros aplicativos, como o [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-187">A system administrator can configure alerts on these by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent or other applications, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager.</span></span>  
  
 <span data-ttu-id="ec0a2-188">Quando você define alertas em eventos de espelhamento de banco de dados, recomendamos que defina limites de aviso e alertas em ambas as instâncias do servidor parceiro.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-188">When you define alerts on database mirroring events, we recommend that you define warning thresholds and alerts at both partner server instances.</span></span> <span data-ttu-id="ec0a2-189">Eventos individuais são gerados no servidor principal ou no servidor espelho, mas cada parceiro pode executar qualquer uma dessas funções a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-189">Individual events are generated at either the principal server or the mirror server, but each partner can perform either role at any time.</span></span> <span data-ttu-id="ec0a2-190">Para garantir que um alerta continue operando depois de um failover, o alerta deve ser definido em ambos os parceiros.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-190">To make sure that an alert continues to operate after a failover, the alert must be defined at both partners.</span></span>  
  
 <span data-ttu-id="ec0a2-191">Para obter mais informações, consulte o white paper sobre alertas em eventos de espelhamento de banco de dados neste site do [SQL Server](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="ec0a2-191">For more information, see the white paper about alerting on database mirroring events at this [SQL Server Web site](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span> <span data-ttu-id="ec0a2-192">Esse white paper contém informações sobre como configurar alertas com o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, os eventos WMI de espelhamento de banco de dados e scripts de exemplo.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-192">This white paper contains information about how to configure alerts using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the database mirroring WMI events, and sample scripts.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="ec0a2-193">Para todas a sessões de espelhamento, é altamente recomendável que você configure o banco de dados para enviar um alerta em qualquer evento de alteração de estado.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-193">For all mirroring sessions, we strongly recommend that you configure the database to send an alert on any state-change events.</span></span> <span data-ttu-id="ec0a2-194">A menos que uma alteração de estado seja esperada como resultado de uma alteração de configuração manual, algo ocorreu que pode comprometer seus dados.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-194">Unless a state change is expected as the result of a manual configuration change, something has occurred that could compromise your data.</span></span> <span data-ttu-id="ec0a2-195">Para ajudar a proteger seus dados, identifique e repare a causa de uma alteração de estado imprevista.</span><span class="sxs-lookup"><span data-stu-id="ec0a2-195">To help protect your data, identify and fix the cause of an unexpected state change.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="ec0a2-196">Tarefas relacionadas</span><span class="sxs-lookup"><span data-stu-id="ec0a2-196">Related Tasks</span></span>  
 <span data-ttu-id="ec0a2-197">**Para criar um alerta com o SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-197">**To create an alert using SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="ec0a2-198">Criar um alerta usando um número de erro</span><span class="sxs-lookup"><span data-stu-id="ec0a2-198">Create an Alert Using an Error Number</span></span>](../../ssms/agent/create-an-alert-using-an-error-number.md)  
  
-   [<span data-ttu-id="ec0a2-199">Criar um alerta de eventos WMI</span><span class="sxs-lookup"><span data-stu-id="ec0a2-199">Create a WMI Event Alert</span></span>](../../ssms/agent/create-a-wmi-event-alert.md)  
  
 <span data-ttu-id="ec0a2-200">**Para monitorar o espelhamento de banco de dados**</span><span class="sxs-lookup"><span data-stu-id="ec0a2-200">**To monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="ec0a2-201">Iniciar o Monitor de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-201">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="ec0a2-202">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-202">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-203">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-203">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-204">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-204">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-205">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-205">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-206">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-206">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-207">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-207">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-208">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-208">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-209">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-209">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="ec0a2-210">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-210">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="ec0a2-211">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="ec0a2-211">See Also</span></span>  
 <span data-ttu-id="ec0a2-212">[Espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="ec0a2-212">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="ec0a2-213">Monitorando o espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ec0a2-213">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](monitoring-database-mirroring-sql-server.md)  
  
  
