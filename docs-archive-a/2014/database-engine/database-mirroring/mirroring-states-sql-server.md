---
title: Estados de espelhamento (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- states [SQL Server], database mirroring
- PENDING_FAILOVER state
- mirroring states [SQL Server]
- DISCONNECTED state
- SYNCHRONIZING state
- SYNCHRONIZED state
- SUSPENDED state
- database mirroring [SQL Server], states
ms.assetid: 90062917-74f9-471b-b49e-bc153ae1a468
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d458939ba233bdfe7a99edd38afc74b5433ae061
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87570199"
---
# <a name="mirroring-states-sql-server"></a><span data-ttu-id="233a4-102">Estados de espelhamento (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="233a4-102">Mirroring States (SQL Server)</span></span>
  <span data-ttu-id="233a4-103">Durante uma sessão de espelhamento de banco de dados, o banco de dados espelho está sempre em um estado específico (o *estado de espelhamento*).</span><span class="sxs-lookup"><span data-stu-id="233a4-103">During a database mirroring session, the mirrored database is always in a specific state (the *mirroring state*).</span></span> <span data-ttu-id="233a4-104">O estado do banco de dados reflete o status de comunicação, o fluxo de dados e a diferença nos dados entre os parceiros.</span><span class="sxs-lookup"><span data-stu-id="233a4-104">The state of the database reflects the communication status, data flow, and the difference in data between the partners.</span></span> <span data-ttu-id="233a4-105">A sessão de espelhamento de banco de dados adota o mesmo estado que o banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="233a4-105">The database mirroring session adopts the same state as the principal database.</span></span>  
  
 <span data-ttu-id="233a4-106">Ao longo de uma sessão de espelhamento de banco de dados, as instâncias de servidor monitoram umas às outras.</span><span class="sxs-lookup"><span data-stu-id="233a4-106">Throughout a database mirroring session, the server instances monitor each other.</span></span> <span data-ttu-id="233a4-107">Os parceiros usam o estado de espelhamento para monitorar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="233a4-107">The partners use the mirroring state to monitor the database.</span></span> <span data-ttu-id="233a4-108">Com exceção do estado PENDING_FAILOVER, os bancos de dados principal e espelho estão sempre no mesmo estado.</span><span class="sxs-lookup"><span data-stu-id="233a4-108">With the exception of the PENDING_FAILOVER state, the principal and mirror database are always in the same state.</span></span> <span data-ttu-id="233a4-109">Se uma testemunha for definida para a sessão, cada parceiro monitorará a testemunha que usar seu estado de conexão (CONNECTED ou DISCONNECTED).</span><span class="sxs-lookup"><span data-stu-id="233a4-109">If a witness is set for the session, each of the partners monitors the witness using its connection state (CONNECTED or DISCONNECTED).</span></span>  
  
 <span data-ttu-id="233a4-110">Os estados possíveis de espelhamento de banco de dados são:</span><span class="sxs-lookup"><span data-stu-id="233a4-110">The possible mirroring states of the database are as follows:</span></span>  
  
|<span data-ttu-id="233a4-111">estado de espelhamento</span><span class="sxs-lookup"><span data-stu-id="233a4-111">Mirroring state</span></span>|<span data-ttu-id="233a4-112">Descrição</span><span class="sxs-lookup"><span data-stu-id="233a4-112">Description</span></span>|  
|---------------------|-----------------|  
|<span data-ttu-id="233a4-113">SYNCHRONIZING</span><span class="sxs-lookup"><span data-stu-id="233a4-113">SYNCHRONIZING</span></span>|<span data-ttu-id="233a4-114">O conteúdo do banco de dados espelho está ficando atrás do conteúdo do banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="233a4-114">The contents of the mirror database are lagging behind the contents of the principal database.</span></span> <span data-ttu-id="233a4-115">O servidor principal está enviando registros de log para o servidor espelho, que está aplicando as alterações ao banco de dados espelho para rolá-lo adiante.</span><span class="sxs-lookup"><span data-stu-id="233a4-115">The principal server is sending log records to the mirror server, which is applying the changes to the mirror database to roll it forward.</span></span><br /><br /> <span data-ttu-id="233a4-116">No início de uma sessão de espelhamento de banco de dados, o banco de dados está no estado SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="233a4-116">At the start of a database mirroring session, the database is in the SYNCHRONIZING state.</span></span> <span data-ttu-id="233a4-117">O servidor principal está servindo o banco de dados e o espelho está tentando manter-se atualizado.</span><span class="sxs-lookup"><span data-stu-id="233a4-117">The principal server is serving the database, and the mirror is trying to catch up.</span></span>|  
|<span data-ttu-id="233a4-118">SYNCHRONIZED</span><span class="sxs-lookup"><span data-stu-id="233a4-118">SYNCHRONIZED</span></span>|<span data-ttu-id="233a4-119">Quando o servidor espelho torna-se suficientemente atualizado com relação ao servidor principal, o estado de espelhamento muda para SYNCHRONIZED.</span><span class="sxs-lookup"><span data-stu-id="233a4-119">When the mirror server becomes sufficiently caught up to the principal server, the mirroring state changes to SYNCHRONIZED.</span></span> <span data-ttu-id="233a4-120">O banco de dados permanece nesse estado enquanto o servidor principal continua enviando alterações para o servidor espelho e o servidor espelho continua aplicando as alterações ao banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="233a4-120">The database remains in this state as long as the principal server continues to send changes to the mirror server and the mirror server continues to apply changes to the mirror database.</span></span><br /><br /> <span data-ttu-id="233a4-121">Se a segurança da transação for definida como FULL, suporte ao failover automático e ao failover manual no estado SYNCHRONIZED, não haverá perda de dados após um failover.</span><span class="sxs-lookup"><span data-stu-id="233a4-121">If transaction safety is set to FULLautomatic failover and manual failover are both supported in the SYNCHRONIZED state, there is no data loss after a failover.</span></span><br /><br /> <span data-ttu-id="233a4-122">Se a segurança da transação for off, sempre será possível alguma perda de dados, mesmo no estado SYNCHRONIZED.</span><span class="sxs-lookup"><span data-stu-id="233a4-122">If transaction safety is off, some data loss is always possible, even in the SYNCHRONIZED state.</span></span>|  
|<span data-ttu-id="233a4-123">SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="233a4-123">SUSPENDED</span></span>|<span data-ttu-id="233a4-124">A cópia espelhada do banco de dados não está disponível.</span><span class="sxs-lookup"><span data-stu-id="233a4-124">The mirror copy of the database is not available.</span></span> <span data-ttu-id="233a4-125">O banco de dados principal está sendo executado sem enviar nenhum log ao servidor espelho, uma condição conhecida como *execução exposta*.</span><span class="sxs-lookup"><span data-stu-id="233a4-125">The principal database is running without sending any logs to the mirror server, a condition known as *running exposed*.</span></span> <span data-ttu-id="233a4-126">Esse é o estado após um failover.</span><span class="sxs-lookup"><span data-stu-id="233a4-126">This is the state after a failover.</span></span><br /><br /> <span data-ttu-id="233a4-127">Uma sessão também pode se tornar SUSPENDED como resultado de erros de reversão ou se o administrador pausar a sessão.</span><span class="sxs-lookup"><span data-stu-id="233a4-127">A session can also become SUSPENDED as a result of redo errors or if the administrator pauses the session.</span></span><br /><br /> <span data-ttu-id="233a4-128">SUSPENDED é um estado persistente que sobrevive a desligamentos e inicializações do parceiro.</span><span class="sxs-lookup"><span data-stu-id="233a4-128">SUSPENDED is a persistent state that survives partner shutdowns and startups.</span></span>|  
|<span data-ttu-id="233a4-129">PENDING_FAILOVER</span><span class="sxs-lookup"><span data-stu-id="233a4-129">PENDING_FAILOVER</span></span>|<span data-ttu-id="233a4-130">Esse estado é encontrado apenas no servidor principal após um failover ter começado, mas o servidor não tiver feito a transição para a função espelho.</span><span class="sxs-lookup"><span data-stu-id="233a4-130">This state is found only on the principal server after a failover has begun, but the server has not transitioned into the mirror role.</span></span><br /><br /> <span data-ttu-id="233a4-131">Quando o failover é iniciado, o banco de dados principal vai para o estado PENDING_FAILOVER, termina rapidamente quaisquer conexões de usuário e assume em seguida a função espelho.</span><span class="sxs-lookup"><span data-stu-id="233a4-131">When the failover is initiated, the principal database goes into the PENDING_FAILOVER state, quickly terminates any user connections, and takes over the mirror role soon thereafter.</span></span>|  
|<span data-ttu-id="233a4-132">DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="233a4-132">DISCONNECTED</span></span>|<span data-ttu-id="233a4-133">O parceiro perdeu comunicação com o outro parceiro.</span><span class="sxs-lookup"><span data-stu-id="233a4-133">The partner has lost communication with the other partner.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="233a4-134">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="233a4-134">See Also</span></span>  
 [<span data-ttu-id="233a4-135">Monitorando o espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="233a4-135">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](database-mirroring-sql-server.md)  
  
  
