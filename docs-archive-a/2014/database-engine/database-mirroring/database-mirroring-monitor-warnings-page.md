---
title: Monitor de Espelhamento de Banco de Dados (página Avisos) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87685935"
---
# <a name="database-mirroring-monitor-warnings-page"></a><span data-ttu-id="d458c-102">Monitor de Espelhamento de Banco de Dados (página Avisos)</span><span class="sxs-lookup"><span data-stu-id="d458c-102">Database Mirroring Monitor (Warnings Page)</span></span>
  <span data-ttu-id="d458c-103">Exibe uma lista somente leitura de avisos com suporte em eventos de espelhamento de banco de dados e dos valores limite de aviso especificados, se houver.</span><span class="sxs-lookup"><span data-stu-id="d458c-103">Displays a read-only list of warnings supported on database mirroring events and the specified warning threshold values, if available.</span></span>  
  
 <span data-ttu-id="d458c-104">**Para usar o SQL Server Management Studio para monitorar o espelhamento de banco de dados**</span><span class="sxs-lookup"><span data-stu-id="d458c-104">**To use SQL Server Management Studio to monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="d458c-105">Iniciar o Monitor de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d458c-105">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a><span data-ttu-id="d458c-106">Colunas</span><span class="sxs-lookup"><span data-stu-id="d458c-106">Columns</span></span>  
 <span data-ttu-id="d458c-107">**Aviso**</span><span class="sxs-lookup"><span data-stu-id="d458c-107">**Warning**</span></span>  
 <span data-ttu-id="d458c-108">Os avisos para os quais é possível definir limite incluem:</span><span class="sxs-lookup"><span data-stu-id="d458c-108">The warnings for which you can define a threshold include:</span></span>  
  
|<span data-ttu-id="d458c-109">Aviso</span><span class="sxs-lookup"><span data-stu-id="d458c-109">Warning</span></span>|<span data-ttu-id="d458c-110">Limite</span><span class="sxs-lookup"><span data-stu-id="d458c-110">Threshold</span></span>|  
|-------------|---------------|  
|<span data-ttu-id="d458c-111">**Avisar se o log não enviado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-111">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="d458c-112">Especifica quantos quilobytes (KB) de logs não enviados gerarão um aviso na instância principal do servidor.</span><span class="sxs-lookup"><span data-stu-id="d458c-112">Specifies how many kilobytes (KB) of unsent log will generate a warning on the principal server instance.</span></span> <span data-ttu-id="d458c-113">Esse aviso ajuda a medir o potencial de perda de dados em termos de KB e é particularmente relevante para o modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="d458c-113">This warning helps measure the potential for data loss in terms of KB, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="d458c-114">No entanto, o aviso também é relevante para o modo de segurança alta, quando o espelhamento é pausado ou suspenso devido à desconexão dos parceiros.</span><span class="sxs-lookup"><span data-stu-id="d458c-114">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="d458c-115">**Avisar se o log não restaurado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-115">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="d458c-116">Especifica quantos KB de log não restaurado gerarão um aviso na instância do servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="d458c-116">Specifies how many KB of unrestored log will generate a warning on the mirror server instance.</span></span> <span data-ttu-id="d458c-117">Esse aviso é útil para medir o período do failover em termos de quilobytes.</span><span class="sxs-lookup"><span data-stu-id="d458c-117">This warning is useful for measuring failover time in terms of kilobytes.</span></span> <span data-ttu-id="d458c-118">*Tempo de failover* consiste, essencialmente, no tempo necessário para que o servidor espelho anterior efetue o roll-forward de quaisquer logs restantes em sua fila de restauração, mais um pequeno tempo adicional.</span><span class="sxs-lookup"><span data-stu-id="d458c-118">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="d458c-119">Observação: Em um failover automático, o tempo necessário para que o sistema observe o erro é independente do período do failover.</span><span class="sxs-lookup"><span data-stu-id="d458c-119">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="d458c-120">Para obter mais informações, veja [Estime a interrupção do serviço durante troca de função &#40;Espelhamento de Banco de Dados&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="d458c-120">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|  
|<span data-ttu-id="d458c-121">**Avisar se a idade da transação não enviada mais antiga exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-121">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="d458c-122">Especifica o número de minutos de transações que podem ser acumuladas na fila de envio, antes da geração de um aviso na instância do servidor principal.</span><span class="sxs-lookup"><span data-stu-id="d458c-122">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="d458c-123">Esse aviso ajuda a medir o potencial de perda de dados em termos de tempo, sendo particularmente relevante para o modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="d458c-123">This warning helps measure the potential for data loss in terms of time, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="d458c-124">No entanto, o aviso também é relevante para o modo de segurança alta, quando o espelhamento é pausado ou suspenso devido à desconexão dos parceiros.</span><span class="sxs-lookup"><span data-stu-id="d458c-124">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="d458c-125">**Avisar se a sobrecarga espelhada confirmada exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-125">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="d458c-126">Especifica o número de milissegundos de espera em média, por transação, tolerado antes da geração de um aviso no servidor principal.</span><span class="sxs-lookup"><span data-stu-id="d458c-126">Specifies the number of milliseconds of average delay per transaction tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="d458c-127">Esse atraso consiste na quantidade de sobrecarga incidente enquanto a instância do servidor principal aguarda que a instância do servidor espelho grave o registro do log da transação na fila de restauração.</span><span class="sxs-lookup"><span data-stu-id="d458c-127">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="d458c-128">Esse valor é relevante somente no modo de alta segurança.</span><span class="sxs-lookup"><span data-stu-id="d458c-128">This value is relevant only in high-safety mode.</span></span>|  
  
 <span data-ttu-id="d458c-129">**Limite em '** _<server_instance>_ **'**</span><span class="sxs-lookup"><span data-stu-id="d458c-129">**Threshold at '** _<server_instance>_ **'**</span></span>  
 <span data-ttu-id="d458c-130">Para cada um dos avisos, exibe o limite especificado pelo usuário atual, se houver, para uma das instâncias de servidor.</span><span class="sxs-lookup"><span data-stu-id="d458c-130">For each of the warnings, displays the current user-specified threshold, if any, for one of the server instances.</span></span> <span data-ttu-id="d458c-131">O nome da instância completa da instância de servidor é indicado no título de coluna correspondente.</span><span class="sxs-lookup"><span data-stu-id="d458c-131">The full instance name of the server instance is indicated in the corresponding column heading.</span></span>  
  
 <span data-ttu-id="d458c-132">Para obter mais informações, consulte "Comentários", mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d458c-132">For more information, see "Remarks," later in this topic.</span></span>  
  
 <span data-ttu-id="d458c-133">**Definir Limites**</span><span class="sxs-lookup"><span data-stu-id="d458c-133">**Set Thresholds**</span></span>  
 <span data-ttu-id="d458c-134">Clique neste botão para definir um limite para um aviso em cada um dos parceiros de failover.</span><span class="sxs-lookup"><span data-stu-id="d458c-134">Click this button to set a threshold for one warning on each of the failover partners.</span></span>  
  
 <span data-ttu-id="d458c-135">Para obter mais informações, consulte "Comentários", mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d458c-135">For more information, see "Remarks," later in this topic.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="d458c-136">Comentários</span><span class="sxs-lookup"><span data-stu-id="d458c-136">Remarks</span></span>  
 <span data-ttu-id="d458c-137">Se informações relativas a uma instância de servidor estiverem presentemente indisponíveis, as células da coluna **Limite em** correspondentes serão exibidas em plano de fundo cinza e texto marca d’água.</span><span class="sxs-lookup"><span data-stu-id="d458c-137">If information is currently unavailable for a server instance, the cells of the corresponding **Threshold at** column display a gray background and watermark text.</span></span> <span data-ttu-id="d458c-138">Se o monitor não estiver conectado à instância do servidor, em todas as células a grade exibirá **Não conectado a** _<SYSTEM_NAME>_ ou **Não conectado a** _<SYSTEM_NAME>_ **\\** _<instance_name>_ , dependendo se a instância é padrão ou nomeada.</span><span class="sxs-lookup"><span data-stu-id="d458c-138">If the monitor is not connected to the server instance, in every cell the grid displays either **Not connected to** _<SYSTEM_NAME>_ or **Not connected to** _<SYSTEM_NAME>_**\\**_<instance_name>_, depending on whether the instance is the default instance or a named instance.</span></span> <span data-ttu-id="d458c-139">Se o monitor estiver esperando por uma consulta para retornar, a grade exibirá **Aguardando dados…** em todas as células.</span><span class="sxs-lookup"><span data-stu-id="d458c-139">If the monitor is waiting for a query to return, the grid displays **Waiting for data...** in every cell.</span></span>  
  
 <span data-ttu-id="d458c-140">Quando houver informações disponíveis, a célula de cada aviso exibirá um valor limite especificado (e unidade de medida), ou **Não habilitado**.</span><span class="sxs-lookup"><span data-stu-id="d458c-140">When information is available, the cell for each warning displays either a specified threshold value (and unit of measurement), or **Not enabled**.</span></span>  
  
 <span data-ttu-id="d458c-141">Se um limite se exceder no momento da atualização da tabela de status, será registrado um evento no log de eventos do Windows no momento do registro da linha de status.</span><span class="sxs-lookup"><span data-stu-id="d458c-141">If a threshold is exceeded at the time the status table is refreshed, an event is logged to the Windows event log when the status row is recorded.</span></span> <span data-ttu-id="d458c-142">Por padrão, a linha de status será registrada uma vez por minuto se o monitor não estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="d458c-142">By default, the status row is recorded once a minute if the monitor is not running.</span></span> <span data-ttu-id="d458c-143">Você pode configurar um alerta em cada tipo de evento registrado usando o SQL Server Agent ou outro programa, como o MOM (Microsoft Management Operations Administrador).</span><span class="sxs-lookup"><span data-stu-id="d458c-143">You can configure an alert on each type of logged event by using the SQL Server Agent or another program, such as Microsoft Management Operations Manager (MOM).</span></span>  
  
 <span data-ttu-id="d458c-144">Em um determinado parceiro, os eventos registrados dependem de sua função atual, principal ou espelho.</span><span class="sxs-lookup"><span data-stu-id="d458c-144">On a given partner, the events logged depend on its current role, principal or mirror.</span></span> <span data-ttu-id="d458c-145">Porém, é recomendado que se defina um limite de avisos para um evento específico em ambos os parceiros, para assegurar que o aviso persista caso o banco de dados apresente failover.</span><span class="sxs-lookup"><span data-stu-id="d458c-145">However, we recommend that you set a warning threshold for a given event on both partners to ensure that the warning persists if the database fails over.</span></span> <span data-ttu-id="d458c-146">O limite adequado para cada parceiro depende das capacidades de desempenho o sistema daquele parceiro.</span><span class="sxs-lookup"><span data-stu-id="d458c-146">The appropriate threshold for each partner depends on the performance capabilities of that partner's system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d458c-147">Você também pode usar o procedimento armazenado de sistema **sp_dbmmonitorchangealert** para configurar limites para os eventos equivalentes, ou seja, log não enviado, log não restaurado, transação não enviada mais antiga e sobrecarga de confirmação no espelho.</span><span class="sxs-lookup"><span data-stu-id="d458c-147">You can also use the **sp_dbmmonitorchangealert** system stored procedure to configure thresholds for the equivalent events-unsent log, unrecovered log, oldest unsent transaction, and mirror commit overhead.</span></span> <span data-ttu-id="d458c-148">Para obter mais informações, consulte [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d458c-148">For more information, see [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span></span>  
  
 <span data-ttu-id="d458c-149">A tabela a seguir mostra a ID de evento associada a cada um dos avisos.</span><span class="sxs-lookup"><span data-stu-id="d458c-149">The following table shows the event ID associated with each warning.</span></span>  
  
|<span data-ttu-id="d458c-150">Aviso do Monitor de Espelhamento de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="d458c-150">Database Mirroring Monitor warning</span></span>|<span data-ttu-id="d458c-151">Nome do evento</span><span class="sxs-lookup"><span data-stu-id="d458c-151">Event name</span></span>|<span data-ttu-id="d458c-152">ID do evento</span><span class="sxs-lookup"><span data-stu-id="d458c-152">Event ID</span></span>|  
|----------------------------------------|----------------|--------------|  
|<span data-ttu-id="d458c-153">**Avisar se o log não enviado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-153">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="d458c-154">Log não enviado</span><span class="sxs-lookup"><span data-stu-id="d458c-154">Unsent log</span></span>|<span data-ttu-id="d458c-155">32042</span><span class="sxs-lookup"><span data-stu-id="d458c-155">32042</span></span>|  
|<span data-ttu-id="d458c-156">**Avisar se o log não restaurado exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-156">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="d458c-157">Log não restaurado</span><span class="sxs-lookup"><span data-stu-id="d458c-157">Unrestored log</span></span>|<span data-ttu-id="d458c-158">32043</span><span class="sxs-lookup"><span data-stu-id="d458c-158">32043</span></span>|  
|<span data-ttu-id="d458c-159">**Avisar se a idade da transação não enviada mais antiga exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-159">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="d458c-160">Transação não enviada mais antiga</span><span class="sxs-lookup"><span data-stu-id="d458c-160">Oldest unsent transaction</span></span>|<span data-ttu-id="d458c-161">32044</span><span class="sxs-lookup"><span data-stu-id="d458c-161">32044</span></span>|  
|<span data-ttu-id="d458c-162">**Avisar se a sobrecarga espelhada confirmada exceder o limite**</span><span class="sxs-lookup"><span data-stu-id="d458c-162">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="d458c-163">Sobrecarga espelhada confirmada</span><span class="sxs-lookup"><span data-stu-id="d458c-163">Mirror commit overhead</span></span>|<span data-ttu-id="d458c-164">32045</span><span class="sxs-lookup"><span data-stu-id="d458c-164">32045</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="d458c-165">Permissões</span><span class="sxs-lookup"><span data-stu-id="d458c-165">Permissions</span></span>  
 <span data-ttu-id="d458c-166">Para acesso completo, é necessária a associação na função de servidor fixa **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="d458c-166">For full access, requires membership in the **sysadmin** fixed server role.</span></span> <span data-ttu-id="d458c-167">Só os membros de **sysadmin** podem configurar e exibir limites de aviso para métrica de desempenho de chave.</span><span class="sxs-lookup"><span data-stu-id="d458c-167">Only members of **sysadmin** can configure and view warning thresholds for key performance metrics.</span></span>  
  
 <span data-ttu-id="d458c-168">A associação na função **de dbm_monitor** só permite a exibição da linha de status mais recente na página **Avisos** .</span><span class="sxs-lookup"><span data-stu-id="d458c-168">Membership in the **dbm_monitor** role enables you to view only the most recent status row on the **Warnings** Page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d458c-169">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="d458c-169">See Also</span></span>  
 <span data-ttu-id="d458c-170">[Iniciar o Monitor de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="d458c-170">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="d458c-171">[Monitorando o espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="d458c-171">[Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="d458c-172">Iniciar o Assistente para Configurar Segurança de Espelhamento de Banco de Dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d458c-172">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
