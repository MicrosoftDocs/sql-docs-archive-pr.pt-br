---
title: Troca de função durante uma sessão de espelhamento de banco de dados (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- role switching [SQL Server]
- mirroring partners [SQL Server]
- failover [SQL Server]
- failover partners [SQL Server]
- database mirroring [SQL Server], partners
- partners in database mirroring sessions [SQL Server]
- failover [SQL Server], database mirroring
- database mirroring [SQL Server], failover
ms.assetid: a782d60d-0373-4386-bd77-9ec192553700
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 5e16adbad2106d623279edf9d443eae3755c7be5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87681150"
---
# <a name="role-switching-during-a-database-mirroring-session-sql-server"></a><span data-ttu-id="29f67-102">Troca de função durante uma sessão de espelhamento de banco de dados (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="29f67-102">Role Switching During a Database Mirroring Session (SQL Server)</span></span>
  <span data-ttu-id="29f67-103">No contexto da sessão de espelhamento de banco de dados, as funções principal e espelho podem ser, normalmente, alternadas em um processo conhecido como *troca de função*.</span><span class="sxs-lookup"><span data-stu-id="29f67-103">Within the context of a database mirroring session, the principal and mirror roles are typically interchangeable in a process known as *role switching*.</span></span> <span data-ttu-id="29f67-104">Na troca de função, o servidor espelho age como o *parceiro de failover* do servidor principal, assumindo a função principal, recuperando a cópia do banco de dados e colocando-a online como novo banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-104">In role switching, the mirror server acts as the *failover partner* for the principal server, taking over the principal role, recovering its copy of the database and bringing it online as the new principal database.</span></span> <span data-ttu-id="29f67-105">O antigo servidor principal, quando disponível, assume a função espelho e seu banco de dados se torna o novo banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-105">The former principal server, when available, assumes the mirror role, and its database becomes the new mirror database.</span></span> <span data-ttu-id="29f67-106">Potencialmente, as funções podem ser alternadas como resposta a várias falhas ou por razões administrativas.</span><span class="sxs-lookup"><span data-stu-id="29f67-106">Potentially, the roles can switch back and forth either in response to multiple failures or for administrative purposes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="29f67-107">Este tópico pressupõe que você esteja familiarizado com os modos operacionais de espelhamento de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-107">This topic assumes that you are familiar with the database mirroring operating modes.</span></span> <span data-ttu-id="29f67-108">Para obter mais informações, consulte [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-108">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="29f67-109">A ilustração a seguir mostra os parceiros de espelhamento, **Partner_A** e **Partner_B**, trocando as funções principal e espelho através de diversos failovers automáticos ou manuais.</span><span class="sxs-lookup"><span data-stu-id="29f67-109">The following illustration shows mirroring partners, **Partner_A** and **Partner_B**, switching the principal and mirror roles over a series of automatic or manual failovers.</span></span>  
  
 <span data-ttu-id="29f67-110">![Parceiros que alternam duas vezes entre as funções](../media/dbm-roleswitching.gif "Parceiros que alternam duas vezes entre as funções")</span><span class="sxs-lookup"><span data-stu-id="29f67-110">![Partners switching twice between roles](../media/dbm-roleswitching.gif "Partners switching twice between roles")</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="29f67-111">Após a troca de função, os trabalhos executados no antigo banco de dados principal devem ser recriados no servidor principal novo para que lá sejam executados.</span><span class="sxs-lookup"><span data-stu-id="29f67-111">After a role switch, jobs that ran on the former principal database must be recreated on the new principal server to run there.</span></span> <span data-ttu-id="29f67-112">Para obter mais informações, veja [Administração de logons e trabalhos após a troca de funções &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-112">For more information, see [Management of Logins and Jobs After Role Switching &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span></span>  
  
 <span data-ttu-id="29f67-113">Há três tipos de troca de função: failover automático, failover manual e serviço forçado (com possível perda de dados).</span><span class="sxs-lookup"><span data-stu-id="29f67-113">Three types of role switching exist: automatic failover, manual failover, and forced service (with possible data loss).</span></span> <span data-ttu-id="29f67-114">O suporte para cada tipo depende do modo operacional da sessão.</span><span class="sxs-lookup"><span data-stu-id="29f67-114">Support for each form depends on the operating mode of the session.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="29f67-115">Se você não estiver familiarizado com esses modos de operação, veja [Modos de operação do Espelhamento de Banco de Dados](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-115">If you are unfamiliar with these operating modes, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
-   <span data-ttu-id="29f67-116">**Failover manual**</span><span class="sxs-lookup"><span data-stu-id="29f67-116">**Manual failover**</span></span>  
  
     <span data-ttu-id="29f67-117">O modo de segurança alta oferece suporte ao failover manual.</span><span class="sxs-lookup"><span data-stu-id="29f67-117">High-safety mode supports manual failover.</span></span> <span data-ttu-id="29f67-118">Sempre que o banco de dados for sincronizado, o proprietário do banco de dados poderá iniciar um failover manual.</span><span class="sxs-lookup"><span data-stu-id="29f67-118">Whenever the database is synchronized, the database owner can initiate a manual failover.</span></span>  
  
     <span data-ttu-id="29f67-119">O failover manual é fornecido por questões administrativas.</span><span class="sxs-lookup"><span data-stu-id="29f67-119">Manual failover is provided for administrative purposes.</span></span> <span data-ttu-id="29f67-120">Para obter mais informações, veja [Failover Manual](#ManualFailover), mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="29f67-120">For more information, see [Manual Failover](#ManualFailover), later in this topic.</span></span>  
  
-   <span data-ttu-id="29f67-121">**Automatic failover**</span><span class="sxs-lookup"><span data-stu-id="29f67-121">**Automatic failover**</span></span>  
  
     <span data-ttu-id="29f67-122">Na presença de uma testemunha, o modo de segurança alta oferece suporte ao failover automático.</span><span class="sxs-lookup"><span data-stu-id="29f67-122">In the presence of a witness, high-safety mode supports automatic failover.</span></span> <span data-ttu-id="29f67-123">O failover automático somente ocorre no servidor principal, quando a testemunha e o servidor espelho ainda estão conectados entre si e o banco de dados já está sincronizado.</span><span class="sxs-lookup"><span data-stu-id="29f67-123">Automatic failover occurs only on the loss of the principal server when the witness and mirror server are still connected to each other and the database is already synchronized.</span></span> <span data-ttu-id="29f67-124">Para obter mais informações, veja [Failover Automático](#AutomaticFailover), mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="29f67-124">For more information, see [Automatic Failover](#AutomaticFailover), later in this topic.</span></span>  
  
-   <span data-ttu-id="29f67-125">**Serviço forçado (com possível perda de dados)**</span><span class="sxs-lookup"><span data-stu-id="29f67-125">**Forced service (with possible data loss)**</span></span>  
  
     <span data-ttu-id="29f67-126">Há suporte ao recurso de forçar serviço no modo de segurança alta, quando nenhuma testemunha é definida, e no modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="29f67-126">Forcing service is supported in high-safety mode when no witness is set and in high-performance mode.</span></span> <span data-ttu-id="29f67-127">Se houver perda do servidor principal, o proprietário do banco de dados poderá disponibilizar o banco de dados ao forçar o serviço para o servidor espelho (com possível perda de dados).</span><span class="sxs-lookup"><span data-stu-id="29f67-127">On the loss of the principal server, the database owner can make the database available by forcing service to the mirror server (with possible data loss).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-128">Nós recomendamos que a propriedade WITNESS seja definida como OFF no modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="29f67-128">We recommend that the WITNESS property be set to OFF in high-performance mode.</span></span> <span data-ttu-id="29f67-129">Caso contrário, para colocar o banco de dados online, o servidor espelho deverá ser conectado à testemunha.</span><span class="sxs-lookup"><span data-stu-id="29f67-129">Otherwise, to bring the database online, the mirror server must connected to the witness.</span></span>  
  
     <span data-ttu-id="29f67-130">Para obter mais informações, veja [Serviço forçado (com possível perda de dados)](#ForcedService), mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="29f67-130">For more information, see [Forced Service (with Possible Data Loss)](#ForcedService), later in this topic.</span></span>  
  
 <span data-ttu-id="29f67-131">A tabela a seguir resume as formas de failover com suporte em cada um dos modos operacionais.</span><span class="sxs-lookup"><span data-stu-id="29f67-131">The following table summarizes which forms of failover are supported under each of the operating modes.</span></span>  
  
||<span data-ttu-id="29f67-132">Alto desempenho</span><span class="sxs-lookup"><span data-stu-id="29f67-132">High performance</span></span>|<span data-ttu-id="29f67-133">Modo de segurança alta sem testemunha</span><span class="sxs-lookup"><span data-stu-id="29f67-133">High-safety mode without a witness</span></span>|<span data-ttu-id="29f67-134">Modo de segurança alta com testemunha</span><span class="sxs-lookup"><span data-stu-id="29f67-134">High-safety mode with a witness</span></span>|  
|-|----------------------|-----------------------------------------|--------------------------------------|  
|<span data-ttu-id="29f67-135">failover automático</span><span class="sxs-lookup"><span data-stu-id="29f67-135">Automatic failover</span></span>|<span data-ttu-id="29f67-136">Não</span><span class="sxs-lookup"><span data-stu-id="29f67-136">No</span></span>|<span data-ttu-id="29f67-137">Não</span><span class="sxs-lookup"><span data-stu-id="29f67-137">No</span></span>|<span data-ttu-id="29f67-138">Sim</span><span class="sxs-lookup"><span data-stu-id="29f67-138">Yes</span></span>|  
|<span data-ttu-id="29f67-139">Failover manual</span><span class="sxs-lookup"><span data-stu-id="29f67-139">Manual failover</span></span>|<span data-ttu-id="29f67-140">Não</span><span class="sxs-lookup"><span data-stu-id="29f67-140">No</span></span>|<span data-ttu-id="29f67-141">Sim</span><span class="sxs-lookup"><span data-stu-id="29f67-141">Yes</span></span>|<span data-ttu-id="29f67-142">Sim</span><span class="sxs-lookup"><span data-stu-id="29f67-142">Yes</span></span>|  
|<span data-ttu-id="29f67-143">Serviço forçado</span><span class="sxs-lookup"><span data-stu-id="29f67-143">Forced service</span></span>|<span data-ttu-id="29f67-144">Sim</span><span class="sxs-lookup"><span data-stu-id="29f67-144">Yes</span></span>|<span data-ttu-id="29f67-145">Sim</span><span class="sxs-lookup"><span data-stu-id="29f67-145">Yes</span></span>|<span data-ttu-id="29f67-146">Não</span><span class="sxs-lookup"><span data-stu-id="29f67-146">No</span></span>|  
  
 <span data-ttu-id="29f67-147">Após a troca de função, metadados específicos precisam estar presentes em ambos os parceiros para garantir que todos os usuários dos bancos de dados possam acessar o novo banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-147">After a role switch, certain metadata must exist on both partners to ensure that all of the database users can access the new principal database.</span></span> <span data-ttu-id="29f67-148">Além disso, os trabalhos de backup precisam ser criados no servidor principal novo, para garantir que o banco de dados continue a ser armazenado no cronograma habitual.</span><span class="sxs-lookup"><span data-stu-id="29f67-148">In addition, backup jobs must be created on the new principal server, to ensure that the database continues to be backed up on its regular schedule.</span></span> <span data-ttu-id="29f67-149">Para obter mais informações, veja [Administração de logons e trabalhos após a troca de funções &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-149">For more information, see [Management of Logins and Jobs After Role Switching &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span></span>  
  
 <span data-ttu-id="29f67-150">Durante a troca de função, a quantidade de tempo que o espelhamento de banco de dados ficará fora de serviço depende do tipo de troca de função e da causa da troca de função.</span><span class="sxs-lookup"><span data-stu-id="29f67-150">During a role switch, the amount of time that database mirroring will be out of service depends on the type of role switching and on the cause.</span></span> <span data-ttu-id="29f67-151">Para obter mais informações, veja [Estime a interrupção do serviço durante troca de função &#40;Espelhamento de Banco de Dados&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-151">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>  
  
##  <a name="manual-failover"></a><a name="ManualFailover"></a> <span data-ttu-id="29f67-152">Manual Failover</span><span class="sxs-lookup"><span data-stu-id="29f67-152">Manual Failover</span></span>  
 <span data-ttu-id="29f67-153">O failover manual desconecta os clientes do banco de dados e reverte as funções dos parceiros.</span><span class="sxs-lookup"><span data-stu-id="29f67-153">Manual failover disconnects the clients from the database and reverses the roles of the partners.</span></span> <span data-ttu-id="29f67-154">Apenas o modo de alta segurança oferece suporte ao failover manual.</span><span class="sxs-lookup"><span data-stu-id="29f67-154">Only high-safety mode supports manual failover.</span></span>  
  
  
###  <a name="maintaining-availability-during-upgrades"></a><a name="AvailabilityDuringUpgrades"></a> <span data-ttu-id="29f67-155">Mantendo a disponibilidade durante as atualizações</span><span class="sxs-lookup"><span data-stu-id="29f67-155">Maintaining Availability During Upgrades</span></span>  
 <span data-ttu-id="29f67-156">O administrador de banco de dados pode usar o failover manual para atualizar o hardware ou o software sem sacrificar a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="29f67-156">The database administrator can use manual failover for upgrading hardware or software without sacrificing availability.</span></span> <span data-ttu-id="29f67-157">Para usar o espelhamento de banco de dados para atualizações de software, o servidor e/ou sistema espelho já deverá ter recebido as atualizações.</span><span class="sxs-lookup"><span data-stu-id="29f67-157">To use database mirroring for software upgrades, the mirror server and/or system must have already received the upgrades.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="29f67-158">O espelhamento de banco de dados deve ser capaz de fazer uma atualização sem-interrupção, mas isso não é garantido, porque as alterações futuras são desconhecidas.</span><span class="sxs-lookup"><span data-stu-id="29f67-158">Database mirroring should be able to do a rolling upgrade, but this is not guaranteed, because future changes are unknown.</span></span> <span data-ttu-id="29f67-159">Para obter mais informações, consulte [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-159">For more information, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md).</span></span>  
  
 <span data-ttu-id="29f67-160">A figura a seguir ilustra uma instância do uso do failover manual para manter a disponibilidade de banco de dados enquanto você atualiza uma instância de servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-160">The following figure illustrates an instance of using manual failover to maintain database availability while you upgrade a database server instance.</span></span> <span data-ttu-id="29f67-161">Quando a atualização é concluída, um administrador pode, opcionalmente, fazer failover de volta para a instância de servidor original.</span><span class="sxs-lookup"><span data-stu-id="29f67-161">When the upgrade is completed, an administrator may optionally fail over back to the original server instance.</span></span> <span data-ttu-id="29f67-162">Isso é útil quando o administrador deseja interromper a sessão de espelhamento e usar o servidor espelho em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="29f67-162">This is useful when the administrator wants to stop the mirroring session and use the mirror server elsewhere.</span></span> <span data-ttu-id="29f67-163">Dessa forma, uma única instância de servidor pode ser usada repetidamente ao atualizar uma série de instâncias de servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-163">In this way, a single server instance can be used repeatedly when updating a series of database server instances.</span></span>  
  
 <span data-ttu-id="29f67-164">![Failover manual planejado](../media/dbm-failovmanuplanned.gif "Failover manual planejado")</span><span class="sxs-lookup"><span data-stu-id="29f67-164">![Planned manual failover](../media/dbm-failovmanuplanned.gif "Planned manual failover")</span></span>  
  
###  <a name="conditions-required-for-a-manual-failover"></a><a name="ConditionsForManualFo"></a> <span data-ttu-id="29f67-165">Condições exigidas para um failover manual</span><span class="sxs-lookup"><span data-stu-id="29f67-165">Conditions Required for a Manual Failover</span></span>  
 <span data-ttu-id="29f67-166">O failover manual exige que a segurança da transação seja definida como FULL (ou seja, modo de alta segurança).</span><span class="sxs-lookup"><span data-stu-id="29f67-166">Manual failover requires transaction safety to be set to FULL (that is, high-safety mode).</span></span> <span data-ttu-id="29f67-167">Quando os parceiros estão conectados e o banco de dados já está sincronizado, há suporte ao failover manual.</span><span class="sxs-lookup"><span data-stu-id="29f67-167">When the partners are connected and the database is already synchronized, manual failover is supported.</span></span>  
  
###  <a name="how-manual-failover-works"></a><a name="HowManualFoWorks"></a> <span data-ttu-id="29f67-168">Como o failover manual funciona</span><span class="sxs-lookup"><span data-stu-id="29f67-168">How Manual Failover Works</span></span>  
 <span data-ttu-id="29f67-169">O failover manual inicia a seguinte sequência de ações:</span><span class="sxs-lookup"><span data-stu-id="29f67-169">Manual failover initiates the following sequence of actions:</span></span>  
  
1.  <span data-ttu-id="29f67-170">O servidor principal desconecta clientes do banco de dados principal, envia a parte final do log ao servidor espelho e, na preparação para alternar para a função espelho, define o estado de espelhamento como SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="29f67-170">The principal server disconnects clients from the principal database, sends the tail of the log to the mirror server, and, in preparation for switching to the mirror role, sets the mirroring state to SYNCHRONIZING.</span></span>  
  
2.  <span data-ttu-id="29f67-171">O servidor espelho registra o LSN (número de sequência de log) do último registro de log recebido do principal como o LSN do failover.</span><span class="sxs-lookup"><span data-stu-id="29f67-171">The mirror server records the log sequence number (LSN) of the last log record received from the principal as the failover LSN.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-172">Para exibir esse LSN, selecione a coluna **mirroring_failover_lsn** de [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="29f67-172">To view this LSN, select the **mirroring_failover_lsn** column from [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
3.  <span data-ttu-id="29f67-173">Se algum log estiver esperando na fila de restauração, o servidor espelho concluirá o roll forward do banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-173">If any log is waiting in the redo queue, the mirror server finishes rolling forward the mirror database.</span></span> <span data-ttu-id="29f67-174">A quantidade de tempo exigida depende da velocidade do sistema, da carga de trabalho recente e da quantidade de log na fila de restauração.</span><span class="sxs-lookup"><span data-stu-id="29f67-174">The amount of time required depends on the speed of the system, the recent workload, and the amount of log in the redo queue.</span></span> <span data-ttu-id="29f67-175">Para um modo operacional síncrono, o tempo de failover pode ser regulado limitando o tamanho da fila de restauração.</span><span class="sxs-lookup"><span data-stu-id="29f67-175">For a synchronous operating mode, the failover time can be regulated by limiting the size of the redo queue.</span></span> <span data-ttu-id="29f67-176">Porém, isso pode reduzir a velocidade do servidor principal para permitir que o servidor espelho seja mantido.</span><span class="sxs-lookup"><span data-stu-id="29f67-176">However, this can cause the principal server to slow down to allow the mirror server to keep up.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-177">Para saber o tamanho atual da fila de restauração, use o contador de desempenho **Fila de Restauração** do objeto de desempenho do espelhamento de banco de dados (para obter mais informações, veja [Monitorando o espelhamento de banco de dados &#40;SQL Server&#41;](database-mirroring-sql-server.md)).</span><span class="sxs-lookup"><span data-stu-id="29f67-177">To learn the current size of the redo queue, use the **Redo Queue** performance counter in the database mirroring performance object (for more information, see [Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md)).</span></span>  
  
4.  <span data-ttu-id="29f67-178">O servidor espelho se torna o servidor principal, e o servidor principal anterior se torna o novo servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-178">The mirror server becomes the new principal server, and the former principal server becomes the new mirror server.</span></span>  
  
5.  <span data-ttu-id="29f67-179">O novo servidor principal reverte qualquer transação não confirmada e usa sua cópia do banco de dados online como o banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-179">The new principal server rolls back any uncommitted transactions and brings its copy of the database online as the principal database.</span></span>  
  
6.  <span data-ttu-id="29f67-180">O servidor principal anterior assume a função de espelho, e o banco de dados principal anterior se torna o banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-180">The former principal takes on the mirror role, and the former principal database becomes the mirror database.</span></span> <span data-ttu-id="29f67-181">O novo servidor espelho rapidamente faz nova sincronização do novo banco de dados espelho com o novo banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-181">The new mirror server quickly resynchronizes the new mirror database with the new principal database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-182">Assim que o servidor espelho novo tiver sincronizado novamente os bancos de dados, o failover será novamente possível, mas na direção inversa.</span><span class="sxs-lookup"><span data-stu-id="29f67-182">As soon as the new mirror server has resynchronized the databases, failover is again possible, but in the reverse direction.</span></span>  
  
 <span data-ttu-id="29f67-183">Após o failover, os clientes devem se reconectar ao banco de dados principal atual.</span><span class="sxs-lookup"><span data-stu-id="29f67-183">After failover, clients must reconnect to the current principal database.</span></span> <span data-ttu-id="29f67-184">Para obter mais informações, consulte [Conectar clientes a uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-184">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
 <span data-ttu-id="29f67-185">**Para iniciar o failover manual**</span><span class="sxs-lookup"><span data-stu-id="29f67-185">**To initiate manual failover**</span></span>  
  
-   [<span data-ttu-id="29f67-186">Executar failover manualmente de uma sessão de espelhamento de banco de dados &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-186">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
-   <span data-ttu-id="29f67-187">[Executar failover manualmente em uma sessão de espelhamento de banco de dados &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-187">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
##  <a name="automatic-failover"></a><a name="AutomaticFailover"></a> <span data-ttu-id="29f67-188">Automatic Failover</span><span class="sxs-lookup"><span data-stu-id="29f67-188">Automatic Failover</span></span>  
 <span data-ttu-id="29f67-189">Há suporte para o failover automático somente em sessões de espelhamento de banco de dados executadas com uma testemunha em modo de segurança alta (*modo de segurança alta com failover automático*).</span><span class="sxs-lookup"><span data-stu-id="29f67-189">Automatic failover is supported only in database mirroring sessions running with a witness in high-safety mode (*high-safety mode with automatic failover*).</span></span> <span data-ttu-id="29f67-190">No modo de segurança alta com failover automático, depois de sincronizado o banco de dados, se o banco de dados principal ficar indisponível, ocorrerá um failover automático.</span><span class="sxs-lookup"><span data-stu-id="29f67-190">In high-safety mode with automatic failover, once the database is synchronized, if the principal database becomes unavailable, an automatic failover occurs.</span></span> <span data-ttu-id="29f67-191">Um failover automático faz com que o servidor espelho assuma a função de servidor principal e torne sua cópia do banco de dados online como o banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-191">An automatic failover causes the mirror server to take over the role of principal server and bring its copy of the database online as the principal database.</span></span> <span data-ttu-id="29f67-192">A exigência de sincronização do banco de dados evita a perda de dados durante o failover, pois toda transação confirmada no banco de dados principal também está confirmada no banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-192">Requiring that the database be synchronized prevents data loss during failover, because every transaction committed on the principal database is also committed on the mirror database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="29f67-193">Para o failover automático melhorar a confiabilidade, o espelho e os bancos de dados principais devem residir em computadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="29f67-193">For automatic failover to improve reliability, the mirror and principal databases must reside on different computers.</span></span>  
  
  
  
###  <a name="conditions-required-for-an-automatic-failover"></a><a name="ConditionsForAutoFo"></a> <span data-ttu-id="29f67-194">Condições exigidas para um failover automático</span><span class="sxs-lookup"><span data-stu-id="29f67-194">Conditions Required for an Automatic Failover</span></span>  
 <span data-ttu-id="29f67-195">O failover automático exige as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="29f67-195">Automatic failover requires the following conditions:</span></span>  
  
-   <span data-ttu-id="29f67-196">A sessão de espelhamento de banco de dados deve ser executada em modo de segurança alta e deve possuir uma testemunha.</span><span class="sxs-lookup"><span data-stu-id="29f67-196">The database mirroring session must be running in high-safety mode and must possess a witness.</span></span> <span data-ttu-id="29f67-197">Para obter mais informações, consulte [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-197">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
-   <span data-ttu-id="29f67-198">O banco de dados espelho já deve estar sincronizado.</span><span class="sxs-lookup"><span data-stu-id="29f67-198">The mirror database must already be synchronized.</span></span> <span data-ttu-id="29f67-199">Isso garante que todo o conteúdo do log enviado ao servidor espelho foi gravado no disco.</span><span class="sxs-lookup"><span data-stu-id="29f67-199">This guarantees that all of the log sent to the mirror server has been written to disk.</span></span>  
  
-   <span data-ttu-id="29f67-200">O servidor principal perdeu comunicação com o restante da configuração de espelhamento de banco de dados, enquanto o espelho e a testemunha retêm quorum.</span><span class="sxs-lookup"><span data-stu-id="29f67-200">The principal server has lost communication with the rest of the database mirroring configuration, while the mirror and witness retain quorum.</span></span> <span data-ttu-id="29f67-201">Entretanto, se todas as instâncias de servidor perderem comunicação, e a testemunha e o servidor espelho recuperarem comunicação posteriormente, não ocorrerá failover automático.</span><span class="sxs-lookup"><span data-stu-id="29f67-201">If all server instances lose communication, however, and the witness and the mirror server later regain communication, automatic failover does not occur.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-202">Para obter mais informações, confira [Quorum: Como uma testemunha afeta a disponibilidade do banco de dados &#40;Espelhamento de Banco de Dados&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-202">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="29f67-203">O servidor espelho detectou a perda do servidor principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-203">The mirror server has detected the loss of the principal server.</span></span>  
  
     <span data-ttu-id="29f67-204">A forma como o servidor espelho detecta uma falha do servidor principal depende do tipo de falha: rígida ou suave.</span><span class="sxs-lookup"><span data-stu-id="29f67-204">How the mirror server detects a failure of the principal server depends on whether it is a hard or soft failure.</span></span> <span data-ttu-id="29f67-205">Para obter mais informações, veja [Possíveis falhas durante o espelhamento de banco de dados](possible-failures-during-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-205">For more information, see [Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md).</span></span>  
  
###  <a name="how-automatic-failover-works"></a><a name="HowAutoFoWorks"></a> <span data-ttu-id="29f67-206">Como o failover automático funciona</span><span class="sxs-lookup"><span data-stu-id="29f67-206">How Automatic Failover Works</span></span>  
 <span data-ttu-id="29f67-207">Nas condições anteriores, o failover automático inicia a seguinte sequência de ações:</span><span class="sxs-lookup"><span data-stu-id="29f67-207">Under the preceding conditions, automatic failover initiates the following sequence of actions:</span></span>  
  
1.  <span data-ttu-id="29f67-208">Se o servidor principal ainda estiver em execução, o estado do banco de dados principal será alterado para DISCONNECTED e todos os clientes do banco de dados principal serão desconectados.</span><span class="sxs-lookup"><span data-stu-id="29f67-208">If the principal server is still running, it changes the state of the principal database to DISCONNECTED and disconnects all clients from the principal database.</span></span>  
  
2.  <span data-ttu-id="29f67-209">A testemunha e os servidores espelho registram que o servidor principal está indisponível.</span><span class="sxs-lookup"><span data-stu-id="29f67-209">The witness and mirror servers register that the principal server is unavailable.</span></span>  
  
3.  <span data-ttu-id="29f67-210">Se algum log estiver esperando na fila de restauração, o servidor espelho concluirá o roll forward do banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-210">If any log is waiting in the redo queue, the mirror server finishes rolling forward the mirror database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-211">A quantidade de tempo exigida para aplicar o log depende da velocidade do sistema, da carga de trabalho recente e da quantidade de log na fila de restauração.</span><span class="sxs-lookup"><span data-stu-id="29f67-211">The amount of time required to apply the log depends on the speed of the system, the recent work load, and the amount of log in the redo queue.</span></span>  
  
4.  <span data-ttu-id="29f67-212">O banco de dados espelho anterior é movimentado online como o novo banco de dados principal, e a recuperação limpa todas as transações não confirmadas revertendo-as o mais depressa possível.</span><span class="sxs-lookup"><span data-stu-id="29f67-212">The former mirror database moves online as the new principal database, and recovery cleans up all uncommitted transactions by rolling them back as quickly as possible.</span></span> <span data-ttu-id="29f67-213">Os bloqueios isolam essas transações.</span><span class="sxs-lookup"><span data-stu-id="29f67-213">Locks isolate those transactions.</span></span>  
  
5.  <span data-ttu-id="29f67-214">Quando o servidor principal anterior retomar a sessão, ele reconhecerá que agora seu parceiro de failover possui a função principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-214">When the former principal server rejoins the session, it recognizes that its failover partner now owns the principal role.</span></span> <span data-ttu-id="29f67-215">O servidor principal anterior assume a função de espelho, tornando seu banco de dados o banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-215">The former principal server takes on the role of mirror, making its database the mirror database.</span></span> <span data-ttu-id="29f67-216">O novo servidor espelho sincroniza o banco de dados espelho novo com o banco de dados principal o mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="29f67-216">The new mirror server synchronizes the new mirror database with the principal database as quickly as possible.</span></span> <span data-ttu-id="29f67-217">Assim que o servidor espelho novo tiver sincronizado novamente os bancos de dados, o failover será novamente possível, mas na direção inversa.</span><span class="sxs-lookup"><span data-stu-id="29f67-217">As soon as the new mirror server has resynchronized the databases, failover is again possible, but in the reverse direction.</span></span>  
  
 <span data-ttu-id="29f67-218">A ilustração a seguir mostra uma única instância de failover automático.</span><span class="sxs-lookup"><span data-stu-id="29f67-218">The following illustration shows a single instance of automatic failover.</span></span>  
  
 <span data-ttu-id="29f67-219">![Automatic failover](../media/dbm-failovauto1round.gif "failover automático")</span><span class="sxs-lookup"><span data-stu-id="29f67-219">![Automatic failover](../media/dbm-failovauto1round.gif "Automatic failover")</span></span>  
  
 <span data-ttu-id="29f67-220">Inicialmente, todos os três servidores estão conectados (a sessão tem quorum completo).</span><span class="sxs-lookup"><span data-stu-id="29f67-220">Initially, all three servers are connected (the session has full quorum).</span></span> <span data-ttu-id="29f67-221">**Partner_A** é o servidor principal e **Partner_B** é o servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-221">**Partner_A** is the principal server and **Partner_B** is the mirror server.</span></span> <span data-ttu-id="29f67-222">**Partner_A** (ou o banco de dados principal em **Partner_A**) torna-se indisponível.</span><span class="sxs-lookup"><span data-stu-id="29f67-222">**Partner_A** (or the principal database on **Partner_A**) becomes unavailable.</span></span> <span data-ttu-id="29f67-223">A testemunha e **Partner_B** reconhecem que o principal não está mais disponível na sessão que retém quorum.</span><span class="sxs-lookup"><span data-stu-id="29f67-223">The witness and **Partner_B** both recognize that the principal is no longer available the session retains quorum.</span></span> <span data-ttu-id="29f67-224">**Partner_B** se torna o servidor principal e disponibiliza sua cópia do banco de dados como o novo banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-224">**Partner_B** becomes the principal server and makes its copy of the database available as the new principal database.</span></span> <span data-ttu-id="29f67-225">Por fim, o **Partner_A** se reconecta à sessão e descobre que agora o **Partner_B** possui a função principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-225">Eventually, **Partner_A** reconnects to the session and discovers that **Partner_B** now owns the principal role.</span></span> <span data-ttu-id="29f67-226">**Partner_A** assume a função de espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-226">**Partner_A** then takes on the mirror role.</span></span>  
  
 <span data-ttu-id="29f67-227">Após o failover, os clientes devem se reconectar ao banco de dados principal atual.</span><span class="sxs-lookup"><span data-stu-id="29f67-227">After failover, clients must reconnect to the current principal database.</span></span> <span data-ttu-id="29f67-228">Para obter mais informações, consulte [Conectar clientes a uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-228">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="29f67-229">As transações que foram preparadas usando o Coordenador de Transações Distribuídas da [!INCLUDE[msCoName](../../includes/msconame-md.md)] , mas que ainda não estiverem confirmadas quando ocorrer um failover, serão consideradas anuladas depois da falha do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-229">Transactions that have been prepared using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Distributed Transaction Coordinator but are still not committed when a failover occurs, are considered aborted after the database has failed over.</span></span>  
  
###  <a name="to-disable-automatic-failover-sql-server-management-studio"></a><a name="DisableAutoSSMS"></a> <span data-ttu-id="29f67-230">Para desabilitar failover automático (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="29f67-230">To Disable Automatic Failover (SQL Server Management Studio)</span></span>  
 <span data-ttu-id="29f67-231">Abra a página **Espelhamento das Propriedades do Banco de Dados** e altere o modo de operação, selecionando uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="29f67-231">Open the **Database PropertiesMirroring** page, and change the operating mode by selecting one of the following options:</span></span>  
  
-   <span data-ttu-id="29f67-232">**Alta segurança sem failover automático (síncrono)**</span><span class="sxs-lookup"><span data-stu-id="29f67-232">**High safety without automatic failover (synchronous)**</span></span>  
  
     <span data-ttu-id="29f67-233">Nesse modo, o banco de dados continua sendo sincronizado, e o failover manual continua sendo possível.</span><span class="sxs-lookup"><span data-stu-id="29f67-233">In this mode, the database continues to be synchronized, and manual failover remains possible.</span></span>  
  
-   <span data-ttu-id="29f67-234">**Alto desempenho (assíncrono)**</span><span class="sxs-lookup"><span data-stu-id="29f67-234">**High performance (asynchronous)**</span></span>  
  
     <span data-ttu-id="29f67-235">Nesse modo, o banco de dados espelho pode ficar um pouco atrasado em relação ao banco de dados principal, e o failover manual não seria mais possível.</span><span class="sxs-lookup"><span data-stu-id="29f67-235">In this mode, the mirror database might lag somewhat behind the principal database, and manual failover is no longer possible.</span></span>  
  
### <a name="to-disable-automatic-failover-using-transact-sql"></a><span data-ttu-id="29f67-236">Para desabilitar o failover automático (usando o Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="29f67-236">To Disable Automatic Failover (Using Transact-SQL)</span></span>  
 <span data-ttu-id="29f67-237">Em qualquer momento da sessão de espelhamento de banco de dados, o proprietário de banco de dados pode desabilitar o failover automático desativando a testemunha.</span><span class="sxs-lookup"><span data-stu-id="29f67-237">At any point in a database mirroring session, the database owner can disable automatic failover by turning off the witness.</span></span>  
  
 <span data-ttu-id="29f67-238">**Para desativar a testemunha**</span><span class="sxs-lookup"><span data-stu-id="29f67-238">**To turn off the witness**</span></span>  
  
-   [<span data-ttu-id="29f67-239">Remover a testemunha de uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-239">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
    > [!NOTE]  
    >  <span data-ttu-id="29f67-240">A desativação da testemunha enquanto retém a segurança de transação completa faz com que a sessão fique em modo de segurança alta sem failover automático.</span><span class="sxs-lookup"><span data-stu-id="29f67-240">Turning off the witness while retaining full transaction safety puts the session into high-safety mode without automatic failover.</span></span>  
  
##  <a name="forced-service-with-possible-data-loss"></a><a name="ForcedService"></a> <span data-ttu-id="29f67-241">Forced Service (with Possible Data Loss)</span><span class="sxs-lookup"><span data-stu-id="29f67-241">Forced Service (with Possible Data Loss)</span></span>  
 <span data-ttu-id="29f67-242">O espelhamento de banco de dados permite forçar o serviço (com possível perda de dados) como método de recuperação de desastres, para permitir o uso de um servidor espelho como servidor em espera passiva.</span><span class="sxs-lookup"><span data-stu-id="29f67-242">Database mirroring provides forcing service (with possible data loss) as a disaster recovery method to allow you to use a mirror server as a warm standby server.</span></span> <span data-ttu-id="29f67-243">Só é possível forçar o serviço se o servidor principal estiver desconectado do servidor espelho em uma sessão de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="29f67-243">Forcing service is possible only if the principal server is disconnected from the mirror server in a mirroring session.</span></span> <span data-ttu-id="29f67-244">Já que forçar o serviço pode ocasionar a perda de dados, esse recurso deve ser usado de forma cautelosa e moderada.</span><span class="sxs-lookup"><span data-stu-id="29f67-244">Because forcing service risks possible data loss, it should be used cautiously and sparingly.</span></span>  
  
 <span data-ttu-id="29f67-245">O suporte para o serviço forçado depende do modo operacional e do estado da sessão, conforme a seguir:</span><span class="sxs-lookup"><span data-stu-id="29f67-245">Support for forced service depends on the operating mode and the state of the session, as follows:</span></span>  
  
-   <span data-ttu-id="29f67-246">Normalmente, o modo de alto desempenho oferecerá suporte ao serviço forçado sempre que o servidor principal estiver desconectado.</span><span class="sxs-lookup"><span data-stu-id="29f67-246">Typically, high-performance mode supports forcing service whenever the principal server is disconnected.</span></span> <span data-ttu-id="29f67-247">Entretanto, embora não seja necessário, pode haver uma testemunha para a sessão de modo de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="29f67-247">However, though unnecessary, a witness can exist for a high-performance mode session.</span></span> <span data-ttu-id="29f67-248">Nesse caso, para forçar o serviço é preciso que o servidor espelho e a testemunha estejam conectados entre si.</span><span class="sxs-lookup"><span data-stu-id="29f67-248">In this case, forcing service requires that the mirror server and witness are connected to each other.</span></span>  
  
-   <span data-ttu-id="29f67-249">O modo de segurança alta sem failover automático oferecerá suporte ao recurso para forçar serviço sempre que o servidor principal estiver desconectado.</span><span class="sxs-lookup"><span data-stu-id="29f67-249">High-safety mode without automatic failover supports forcing service whenever the principal server is disconnected.</span></span>  
  
-   <span data-ttu-id="29f67-250">O modo de segurança alta com failover automático oferece suporte ao forçamento do serviço sempre que o servidor espelho e a testemunha estiverem conectados entre si e nenhum dos dois estiver conectado ao servidor principal (contanto que o servidor espelho não esteja no processo de reversão do banco de dados espelho quando foi conectado ao principal pela última vez).</span><span class="sxs-lookup"><span data-stu-id="29f67-250">High-safety mode with automatic failover supports forcing service whenever the mirror server and witness are connected to each other and neither is connected to the principal server (as long as the mirror server was not in the process of rolling back the mirror database when it was last connected to the principal).</span></span>  
  
 <span data-ttu-id="29f67-251">Recomendamos que o serviço seja forçado somente se for preciso restaurar imediatamente o serviço para o banco de dados e se estiver disposto a perder dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-251">We recommend forcing service only if you must restore service to the database immediately and are willing to risk losing data.</span></span> <span data-ttu-id="29f67-252">O efeito do forçamento do serviço é similar à remoção de espelhamento, com exceção de que o forçamento do serviço facilitará a resincronização dos bancos de dados quando o espelhamento for reiniciado, com o risco de perda de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-252">The effect of forcing service is similar to removing mirroring, except that forcing service facilitates resynchronizing the databases when mirroring is resumed, at the risk of possible data loss.</span></span> <span data-ttu-id="29f67-253">Forçar o serviço inicia uma transição uniforme da função principal para o banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-253">Forcing service initiates a smooth transition of the principal role to the mirror database.</span></span> <span data-ttu-id="29f67-254">O servidor espelho assume a função de servidor principal e, imediatamente, serve sua cópia do banco de dados a clientes.</span><span class="sxs-lookup"><span data-stu-id="29f67-254">The mirror server assumes the role of principal server and immediately serves its copy of the database to clients.</span></span> <span data-ttu-id="29f67-255">O novo banco de dados principal é executado sem um espelho (ou seja, é executado exposto).</span><span class="sxs-lookup"><span data-stu-id="29f67-255">The new principal database runs without a mirror (that is, it runs exposed).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="29f67-256">Se o servidor principal foi simplesmente desconectado da sessão de espelhamento de banco de dados e ainda estiver em execução, alguns clientes poderão continuar acessando o banco de dados principal original.</span><span class="sxs-lookup"><span data-stu-id="29f67-256">If the principal server was merely disconnected from the database mirroring session and is still running, some clients might continue to access the original principal database.</span></span> <span data-ttu-id="29f67-257">Antes de forçar o serviço, é importante impedir que os clientes acessem o servidor principal original.</span><span class="sxs-lookup"><span data-stu-id="29f67-257">Before you force service, it is important to prevent clients from accessing the original principal server.</span></span> <span data-ttu-id="29f67-258">Caso contrário, depois que o serviço for forçado, o banco de dados principal original e o banco de dados principal atual poderão ser atualizados de forma independente.</span><span class="sxs-lookup"><span data-stu-id="29f67-258">Otherwise, after service is forced, the original principal database and the current principal database could be updated independently of the other.</span></span>  
  
  
  
###  <a name="typical-case-of-forced-service"></a><a name="TypicalCaseFS"></a> <span data-ttu-id="29f67-259">Casos comuns de serviço forçado</span><span class="sxs-lookup"><span data-stu-id="29f67-259">Typical Case of Forced Service</span></span>  
 <span data-ttu-id="29f67-260">A figura a seguir ilustra um caso comum de serviço forçado (com possível perda de dados).</span><span class="sxs-lookup"><span data-stu-id="29f67-260">The following figure illustrates a typical case of forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="29f67-261">![Serviço forçado com possível perda de dados](../media/dbm-forced-service.gif "Serviço forçado com possível perda de dados")</span><span class="sxs-lookup"><span data-stu-id="29f67-261">![Forcing service with possible data loss](../media/dbm-forced-service.gif "Forcing service with possible data loss")</span></span>  
  
 <span data-ttu-id="29f67-262">Na figura, o servidor principal original, **Partner_A**, torna-se indisponível para o servidor espelho, **Partner_B**, fazendo com que o banco de dados espelho seja desconectado.</span><span class="sxs-lookup"><span data-stu-id="29f67-262">In the figure, the original principal server, **Partner_A**, becomes unavailable to the mirror server, **Partner_B**, causing the mirror database to be disconnected.</span></span> <span data-ttu-id="29f67-263">Depois de garantir que **Partner_A** não está disponível aos clientes, o administrador do banco de dados força o serviço, com possível perda de dados, no **Partner_B**.</span><span class="sxs-lookup"><span data-stu-id="29f67-263">After ensuring that **Partner_A** is not available to clients, the database administrator forces service, with possible data loss, on **Partner_B**.</span></span> <span data-ttu-id="29f67-264">**Partner_B** se torna o servidor principal e é executado com o banco de dados *exposto* (ou seja, sem estar espelhado).</span><span class="sxs-lookup"><span data-stu-id="29f67-264">**Partner_B** becomes the principal server and runs with the database *exposed* (that is, unmirrored).</span></span> <span data-ttu-id="29f67-265">Nesse momento, os clientes podem se reconectar ao **Partner_B**.</span><span class="sxs-lookup"><span data-stu-id="29f67-265">At this point, clients can reconnect to **Partner_B**.</span></span>  
  
 <span data-ttu-id="29f67-266">Quando **Partner_A** se torna disponível, ele se reconecta ao novo servidor principal, associando-se novamente à sessão e assumindo a função espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-266">When **Partner_A** becomes available, it reconnects to the new principal server, rejoining the session and assuming the mirror role.</span></span> <span data-ttu-id="29f67-267">A sessão de espelhamento fica imediatamente suspensa, sem sincronizar o novo banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-267">The mirroring session is suspended immediately, without having synchronized the new mirror database.</span></span> <span data-ttu-id="29f67-268">A suspensão da sessão permite que o administrador do banco de dados decida retomar a sessão ou, em casos extremos, remover e tentar recuperar os dados do antigo banco de dados principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-268">Suspending the session allows the database administrator to decide whether to resume the session or, in extreme cases, remove mirroring and attempt to salvage data from the former principal database.</span></span> <span data-ttu-id="29f67-269">Nesse caso, o administrador do banco de dados escolhe retomar o espelhamento.</span><span class="sxs-lookup"><span data-stu-id="29f67-269">In this case, the database administrator chooses to resume mirroring.</span></span> <span data-ttu-id="29f67-270">Nesse momento, o **Partner_A** assume a função de servidor espelho e reverte o antigo banco de dados principal no ponto específico da última transação sincronizada com êxito; se nenhuma transação confirmada foi gravada em disco no servidor espelho antes de o serviço ser forçado, essas transações são perdidas.</span><span class="sxs-lookup"><span data-stu-id="29f67-270">At that point, **Partner_A** takes over the role of mirror server and rolls back the former principal database to the point in time of the last successfully synchronized transaction; if any committed transactions were not written to disk on the mirror server before service was forced, they are lost.</span></span> <span data-ttu-id="29f67-271">Em seguida,**Partner_A** confirma o novo banco de dados espelho, aplicando as alterações feitas no novo banco de dados principal, já que o servidor espelho antigo tornou-se o novo servidor principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-271">**Partner_A** then rolls forward the new mirror database by applying any changes made on the new principal database since the former mirror server became the new principal server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="29f67-272">Embora o modo de alto desempenho não exija testemunhas, caso uma seja configurada, só será possível forçar o serviço se a testemunha estiver conectada ao servidor espelho no momento.</span><span class="sxs-lookup"><span data-stu-id="29f67-272">Although high-performance mode does not require a witness, if one is configured, forcing service is possible only if the witness is currently connected to the mirror server.</span></span>  
  
###  <a name="risks-of-forcing-service"></a><a name="FSrisks"></a> <span data-ttu-id="29f67-273">Riscos de forçar o serviço</span><span class="sxs-lookup"><span data-stu-id="29f67-273">Risks of Forcing Service</span></span>  
 <span data-ttu-id="29f67-274">É essencial compreender que forçar o serviço pode causar perda de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-274">It is essential to understand that forcing service can cause data loss.</span></span> <span data-ttu-id="29f67-275">É possível que haja perda de dados porque o servidor espelho não pode se comunicar com o servidor principal e, consequentemente, não pode garantir que os dois bancos de dados estejam sincronizados.</span><span class="sxs-lookup"><span data-stu-id="29f67-275">Data loss is possible because the mirror server cannot communicate with the principal server and, therefore, cannot guarantee that the two databases are synchronized.</span></span> <span data-ttu-id="29f67-276">O forçamento do serviço cria uma bifurcação da recuperação nova.</span><span class="sxs-lookup"><span data-stu-id="29f67-276">Forcing service starts a new recovery fork.</span></span> <span data-ttu-id="29f67-277">Já que o banco de dados principal original e o banco de dados espelho estão em bifurcações da recuperação diferentes, cada banco de dados contém agora os dados que o outro banco de dados não tem: o banco de dados principal original contém as alterações que ainda não foram enviadas da sua fila de envio para o antigo banco de dados espelho (o log que não foi enviado); o antigo banco de dados espelho contém as alterações feitas depois que o serviço foi forçado.</span><span class="sxs-lookup"><span data-stu-id="29f67-277">Because the original principal database and mirror database are on different recovery forks, each database now contains data that the other database does not: the original principal database contains whatever changes were not yet sent from its send queue to the former mirror database (the unsent log); the former mirror database contains whatever changes occur after service was forced.</span></span>  
  
 <span data-ttu-id="29f67-278">Se o serviço for forçado porque o servidor principal falhou, a perda potencial de dados dependerá se os logs de transação não foram enviado ao servidor espelho antes da ocorrência da falha.</span><span class="sxs-lookup"><span data-stu-id="29f67-278">If service is forced because the principal server has failed, potential data loss is depends on whether any transaction logs were not sent to the mirror server before the failure.</span></span> <span data-ttu-id="29f67-279">No modo de segurança alta, isso só é possível até que o banco de dados espelho esteja sincronizado.</span><span class="sxs-lookup"><span data-stu-id="29f67-279">Under high-safety mode, this is possible only until the mirror database becomes synchronized.</span></span> <span data-ttu-id="29f67-280">No modo de alto desempenho, o log não enviado acumulado é sempre uma possibilidade.</span><span class="sxs-lookup"><span data-stu-id="29f67-280">Under the high-performance mode, accumulated unsent log is always a possibility.</span></span>  
  
 <span data-ttu-id="29f67-281">As implicações de se forçar o serviço dependem, em parte, se a sessão tem uma testemunha:</span><span class="sxs-lookup"><span data-stu-id="29f67-281">The implications of forcing service depend partly on whether the session has a witness:</span></span>  
  
-   <span data-ttu-id="29f67-282">Na ausência de uma testemunha, o serviço poderá ser forçado se os parceiros forem desconectados, por exemplo, devido à interrupção na conexão de rede.</span><span class="sxs-lookup"><span data-stu-id="29f67-282">In the absence of a witness, service can be forced if the partners become disconnected, for example, because their network connection is broken.</span></span> <span data-ttu-id="29f67-283">Se o servidor principal original ainda estiver sendo executado, ambos os parceiros possuirão a função principal.</span><span class="sxs-lookup"><span data-stu-id="29f67-283">If the original principal server is still running, both partners own the principal role.</span></span> <span data-ttu-id="29f67-284">Os clientes conectados ao novo servidor principal acessarão a versão atual do banco de dados, enquanto os clientes conectados ao servidor principal original acessarão o banco de dados principal original.</span><span class="sxs-lookup"><span data-stu-id="29f67-284">Clients connecting to the new principal server will access the current version of the database, while clients connecting to the original principal server will access the original principal database.</span></span> <span data-ttu-id="29f67-285">Essa situação aumenta a possibilidade de perda de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-285">This situation increases the potential for data loss.</span></span> <span data-ttu-id="29f67-286">Se os parceiros puderem reconectar-se, o servidor principal original assume a função espelho e altera o estado do seu banco de dados para "recuperando", antes que o espelhamento seja suspenso.</span><span class="sxs-lookup"><span data-stu-id="29f67-286">If the partners are allowed to reconnect, the original principal server assumes the mirror role and changes the status of its database to "recovering," before mirroring is suspended.</span></span> <span data-ttu-id="29f67-287">Se a sessão for retomada, as transações no banco de dados principal original, cujo log estava na fila de envio na desconexão mais recente, serão perdidas.</span><span class="sxs-lookup"><span data-stu-id="29f67-287">If the session is resumed, transactions on the original principal database whose log was in the send queue as of the most recent disconnection are lost.</span></span> <span data-ttu-id="29f67-288">Além disso, todas as transações que ocorreram depois que o serviço foi forçado também serão perdidas.</span><span class="sxs-lookup"><span data-stu-id="29f67-288">In addition, any the transactions that occurred after service was forced are also lost.</span></span>  
  
-   <span data-ttu-id="29f67-289">Na presença de uma testemunha, se o servidor espelho estiver desconectado do servidor principal e da testemunha, contanto que os dois mais recentes permaneçam conectados entre si, o principal será executado exposto.</span><span class="sxs-lookup"><span data-stu-id="29f67-289">In the presence of a witness, if the mirror server is disconnected from both the principal server and the witness, as long as the latter two remain connected to each other, the principal runs exposed.</span></span> <span data-ttu-id="29f67-290">Em seguida, se o servidor principal for desconectado da testemunha, o serviço ao banco de dados será interrompido.</span><span class="sxs-lookup"><span data-stu-id="29f67-290">If the principal server then becomes disconnected from the witness, it stops serving the database.</span></span> <span data-ttu-id="29f67-291">Posteriormente, se o servidor espelho reconectar-se à testemunha, será possível forçar o serviço.</span><span class="sxs-lookup"><span data-stu-id="29f67-291">Thereafter, if the mirror server reconnects to the witness, forcing service becomes possible.</span></span> <span data-ttu-id="29f67-292">Se o serviço for forçado, todas as alterações feitas enquanto o servidor principal original estiver em execução serão perdidas caso o servidor principal original seja reconectado.</span><span class="sxs-lookup"><span data-stu-id="29f67-292">If service is forced, all the changes made while the original principal server was running exposed will be lost if the original principal server reconnects.</span></span>  
  
 <span data-ttu-id="29f67-293">Para obter mais informações, veja [Gerenciando a perda potencial de dados](#ManageDataLoss), mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="29f67-293">For more information, see [Managing the Potential Data Loss](#ManageDataLoss), later in this topic.</span></span>  
  
###  <a name="managing-the-potential-data-loss"></a><a name="ManageDataLoss"></a> <span data-ttu-id="29f67-294">Gerenciando a perda potencial de dados</span><span class="sxs-lookup"><span data-stu-id="29f67-294">Managing the Potential Data Loss</span></span>  
 <span data-ttu-id="29f67-295">Depois que o serviço é forçado, assim que o antigo servidor principal estiver disponível, pressupondo que o seu banco de dados não foi danificado, é possível tentar gerenciar a perda potencial de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-295">After service is forced, once the former principal server is available, assuming that its database is undamaged, you can attempt to manage the potential data loss.</span></span> <span data-ttu-id="29f67-296">A abordagem disponível para o gerenciamento da perda potencial de dados depende se o servidor principal original foi conectado ao seu parceiro e associado novamente à sessão de espelhamento.</span><span class="sxs-lookup"><span data-stu-id="29f67-296">The available approach for managing potential data loss depends on whether the original principal server has reconnected to its partner and rejoined the mirroring session.</span></span> <span data-ttu-id="29f67-297">Presumindo que o servidor principal original pode acessar a instância principal nova, a reconexão ocorre de forma automática e transparente.</span><span class="sxs-lookup"><span data-stu-id="29f67-297">Assuming that the original principal server can access the new principal instance, reconnecting occurs automatically and transparently.</span></span>  
  
#### <a name="the-original-principal-server-has-reconnected"></a><span data-ttu-id="29f67-298">O servidor principal original foi reconectado</span><span class="sxs-lookup"><span data-stu-id="29f67-298">The Original Principal Server Has Reconnected</span></span>  
 <span data-ttu-id="29f67-299">Normalmente, depois de uma falha, quando o servidor principal original reinicia, reconecta-se rapidamente ao seu parceiro.</span><span class="sxs-lookup"><span data-stu-id="29f67-299">Typically, after a failure, when the original principal server restarts it quickly reconnects to its partner.</span></span> <span data-ttu-id="29f67-300">Na reconexão, o servidor principal original se torna o servidor espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-300">On reconnecting, the original principal server becomes the mirror server.</span></span> <span data-ttu-id="29f67-301">Seu banco de dados se torna o banco de dados espelho e insere o estado recuperando antes de a sessão ser suspensa.</span><span class="sxs-lookup"><span data-stu-id="29f67-301">Its database becomes the mirror database and enters the recovering state before the session is suspended.</span></span> <span data-ttu-id="29f67-302">O banco de dados espelho não será revertido a menos que o espelhamento seja retomado.</span><span class="sxs-lookup"><span data-stu-id="29f67-302">The mirror database will not be not rolled back unless you resume mirroring.</span></span>  
  
 <span data-ttu-id="29f67-303">Entretanto, o banco de dados de recuperação não pode ser acessado, por isso, não é possível inspecioná-lo para avaliar os dados que seriam perdidos caso o espelhamento retomasse.</span><span class="sxs-lookup"><span data-stu-id="29f67-303">However, the recovering database is inaccessible; therefore, you cannot inspect it to evaluate what data would be lost if you were to resume mirroring.</span></span> <span data-ttu-id="29f67-304">Assim, a decisão de retomar ou remover o espelhamento depende se é aceitável a perda dos dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-304">Therefore, the decision on whether to resume or remove mirroring depends on whether you are willing to accept any data loss at all.</span></span>  
  
-   <span data-ttu-id="29f67-305">Se a perda dos dados for inaceitável, é necessário remover o espelhamento para resgatá-los.</span><span class="sxs-lookup"><span data-stu-id="29f67-305">If losing any data would be unacceptable, you should remove mirroring to salvage them.</span></span>  
  
     <span data-ttu-id="29f67-306">A remoção do espelhamento permitiria que os administradores de banco de dados recuperassem o banco de dados principal original e tentassem recuperar os dados perdidos.</span><span class="sxs-lookup"><span data-stu-id="29f67-306">Removing mirroring would allow the database administrator to recover the original principal database and attempt to recover the data that would have been lost.</span></span> <span data-ttu-id="29f67-307">Entretanto, quando o antigo banco de dados espelho fica online, os parceiros antigos estarão servindo bancos de dados divergentes com o mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="29f67-307">However, when the former mirror database comes online, the former partners will be serving divergent databases with the same name.</span></span> <span data-ttu-id="29f67-308">O administrador do banco de dados precisa tornar um dos bancos de dados inacessível aos clientes para evitar divergência posterior do banco de dados e para impedir problemas de failover do cliente.</span><span class="sxs-lookup"><span data-stu-id="29f67-308">The database administrator needs to make one of the databases inaccessible to clients to avoid further divergence of the database and to prevent client-failover issues.</span></span>  
  
-   <span data-ttu-id="29f67-309">Se perder todos dados for aceitável, será possível retomar o espelhamento.</span><span class="sxs-lookup"><span data-stu-id="29f67-309">If losing any data would be acceptable, you can resume mirroring.</span></span>  
  
     <span data-ttu-id="29f67-310">Continuar o espelhamento faz com que o banco de dados espelho novo seja revertido, conforme a primeira etapa da sincronização do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="29f67-310">Resuming mirroring causes the new mirror database to be rolled back as the first step in synchronizing the database.</span></span> <span data-ttu-id="29f67-311">Se houver registros de log aguardando na fila de envio no momento da falha, as transações correspondentes serão perdidas, mesmo se tiverem sido confirmadas.</span><span class="sxs-lookup"><span data-stu-id="29f67-311">If any log records were waiting in the send queue at the time of failure, the corresponding transactions are lost, even if they were committed.</span></span>  
  
#### <a name="the-original-principal-server-has-not-reconnected"></a><span data-ttu-id="29f67-312">O servidor principal original não foi reconectado</span><span class="sxs-lookup"><span data-stu-id="29f67-312">The Original Principal Server Has Not Reconnected</span></span>  
 <span data-ttu-id="29f67-313">Se for possível impedir temporariamente que o servidor principal original seja reconectado na rede ao servidor principal novo, você poderá inspecionar o banco de dados principal original para avaliar os dados que seriam perdidos caso o espelhamento retomasse.</span><span class="sxs-lookup"><span data-stu-id="29f67-313">If you can temporarily prevent the original principal server from reconnecting over the network to the new principal server, you can inspect the original principal database to evaluate what data would be lost if mirroring were resumed.</span></span>  
  
-   <span data-ttu-id="29f67-314">Se a perda potencial de dados for aceitável</span><span class="sxs-lookup"><span data-stu-id="29f67-314">If the potential data loss is acceptable</span></span>  
  
     <span data-ttu-id="29f67-315">Permita que o servidor principal original reconecte-se a seu parceiro.</span><span class="sxs-lookup"><span data-stu-id="29f67-315">Allow the original principal server to reconnect to its partner.</span></span> <span data-ttu-id="29f67-316">A reconexão faz com que o espelhamento seja suspenso.</span><span class="sxs-lookup"><span data-stu-id="29f67-316">Reconnecting causes mirroring to be suspended.</span></span> <span data-ttu-id="29f67-317">Para prosseguir com o espelhamento, simplesmente retome a sessão.</span><span class="sxs-lookup"><span data-stu-id="29f67-317">To proceed with mirroring, simply resume the session.</span></span> <span data-ttu-id="29f67-318">O antigo servidor principal assume a função de espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-318">The former principal server assumes the mirror role.</span></span> <span data-ttu-id="29f67-319">O servidor espelho novo libera a bifurcação de recuperação original, perdendo as transações que nunca foram enviadas ou recebidas pelo servidor espelho antigo.</span><span class="sxs-lookup"><span data-stu-id="29f67-319">The new mirror server drops the original recovery fork, losing any transactions that were never sent to or received by the former mirror server.</span></span>  
  
-   <span data-ttu-id="29f67-320">Se a perda de dados for inaceitável</span><span class="sxs-lookup"><span data-stu-id="29f67-320">If the data loss is unacceptable</span></span>  
  
     <span data-ttu-id="29f67-321">Se o banco de dados principal contiver dados críticos que seriam perdidos caso a sessão retomasse, será possível preservar os dados no servidor principal original, removendo o espelhamento.</span><span class="sxs-lookup"><span data-stu-id="29f67-321">If the original principal database contains critical data that would be lost if you resumed the session, you can preserve the data on the original principal server by removing mirroring.</span></span> <span data-ttu-id="29f67-322">Nós recomendamos que se tente fazer backup da parte final do log principal neste momento.</span><span class="sxs-lookup"><span data-stu-id="29f67-322">We recommend that you attempt to back up the tail of the principal's log at this point.</span></span> <span data-ttu-id="29f67-323">Em seguida, é possível atualizar o servidor principal atual (antigo banco de dados espelho) exportando os dados que devem ser recuperados do banco de dados principal original e importando-os para o banco de dados principal atual.</span><span class="sxs-lookup"><span data-stu-id="29f67-323">Then, you can update the current principal (the former mirror database) by exporting the data you want to salvage from the original principal database and importing it into the current principal database.</span></span> <span data-ttu-id="29f67-324">Recomendamos fazer um backup completo do banco de dados atualizado o mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="29f67-324">We recommend taking a full database backup of the updated database as quickly as possible.</span></span>  
  
     <span data-ttu-id="29f67-325">Para restabelecer o espelhamento com o banco de dados atualizado como banco de dados principal inicial, use esse backup (pelo menos, um backup de log subsequente) para criar um novo banco de dados espelho.</span><span class="sxs-lookup"><span data-stu-id="29f67-325">To re-establish mirroring with the updated database as the initial principal database, use this backup (and least one subsequent log backup) to create a new mirror database.</span></span> <span data-ttu-id="29f67-326">Todo backup de log feito depois que o espelhamento foi removido deve ser aplicado.</span><span class="sxs-lookup"><span data-stu-id="29f67-326">Every log backup taken after mirroring was removed must be applied.</span></span> <span data-ttu-id="29f67-327">Consequentemente, recomendamos que os backups de log adicionais do banco de dados principal sejam adiados até que a nova sessão de espelhamento seja iniciada.</span><span class="sxs-lookup"><span data-stu-id="29f67-327">Therefore, we recommend delaying additional log backups of the principal database until the new mirroring session starts.</span></span>  
  
###  <a name="related-tasks-for-managing-a-forced-failover"></a><a name="RelatedTasksForFS"></a> <span data-ttu-id="29f67-328">Tarefas relacionadas para gerenciar um failover forçado</span><span class="sxs-lookup"><span data-stu-id="29f67-328">Related Tasks For Managing a Forced Failover</span></span>  
 <span data-ttu-id="29f67-329">**Para forçar o serviço**</span><span class="sxs-lookup"><span data-stu-id="29f67-329">**To force service**</span></span>  
  
-   <span data-ttu-id="29f67-330">[Forçar serviço em uma sessão de espelhamento de banco de dados &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="29f67-330">[Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md).</span></span>  
  
 <span data-ttu-id="29f67-331">**Para retomar o espelhamento de banco de dados.**</span><span class="sxs-lookup"><span data-stu-id="29f67-331">**To resume database mirroring**</span></span>  
  
-   [<span data-ttu-id="29f67-332">Pausar ou retomar uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-332">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
 <span data-ttu-id="29f67-333">**Para criar um novo banco de dados espelho**</span><span class="sxs-lookup"><span data-stu-id="29f67-333">**To create a new mirror database**</span></span>  
  
 [<span data-ttu-id="29f67-334">Preparar um banco de dados espelho para espelhamento &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-334">Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;</span></span>](prepare-a-mirror-database-for-mirroring-sql-server.md)  
  
 <span data-ttu-id="29f67-335">**Para inicializar o espelhamento de banco de dados**</span><span class="sxs-lookup"><span data-stu-id="29f67-335">**To start up database mirroring**</span></span>  
  
-   [<span data-ttu-id="29f67-336">Configurando o espelhamento de banco de dados &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-336">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
  
-   [<span data-ttu-id="29f67-337">Estabelecer uma sessão de espelhamento de banco de dados usando a Autenticação do Windows &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-337">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
## <a name="see-also"></a><span data-ttu-id="29f67-338">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="29f67-338">See Also</span></span>  
 <span data-ttu-id="29f67-339">[Estimar a interrupção do serviço durante troca de função &#40;Espelhamento de Banco de Dados&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-339">[Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md) </span></span>  
 <span data-ttu-id="29f67-340">[Possíveis falhas durante o espelhamento de banco de dados](possible-failures-during-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-340">[Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md) </span></span>  
 <span data-ttu-id="29f67-341">[Conectar clientes a uma sessão de espelhamento de banco de dados &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-341">[Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="29f67-342">[Testemunha de espelhamento de banco de dados](database-mirroring-witness.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-342">[Database Mirroring Witness](database-mirroring-witness.md) </span></span>  
 <span data-ttu-id="29f67-343">[Restaurações completas de banco de dados &#40;Modelo de recuperação completa&#41;](../../relational-databases/backup-restore/complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-343">[Complete Database Restores &#40;Full Recovery Model&#41;](../../relational-databases/backup-restore/complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="29f67-344">[Modos de operação de espelhamento de banco de dados](database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="29f67-344">[Database Mirroring Operating Modes](database-mirroring-operating-modes.md) </span></span>  
 [<span data-ttu-id="29f67-345">Estados de espelhamento &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29f67-345">Mirroring States &#40;SQL Server&#41;</span></span>](mirroring-states-sql-server.md)  
  
  
