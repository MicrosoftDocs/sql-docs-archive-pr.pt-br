---
title: Fazer upgrade do Mecanismo de Banco de Dados | Microsoft Docs
ms.custom: ''
ms.date: 10/26/2015
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- compatibility [SQL Server], databases
- compatibility levels [SQL Server], after upgrade
- Database Engine [SQL Server], upgrading
ms.assetid: 3c036813-36cf-4415-a0c9-248d0a433859
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ed13712678ab599e55b539d6226142b686106fe5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87572165"
---
# <a name="upgrade-database-engine"></a><span data-ttu-id="3f2dd-102">Atualizar o Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="3f2dd-102">Upgrade Database Engine</span></span>
  <span data-ttu-id="3f2dd-103">Este tópico fornece as informações necessárias para preparar e entender o processo de atualização; ele abrange:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-103">This topic provides the information that you will need to prepare for and understand the upgrade process; it covers:</span></span>  
  
-   <span data-ttu-id="3f2dd-104">Problemas de atualização conhecidos.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-104">Known upgrade issues.</span></span>  
  
-   <span data-ttu-id="3f2dd-105">Tarefas e considerações da pré-atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-105">Pre-upgrade tasks and considerations.</span></span>  
  
-   <span data-ttu-id="3f2dd-106">Links para tópicos de procedimento para a atualização do [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-106">Links to procedural topics for upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="3f2dd-107">Links para tópicos de procedimento para a migração de bancos de dados para o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-107">Links to procedural topics for migrating databases to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="3f2dd-108">Considerações sobre agrupamentos de failover.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-108">Considerations for failover clusters.</span></span>  
  
-   <span data-ttu-id="3f2dd-109">Tarefas posteriores à atualização e considerações.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-109">Post-upgrade tasks and considerations.</span></span>  
  
## <a name="known-upgrade-issues"></a><span data-ttu-id="3f2dd-110">Problemas de atualização conhecidos</span><span class="sxs-lookup"><span data-stu-id="3f2dd-110">Known Upgrade issues</span></span>  
 <span data-ttu-id="3f2dd-111">Antes de atualizar o [!INCLUDE[ssDE](../../includes/ssde-md.md)], revise [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-111">Before upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], review [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span></span> <span data-ttu-id="3f2dd-112">Para obter mais informações sobre cenários de atualização compatíveis e problemas conhecidos de atualização, consulte [Versões com Suporte e Atualizações de Edição](supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-112">For information about supported upgrade scenarios and upgrade known issues, see [Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md).</span></span> <span data-ttu-id="3f2dd-113">Para obter conteúdo de compatibilidade com versões anteriores para outros componentes do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , consulte [Backward Compatibility](../../getting-started/backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-113">For backward compatibility content for other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, see [Backward Compatibility](../../getting-started/backward-compatibility.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3f2dd-114">Antes de atualizar de uma edição do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para outra, verifique se há suporte à funcionalidade usada atualmente na edição para a qual está atualizando.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-114">Before you upgrade from one edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to another, verify that the functionality that you are currently using is supported in the edition to which you are upgrading.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3f2dd-115">Quando você atualizar para o [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] de uma versão anterior da edição do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise, escolha entre Enterprise Edition: Licenciamento baseado em núcleo e Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-115">When you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] from a prior version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise edition, choose between Enterprise Edition: Core-based Licensing and Enterprise Edition.</span></span> <span data-ttu-id="3f2dd-116">Estas edições Enterprise só diferem com relação aos modos de licenciamento.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-116">These Enterprise editions differ only with respect to the licensing modes.</span></span> <span data-ttu-id="3f2dd-117">Para saber mais, confira [Compute Capacity Limits by Edition of SQL Server](../../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-117">For more information, see [Compute Capacity Limits by Edition of SQL Server](../../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span></span>  
  
## <a name="pre-upgrade-checklist"></a><span data-ttu-id="3f2dd-118">Lista de verificação anterior à atualização</span><span class="sxs-lookup"><span data-stu-id="3f2dd-118">Pre-Upgrade Checklist</span></span>  
 <span data-ttu-id="3f2dd-119">O programa de Instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dá suporte à atualização do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] a partir de uma versão anterior.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-119">Upgrading [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from an earlier version is supported by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup program.</span></span> <span data-ttu-id="3f2dd-120">Também é possível migrar bancos de dados de versões anteriores do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3f2dd-120">You can also migrate databases from previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] versions.</span></span> <span data-ttu-id="3f2dd-121">A migração pode ser feita de uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para outra no mesmo computador ou de uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] em outro computador.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-121">Migration can be from one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance to another on the same computer, or from a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance on another computer.</span></span> <span data-ttu-id="3f2dd-122">As opções de migração incluem o uso do Assistente para Copiar Banco de Dados, a funcionalidade de backup e restauração, o uso do Assistente para Importação e Exportação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] e de métodos de importação/exportação em massa.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-122">Migration options include use of the Copy Database Wizard, Backup and restore functionality, use of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] Import and Export Wizard, and bulk export/bulk import methods.</span></span>  
  
 <span data-ttu-id="3f2dd-123">Antes de atualizar o [!INCLUDE[ssDE](../../includes/ssde-md.md)], revise o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-123">Before upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], review the following:</span></span>  
  
-   <span data-ttu-id="3f2dd-124">Analise os [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-124">Review [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-125">Analise os [Check Parameters for the System Configuration Checker](check-parameters-for-the-system-configuration-checker.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-125">Review [Check Parameters for the System Configuration Checker](check-parameters-for-the-system-configuration-checker.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-126">Analise os [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-126">Review [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-127">Examine o tópico [Atualizações de versão e edição com suporte](supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-127">Review [Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-128">Analise o tópico [Usar o Supervisor de Atualização para preparar para atualizações](../../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-128">Review [Use Upgrade Advisor to Prepare for Upgrades](../../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-129">Analise o tópico [Usar o Distributed Replay Utility para preparar para atualizações](../../sql-server/install/use-the-distributed-replay-utility-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-129">Review [Use the Distributed Replay Utility to Prepare for Upgrades](../../sql-server/install/use-the-distributed-replay-utility-to-prepare-for-upgrades.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-130">Analise os [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-130">Review [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-131">Analise o tópico [Migrar planos de consulta](change-the-database-compatibility-mode-and-use-the-query-store.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-131">Review [Migrate Query Plans](change-the-database-compatibility-mode-and-use-the-query-store.md).</span></span>  
  
 <span data-ttu-id="3f2dd-132">Examine os seguintes problemas e faça alterações antes de atualizar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-132">Review the following issues and make changes before you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="3f2dd-133">Ao atualizar instâncias do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] onde o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent é inscrito em relações de MSX/TSX, atualize os servidores de destino antes de atualizar os servidores mestres.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-133">When upgrading instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is enlisted in MSX/TSX relationships, upgrade target servers before you upgrade master servers.</span></span> <span data-ttu-id="3f2dd-134">Se você atualizar servidores mestres antes de servidores de destino, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent não poderá se conectar a instâncias principais do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-134">If you upgrade master servers before target servers, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent will not be able to connect to master instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="3f2dd-135">Ao atualizar de uma edição de 64 bits do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para uma edição de 64 bits do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], é necessário atualizar o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] antes de atualizar o [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-135">When upgrading from a 64-bit edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to a 64-bit edition of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must upgrade [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] before you upgrade the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="3f2dd-136">Faça backup de todos os arquivos de banco de dados do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] da instância a ser atualizada, para que seja possível restaurá-los se isso for necessário.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-136">Back up all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files from the instance to be upgraded, so that you can restore them, if it is required.</span></span>  
  
-   <span data-ttu-id="3f2dd-137">Execute os comandos DBCC (Database Console Commands) apropriados nos bancos de dados a serem atualizados para verificar se eles se encontram em um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-137">Run the appropriate Database Console Commands (DBCC) on databases to be upgraded to ensure that they are in a consistent state.</span></span>  
  
-   <span data-ttu-id="3f2dd-138">Calcule o espaço em disco necessário para atualizar os componentes do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , além dos bancos de dados de usuários.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-138">Estimate the disk space that is required to upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, in addition to user databases.</span></span> <span data-ttu-id="3f2dd-139">Para obter o espaço em disco necessário pelos componentes do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , consulte [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-139">For disk space that is required by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, see [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-140">Verifique se os bancos de dados do sistema [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] existentes - master, model, msdb e tempdb - estão configurados para crescimento automático e verifique se eles têm espaço suficiente no disco rígido.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-140">Ensure that existing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system databases - master, model, msdb, and tempdb - are configured to autogrow, and ensure that they have sufficient hard disk space.</span></span>  
  
-   <span data-ttu-id="3f2dd-141">Verifique se todos os servidores de banco de dados têm informações de logon no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-141">Ensure that all database servers have logon information in the master database.</span></span> <span data-ttu-id="3f2dd-142">Isso é importante para restaurar um banco de dados, pois as informações de logon de sistema residem em master.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-142">This is important for restoring a database, as system logon information resides in master.</span></span>  
  
-   <span data-ttu-id="3f2dd-143">Desabilite todos os procedimentos armazenados de inicialização, pois o processo de atualização irá interromper e iniciar serviços na instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que está sendo atualizada.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-143">Disable all startup stored procedures, as the upgrade process will stop and start services on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance being upgraded.</span></span> <span data-ttu-id="3f2dd-144">Os procedimentos armazenados processados no momento da inicialização podem bloquear o processo de atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-144">Stored procedures processed at startup time might block the upgrade process.</span></span>  
  
-   <span data-ttu-id="3f2dd-145">Certifique-se que a Replicação esteja atualizada e interrompa-a.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-145">Make sure that Replication is current and then stop Replication.</span></span>  
  
-   <span data-ttu-id="3f2dd-146">Encerre todos os aplicativos, inclusive todos os serviços que dependam do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3f2dd-146">Quit all applications, including all services that have [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dependencies.</span></span> <span data-ttu-id="3f2dd-147">A atualização poderá falhar se aplicativos locais forem conectados à instância que está sendo atualizada.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-147">Upgrade might fail if local applications are connected to the instance being upgraded.</span></span>  
  
-   <span data-ttu-id="3f2dd-148">Se você usa Espelhamento de Banco de Dados, consulte [Minimizar o tempo de inatividade para bancos de dados espelhados ao atualizar instâncias do servidor](../database-mirroring/upgrading-mirrored-instances.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-148">If you use Database Mirroring, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](../database-mirroring/upgrading-mirrored-instances.md).</span></span>  
  
## <a name="upgrading-the-database-engine"></a><span data-ttu-id="3f2dd-149">Atualizando o Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="3f2dd-149">Upgrading the Database Engine</span></span>  
 <span data-ttu-id="3f2dd-150">Você pode substituir uma instalação do [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] ou posterior por uma atualização de versão.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-150">You can overwrite an installation of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or later with a version upgrade.</span></span> <span data-ttu-id="3f2dd-151">Se uma versão anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] for detectada ao executar a Instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , todos os arquivos de programas anteriores do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] serão atualizados e todos os dados armazenados na instância anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] serão preservados.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-151">If an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is detected when you run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup, all previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] program files are upgraded, and all data stored in the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance is preserved.</span></span> <span data-ttu-id="3f2dd-152">Além disso, as versões anteriores dos Manuais Online do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] permanecerão intactas no computador.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-152">In addition, earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online will remain intact on the computer.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="3f2dd-153">Ao executar o programa de instalação do SQL Server 2014, a instância do SQL Server é interrompida e reiniciada como parte da execução das verificações pré-atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-153">When running the SQL Server 2014 setup program, the SQL Server instance is stopped and restarted as part of running the pre-upgrade checks.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="3f2dd-154">Quando você atualizar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], a instância anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] será substituída e não mais existirá no computador.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-154">When you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance will be overwritten and will no longer exist on your computer.</span></span> <span data-ttu-id="3f2dd-155">Antes de atualizar, faça backup dos bancos de dados do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e de outros objetos associados à instância anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3f2dd-155">Before upgrading, back up [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases and other objects associated with the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="3f2dd-156">Você pode atualizar o [!INCLUDE[ssDE](../../includes/ssde-md.md)] por meio do Assistente de Instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3f2dd-156">You can upgrade the [!INCLUDE[ssDE](../../includes/ssde-md.md)] by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Installation Wizard.</span></span>  
  
### <a name="database-compatibility-level-after-upgrade"></a><span data-ttu-id="3f2dd-157">Nível de compatibilidade do banco de dados após a atualização</span><span class="sxs-lookup"><span data-stu-id="3f2dd-157">Database Compatibility Level After Upgrade</span></span>  
 <span data-ttu-id="3f2dd-158">Os níveis de compatibilidade dos `tempdb` `model` bancos de `msdb` dados de **recursos** , e são definidos como 120 após a atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-158">The compatibility levels of the `tempdb`, `model`, `msdb` and **Resource** databases are set to 120 after upgrade.</span></span> <span data-ttu-id="3f2dd-159">O banco de dados do sistema `master` mantém o nível de compatibilidade anterior à atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-159">The `master` system database retains the compatibility level it had before upgrade.</span></span>  
  
 <span data-ttu-id="3f2dd-160">Se o nível de compatibilidade de um banco de dados de usuário era 100 ou mais alto antes da atualização, ele permanecerá o mesmo depois da atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-160">If the compatibility level of a user database was 100 or higher before the upgrade, it remains the same after upgrade.</span></span> <span data-ttu-id="3f2dd-161">Se o nível de compatibilidade era 90 antes da atualização, no banco de dados atualizado, o nível de compatibilidade será definido como 100, que é o nível de compatibilidade mais baixo com suporte no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-161">If the compatibility level was 90 before upgrade, in the upgraded database, the compatibility level is set to 100, which is the lowest supported compatibility level in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3f2dd-162">Os novos bancos de dados de usuários herdam o nível de compatibilidade do banco de dados `model`.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-162">New user databases will inherit the compatibility level of the `model` database.</span></span>  
  
## <a name="migrating-databases"></a><span data-ttu-id="3f2dd-163">Migrando bancos de dados</span><span class="sxs-lookup"><span data-stu-id="3f2dd-163">Migrating Databases</span></span>  
 <span data-ttu-id="3f2dd-164">É possível mover bancos de dados do usuário para uma instância do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] por meio das funcionalidades de backup e restauração ou anexação e desanexação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-164">You can move user databases to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using backup and restore or detach and attach functionalities in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3f2dd-165">Para obter mais informações, consulte [Copiar bancos de dads com backup e restauração](../../relational-databases/databases/copy-databases-with-backup-and-restore.md) ou [Desanexar e anexar banco de dados &#40;SQL Server&#41;](../../relational-databases/databases/database-detach-and-attach-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-165">For more information, see [Copy Databases with Backup and Restore](../../relational-databases/databases/copy-databases-with-backup-and-restore.md) or [Database Detach and Attach &#40;SQL Server&#41;](../../relational-databases/databases/database-detach-and-attach-sql-server.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3f2dd-166">Um banco de dados que tenha o nome idêntico em servidores de origem e de destino não pode ser movido ou copiado.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-166">A database that has the identical name on both source and destination servers cannot be moved or copied.</span></span> <span data-ttu-id="3f2dd-167">Nesse caso, ele será anotado como "Já existe".</span><span class="sxs-lookup"><span data-stu-id="3f2dd-167">In this case, it will be noted as "Already exists."</span></span>  
  
 <span data-ttu-id="3f2dd-168">Para obter mais informações, consulte [Use the Copy Database Wizard](../../relational-databases/databases/use-the-copy-database-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-168">For more information, see [Use the Copy Database Wizard](../../relational-databases/databases/use-the-copy-database-wizard.md).</span></span>  
  
## <a name="after-upgrading-the-database-engine"></a><span data-ttu-id="3f2dd-169">Depois de atualizar o Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="3f2dd-169">After Upgrading the Database Engine</span></span>  
 <span data-ttu-id="3f2dd-170">Depois de atualizar o [!INCLUDE[ssDE](../../includes/ssde-md.md)], conclua as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-170">After upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], complete the following tasks:</span></span>  
  
-   <span data-ttu-id="3f2dd-171">Registre novamente seus servidores.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-171">Re-register your servers.</span></span> <span data-ttu-id="3f2dd-172">Para obter mais informações sobre como registrar servidores, consulte [Registrar Servidores](../../ssms/register-servers/register-servers.md).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-172">For more information about registering servers, see [Register Servers](../../ssms/register-servers/register-servers.md).</span></span>  
  
-   <span data-ttu-id="3f2dd-173">Preencha novamente catálogos de texto completo para garantir a consistência semântica em resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-173">Re-populate full-text catalogs to ensure semantic consistency in query results.</span></span>  
  
     [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="3f2dd-174">instala novos separadores de palavras para uso pela Pesquisa semântica e de texto completo.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-174">installs new word breakers for use by Full-Text and Semantic Search.</span></span> <span data-ttu-id="3f2dd-175">Os separadores de palavras são usados na indexação e na consulta.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-175">The word breakers are used both at indexing time and at query time.</span></span> <span data-ttu-id="3f2dd-176">Se você não recriar os catálogos de texto completo, seus resultados da pesquisa poderão ser inconsistentes.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-176">If you do not rebuild the full-text catalogs, your search results may be inconsistent.</span></span> <span data-ttu-id="3f2dd-177">Se você emitir uma consulta de texto completo que procura uma frase que é interrompida diferentemente pelo separador de palavras em uma versão anterior do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e o separador de palavras atual, um documento ou linha contendo a frase talvez não seja recuperada.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-177">If you issue a full-text query that looks for a phrase that is broken differently by the word breaker in a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current word breaker, a document or row containing the phrase might not be retrieved.</span></span> <span data-ttu-id="3f2dd-178">Isso ocorre porque as frases indexadas foram quebradas usando uma lógica diferente da usada pela consulta.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-178">This is because the indexed phrases were broken using different logic than the query is using.</span></span> <span data-ttu-id="3f2dd-179">A solução é preencher novamente (recompilar) os catálogos de texto completo com os novos separadores de palavras de forma que os comportamentos de tempo de indexação e de consulta sejam idênticos.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-179">The solution is to repopulate (rebuild) the full-text catalogs with the new word breakers so that index time and query time behavior are identical.</span></span>  
  
     <span data-ttu-id="3f2dd-180">Para obter mais informações, consulte [sp_fulltext_catalog &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-catalog-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="3f2dd-180">For more information, see [sp_fulltext_catalog &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-catalog-transact-sql).</span></span>  
  
-   <span data-ttu-id="3f2dd-181">Configure a instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3f2dd-181">Configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span> <span data-ttu-id="3f2dd-182">Para reduzir a área da superfície de um sistema vulnerável a ataques, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instala e habilita seletivamente serviços e recursos essenciais.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-182">To reduce the attackable surface area of a system, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] selectively installs and enables key services and features.</span></span>  
  
-   <span data-ttu-id="3f2dd-183">Valide ou remova as dicas de USE PLAN geradas pelo [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] e aplicadas a consultas em tabelas e índices particionados.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-183">Validate or remove USE PLAN hints that are generated by [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and applied to queries on partitioned tables and indexes.</span></span>  
  
     <span data-ttu-id="3f2dd-184">O [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] altera o modo como as consultas em tabelas e índices particionados são processadas.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-184">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] changes the way queries on partitioned tables and indexes are processed.</span></span> <span data-ttu-id="3f2dd-185">As consultas em objetos particionados que usam a dica USE PLAN para um plano gerado pelo [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] podem conter um plano que não pode ser usado no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-185">Queries on partitioned objects that use the USE PLAN hint for a plan that is generated by [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] might contain a plan that is not usable in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="3f2dd-186">Recomenda-se os seguintes procedimentos após a atualização do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-186">We recommend the following procedures after you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
     <span data-ttu-id="3f2dd-187">**Quando a dica USE PLAN for especificada diretamente em uma consulta:**</span><span class="sxs-lookup"><span data-stu-id="3f2dd-187">**When the USE PLAN hint is specified directly in a query:**</span></span>  
  
    1.  <span data-ttu-id="3f2dd-188">Remova a dica USE PLAN da consulta.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-188">Remove the USE PLAN hint from the query.</span></span>  
  
    2.  <span data-ttu-id="3f2dd-189">Teste a consulta.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-189">Test the query.</span></span>  
  
    3.  <span data-ttu-id="3f2dd-190">Se o otimizador não selecionar um plano apropriado, ajuste a consulta e considere a especificação da dica USE PLAN com o plano de consulta desejado.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-190">If the optimizer does not select an appropriate plan, tune the query, and then consider specifying the USE PLAN hint with the desired query plan.</span></span>  
  
     <span data-ttu-id="3f2dd-191">**Quando a dica USE PLAN for especificada em uma guia de plano:**</span><span class="sxs-lookup"><span data-stu-id="3f2dd-191">**When the USE PLAN hint is specified in a plan guide:**</span></span>  
  
    1.  <span data-ttu-id="3f2dd-192">Use a função sys.fn_validate_plan_guide para verificar a validade da guia de plano.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-192">Use the sys.fn_validate_plan_guide function to check the validity of the plan guide.</span></span> <span data-ttu-id="3f2dd-193">Como alternativa, é possível verificar se existem planos inválidos por meio do evento Guia de Plano sem Êxito no [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3f2dd-193">Alternatively, you can check for invalid plans by using the Plan Guide Unsuccessful event in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
    2.  <span data-ttu-id="3f2dd-194">Se a guia de plano não for válida, descarte-a.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-194">If the plan guide is not valid, drop the plan guide.</span></span> <span data-ttu-id="3f2dd-195">Se o otimizador não selecionar um plano apropriado, ajuste a consulta e considere a especificação da dica USE PLAN com o plano de consulta desejado.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-195">If the optimizer does not select an appropriate plan, tune the query, and then consider specifying the USE PLAN hint with the query plan that you want.</span></span>  
  
     <span data-ttu-id="3f2dd-196">Um plano inválido não causará a falha da consulta quando a dica USE PLAN for especificada em uma guia de plano.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-196">A plan that is not valid will not cause the query to fail when the USE PLAN hint is specified in a plan guide.</span></span> <span data-ttu-id="3f2dd-197">Em vez disso, a consulta será compilada sem usar a dica USE PLAN.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-197">Instead, the query is compiled without using the USE PLAN hint.</span></span>  
  
 <span data-ttu-id="3f2dd-198">Quaisquer bancos de dados que foram marcados como habilitados ou desabilitados para texto completo antes da atualização manterão esse status depois de atualização.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-198">Any databases that were marked full-text enabled or disabled before the upgrade will maintain that status after upgrade.</span></span> <span data-ttu-id="3f2dd-199">Depois da atualização, os catálogos de texto completo serão reconstruídos e populados automaticamente para todos os bancos de dados habilitados para texto completo.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-199">After the upgrade, the full-text catalogs will be rebuilt and populated automatically for all full-text enabled databases.</span></span> <span data-ttu-id="3f2dd-200">Essa é uma operação demorada e que consume recursos.</span><span class="sxs-lookup"><span data-stu-id="3f2dd-200">This is a time-consuming and resource-consuming operation.</span></span> <span data-ttu-id="3f2dd-201">Você pode pausar temporariamente a operação de indexação de texto completo executando a seguinte instrução:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-201">You can pause the full-text indexing operation temporarily by running the following statement:</span></span>  
  
```  
EXEC sp_fulltext_service 'pause_indexing', 1;  
```  
  
 <span data-ttu-id="3f2dd-202">Para retomar a população do índice de texto completo, execute a seguinte instrução:</span><span class="sxs-lookup"><span data-stu-id="3f2dd-202">To resume full-text index population, run the following statement:</span></span>  
  
```  
EXEC sp_fulltext_service 'pause_indexing', 0;  
```  
  
## <a name="see-also"></a><span data-ttu-id="3f2dd-203">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="3f2dd-203">See Also</span></span>  
 <span data-ttu-id="3f2dd-204">[Atualizações de versão e edição com suporte](supported-version-and-edition-upgrades.md) </span><span class="sxs-lookup"><span data-stu-id="3f2dd-204">[Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md) </span></span>  
 <span data-ttu-id="3f2dd-205">[Trabalhar com várias versões e instâncias do SQL Server](../../../2014/sql-server/install/work-with-multiple-versions-and-instances-of-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="3f2dd-205">[Work with Multiple Versions and Instances of SQL Server](../../../2014/sql-server/install/work-with-multiple-versions-and-instances-of-sql-server.md) </span></span>  
 <span data-ttu-id="3f2dd-206">[Compatibilidade com versões anteriores](../../getting-started/backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="3f2dd-206">[Backward Compatibility](../../getting-started/backward-compatibility.md) </span></span>  
 [<span data-ttu-id="3f2dd-207">Atualizar bancos de dados replicados</span><span class="sxs-lookup"><span data-stu-id="3f2dd-207">Upgrade Replicated Databases</span></span>](upgrade-replicated-databases.md)  
  
  
