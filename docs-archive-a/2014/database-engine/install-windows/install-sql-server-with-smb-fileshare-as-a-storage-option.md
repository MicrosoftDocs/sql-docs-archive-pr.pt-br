---
title: Instalar o SQL Server com o compartilhamento de arquivos SMB como uma opção de armazenamento | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
ms.assetid: 8b7810b2-637e-46a3-9fe1-d055898ba639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3d59c2861e2419d76d3dc8e3fc3aaab91bf1e99b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87679495"
---
# <a name="install-sql-server-with-smb-fileshare-as-a-storage-option"></a><span data-ttu-id="9ef8e-102">Instalar o SQL Server com o compartilhamento de arquivos SMB como uma opção de armazenamento</span><span class="sxs-lookup"><span data-stu-id="9ef8e-102">Install SQL Server with SMB Fileshare as a Storage Option</span></span>
  <span data-ttu-id="9ef8e-103">[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]A partir de, os bancos de dados do sistema (Mestre, modelo, msdb e tempdb) e [!INCLUDE[ssDE](../../includes/ssde-md.md)] os bancos de dados de usuário podem ser instalados com o servidor de arquivos do protocolo SMB como uma opção de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-103">Starting [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], system databases (Master, Model, MSDB, and TempDB), and [!INCLUDE[ssDE](../../includes/ssde-md.md)] user databases can be installed with Server Message Block (SMB) file server as a storage option.</span></span> <span data-ttu-id="9ef8e-104">Isso se aplica a instalações autônomas do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e a FCI (instalações de cluster de failover) do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-104">This applies to both [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] stand-alone and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster installations (FCI).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9ef8e-105">O fluxo de arquivos não tem suporte em um compartilhamento de arquivos SMB.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-105">Filestream is currently not supported on an SMB file share.</span></span>  
  
## <a name="installation-considerations"></a><span data-ttu-id="9ef8e-106">Considerações de instalação</span><span class="sxs-lookup"><span data-stu-id="9ef8e-106">Installation Considerations</span></span>  
  
### <a name="smb-file-share-formats"></a><span data-ttu-id="9ef8e-107">Formatos de compartilhamento de arquivo SMB:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-107">SMB File share Formats:</span></span>  
 <span data-ttu-id="9ef8e-108">Embora especificando o compartilhamento de arquivos SMB, os formatos de caminho a seguir têm suporte da UNC (Convenção de Nomenclatura Universal) para bancos de dados autônomos e FCI.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-108">While specifying the SMB file share, the following are supported Universal Naming Convention (UNC) Path formats for standalone and FCI databases:</span></span>  
  
-   <span data-ttu-id="9ef8e-109">\\\ServerName\ShareName</span><span class="sxs-lookup"><span data-stu-id="9ef8e-109">\\\ServerName\ShareName</span></span>\  
  
-   <span data-ttu-id="9ef8e-110">\\\ServerName\ShareName</span><span class="sxs-lookup"><span data-stu-id="9ef8e-110">\\\ServerName\ShareName</span></span>  
  
 <span data-ttu-id="9ef8e-111">Para obter mais informações sobre Convenção de nomenclatura universal, consulte [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) ( https://go.microsoft.com/fwlink/?LinkId=245534) .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-111">For more information about Universal Naming Convention, see [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) (https://go.microsoft.com/fwlink/?LinkId=245534).</span></span>  
  
 <span data-ttu-id="9ef8e-112">O caminho UNC de loopback (um caminho UNC cujo nome de servidor é localhost, 127.0.0.1 ou o nome do computador local) não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-112">The loopback UNC path (a UNC path whose server name is localhost, 127.0.0.1, or the local machine name) is not supported.</span></span> <span data-ttu-id="9ef8e-113">Como um caso especial, o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usando o cluster de servidor de arquivos que está hospedado no mesmo nó em que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] está sendo executado também não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-113">As a special case, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using File Server Cluster which is hosted on the same node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running is also not supported.</span></span> <span data-ttu-id="9ef8e-114">Para impedir essa situação, é recomendável que o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e o cluster de servidor de arquivos seja criado em clusters do Windows separados.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-114">To prevent this situation, it is recommended that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and File Server Cluster to be created on separated Windows Clusters.</span></span>  
  
 <span data-ttu-id="9ef8e-115">Os formatos de caminho UNC abaixo não têm suporte:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-115">The below UNC path formats are not supported:</span></span>  
  
-   <span data-ttu-id="9ef8e-116">Caminho de loopback, por exemplo, \\\localhost\\..\ or \\\127.0.0.1\\...</span><span class="sxs-lookup"><span data-stu-id="9ef8e-116">Loopback path, e.g., \\\localhost\\..\ or \\\127.0.0.1\\...</span></span>\  
  
-   <span data-ttu-id="9ef8e-117">Compartilhamentos administrativos, por exemplo, \\\servername\x$</span><span class="sxs-lookup"><span data-stu-id="9ef8e-117">Administrative shares, e.g., \\\servername\x$</span></span>  
  
-   <span data-ttu-id="9ef8e-118">Outros formatos de caminho UNC como \\\\?\x:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-118">Other UNC path formats like \\\\?\x:</span></span>\  
  
-   <span data-ttu-id="9ef8e-119">Unidades de rede mapeadas.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-119">Mapped network drives.</span></span>  
  
### <a name="supported-data-definition-language-ddl-statements"></a><span data-ttu-id="9ef8e-120">Instruções DLL (linguagem de definição de dados) com suporte</span><span class="sxs-lookup"><span data-stu-id="9ef8e-120">Supported Data Definition Language (DDL) statements</span></span>  
 <span data-ttu-id="9ef8e-121">As instruções DDL de [!INCLUDE[tsql](../../includes/tsql-md.md)] e os procedimentos armazenados de mecanismo de banco de dados a seguir dão suporte a compartilhamentos de arquivos SMB:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-121">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements and database engine stored procedures support SMB file shares:</span></span>  
  
1.  [<span data-ttu-id="9ef8e-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
2.  [<span data-ttu-id="9ef8e-123">ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-123">ALTER DATABASE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql)  
  
3.  [<span data-ttu-id="9ef8e-124">RESTORE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-124">RESTORE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-transact-sql)  
  
4.  [<span data-ttu-id="9ef8e-125">BACKUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-125">BACKUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/backup-transact-sql)  
  
5.  [<span data-ttu-id="9ef8e-126">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-126">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
6.  [<span data-ttu-id="9ef8e-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9ef8e-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
### <a name="installation-options"></a><span data-ttu-id="9ef8e-128">Opções de instalação</span><span class="sxs-lookup"><span data-stu-id="9ef8e-128">Installation options</span></span>  
  
-   <span data-ttu-id="9ef8e-129">Na página de interface do usuário de instalação "Configuração do Mecanismo de Banco de Dados", guia "Diretórios de Dados", defina o parâmetro Diretório raiz de dados como "\\\\fileserver1\share1\\".</span><span class="sxs-lookup"><span data-stu-id="9ef8e-129">In setup UI "Database Engine Configuration" page, "Data Directories" tab, set the parameter "Data root directory as "\\\fileserver1\share1\".</span></span>  
  
-   <span data-ttu-id="9ef8e-130">Na instalação do prompt de comando, especifique "/INSTALLSQLDATADIR" como "\\\fileserver1\share1\\".</span><span class="sxs-lookup"><span data-stu-id="9ef8e-130">In command prompt installation, specify the "/INSTALLSQLDATADIR" as "\\\fileserver1\share1\".</span></span>  
  
     <span data-ttu-id="9ef8e-131">Veja aqui a sintaxe de exemplo para instalar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] em um servidor Autônomo usando a opção de compartilhamento de arquivos SMB:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-131">Here is the sample syntax to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on a Standalone server using SMB file share option:</span></span>  
  
    ```  
    Setup.exe /q /ACTION=Install /FEATURES=SQL /INSTANCENAME=MSSQLSERVER /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="<StrongPassword>" /SQLSYSADMINACCOUNTS="<DomainName\UserName>" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="<StrongPassword>" /INSTALLSQLDATADIR="\\FileServer\Share1\" /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="9ef8e-132">Para instalar uma instância de cluster de failover do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] de nó único com o [!INCLUDE[ssDE](../../includes/ssde-md.md)] e o [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], a instância padrão:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-132">To install a single-node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance with the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], default instance:</span></span>  
  
    ```  
    setup.exe /q /ACTION=InstallFailoverCluster /InstanceName=MSSQLSERVER /INDICATEPROGRESS /ASSYSADMINACCOUNTS="<DomainName\UserName>" /ASDATADIR=<Drive>:\OLAP\Data /ASLOGDIR=<Drive>:\OLAP\Log /ASBACKUPDIR=<Drive>:\OLAP\Backup /ASCONFIGDIR=<Drive>:\OLAP\Config /ASTEMPDIR=<Drive>:\OLAP\Temp /FAILOVERCLUSTERDISKS="<Cluster Disk Resource Name - for example, 'Disk S:'" /FAILOVERCLUSTERNETWORKNAME="<Insert Network Name>" /FAILOVERCLUSTERIPADDRESSES="IPv4;xx.xxx.xx.xx;Cluster Network;xxx.xxx.xxx.x" /FAILOVERCLUSTERGROUP="MSSQLSERVER" /Features=AS,SQL /ASSVCACCOUNT="<DomainName\UserName>" /ASSVCPASSWORD="xxxxxxxxxxx" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="xxxxxxxxxxx" /INSTALLSQLDATADIR="\\FileServer\Share1\" /SQLCOLLATION="SQL_Latin1_General_CP1_CS_AS" /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="xxxxxxxxxxx" /SQLSYSADMINACCOUNTS="<DomainName\UserName> /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="9ef8e-133">Para obter mais informações sobre o uso de várias opções de parâmetro de linha de comando no [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , consulte [instalar SQL Server 2014 no prompt de comando](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-133">For more information about the usage of various command line parameter options in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], see [Install SQL Server 2014 from the Command Prompt](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="operating-system-considerations-smb-protocol-vs-ssnoversion"></a><span data-ttu-id="9ef8e-134">Considerações sobre o sistema operacional (protocolo SMB vs. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span><span class="sxs-lookup"><span data-stu-id="9ef8e-134">Operating System Considerations (SMB Protocol vs. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span></span>  
 <span data-ttu-id="9ef8e-135">Sistemas operacionais Windows diferentes têm versões de protocolo SMB diferentes e a versão do protocolo SMB é transparente para o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ef8e-135">Different Windows operating systems has different SMB protocol versions, and the SMB protocol version is transparent to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9ef8e-136">Você pode localizar os benefícios das versões diferentes do protocolo SMB com relação ao [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ef8e-136">You can find the benefits of different SMB protocol versions with respect to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
|<span data-ttu-id="9ef8e-137">Sistema operacional</span><span class="sxs-lookup"><span data-stu-id="9ef8e-137">Operating System</span></span>|<span data-ttu-id="9ef8e-138">versão do protocolo SMB2</span><span class="sxs-lookup"><span data-stu-id="9ef8e-138">SMB2 protocol version</span></span>|<span data-ttu-id="9ef8e-139">Benefícios do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9ef8e-139">Benefits to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|----------------------|---------------------------|-------------------------------------------|  
|[!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)] <span data-ttu-id="9ef8e-140">SP 2</span><span class="sxs-lookup"><span data-stu-id="9ef8e-140">SP 2</span></span>|<span data-ttu-id="9ef8e-141">2,0</span><span class="sxs-lookup"><span data-stu-id="9ef8e-141">2.0</span></span>|<span data-ttu-id="9ef8e-142">Desempenho aprimorado em relação a versões de SMB anteriores.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-142">Improved performance over previous SMB versions.</span></span><br /><br /> <span data-ttu-id="9ef8e-143">Durabilidade, que ajuda a recuperar de pequenos problemas de rede temporários.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-143">Durability, which helps recover from temporary network glitches.</span></span>|  
|[!INCLUDE[winserver2008r2](../../includes/winserver2008r2-md.md)] <span data-ttu-id="9ef8e-144">SP1, incluindo o Server Core</span><span class="sxs-lookup"><span data-stu-id="9ef8e-144">SP 1, including Server Core</span></span>|<span data-ttu-id="9ef8e-145">2.1</span><span class="sxs-lookup"><span data-stu-id="9ef8e-145">2.1</span></span>|<span data-ttu-id="9ef8e-146">Suporte para MTU grande, que beneficia transferências de dados grandes, como backup e restauração de SQL.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-146">Support for large MTU, which benefits large data transfers, such as SQL backup and restore.</span></span> <span data-ttu-id="9ef8e-147">Este recurso deve ser habilitado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-147">This capability must be enabled by user.</span></span> <span data-ttu-id="9ef8e-148">Para obter mais detalhes sobre como habilitar essa funcionalidade, confira [Novidades do SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-148">For more details on how to enable this capability, see [What's New in SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span></span><br /><br /> <span data-ttu-id="9ef8e-149">Melhorias de desempenho significativas, especificamente para cargas de trabalho de estilo OLTP do SQL.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-149">Significant performance improvements, specifically for SQL OLTP style workloads.</span></span> <span data-ttu-id="9ef8e-150">Estas melhorias de desempenho exigem a aplicação de um hotfix.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-150">These performance improvements require applying a hotfix.</span></span> <span data-ttu-id="9ef8e-151">Para obter mais informações sobre o hotfix, clique [aqui](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-151">For more information on the hotfix, see [this](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)]<span data-ttu-id="9ef8e-152">incluindo o Server Core</span><span class="sxs-lookup"><span data-stu-id="9ef8e-152">, including Server Core</span></span>|<span data-ttu-id="9ef8e-153">3.0</span><span class="sxs-lookup"><span data-stu-id="9ef8e-153">3.0</span></span>|<span data-ttu-id="9ef8e-154">O suporte para failover transparente de compartilhamentos de arquivos fornece zero tempo de inatividade sem a intervenção de administrador exigida para DBA do SQL ou administrador de servidor de arquivos em configurações do cluster de servidor de arquivos.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-154">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="9ef8e-155">Suporte para ES usando diversas interfaces de rede simultaneamente, assim como tolerância para falhas de interface de rede.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-155">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure.</span></span><br /><br /> <span data-ttu-id="9ef8e-156">Suporte para interfaces de rede com recursos de RDMA.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-156">Support for network interfaces with RDMA capabilities.</span></span><br /><br /> <span data-ttu-id="9ef8e-157">Para obter mais informações sobre esses recursos e o protocolo SMB, consulte [Visão geral do protocolo SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-157">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="9ef8e-158">Suporte SoFS (Servidor de arquivo de expansão) com disponibilidade contínua.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-158">Support for Scale Out File Server (SoFS) with continuous availability.</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)] <span data-ttu-id="9ef8e-159">R2, incluindo o Server Core</span><span class="sxs-lookup"><span data-stu-id="9ef8e-159">R2, including Server Core</span></span>|<span data-ttu-id="9ef8e-160">3.2</span><span class="sxs-lookup"><span data-stu-id="9ef8e-160">3.2</span></span>|<span data-ttu-id="9ef8e-161">O suporte para failover transparente de compartilhamentos de arquivos fornece zero tempo de inatividade sem a intervenção de administrador exigida para DBA do SQL ou administrador de servidor de arquivos em configurações do cluster de servidor de arquivos.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-161">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="9ef8e-162">Suporte para IO usando diversas interfaces de rede simultaneamente, assim como tolerância para falhas de interface de rede, usando SMB Multichannel.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-162">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure, using SMB Multichannel.</span></span><br /><br /> <span data-ttu-id="9ef8e-163">Suporte para interfaces de rede com recursos de RDMA usando SMB Direct.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-163">Support for network interfaces with RDMA capabilities using SMB Direct.</span></span><br /><br /> <span data-ttu-id="9ef8e-164">Para obter mais informações sobre esses recursos e o protocolo SMB, consulte [Visão geral do protocolo SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-164">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="9ef8e-165">Suporte SoFS (Servidor de arquivo de expansão) com disponibilidade contínua.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-165">Support for Scale Out File Server (SoFS) with continuous availability.</span></span><br /><br /> <span data-ttu-id="9ef8e-166">Otimizado para leitura/gravação aleatória pequena de E/S comum para o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-166">Optimized for small random read/write I/O common to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span></span><br /><br /> <span data-ttu-id="9ef8e-167">O MTU (Unidade de transmissão máxima) é ativado por padrão, o que melhora significativamente o desempenho em grandes transferências sequenciais como data warehouse do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e o backup de banco de dados ou restauração.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-167">Maximum Transmission Unit (MTU) is turned on by default, which significantly enhances performance in large sequential transfers like [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data warehouse and database backup or restore.</span></span>|  
  
## <a name="security-considerations"></a><span data-ttu-id="9ef8e-168">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="9ef8e-168">Security Considerations</span></span>  
  
-   <span data-ttu-id="9ef8e-169">A conta de serviço [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e a conta de serviço [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent devem ter as permissões de compartilhamento FULL CONTROL e permissões NTFS nas pastas de compartilhamento SMB.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-169">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] agent service account should have FULL CONTROL share permissions and NTFS permissions on the SMB share folders.</span></span> <span data-ttu-id="9ef8e-170">A conta de serviço do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] podem ser uma conta de domínio ou uma conta de sistema se for usado um servidor de arquivos SMB.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-170">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account can be a domain account or a system account if an SMB file server is used.</span></span> <span data-ttu-id="9ef8e-171">Para obter mais informações sobre permissões de compartilhamento e NTFS, consulte [Permissões de compartilhamento e NTFS em um servidor de arquivos](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-171">For more information about share and NTFS permissions, see [Share and NTFS Permissions on a File Server](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="9ef8e-172">As permissões de compartilhamento FULL CONTROL e as permissões NTFS nas pastas de compartilhamento SMB devem ser restritas a: conta de serviço do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , conta de serviço do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent e usuários do Windows com funções de servidor admin.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-172">The FULL CONTROL share permissions and NTFS permissions on the SMB share folders should be restricted to: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account and windows users with admin server roles.</span></span>  
  
     <span data-ttu-id="9ef8e-173">Era recomendado usar a conta de domínio como uma conta de serviço do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ef8e-173">It is recommended to use domain account as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account.</span></span> <span data-ttu-id="9ef8e-174">Se a conta do sistema for usada como uma conta de serviço, conceda as permissões para a conta do computador no formato: _<domain_name>_ **\\** _<computer_name _>**$** .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-174">If system account is used as a service account, grant the permissions for the machine account in the format: _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
    > [!NOTE]  
    >  -   <span data-ttu-id="9ef8e-175">Durante instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], será necessário especificar a conta de domínio como uma conta de serviço se o compartilhamento de arquivos SMB for especificado como uma opção de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-175">During [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup, it is required to specify domain account as a service account if SMB file share is specified as a storage option.</span></span> <span data-ttu-id="9ef8e-176">Com o compartilhamento de arquivos SMB, a conta de Sistema somente poderá ser especificada como uma conta de serviço após a instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-176">With SMB file share, System account can only be specified as a service account post [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span>  
    > -   <span data-ttu-id="9ef8e-177">Contas virtuais não podem ser autenticadas em um local remoto.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-177">Virtual accounts cannot be authenticated to a remote location.</span></span> <span data-ttu-id="9ef8e-178">Todas as contas virtuais usam a permissão da conta de máquina.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-178">All virtual accounts use the permission of machine account.</span></span> <span data-ttu-id="9ef8e-179">Provisione a conta do computador no formato _<domain_name>_ **\\** _<computer_name>_ **$** .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-179">Provision the machine account in the format _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
-   <span data-ttu-id="9ef8e-180">A conta usada para instalar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve ter permissões FULL CONTROL na pasta de compartilhamento de arquivos SMB usada como o diretório de dados ou qualquer outra pasta de dados (diretório de banco de dados de usuário, diretório de log de banco de dados de usuário, diretório de TempDB, diretório de log TempDB, diretório de backup) durante a instalação de cluster.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-180">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have FULL CONTROL permissions on the SMB file share folder used as the data directory, or any other data folders (User database directory, user database log directory, TempDB directory, TempDB log directory, backup directory) during Cluster Setup.</span></span>  
  
-   <span data-ttu-id="9ef8e-181">A conta usada para instalar o [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve ter privilégios SeSecurityPrivilege no servidor de arquivos SMB.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-181">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should be granted SeSecurityPrivilege privileges on the SMB file server.</span></span> <span data-ttu-id="9ef8e-182">Para conceder esse privilégio, use o console Política de Segurança Local no servidor de arquivos para adicionar a conta de instalação do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à política Gerenciar a auditoria e o log de segurança.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-182">To grant this privilege, use the Local Security Policy console on the file server to add the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup account to the Manage auditing and security log policy.</span></span> <span data-ttu-id="9ef8e-183">Essa configuração está disponível na seção Atribuições de Direitos do Usuário, em Políticas Locais, no console Política de Segurança Local.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-183">This setting is available in the User Rights Assignments section under Local Policies in the Local Security Policy console.</span></span>  
  
## <a name="known-issues"></a><span data-ttu-id="9ef8e-184">Problemas Conhecidos</span><span class="sxs-lookup"><span data-stu-id="9ef8e-184">Known Issues</span></span>  
  
-   <span data-ttu-id="9ef8e-185">Ao desanexar um banco de dados do [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] que reside no armazenamento anexado por rede, você poderá ter um problema de permissão de banco de dados ao tentar reanexar o banco de dados do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="9ef8e-185">After you detach a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database that resides on network-attached storage, you might run into database permission issue while trying to reattach the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="9ef8e-186">O problema é definido [neste artigo da base de dados](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321) ).</span><span class="sxs-lookup"><span data-stu-id="9ef8e-186">The issue is defined in [this KB article](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span></span> <span data-ttu-id="9ef8e-187">Para resolver este problema, consulte a seção **Mais Informações** no artigo da Base de Dados de Conhecimento.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-187">To work around this issue, see the **More Information** section in the KB article.</span></span>  
  
-   <span data-ttu-id="9ef8e-188">Alguns terceiros, como o dispositivo NetApp, não dão suporte a todas as chamadas de API do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-188">Some third parties, like NetApp device do not support all SQL Server API calls.</span></span> <span data-ttu-id="9ef8e-189">Com eles, você pode obter:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-189">With these you might get:</span></span>   
    <span data-ttu-id="9ef8e-190">2015-06-04 13:14:19.97 spid9s erro: 17053, severidade: 16, estado: 1.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-190">2015-06-04 13:14:19.97 spid9s      Error: 17053, Severity: 16, State: 1.</span></span>  
    <span data-ttu-id="9ef8e-191">2015-06-04 13:14:19.97 spid9s DoDevIoCtlOut () GetOverlappedResult (): erro do sistema operacional 1 (função incorreta.) encontrado.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-191">2015-06-04 13:14:19.97 spid9s      DoDevIoCtlOut() GetOverlappedResult() : Operating system error 1(Incorrect function.) encountered.</span></span>  
  
     <span data-ttu-id="9ef8e-192">Para NTFS, o erro é inofensivo.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-192">For NTFS, the error is harmless.</span></span>  <span data-ttu-id="9ef8e-193">No entanto, para ReFS, o erro pode causar uma degradação significativa no desempenho.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-193">but for ReFS, it can lead to significant performance degradation.</span></span>  
  
-   <span data-ttu-id="9ef8e-194">Se o compartilhamento de arquivos SMB é usado como uma opção de armazenamento para uma instância clusterizada do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], por padrão o log de diagnóstico do cluster de failover do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] não pode ser gravado no compartilhamento de arquivos porque a DLL de recursos do [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] não tem a permissão de leitura/gravação no compartilhamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-194">If SMB file share is used as a storage option for a clustered instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], by default the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Failover Cluster Diagnostics Log cannot be written to the file share because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource DLL lacks the read/write permission on the file share.</span></span> <span data-ttu-id="9ef8e-195">Para resolver esse problema, tente um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-195">To resolve this issue, try one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="9ef8e-196">Conceda permissões de leitura/gravação no compartilhamento de arquivos a todos os objetos de computador no cluster.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-196">Grant read/write permissions on the file share to all computer objects in the cluster.</span></span>  
  
    2.  <span data-ttu-id="9ef8e-197">Defina o local dos logs de diagnóstico como um caminho de arquivo local.</span><span class="sxs-lookup"><span data-stu-id="9ef8e-197">Set the location of the diagnostic logs to a local file path.</span></span> <span data-ttu-id="9ef8e-198">Consulte o seguinte exemplo:</span><span class="sxs-lookup"><span data-stu-id="9ef8e-198">See the following example:</span></span>  
  
        ```sql  
        ALTER SERVER CONFIGURATION  
        SET DIAGNOSTICS LOG PATH = 'C:\logs';  
        ```  
  
## <a name="see-also"></a><span data-ttu-id="9ef8e-199">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="9ef8e-199">See Also</span></span>  
 <span data-ttu-id="9ef8e-200">[Planejando uma instalação do SQL Server](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span><span class="sxs-lookup"><span data-stu-id="9ef8e-200">[Planning a SQL Server Installation](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span></span>  
 <span data-ttu-id="9ef8e-201">[Tópicos de instruções sobre a instalação](../../../2014/sql-server/install/installation-how-to-topics.md) </span><span class="sxs-lookup"><span data-stu-id="9ef8e-201">[Installation How-to Topics](../../../2014/sql-server/install/installation-how-to-topics.md) </span></span>  
 [<span data-ttu-id="9ef8e-202">Configurar contas de serviço e permissões do Windows</span><span class="sxs-lookup"><span data-stu-id="9ef8e-202">Configure Windows Service Accounts and Permissions</span></span>](../configure-windows/configure-windows-service-accounts-and-permissions.md)  
  
  
